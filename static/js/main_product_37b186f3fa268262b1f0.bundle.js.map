{"version":3,"sources":["webpack:///main_product_37b186f3fa268262b1f0.bundle.js","webpack:///webpack/bootstrap 37b186f3fa268262b1f0","webpack:///./src/index.js","webpack:///./modules/manis.sign.js","webpack:///./~/strophe/strophe.js","webpack:///./modules/strophe/plugins/strophe.emuc.js","webpack:///./modules/manis.management.js","webpack:///./modules/manis.status.js","webpack:///./modules/libs/connectionquality.js","webpack:///./modules/libs/rtp_sts.js","webpack:///./modules/libs/local_sts.js","webpack:///./modules/libs/audio_levels.js","webpack:///./modules/manis.stream.js","webpack:///./~/webrtc-adapter/src/js/adapter_core.js","webpack:///./~/webrtc-adapter/src/js/adapter_factory.js","webpack:///./~/webrtc-adapter/src/js/utils.js","webpack:///./~/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack:///./~/webrtc-adapter/src/js/chrome/getusermedia.js","webpack:///./~/webrtc-adapter/src/js/edge/edge_shim.js","webpack:///./~/webrtc-adapter/src/js/edge/filtericeservers.js","webpack:///./~/rtcpeerconnection-shim/rtcpeerconnection.js","webpack:///./~/sdp/sdp.js","webpack:///./~/webrtc-adapter/src/js/edge/getusermedia.js","webpack:///./~/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack:///./~/webrtc-adapter/src/js/firefox/getusermedia.js","webpack:///./~/webrtc-adapter/src/js/safari/safari_shim.js","webpack:///./~/webrtc-adapter/src/js/common_shim.js","webpack:///./modules/manis.response.js","webpack:///./modules/manis.functions.js","webpack:///./modules/errorCode.js","webpack:///./modules/strophe/plugins/manis.utils.js","webpack:///./modules/strophe/plugins/strophe.jingle.sdp.util.js","webpack:///./~/jsencrypt/bin/jsencrypt.js","webpack:///./modules/manis.p2p.js","webpack:///./modules/libs/strophe.openfire.js","webpack:///./modules/strophe/plugins/strophe.jingle.js","webpack:///./modules/strophe/plugins/strophe.jingle.session.js","webpack:///./modules/strophe/plugins/strophe.jingle.sessionbase.js","webpack:///./modules/strophe/plugins/strophe.jingle.sdp.js","webpack:///./modules/libs/simulcast.js","webpack:///./~/sdp-transform/lib/index.js","webpack:///./~/sdp-transform/lib/parser.js","webpack:///./~/sdp-transform/lib/grammar.js","webpack:///./~/sdp-transform/lib/writer.js","webpack:///./modules/strophe/plugins/strophe.jingle.adapter.js","webpack:///./~/sdp-interop/lib/index.js","webpack:///./~/sdp-interop/lib/interop.js","webpack:///./~/sdp-interop/lib/transform.js","webpack:///./~/sdp-interop/~/sdp-transform/lib/index.js","webpack:///./~/sdp-interop/~/sdp-transform/lib/parser.js","webpack:///./~/sdp-interop/~/sdp-transform/lib/grammar.js","webpack:///./~/sdp-interop/~/sdp-transform/lib/writer.js","webpack:///./~/sdp-interop/lib/array-equals.js","webpack:///./~/x2js/x2js.js","webpack:///./modules/strophe/plugins/SdpUtil.js","webpack:///./modules/strophe/plugins/strophe.ofmuc.js","webpack:///./modules/libs/lz-string.js","webpack:///./modules/manis.conference.js","webpack:///./modules/manis.events.js","webpack:///./modules/libs/media_stream.js","webpack:///./modules/libs/data_channels.js","webpack:///./~/crypto-browserify/index.js","webpack:///./~/buffer/index.js","webpack:///./~/base64-js/index.js","webpack:///./~/ieee754/index.js","webpack:///./~/buffer/~/isarray/index.js","webpack:///./~/crypto-browserify/rng.js","webpack:///./~/crypto-browserify/create-hash.js","webpack:///./~/sha.js/index.js","webpack:///./~/sha.js/hash.js","webpack:///./~/sha.js/sha1.js","webpack:///./~/util/util.js","webpack:///./~/process/browser.js","webpack:///./~/util/support/isBufferBrowser.js","webpack:///./~/util/~/inherits/inherits_browser.js","webpack:///./~/sha.js/sha256.js","webpack:///./~/sha.js/sha512.js","webpack:///./~/crypto-browserify/md5.js","webpack:///./~/crypto-browserify/helpers.js","webpack:///./~/ripemd160/lib/ripemd160.js","webpack:///./~/crypto-browserify/create-hmac.js","webpack:///./~/crypto-browserify/pbkdf2.js","webpack:///./~/pbkdf2-compat/pbkdf2.js","webpack:///./~/browserify-aes/inject.js","webpack:///./~/browserify-aes/encrypter.js","webpack:///./~/browserify-aes/aes.js","webpack:///./~/browserify-aes/cipherBase.js","webpack:///./~/stream-browserify/index.js","webpack:///./~/node-libs-browser/~/events/events.js","webpack:///./~/inherits/inherits_browser.js","webpack:///./~/readable-stream/readable-browser.js","webpack:///./~/readable-stream/lib/_stream_readable.js","webpack:///./~/process-nextick-args/index.js","webpack:///./~/readable-stream/~/isarray/index.js","webpack:///./~/readable-stream/lib/internal/streams/stream-browser.js","webpack:///./~/safe-buffer/index.js","webpack:///./~/core-util-is/lib/util.js","webpack:///./~/readable-stream/lib/internal/streams/BufferList.js","webpack:///./~/readable-stream/lib/internal/streams/destroy.js","webpack:///./~/readable-stream/lib/_stream_duplex.js","webpack:///./~/readable-stream/lib/_stream_writable.js","webpack:///./~/timers-browserify/main.js","webpack:///./~/setimmediate/setImmediate.js","webpack:///./~/util-deprecate/browser.js","webpack:///./~/string_decoder/lib/string_decoder.js","webpack:///./~/readable-stream/lib/_stream_transform.js","webpack:///./~/readable-stream/lib/_stream_passthrough.js","webpack:///./~/readable-stream/writable-browser.js","webpack:///./~/readable-stream/duplex-browser.js","webpack:///./~/readable-stream/transform.js","webpack:///./~/readable-stream/passthrough.js","webpack:///./~/browserify-aes/modes.js","webpack:///./~/browserify-aes/EVP_BytesToKey.js","webpack:///./~/browserify-aes/streamCipher.js","webpack:///./~/browserify-aes/modes/ecb.js","webpack:///./~/browserify-aes/modes/cbc.js","webpack:///./~/browserify-aes/xor.js","webpack:///./~/browserify-aes/modes/cfb.js","webpack:///./~/browserify-aes/modes/ofb.js","webpack:///./~/browserify-aes/modes/ctr.js","webpack:///./~/browserify-aes/decrypter.js","webpack:///./modules/manis.screenshare.js"],"names":["Manis","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","checkResourcesCallBack","response","console","log","_typeof","Symbol","iterator","obj","constructor","prototype","ManisSignIn","ManisConference","Status","ManisFunctions","ManisResponse","ManisScreenShare","ManisStream","P2P","ms","ErrorCode","DEFAULT_PROTOCOL","SIGN_CTL_PATH","CREATE_ROOM_PATH","JOIN_BY_ANONYMOUS_URL","AUDIO_INPUT_DEVICES_TYPE","AUDIO_OUTPUT_DEVICES_TYPE","VIDEO_INPUT_DEVICES_TYPE","AcceptResolutions","AcceptHandsUpResponse","window","participants","myself","clientTypeCode","stream","isRemoteControl","focusJid","incomingCall","lock","removeScreenInprogress","manisConfg","sendOnly","exitCode","config","channelLastN","adaptiveLastN","adaptiveSimulcast","openSctp","enableFirefoxHacks","nat","focuser","enableSimulcast","focusUserJid","audioBandwidth","videoBandwidth","enableRtpStats","role","nickname","chromeExtensionUrl","chromeExtensionId","desktopSharing","gw","withModerator","RTC","getLocalSSRC","session","callback","browser","getBrowserName","isSafari","isChrome","isFirefox","plan","getSemantics","isUsingScreenStream","roomName","mediaStreams","_dataChannels","ssrc2jid","jid2Ssrc","ssrc2videoType","ssrc2resolution","activecall","statsCollector","mutedAudios","mutedVideos","forceMuted","forceSetVideo","currentVideoInputDeviceId","currentAudioInputDeviceId","currentAudioOutputDeviceId","connectType","localSSRCS","keepAliveTimer","browserSupportCheck","browserInfo","getBrowserInfo","name","indexOf","version","initial","params","error","code","code_421","msg","callback_function_except","errorCode","callback_except","this","code_400","no_test_browser_type_or_version","server","params_error","init_params_error","manisParams","clientCode","serverPath","type","setDesktopSharing","initDefaultInputDevices","audioInput","videoInput","audioOutput","initInlineInstalls","getClientConfig","code_200","init_success","no_error","e","signIn","username","password","nickName","successCallback","errorCallback","connectServer","_this","username_password_except","username_except","user_password_except","signInMeetingCtl","res","keepAlive","domain","signOut","connection","disconnect","clearInterval","sign_out_success","signInMessageServer","signInXMPP","result","mUserId","endpoint","currentTimeMillis","timer","setInterval","createConference","conferencePassword","comperePassword","audioOnly","arguments","length","undefined","localMediaStream","withoutStream","code_401","connection_except","mss_connection_except","createOrJoinRoom","joinConference","conferenceNumber","room_number_except","conference_room_except","joinByAnonymous","isAudioOnly","room_number_and_nickname_except","conference_room_nickname_except","signInMeetingCtlByAnonymous","leaveConference","isInRoom","code_407","you_are_not_in_room","conference_room_not_participate","disposeConference","leaveConferenceRoom","currentTargetResolution","currentTargetVideoInput","localAudio","jingle","localVideo","localScreen","getTracks","forEach","track","stop","leave_room","onJoinConference","$","document","unbind","bind","event","participant","on_participant_joined","onLeaveConference","on_participant_left","memberList","got_participants","code_404","room_unopend","conference_room_un_open","audioToggleMute","audioSwitch","muteAudio","mute","isAudioMuted","setAudioMute","set_audio_toggle_complete","set_audio_toggle_failed","audio_switch_mute_failed","onAudioToggleMute","jid","isMuted","i","resource","Strophe","getResourceFromJid","audio_muted","user","getUserInfoByJid","videoToggleMute","videoSwitch","muteVideo","isVideoMuted","setVideoMute","set_video_toggle_complete","set_video_toggle_failed","video_switch_mute_failed","onVideoToggleMute","toString","video_muted","isAdmin","grantAdmin","resource_except","grant_admin_participant_except","getUserByResource","participant_not_in_room","grant_admin_participant_not_exist","roomNumber","split","code_403","out_of_authority","without_permission_for_the_operation","onGrantAdmin","on_grant_admin_completed","onRemoveAdmin","on_remove_admin_completed","fetchAdmin","compere_password_except","fetch_admin_password_except","compere_authority_own","fetch_admin_failed_owen_it","sendTextMessage","message","message_content_null","text_message_except","private_text_message_receiver_not_exist","sendPrivateMessage","self","trigger","emuc","sendMessage","message_send_complete","onTextMessage","from","text","privateMsg","receiver","sendFromMe","receive_text_message_complete","content","isPrivateMsg","to","setSomeoneAudioMute","becontrol_user_resource_except","operate_someone_audio_participant_except","onAudioMuteBeSet","be_set_mute_complete","setSomeoneVideoMute","operate_someone_video_participant_except","onVideoMuteBeSet","be_set_video_complete","eject","eject_participant_except","eject_participant_not_exist","onEject","you_have_been_eject","getVideoInputDevices","getDevices","changeVideoInputDevice","inputDeviceId","videoResolution","targetResolution","currentResolution","video_device_id_except","change_video_input_device_except","resolution","storeResolution","modifyLocalVideoStream","changeResolution","resolution_params_error","change_resolution_not_match","changeResolutionByApplyConstraints","audioInputDevices","audioInputChange","audioInputDevice","modifyLocalAudioStream","change_audio_input_device_except","audioOutputDevices","audioOutputDeviceChange","audioOutputDevice","querySelectorAll","element","index","attachSinkId","audio_output_change_completed","audio_output_except","change_audio_output_device_except","sinkId","setSinkId","then","catch","errorMessage","warn","cancelSipCall","sip","callSip","sipRecordRule","recorderUserId","cancelCall","sip_number_except","sip_client_except","updateGWConfig","sip_gateway_except","cancelCallSip","roomPassword","ringUp","withReply","setTimeout","code_406","invite_time_out","time_out_seconds","be_inviste_user_except","invoke_receiver_except","onRingUp","nick","room","callType","sendInviteBusy","ringCallStartAt","Date","valueOf","on_ring_up","uuid","responseRingUp","reply","requester","currentTime","reply_invite_time_out","called_expired","_response","sendInviteAccept","sendInviteReject","response_invite_msg_complete","onRingUpResponse","on_ring_up_reply","answer","sendRoomComplete","invoke_room_ready_receiver_except","sendJoinAfterRingCallAccept","send_inviste_success","send_inviste_failed","send_room_ready_msg_failed","onRoomComplete","room_opened","sendRingCallProcessed","messageServer","sendRingCallProcessedMsg","ring_call_request_in_processed_sent_success","ring_call_request_in_processed_sent_failed","called_request_in_processed_sent_failed","onRingCallProcessed","ring_call_request_in_processed","isRoomExist","_to","replace","_iq","$iq","getUniqueId","xmlns","tree","sendIQ","success","conference_room_opened","whiteboardShare","appDir","ofmuc","openAppsDialog","addScreenSourceToConnection","isDesktopSharingEnabled","toggleScreenSharing","share_screen_failed","share_screen_nonsupport","conference_room_wait_others","removeScreenSourceFromConnection","streamSwitchDone","share_screen_error","share_screen_stop_failed","onShareScreenStart","share_screen_success","onShareScreenEnd","share_screen_ended","onStreamSourceRemoved","_type","_ssrc","_hardRemove","on_stream_removed","ssrc","hardRemove","onStreamSourceAdded","on_stream_added","getFriends","myFriends","lockRoom","switchAction","initModerator","onWithModeratorChanged","timeLeft","with_moderator_status_changed","moderator","time","systemError","code_500","unknown_error","network_error","addSecondStreamToConnection","connection_lost","second_stream_except","second_stream_share_failed","participantAudioConnected","on_participant_audio_joined","killedByManager","kill","room_kill_by_manager","lockStatusChanged","lockStatus","room_lock_status_change","onParticipantStatusUpdate","audioMuted","videoMuted","is_moderator","configRole","status","media_sources","mediaSources","splice","participant_status_update","handsUp","action","requestAction","sendHandsUpMsg","hands_up_send_success","hands_up_send_failed","hand_up_send_failed","onHandsUp","_from","_nickname","_action","on_hands_up_msg","responseHandsUp","response_hands_up_action_error","hand_up_response_action_illegality","responseHandsUpMsg","response_hands_up_msg_success","response_hands_up_msg_failed","hand_up_receiver_except","onHandsUpResponse","on_hands_up_response","onRoomCountdown","room_countdown","countdown","delayRoom","delayTime","parseInt","room_extend_time_require","conference_delay_time_require","roomDelay","onRecordStatusChanged","recordStatus","manis_recorder_status_changed","handleChangeModelNotice","audioModel","on_room_model_change_to_audio_only","getRrightPhoneNumber","phoneNumber","getPhoneNumber","get_phone_number_except","will_ring_phone_number_except","getUserMediaByConstraints","constraints","getMedia","get_user_media_success","get_user_media_failed","media_device_get_local_media_failed","order_change_resolution_resulotion_except","get_user_media_constraints_except","addLocalStream","localStream","addLocalStreamToConnection","local_stream_except","removeLocalStream","removeLocalStreamFromConnection","remove_local_stream_failed","sendOnlyParticipant","mediaStream","media_stream_except","send_only_stream_except","webkitMediaStream","audioStream","videoStream","audioTracks","getAudioTracks","videoTracks","getVideoTracks","addTrack","joinConferenceWithMedia","setVideoBandwidth","getVideoBandwidthByResolution","change_video_resolution_complete","updateLocalStreamSSRC","objectSSRC","objectType","local_stream_ssrc_updated","changeDisplayMode","mode","mainJid","display_mode_execpet","display_model_except","updateDisplayMode","onDisplayModeChange","display_mode_change_complete","changeMainDisplayBlock","objectiveSource","isScreen","updateMainBlockSource","dispaly_block_source_except","main_display_source_except","onMainDisplayChange","streamSSRC","main_display_block_changed","selectParticipantsDisplay","requestDisplayParticipants","participants_sort_except","onParticipantsSortChange","sortObject","displayMode","on_participants_sort_change","sort","onSystemUpgrade","section","system_upgrade_notice","sendAnnotation","data","sendAnnotationMsg","annotation_action_except","onAnnotation","onAnnotationGetInit","responseAnnotation","urlAction","sendGetInitAnnotationMsg","setRoomAudioMute","setRoomAudioMuteStatus","onMucParticipantsChange","_data","encryptString","str","encryptStr","encrypt_string_except","_successCallback","_errorCallback","openfireHost","Openfire","Connection","sign_failed","message_server_except","message_server_user_except","xmppUser","toLowerCase","xmppPassword","token","connect","CONNECTED","addDisplayNameToPresence","addUserIdToPresence","generateUniqueIdForUser","addConfigRoleToPresence","addHandler","_onmessage","_onMute","_onVideoBeSet","initFeaturesList","$pres","mUserName","connect_server_success","call_id","message_server_connect_failed","msgType","xms","childNodeType","$msg","up","t","send","urlData","JSON","stringify","msgAction","msgData","msgReceiver","url","timestamp","roomID","meetPassword","createTime","info","invoke_send_failed","isCaller","gateway","iq","dial","roomjid","value","title","ref","find","attr","call_sip_success","recorder","recorderValue","code_422","call_sip_aready_in","sip_call_in_progress","call_sip_failed","sip_call_failed_error_password","sip_call_signalling_error","sip_call_hang_up","sip_call_unknown_error","sip_call_send_failed","hungUp","cancel_call_sip_success","err","cancel_call_sip_failed","getAttribute","screen","screenStatus","handsUpType","handsUpNickname","handsUpFrom","changeNickname","newNickname","sendPresence","delay","txt","resolutionMsg","resolutionOperate","ejectUser","doMuteAudio","doMuteVideo","local","sessionTerminated","doLeave","setAdmin","addIsModeratorToPresence","pt","supportsLocalStorage","localStorage","getItem","userUniqueId","generateUniqueId","setItem","disco","addFeature","_username","_password","_server","_domain","_connectSocket","ajax","dataType","clientType","remark","navigator","userAgent","ticket","verifyCode","timeout","mesage_server_except","turn","iceServers","_config","Object","assign","sign_success","mcode","sign_username_password_error","user_client_auth_failed","user_has_been_block_up","user_out_of_service","xOptions","textStatus","api_fetch_failed","_nickName","_ws","readyState","out_of_source_limit","anonymous_login_failed","join_room_failed","getMyFriends","_header","authoredHeader","getFriendsPath","headers","get_my_friends_list","user_friends_fetch_failed","__WEBPACK_LOCAL_MODULE_0__","__WEBPACK_LOCAL_MODULE_1__","__WEBPACK_LOCAL_MODULE_2__","__WEBPACK_LOCAL_MODULE_3__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_LOCAL_MODULE_4__","__WEBPACK_LOCAL_MODULE_5__","__WEBPACK_LOCAL_MODULE_6__","__WEBPACK_LOCAL_MODULE_7__","__WEBPACK_LOCAL_MODULE_8__","root","factory","keyStr","encode","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","charCodeAt","isNaN","charAt","decode","String","fromCharCode","core_sha1","x","len","j","olda","oldb","oldc","oldd","olde","w","Array","a","b","d","rol","safe_add","sha1_ft","sha1_kt","core_hmac_sha1","key","bkey","str2binb","ipad","opad","hash","concat","y","lsw","msw","num","cnt","bin","mask","binb2str","binb2b64","binarray","triplet","tab","b64_hmac_sha1","b64_sha1","s","str_hmac_sha1","str_sha1","bit_rol","str2binl","binl2str","binl2hex","hex_tab","md5_cmn","q","md5_ff","md5_gg","md5_hh","md5_ii","core_md5","hexdigest","utils","utf16to8","out","apply","Function","func","_slice","slice","_concat","_args","isArray","arg","elt","Number","Math","ceil","floor","SHA1","Base64","MD5","$build","attrs","Builder","VERSION","NS","HTTPBIND","BOSH","CLIENT","AUTH","ROSTER","PROFILE","DISCO_INFO","DISCO_ITEMS","MUC","SASL","STREAM","FRAMING","BIND","SESSION","STANZAS","XHTML_IM","XHTML","tags","attributes","blockquote","br","cite","em","img","li","ol","span","strong","ul","body","css","validTag","tag","validAttribute","attribute","validCSS","style","ERROR","CONNECTING","CONNFAIL","AUTHENTICATING","AUTHFAIL","DISCONNECTED","DISCONNECTING","ATTACHED","REDIRECT","LogLevel","DEBUG","INFO","WARN","FATAL","ElementType","NORMAL","TEXT","CDATA","FRAGMENT","TIMEOUT","SECONDARY_TIMEOUT","addNamespace","forEachChild","elem","elemName","childNode","childNodes","nodeType","isTagEqual","el","tagName","_xmlGenerator","_makeGenerator","doc","implementation","createDocument","documentMode","_getIEXmlDom","appendChild","createElement","xmlGenerator","docStrings","ActiveXObject","xmlElement","k","node","xmlTextNode","setAttribute","hasOwnProperty","xmlescape","xmlunescape","createTextNode","xmlHtmlNode","html","DOMParser","parser","parseFromString","async","loadXML","getText","nodeValue","copyElement","nodeName","createHtml","cssAttrs","cssName","cssValue","cssText","push","join","createDocumentFragment","escapeNode","unescapeNode","getNodeFromJid","getDomainFromJid","bare","getBareJidFromJid","parts","level","debug","fatal","serialize","child","_requestId","_connectionPlugins","addConnectionPlugin","ptype","nodeTree","parentNode","moreattrs","removeAttribute","cnode","impNode","xmlGen","importNode","newElem","h","fragment","innerHTML","xhtml","Handler","handler","ns","options","matchBare","isMatch","nsMatch","that","elem_type","run","sourceURL","line","fileName","trace","lineNumber","stack","TimedHandler","period","lastCalled","getTime","reset","service","proto","protocol","_proto","Websocket","Bosh","features","_sasl_data","do_session","do_bind","timedHandlers","handlers","removeTimeds","removeHandlers","addTimeds","addHandlers","_authentication","_idleTimeout","_disconnectTimeout","authenticated","connected","disconnecting","do_authentication","paused","restored","_uniqueId","_sasl_success_handler","_sasl_failure_handler","_sasl_challenge_handler","maxRetries","_onIdle","F","init","_reset","_requests","pause","resume","suffix","r","random","v","pass","wait","hold","route","authcid","authzid","servtype","connect_callback","_changeConnectStatus","_connect","attach","sid","rid","wind","_attach","restore","_sessionCachingSupported","_restore","sessionStorage","removeItem","xmlInput","xmlOutput","rawInput","rawOutput","nextValidRid","_queueData","_send","flush","clearTimeout","errback","timeoutHandler","expectedFrom","fulljid","stanza","deleteTimedHandler","acceptable","iqtype","addTimedHandler","deleteHandler","_sendRestart","thand","handRef","hand","reason","pres","_addSysTimedHandler","_onDisconnectTimeout","_disconnect","_abortAllRequests","condition","plugin","statusChanged","_doDisconnect","_dataRecv","req","raw","_reqToData","strip","pop","_emptyQueue","cond","conflict","getElementsByTagName","newList","mechanisms","_connect_cb","_callback","bodyWrap","conncheck","sasl_scram_sha1","sasl_plain","sasl_digest_md5","sasl_anonymous","legacy_auth","hasFeatures","getElementsByTagNameNS","mech","matched","found_authentication","_no_auth_received","authenticate","higher","priority","swap","mechanism_found","test","_addSysHandler","_sasl_success_cb","_sasl_failure_cb","_sasl_challenge_cb","_sasl_mechanism","onStart","request_auth_exchange","mechanism","isClientFirst","onChallenge","_auth1_cb","challenge","_auth2_cb","serverSignature","attribMatch","matches","match","onSuccess","streamfeature_handlers","wrapper","_sasl_auth1_cb","_sasl_bind_cb","jidNode","_sasl_session_cb","onFailure","since","now","SASLMechanism","_connection","Error","SASLAnonymous","SASLPlain","auth_str","SASLSHA1","test_cnonce","cnonce","nonce","salt","iter","Hi","U","U_old","clientKey","serverKey","clientSignature","responseText","authMessage","substr","SASLMD5","_quote","realm","host","qop","digest_uri","cred","A1","A2","core","Request","sends","xmlData","origFunc","date","NaN","abort","dead","age","timeDead","xhr","_newXHR","getResponse","responseXML","documentElement","XMLHttpRequest","overrideMimeType","onreadystatechange","_conn","errors","_buildBody","keepalive","_cacheSession","xml:lang","ver","xmpp:version","xmlns:xmpp","_onRequestStateChange","_throttledRequestHandler","parse","typ","_sendTerminate","_hitError","reqStatus","xmpp:restart","time_elapsed","reqIs0","reqIs1","_removeRequest","_restartRequest","_processRequest","primaryTimeout","secondaryTimeout","requestCompletedWithServerError","open","sync","setRequestHeader","e2","sendFunc","customHeaders","header","backoff","min","pow","abs","new_service","location","pathname","_buildStream","_check_streamerror","connectstatus","textContent","errorString","_closeSocket","socket","WebSocket","onopen","_onOpen","onerror","_onError","onclose","_onClose","onmessage","_connect_cb_wrapper","_handleStreamStart","streamStart","see_uri","string","_streamWrap","_onMessage","CLOSED","close","closeString","rawStanza","search","firstChild","start","startString","n_callback","__WEBPACK_AMD_REQUIRE_ARRAY__","o","build","ManisManagement","myroomjid","members","list_members","presMap","preziMap","joined","isOwner","conn","initPresenceMap","doJoin","handleManageIq","onPresence","onPresenceUnavailable","onPresenceError","onMessage","handleRecordResultIq","moderatorJid","handleManageMsg","etherpad","presentation","current","isModerator","create","member","show","tmp","affiliation","isFocus","nicktag","displayName","cRef","refCode","onParticipantLeave","toDomain","hosts","anonymousdomain","setSubject","subject","isTextMsgWithParticipant","displaySort","sortParticipants","sortArr","item","roomLock","annotation","subjectText","lastIndexOf","recordResult","uriCode","kick","kickIQ","presx","caps","clientNode","generateCapsAttrs","stats","stat","sourceNumber","keys","direction","addMediaToPresence","mtype","ssrcs","clearPresenceMedia","addPreziToPresence","currentSlide","removePreziFromPresence","addCurrentSlideToPresence","getPrezi","addEtherpadToPresence","etherpadName","addAudioInfoToPresence","addVideoInfoToPresence","addConnectionInfoToPresence","findJidFromResource","resourceJid","peerJid","some","addBridgeIsDownToPresence","addEmailToPresence","email","addMasterStreamToPresence","withMasterStream","masterStreamSSRC","userId","addAvartarToPresence","avartar","Functions","onMsg","onMsgTime","allMsg","audioRetryTimes","videoRetryTimes","managerSetAudioMuteTry","managerSetVideoMuteTry","systemUpgrade","allAudioControl","allAudioMute","setAllAudioMute","allVideoControl","allVideoMute","setAllVideoMute","singleAudioControl","singleAudioMute","managerSetAudioMute","managerSetVideoMute","roomWillClose","moderatorLost","moderatorLostStatus","manageLockRoom","groupChat","onManagementMsg","privateChat","moderatorModify","moderatorSwitch","textMsgFromManager","lang","sender","muteStatus","isLockRoom","processData","rs","hangup","startRtpStatsCollector","stopRTPStatsCollector","StatsCollector","getConferenceHandler","peerconnection","audioLevelUpdated","ConnectionQuality","updateLocalStats","stopSendingStats","audioLevel","LocalStatsCollector","LOCAL_JID","AudioLevels","LOCAL_LEVEL","updateAudioLevel","idx","enabled","onUnload","removeStream","stopLocalRtpStatsCollector","appDestory","appStop","localStatsCollector","modifyScreenStream","isRemove","conferenceHandler","oldStream","switchStreams","sourceOperation","screenStream","localStreamSSRC","add_local_stream_without_negiration_success","localStreams","newResolutionConstraints","getConstraintsByResolution","width","video","height","applyConstraints","exact","_videoInput","loop","switchStream","negotiationInprogress","replaceMediaTrack","without_usefull_video_device","media_device_except","code_402","unsupport_resolution","media_device_resolution_nonsupport","_audioInput","newAudioInConstraints","audio_input_change_completed","activeAudioInput","audio_input_change_failed","change_audio_input_device_failed","videoInputDevices","otherDevices","allDevices","mediaDevices","enumerateDevices","deviceInfos","deviceInfo","device","deviceId","kind","label","returnData","find_devices","unfind_devices","sendOnlyChannelMsg","channel","videoSendOnly","colibriClass","startSendingStats","sendStats","sendIntervalId","convertToMUCStats","get_object_first_attribute","mucStatus","bitrate_download","bitrate","download","bitrate_upload","upload","packetLoss_total","packetLoss","total","packetLoss_download","packetLoss_upload","frameHeight","frameWidth","frameRate","rtt","parseMUCStats","remoteStats","updateRemoteStats","videoSSRC","resolutionObj","getStats","calculatePacketLoss","lostPackets","totalPackets","round","PeerStats","ssrc2Loss","ssrc2AudioLevel","ssrc2bitrate","ssrc2frameRate","ssrc2rtt","audioLevelsInterval","audioLevelsUpdateCallback","statsInterval","statsUpdateCallback","baselineAudioLevelsReport","currentAudioLevelsReport","currentStatsReport","baselineStatsReport","audioLevelsIntervalId","GATHER_INTERVAL","LOG_INTERVAL","gatherStatsIntervalId","logStatsIntervalId","statsToBeLogged","timestamps","audioLevelsIntervalMilis","statsIntervalId","statsIntervalMilis","jid2stats","getStatValue","keyMap","bandwidth","setSsrcLoss","lossRate","setSsrcResolution","setFrameRate","setRtt","setSsrcBitrate","setSsrcAudioLevel","max","transport","report","results","processAudioLevelReport","processStatsReport","logStats","addStatsToBeLogged","reports","num_records","map","names","values","deflate","Pako","deflateRaw","firefox","packetsReceived","packetsLost","packetsSent","bytesReceived","bytesSent","safari","chrome","receiveBandwidth","sendBandwidth","remoteAddress","transportType","localAddress","activeConnection","frameRateSent","googFrameHeightReceived","googFrameWidthReceived","googFrameHeightSent","googFrameWidthSent","audioInputLevel","audioOutputLevel","opera","state","localCandidateId","remote","remoteCandidateId","localip","ipAddress","portNumber","ip","before","jidStats","isDownloadStream","packetsNow","packetsBefore","packetRate","currentLoss","previousLoss","packetsTotal","localIP","active","addressSaved","bitrateDownload","bitrateUpload","resolutions","frameRateStatus","rttStatus","LocalStatsCollectorProto","interval","updateCallback","AudioContext","webkitAudioContext","intervalId","intervalMilis","animateLevel","newLevel","lastLevel","diff","parseFloat","toFixed","WEBAUDIO_ANALIZER_FFT_SIZE","WEBAUDIO_ANALIZER_SMOOTING_TIME","context","analyser","createAnalyser","smoothingTimeConstant","fftSize","source","createMediaStreamSource","array","Uint8Array","frequencyBinCount","getByteTimeDomainData","TimeDomainDataToAudioLevel","samples","maxVolume","my","resizeAudioLevelCanvas","audioLevelCanvas","thumbnailWidth","thumbnailHeight","interfaceConfig","CANVAS_EXTRA","drawAudioLevelCanvas","audioLevelCanvasCache","videoSpanId","getVideoSpanId","audioLevelCanvasOrig","get","CanvasUtil","cloneCanvas","canvas","drawContext","getContext","clearRect","shadowLevel","getShadowLevel","drawRoundRectGlow","CANVAS_RADIUS","SHADOW_COLOR","updateAudioLevelCanvas","videoSpan","getElementById","videoSpaceWidth","thumbnailSize","VideoLayout","calculateThumbnailSize","className","bottom","left","canvasCache","drawImage","getLargeVideoState","userResourceJid","updateActiveSpeakerAudioLevel","ACTIVE_SPEAKER_AVATAR_SIZE","center","save","arc","PI","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","fill","clip","resized","each","heigh","_getMedia","getUserMedia","global","adapterFactory","dependencies","opts","shimChrome","shimFirefox","shimEdge","shimSafari","logging","browserDetails","detectBrowser","chromeShim","edgeShim","firefoxShim","safariShim","commonShim","adapter","extractVersion","disableLog","disableWarnings","shimPeerConnection","browserShim","shimCreateObjectURL","shimGetUserMedia","shimMediaStream","shimSourceObject","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimSenderReceiverGetStats","fixNegotiationNeeded","shimRTCIceCandidate","shimMaxMessageSize","shimSendThrowTypeError","shimRemoveStream","shimSenderGetStats","shimReceiverGetStats","shimRTCDataChannel","shimReplaceTrack","shimRTCIceServerUrls","shimCreateOfferLegacy","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","uastring","expr","pos","wrapPeerConnectionEvent","eventNameToWrap","RTCPeerConnection","nativeAddEventListener","addEventListener","nativeEventName","cb","wrappedCallback","modifiedEvent","_eventMap","nativeRemoveEventListener","removeEventListener","unwrappedCb","defineProperty","set","enumerable","configurable","logDisabled_","deprecationWarnings_","bool","deprecated","oldMethod","newMethod","mozGetUserMedia","webkitGetUserMedia","walkStats","base","resultSet","has","endsWith","filterStats","outbound","streamStatsType","filteredResult","Map","trackStats","trackIdentifier","trackStat","trackId","MediaStream","transceiver","_ontrack","f","origSetRemoteDescription","setRemoteDescription","pc","_ontrackpoly","te","getReceivers","Event","streams","dispatchEvent","shimSenderWithDtmf","dtmf","_dtmf","createDTMFSender","_pc","getSenders","_senders","origAddTrack","origRemoveTrack","removeTrack","origAddStream","addStream","origRemoveStream","RTCRtpSender","origGetSenders","senders","RTCRtpReceiver","origGetReceivers","receivers","srcElement","origGetStats","MediaStreamTrack","Promise","reject","DOMException","URL","HTMLMediaElement","_srcObject","src","revokeObjectURL","createObjectURL","shimAddTrackRemoveTrackWithNative","getLocalStreams","_shimmedLocalStreams","streamId","alreadyExists","existingSenders","newSenders","filter","newSender","replaceInternalStreamId","description","sdp","_reverseStreams","internalId","externalStream","internalStream","_streams","RegExp","RTCSessionDescription","replaceExternalStreamId","origGetLocalStreams","nativeStreams","newStream","signalingState","resolve","method","nativeMethod","args","isLegacyCall","desc","origSetLocalDescription","setLocalDescription","origLocalDescription","getOwnPropertyDescriptor","isLocal","streamid","hasTrack","webkitRTCPeerConnection","pcConfig","pcConstraints","iceTransportPolicy","iceTransports","generateCertificate","selector","fixChromeStats_","standardReport","standardStats","localcandidate","remotecandidate","makeMapStats","successCallbackWrapper_","promise","RTCIceCandidate","nativeAddIceCandidate","addIceCandidate","target","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","mandatory","chromeMediaSource","chromeMediaSourceId","maxFrameRate","constraintsToChrome_","optional","cc","ideal","oldname_","prefix","toUpperCase","oc","mix","advanced","shimConstraints_","audio","remap","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","devices","dev","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","constraint","constraintName","getUserMedia_","onError","getUserMediaPromise_","kinds","getSources","groupId","echoCancellation","origGetUserMedia","cs","filterIceServers","shimRTCPeerConnection","RTCIceGatherer","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","replaceTrack","setTrack","edgeVersion","hasTurn","urls","isString","validTurn","fixStatsType","inboundrtp","outboundrtp","candidatepair","writeMediaSection","dtlsRole","SDPUtils","writeRtpDescription","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","_initialTrackId","msid","sendEncodingParameters","rtx","localCName","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","clockRate","numChannels","rtcpFeedback","fb","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","offer","maybeAddCandidate","iceTransport","candidate","alreadyAdded","getRemoteCandidates","remoteCandidate","foundation","port","addRemoteCandidate","makeError","NotSupportedError","InvalidAccessError","TypeError","OperationError","addTrackToStreamAndFireEvent","MediaStreamTrackEvent","removeTrackFromStreamAndFireEvent","fireAddTrack","trackEvent","_dispatchEvent","_eventTarget","canTrickleIceCandidates","needNegotiation","remoteStreams","_localDescription","_remoteDescription","iceConnectionState","connectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","_iceGatherers","iceCandidatePoolSize","gatherPolicy","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","getConfiguration","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","clonedStream","clone","clonedTrack","_createIceGatherer","sdpMLineIndex","shift","writable","bufferedCandidateEvents","bufferCandidates","end","_gather","onlocalcandidate","evt","sdpMid","cand","component","ufrag","usernameFragment","serializedCandidate","writeCandidate","parseCandidate","toJSON","sections","getMediaSections","getDescription","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","_disposeIceAndDtlsTransports","_transceive","recv","encodings","rtcp","cname","compound","rtcpParameters","receive","sessionpart","splitSections","mediaSection","parseRtpParameters","isIceLite","matchPrefix","rejected","isRejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","_updateSignalingState","receiverList","iceOptions","lines","splitLines","getKind","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","hasRtx","default","getCapabilities","codec","isNewTrack","nativeTrack","newState","states","new","closed","checking","completed","disconnected","failed","connecting","createOffer","numAudioTracks","numVideoTracks","offerOptions","offerToReceiveAudio","offerToReceiveVideo","writeSessionBoilerplate","remoteCodec","hdrExt","remoteExtensions","rHdrExt","getLocalCandidates","createAnswer","mediaSectionsInOffer","localTrack","reducedSize","candidateString","trim","senderOrReceiver","promises","all","allStats","ortcObjects","ortcObjectName","nativeGetstats","nativeStats","mapStats","methods","blob","part","substring","address","relatedAddress","relatedPort","tcpType","parseIceOptions","parseRtpMap","parsed","channels","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","param","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","parseSsrcGroup","semantics","parseFingerprint","algorithm","fingerprints","setupType","fp","iceParameters","mline","rtpmapline","fmtps","maxptime","extension","secondarySsrc","encodingParameters","hasRed","hasUlpfec","primarySsrc","flows","encParam","codecPayloadType","fec","maxBitrate","remoteSsrc","rsize","mux","spec","planB","msidParts","sessId","sessVer","sessUser","sessionId","parseMLine","fmt","parseOLine","sessionVersion","netType","addressType","isValidSDP","RTCTrackEvent","mozSrcObject","mozRTCPeerConnection","newIceServers","newServer","credential","mozRTCSessionDescription","mozRTCIceCandidate","modernStatsTypes","nativeGetStats","onSucc","onErr","DataChannel","RTCDataChannel","preferredMediaSource","mediaSource","InternalError","SecurityError","The operation is insecure.","constraintsToFF37_","require","infos","orgEnumerateDevices","nativeGetUserMedia","getSettings","nativeGetSettings","nativeApplyConstraints","_localStreams","getStreamById","_remoteStreams","_addTrack","tracks","_onaddstream","_onaddstreampoly","failureCallback","withCallback","errcb","OrigPeerConnection","RTCTransceiver","origCreateOffer","audioTransceiver","getTransceivers","setDirection","addTransceiver","videoTransceiver","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","nativeCreateObjectURL","nativeRevokeObjectURL","newId","delete","dsc","srcObject","nativeSetAttribute","RTCSctpTransport","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","maxMessageSize","canSendMMS","remoteMMS","POSITIVE_INFINITY","sctp","wrapDcSend","dc","origDataChannelSend","size","byteLength","origCreateDataChannel","createDataChannel","dataChannel","Response","code_405","code_408","code_409","code_410","code_411","code_412","code_413","code_414","code_415","code_416","init_failed","create_room_failed","conference_participant_time_error","conference_focus_except","conference_vb_except","out_of_video_device_resolution","join_room_success","room_locked","room_password_expect","got_participant_info","got_participant_info_failed","transferc_compere_success","transferc_compere_failed","fetch_compere_error","fetch_compere_failed_exist","fetch_compere_success","you_are_in_a_room","manage_set_audio_mute_success","manage_set_audio_mute_failed","remove_participant_complete","remove_participant_failed","get_my_jid","share_app_except","share_app_completed","lock_or_unlock_room_completed","lock_or_unlock_room_failed","display_mode_change_failed","lock_main_display_complete","lock_main_display_failed","order_change_resolution_receiver_except","order_change_resolution_resulotion_complete","order_change_resolution_resulotion_failed","on_order_change_resolution_order","nickname_except","init_moderator_complete","init_moderator_failed","reject_invite_msg","send_hard_remove_strem_msg","room_extend_time_success","room_extend_time_failed","request_participants_sort_complete","get_phone_number_success","get_phone_number_failed","other_participant_except","Encrypt","publicFunctions","publicKey","currentMainResource","currentMainSSRC","Constraints_1080","Constraints_720","Constraints_768","Constraints_540","Constraints_480","Constraints_360","Constraints_240","Constraints_180","withAudio","withVideo","getResolution","aDevice","cons","audioConstraints","rbwc","_p8","roomNum","getroomnode","master","errorThrown","init_moderator_right_failed","localAudioTracks","localVideoTracks","generateStatusNode","resolutionId","uploadPackageLostId","downloadPackageLostId","uploadBitrateId","downloadBitrateId","display_model_broadcast_failed","sendChangeDisplayModeMsg","objectiveJid","main_display_change_failed","sendChangeMainBlockSourceMsg","isScreenStream","_jid","roomJid","sendHardRemoveStreamMsg","_headers","broadcastRoomLockStatus","phone","fetch_ring_phone_number_failed","bandWidth","getSender","returnSender","operate_someone_audio_failed","encrypt","JSEncrypt","setPublicKey","encrypted","userJid","Code","user_login_client_failed","username_not_exist","user_login_status_error","conference_room_password_error","conference_room_not_exist","conference_room_locked","conference_room_source_limit","conference_room_participant_failed","conference_room_participant_out_time","conference_room_focus_except","conference_room_vb_except","conference_room_participant_failed_unknown_response_code","grant_admin_participant_failed","fetch_admin_failed","eject_participant_failed","conference_delay_failed","fetch_admin_failed_wrong_password","fetch_admin_failed_moderator_exist","operate_someone_video_failed","share_screen_extended_plugin_except","share_screen_fetch_stream_failed","SDPUtil","findValueByName","arr","textToXML","ansToSessAcc","sess","contents","sessionAccept","peerjid","initiator","responder","createDataNode","pwd","contentNode","createMediaNode","mediaName","mediaGroup","createPayloadNode","createSourceNode","createSourceParamsNode","rtpmap","find_line","rtpmap1","_fmtp","fmtpMus","getBandwidth","sourceType","getBrowserVersion","iceparams","mediadesc","sessiondesc","parse_iceufrag","parse_icepwd","build_iceufrag","frag","build_icepwd","parse_mid","parse_mline","media","build_mline","parse_rtpmap","clockrate","parse_sctpmap","sctpPort","streamCount","build_rtpmap","parse_crypto","parse_fingerprint","fingerprint","parse_fmtp","parse_icecandidate","elems","generation","tcptype","network","build_icecandidate","hasOwnAttribute","parse_ssrc","parse_rtcpfb","parse_extmap","haystack","needle","find_lines","needles","candidateToJingle","candidateFromJingle","int2char","n","BI_RM","op_and","op_or","op_xor","op_andnot","lbit","cbit","hex2b64","ret","b64map","b64pad","b64tohex","slop","__extends","__","extendStatics","stringCut","ellipsis","nbi","BigInteger","parseBigInt","am1","am2","xl","xh","l","am3","intAt","BI_RC","nbv","fromInt","nbits","prng_newstate","Arcfour","rng_get_byte","rng_state","rng_pptr","rng_psize","rng_pool","next","pkcs1pad1","filler","pkcs1pad2","ba","rng","SecureRandom","nextBytes","pkcs1unpad2","toByteArray","getDigestHeader","DIGEST_HEADERS","removeDigestHeader","name_1","decoder","decoder$1","dbits","setPrototypeOf","__proto__","Hex","hex","ignore","bits","char_count","b64","re","unarmor","exec","Int10","buf","mulAdd","sub","simplify","reTimeS","reTimeL","Stream","enc","hexDigits","hexByte","hexDump","isASCII","parseStringISO","parseStringUTF","parseStringBMP","hi","lo","parseTime","shortYear","parseInteger","neg","pad","parseBitString","maxLength","unusedBit","lenBit","intro","skip","parseOctetString","parseOID","ASN1","ASN1Tag","typeName","tagClass","tagNumber","Infinity","posContent","isUniversal","toPrettyString","indent","tagConstructed","posStart","posEnd","toHexString","decodeLength","getHexStringValue","hexString","offset","getSub","isEOC","canary","j_lm","lowprimes","lplim","fromNumber","fromString","negate","toRadix","km","DB","ZERO","subTo","compareTo","bitLength","DM","mod","divRemTo","modPowInt","z","isEven","Classic","Montgomery","exp","copyTo","intValue","DV","byteValue","shortValue","signum","equals","and","bitwiseTo","or","xor","andNot","not","shiftLeft","rShiftTo","lShiftTo","shiftRight","getLowestSetBit","bitCount","testBit","setBit","changeBit","clearBit","flipBit","add","addTo","subtract","multiply","multiplyTo","divide","remainder","divideAndRemainder","modPow","Barrett","g","k1","convert","g2","sqrTo","mulTo","is1","r2","revert","modInverse","ac","u","ONE","NullExp","gcd","isProbablePrime","modInt","millerRabin","fromRadix","mi","sh","clamp","dlShiftTo","drShiftTo","bs","cbs","bm","ds","am","squareTo","pm","ts","nsh","ys","y0","yt","F1","F2","d1","FV","d2","qd","invDigit","chunkSize","LN2","dMultiply","dAddOffset","op","multiplyLowerTo","multiplyUpperTo","n1","square","gcda","gcda1","fromNumberAsync","bnp_1","bnpfn1_1","reduce","mp","mpl","mph","um","mt2","u0","q3","mu","appName","BI_FP","rr","vv","S","crypto","getRandomValues","Uint32Array","onMouseMoveListener_1","count","detachEvent","mouseCoordinates","attachEvent","RSAKey","dmp1","dmq1","coeff","doPublic","doPrivate","xp","xq","setPublic","N","E","setPrivate","D","setPrivateEx","P","Q","DP","DQ","C","generate","B","qs","ee","p1","q1","phi","decrypt","ctext","generateAsync","rsa","loop1","loop4","loop3","loop2","sign","digestMethod","digestName","digest","verify","signature","unpadded","md2","md5","sha1","sha224","sha256","sha384","sha512","ripemd160","YAHOO","extend","subc","superc","overrides","superclass","_IEEnumFix","ADD","fname","ex","KJUR","asn1","ASN1Util","integerToByteHex","bigIntToMinTwosComplementsHex","bigIntegerValue","hPos","xorLen","hMask","biMask","biNeg","getPEMStringFromHex","dataHex","pemHeader","hextopem","newObject","_KJUR","_KJUR_asn1","_DERBoolean","DERBoolean","_DERInteger","DERInteger","_DERBitString","DERBitString","_DEROctetString","DEROctetString","_DERNull","DERNull","_DERObjectIdentifier","DERObjectIdentifier","_DEREnumerated","DEREnumerated","_DERUTF8String","DERUTF8String","_DERNumericString","DERNumericString","_DERPrintableString","DERPrintableString","_DERTeletexString","DERTeletexString","_DERIA5String","DERIA5String","_DERUTCTime","DERUTCTime","_DERGeneralizedTime","DERGeneralizedTime","_DERSequence","DERSequence","_DERSet","DERSet","_DERTaggedObject","DERTaggedObject","_newObject","paramList","asn1Obj","tagParam","explicit","newParam","jsonToASN1HEX","getEncodedHex","oidHexToInt","i01","i0","i1","binbuf","bi","oidIntToHex","oidString","itox","roidtox","roid","padLen","bPad","b8","ASN1Object","hV","getLengthHexFromValue","hN","hNlen","head","hTLV","isModified","getFreshValueHex","hL","hT","getValueHex","DERAbstractString","getString","setString","newS","stohex","setStringHex","newHexString","DERAbstractTime","localDateToUTC","utc","getTimezoneOffset","utcDate","formatDate","dateObject","withMillis","zeroPadding","year","getFullYear","month","getMonth","day","getDate","hour","getHours","getMinutes","sec","getSeconds","millis","getMilliseconds","sMillis","setByDateValue","UTC","setByDate","DERAbstractStructured","setByASN1ObjectArray","asn1ObjectArray","asn1Array","appendASN1Object","asn1Object","setByBigInteger","setByInteger","setValueHex","setHexValueIncludingUnusedBits","newHexStringIncludingUnusedBits","setUnusedBitsAndHexValue","unusedBits","hValue","hUnusedBits","setByBinaryString","binaryString","setByBooleanArray","booleanArray","newFalseArray","nLength","setValueOidString","setValueName","oidName","oid","x509","OID","name2oid","sortFlag","sortflag","isExplicit","setASN1Object","isExplicitFlag","tagNoHex","JSEncryptRSAKey","_super","parseKey","hasPrivateKeyProperty","hasPublicKeyProperty","parsePropertiesFrom","pem","modulus","public_exponent","reHex","der","private_exponent","prime1","prime2","exponent1","exponent2","coefficient","bit_string","sequence","getPrivateBaseKey","int","bigint","seq","getPrivateBaseKeyB64","getPublicBaseKey","first_sequence","second_sequence","getPublicBaseKeyB64","wordwrap","regex","getPrivateKey","getPublicKey","default_key_size","default_public_exponent","setKey","setPrivateKey","privkey","pubkey","getKey","getPrivateKeyB64","getPublicKeyB64","connectXMPP","onConnect","onJingle","roomId","myjid","jids","getOrCreatePeerConnection","peers","sessionDescription","joinP2PRoom","createConferenceIq","_resource","mUsername","p2pAudioToggleMute","p2pVideoToggleMute","p2pSwitchStream","endPoint","MozWebSocket","alert","messageServerPort","_onopen","_onclose","_onerror","openfireWebSocket","sendPing","OPEN","sendRaw","xml","_textToXML","doSend","toSend","packet","_handleConferenceLeaveIq","conferenceNode","JingleSession","sessions","jid2session","ice_config","pc_constraints","media_constraints","OfferToReceiveAudio","OfferToReceiveVideo","localScreenSsrc","useRtcpMux","useBundle","fromJid","ack","initiate","accept","terminate","affected","sendOffer","sendTerminate","terminateByJid","terminateRemoteByJid","getStunAndTurnCredentials","iceservers","dict","me","SessionBase","isInitiator","localSDP","remoteSDP","relayedStreams","startTime","stopTime","drip_container","usetrickle","usepranswer","usedrip","hadstuncandidate","hadturncandidate","lasticecandidate","statsinterval","localStreamsSSRC","getScreenXml","localDescription","medias","sdpMsid","ssrcCname","SDP","TraceablePeerConnection","simulcast","X2JS","SdpUtil","sendIceCandidate","getSsrc","streamIdx","pranswer","reverseTransformLocalDescription","prsdp","toJingle","sendSSRCUpdate","sdpMediaSsrcs","isadd","sendSSRCUpdateIq","ice","jcand","sendIceCandidates","sendJingle","candidates","relayDone","creator","required","createdOffer","desctype","outerHTML","iqXml","emptyIQ","x2js","attributePrefix","jsonObj","xml2js","xml2sdp","remotedesc","remoteDescription","cobbled","iscomplete","mediapart","sendAnswer","provisional","createdAnswer","contentsNode","mediaLine","audioVideoGroup","applicationLine","ssrcLine","ssrcLines","mxml","localdesc","term","sendMute","muted","sendRinging","lost","lastrecv","lastlost","loss","delta","packetsrecv","packetslost","flag","replaceType","shallRemoveSender","getSendersByType","localVideoSender","localAudioSender","modifiedAnswer","newSdp","replaceSdpSsrc","sendKeyframe","screenSender","videoMuteByUser","transform","modifySources","isNeedAnswer","addSource","xmlJingle","videoNode","videoSource","removeSSRC","screenSSRC","audioNode","audioSource","audioSSRC","removeSource","currentSenders","peerconnectionNegotiate","oldSdp","oldSdpObject","oldSdpSSRCs","newSdpObject","newSdpSSRCs","replaceObject","newSSRC","oldSSRC","replacedSSRCs","write","new_stream","success_callback","switchstreams","notifyMySSRCUpdate","removeScreen","addScreen","removeStreams","old_sdp","new_sdp","toAdd","getMediaSsrcMap","getNewMedia","toRemove","toAddSSRC","indexTow","toRemoveSSRC","isAdd","toJid","modify","modified","channelNum","mediaType","ssrcNum","mediaSsrc","ssrcGroups","ssrcGroup","isVideoMute","byUser","hardMuteVideo","toggleVideoMute","ChannelSsrc","ChannelSsrcGroup","MediaChannel","channelNumber","chNumber","media_ssrcs","linessrc","containsSSRC","contains","otherSdp","arrayEquals","myMedia","othersMedia","newMedia","myChannel","othersChannel","otherSsrcGroup","mySsrcGroup","mangle","newdesc","removeSessionLines","removeMediaLines","mediaindex","thecreator","RtcpFbToJingle","ssrclines","msidLine","ssrc_group_lines","TransportToJingle","sctpmap","sctpAttrs","number","setup","payloadtype","subtype","RtcpFbFromJingle","fromJingle","group","jingle2media","SimulcastUtils","logger","SimulcastLogger","SimulcastReceiver","simulcastUtils","SimulcastSender","NativeSimulcastSender","SimpleSimulcastSender","NoSimulcastSender","SimulcastManager","simulcastReceiver","simulcastSender","lvl","_emptyCompoundIndex","_replaceVideoSources","videoSources","inVideo","howMany","isValidDescription","_getVideoSources","sb","parseMedia","mediatypes","cur_media","cur_ssrc","ssrc_attribute","sources","groups","_indexOfArray","row","column","_removeSimulcastGroup","_compileVideoSources","addedSSRCs","_remoteVideoSourceCache","_remoteMaps","msid2Quality","ssrc2Msid","msid2ssrc","receivingVideoStreams","_cacheRemoteVideoSources","_restoreRemoteVideoSources","_ensureGoogConference","_restoreSimulcastGroups","reverseTransformRemoteDescription","_ensureOrder","_updateRemoteMaps","quality","remoteVideoSources","_setReceivingVideoStream","getReceivingVideoStream","electedTrack","getReceivingSSRC","remoteStream","getReceivingVideoStreamBySSRC","electedStream","getRemoteVideoStreamIdBySSRC","displayedLocalVideoStream","_generateGuid","s4","_generateRandomSSRC","getLocalVideoStream","_localExplosionMap","_isUsingScreenStream","_localVideoSourceCache","_cacheLocalVideoSources","_restoreLocalVideoSources","_appendSimulcastGroup","simSSRC","numOfSubs","_ensureSimulcastGroup","_explodeSimulcastSenderSources","tid","hqStream","fine","transformAnswer","transformLocalDescription","transformRemoteDescription","_setLocalVideoStreamEnabled","_localMaps","msids","_groupLocalVideoSources","lqConstraints","maxWidth","maxHeight","lqStream","trackid","resetSender","endpointSimulcastLayers","esl","simulcastLayer","primarySSRC","writer","parseFmtpConfig","parsePayloads","parseRemoteCandidates","toIntIfInt","attachProperties","rawName","parseReg","needsBlank","keyLocation","reg","grammar","validLine","rtp","fmtp","fmtpReducer","acc","format","rate","sessionConfig","raddr","objs","formatRegExp","formatStr","makeLine","defaultOuterOrder","defaultInnerOrder","payloads","outerOrder","innerOrder","sdpSemantics","updateLog","maxstats","interop","Interop","resetLocalDescriptionTimes","addssrc","removessrc","pendingop","what","endTime","times","dumpSDP","__defineGetter__","publicLocalDescription","toPlanB","publicRemoteDescription","stopStreams","enqueueAddSsrc","mySdp","nameIndex","tempMedia","enqueueRemoveSsrc","cache","mlB2UMap","mlU2BMap","candidateToUnifiedPlan","candidateToPlanB","getFirstSendingIndexFromAnswer","rewrite","uLine","type2bl","types","directionResult","rtcpMux","directionMasks","bundleOnly","mids","msidSemantic","semantic","resStr","toUnifiedPlan","hasBundle","cached","recvonlySsrcs","mid2ul","bIdx","uIdx","bLine","iceUfrag","icePwd","ssrc2group","ssrc2ml","related","inactive","recvonly","sendonly","sendrecv","parseParams","parseImageAttributes","parseSimulcastStreamList","paramReducer","scid","dir2","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","CustomDOMParser","initConfigDefaults","arrayAccessForm","emptyNodeForm","jsAttributeFilter","jsAttributeConverter","attributeConverters","datetimeAccessFormPaths","arrayAccessFormPaths","enableToStringFunc","skipEmptyTextNodesForObj","stripWhitespaces","useDoubleQuotes","ignoreRoot","escapeMode","selfClosingElements","keepCData","jsDateUTC","initRequiredPolyfills","toISOString","MS_IN_S","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","getDomNodeLocalName","domNode","localName","baseName","getDomNodeNamespacePrefix","escapeXmlChars","unescapeXmlChars","ensureProperArrayAccessForm","childName","elementPath","arrayPath","xmlDateTimeToDate","prop","MINUTES_PER_HOUR","secondBits","setHours","setMilliseconds","offsetMinutes","setMinutes","convertToDateIfRequired","fullPath","pathWithoutTextNode","candidatePath","deserializeRootElementChildren","rootElement","children","DOMNodeTypes","ELEMENT_NODE","deserializeDomChildren","deserializeElementChildren","__cnt","nodeChildren","iChild","COMMENT_NODE","iAttribute","adjustedValue","iConverter","converter","namespacePrefix","__prefix","__text","__cdata","parentPath","DOCUMENT_NODE","TEXT_NODE","CDATA_SECTION_NODE","serializeStartTag","jsObject","elementName","attributeNames","selfClosing","resultStr","attributeName","attributeValue","serializeEndTag","isSpecialProperty","propertyName","getDataElementCount","getDataAttributeNames","serializeComplexTextNodeContents","textNode","serializeTextNodeContents","serializeArray","elementArray","serializeJavaScriptObject","toUTCString","childElementCount","serializeJavaScriptObjectChildren","elementCount","parseXml","parsererrorNS","isIEParser","namespaceURI","asArray","toXmlDateTime","dt","asDateTime","xml2dom","dom2js","js2dom","js2xml","getVersion","_mixedAudioObj","_mixedVideoObj","_ssrcList","mediaObjList","midMum","SsrcObj","isNew","MediaObj","mslabel","markScreenSSRC","_array","getSessionInitiateMediaObj","getSourceAddObj","getSourceRemoveObj","getOfferSDP","getMediaTtileSDP","getMediaBodySDP","saveSsrc","payloadTypeIds","payload","rtpHdrext","payloadName","pars","ssrcObj","getReplaceMediaBodySDP","labels","bundleNumStr","audioGroup","videoGroup","dataGroup","sdpOffer","bootSdpOffer","LZString","whiteboardStart","sharePDF","shareApp","shareLink","linkSharer","pdfPage","recordingToken","isRecording","bookmarks","appRunning","enableCursor","appStartFrom","appReady","appMessage","resize","getPresentationWidth","getPresentationHeight","availableWidth","innerWidth","remoteVideos","innerHeight","scrollHeight","outerHeight","appShare","farparty","requestor","msg2","remoteControlled","prompt","persistent","buttons","Permit","Deny","defaultButton","submit","remoteController","postMessage","handleAppShare","handlePdfShare","handleLinkShare","avatar","Avatar","setUserAvatar","appSave","canSave","appFrame","contentWindow","ManisMeetings","getContent","compressed","compressToBase64","resp","promptContent","appPrint","canPrint","getPrintContent","printWin","print","appEnableCursor","setPresentationVisible","setContent","decompressFromBase64","__isadmin","DisableInput","parent","appStart","owner","__isshow","addClass","removeClass","promptTitle","href","json","handleAppMessage","auto","shareDir","removeButtons","Close","printButtons","Confirm","关闭","确定","isPresentationVisible","noticeStr","noticeTitle","visible","fadeOut","fadeIn","opacity","validURL","iframeURL","_keyStr","_f","compress","output_","decompress","compressToUTF16","decompressFromUTF16","compressToUint8Array","uncompressed","TotalLen","current_value","decompressFromUint8Array","compressToEncodedURIComponent","decompressFromEncodedURIComponent","ii","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data_string","context_data_val","context_data_position","resb","maxpower","power","dictionary","enlargeIn","dictSize","numBits","entry","val","position","audioOut","gotInputDevices","handleError","devicesInfo","createRoomInCtlCallback","grantAdminCallBack","validRoomCallBack","fetchAdminCallBack","connResp","isJoin","vb","autoRecord","enableFirefoxSupport","audioEncoding","videoEncoding","doJoinRoom","doJoinAfterFocus","hands_up","audio_only","getLocalStream","newConstraints","joinRoom","photo","audioIn","videoIn","createHash","update","md5Password","FETCH_ADMIN","GRANT_ADMIN","iqToFocus","userjid","operatorPassword","activeLanguage","CREATE_OR_JOIN_CONFERENCE","DELAY_ROOM_PATH","lengthTime","CONFIG_RESOURCE_UPDATE","newGW","FullHDConstraints","updateSSRC2Jid","ssrcV","updateConnectQuality","statsObj","videoSsrc","sel","checkStreamTrackAlive","onRemoteVideoAdded","checkStreamIsScreen","streamType","onRemoteAudioAdded","participantExist","leftFromRoom","resources","presNode","statusNode","mediaNode","statNode","downloadBitrate","uploadBitrate","packageDownloadLost","packageUploadLost","sourceNode","sourceSSRC","participantPresence","isVideo","isAudio","bindDataChannelListener","newssrcs","isOriginalExist","perSSRC","MediaStreamProto","VIDEO_TYPE","AUDIO_TYPE","UNKNOWN_TYPE","onDataChannel","onStage","dominantSpeakerEndpoint","oldValue","newValue","Boolean","lastNEndpoints","endpointsEnteringLastN","peerConnection","Buffer","createHmac","randomBytes","getHashes","pbkdf2","pbkdf2Sync","typedArraySupport","foo","subarray","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","RangeError","encodingOrOffset","allocUnsafe","ArrayBuffer","fromArrayBuffer","fromObject","assertSize","alloc","encoding","checked","isEncoding","actual","fromArrayLike","byteOffset","isBuffer","copy","buffer","isnan","SlowBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","bidirectionalIndexOf","dir","arrayIndexOf","read","indexSize","readUInt16BE","arrLength","valLength","foundIndex","found","hexWrite","remaining","strLen","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","base64","fromByteArray","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","stringtrim","INVALID_BASE64_RE","units","leadSurrogate","byteArray","dst","INSPECT_MAX_BYTES","poolSize","_augment","species","allocUnsafeSlow","_isBuffer","compare","list","swap16","swap32","swap64","inspect","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","getLens","validLen","placeHoldersLen","lens","_byteLength","Arr","curByte","revLookup","tripletToBase64","lookup","encodeChunk","uint8","extraBytes","maxChunkLength","len2","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","rt","_crypto","msCrypto","toConstructor","fn","buffers","rmd160","alg","Alg","Hash","blockSize","finalSize","_block","_finalSize","_blockSize","_len","_s","ch","_update","_hash","inherits","Sha1","POOL","_w","W","_h","A","Int32Array","_a","_b","_c","_d","_e","_POOL","X","H","process","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","styles","arrayToHash","recurseTimes","isFunction","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","isError","formatError","isRegExp","isDate","braces","formatArray","formatProperty","reduceToSingleString","simple","isNumber","isNull","numLinesEst","prev","cur","ar","isNullOrUndefined","isSymbol","isObject","objectToString","isPrimitive","months","objects","_","deprecate","warned","throwDeprecation","traceDeprecation","noDeprecation","debugEnviron","debugs","debuglog","env","NODE_DEBUG","pid","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","boolean","null","regexp","origin","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","Item","noop","nextTick","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","ctor","superCtor","super_","TempCtor","Sha256","R","Ch","Maj","Sigma0256","Sigma1256","Gamma0256","Gamma1256","K","_g","M","T1","T2","Sha512","Xl","_al","_bl","_cl","_dl","_el","_fl","_gl","_hl","al","bl","cl","dl","fl","gl","hl","Wi","Wil","gamma0","gamma0l","gamma1","gamma1l","Wi7","Wi7l","Wi16","Wi16l","maj","majl","sigma0h","sigma0l","sigma1h","sigma1l","Ki","Kil","chl","t1l","t1","t2l","t2","writeInt64BE","helpers","toArray","bigEndian","intSize","zeroBuffer","toBuffer","hashSize","chrsz","f1","f2","f3","f4","f5","rotl","bytesToWords","nBitsLeft","nBitsTotal","processBlock","H_i","digestbytes","wordsToBytes","zl","zr","sl","sr","hr","words","offset_i","M_offset_i","cr","dr","er","Hmac","_opad","_alg","blocksize","_key","_ipad","pbkdf2Export","exported","iterations","keylen","hLen","T","DK","block1","destPos","listCiphers","modes","ciphers","createCipher","createCipheriv","deciphers","createDecipher","createDecipheriv","Cipher","iv","Transform","_cache","Splitter","_cipher","aes","AES","_prev","_mode","ebtk","StreamCipher","_transform","chunk","thing","_flush","scrub","padBuff","modelist","ECB","CBC","CFB","OFB","CTR","suite","fixup_uint32","x_pos","uint_max","scrub_vec","_i","_ref","Global","SBOX","INV_SBOX","SUB_MIX","_results","INV_SUB_MIX","RCON","bufferToArray","_doReset","sx","x2","x4","x8","xi","G","keySize","ivSize","invKsRow","keyWords","ksRow","ksRows","_j","_nRounds","_keySchedule","_invKeySchedule","encryptBlock","_doCryptBlock","decryptBlock","temp","keySchedule","s0","s1","s2","s3","t0","t3","CipherBase","inputEnd","outputEnc","outData","final","EE","EventEmitter","Readable","Writable","Duplex","PassThrough","pipe","dest","ondata","ondrain","readable","onend","didOnEnd","destroy","cleanup","listenerCount","_isStdio","_events","_maxListeners","defaultMaxListeners","setMaxListeners","listener","newListener","fired","evlistener","emitter","_uint8ArrayToBuffer","_isUint8Array","OurUint8Array","unshift","ReadableState","isDuplex","objectMode","readableObjectMode","hwm","highWaterMark","readableHwm","readableHighWaterMark","defaultHwm","BufferList","pipes","pipesCount","flowing","ended","endEmitted","reading","needReadable","emittedReadable","readableListening","resumeScheduled","destroyed","defaultEncoding","awaitDrain","readingMore","StringDecoder","_readableState","_read","_destroy","readableAddChunk","addToFront","skipChunkCheck","onEofChunk","chunkInvalid","getPrototypeOf","addChunk","maybeReadMore","needMoreData","emitReadable","computeNewHighWaterMark","MAX_HWM","howMuchToRead","pna","emitReadable_","flow","maybeReadMore_","pipeOnDrain","EElistenerCount","nReadingNextTick","resume_","fromList","clear","fromListPartial","hasStrings","copyFromBufferString","copyFromBuffer","nb","tail","endReadable","endReadableNT","xs","util","debugUtil","destroyImpl","kProxyEvents","_undestroy","undestroy","isPaused","setEncoding","nOrig","doRead","pipeOpts","onunpipe","unpipeInfo","hasUnpiped","onfinish","unpipe","cleanedUp","_writableState","needDrain","increasedAwaitDrain","doEnd","stdout","stderr","endFn","dests","wrap","_fromList","arg1","arg2","arg3","copyProps","SafeBuffer","_classCallCheck","instance","Constructor","copyBuffer","custom","readableDestroyed","writableDestroyed","errorEmitted","emitErrorNT","ending","finished","allowHalfOpen","onEndNT","objectKeys","setImmediate","CorkedRequest","finish","onCorkedFinish","nop","WritableState","writableObjectMode","writableHwm","writableHighWaterMark","finalCalled","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writecb","writelen","bufferedRequest","lastBufferedRequest","pendingcb","prefinished","bufferedRequestCount","corkedRequestsFree","realHasInstance","_write","writev","_writev","_final","writeAfterEnd","validChunk","valid","decodeChunk","writeOrBuffer","isBuf","newChunk","last","doWrite","onwriteError","finishMaybe","onwriteStateUpdate","needFinish","clearBuffer","asyncWrite","afterWrite","onwriteDrain","holder","allBuffers","callFinal","prefinish","need","endWritable","corkReq","internalUtil","getBuffer","hasInstance","object","cork","uncork","setDefaultEncoding","Timeout","clearFn","_id","_clearFn","scope","unref","enroll","msecs","_idleTimeoutId","unenroll","_unrefActive","_onTimeout","clearImmediate","task","tasksByHandle","nextHandle","registerImmediate","handle","runIfPresent","currentlyRunningATask","installNextTickImplementation","canUsePostMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","installPostMessageImplementation","messagePrefix","onGlobalMessage","installMessageChannelImplementation","MessageChannel","port1","port2","installReadyStateChangeImplementation","script","removeChild","installSetTimeoutImplementation","attachTo","_normalizeEncoding","retried","normalizeEncoding","nenc","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckIncomplete","utf8CheckExtraBytes","utf8Text","utf8End","afterTransform","_transformState","transforming","writechunk","needTransform","writeencoding","done","_this2","err2","cipher","keyLen","ivLen","md","md_buf","ki","addmd","_secCache","_decrypt","block","encryptStart","getBlock","incr32","Decipher","_last","unpad","padded","obtainWebRTCScreen","streamCallback","failCallback","getUserMediaWithConstraints","getWebStoreInstallUrl","checkExtInstalled","isInstalledCallback","doGetStreamFromExtension","pending","switchInProgress","obtainScreenFromExtension","isInstalled","failure_callback","fps","desktopStream","minFrameRate","isFF","isAndroid","_desktopSharingEnabled","obtainDesktopStream","oninactive","createResult"],"mappings":"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","file":"main_product_37b186f3fa268262b1f0.bundle.js","sourcesContent":["var Manis =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t// var $ = require('jquery');\n\t// window.$ = $;\n\tvar ManisSignIn = __webpack_require__(2);\n\tvar ManisConference = __webpack_require__(56);\n\tvar Status = __webpack_require__(6);\n\tvar ManisFunctions = __webpack_require__(27);\n\tvar ManisResponse = __webpack_require__(26);\n\tvar ManisScreenShare = __webpack_require__(123);\n\tvar ManisStream = __webpack_require__(11);\n\tvar P2P = __webpack_require__(32);\n\tvar ms = __webpack_require__(29);\n\t\n\tvar ErrorCode = __webpack_require__(28);\n\t\n\tvar LICENSE_ERROR = 'License except !';\n\t\n\tvar DEFAULT_PROTOCOL = 'https://';\n\t\n\tvar SIGN_CTL_PATH = '/clientApi/loginClient'; // 登录会控接口\n\t\n\tvar CREATE_ROOM_PATH = '/user/createConferenceClient'; // 会控创建会议室接口\n\t\n\tvar JOIN_BY_ANONYMOUS_URL = \"/clientApi/loginClientAnonymous\"; // 匿名登录会控接口\n\t\n\tvar AUDIO_INPUT_DEVICES_TYPE = 'audioinput';\n\t\n\tvar AUDIO_OUTPUT_DEVICES_TYPE = 'audiooutput';\n\t\n\tvar VIDEO_INPUT_DEVICES_TYPE = 'videoinput';\n\t\n\tvar AcceptResolutions = ['1080', '720', '768', '540', '480', '240', '180'];\n\t\n\tvar AcceptHandsUpResponse = ['agree', 'refuse'];\n\t\n\tfunction checkResourcesCallBack(response) {\n\t  console.log('check resources response:', response);\n\t}\n\twindow.checkResourcesCallBack = checkResourcesCallBack;\n\t\n\twindow.participants = [];\n\t\n\twindow.myself = null;\n\t\n\twindow.clientTypeCode = '0101';\n\t\n\twindow.stream = null;\n\t\n\twindow.isRemoteControl = false;\n\t\n\twindow.focusJid = null;\n\t\n\twindow.incomingCall = false;\n\t\n\twindow.lock = false;\n\t\n\twindow.removeScreenInprogress = false;\n\t\n\twindow.manisConfg = {};\n\t\n\twindow.sendOnly = false;\n\t\n\twindow.exitCode = 1000;\n\t\n\twindow.config = {\n\t  channelLastN: -1,\n\t  adaptiveLastN: false,\n\t  adaptiveSimulcast: false,\n\t  openSctp: true,\n\t  enableFirefoxHacks: false,\n\t  nat: 'stun:124.202.164.3',\n\t  focuser: null,\n\t  enableSimulcast: false,\n\t  focusUserJid: 'focus@60.206.107.181',\n\t  audioBandwidth: 64,\n\t  videoBandwidth: 1024,\n\t  enableRtpStats: true,\n\t  role: 'NONE',\n\t  nickname: null,\n\t  chromeExtensionUrl: 'static/dist/Manis-Meetings-Chrome-Extension_v0.0.9.crx',\n\t  chromeExtensionId: 'lmmbdcmikgbfpgegokhgedahimdimcnh',\n\t  desktopSharing: 'ext',\n\t  gw: null,\n\t  withModerator: false\n\t  // debug: true,\n\t};\n\t\n\twindow.RTC = {\n\t  getLocalSSRC: function getLocalSSRC(session, callback) {\n\t    callback(null);\n\t  },\n\t  browser: ms.getBrowserName(),\n\t  isSafari: function isSafari() {\n\t    return ms.isSafari();\n\t  },\n\t  isChrome: function isChrome() {\n\t    return ms.isChrome();\n\t  },\n\t  isFirefox: function isFirefox() {\n\t    return ms.isFirefox();\n\t  },\n\t  plan: ms.getSemantics()\n\t};\n\t\n\twindow.isUsingScreenStream = false;\n\twindow.roomName = null;\n\twindow.mediaStreams = {};\n\twindow._dataChannels = [];\n\twindow.ssrc2jid = {};\n\twindow.jid2Ssrc = {};\n\twindow.ssrc2videoType = {};\n\twindow.ssrc2resolution = {};\n\twindow.activecall = null;\n\twindow.statsCollector = null;\n\twindow.mutedAudios = {};\n\twindow.mutedVideos = {};\n\twindow.forceMuted = false;\n\twindow.forceSetVideo = false;\n\twindow.currentVideoInputDeviceId = null;\n\twindow.currentAudioInputDeviceId = null;\n\twindow.currentAudioOutputDeviceId = null;\n\twindow.connectType = null;\n\twindow.localSSRCS = [];\n\t\n\tvar Manis = {\n\t\n\t  keepAliveTimer: null,\n\t\n\t  browserSupportCheck: function browserSupportCheck() {\n\t    var browserInfo = ms.getBrowserInfo();\n\t    console.log('get browser info: ', browserInfo);\n\t    if (browserInfo.name.indexOf('chrome') > -1 && browserInfo.version >= 53) {\n\t      return browserInfo;\n\t    } else if (browserInfo.name.indexOf('safari') > -1 && browserInfo.version >= 11) {\n\t      return browserInfo;\n\t    } else if (browserInfo.name.indexOf('firefox') > -1 && browserInfo.version >= 60) {\n\t      return false;\n\t    } else {\n\t      return browserInfo;\n\t    }\n\t  },\n\t\n\t  /**\r\n\t   * 初始化配置\r\n\t   * @param params\r\n\t   */\n\t  initial: function initial(params, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!this.browserSupportCheck()) {\n\t      callback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.no_test_browser_type_or_version,\n\t        errorCode: ErrorCode.no_test_browser_type_or_version\n\t      });\n\t      return;\n\t    }\n\t    if ((typeof params === 'undefined' ? 'undefined' : _typeof(params)) != 'object' || !params.server) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.params_error,\n\t        errorCode: ErrorCode.init_params_error\n\t      });\n\t      return;\n\t    }\n\t    try {\n\t      this.manisParams = params;\n\t      window.manisParams = params;\n\t      window.clientTypeCode = params.clientCode ? params.clientCode : '0101';\n\t      window.serverPath = DEFAULT_PROTOCOL + params.server;\n\t      if (params.type == 'p2p') {\n\t        window.connectType = 'p2p';\n\t      } else {\n\t        ManisScreenShare.setDesktopSharing(config.desktopSharing);\n\t        ManisConference.initDefaultInputDevices(params.audioInput, params.videoInput, params.audioOutput);\n\t        if (config.chromeExtensionId) {\n\t          ManisScreenShare.initInlineInstalls();\n\t        }\n\t      }\n\t      ManisFunctions.getClientConfig(params.server, function () {\n\t        callback({\n\t          code: ManisResponse.code_200,\n\t          msg: ManisResponse.init_success,\n\t          errorCode: ErrorCode.no_error\n\t        });\n\t      });\n\t    } catch (e) {\n\t      console.error(e);\n\t    }\n\t  },\n\t  /**\r\n\t   * 登录\r\n\t   * @param username\r\n\t   * @param password\r\n\t   * @param nickName\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   * @param connectServer\r\n\t   */\n\t  signIn: function signIn(username, password, nickName, successCallback, errorCallback, connectServer) {\n\t    var _this = this;\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!username) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.username_password_except,\n\t        errorCode: ErrorCode.username_except\n\t      });\n\t      return;\n\t    }\n\t    if (!password) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.username_password_except,\n\t        errorCode: ErrorCode.user_password_except\n\t      });\n\t      return;\n\t    }\n\t    var server = DEFAULT_PROTOCOL + this.manisParams.server + SIGN_CTL_PATH;\n\t    ManisSignIn.signInMeetingCtl(username, password, nickName, function (res) {\n\t      if (connectServer) {\n\t        _this.keepAlive();\n\t      }\n\t      successCallback(res);\n\t    }, errorCallback, server, this.manisParams.domain, connectServer);\n\t  },\n\t  /**\r\n\t   * 退出登录\r\n\t   * @param callback\r\n\t   */\n\t  signOut: function signOut(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection) {\n\t      window.connection.disconnect();\n\t      window.connection = null;\n\t    }\n\t    if (this.keepAliveTimer) {\n\t      window.clearInterval(this.keepAliveTimer);\n\t      this.keepAliveTimer = null;\n\t    }\n\t    callback({\n\t      code: ManisResponse.code_200,\n\t      msg: ManisResponse.sign_out_success,\n\t      errorCode: ErrorCode.no_error\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 登录Message server\r\n\t   * @param nickname\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\n\t  signInMessageServer: function signInMessageServer(nickname, successCallback, errorCallback) {\n\t    var _this = this;\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    ManisSignIn.signInXMPP(function (result) {\n\t      _this.keepAlive();\n\t      successCallback(result);\n\t    }, errorCallback, nickname);\n\t  },\n\t\n\t  /**\r\n\t   * 会话保持\r\n\t   */\n\t  keepAlive: function keepAlive() {\n\t    if (config.mUserId && config.endpoint && config.currentTimeMillis && connection) {\n\t      if (this.keepAliveTimer) {\n\t        window.clearInterval(this.keepAliveTimer);\n\t        this.keepAliveTimer = null;\n\t      }\n\t      var timer = window.setInterval(function () {\n\t        ManisFunctions.keepAlive(config.mUserId, config.endpoint, config.currentTimeMillis);\n\t      }, 1000 * 60 * 10);\n\t      this.keepAliveTimer = timer;\n\t    }\n\t  },\n\t  /**\r\n\t   *  创建会议\r\n\t   * @param conferencePassword\r\n\t   * @param comperePassword\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   * @param audioOnly\r\n\t   * @param localMediaStream\r\n\t   * @param withoutStream\r\n\t   */\n\t  createConference: function createConference(conferencePassword, comperePassword, successCallback, errorCallback) {\n\t    var audioOnly = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\t    var localMediaStream = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n\t    var withoutStream = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n\t\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    var server = DEFAULT_PROTOCOL + this.manisParams.server + CREATE_ROOM_PATH;\n\t    ManisConference.createOrJoinRoom(null, conferencePassword, comperePassword, successCallback, errorCallback, audioOnly, localMediaStream, withoutStream);\n\t  },\n\t  /**\r\n\t   *  加入到会议室\r\n\t   * @param conferenceNumber\r\n\t   * @param conferencePassword\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   * @param audioOnly\r\n\t   * @param localMediaStream\r\n\t   * @param withoutStream\r\n\t   */\n\t  joinConference: function joinConference(conferenceNumber, conferencePassword, successCallback, errorCallback) {\n\t    var audioOnly = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\t    var localMediaStream = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n\t    var withoutStream = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n\t\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!conferenceNumber || conferenceNumber.length <= 0) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.room_number_except,\n\t        errorCode: ErrorCode.conference_room_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    // try {\n\t    ManisConference.createOrJoinRoom(conferenceNumber, conferencePassword, null, successCallback, errorCallback, audioOnly, localMediaStream, withoutStream);\n\t    // }\n\t    // catch (e) {\n\t    //   errorCallback(LICENSE_ERROR);\n\t    // }\n\t  },\n\t  /**\r\n\t   *  匿名加入会议室\r\n\t   * @param conferenceNumber\r\n\t   * @param nickname\r\n\t   * @param conferencePassword\r\n\t   * @param isAudioOnly\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   * @param localMediaStream\r\n\t   * @param withoutStream\r\n\t   */\n\t  joinByAnonymous: function joinByAnonymous(conferenceNumber, nickname, conferencePassword) {\n\t    var isAudioOnly = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\t    var successCallback = arguments[4];\n\t    var errorCallback = arguments[5];\n\t    var localMediaStream = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n\t    var withoutStream = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : false;\n\t\n\t    var _this = this;\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!conferenceNumber) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.room_number_and_nickname_except,\n\t        errorCode: ErrorCode.conference_room_except\n\t      });\n\t      return;\n\t    }\n\t    if (!nickname) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.room_number_and_nickname_except,\n\t        errorCode: ErrorCode.conference_room_nickname_except\n\t      });\n\t      return;\n\t    }\n\t\n\t    // try {\n\t    var server = DEFAULT_PROTOCOL + this.manisParams.server + JOIN_BY_ANONYMOUS_URL;\n\t    ManisSignIn.signInMeetingCtlByAnonymous(server, nickname, function () {\n\t      _this.keepAlive();\n\t      Manis.joinConference(conferenceNumber, conferencePassword, successCallback, errorCallback, isAudioOnly, localMediaStream, withoutStream);\n\t    }, function () {\n\t      Manis.joinByAnonymous(conferenceNumber, nickname, conferencePassword, isAudioOnly, successCallback, errorCallback, localMediaStream, withoutStream);\n\t    });\n\t    // } catch (e) {\n\t    //   errorCallback(LICENSE_ERROR);\n\t    // }\n\t  },\n\t\n\t  /**\r\n\t   * 离开会议室\r\n\t   * @param callback\r\n\t   */\n\t  leaveConference: function leaveConference(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    // try {\n\t    Status.disposeConference();\n\t    // connection.emuc.doLeave();\n\t    ManisConference.leaveConferenceRoom();\n\t    window.participants = [];\n\t    window.mutedAudios = {};\n\t    window.localSSRCS = [];\n\t    Status.currentTargetResolution = null;\n\t    Status.currentTargetVideoInput = null;\n\t    window.currentVideoInputDeviceId = null;\n\t    window.currentAudioInputDeviceId = null;\n\t    window.currentAudioOutputDeviceId = null;\n\t    var localAudio = connection.jingle.localAudio;\n\t    var localVideo = connection.jingle.localVideo;\n\t    var localScreen = connection.jingle.localScreen;\n\t    if (localAudio && localAudio.getTracks().length) {\n\t      localAudio.getTracks().forEach(function (track) {\n\t        track.stop();\n\t      });\n\t    }\n\t    if (localVideo && localVideo.getTracks().length) {\n\t      localVideo.getTracks().forEach(function (track) {\n\t        track.stop();\n\t      });\n\t    }\n\t    if (localScreen && localScreen.getTracks().length) {\n\t      localScreen.getTracks().forEach(function (track) {\n\t        track.stop();\n\t      });\n\t    }\n\t    callback({\n\t      code: ManisResponse.code_200,\n\t      msg: ManisResponse.leave_room,\n\t      errorCode: ErrorCode.no_error\n\t    });\n\t    // } catch (e) {\n\t    //   callback(LICENSE_ERROR);\n\t    // }\n\t  },\n\t  /**\r\n\t   * 有人加入会议室\r\n\t   * @param callback\r\n\t   */\n\t  onJoinConference: function onJoinConference(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.room.someone.joined');\n\t    $(document).bind('manis.room.someone.joined', function (event, participant) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.on_participant_joined,\n\t        response: participant,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t  /**\r\n\t   * 有人离开会议室\r\n\t   * @param callback\r\n\t   */\n\t  onLeaveConference: function onLeaveConference(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.room.someone.left');\n\t    $(document).bind('manis.room.someone.left', function (event, participant) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.on_participant_left,\n\t        response: participant,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t  /**\r\n\t   * 獲取參會人員列表\r\n\t   * @param callback\r\n\t   */\n\t  memberList: function memberList(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (window.participants.length) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.got_participants,\n\t        response: window.participants,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    } else {\n\t      callback({\n\t        code: ManisResponse.code_404,\n\t        msg: ManisResponse.room_unopend,\n\t        errorCode: ErrorCode.conference_room_un_open\n\t      });\n\t    }\n\t  },\n\t\n\t  /**\r\n\t   * 开关音频\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   * @param audioSwitch\r\n\t   */\n\t  audioToggleMute: function audioToggleMute(successCallback, errorCallback, audioSwitch) {\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (window.connectType == 'p2p') {\n\t      P2P.muteAudio(successCallback, errorCallback);\n\t      return;\n\t    }\n\t    var mute = audioSwitch != undefined ? audioSwitch : !ManisFunctions.isAudioMuted();\n\t    ManisFunctions.setAudioMute(mute, function () {\n\t      successCallback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.set_audio_toggle_complete,\n\t        response: mute,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    }, function () {\n\t      errorCallback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.set_audio_toggle_failed,\n\t        response: !mute,\n\t        errorCode: ErrorCode.audio_switch_mute_failed\n\t      });\n\t    });\n\t\n\t    /*try {\r\n\t      var mute = (audioSwitch != undefined) ? audioSwitch :(!ManisFunctions.isAudioMuted());\r\n\t        var localAudioTracks = connection.jingle.localAudio.getAudioTracks();\r\n\t      if (localAudioTracks.length > 0) {\r\n\t        for (var idx = 0; idx < localAudioTracks.length; idx++) {\r\n\t          localAudioTracks[idx].enabled = !mute;\r\n\t        }\r\n\t      }\r\n\t      var resource = connection.jid.split('/')[1];\r\n\t      var iqToFocus = $iq({to: window.focusJid, type: 'set', from: connection.jid}).c('mute', {\r\n\t        xmlns: 'http://jitsi.org/jitmeet/audio',\r\n\t        jid: connection.jid,\r\n\t        userjid: connection.jid\r\n\t      }).t(mute.toString()).up();\r\n\t      connection.sendIQ(iqToFocus, function (success) {\r\n\t        connection.emuc.addAudioInfoToPresence(mute);\r\n\t        connection.emuc.sendPresence();\r\n\t        $(document).trigger('audiomuted.muc',[connection.jid, mute.toString()]);\r\n\t        successCallback({\r\n\t          code: ManisResponse.code_200,\r\n\t          msg: ManisResponse.set_audio_toggle_complete,\r\n\t          response: mute,\r\n\t          errorCode: ErrorCode.no_error\r\n\t        });\r\n\t      }, function (error) {\r\n\t        errorCallback({\r\n\t          code: ManisResponse.code_400,\r\n\t          msg: ManisResponse.set_audio_toggle_failed,\r\n\t          response: !mute,\r\n\t          errorCode: ErrorCode.audio_switch_mute_failed\r\n\t        });\r\n\t      });\r\n\t    } catch (e) {\r\n\t      errorCallback(LICENSE_ERROR);\r\n\t    }*/\n\t  },\n\t  /**\r\n\t   *  捕获音频开关变更\r\n\t   * @param callback\r\n\t   */\n\t  onAudioToggleMute: function onAudioToggleMute(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('audiomuted.muc');\n\t    $(document).bind('audiomuted.muc', function (event, jid, isMuted) {\n\t      isMuted = isMuted == 'true';\n\t      for (var i = 0; i < window.participants.length; i++) {\n\t        var participant = window.participants[i];\n\t        if (participant.resource == Strophe.getResourceFromJid(jid)) {\n\t          participant.audio_muted = isMuted;\n\t          window.participants[i] = participant;\n\t        }\n\t      }\n\t      if (mutedAudios[jid] !== isMuted) {\n\t        mutedAudios[jid] = isMuted;\n\t        callback({\n\t          user: ManisFunctions.getUserInfoByJid(jid),\n\t          mute: isMuted,\n\t          errorCode: ErrorCode.no_error\n\t        });\n\t      }\n\t    });\n\t  },\n\t  /**\r\n\t   * 开关视频\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   * @param videoSwitch\r\n\t   */\n\t  videoToggleMute: function videoToggleMute(successCallback, errorCallback, videoSwitch) {\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (window.connectType == 'p2p') {\n\t      P2P.muteVideo(successCallback, errorCallback);\n\t      return;\n\t    }\n\t\n\t    var mute = videoSwitch != undefined ? videoSwitch : !ManisFunctions.isVideoMuted();\n\t\n\t    ManisFunctions.setVideoMute(mute, function () {\n\t      successCallback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.set_video_toggle_complete,\n\t        response: mute,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    }, function () {\n\t      successCallback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.set_video_toggle_failed,\n\t        response: !mute,\n\t        errorCode: ErrorCode.video_switch_mute_failed\n\t      });\n\t    });\n\t\n\t    /*    try {\r\n\t          var session = window.activecall;\r\n\t          var targetMute = (videoSwitch != undefined) ? videoSwitch : (!session.isVideoMute());\r\n\t          if (session) {\r\n\t            ManisFunctions.setVideoMute(targetMute, function () {\r\n\t              successCallback({\r\n\t                code: ManisResponse.code_200,\r\n\t                msg: ManisResponse.set_video_toggle_complete,\r\n\t                response: targetMute,\r\n\t                errorCode: ErrorCode.no_error\r\n\t              })\r\n\t            }, function (error) {\r\n\t              successCallback({\r\n\t                code: ManisResponse.code_400,\r\n\t                msg: ManisResponse.set_video_toggle_failed,\r\n\t                response: !targetMute,\r\n\t                errorCode: ErrorCode.video_switch_mute_failed\r\n\t              });\r\n\t            });\r\n\t          } else {\r\n\t            errorCallback({\r\n\t              code: ManisResponse.code_400,\r\n\t              msg: ManisResponse.set_video_toggle_failed,\r\n\t              errorCode: ErrorCode.conference_room_wait_others\r\n\t            })\r\n\t          }\r\n\t        } catch (e) {\r\n\t          errorCallback(LICENSE_ERROR);\r\n\t        }*/\n\t  },\n\t  /**\r\n\t   * 捕获视频开关变化\r\n\t   * @param callback\r\n\t   */\n\t  onVideoToggleMute: function onVideoToggleMute(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('videomuted.muc');\n\t    $(document).bind('videomuted.muc', function (event, jid, isMuted) {\n\t      isMuted = isMuted.toString() == 'true';\n\t      for (var i = 0; i < window.participants.length; i++) {\n\t        var participant = window.participants[i];\n\t        if (participant.resource == Strophe.getResourceFromJid(jid)) {\n\t          participant.video_muted = isMuted;\n\t        }\n\t      }\n\t      if (mutedVideos[jid] !== isMuted) {\n\t        mutedVideos[jid] = isMuted;\n\t        callback({\n\t          user: ManisFunctions.getUserInfoByJid(jid),\n\t          mute: isMuted,\n\t          errorCode: ErrorCode.no_error\n\t        });\n\t      }\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 判断是否拥有主持人权限\r\n\t   * @returns {boolean}\r\n\t   */\n\t  isAdmin: function isAdmin() {\n\t    return ManisFunctions.isAdmin();\n\t  },\n\t  /**\r\n\t   *  移交主持人。\r\n\t   * @param resource\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\n\t  grantAdmin: function grantAdmin(resource, successCallback, errorCallback) {\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!resource) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.resource_except,\n\t        errorCode: ErrorCode.grant_admin_participant_except\n\t      });\n\t      return;\n\t    }\n\t    var participant = ManisFunctions.getUserByResource(resource);\n\t    if (!participant) {\n\t      errorCallback({\n\t        code: ManisResponse.code_404,\n\t        msg: ManisResponse.participant_not_in_room,\n\t        errorCode: ErrorCode.grant_admin_participant_not_exist\n\t      });\n\t      return;\n\t    }\n\t    var roomNumber = roomName ? roomName.split('@')[0] : null;\n\t    if (!roomNumber) {\n\t      errorCallback({\n\t        code: ManisResponse.code_404,\n\t        msg: ManisResponse.room_unopend,\n\t        errorCode: ErrorCode.conference_room_un_open\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isAdmin()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.out_of_authority,\n\t        errorCode: ErrorCode.without_permission_for_the_operation\n\t      });\n\t      return;\n\t    }\n\t    ManisConference.grantAdmin(participant, roomNumber, successCallback, errorCallback);\n\t  },\n\t\n\t  /**\r\n\t   * 注册被授权主持人权限的回调\r\n\t   * @param callback\r\n\t   */\n\t  onGrantAdmin: function onGrantAdmin(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.grant.admin');\n\t    $(document).bind('manis.on.grant.admin', function (event) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.on_grant_admin_completed,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 主持人权限被收回\r\n\t   * @param callback\r\n\t   */\n\t  onRemoveAdmin: function onRemoveAdmin(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.remove.admin');\n\t    $(document).bind('manis.on.remove.admin', function (event) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.on_remove_admin_completed,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 获取主持人权限\r\n\t   * @param password\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\n\t  fetchAdmin: function fetchAdmin(password, successCallback, errorCallback) {\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!password) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.compere_password_except,\n\t        errorCode: ErrorCode.fetch_admin_password_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    var participant = ManisFunctions.getUserByResource(Strophe.getResourceFromJid(connection.jid));\n\t    var roomNumber = roomName ? roomName.split('@')[0] : null;\n\t    if (!participant || !roomNumber) {\n\t      errorCallback({\n\t        code: ManisResponse.code_404,\n\t        msg: ManisResponse.room_unopend,\n\t        errorCode: ErrorCode.conference_room_un_open\n\t      });\n\t      return;\n\t    }\n\t    if (ManisFunctions.isAdmin()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.compere_authority_own,\n\t        errorCode: ErrorCode.fetch_admin_failed_owen_it\n\t      });\n\t      return;\n\t    }\n\t    ManisConference.fetchAdmin(participant, roomNumber, password, successCallback, errorCallback);\n\t  },\n\t  /**\r\n\t   * 发送文字消息\r\n\t   * @param message\r\n\t   * @param resource\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\n\t  sendTextMessage: function sendTextMessage(message, resource, successCallback, errorCallback) {\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!message) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.message_content_null,\n\t        errorCode: ErrorCode.text_message_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    // try {\n\t    if (resource) {\n\t      var participant = ManisFunctions.getUserByResource(resource);\n\t      if (!participant) {\n\t        errorCallback({\n\t          code: ManisResponse.code_404,\n\t          msg: ManisResponse.participant_not_in_room,\n\t          errorCode: ErrorCode.private_text_message_receiver_not_exist\n\t        });\n\t        return;\n\t      }\n\t      ManisSignIn.sendPrivateMessage(message, participant, window.self.nickname, successCallback);\n\t      $(document).trigger('onmessage.muc', [window.connection.jid, window.self.nickname, message, true, participant.nickname]);\n\t    } else {\n\t      window.connection.emuc.sendMessage(message, window.self.nickname);\n\t      $(document).trigger('onmessage.muc', [window.connection.jid, window.self.nickname, message, false, '']);\n\t      successCallback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.message_send_complete,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    }\n\t    // } catch (e) {\n\t    //   errorCallback(LICENSE_ERROR);\n\t    // }\n\t  },\n\t\n\t  /**\r\n\t   * 收到文字消息\r\n\t   * @param callback\r\n\t   */\n\t  onTextMessage: function onTextMessage(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('onmessage.muc');\n\t    $(document).bind('onmessage.muc', function (event, from, nickname, text, privateMsg, receiver) {\n\t      if (Strophe.getResourceFromJid(from) == Strophe.getResourceFromJid(connection.jid)) {\n\t        var sendFromMe = true;\n\t      } else {\n\t        var sendFromMe = false;\n\t      }\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.receive_text_message_complete,\n\t        response: {\n\t          from: nickname,\n\t          content: text,\n\t          isPrivateMsg: privateMsg === true ? true : false,\n\t          to: receiver === undefined && privateMsg === true ? 'all' : receiver,\n\t          sendFromMe: sendFromMe\n\t        },\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 主持人设置静音/取消\r\n\t   * @param resource\r\n\t   * @param mute\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\n\t  setSomeoneAudioMute: function setSomeoneAudioMute(resource, mute, successCallback, errorCallback) {\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!resource) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.becontrol_user_resource_except,\n\t        errorCode: ErrorCode.operate_someone_audio_participant_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isAdmin()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.out_of_authority,\n\t        errorCode: ErrorCode.without_permission_for_the_operation\n\t      });\n\t      return;\n\t    }\n\t    ManisConference.setAudioMute(resource, mute, successCallback, errorCallback);\n\t  },\n\t\n\t  /**\r\n\t   * 收到主持人修改音频状态的信息\r\n\t   * @param callback\r\n\t   */\n\t  onAudioMuteBeSet: function onAudioMuteBeSet(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('onmute.audio.muc');\n\t    $(document).bind('onmute.audio.muc', function (event, mute) {\n\t      window.forceMuted = mute;\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.be_set_mute_complete,\n\t        response: mute,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 主持人开关参会成员视频\r\n\t   * @param resource\r\n\t   * @param mute\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\n\t  setSomeoneVideoMute: function setSomeoneVideoMute(resource, mute, successCallback, errorCallback) {\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t      return;\n\t    }\n\t    if (!resource) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.becontrol_user_resource_except,\n\t        errorCode: ErrorCode.operate_someone_video_participant_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isAdmin()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.out_of_authority,\n\t        errorCode: ErrorCode.without_permission_for_the_operation\n\t      });\n\t      return;\n\t    }\n\t    ManisConference.setVideoMute(resource, mute, successCallback, errorCallback);\n\t  },\n\t\n\t  /**\r\n\t   * 被主持人开关视频\r\n\t   * @param callback\r\n\t   */\n\t  onVideoMuteBeSet: function onVideoMuteBeSet(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('onmute.video.muc');\n\t    $(document).bind('onmute.video.muc', function (event, mute) {\n\t      window.forceSetVideo = mute;\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.be_set_video_complete,\n\t        response: mute,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 从会议室踢出\r\n\t   * @param resource\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\n\t  eject: function eject(resource, successCallback, errorCallback) {\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!resource) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.becontrol_user_resource_except,\n\t        errorCode: ErrorCode.eject_participant_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isAdmin()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.out_of_authority,\n\t        errorCode: ErrorCode.without_permission_for_the_operation\n\t      });\n\t      return;\n\t    }\n\t    var participant = ManisFunctions.getUserByResource(resource);\n\t    if (!participant) {\n\t      errorCallback({\n\t        code: ManisResponse.code_404,\n\t        msg: ManisResponse.participant_not_in_room,\n\t        errorCode: ErrorCode.eject_participant_not_exist\n\t      });\n\t      return;\n\t    }\n\t    ManisConference.eject(participant, successCallback, errorCallback);\n\t  },\n\t\n\t  /**\r\n\t   * 被踢出了房间\r\n\t   * @param callback\r\n\t   */\n\t  onEject: function onEject(callback) {\n\t    var _this = this;\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('oneject.muc');\n\t    $(document).bind('oneject.muc', function (event, from) {\n\t      if (from.indexOf('admin') > -1) {\n\t        window.exitCode = 1007;\n\t      } else {\n\t        window.exitCode = 1008;\n\t      }\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.you_have_been_eject,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t      _this.leaveConference(function (result) {\n\t        console.log(result);\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 获取视频输入设备列表\r\n\t   * @param callback\r\n\t   */\n\t  getVideoInputDevices: function getVideoInputDevices(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    Status.getDevices(VIDEO_INPUT_DEVICES_TYPE, callback);\n\t  },\n\t\n\t  /**\r\n\t   * 改变视频输入列表\r\n\t   * @param inputDeviceId\r\n\t   * @param callback\r\n\t   * @param videoResolution\r\n\t   */\n\t  changeVideoInputDevice: function changeVideoInputDevice(inputDeviceId, callback, videoResolution) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    var targetResolution = videoResolution ? videoResolution : config.currentResolution;\n\t    if (!inputDeviceId && !targetResolution) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.video_device_id_except,\n\t        errorCode: ErrorCode.change_video_input_device_except\n\t      });\n\t    }\n\t    window.currentVideoInputDeviceId = inputDeviceId;\n\t    config.resolution = config.storeResolution;\n\t    Status.modifyLocalVideoStream(targetResolution, inputDeviceId, callback);\n\t  },\n\t\n\t  /**\r\n\t   * 修改分辨率\r\n\t   * @param resolution\r\n\t   * @param callback\r\n\t   */\n\t  changeResolution: function changeResolution(resolution, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!resolution || AcceptResolutions.indexOf(resolution) < 0) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.resolution_params_error,\n\t        error: resolution,\n\t        errorCode: ErrorCode.change_resolution_not_match\n\t      });\n\t      return;\n\t    }\n\t    try {\n\t      Status.changeResolutionByApplyConstraints(resolution, window.currentVideoInputDeviceId, callback);\n\t    } catch (e) {\n\t      // console.error(e);\n\t      Status.modifyLocalVideoStream(resolution, window.currentVideoInputDeviceId, callback);\n\t    }\n\t  },\n\t\n\t  /**\r\n\t   * 音频输入设备列表\r\n\t   * @param callback\r\n\t   */\n\t  audioInputDevices: function audioInputDevices(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    Status.getDevices(AUDIO_INPUT_DEVICES_TYPE, callback);\n\t  },\n\t\n\t  /**\r\n\t   * 更改音频输入设备\r\n\t   * @param audioInputDevice\r\n\t   * @param callback\r\n\t   */\n\t  audioInputChange: function audioInputChange(audioInputDevice, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!audioInputDevice) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.video_device_id_except,\n\t        errorCode: ErrorCode.change_audio_input_device_except\n\t      });\n\t      return;\n\t    }\n\t    window.currentAudioInputDeviceId = audioInputDevice;\n\t    Status.modifyLocalAudioStream(audioInputDevice, callback);\n\t  },\n\t\n\t  /**\r\n\t   * 音频输出设备列表\r\n\t   * @param callback\r\n\t   */\n\t  audioOutputDevices: function audioOutputDevices(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    Status.getDevices(AUDIO_OUTPUT_DEVICES_TYPE, callback);\n\t  },\n\t\n\t  /**\r\n\t   * 更改音频输出设备\r\n\t   * @param audioOutputDevice\r\n\t   * @param callback\r\n\t   */\n\t  audioOutputDeviceChange: function audioOutputDeviceChange(audioOutputDevice, callback) {\n\t    var _this = this;\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!audioOutputDevice) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.audio_output_except,\n\t        errorCode: ErrorCode.change_audio_output_device_except\n\t      });\n\t      return;\n\t    }\n\t    document.querySelectorAll('audio').forEach(function (element, index) {\n\t      _this.attachSinkId(element, audioOutputDevice);\n\t    });\n\t    callback({\n\t      code: ManisResponse.code_200,\n\t      msg: ManisResponse.audio_output_change_completed,\n\t      errorCode: ErrorCode.no_error\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 绑定音频播放设备ID\r\n\t   * @param element\r\n\t   * @param sinkId\r\n\t   */\n\t  attachSinkId: function attachSinkId(element, sinkId) {\n\t    if (typeof element.sinkId !== 'undefined') {\n\t      element.setSinkId(sinkId).then(function () {\n\t        console.log('Success, audio output device attached: ' + sinkId);\n\t      }).catch(function (error) {\n\t        var errorMessage = error;\n\t        if (error.name === 'SecurityError' || error.constructor.name === 'SecurityError') {\n\t          errorMessage = 'You need to use HTTPS for selecting audio output ' + 'device: ' + error;\n\t        }\n\t        console.error(errorMessage);\n\t      });\n\t    } else {\n\t      console.warn('Browser does not support output device selection.');\n\t    }\n\t  },\n\t\n\t  /**\r\n\t   * 取消呼叫SIP终端\r\n\t   * @param sip\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\n\t  cancelSipCall: function cancelSipCall(sip, successCallback, errorCallback) {\n\t    this.callSip(sip, successCallback, errorCallback, '', '', true);\n\t  },\n\t\n\t  /**\r\n\t   * 呼叫SIP终端\r\n\t   * @param sip\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   * @param sipRecordRule\r\n\t   * @param recorderUserId\r\n\t   * @param cancelCall\r\n\t   */\n\t  callSip: function callSip(sip, successCallback, errorCallback, sipRecordRule, recorderUserId) {\n\t    var cancelCall = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\t\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!sip) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.sip_number_except,\n\t        errorCode: ErrorCode.sip_client_except\n\t      });\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isAdmin()) {\n\t      errorCallback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.out_of_authority,\n\t        errorCode: ErrorCode.without_permission_for_the_operation\n\t      });\n\t      return;\n\t    }\n\t    // try to get new gw if it exists\n\t\n\t    ManisConference.updateGWConfig(function (result) {\n\t      if (result.code == 200) {\n\t        config.gw = result.response;\n\t      }\n\t      if (config.gw == null) {\n\t        errorCallback({\n\t          code: ManisResponse.code_421,\n\t          msg: ManisResponse.sip_gateway_except,\n\t          errorCode: ErrorCode.sip_gateway_except\n\t        });\n\t      }\n\t      if (cancelCall) {\n\t        ManisSignIn.cancelCallSip(config.gw, sip, successCallback, errorCallback);\n\t        return;\n\t      }\n\t      ManisSignIn.callSip(config.gw, sip, successCallback, errorCallback, sipRecordRule, recorderUserId, config.roomPassword);\n\t    });\n\t  },\n\t  /**\r\n\t   * 拨号\r\n\t   * @param receiver\r\n\t   * @param roomNumber // 房间号\r\n\t   * @param roomPassword // 房间密码\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\n\t  ringUp: function ringUp(receiver, roomNumber, roomPassword, successCallback, errorCallback) {\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!receiver) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.be_inviste_user_except,\n\t        errorCode: ErrorCode.invoke_receiver_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      errorCallback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    ManisSignIn.ringUp(receiver, roomNumber, function (result) {\n\t      window.withReply = false;\n\t      window.incomingCall = true;\n\t      setTimeout(function () {\n\t        if (window.withReply === false) {\n\t          window.incomingCall = false;\n\t          $(document).trigger('manis.onringup.reply', [null, null, null, 'timeout', ManisResponse.code_406, ManisResponse.invite_time_out]);\n\t        }\n\t      }, ManisResponse.time_out_seconds);\n\t      successCallback(result);\n\t    }, errorCallback, 0, roomPassword);\n\t  },\n\t  /**\r\n\t   * 被叫\r\n\t   * @param callback\r\n\t   */\n\t  onRingUp: function onRingUp(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('oninvite.muc');\n\t    $(document).bind('oninvite.muc', function (event, from, nick, room, password, callType) {\n\t      if (window.incomingCall != false || ManisFunctions.isInRoom()) {\n\t        // 正在处理第一个被叫或者参会中,自动应答第二个被叫忙.\n\t        ManisSignIn.sendInviteBusy(from, room, self.nickname);\n\t        return;\n\t      }\n\t      window.incomingCall = true;\n\t      window.ringCallStartAt = new Date().valueOf();\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.on_ring_up,\n\t        response: {\n\t          uuid: from,\n\t          nickname: nick,\n\t          password: password,\n\t          roomName: room,\n\t          callType: callType\n\t        },\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t  /**\r\n\t   * 答复响铃\r\n\t   * @param roomNumber\r\n\t   * @param roomPassword\r\n\t   * @param reply\r\n\t   * @param requester\r\n\t   * @param callback\r\n\t   */\n\t  responseRingUp: function responseRingUp(roomNumber, roomPassword, reply, requester, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    window.incomingCall = false;\n\t    if (window.ringCallStartAt) {\n\t      var currentTime = new Date().valueOf();\n\t      if (currentTime - window.ringCallStartAt > ManisResponse.time_out_seconds) {\n\t        callback({\n\t          code: ManisResponse.code_406,\n\t          msg: ManisResponse.reply_invite_time_out,\n\t          errorCode: ErrorCode.called_expired\n\t        });\n\t        return;\n\t      }\n\t    }\n\t    if (reply == true) {\n\t      var _response = ManisSignIn.sendInviteAccept(requester, roomNumber, self.nickname);\n\t    } else {\n\t      var _response = ManisSignIn.sendInviteReject(requester, roomNumber, self.nickname);\n\t    }\n\t    callback({\n\t      code: ManisResponse.code_200,\n\t      msg: ManisResponse.response_invite_msg_complete,\n\t      response: _response,\n\t      errorCode: ErrorCode.no_error\n\t    });\n\t  },\n\t  /**\r\n\t   * 收到拨号响应\r\n\t   * @param callback\r\n\t   */\n\t  onRingUpResponse: function onRingUpResponse(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.onringup.reply');\n\t    $(document).bind('manis.onringup.reply', function (event, from, nick, room, reply, code, msg) {\n\t      window.withReply = true;\n\t      window.incomingCall = false;\n\t      callback({\n\t        code: code ? code : ManisResponse.code_200,\n\t        msg: msg ? msg : ManisResponse.on_ring_up_reply,\n\t        response: {\n\t          uuid: from,\n\t          nickname: nick,\n\t          roomName: room,\n\t          answer: reply\n\t        },\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t  /**\r\n\t   * 当拨号呼叫对方接听后,创建\r\n\t   * 会议室并发送Join消息给被叫\r\n\t   * 者,被叫收到Join消息加入\r\n\t   * 对应会议室\r\n\t   * @param receiver\r\n\t   * @param roomNumber\r\n\t   * @param roomPassword\r\n\t   * @param callback\r\n\t   */\n\t  sendRoomComplete: function sendRoomComplete(receiver, roomNumber, roomPassword, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!receiver) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.be_inviste_user_except,\n\t        errorCode: ErrorCode.invoke_room_ready_receiver_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    try {\n\t      ManisSignIn.sendJoinAfterRingCallAccept(receiver, roomNumber, roomPassword, config.nickname || '');\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.send_inviste_success,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    } catch (e) {\n\t      callback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.send_inviste_failed,\n\t        errorCode: ErrorCode.send_room_ready_msg_failed\n\t      });\n\t    }\n\t  },\n\t\n\t  /**\r\n\t   * 接听后收到房间已经准备好的消\r\n\t   * 息,收到此消息后进入到对应房间\r\n\t   * @param callback\r\n\t   */\n\t  onRoomComplete: function onRoomComplete(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('oninvite.room.complete.after.accept.request');\n\t    $(document).bind('oninvite.room.complete.after.accept.request', function (event, room, password) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.room_opened,\n\t        response: {\n\t          roomNumber: room,\n\t          roomPassword: password\n\t        },\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 发送被叫消息已被处理的广播\r\n\t   * 消息,其他终端收到消息则关闭\r\n\t   * 被叫响铃通知\r\n\t   * @param callback\r\n\t   */\n\t  sendRingCallProcessed: function sendRingCallProcessed(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    try {\n\t      var receiver = connection.jid ? connection.jid.split('/')[0] : config.mUserId + '@conference.' + manisConfg.messageServer;\n\t      ManisSignIn.sendRingCallProcessedMsg(receiver);\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.ring_call_request_in_processed_sent_success,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    } catch (e) {\n\t      callback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.ring_call_request_in_processed_sent_failed,\n\t        errorCode: ErrorCode.called_request_in_processed_sent_failed\n\t      });\n\t    }\n\t  },\n\t\n\t  /**\r\n\t   * 收到被叫消息已经被别的终端处理\r\n\t   * @param callback\r\n\t   */\n\t  onRingCallProcessed: function onRingCallProcessed(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('oninvite.room.processed');\n\t    $(document).bind('oninvite.room.processed', function (event) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.ring_call_request_in_processed,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 房间是否存在\r\n\t   * @param roomNumber\r\n\t   * @param callback\r\n\t   */\n\t  isRoomExist: function isRoomExist(roomNumber, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    var _to = roomNumber + '@conference.' + config.focusUserJid.replace('focus@', '');\n\t    var _iq = $iq({\n\t      type: \"get\",\n\t      to: _to,\n\t      id: connection.getUniqueId()\n\t    }).c(\"query\", { xmlns: \"http://jabber.org/protocol/disco#info\" }).tree();\n\t    // console.log('check iq : ', _iq);\n\t    connection.sendIQ(_iq, function (success) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.room_opened,\n\t        errorCode: ErrorCode.conference_room_opened\n\t      });\n\t    }, function (error) {\n\t      callback({\n\t        code: ManisResponse.code_404,\n\t        msg: ManisResponse.room_unopend,\n\t        errorCode: ErrorCode.conference_room_un_open\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 白板共享\r\n\t   * @param callback\r\n\t   */\n\t  whiteboardShare: function whiteboardShare(callback, appDir) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isAdmin()) {\n\t      callback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.out_of_authority,\n\t        errorCode: ErrorCode.without_permission_for_the_operation\n\t      });\n\t      return;\n\t    }\n\t    connection.ofmuc.openAppsDialog(false, appDir ? appDir : 'apps/drawing/index.html', callback);\n\t  },\n\t\n\t  /**\r\n\t   * 屏幕分享(双流模式)\r\n\t   * @param callback\r\n\t   */\n\t  addScreenSourceToConnection: function addScreenSourceToConnection(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isAdmin()) {\n\t      callback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.out_of_authority,\n\t        errorCode: ErrorCode.without_permission_for_the_operation\n\t      });\n\t      return;\n\t    }\n\t    var session = window.activecall;\n\t    if (!session) {\n\t      callback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.share_screen_failed,\n\t        errorCode: ErrorCode.conference_room_wait_others\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisScreenShare.isDesktopSharingEnabled()) {\n\t      callback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.share_screen_failed,\n\t        errorCode: ErrorCode.share_screen_nonsupport\n\t      });\n\t      return;\n\t    }\n\t    ManisScreenShare.toggleScreenSharing(function (result) {\n\t      console.log('BBBBBBBBBBBBBBBB', result);\n\t      if (result.response.stream) {\n\t        // get screen stream success\n\t        window.isUsingScreenStream = true;\n\t        Status.addScreenSourceToConnection(result.response.stream, callback);\n\t      } else {\n\t        // get screen stream failed\n\t        callback({\n\t          code: ManisResponse.code_400,\n\t          msg: ManisResponse.share_screen_failed,\n\t          errorCode: result.errorCode\n\t        });\n\t      }\n\t    }, function (error) {\n\t      callback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.share_screen_failed,\n\t        errorCode: error.errorCode\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 从连接中移除屏幕分享流\r\n\t   * @param callback\r\n\t   */\n\t  removeScreenSourceFromConnection: function removeScreenSourceFromConnection(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    try {\n\t      // console.log('++++++++++++++++++++++++ screen stream ended 0000000000');\n\t      window.removeScreenInprogress = true;\n\t      window.isUsingScreenStream = false;\n\t      Status.removeScreenSourceFromConnection(function (res) {\n\t        ManisScreenShare.streamSwitchDone();\n\t        callback(res);\n\t      });\n\t    } catch (e) {\n\t      callback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.share_screen_error,\n\t        errorCode: ErrorCode.share_screen_stop_failed\n\t      });\n\t    }\n\t  },\n\t\n\t  onShareScreenStart: function onShareScreenStart(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('mains.on.screen.share.start');\n\t    $(document).bind('mains.on.screen.share.start', function (event) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.share_screen_success,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 屏幕分享结束事件\r\n\t   * @param callback\r\n\t   */\n\t  onShareScreenEnd: function onShareScreenEnd(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('mains.on.screen.share.end');\n\t    $(document).bind('mains.on.screen.share.end', function (event) {\n\t      window.removeScreenInprogress = false;\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.share_screen_ended,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t  /**\r\n\t   * 注册有流从连接中被删除事件\r\n\t   * @param callback\r\n\t   */\n\t  onStreamSourceRemoved: function onStreamSourceRemoved(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('mains.on.stream.removed');\n\t    $(document).bind('mains.on.stream.removed', function (event, _type, _ssrc, _hardRemove) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.on_stream_removed,\n\t        response: {\n\t          type: _type,\n\t          ssrc: _ssrc,\n\t          hardRemove: _hardRemove\n\t        }\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 注册有新流加入到连接中\r\n\t   * @param callback\r\n\t   */\n\t  onStreamSourceAdded: function onStreamSourceAdded(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).bind('mains.on.stream.added');\n\t    $(document).bind('mains.on.stream.added', function (event, resource) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.on_stream_added,\n\t        response: resource\n\t      });\n\t    });\n\t  },\n\t  /**\r\n\t   * 获取我的好友列表\r\n\t   * @param callback\r\n\t   */\n\t  getFriends: function getFriends(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    ManisSignIn.myFriends(callback);\n\t  },\n\t\n\t  /**\r\n\t   * 锁定/解锁房间\r\n\t   * @param switchAction\r\n\t   * @param callback\r\n\t   */\n\t  lockRoom: function lockRoom(switchAction, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isAdmin()) {\n\t      callback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.out_of_authority,\n\t        errorCode: ErrorCode.without_permission_for_the_operation\n\t      });\n\t      return;\n\t    }\n\t    ManisConference.lockRoom(switchAction, callback);\n\t  },\n\t\n\t  /**\r\n\t   * 初始化主持人权限\r\n\t   * @param callback\r\n\t   */\n\t  initModerator: function initModerator(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    ManisFunctions.initModerator(callback);\n\t  },\n\t\n\t  /**\r\n\t   * 主持人存在状态事件监听\r\n\t   * @param callback\r\n\t   */\n\t  onWithModeratorChanged: function onWithModeratorChanged(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.with.moderator.changed');\n\t    $(document).bind('manis.on.with.moderator.changed', function (event, withModerator, timeLeft) {\n\t      window.config.withModerator = withModerator;\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.with_moderator_status_changed,\n\t        response: {\n\t          moderator: withModerator,\n\t          time: timeLeft\n\t        }\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 捕获未知错误\r\n\t   * @param callback\r\n\t   */\n\t  systemError: function systemError(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.unknown.error');\n\t    $(document).bind('manis.on.unknown.error', function (event, error) {\n\t      callback({\n\t        code: ManisResponse.code_500,\n\t        errorCode: ErrorCode.unknown_error,\n\t        msg: ManisResponse.network_error,\n\t        error: error\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 增加第二路流到连接中(可能非屏幕分享)\r\n\t   * @param stream\r\n\t   * @param callback\r\n\t   */\n\t  addSecondStreamToConnection: function addSecondStreamToConnection(stream, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isAdmin()) {\n\t      callback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.out_of_authority,\n\t        errorCode: ErrorCode.without_permission_for_the_operation\n\t      });\n\t      return;\n\t    }\n\t    var session = window.activecall;\n\t    if (!session) {\n\t      callback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.connection_lost,\n\t        errorCode: ErrorCode.conference_room_wait_others\n\t      });\n\t      return;\n\t    }\n\t    if (!stream) {\n\t      callback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.second_stream_except,\n\t        errorCode: ErrorCode.second_stream_except\n\t      });\n\t      return;\n\t    }\n\t    try {\n\t      window.isUsingScreenStream = true;\n\t      Status.addScreenSourceToConnection(stream, callback);\n\t    } catch (e) {\n\t      callback({\n\t        errorCode: ErrorCode.second_stream_share_failed\n\t      });\n\t    }\n\t  },\n\t\n\t\n\t  /**\r\n\t   * 收到参会者音频流\r\n\t   * @param callback\r\n\t   */\n\t  participantAudioConnected: function participantAudioConnected(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.room.someone.audio.added');\n\t    $(document).bind('manis.room.someone.audio.added', function (event, participant) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.on_participant_audio_joined,\n\t        response: participant,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t\n\t\n\t  /**\r\n\t   * 会控结束会议\r\n\t   * @param callback\r\n\t   */\n\t  killedByManager: function killedByManager(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.management.kill');\n\t    $(document).bind('manis.management.kill', function (event, kill) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.room_kill_by_manager,\n\t        response: kill\n\t      });\n\t    });\n\t  },\n\t\n\t\n\t  /**\r\n\t   * 锁定状态发生改变\r\n\t   * @param callback\r\n\t   */\n\t  lockStatusChanged: function lockStatusChanged(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.room.lock.status.change');\n\t    $(document).bind('manis.room.lock.status.change', function (event, lockStatus) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.room_lock_status_change + (lockStatus ? '锁定' : '解锁'),\n\t        response: lockStatus.toString() == 'true' ? true : false\n\t      });\n\t    });\n\t  },\n\t\n\t\n\t  /**\r\n\t   * 用户状态变化\r\n\t   * @param callback\r\n\t   */\n\t  onParticipantStatusUpdate: function onParticipantStatusUpdate(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.participant.status.update');\n\t    $(document).bind('manis.participant.status.update', function (event, participant) {\n\t      for (var i = 0; i < window.participants.length; i++) {\n\t        var p = window.participants[i];\n\t        if (p.resource == Strophe.getResourceFromJid(participant.from)) {\n\t          p.nickname = participant.nickName;\n\t          p.audio_muted = participant.audioMuted == 'true' ? true : false;\n\t          p.video_muted = participant.videoMuted == 'true' ? true : false;\n\t          p.is_moderator = participant.configRole == 'CRUO' || participant.configRole == 'CRUA' ? true : false;\n\t          p.status = participant.status;\n\t          p.media_sources = participant.mediaSources;\n\t          window.participants.splice(i, 1, p);\n\t          callback({\n\t            code: ManisResponse.code_200,\n\t            errorCode: ErrorCode.no_error,\n\t            msg: ManisResponse.participant_status_update,\n\t            response: p\n\t          });\n\t        }\n\t      }\n\t    });\n\t  },\n\t\n\t\n\t  /**\r\n\t   * send hands up msg\r\n\t   * @param nickname\r\n\t   * @param action\r\n\t   * @param callback\r\n\t   */\n\t  handsUp: function handsUp(nickname, action, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t\n\t    var requestAction = action ? action : 'apply';\n\t    ManisFunctions.sendHandsUpMsg(nickname, requestAction, function () {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.hands_up_send_success,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    }, function (e) {\n\t      callback({\n\t        code: e.code,\n\t        msg: ManisResponse.hands_up_send_failed,\n\t        errorCode: ErrorCode.hand_up_send_failed\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * on hands up msg\r\n\t   * @param callback\r\n\t   */\n\t  onHandsUp: function onHandsUp(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.hands.up.msg');\n\t    $(document).bind('manis.on.hands.up.msg', function (event, _from, _nickname, _action) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.on_hands_up_msg,\n\t        response: {\n\t          from: _from,\n\t          nickname: _nickname,\n\t          action: _action\n\t        }\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   *\r\n\t   * @param receiver\r\n\t   * @param action\r\n\t   * @param content\r\n\t   * @param callback\r\n\t   */\n\t  responseHandsUp: function responseHandsUp(receiver, action, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!receiver) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.params_error,\n\t        errorCode: ErrorCode.hand_up_receiver_except\n\t      });\n\t      return;\n\t    }\n\t    if (!action || AcceptHandsUpResponse.indexOf(action) < 0) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.response_hands_up_action_error,\n\t        errorCode: ErrorCode.hand_up_response_action_illegality\n\t      });\n\t      return;\n\t    }\n\t    ManisFunctions.responseHandsUpMsg(receiver, action, function () {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.response_hands_up_msg_success,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    }, function (e) {\n\t      callback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.response_hands_up_msg_failed,\n\t        errorCode: ErrorCode.response_hands_up_msg_failed\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   *\r\n\t   * @param callback\r\n\t   */\n\t  onHandsUpResponse: function onHandsUpResponse(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.hands.up.response');\n\t    $(document).bind('manis.on.hands.up.response', function (event, from, action) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.on_hands_up_response,\n\t        response: action\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 会议房间倒计时.\r\n\t   * @param callback\r\n\t   */\n\t  onRoomCountdown: function onRoomCountdown(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.room.countdown');\n\t    $(document).bind('manis.on.room.countdown', function (event, timeLeft) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.room_countdown,\n\t        response: {\n\t          countdown: timeLeft\n\t        }\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 会议延时.\r\n\t   * @param delayTime\r\n\t   * @param callback\r\n\t   */\n\t  delayRoom: function delayRoom(delayTime, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (parseInt(delayTime) < 0) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.room_extend_time_require,\n\t        errorCode: ErrorCode.conference_delay_time_require\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isAdmin()) {\n\t      callback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.out_of_authority,\n\t        errorCode: ErrorCode.without_permission_for_the_operation\n\t      });\n\t      return;\n\t    }\n\t    ManisConference.roomDelay(delayTime, callback);\n\t  },\n\t\n\t  /**\r\n\t   * Recorder status changed\r\n\t   * @param callback\r\n\t   */\n\t  onRecordStatusChanged: function onRecordStatusChanged(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.recorder.status.change');\n\t    $(document).bind('manis.recorder.status.change', function (event, recordStatus, jid) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.manis_recorder_status_changed,\n\t        response: {\n\t          status: recordStatus,\n\t          resource: jid\n\t        }\n\t      });\n\t    });\n\t  },\n\t\n\t\n\t  /**\r\n\t   *\r\n\t   * @param callback\r\n\t   */\n\t  handleChangeModelNotice: function handleChangeModelNotice(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.switch.to.audio.model');\n\t    $(document).bind('manis.on.switch.to.audio.model', function (event, audioModel) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.on_room_model_change_to_audio_only\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 获取呼叫电话的正确号码\r\n\t   * @param phoneNumber\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\n\t  getRrightPhoneNumber: function getRrightPhoneNumber(phoneNumber, successCallback, errorCallback) {\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!phoneNumber) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.get_phone_number_except,\n\t        errorCode: ErrorCode.will_ring_phone_number_except\n\t      });\n\t      return;\n\t    }\n\t    ManisFunctions.getPhoneNumber(phoneNumber, successCallback, errorCallback);\n\t  },\n\t\n\t  /**\r\n\t   * 获取流媒体资源\r\n\t   * @param constraints\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\n\t  getUserMediaByConstraints: function getUserMediaByConstraints(constraints, successCallback, errorCallback) {\n\t    if (typeof successCallback != 'function' || typeof errorCallback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!constraints) {\n\t      errorCallback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.order_change_resolution_resulotion_except,\n\t        errorCode: ErrorCode.get_user_media_constraints_except\n\t      });\n\t      return;\n\t    }\n\t    ManisStream.getMedia(constraints, function (stream) {\n\t      successCallback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.get_user_media_success,\n\t        response: stream,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    }, function (error) {\n\t      errorCallback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.get_user_media_failed,\n\t        errorCode: ErrorCode.media_device_get_local_media_failed,\n\t        error: error\n\t      });\n\t    });\n\t  },\n\t\n\t\n\t  //  --------------un comment into doc--------------\n\t  /**\r\n\t    * 接入本地音视频流\r\n\t    * @param localStream\r\n\t    * @param callback\r\n\t    */\n\t  addLocalStream: function addLocalStream(localStream, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!localStream) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.local_stream_except,\n\t        errorCode: ErrorCode.local_stream_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    // var session = window.activecall;\n\t    // if (!session) {\n\t    //   callback({\n\t    //     code: ManisResponse.code_400,\n\t    //     msg: ManisResponse.other_participant_except,\n\t    //     errorCode: ErrorCode.conference_room_wait_others\n\t    //   });\n\t    //   return;\n\t    // }\n\t    Status.addLocalStreamToConnection(localStream, callback);\n\t  },\n\t\n\t  /**\r\n\t   * 移出本端音视频流\r\n\t   * @param callback\r\n\t   */\n\t  removeLocalStream: function removeLocalStream(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    try {\n\t      Status.removeLocalStreamFromConnection(callback);\n\t    } catch (e) {\n\t      callback({\n\t        code: ManisResponse.code_400,\n\t        msg: ManisResponse.remove_local_stream_failed,\n\t        errorCode: ErrorCode.remove_local_stream_failed\n\t      });\n\t    };\n\t  },\n\t\n\t  /**\r\n\t   * 仅发送方式加入到房间(无线投屏)\r\n\t   * @param room 房间号\r\n\t   * @param password 房间密码\r\n\t   * @param nickname 参会昵称\r\n\t   * @param mediaStream 发送的流媒体(音视频)\r\n\t   * @param callback 回调函数\r\n\t   */\n\t  sendOnlyParticipant: function sendOnlyParticipant(room, password, nickname, mediaStream, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!room) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.room_number_except,\n\t        errorCode: ErrorCode.conference_room_except\n\t      });\n\t      return;\n\t    }\n\t    if (!mediaStream) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.media_stream_except,\n\t        errorCode: ErrorCode.send_only_stream_except\n\t      });\n\t      return;\n\t    }\n\t    var _this = this;\n\t    window.sendOnly = true;\n\t    var server = DEFAULT_PROTOCOL + this.manisParams.server + JOIN_BY_ANONYMOUS_URL;\n\t    ManisSignIn.signInMeetingCtlByAnonymous(server, nickname, function () {\n\t      _this.keepAlive();\n\t      if (window.webkitMediaStream) {\n\t        var audioStream = new webkitMediaStream();\n\t        var videoStream = new webkitMediaStream();\n\t        var audioTracks = mediaStream.getAudioTracks();\n\t        var videoTracks = mediaStream.getVideoTracks();\n\t        for (var i = 0; i < audioTracks.length; i++) {\n\t          audioStream.addTrack(audioTracks[i]);\n\t        }\n\t        for (i = 0; i < videoTracks.length; i++) {\n\t          videoStream.addTrack(videoTracks[i]);\n\t        }\n\t        connection.jingle.localAudio = audioStream;\n\t        connection.jingle.localVideo = videoStream;\n\t      } else {\n\t        connection.jingle.localAudio = mediaStream;\n\t        connection.jingle.localVideo = mediaStream;\n\t      }\n\t      ManisConference.joinConferenceWithMedia(room, password, mediaStream, callback);\n\t    }, function () {\n\t      _this.sendOnlyParticipant(room, password, nickname, mediaStream, callback);\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 重新设置带宽\r\n\t   * @param resolution\r\n\t   * @param callback\r\n\t   */\n\t  setVideoBandwidth: function setVideoBandwidth(resolution, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!resolution || AcceptResolutions.indexOf(resolution.toString()) < 0) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.resolution_params_error,\n\t        error: resolution,\n\t        errorCode: ErrorCode.change_resolution_not_match\n\t      });\n\t      return;\n\t    }\n\t    var videoBandwidth = ManisFunctions.getVideoBandwidthByResolution(resolution);\n\t    ManisFunctions.setVideoBandwidth(videoBandwidth, function () {\n\t      console.log('Change bandwidth on the fly complete 1');\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.change_video_resolution_complete,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 更新本地流SSRC,以备上主屏使用\r\n\t   * @param callback\r\n\t   */\n\t  updateLocalStreamSSRC: function updateLocalStreamSSRC(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.local.stream.ssrc.update');\n\t    $(document).bind('manis.local.stream.ssrc.update', function (event, objectSSRC, objectType) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.local_stream_ssrc_updated,\n\t        response: {\n\t          type: objectType,\n\t          ssrc: objectSSRC,\n\t          resource: Strophe.getResourceFromJid(connection.jid)\n\t        }\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 修改显示模式\r\n\t   * @param mode\r\n\t   * @param callback\r\n\t   * @param mainJid\r\n\t   */\n\t  changeDisplayMode: function changeDisplayMode(mode, callback, mainJid) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (mode === undefined || mode === null || mode === '') {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.display_mode_execpet,\n\t        errorCode: ErrorCode.display_model_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isAdmin()) {\n\t      callback({\n\t        code: ManisResponse.code_403,\n\t        msg: ManisResponse.out_of_authority,\n\t        errorCode: ErrorCode.without_permission_for_the_operation\n\t      });\n\t      return;\n\t    }\n\t    // ManisFunctions.sendChangeDisplayModeMsg(mode, callback, mainJid);\n\t    ManisFunctions.updateDisplayMode(mode, callback);\n\t  },\n\t\n\t  /**\r\n\t   * 注册接收显示模式改变方法\r\n\t   * @param callback\r\n\t   */\n\t  onDisplayModeChange: function onDisplayModeChange(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.display.mode.changed');\n\t    $(document).bind('manis.display.mode.changed', function (event, mode) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        msg: ManisResponse.display_mode_change_complete,\n\t        response: mode,\n\t        errorCode: ErrorCode.no_error\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 切换主屏显示\r\n\t   * @param objectiveSource\r\n\t   * @param callback\r\n\t   * @param ObjectSSRC\r\n\t   * @param isScreen\r\n\t   */\n\t  changeMainDisplayBlock: function changeMainDisplayBlock(objectiveSource, isScreen, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!objectiveSource) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.dispaly_block_source_except,\n\t        errorCode: ErrorCode.main_display_source_except\n\t      });\n\t      return;\n\t    }\n\t    // ManisFunctions.sendChangeMainBlockSourceMsg(objectiveSource, ObjectSSRC, callback, isScreen);\n\t    ManisFunctions.updateMainBlockSource(objectiveSource, isScreen, callback); // 新版主屏不再广播消息,只请求后台,由后台选择视频流下发和排序\n\t  },\n\t\n\t  /**\r\n\t   * 注册主屏更改通知\r\n\t   * @param callback\r\n\t   */\n\t  onMainDisplayChange: function onMainDisplayChange(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.main.display.changed');\n\t    $(document).bind('manis.main.display.changed', function (event, objectiveSource, streamSSRC) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.main_display_block_changed,\n\t        response: {\n\t          resource: objectiveSource,\n\t          ssrc: streamSSRC\n\t        }\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 选人排序\r\n\t   * @param participants\r\n\t   * @param callback\r\n\t   */\n\t  selectParticipantsDisplay: function selectParticipantsDisplay(participants, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!participants) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.participants_sort_except,\n\t        errorCode: ErrorCode.participants_sort_except\n\t      });\n\t      return;\n\t    }\n\t    ManisFunctions.requestDisplayParticipants(participants, callback);\n\t  },\n\t\n\t  /**\r\n\t   *  监听显示排序\r\n\t   * @param callback\r\n\t   */\n\t  onParticipantsSortChange: function onParticipantsSortChange(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.participants.sort.change');\n\t    $(document).bind('manis.on.participants.sort.change', function (event, sortObject, displayMode) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.on_participants_sort_change,\n\t        response: {\n\t          sort: sortObject,\n\t          mode: displayMode\n\t        }\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * 系统升级\r\n\t   * @param callback\r\n\t   */\n\t  onSystemUpgrade: function onSystemUpgrade(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.system.upgrade');\n\t    $(document).bind('manis.on.system.upgrade', function (event, section) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: ManisResponse.system_upgrade_notice,\n\t        response: section\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   * send annotation\r\n\t   * @param action\r\n\t   * @param data\r\n\t   * @param receiver\r\n\t   * @param callback\r\n\t   */\n\t  sendAnnotation: function sendAnnotation(action, data, receiver, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!action) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.annotation_action_except,\n\t        errorCode: ErrorCode.annotation_action_except\n\t      });\n\t      return;\n\t    }\n\t    if (window.connection == undefined) {\n\t      callback({\n\t        code: ManisResponse.code_401,\n\t        msg: ManisResponse.connection_except,\n\t        errorCode: ErrorCode.mss_connection_except\n\t      });\n\t      return;\n\t    }\n\t    if (!ManisFunctions.isInRoom()) {\n\t      callback({\n\t        code: ManisResponse.code_407,\n\t        msg: ManisResponse.you_are_not_in_room,\n\t        errorCode: ErrorCode.conference_room_not_participate\n\t      });\n\t      return;\n\t    }\n\t    ManisSignIn.sendAnnotationMsg(action, data, receiver, callback);\n\t  },\n\t\n\t  /**\r\n\t   *  handle annotation msg\r\n\t    * @param callback\r\n\t   */\n\t  onAnnotation: function onAnnotation(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.annotation');\n\t    $(document).bind('manis.on.annotation', function (event, data) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: 'Handle annotation msg',\n\t        response: data\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   *  handle someone attend get delay drawing tracks\r\n\t   * @param callback\r\n\t   */\n\t  onAnnotationGetInit: function onAnnotationGetInit(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.annotation.get.init');\n\t    $(document).bind('manis.on.annotation.get.init', function (event, res) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: 'Handle annotation get init msg',\n\t        response: res\n\t      });\n\t    });\n\t  },\n\t\n\t  /**\r\n\t   *  response annotation\r\n\t    * @param receiver\r\n\t   * @param callback\r\n\t   * @param urlAction\r\n\t   */\n\t  responseAnnotation: function responseAnnotation(receiver, callback, urlAction) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    if (!receiver) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: 'Receiver except',\n\t        errorCode: ErrorCode.username_except\n\t      });\n\t      return;\n\t    }\n\t    if (!urlAction) {\n\t      urlAction = 'getInit';\n\t    }\n\t    ManisSignIn.sendGetInitAnnotationMsg(receiver, { type: urlAction }, callback);\n\t  },\n\t\n\t  /**\r\n\t   * set room audio mute status\r\n\t    * @param mute\r\n\t   * @param callback\r\n\t   */\n\t  setRoomAudioMute: function setRoomAudioMute(mute, callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    ManisFunctions.setRoomAudioMuteStatus(mute, callback);\n\t  },\n\t\n\t  /**\r\n\t   * handle muc entered or left\r\n\t   * @param callback\r\n\t   */\n\t  onMucParticipantsChange: function onMucParticipantsChange(callback) {\n\t    if (typeof callback != 'function') {\n\t      console.error({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.callback_function_except,\n\t        errorCode: ErrorCode.callback_except\n\t      });\n\t      return;\n\t    }\n\t    $(document).unbind('manis.on.muc.change');\n\t    $(document).bind('manis.on.muc.change', function (event, _action, _data) {\n\t      callback({\n\t        code: ManisResponse.code_200,\n\t        errorCode: ErrorCode.no_error,\n\t        msg: 'Handle muc change',\n\t        response: { action: _action, data: _data }\n\t      });\n\t    });\n\t  },\n\t\n\t  encryptString: function encryptString(str) {\n\t    if (!str) {\n\t      callback({\n\t        code: ManisResponse.code_421,\n\t        msg: ManisResponse.encrypt_string_except,\n\t        errorCode: ErrorCode.annotation_action_except\n\t      });\n\t      return;\n\t    }\n\t    return ManisFunctions.encryptStr(str);\n\t  }\n\t};\n\t\n\tmodule.exports = Manis;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar strophe = __webpack_require__(3);\r\n\t// var disco = require('./strophe/plugins/strophe.disco');\r\n\tvar muc = __webpack_require__(4);\r\n\tvar jingle = __webpack_require__(34);\r\n\t// var roster = require('./strophe/plugins/strophe.roster');\r\n\tvar ofmuc = __webpack_require__(54);\r\n\tvar ManisFunctions = __webpack_require__(27);\r\n\tvar Status = __webpack_require__(6);\r\n\tvar ManisResponse = __webpack_require__(26);\r\n\tvar ErrorCode = __webpack_require__(28);\r\n\tvar P2P = __webpack_require__(32);\r\n\t\r\n\t\r\n\tvar Openfire = __webpack_require__(33);\r\n\t\r\n\t\r\n\tvar sessionTerminated = false;\r\n\t\r\n\tvar getFriendsPath = '/clientApi/friends/';\r\n\t\r\n\t/**\r\n\t * 跨域登录会控系统成功回调(optional)\r\n\t *\r\n\t * @param response\r\n\t */\r\n\tfunction signInMeetingCtlCallback(response) {\r\n\t    console.log('get sign in meeting result : ', response);\r\n\t};\r\n\t\r\n\t/**\r\n\t * 登录到XMPP服务器\r\n\t *\r\n\t * @param _successCallback\r\n\t * @param _errorCallback\r\n\t * @param _nickname\r\n\t */\r\n\tfunction signInXMPP(_successCallback, _errorCallback, _nickname) {\r\n\t    var openfireHost = 'https://' + window.manisConfg.messageServer + '/http-bind/';\r\n\t    var connection = new Openfire.Connection(openfireHost, window.manisConfg.endpoint);\r\n\t    if (!manisConfg.messageServer) {\r\n\t        _errorCallback({\r\n\t            code: ManisResponse.code_421,\r\n\t            msg: ManisResponse.sign_failed,\r\n\t            errorCode: ErrorCode.message_server_except\r\n\t        });\r\n\t        return false;\r\n\t    }\r\n\t    if (!manisConfg.mUserId) {\r\n\t        _errorCallback({\r\n\t            code: ManisResponse.code_421,\r\n\t            msg: ManisResponse.sign_failed,\r\n\t            errorCode: ErrorCode.message_server_user_except\r\n\t        });\r\n\t        return false;\r\n\t    }\r\n\t    var xmppUser = manisConfg.mUserId.toLowerCase() + '@' + manisConfg.messageServer;\r\n\t    var xmppPassword = manisConfg.token || \"\";\r\n\t    connection.connect(\r\n\t        xmppUser,\r\n\t        xmppPassword,\r\n\t        function (status) {\r\n\t            // console.info('get sign XMPP server result with status :', status);\r\n\t            if (status == Strophe.Status.CONNECTED) {\r\n\t                window.connection = connection;\r\n\t                if (_nickname) {\r\n\t                    config.nickname = _nickname;\r\n\t                    connection.emuc.addDisplayNameToPresence(_nickname);\r\n\t                }\r\n\t                connection.emuc.addUserIdToPresence(generateUniqueIdForUser());\r\n\t                connection.emuc.addConfigRoleToPresence(config.role);\r\n\t                connection.addHandler(_onmessage, null, 'message', null, null, null);\r\n\t                connection.addHandler(_onMute, 'http://jitsi.org/jitmeet/audio', 'iq', 'set', null, null);\r\n\t                connection.addHandler(_onVideoBeSet, 'http://jitsi.org/jitmeet/video', 'iq', 'set', null, null);\r\n\t                // add feature list\r\n\t                initFeaturesList();\r\n\t                var pres = $pres();\r\n\t                // console.info('send pres : ', pres.tree());\r\n\t                // connection.send(pres);\r\n\t                window.self = {\r\n\t                    nickname: config.nickname ? config.nickname : manisConfg.mUserName,\r\n\t                    jid: connection.jid,\r\n\t                    resource: Strophe.getResourceFromJid(connection.jid),\r\n\t                };\r\n\t                _successCallback({\r\n\t                    code: ManisResponse.code_200,\r\n\t                    msg: ManisResponse.connect_server_success,\r\n\t                    response: {call_id: connection.jid},\r\n\t                    errorCode: ErrorCode.no_error\r\n\t                });\r\n\t            }\r\n\t        },\r\n\t        function (error) {\r\n\t            _errorCallback({\r\n\t                code: ManisResponse.code_500,\r\n\t                msg: ManisResponse.sign_failed,\r\n\t                errorCode: ErrorCode.message_server_connect_failed\r\n\t            });\r\n\t        }\r\n\t    );\r\n\t}\r\n\t\r\n\t\r\n\tfunction sendPrivateMessage(message, participant, nickname, successCallback, msgType, xms, childNodeType) {\r\n\t    if (msgType == undefined) {\r\n\t        msgType = 'chat';\r\n\t    }\r\n\t    if (xms == undefined) {\r\n\t        xms = 'http://jabber.org/protocol/nick';\r\n\t    }\r\n\t    if (childNodeType == undefined) {\r\n\t        childNodeType = 'nick';\r\n\t    }\r\n\t    var msg = $msg({to: participant.jid, type: msgType});\r\n\t    msg.c('body', message).up();\r\n\t    if (nickname) {\r\n\t        msg.c(childNodeType, {xmlns: xms}).t(nickname).up();\r\n\t    }\r\n\t    // msg.up();\r\n\t    console.warn('private msg ', msg.tree());\r\n\t    window.connection.send(msg);\r\n\t    successCallback({\r\n\t        code: ManisResponse.code_200,\r\n\t        msg: ManisResponse.message_send_complete\r\n\t    });\r\n\t};\r\n\t\r\n\tfunction sendGetInitAnnotationMsg(receiver, urlData, callback) {\r\n\t    this.sendAnnotationMsg(\"message\", JSON.stringify(urlData), receiver, callback)\r\n\t}\r\n\t\r\n\tfunction sendAnnotationMsg(msgAction, msgData, msgReceiver, callback) {\r\n\t    var msg = $msg({to: msgReceiver, type: \"groupchat\"});\r\n\t    var xms = \"http://igniterealtime.org/protocol/annotate\";\r\n\t    msg.c(\"annotate\", {xmlns: xms, action: msgAction, url: msgData}).up();\r\n\t    window.connection.send(msg);\r\n\t    callback({\r\n\t        code: ManisResponse.code_200,\r\n\t        msg: ManisResponse.message_send_complete,\r\n\t        errorCode: ErrorCode.no_error\r\n\t    });\r\n\t}\r\n\t\r\n\t\r\n\tfunction ringUp(participant, roomNumber, successCallback, errorCallback, type, password) {\r\n\t    try {\r\n\t        var timestamp = (new Date()).valueOf();\r\n\t        var receiver = (participant.indexOf('@') > -1) ? participant : (participant + '@' + manisConfg.messageServer);\r\n\t        var msg = $msg({to: receiver, type: 'chat', from: window.connection.jid});\r\n\t        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n\t        msg.c('call', {\r\n\t            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n\t            type: 'invite',\r\n\t            roomID: roomNumber,\r\n\t            resource: roomNumber + '@conference.' + manisConfg.messageServer,\r\n\t            nickname: self.nickname,\r\n\t            callType: type,\r\n\t            meetPassword: password,\r\n\t            createTime: timestamp\r\n\t        }).up();\r\n\t        console.info('1111111111111111111 send ring up', msg.tree());\r\n\t        window.connection.send(msg);\r\n\t        successCallback({\r\n\t            code: ManisResponse.code_200,\r\n\t            msg: ManisResponse.send_inviste_success,\r\n\t            errorCode: ErrorCode.no_error\r\n\t        });\r\n\t    } catch (e) {\r\n\t        errorCallback({\r\n\t            code: ManisResponse.code_400,\r\n\t            msg: ManisResponse.send_inviste_failed,\r\n\t            errorCode: ErrorCode.invoke_send_failed\r\n\t        });\r\n\t    }\r\n\t};\r\n\t\r\n\tfunction sendInviteAccept(jid, roomNumber, nickname) {\r\n\t    try {\r\n\t        var msg = $msg({to: jid, type: 'chat', from: window.connection.jid});\r\n\t        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n\t        msg.c('call', {\r\n\t            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n\t            type: 'accept',\r\n\t            roomID: roomNumber,\r\n\t            resource: roomNumber + '@conference.' + manisConfg.messageServer,\r\n\t            nickname: nickname\r\n\t        }).up();\r\n\t        console.info('33333333333333333333333 accept ring up ', msg.tree());\r\n\t        window.connection.send(msg);\r\n\t        return true;\r\n\t    } catch (e) {\r\n\t        return false;\r\n\t    }\r\n\t};\r\n\t\r\n\tfunction sendInviteReject(jid, roomNumber, nickname) {\r\n\t    try {\r\n\t        var msg = $msg({to: jid, type: 'chat', from: window.connection.jid});\r\n\t        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n\t        msg.c('call', {\r\n\t            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n\t            type: 'reject',\r\n\t            roomID: roomNumber,\r\n\t            resource: roomNumber + '@conference.' + manisConfg.messageServer,\r\n\t            nickname: nickname,\r\n\t            isCaller: '0',\r\n\t        }).up();\r\n\t        console.info('4444444444444444444444 reject ring up ', msg.tree());\r\n\t        window.connection.send(msg);\r\n\t        return true;\r\n\t    } catch (e) {\r\n\t        return false;\r\n\t    }\r\n\t};\r\n\t\r\n\tfunction sendInviteBusy(jid, roomNumber, nickname) {\r\n\t    try {\r\n\t        var msg = $msg({to: jid, type: 'chat', from: window.connection.jid});\r\n\t        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n\t        msg.c('call', {\r\n\t            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n\t            type: 'busy',\r\n\t            roomID: roomNumber,\r\n\t            resource: roomNumber + '@conference.' + manisConfg.messageServer,\r\n\t            nickname: nickname\r\n\t        }).up();\r\n\t        console.info('77777777777777777 replay ring up busy ', msg.tree());\r\n\t        window.connection.send(msg);\r\n\t        return true;\r\n\t    } catch (e) {\r\n\t        return false;\r\n\t    }\r\n\t};\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param receiver\r\n\t * @param roomNumber\r\n\t * @param roomPassword\r\n\t * @param nickname\r\n\t * @returns {boolean}\r\n\t */\r\n\tfunction sendJoinAfterRingCallAccept(receiver, roomNumber, roomPassword, nickname) {\r\n\t    try {\r\n\t        var msg = $msg({to: receiver, type: 'chat', from: window.connection.jid});\r\n\t        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n\t        msg.c('call', {\r\n\t            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n\t            type: 'join',\r\n\t            roomID: roomNumber,\r\n\t            resource: roomNumber + '@conference.' + manisConfg.messageServer,\r\n\t            nickname: nickname,\r\n\t            meetPassword: roomPassword,\r\n\t        }).up();\r\n\t        console.info('8888888888888888888 send join after create room ', msg.tree());\r\n\t        window.connection.send(msg);\r\n\t        return true;\r\n\t    } catch (e) {\r\n\t        return false;\r\n\t    }\r\n\t};\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param receiver\r\n\t * @returns {boolean}\r\n\t */\r\n\tfunction sendRingCallProcessedMsg(receiver) {\r\n\t    try {\r\n\t        var msg = $msg({to: receiver, type: 'chat', from: window.connection.jid});\r\n\t        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n\t        msg.c('call', {\r\n\t            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n\t            type: 'processed',\r\n\t        }).up();\r\n\t        console.info('yyyyyyyyyyyyyyyyyyyyyyyy send ring call has been processed ', msg.tree());\r\n\t        window.connection.send(msg);\r\n\t        return true;\r\n\t    } catch (e) {\r\n\t        return false;\r\n\t    }\r\n\t};\r\n\t\r\n\t/**\r\n\t * 发送呼叫视频终端的消息\r\n\t * @param gateway\r\n\t * @param sip\r\n\t * @param successCallback\r\n\t * @param errorCallback\r\n\t * @param sipRecordRule\r\n\t * @param recorderUserId\r\n\t * @param roomPassword\r\n\t */\r\n\tfunction callSip(gateway, sip, successCallback, errorCallback, sipRecordRule, recorderUserId, roomPassword) {\r\n\t    // try {\r\n\t    var iq = $iq({to: gateway, from: window.connection.jid, type: 'set'});\r\n\t    var dial = iq.c('dial', {xmlns: 'urn:xmpp:rayo:1', to: sip, from: connection.emuc.roomjid});\r\n\t    dial.c('header', {\r\n\t        name: 'JvbRoomName',\r\n\t        value: window.connection.emuc.roomjid\r\n\t    }).up().c('header', {\r\n\t        name: 'JvbRoomPassword',\r\n\t        value: roomPassword\r\n\t    }).up().c('header', {\r\n\t        name: 'JvbRoomInfo',\r\n\t        value: window.config.title\r\n\t    }).up();\r\n\t    if (sipRecordRule) {\r\n\t        dial.c('header', {\r\n\t            name: 'JvbRoomRecorder',\r\n\t            value: sipRecordRule\r\n\t        }).up();\r\n\t        dial.c('header', {\r\n\t            name: 'JvbUserNum',\r\n\t            value: recorderUserId\r\n\t        }).up();\r\n\t    }\r\n\t    dial = dial.up();\r\n\t    console.log('send call sip iq : ', iq.tree());\r\n\t    window.connection.sendIQ(iq, function (success) {\r\n\t        var ref = $(success).find('ref[xmlns=\"urn:xmpp:rayo:1\"]').attr('uri');\r\n\t        if (ref == 200) {\r\n\t            successCallback({\r\n\t                code: ManisResponse.code_200,\r\n\t                msg: ManisResponse.call_sip_success,\r\n\t                errorCode: ErrorCode.no_error\r\n\t            });\r\n\t        } else if (ref == 201) {\r\n\t            var recorder = $(success).find('header[name=\"recordResult\"]') || null;\r\n\t            if (recorder) {\r\n\t                var recorderValue = recorder.attr('value') || null;\r\n\t                if (recorderValue) {\r\n\t                    successCallback({\r\n\t                        code: ManisResponse.code_200,\r\n\t                        msg: ManisResponse.call_sip_success,\r\n\t                        errorCode: ErrorCode.no_error\r\n\t                    })\r\n\t                }\r\n\t            }\r\n\t        } else if (ref == 400) {\r\n\t            errorCallback({\r\n\t                code: ManisResponse.code_422,\r\n\t                msg: ManisResponse.call_sip_aready_in,\r\n\t                errorCode: ErrorCode.sip_call_in_progress\r\n\t            });\r\n\t        } else if (ref == 401) {\r\n\t            errorCallback({\r\n\t                code: ManisResponse.code_400,\r\n\t                msg: ManisResponse.call_sip_failed,\r\n\t                errorCode: ErrorCode.sip_call_failed_error_password\r\n\t            });\r\n\t        } else if (ref == 413) {\r\n\t            errorCallback({\r\n\t                code: ManisResponse.code_400,\r\n\t                msg: ManisResponse.call_sip_failed,\r\n\t                errorCode: ErrorCode.sip_call_signalling_error\r\n\t            });\r\n\t        } else if (ref == 488) {\r\n\t            errorCallback({\r\n\t                code: ManisResponse.code_400,\r\n\t                msg: ManisResponse.call_sip_failed,\r\n\t                errorCode: ErrorCode.sip_call_hang_up\r\n\t            });\r\n\t        } else {\r\n\t            errorCallback({\r\n\t                code: ManisResponse.code_400,\r\n\t                msg: ManisResponse.call_sip_failed,\r\n\t                errorCode: ErrorCode.sip_call_unknown_error\r\n\t            });\r\n\t        }\r\n\t    }, function (error) {\r\n\t        errorCallback({\r\n\t            code: ManisResponse.code_400,\r\n\t            msg: ManisResponse.call_sip_failed,\r\n\t            errorCode: ErrorCode.sip_call_send_failed\r\n\t        });\r\n\t    });\r\n\t    // } catch (e) {\r\n\t    //   errorCallback({\r\n\t    //     code: ManisResponse.code_400,\r\n\t    //     msg: ManisResponse.call_sip_failed\r\n\t    //   });\r\n\t    // }\r\n\t};\r\n\t\r\n\t\r\n\tfunction cancelCallSip(gateway, sip, successCallback, errorCallback) {\r\n\t    var iq = $iq({to: gateway, from: window.connection.jid, type: 'set'});\r\n\t    var hungUp = iq.c('hangup', {xmlns: 'urn:xmpp:rayo:1'});\r\n\t    hungUp.c('header', {\r\n\t        name: 'JvbRoomName',\r\n\t        value: window.connection.emuc.roomjid\r\n\t    }).up().c('header', {\r\n\t        name: 'JvbHandUpName',\r\n\t        value: sip\r\n\t    }).up();\r\n\t    // hungUp.up();\r\n\t    console.log('send cancel sip call iq : ', iq.tree());\r\n\t    window.connection.sendIQ(iq, function (res) {\r\n\t        console.log('cancel sip call success: ', res);\r\n\t        successCallback({\r\n\t            code: ManisResponse.code_200,\r\n\t            msg: ManisResponse.cancel_call_sip_success,\r\n\t            errorCode: ErrorCode.no_error\r\n\t        })\r\n\t    }, function (err) {\r\n\t        console.error('cancel sip  call failed: ', err);\r\n\t        errorCallback({\r\n\t            code: ManisResponse.code_400,\r\n\t            msg: ManisResponse.cancel_call_sip_failed,\r\n\t            errorCode: ErrorCode.sip_call_send_failed\r\n\t        })\r\n\t    });\r\n\t}\r\n\t\r\n\tfunction _onmessage(msg) {\r\n\t    // console.log('------------------------------------'+msg.outerHTML);\r\n\t    var from = msg.getAttribute('from');\r\n\t    var call = $(msg).find('>call[xmlns=\"http://igniterealtime.org/protocol/ringing\"]');\r\n\t\r\n\t    var screen = $(msg).find('>screen[xmlns=\"http://jitsi.org/protocol/screen\"]');\r\n\t    if (screen.length) {\r\n\t        var screenStatus = $(msg).find('property').attr('value');\r\n\t        console.log('sssssssssssssssssssssss1111111111111', screenStatus);\r\n\t        // $(document).trigger('manis.been.stop.screen.share');\r\n\t        return true;\r\n\t    }\r\n\t\r\n\t    var handsUp = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/handsUp\"]');\r\n\t    if (handsUp.length) {\r\n\t        console.log(' handle hands up msg : ', msg, handsUp);\r\n\t        var handsUpType = handsUp[0].getAttribute('type') || '';\r\n\t        var handsUpNickname = handsUp[0].getAttribute('nickname') || '';\r\n\t        var handsUpFrom = handsUp.text() || '';\r\n\t        if (handsUpType == 'apply') {\r\n\t            $(document).trigger('manis.on.hands.up.msg', [handsUpFrom, handsUpNickname, handsUpType]);\r\n\t        } else if (handsUpType == 'agree' || handsUpType == 'refuse') {\r\n\t            $(document).trigger('manis.on.hands.up.response', [handsUpFrom, handsUpType]);\r\n\t        } else {\r\n\t            console.error('unknown hands up msg', handsUpFrom, handsUpType, handsUpNickname);\r\n\t        }\r\n\t        return true;\r\n\t    }\r\n\t\r\n\t    var changeNickname = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/changeNickname\"]');\r\n\t    if (changeNickname.length) {\r\n\t        var newNickname = changeNickname.text();\r\n\t        console.log('moderator order me change my nickname to : ', newNickname);\r\n\t        connection.emuc.addDisplayNameToPresence(newNickname);\r\n\t        connection.emuc.sendPresence();\r\n\t        return true;\r\n\t    }\r\n\t\r\n\t    if (call != undefined && call.length > 0) {\r\n\t        var type = call[0].getAttribute('type');\r\n\t        if (type == 'invite') {\r\n\t            var room = call[0].getAttribute('roomID');\r\n\t            var nick = call[0].getAttribute('nickname');\r\n\t            var password = call[0].getAttribute('meetPassword');\r\n\t            var delay = $(msg).find('>delay[xmlns=\"urn:xmpp:delay\"]');\r\n\t            var callType = call[0].getAttribute('callType') || '0';\r\n\t            console.info('22222222222222222222222 on ring up', msg);\r\n\t            if (delay.length) {\r\n\t                return;\r\n\t            } else {\r\n\t                $(document).trigger('oninvite.muc', [from, nick, room, password, callType]);\r\n\t            }\r\n\t        } else if (type == 'accept') {\r\n\t            var room = call[0].getAttribute('roomID');\r\n\t            var nick = call[0].getAttribute('nickname');\r\n\t            console.info('5555555555555555555555 on ring up accept ', msg);\r\n\t            $(document).trigger('manis.onringup.reply', [from, nick, room, 'accept']);\r\n\t        } else if (type == 'reject') {\r\n\t            var room = call[0].getAttribute('roomID');\r\n\t            var nick = call[0].getAttribute('nickname');\r\n\t            console.info('666666666666666666666 on ring up reject ', msg);\r\n\t            var isCaller = call[0].getAttribute('isCaller') || '0';\r\n\t            if (isCaller == '1') {\r\n\t                // call cancel by caller\r\n\t                window.incomingCall = false;\r\n\t                $(document).trigger('manis.onringup.reply', [from, nick, room, 'cancel']);\r\n\t            } else {\r\n\t                // call reject by receiver\r\n\t                $(document).trigger('manis.onringup.reply', [from, nick, room, 'reject']);\r\n\t            }\r\n\t        } else if (type == 'busy') {\r\n\t            var room = call[0].getAttribute('roomID');\r\n\t            var nick = call[0].getAttribute('nickname');\r\n\t            console.info('999999999999999999999 on ring up busy ', msg);\r\n\t            $(document).trigger('manis.onringup.reply', [from, nick, room, 'busy']);\r\n\t        } else if (type == 'join') {\r\n\t            var room = call[0].getAttribute('roomID');\r\n\t            var password = call[0].getAttribute('meetPassword');\r\n\t            console.log('zzzzzzzzzzzzzzzzzzzz on room complete ', msg);\r\n\t            $(document).trigger('oninvite.room.complete.after.accept.request', [room, password]);\r\n\t        } else if (type == 'processed') {\r\n\t            console.log('xxxxxxxxxxxxxxxxxxxxxx on ring call was processed ', msg);\r\n\t            $(document).trigger('oninvite.room.processed');\r\n\t        }\r\n\t    }\r\n\t    var msgType = msg.getAttribute('type');\r\n\t    if (msgType && msgType.length && msgType == 'chat') {\r\n\t        var txt = $(msg).find('>body').text();\r\n\t        var resolutionMsg = $(msg).find('>resolution[xmlns=\"http://jabber.org/protocol/resolution\"]');\r\n\t        if (resolutionMsg.length) {\r\n\t            var resolutionOperate = resolutionMsg.text();\r\n\t            var targetResolution = txt;\r\n\t            // console.log(from, 'order me ', resolutionOperate, 'to ', targetResolution);\r\n\t            if (resolutionOperate == 'orderChangeResolution') {\r\n\t                $(document).trigger('manis.on.change.resolution.request', [from, targetResolution]);\r\n\t                return true;\r\n\t            }\r\n\t            return true;\r\n\t        }\r\n\t        var nick = $(msg).find('>nick[xmlns=\"http://jabber.org/protocol/nick\"]').text();\r\n\t        var privateMsg = true;\r\n\t        if (txt && nick) {\r\n\t            $(document).trigger('onmessage.muc', [from, nick, txt, privateMsg, 'yourself']);\r\n\t        }\r\n\t    }\r\n\t    var grantAdmin = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/grantAdmin\"]');\r\n\t    if (grantAdmin.length) {\r\n\t        onGrantAdmin(msg);\r\n\t    }\r\n\t    var ejectUser = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/eject\"]');\r\n\t    if (ejectUser.length) {\r\n\t        onEject(msg);\r\n\t    }\r\n\t    return true;\r\n\t}\r\n\t\r\n\tfunction _onMute(iq) {\r\n\t    // console.log('=============== on audio set iq', iq);\r\n\t    var from = iq.getAttribute('from');\r\n\t    // if (from !== window.focusJid) {\r\n\t    //   // console.warn(\"Ignored mute from non focus peer\");\r\n\t    //   return false;\r\n\t    // }\r\n\t    var mute = $(iq).find('mute');\r\n\t    if (mute.length) {\r\n\t        var doMuteAudio = mute.text() === \"true\";\r\n\t        ManisFunctions.setAudioMute(doMuteAudio);\r\n\t        window.forceMuted = doMuteAudio;\r\n\t        $(document).trigger('onmute.audio.muc', doMuteAudio);\r\n\t    }\r\n\t    return true;\r\n\t}\r\n\t\r\n\t\r\n\tfunction _onVideoBeSet(iq) {\r\n\t    // console.log('=============== on video set iq', iq);\r\n\t    var from = iq.getAttribute('from');\r\n\t    // if (from !== window.focusJid) {\r\n\t    //   // console.warn(\"Ignored mute from non focus peer\");\r\n\t    //   return false;\r\n\t    // }\r\n\t    var to = iq.getAttribute('to');\r\n\t    var mute = $(iq).find('mute');\r\n\t    if (mute.length) {\r\n\t        var doMuteVideo = mute.text() === \"true\";\r\n\t\r\n\t        ManisFunctions.setVideoMute(doMuteVideo);\r\n\t        window.forceSetVideo = doMuteVideo;\r\n\t        $(document).trigger('onmute.video.muc', doMuteVideo);\r\n\t    }\r\n\t    return true;\r\n\t}\r\n\t\r\n\t\r\n\tfunction onEject(msg) {\r\n\t    var to = msg.getAttribute('to');\r\n\t    var from = msg.getAttribute('from')\r\n\t    var local = Strophe.getResourceFromJid(connection.jid);\r\n\t    var obj = $(msg).find('body');\r\n\t    if (Strophe.getResourceFromJid(obj.attr('jid')) == local) {\r\n\t        if (obj.text() == \"true\") {\r\n\t            sessionTerminated = true;\r\n\t            // if share screen, stop it first\r\n\t            if (window.isUsingScreenStream == true) {\r\n\t                $(document).trigger('manis.been.stop.screen.share');\r\n\t            }\r\n\t            Status.disposeConference(false);\r\n\t            // console.log('11111111111133333333333=======handleEjectFrom============', from)\r\n\t            if(from.indexOf('admin') > -1) {\r\n\t                window.exitCode = 1007\r\n\t            }else {\r\n\t                window.exitCode = 1008\r\n\t            }\r\n\t            connection.emuc.doLeave();\r\n\t            $(document).trigger('oneject.muc', [from]);\r\n\t        }\r\n\t        return true;\r\n\t    }\r\n\t    return false;\r\n\t}\r\n\t\r\n\tfunction onGrantAdmin(msg) {\r\n\t    var to = msg.getAttribute('to');\r\n\t    var local = Strophe.getResourceFromJid(connection.emuc.connection.jid);\r\n\t    var obj = $(msg).find('body');\r\n\t    if (Strophe.getResourceFromJid(obj.attr('jid')) == local) {\r\n\t        if (obj.text() == \"true\") {\r\n\t            ManisFunctions.setAdmin(true);\r\n\t            connection.emuc.addConfigRoleToPresence(config.role);\r\n\t            connection.emuc.addIsModeratorToPresence(ManisFunctions.isAdmin());\r\n\t            connection.emuc.sendPresence();\r\n\t            // trigger on grant admin event\r\n\t            // update myself 'is_moderator' status\r\n\t            for (var i = 0; i < window.participants.length; i++) {\r\n\t                var pt = window.participants[i];\r\n\t                if (pt.jid == connection.jid) {\r\n\t                    pt.is_moderator = ManisFunctions.isAdmin();\r\n\t                    window.participants[i] = pt;\r\n\t                }\r\n\t            }\r\n\t            // @NOTICE trigger will trig on management msg\r\n\t            // $(document).trigger('manis.on.grant.admin');\r\n\t        }\r\n\t        return true;\r\n\t    }\r\n\t    return false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * 生成用户唯一标识\r\n\t * @returns {*}\r\n\t */\r\n\tfunction generateUniqueIdForUser() {\r\n\t    if (ManisFunctions.supportsLocalStorage()) {\r\n\t        if (!window.localStorage.getItem('manisMeetId')) {\r\n\t            var userUniqueId = ManisFunctions.generateUniqueId();\r\n\t            window.localStorage.setItem('manisMeetId', userUniqueId);\r\n\t            return userUniqueId;\r\n\t        }\r\n\t        return window.localStorage.getItem('manisMeetId');\r\n\t    } else {\r\n\t        return ManisFunctions.generateUniqueId();\r\n\t    }\r\n\t}\r\n\t\r\n\t/**\r\n\t * 告诉服务器应用程序支持音视频能力\r\n\t */\r\n\tfunction initFeaturesList() {\r\n\t    const disco = this.connection.disco;\r\n\t    if (!disco) {\r\n\t        return;\r\n\t    }\r\n\t    disco.addFeature('urn:xmpp:jingle:1');\r\n\t    disco.addFeature('urn:xmpp:jingle:apps:rtp:1');\r\n\t    disco.addFeature('urn:xmpp:jingle:transports:ice-udp:1');\r\n\t    disco.addFeature('urn:xmpp:jingle:apps:rtp:audio');\r\n\t    disco.addFeature('urn:xmpp:jingle:apps:rtp:video');\r\n\t\r\n\t    disco.addFeature('urn:ietf:rfc:5761');\r\n\t    disco.addFeature('urn:ietf:rfc:5888');\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * 登录系统\r\n\t *\r\n\t * @param _username\r\n\t * @param _password\r\n\t * @param nickname\r\n\t * @param _successCallback\r\n\t * @param _errorCallback\r\n\t * @param _server\r\n\t * @param _domain\r\n\t * @param _connectSocket\r\n\t */\r\n\tfunction signInMeetingCtl(_username, _password, nickname, _successCallback, _errorCallback, _server, _domain, _connectSocket) {\r\n\t    // try {\r\n\t    $.ajax({\r\n\t        url: _server,\r\n\t        dataType: 'json',\r\n\t        data: {\r\n\t            username: _username,\r\n\t            password: ManisFunctions.encryptStr(_password),\r\n\t            domain: _domain,\r\n\t            clientType: window.clientTypeCode,\r\n\t            remark: navigator.userAgent,\r\n\t            ticket: window.config.ticket,\r\n\t            verifyCode: window.config.verifyCode\r\n\t        },\r\n\t        type: 'GET',\r\n\t        timeout: 2000,\r\n\t        success: function (res) {\r\n\t            if (res.code == 200) {\r\n\t                console.info('sign in manis meeting system control center success: ', res);\r\n\t                window.manisConfg = res.obj;\r\n\t                if (!manisConfg.messageServer) {\r\n\t                    _errorCallback({\r\n\t                        code: ManisResponse.code_401,\r\n\t                        msg: ManisResponse.mesage_server_except,\r\n\t                        errorCode: ErrorCode.message_server_except\r\n\t                    });\r\n\t                    return false;\r\n\t                }\r\n\t                if (manisConfg.turn && manisConfg.turn.iceServers[0].url) {\r\n\t                    config.nat = manisConfg.turn.iceServers[0].url\r\n\t                }\r\n\t                if (manisConfg.messageServer) {\r\n\t                    config.focusUserJid = 'focus@' + manisConfg.messageServer;\r\n\t                }\r\n\t                if (window.connectType == 'p2p') {\r\n\t                    var username = manisConfg.mUserId.toLowerCase() + '@' + manisConfg.messageServer;\r\n\t                    var password = manisConfg.token;\r\n\t                    var nickname = nickname ? nickname : manisConfg.mUserName;\r\n\t                    P2P.connect(username, password, nickname, _successCallback, _errorCallback)\r\n\t                } else {\r\n\t                    var _config = Object.assign(window.config, window.manisConfg);\r\n\t                    window.config = _config;\r\n\t                    if (_connectSocket) {\r\n\t                        signInXMPP(_successCallback, _errorCallback, nickname ? nickname : manisConfg.mUserName);\r\n\t                    } else {\r\n\t                        _successCallback({\r\n\t                            code: ManisResponse.code_200,\r\n\t                            msg: ManisResponse.sign_success,\r\n\t                            response: window.config,\r\n\t                            errorCode: ErrorCode.no_error\r\n\t                        });\r\n\t                    }\r\n\t                }\r\n\t            } else if (res.mcode == 601) {\r\n\t                _errorCallback({\r\n\t                    code: ManisResponse.code_401,\r\n\t                    msg: ManisResponse.sign_username_password_error,\r\n\t                    errorCode: ErrorCode.user_client_auth_failed\r\n\t                });\r\n\t            } else if (res.mcode == 602 || res.mcode == 603) {\r\n\t                _errorCallback({\r\n\t                    code: res.mcode,\r\n\t                    msg: ManisResponse.sign_failed,\r\n\t                    errorCode: ErrorCode.user_has_been_block_up\r\n\t                });\r\n\t            } else if (res.mcode == 801) {\r\n\t                _errorCallback({\r\n\t                    code: res.mcode,\r\n\t                    msg: ManisResponse.sign_failed,\r\n\t                    errorCode: ErrorCode.user_out_of_service\r\n\t                });\r\n\t            }else {\r\n\t                _errorCallback({\r\n\t                    code: ManisResponse.code_500,\r\n\t                    msg: ManisResponse.sign_failed,\r\n\t                    errorCode: res.code\r\n\t                });\r\n\t            }\r\n\t        },\r\n\t        error: function (xOptions, textStatus) {\r\n\t            console.error('xOptions : ', xOptions, 'textStatus : ', textStatus, 'error status : ', xOptions.status);\r\n\t            _errorCallback({\r\n\t                code: ManisResponse.code_500,\r\n\t                msg: ManisResponse.sign_failed,\r\n\t                errorCode: ErrorCode.api_fetch_failed\r\n\t            });\r\n\t        }\r\n\t    });\r\n\t};\r\n\t\r\n\t\r\n\tfunction signInMeetingCtlByAnonymous(_server, _nickName, _successCallback, _errorCallback) {\r\n\t    var connection = window.connection || undefined;\r\n\t    if(connection && connection._ws.readyState == 1){\r\n\t        if (_nickName) {\r\n\t            config.nickname = _nickName;\r\n\t            connection.emuc.addDisplayNameToPresence(_nickName);\r\n\t        }\r\n\t        _successCallback({\r\n\t            code: ManisResponse.code_200,\r\n\t            msg: ManisResponse.connect_server_success,\r\n\t            response: {call_id: connection.jid},\r\n\t            errorCode: ErrorCode.no_error\r\n\t        });\r\n\t        return;\r\n\t    }\r\n\t    // try {\r\n\t    $.ajax({\r\n\t        url: _server,\r\n\t        dataType: 'json',\r\n\t        data: {\r\n\t            nickname: _nickName,\r\n\t            clientType: window.clientTypeCode,\r\n\t            remark: navigator.userAgent\r\n\t        },\r\n\t        // type: 'GET',\r\n\t        // async: true,\r\n\t        timeout: 2000,\r\n\t        success: function (response) {\r\n\t            // if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n\t            if (response.code == 200) {\r\n\t                // console.log('login client anonymous success.', response.obj);\r\n\t                window.manisConfg = response.obj;\r\n\t                if (manisConfg.turn && manisConfg.turn.iceServers[0].url) {\r\n\t                    config.nat = manisConfg.turn.iceServers[0].url\r\n\t                }\r\n\t                if (manisConfg.messageServer) {\r\n\t                    config.focusUserJid = 'focus@' + manisConfg.messageServer;\r\n\t                }\r\n\t                var _config = Object.assign(window.config, window.manisConfg);\r\n\t                window.config = _config;\r\n\t                signInXMPP(_successCallback, _errorCallback, _nickName);\r\n\t            } else {\r\n\t                // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t                _errorCallback({\r\n\t                    code: ManisResponse.code_403,\r\n\t                    msg: ManisResponse.out_of_source_limit,\r\n\t                    errorCode: ErrorCode.anonymous_login_failed\r\n\t                });\r\n\t            }\r\n\t            // } else {\r\n\t            //   // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t            //   _errorCallback({\r\n\t            //     code: ManisResponse.code_500,\r\n\t            //     msg: ManisResponse.join_room_failed\r\n\t            //   });\r\n\t            // }\r\n\t        },\r\n\t        error: function (xOptions, textStatus) {\r\n\t            // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t            _errorCallback({\r\n\t                code: ManisResponse.code_500,\r\n\t                msg: ManisResponse.join_room_failed,\r\n\t                errorCode: ErrorCode.api_fetch_failed\r\n\t            });\r\n\t        }\r\n\t    });\r\n\t    // } catch (e) {\r\n\t    //   // console.error('xhr request failure with error : ', e);\r\n\t    //   _errorCallback({\r\n\t    //     code: ManisResponse.code_500,\r\n\t    //     msg: ManisResponse.join_room_failed\r\n\t    //   });\r\n\t    // }\r\n\t};\r\n\t\r\n\t\r\n\tfunction getMyFriends(callback) {\r\n\t    var _header = ManisFunctions.authoredHeader();\r\n\t    $.ajax({\r\n\t        url: window.serverPath + getFriendsPath + manisConfg.mUserId,\r\n\t        headers: _header,\r\n\t        // dataType: 'jsonp',\r\n\t        dataType: 'json',\r\n\t        timeout: 2000,\r\n\t        success: function (result) {\r\n\t            // console.log('get my friends result : ', result);\r\n\t            callback({\r\n\t                code: ManisResponse.code_200,\r\n\t                msg: ManisResponse.get_my_friends_list,\r\n\t                response: result.obj,\r\n\t                errorCode: ErrorCode.no_error\r\n\t            })\r\n\t        },\r\n\t        error: function (xOptions, textStatus) {\r\n\t            callback({\r\n\t                code: textStatus,\r\n\t                msg: ManisResponse.network_error,\r\n\t                errorCode: ErrorCode.user_friends_fetch_failed\r\n\t            });\r\n\t        }\r\n\t    });\r\n\t}\r\n\t\r\n\t\r\n\tmodule.exports = {\r\n\t    signInMeetingCtlByAnonymous: signInMeetingCtlByAnonymous,\r\n\t    signInMeetingCtl: signInMeetingCtl,\r\n\t    callSip: callSip,\r\n\t    cancelCallSip: cancelCallSip,\r\n\t    sendInviteReject: sendInviteReject,\r\n\t    sendInviteAccept: sendInviteAccept,\r\n\t    sendInviteBusy: sendInviteBusy,\r\n\t    ringUp: ringUp,\r\n\t    sendJoinAfterRingCallAccept: sendJoinAfterRingCallAccept,\r\n\t    sendRingCallProcessedMsg: sendRingCallProcessedMsg,\r\n\t    sendPrivateMessage: sendPrivateMessage,\r\n\t    myFriends: getMyFriends,\r\n\t    sendGetInitAnnotationMsg: sendGetInitAnnotationMsg,\r\n\t    sendAnnotationMsg: sendAnnotationMsg,\r\n\t    signInXMPP: signInXMPP\r\n\t};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_LOCAL_MODULE_0__;var __WEBPACK_LOCAL_MODULE_1__;var __WEBPACK_LOCAL_MODULE_2__;var __WEBPACK_LOCAL_MODULE_3__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_4__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_5__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_6__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_7__;var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_LOCAL_MODULE_8__;/** File: strophe.js\n\t *  A JavaScript library for XMPP BOSH/XMPP over Websocket.\n\t *\n\t *  This is the JavaScript version of the Strophe library.  Since JavaScript\n\t *  had no facilities for persistent TCP connections, this library uses\n\t *  Bidirectional-streams Over Synchronous HTTP (BOSH) to emulate\n\t *  a persistent, stateful, two-way connection to an XMPP server.  More\n\t *  information on BOSH can be found in XEP 124.\n\t *\n\t *  This version of Strophe also works with WebSockets.\n\t *  For more information on XMPP-over WebSocket see this RFC:\n\t *  http://tools.ietf.org/html/rfc7395\n\t */\n\t\n\t/* All of the Strophe globals are defined in this special function below so\n\t * that references to the globals become closures.  This will ensure that\n\t * on page reload, these references will still be available to callbacks\n\t * that are still executing.\n\t */\n\t\n\t/* jshint ignore:start */\n\t(function (callback) {\n\t/* jshint ignore:end */\n\t\n\t// This code was written by Tyler Akins and has been placed in the\n\t// public domain.  It would be nice if you left this header intact.\n\t// Base64 code from Tyler Akins -- http://rumkin.com\n\t\n\t(function (root, factory) {\n\t    if (true) {\n\t        !(__WEBPACK_LOCAL_MODULE_0__ = function () {\n\t            return factory();\n\t        }.call(exports, __webpack_require__, exports, module));\n\t    } else {\n\t        // Browser globals\n\t        root.Base64 = factory();\n\t    }\n\t}(this, function () {\n\t    var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\t\n\t    var obj = {\n\t        /**\n\t         * Encodes a string in base64\n\t         * @param {String} input The string to encode in base64.\n\t         */\n\t        encode: function (input) {\n\t            var output = \"\";\n\t            var chr1, chr2, chr3;\n\t            var enc1, enc2, enc3, enc4;\n\t            var i = 0;\n\t\n\t            do {\n\t                chr1 = input.charCodeAt(i++);\n\t                chr2 = input.charCodeAt(i++);\n\t                chr3 = input.charCodeAt(i++);\n\t\n\t                enc1 = chr1 >> 2;\n\t                enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n\t                enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n\t                enc4 = chr3 & 63;\n\t\n\t                if (isNaN(chr2)) {\n\t                    enc2 = ((chr1 & 3) << 4);\n\t                    enc3 = enc4 = 64;\n\t                } else if (isNaN(chr3)) {\n\t                    enc4 = 64;\n\t                }\n\t\n\t                output = output + keyStr.charAt(enc1) + keyStr.charAt(enc2) +\n\t                    keyStr.charAt(enc3) + keyStr.charAt(enc4);\n\t            } while (i < input.length);\n\t\n\t            return output;\n\t        },\n\t\n\t        /**\n\t         * Decodes a base64 string.\n\t         * @param {String} input The string to decode.\n\t         */\n\t        decode: function (input) {\n\t            var output = \"\";\n\t            var chr1, chr2, chr3;\n\t            var enc1, enc2, enc3, enc4;\n\t            var i = 0;\n\t\n\t            // remove all characters that are not A-Z, a-z, 0-9, +, /, or =\n\t            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\t\n\t            do {\n\t                enc1 = keyStr.indexOf(input.charAt(i++));\n\t                enc2 = keyStr.indexOf(input.charAt(i++));\n\t                enc3 = keyStr.indexOf(input.charAt(i++));\n\t                enc4 = keyStr.indexOf(input.charAt(i++));\n\t\n\t                chr1 = (enc1 << 2) | (enc2 >> 4);\n\t                chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n\t                chr3 = ((enc3 & 3) << 6) | enc4;\n\t\n\t                output = output + String.fromCharCode(chr1);\n\t\n\t                if (enc3 != 64) {\n\t                    output = output + String.fromCharCode(chr2);\n\t                }\n\t                if (enc4 != 64) {\n\t                    output = output + String.fromCharCode(chr3);\n\t                }\n\t            } while (i < input.length);\n\t\n\t            return output;\n\t        }\n\t    };\n\t    return obj;\n\t}));\n\t\n\t/*\n\t * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n\t * in FIPS PUB 180-1\n\t * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n\t * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n\t * Distributed under the BSD License\n\t * See http://pajhome.org.uk/crypt/md5 for details.\n\t */\n\t\n\t/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n\t/* global define */\n\t\n\t/* Some functions and variables have been stripped for use with Strophe */\n\t\n\t(function (root, factory) {\n\t    if (true) {\n\t        !(__WEBPACK_LOCAL_MODULE_1__ = function () {\n\t            return factory();\n\t        }.call(exports, __webpack_require__, exports, module));\n\t    } else {\n\t        // Browser globals\n\t        root.SHA1 = factory();\n\t    }\n\t}(this, function () {\n\t\n\t/*\n\t * Calculate the SHA-1 of an array of big-endian words, and a bit length\n\t */\n\tfunction core_sha1(x, len)\n\t{\n\t  /* append padding */\n\t  x[len >> 5] |= 0x80 << (24 - len % 32);\n\t  x[((len + 64 >> 9) << 4) + 15] = len;\n\t\n\t  var w = new Array(80);\n\t  var a =  1732584193;\n\t  var b = -271733879;\n\t  var c = -1732584194;\n\t  var d =  271733878;\n\t  var e = -1009589776;\n\t\n\t  var i, j, t, olda, oldb, oldc, oldd, olde;\n\t  for (i = 0; i < x.length; i += 16)\n\t  {\n\t    olda = a;\n\t    oldb = b;\n\t    oldc = c;\n\t    oldd = d;\n\t    olde = e;\n\t\n\t    for (j = 0; j < 80; j++)\n\t    {\n\t      if (j < 16) { w[j] = x[i + j]; }\n\t      else { w[j] = rol(w[j-3] ^ w[j-8] ^ w[j-14] ^ w[j-16], 1); }\n\t      t = safe_add(safe_add(rol(a, 5), sha1_ft(j, b, c, d)),\n\t                       safe_add(safe_add(e, w[j]), sha1_kt(j)));\n\t      e = d;\n\t      d = c;\n\t      c = rol(b, 30);\n\t      b = a;\n\t      a = t;\n\t    }\n\t\n\t    a = safe_add(a, olda);\n\t    b = safe_add(b, oldb);\n\t    c = safe_add(c, oldc);\n\t    d = safe_add(d, oldd);\n\t    e = safe_add(e, olde);\n\t  }\n\t  return [a, b, c, d, e];\n\t}\n\t\n\t/*\n\t * Perform the appropriate triplet combination function for the current\n\t * iteration\n\t */\n\tfunction sha1_ft(t, b, c, d)\n\t{\n\t  if (t < 20) { return (b & c) | ((~b) & d); }\n\t  if (t < 40) { return b ^ c ^ d; }\n\t  if (t < 60) { return (b & c) | (b & d) | (c & d); }\n\t  return b ^ c ^ d;\n\t}\n\t\n\t/*\n\t * Determine the appropriate additive constant for the current iteration\n\t */\n\tfunction sha1_kt(t)\n\t{\n\t  return (t < 20) ?  1518500249 : (t < 40) ?  1859775393 :\n\t         (t < 60) ? -1894007588 : -899497514;\n\t}\n\t\n\t/*\n\t * Calculate the HMAC-SHA1 of a key and some data\n\t */\n\tfunction core_hmac_sha1(key, data)\n\t{\n\t  var bkey = str2binb(key);\n\t  if (bkey.length > 16) { bkey = core_sha1(bkey, key.length * 8); }\n\t\n\t  var ipad = new Array(16), opad = new Array(16);\n\t  for (var i = 0; i < 16; i++)\n\t  {\n\t    ipad[i] = bkey[i] ^ 0x36363636;\n\t    opad[i] = bkey[i] ^ 0x5C5C5C5C;\n\t  }\n\t\n\t  var hash = core_sha1(ipad.concat(str2binb(data)), 512 + data.length * 8);\n\t  return core_sha1(opad.concat(hash), 512 + 160);\n\t}\n\t\n\t/*\n\t * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n\t * to work around bugs in some JS interpreters.\n\t */\n\tfunction safe_add(x, y)\n\t{\n\t  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n\t  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\t  return (msw << 16) | (lsw & 0xFFFF);\n\t}\n\t\n\t/*\n\t * Bitwise rotate a 32-bit number to the left.\n\t */\n\tfunction rol(num, cnt)\n\t{\n\t  return (num << cnt) | (num >>> (32 - cnt));\n\t}\n\t\n\t/*\n\t * Convert an 8-bit or 16-bit string to an array of big-endian words\n\t * In 8-bit function, characters >255 have their hi-byte silently ignored.\n\t */\n\tfunction str2binb(str)\n\t{\n\t  var bin = [];\n\t  var mask = 255;\n\t  for (var i = 0; i < str.length * 8; i += 8)\n\t  {\n\t    bin[i>>5] |= (str.charCodeAt(i / 8) & mask) << (24 - i%32);\n\t  }\n\t  return bin;\n\t}\n\t\n\t/*\n\t * Convert an array of big-endian words to a string\n\t */\n\tfunction binb2str(bin)\n\t{\n\t  var str = \"\";\n\t  var mask = 255;\n\t  for (var i = 0; i < bin.length * 32; i += 8)\n\t  {\n\t    str += String.fromCharCode((bin[i>>5] >>> (24 - i%32)) & mask);\n\t  }\n\t  return str;\n\t}\n\t\n\t/*\n\t * Convert an array of big-endian words to a base-64 string\n\t */\n\tfunction binb2b64(binarray)\n\t{\n\t  var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\t  var str = \"\";\n\t  var triplet, j;\n\t  for (var i = 0; i < binarray.length * 4; i += 3)\n\t  {\n\t    triplet = (((binarray[i   >> 2] >> 8 * (3 -  i   %4)) & 0xFF) << 16) |\n\t              (((binarray[i+1 >> 2] >> 8 * (3 - (i+1)%4)) & 0xFF) << 8 ) |\n\t               ((binarray[i+2 >> 2] >> 8 * (3 - (i+2)%4)) & 0xFF);\n\t    for (j = 0; j < 4; j++)\n\t    {\n\t      if (i * 8 + j * 6 > binarray.length * 32) { str += \"=\"; }\n\t      else { str += tab.charAt((triplet >> 6*(3-j)) & 0x3F); }\n\t    }\n\t  }\n\t  return str;\n\t}\n\t\n\t/*\n\t * These are the functions you'll usually want to call\n\t * They take string arguments and return either hex or base-64 encoded strings\n\t */\n\treturn {\n\t    b64_hmac_sha1:  function (key, data){ return binb2b64(core_hmac_sha1(key, data)); },\n\t    b64_sha1:       function (s) { return binb2b64(core_sha1(str2binb(s),s.length * 8)); },\n\t    binb2str:       binb2str,\n\t    core_hmac_sha1: core_hmac_sha1,\n\t    str_hmac_sha1:  function (key, data){ return binb2str(core_hmac_sha1(key, data)); },\n\t    str_sha1:       function (s) { return binb2str(core_sha1(str2binb(s),s.length * 8)); },\n\t};\n\t}));\n\t\n\t/*\n\t * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n\t * Digest Algorithm, as defined in RFC 1321.\n\t * Version 2.1 Copyright (C) Paul Johnston 1999 - 2002.\n\t * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n\t * Distributed under the BSD License\n\t * See http://pajhome.org.uk/crypt/md5 for more info.\n\t */\n\t\n\t/*\n\t * Everything that isn't used by Strophe has been stripped here!\n\t */\n\t\n\t(function (root, factory) {\n\t    if (true) {\n\t        !(__WEBPACK_LOCAL_MODULE_2__ = function () {\n\t            return factory();\n\t        }.call(exports, __webpack_require__, exports, module));\n\t    } else {\n\t        // Browser globals\n\t        root.MD5 = factory();\n\t    }\n\t}(this, function (b) {\n\t    /*\n\t     * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n\t     * to work around bugs in some JS interpreters.\n\t     */\n\t    var safe_add = function (x, y) {\n\t        var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n\t        var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\t        return (msw << 16) | (lsw & 0xFFFF);\n\t    };\n\t\n\t    /*\n\t     * Bitwise rotate a 32-bit number to the left.\n\t     */\n\t    var bit_rol = function (num, cnt) {\n\t        return (num << cnt) | (num >>> (32 - cnt));\n\t    };\n\t\n\t    /*\n\t     * Convert a string to an array of little-endian words\n\t     */\n\t    var str2binl = function (str) {\n\t        var bin = [];\n\t        for(var i = 0; i < str.length * 8; i += 8)\n\t        {\n\t            bin[i>>5] |= (str.charCodeAt(i / 8) & 255) << (i%32);\n\t        }\n\t        return bin;\n\t    };\n\t\n\t    /*\n\t     * Convert an array of little-endian words to a string\n\t     */\n\t    var binl2str = function (bin) {\n\t        var str = \"\";\n\t        for(var i = 0; i < bin.length * 32; i += 8)\n\t        {\n\t            str += String.fromCharCode((bin[i>>5] >>> (i % 32)) & 255);\n\t        }\n\t        return str;\n\t    };\n\t\n\t    /*\n\t     * Convert an array of little-endian words to a hex string.\n\t     */\n\t    var binl2hex = function (binarray) {\n\t        var hex_tab = \"0123456789abcdef\";\n\t        var str = \"\";\n\t        for(var i = 0; i < binarray.length * 4; i++)\n\t        {\n\t            str += hex_tab.charAt((binarray[i>>2] >> ((i%4)*8+4)) & 0xF) +\n\t                hex_tab.charAt((binarray[i>>2] >> ((i%4)*8  )) & 0xF);\n\t        }\n\t        return str;\n\t    };\n\t\n\t    /*\n\t     * These functions implement the four basic operations the algorithm uses.\n\t     */\n\t    var md5_cmn = function (q, a, b, x, s, t) {\n\t        return safe_add(bit_rol(safe_add(safe_add(a, q),safe_add(x, t)), s),b);\n\t    };\n\t\n\t    var md5_ff = function (a, b, c, d, x, s, t) {\n\t        return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n\t    };\n\t\n\t    var md5_gg = function (a, b, c, d, x, s, t) {\n\t        return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n\t    };\n\t\n\t    var md5_hh = function (a, b, c, d, x, s, t) {\n\t        return md5_cmn(b ^ c ^ d, a, b, x, s, t);\n\t    };\n\t\n\t    var md5_ii = function (a, b, c, d, x, s, t) {\n\t        return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n\t    };\n\t\n\t    /*\n\t     * Calculate the MD5 of an array of little-endian words, and a bit length\n\t     */\n\t    var core_md5 = function (x, len) {\n\t        /* append padding */\n\t        x[len >> 5] |= 0x80 << ((len) % 32);\n\t        x[(((len + 64) >>> 9) << 4) + 14] = len;\n\t\n\t        var a =  1732584193;\n\t        var b = -271733879;\n\t        var c = -1732584194;\n\t        var d =  271733878;\n\t\n\t        var olda, oldb, oldc, oldd;\n\t        for (var i = 0; i < x.length; i += 16)\n\t        {\n\t            olda = a;\n\t            oldb = b;\n\t            oldc = c;\n\t            oldd = d;\n\t\n\t            a = md5_ff(a, b, c, d, x[i+ 0], 7 , -680876936);\n\t            d = md5_ff(d, a, b, c, x[i+ 1], 12, -389564586);\n\t            c = md5_ff(c, d, a, b, x[i+ 2], 17,  606105819);\n\t            b = md5_ff(b, c, d, a, x[i+ 3], 22, -1044525330);\n\t            a = md5_ff(a, b, c, d, x[i+ 4], 7 , -176418897);\n\t            d = md5_ff(d, a, b, c, x[i+ 5], 12,  1200080426);\n\t            c = md5_ff(c, d, a, b, x[i+ 6], 17, -1473231341);\n\t            b = md5_ff(b, c, d, a, x[i+ 7], 22, -45705983);\n\t            a = md5_ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);\n\t            d = md5_ff(d, a, b, c, x[i+ 9], 12, -1958414417);\n\t            c = md5_ff(c, d, a, b, x[i+10], 17, -42063);\n\t            b = md5_ff(b, c, d, a, x[i+11], 22, -1990404162);\n\t            a = md5_ff(a, b, c, d, x[i+12], 7 ,  1804603682);\n\t            d = md5_ff(d, a, b, c, x[i+13], 12, -40341101);\n\t            c = md5_ff(c, d, a, b, x[i+14], 17, -1502002290);\n\t            b = md5_ff(b, c, d, a, x[i+15], 22,  1236535329);\n\t\n\t            a = md5_gg(a, b, c, d, x[i+ 1], 5 , -165796510);\n\t            d = md5_gg(d, a, b, c, x[i+ 6], 9 , -1069501632);\n\t            c = md5_gg(c, d, a, b, x[i+11], 14,  643717713);\n\t            b = md5_gg(b, c, d, a, x[i+ 0], 20, -373897302);\n\t            a = md5_gg(a, b, c, d, x[i+ 5], 5 , -701558691);\n\t            d = md5_gg(d, a, b, c, x[i+10], 9 ,  38016083);\n\t            c = md5_gg(c, d, a, b, x[i+15], 14, -660478335);\n\t            b = md5_gg(b, c, d, a, x[i+ 4], 20, -405537848);\n\t            a = md5_gg(a, b, c, d, x[i+ 9], 5 ,  568446438);\n\t            d = md5_gg(d, a, b, c, x[i+14], 9 , -1019803690);\n\t            c = md5_gg(c, d, a, b, x[i+ 3], 14, -187363961);\n\t            b = md5_gg(b, c, d, a, x[i+ 8], 20,  1163531501);\n\t            a = md5_gg(a, b, c, d, x[i+13], 5 , -1444681467);\n\t            d = md5_gg(d, a, b, c, x[i+ 2], 9 , -51403784);\n\t            c = md5_gg(c, d, a, b, x[i+ 7], 14,  1735328473);\n\t            b = md5_gg(b, c, d, a, x[i+12], 20, -1926607734);\n\t\n\t            a = md5_hh(a, b, c, d, x[i+ 5], 4 , -378558);\n\t            d = md5_hh(d, a, b, c, x[i+ 8], 11, -2022574463);\n\t            c = md5_hh(c, d, a, b, x[i+11], 16,  1839030562);\n\t            b = md5_hh(b, c, d, a, x[i+14], 23, -35309556);\n\t            a = md5_hh(a, b, c, d, x[i+ 1], 4 , -1530992060);\n\t            d = md5_hh(d, a, b, c, x[i+ 4], 11,  1272893353);\n\t            c = md5_hh(c, d, a, b, x[i+ 7], 16, -155497632);\n\t            b = md5_hh(b, c, d, a, x[i+10], 23, -1094730640);\n\t            a = md5_hh(a, b, c, d, x[i+13], 4 ,  681279174);\n\t            d = md5_hh(d, a, b, c, x[i+ 0], 11, -358537222);\n\t            c = md5_hh(c, d, a, b, x[i+ 3], 16, -722521979);\n\t            b = md5_hh(b, c, d, a, x[i+ 6], 23,  76029189);\n\t            a = md5_hh(a, b, c, d, x[i+ 9], 4 , -640364487);\n\t            d = md5_hh(d, a, b, c, x[i+12], 11, -421815835);\n\t            c = md5_hh(c, d, a, b, x[i+15], 16,  530742520);\n\t            b = md5_hh(b, c, d, a, x[i+ 2], 23, -995338651);\n\t\n\t            a = md5_ii(a, b, c, d, x[i+ 0], 6 , -198630844);\n\t            d = md5_ii(d, a, b, c, x[i+ 7], 10,  1126891415);\n\t            c = md5_ii(c, d, a, b, x[i+14], 15, -1416354905);\n\t            b = md5_ii(b, c, d, a, x[i+ 5], 21, -57434055);\n\t            a = md5_ii(a, b, c, d, x[i+12], 6 ,  1700485571);\n\t            d = md5_ii(d, a, b, c, x[i+ 3], 10, -1894986606);\n\t            c = md5_ii(c, d, a, b, x[i+10], 15, -1051523);\n\t            b = md5_ii(b, c, d, a, x[i+ 1], 21, -2054922799);\n\t            a = md5_ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);\n\t            d = md5_ii(d, a, b, c, x[i+15], 10, -30611744);\n\t            c = md5_ii(c, d, a, b, x[i+ 6], 15, -1560198380);\n\t            b = md5_ii(b, c, d, a, x[i+13], 21,  1309151649);\n\t            a = md5_ii(a, b, c, d, x[i+ 4], 6 , -145523070);\n\t            d = md5_ii(d, a, b, c, x[i+11], 10, -1120210379);\n\t            c = md5_ii(c, d, a, b, x[i+ 2], 15,  718787259);\n\t            b = md5_ii(b, c, d, a, x[i+ 9], 21, -343485551);\n\t\n\t            a = safe_add(a, olda);\n\t            b = safe_add(b, oldb);\n\t            c = safe_add(c, oldc);\n\t            d = safe_add(d, oldd);\n\t        }\n\t        return [a, b, c, d];\n\t    };\n\t\n\t    var obj = {\n\t        /*\n\t         * These are the functions you'll usually want to call.\n\t         * They take string arguments and return either hex or base-64 encoded\n\t         * strings.\n\t         */\n\t        hexdigest: function (s) {\n\t            return binl2hex(core_md5(str2binl(s), s.length * 8));\n\t        },\n\t\n\t        hash: function (s) {\n\t            return binl2str(core_md5(str2binl(s), s.length * 8));\n\t        }\n\t    };\n\t    return obj;\n\t}));\n\t\n\t(function (root, factory) {\n\t    if (true) {\n\t        !(__WEBPACK_LOCAL_MODULE_3__ = function () {\n\t            return factory();\n\t        }.call(exports, __webpack_require__, exports, module));\n\t    } else {\n\t        // Browser globals\n\t        root.stropheUtils = factory();\n\t    }\n\t}(this, function () {\n\t\n\t    var utils = {\n\t\n\t        utf16to8: function (str) {\n\t            var i, c;\n\t            var out = \"\";\n\t            var len = str.length;\n\t            for (i = 0; i < len; i++) {\n\t                c = str.charCodeAt(i);\n\t                if ((c >= 0x0000) && (c <= 0x007F)) {\n\t                    out += str.charAt(i);\n\t                } else if (c > 0x07FF) {\n\t                    out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));\n\t                    out += String.fromCharCode(0x80 | ((c >>  6) & 0x3F));\n\t                    out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));\n\t                } else {\n\t                    out += String.fromCharCode(0xC0 | ((c >>  6) & 0x1F));\n\t                    out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));\n\t                }\n\t            }\n\t            return out;\n\t        }\n\t\n\t    };\n\t    return utils;\n\t}));\n\t\n\t/*\n\t    This program is distributed under the terms of the MIT license.\n\t    Please see the LICENSE file for details.\n\t\n\t    Copyright 2006-2008, OGG, LLC\n\t*/\n\t\n\t/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n\t/* global define */\n\t\n\t(function (root, factory) {\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_LOCAL_MODULE_4__ = (function () {\n\t            return factory();\n\t        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n\t    } else {\n\t        // Browser globals\n\t        return factory();\n\t    }\n\t}(this, function () {\n\t\n\t/** PrivateFunction: Function.prototype.bind\n\t *  Bind a function to an instance.\n\t *\n\t *  This Function object extension method creates a bound method similar\n\t *  to those in Python.  This means that the 'this' object will point\n\t *  to the instance you want.  See\n\t *  <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind'>MDC's bind() documentation</a> and\n\t *  <a href='http://benjamin.smedbergs.us/blog/2007-01-03/bound-functions-and-function-imports-in-javascript/'>Bound Functions and Function Imports in JavaScript</a>\n\t *  for a complete explanation.\n\t *\n\t *  This extension already exists in some browsers (namely, Firefox 3), but\n\t *  we provide it to support those that don't.\n\t *\n\t *  Parameters:\n\t *    (Object) obj - The object that will become 'this' in the bound function.\n\t *    (Object) argN - An option argument that will be prepended to the\n\t *      arguments given for the function call\n\t *\n\t *  Returns:\n\t *    The bound function.\n\t */\n\tif (!Function.prototype.bind) {\n\t    Function.prototype.bind = function (obj /*, arg1, arg2, ... */)\n\t    {\n\t        var func = this;\n\t        var _slice = Array.prototype.slice;\n\t        var _concat = Array.prototype.concat;\n\t        var _args = _slice.call(arguments, 1);\n\t\n\t        return function () {\n\t            return func.apply(obj ? obj : this,\n\t                              _concat.call(_args,\n\t                                           _slice.call(arguments, 0)));\n\t        };\n\t    };\n\t}\n\t\n\t/** PrivateFunction: Array.isArray\n\t *  This is a polyfill for the ES5 Array.isArray method.\n\t */\n\tif (!Array.isArray) {\n\t    Array.isArray = function(arg) {\n\t        return Object.prototype.toString.call(arg) === '[object Array]';\n\t    };\n\t}\n\t\n\t/** PrivateFunction: Array.prototype.indexOf\n\t *  Return the index of an object in an array.\n\t *\n\t *  This function is not supplied by some JavaScript implementations, so\n\t *  we provide it if it is missing.  This code is from:\n\t *  http://developer.mozilla.org/En/Core_JavaScript_1.5_Reference:Objects:Array:indexOf\n\t *\n\t *  Parameters:\n\t *    (Object) elt - The object to look for.\n\t *    (Integer) from - The index from which to start looking. (optional).\n\t *\n\t *  Returns:\n\t *    The index of elt in the array or -1 if not found.\n\t */\n\tif (!Array.prototype.indexOf)\n\t    {\n\t        Array.prototype.indexOf = function(elt /*, from*/)\n\t        {\n\t            var len = this.length;\n\t\n\t            var from = Number(arguments[1]) || 0;\n\t            from = (from < 0) ? Math.ceil(from) : Math.floor(from);\n\t            if (from < 0) {\n\t                from += len;\n\t            }\n\t\n\t            for (; from < len; from++) {\n\t                if (from in this && this[from] === elt) {\n\t                    return from;\n\t                }\n\t            }\n\t\n\t            return -1;\n\t        };\n\t    }\n\t}));\n\t/*\n\t    This program is distributed under the terms of the MIT license.\n\t    Please see the LICENSE file for details.\n\t\n\t    Copyright 2006-2008, OGG, LLC\n\t*/\n\t\n\t/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n\t/*global define, document, window, setTimeout, clearTimeout, console, ActiveXObject, DOMParser */\n\t\n\t(function (root, factory) {\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t            __WEBPACK_LOCAL_MODULE_1__,\n\t            __WEBPACK_LOCAL_MODULE_0__,\n\t            __WEBPACK_LOCAL_MODULE_2__,\n\t            __WEBPACK_LOCAL_MODULE_3__,\n\t            __WEBPACK_LOCAL_MODULE_4__\n\t        ], __WEBPACK_LOCAL_MODULE_5__ = (function () {\n\t            return factory.apply(this, arguments);\n\t        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n\t    } else {\n\t        // Browser globals\n\t        var o = factory(root.SHA1, root.Base64, root.MD5, root.stropheUtils);\n\t        window.Strophe =        o.Strophe;\n\t        window.$build =         o.$build;\n\t        window.$iq =            o.$iq;\n\t        window.$msg =           o.$msg;\n\t        window.$pres =          o.$pres;\n\t        window.SHA1 =           o.SHA1;\n\t        window.Base64 =         o.Base64;\n\t        window.MD5 =            o.MD5;\n\t        window.b64_hmac_sha1 =  o.SHA1.b64_hmac_sha1;\n\t        window.b64_sha1 =       o.SHA1.b64_sha1;\n\t        window.str_hmac_sha1 =  o.SHA1.str_hmac_sha1;\n\t        window.str_sha1 =       o.SHA1.str_sha1;\n\t    }\n\t}(this, function (SHA1, Base64, MD5, utils) {\n\t\n\tvar Strophe;\n\t\n\t/** Function: $build\n\t *  Create a Strophe.Builder.\n\t *  This is an alias for 'new Strophe.Builder(name, attrs)'.\n\t *\n\t *  Parameters:\n\t *    (String) name - The root element name.\n\t *    (Object) attrs - The attributes for the root element in object notation.\n\t *\n\t *  Returns:\n\t *    A new Strophe.Builder object.\n\t */\n\tfunction $build(name, attrs) { return new Strophe.Builder(name, attrs); }\n\t\n\t/** Function: $msg\n\t *  Create a Strophe.Builder with a <message/> element as the root.\n\t *\n\t *  Parameters:\n\t *    (Object) attrs - The <message/> element attributes in object notation.\n\t *\n\t *  Returns:\n\t *    A new Strophe.Builder object.\n\t */\n\tfunction $msg(attrs) { return new Strophe.Builder(\"message\", attrs); }\n\t\n\t/** Function: $iq\n\t *  Create a Strophe.Builder with an <iq/> element as the root.\n\t *\n\t *  Parameters:\n\t *    (Object) attrs - The <iq/> element attributes in object notation.\n\t *\n\t *  Returns:\n\t *    A new Strophe.Builder object.\n\t */\n\tfunction $iq(attrs) { return new Strophe.Builder(\"iq\", attrs); }\n\t\n\t/** Function: $pres\n\t *  Create a Strophe.Builder with a <presence/> element as the root.\n\t *\n\t *  Parameters:\n\t *    (Object) attrs - The <presence/> element attributes in object notation.\n\t *\n\t *  Returns:\n\t *    A new Strophe.Builder object.\n\t */\n\tfunction $pres(attrs) { return new Strophe.Builder(\"presence\", attrs); }\n\t\n\t/** Class: Strophe\n\t *  An object container for all Strophe library functions.\n\t *\n\t *  This class is just a container for all the objects and constants\n\t *  used in the library.  It is not meant to be instantiated, but to\n\t *  provide a namespace for library objects, constants, and functions.\n\t */\n\tStrophe = {\n\t    /** Constant: VERSION\n\t     *  The version of the Strophe library. Unreleased builds will have\n\t     *  a version of head-HASH where HASH is a partial revision.\n\t     */\n\t    VERSION: \"1.2.4\",\n\t\n\t    /** Constants: XMPP Namespace Constants\n\t     *  Common namespace constants from the XMPP RFCs and XEPs.\n\t     *\n\t     *  NS.HTTPBIND - HTTP BIND namespace from XEP 124.\n\t     *  NS.BOSH - BOSH namespace from XEP 206.\n\t     *  NS.CLIENT - Main XMPP client namespace.\n\t     *  NS.AUTH - Legacy authentication namespace.\n\t     *  NS.ROSTER - Roster operations namespace.\n\t     *  NS.PROFILE - Profile namespace.\n\t     *  NS.DISCO_INFO - Service discovery info namespace from XEP 30.\n\t     *  NS.DISCO_ITEMS - Service discovery items namespace from XEP 30.\n\t     *  NS.MUC - Multi-User Chat namespace from XEP 45.\n\t     *  NS.SASL - XMPP SASL namespace from RFC 3920.\n\t     *  NS.STREAM - XMPP Streams namespace from RFC 3920.\n\t     *  NS.BIND - XMPP Binding namespace from RFC 3920.\n\t     *  NS.SESSION - XMPP Session namespace from RFC 3920.\n\t     *  NS.XHTML_IM - XHTML-IM namespace from XEP 71.\n\t     *  NS.XHTML - XHTML body namespace from XEP 71.\n\t     */\n\t    NS: {\n\t        HTTPBIND: \"http://jabber.org/protocol/httpbind\",\n\t        BOSH: \"urn:xmpp:xbosh\",\n\t        CLIENT: \"jabber:client\",\n\t        AUTH: \"jabber:iq:auth\",\n\t        ROSTER: \"jabber:iq:roster\",\n\t        PROFILE: \"jabber:iq:profile\",\n\t        DISCO_INFO: \"http://jabber.org/protocol/disco#info\",\n\t        DISCO_ITEMS: \"http://jabber.org/protocol/disco#items\",\n\t        MUC: \"http://jabber.org/protocol/muc\",\n\t        SASL: \"urn:ietf:params:xml:ns:xmpp-sasl\",\n\t        STREAM: \"http://etherx.jabber.org/streams\",\n\t        FRAMING: \"urn:ietf:params:xml:ns:xmpp-framing\",\n\t        BIND: \"urn:ietf:params:xml:ns:xmpp-bind\",\n\t        SESSION: \"urn:ietf:params:xml:ns:xmpp-session\",\n\t        VERSION: \"jabber:iq:version\",\n\t        STANZAS: \"urn:ietf:params:xml:ns:xmpp-stanzas\",\n\t        XHTML_IM: \"http://jabber.org/protocol/xhtml-im\",\n\t        XHTML: \"http://www.w3.org/1999/xhtml\"\n\t    },\n\t\n\t\n\t    /** Constants: XHTML_IM Namespace\n\t     *  contains allowed tags, tag attributes, and css properties.\n\t     *  Used in the createHtml function to filter incoming html into the allowed XHTML-IM subset.\n\t     *  See http://xmpp.org/extensions/xep-0071.html#profile-summary for the list of recommended\n\t     *  allowed tags and their attributes.\n\t     */\n\t    XHTML: {\n\t                tags: ['a','blockquote','br','cite','em','img','li','ol','p','span','strong','ul','body'],\n\t                attributes: {\n\t                        'a':          ['href'],\n\t                        'blockquote': ['style'],\n\t                        'br':         [],\n\t                        'cite':       ['style'],\n\t                        'em':         [],\n\t                        'img':        ['src', 'alt', 'style', 'height', 'width'],\n\t                        'li':         ['style'],\n\t                        'ol':         ['style'],\n\t                        'p':          ['style'],\n\t                        'span':       ['style'],\n\t                        'strong':     [],\n\t                        'ul':         ['style'],\n\t                        'body':       []\n\t                },\n\t                css: ['background-color','color','font-family','font-size','font-style','font-weight','margin-left','margin-right','text-align','text-decoration'],\n\t                /** Function: XHTML.validTag\n\t                 *\n\t                 * Utility method to determine whether a tag is allowed\n\t                 * in the XHTML_IM namespace.\n\t                 *\n\t                 * XHTML tag names are case sensitive and must be lower case.\n\t                 */\n\t                validTag: function(tag) {\n\t                        for (var i = 0; i < Strophe.XHTML.tags.length; i++) {\n\t                                if (tag == Strophe.XHTML.tags[i]) {\n\t                                        return true;\n\t                                }\n\t                        }\n\t                        return false;\n\t                },\n\t                /** Function: XHTML.validAttribute\n\t                 *\n\t                 * Utility method to determine whether an attribute is allowed\n\t                 * as recommended per XEP-0071\n\t                 *\n\t                 * XHTML attribute names are case sensitive and must be lower case.\n\t                 */\n\t                validAttribute: function(tag, attribute) {\n\t                        if(typeof Strophe.XHTML.attributes[tag] !== 'undefined' && Strophe.XHTML.attributes[tag].length > 0) {\n\t                                for(var i = 0; i < Strophe.XHTML.attributes[tag].length; i++) {\n\t                                        if(attribute == Strophe.XHTML.attributes[tag][i]) {\n\t                                                return true;\n\t                                        }\n\t                                }\n\t                        }\n\t                        return false;\n\t                },\n\t                validCSS: function(style)\n\t                {\n\t                        for(var i = 0; i < Strophe.XHTML.css.length; i++) {\n\t                                if(style == Strophe.XHTML.css[i]) {\n\t                                        return true;\n\t                                }\n\t                        }\n\t                        return false;\n\t                }\n\t    },\n\t\n\t    /** Constants: Connection Status Constants\n\t     *  Connection status constants for use by the connection handler\n\t     *  callback.\n\t     *\n\t     *  Status.ERROR - An error has occurred\n\t     *  Status.CONNECTING - The connection is currently being made\n\t     *  Status.CONNFAIL - The connection attempt failed\n\t     *  Status.AUTHENTICATING - The connection is authenticating\n\t     *  Status.AUTHFAIL - The authentication attempt failed\n\t     *  Status.CONNECTED - The connection has succeeded\n\t     *  Status.DISCONNECTED - The connection has been terminated\n\t     *  Status.DISCONNECTING - The connection is currently being terminated\n\t     *  Status.ATTACHED - The connection has been attached\n\t     */\n\t    Status: {\n\t        ERROR: 0,\n\t        CONNECTING: 1,\n\t        CONNFAIL: 2,\n\t        AUTHENTICATING: 3,\n\t        AUTHFAIL: 4,\n\t        CONNECTED: 5,\n\t        DISCONNECTED: 6,\n\t        DISCONNECTING: 7,\n\t        ATTACHED: 8,\n\t        REDIRECT: 9\n\t    },\n\t\n\t    /** Constants: Log Level Constants\n\t     *  Logging level indicators.\n\t     *\n\t     *  LogLevel.DEBUG - Debug output\n\t     *  LogLevel.INFO - Informational output\n\t     *  LogLevel.WARN - Warnings\n\t     *  LogLevel.ERROR - Errors\n\t     *  LogLevel.FATAL - Fatal errors\n\t     */\n\t    LogLevel: {\n\t        DEBUG: 0,\n\t        INFO: 1,\n\t        WARN: 2,\n\t        ERROR: 3,\n\t        FATAL: 4\n\t    },\n\t\n\t    /** PrivateConstants: DOM Element Type Constants\n\t     *  DOM element types.\n\t     *\n\t     *  ElementType.NORMAL - Normal element.\n\t     *  ElementType.TEXT - Text data element.\n\t     *  ElementType.FRAGMENT - XHTML fragment element.\n\t     */\n\t    ElementType: {\n\t        NORMAL: 1,\n\t        TEXT: 3,\n\t        CDATA: 4,\n\t        FRAGMENT: 11\n\t    },\n\t\n\t    /** PrivateConstants: Timeout Values\n\t     *  Timeout values for error states.  These values are in seconds.\n\t     *  These should not be changed unless you know exactly what you are\n\t     *  doing.\n\t     *\n\t     *  TIMEOUT - Timeout multiplier. A waiting request will be considered\n\t     *      failed after Math.floor(TIMEOUT * wait) seconds have elapsed.\n\t     *      This defaults to 1.1, and with default wait, 66 seconds.\n\t     *  SECONDARY_TIMEOUT - Secondary timeout multiplier. In cases where\n\t     *      Strophe can detect early failure, it will consider the request\n\t     *      failed if it doesn't return after\n\t     *      Math.floor(SECONDARY_TIMEOUT * wait) seconds have elapsed.\n\t     *      This defaults to 0.1, and with default wait, 6 seconds.\n\t     */\n\t    TIMEOUT: 1.1,\n\t    SECONDARY_TIMEOUT: 0.1,\n\t\n\t    /** Function: addNamespace\n\t     *  This function is used to extend the current namespaces in\n\t     *  Strophe.NS.  It takes a key and a value with the key being the\n\t     *  name of the new namespace, with its actual value.\n\t     *  For example:\n\t     *  Strophe.addNamespace('PUBSUB', \"http://jabber.org/protocol/pubsub\");\n\t     *\n\t     *  Parameters:\n\t     *    (String) name - The name under which the namespace will be\n\t     *      referenced under Strophe.NS\n\t     *    (String) value - The actual namespace.\n\t     */\n\t    addNamespace: function (name, value)\n\t    {\n\t      Strophe.NS[name] = value;\n\t    },\n\t\n\t    /** Function: forEachChild\n\t     *  Map a function over some or all child elements of a given element.\n\t     *\n\t     *  This is a small convenience function for mapping a function over\n\t     *  some or all of the children of an element.  If elemName is null, all\n\t     *  children will be passed to the function, otherwise only children\n\t     *  whose tag names match elemName will be passed.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The element to operate on.\n\t     *    (String) elemName - The child element tag name filter.\n\t     *    (Function) func - The function to apply to each child.  This\n\t     *      function should take a single argument, a DOM element.\n\t     */\n\t    forEachChild: function (elem, elemName, func)\n\t    {\n\t        var i, childNode;\n\t\n\t        for (i = 0; i < elem.childNodes.length; i++) {\n\t            childNode = elem.childNodes[i];\n\t            if (childNode.nodeType == Strophe.ElementType.NORMAL &&\n\t                (!elemName || this.isTagEqual(childNode, elemName))) {\n\t                func(childNode);\n\t            }\n\t        }\n\t    },\n\t\n\t    /** Function: isTagEqual\n\t     *  Compare an element's tag name with a string.\n\t     *\n\t     *  This function is case sensitive.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) el - A DOM element.\n\t     *    (String) name - The element name.\n\t     *\n\t     *  Returns:\n\t     *    true if the element's tag name matches _el_, and false\n\t     *    otherwise.\n\t     */\n\t    isTagEqual: function (el, name)\n\t    {\n\t        return el.tagName == name;\n\t    },\n\t\n\t    /** PrivateVariable: _xmlGenerator\n\t     *  _Private_ variable that caches a DOM document to\n\t     *  generate elements.\n\t     */\n\t    _xmlGenerator: null,\n\t\n\t    /** PrivateFunction: _makeGenerator\n\t     *  _Private_ function that creates a dummy XML DOM document to serve as\n\t     *  an element and text node generator.\n\t     */\n\t    _makeGenerator: function () {\n\t        var doc;\n\t\n\t        // IE9 does implement createDocument(); however, using it will cause the browser to leak memory on page unload.\n\t        // Here, we test for presence of createDocument() plus IE's proprietary documentMode attribute, which would be\n\t                // less than 10 in the case of IE9 and below.\n\t        if (document.implementation.createDocument === undefined ||\n\t                        document.implementation.createDocument && document.documentMode && document.documentMode < 10) {\n\t            doc = this._getIEXmlDom();\n\t            doc.appendChild(doc.createElement('strophe'));\n\t        } else {\n\t            doc = document.implementation\n\t                .createDocument('jabber:client', 'strophe', null);\n\t        }\n\t\n\t        return doc;\n\t    },\n\t\n\t    /** Function: xmlGenerator\n\t     *  Get the DOM document to generate elements.\n\t     *\n\t     *  Returns:\n\t     *    The currently used DOM document.\n\t     */\n\t    xmlGenerator: function () {\n\t        if (!Strophe._xmlGenerator) {\n\t            Strophe._xmlGenerator = Strophe._makeGenerator();\n\t        }\n\t        return Strophe._xmlGenerator;\n\t    },\n\t\n\t    /** PrivateFunction: _getIEXmlDom\n\t     *  Gets IE xml doc object\n\t     *\n\t     *  Returns:\n\t     *    A Microsoft XML DOM Object\n\t     *  See Also:\n\t     *    http://msdn.microsoft.com/en-us/library/ms757837%28VS.85%29.aspx\n\t     */\n\t    _getIEXmlDom : function() {\n\t        var doc = null;\n\t        var docStrings = [\n\t            \"Msxml2.DOMDocument.6.0\",\n\t            \"Msxml2.DOMDocument.5.0\",\n\t            \"Msxml2.DOMDocument.4.0\",\n\t            \"MSXML2.DOMDocument.3.0\",\n\t            \"MSXML2.DOMDocument\",\n\t            \"MSXML.DOMDocument\",\n\t            \"Microsoft.XMLDOM\"\n\t        ];\n\t\n\t        for (var d = 0; d < docStrings.length; d++) {\n\t            if (doc === null) {\n\t                try {\n\t                    doc = new ActiveXObject(docStrings[d]);\n\t                } catch (e) {\n\t                    doc = null;\n\t                }\n\t            } else {\n\t                break;\n\t            }\n\t        }\n\t\n\t        return doc;\n\t    },\n\t\n\t    /** Function: xmlElement\n\t     *  Create an XML DOM element.\n\t     *\n\t     *  This function creates an XML DOM element correctly across all\n\t     *  implementations. Note that these are not HTML DOM elements, which\n\t     *  aren't appropriate for XMPP stanzas.\n\t     *\n\t     *  Parameters:\n\t     *    (String) name - The name for the element.\n\t     *    (Array|Object) attrs - An optional array or object containing\n\t     *      key/value pairs to use as element attributes. The object should\n\t     *      be in the format {'key': 'value'} or {key: 'value'}. The array\n\t     *      should have the format [['key1', 'value1'], ['key2', 'value2']].\n\t     *    (String) text - The text child data for the element.\n\t     *\n\t     *  Returns:\n\t     *    A new XML DOM element.\n\t     */\n\t    xmlElement: function (name)\n\t    {\n\t        if (!name) { return null; }\n\t\n\t        var node = Strophe.xmlGenerator().createElement(name);\n\t\n\t        // FIXME: this should throw errors if args are the wrong type or\n\t        // there are more than two optional args\n\t        var a, i, k;\n\t        for (a = 1; a < arguments.length; a++) {\n\t            var arg = arguments[a];\n\t            if (!arg) { continue; }\n\t            if (typeof(arg) == \"string\" ||\n\t                typeof(arg) == \"number\") {\n\t                node.appendChild(Strophe.xmlTextNode(arg));\n\t            } else if (typeof(arg) == \"object\" &&\n\t                       typeof(arg.sort) == \"function\") {\n\t                for (i = 0; i < arg.length; i++) {\n\t                    var attr = arg[i];\n\t                    if (typeof(attr) == \"object\" &&\n\t                        typeof(attr.sort) == \"function\" &&\n\t                        attr[1] !== undefined &&\n\t                        attr[1] !== null) {\n\t                        node.setAttribute(attr[0], attr[1]);\n\t                    }\n\t                }\n\t            } else if (typeof(arg) == \"object\") {\n\t                for (k in arg) {\n\t                    if (arg.hasOwnProperty(k)) {\n\t                        if (arg[k] !== undefined &&\n\t                            arg[k] !== null) {\n\t                            node.setAttribute(k, arg[k]);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        }\n\t\n\t        return node;\n\t    },\n\t\n\t    /*  Function: xmlescape\n\t     *  Excapes invalid xml characters.\n\t     *\n\t     *  Parameters:\n\t     *     (String) text - text to escape.\n\t     *\n\t     *  Returns:\n\t     *      Escaped text.\n\t     */\n\t    xmlescape: function(text)\n\t    {\n\t        text = text.replace(/\\&/g, \"&amp;\");\n\t        text = text.replace(/</g,  \"&lt;\");\n\t        text = text.replace(/>/g,  \"&gt;\");\n\t        text = text.replace(/'/g,  \"&apos;\");\n\t        text = text.replace(/\"/g,  \"&quot;\");\n\t        return text;\n\t    },\n\t\n\t    /*  Function: xmlunescape\n\t    *  Unexcapes invalid xml characters.\n\t    *\n\t    *  Parameters:\n\t    *     (String) text - text to unescape.\n\t    *\n\t    *  Returns:\n\t    *      Unescaped text.\n\t    */\n\t    xmlunescape: function(text)\n\t    {\n\t        text = text.replace(/\\&amp;/g, \"&\");\n\t        text = text.replace(/&lt;/g,  \"<\");\n\t        text = text.replace(/&gt;/g,  \">\");\n\t        text = text.replace(/&apos;/g,  \"'\");\n\t        text = text.replace(/&quot;/g,  \"\\\"\");\n\t        return text;\n\t    },\n\t\n\t    /** Function: xmlTextNode\n\t     *  Creates an XML DOM text node.\n\t     *\n\t     *  Provides a cross implementation version of document.createTextNode.\n\t     *\n\t     *  Parameters:\n\t     *    (String) text - The content of the text node.\n\t     *\n\t     *  Returns:\n\t     *    A new XML DOM text node.\n\t     */\n\t    xmlTextNode: function (text)\n\t    {\n\t        return Strophe.xmlGenerator().createTextNode(text);\n\t    },\n\t\n\t    /** Function: xmlHtmlNode\n\t     *  Creates an XML DOM html node.\n\t     *\n\t     *  Parameters:\n\t     *    (String) html - The content of the html node.\n\t     *\n\t     *  Returns:\n\t     *    A new XML DOM text node.\n\t     */\n\t    xmlHtmlNode: function (html)\n\t    {\n\t        var node;\n\t        //ensure text is escaped\n\t        if (window.DOMParser) {\n\t            var parser = new DOMParser();\n\t            node = parser.parseFromString(html, \"text/xml\");\n\t        } else {\n\t            node = new ActiveXObject(\"Microsoft.XMLDOM\");\n\t            node.async=\"false\";\n\t            node.loadXML(html);\n\t        }\n\t        return node;\n\t    },\n\t\n\t    /** Function: getText\n\t     *  Get the concatenation of all text children of an element.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - A DOM element.\n\t     *\n\t     *  Returns:\n\t     *    A String with the concatenated text of all text element children.\n\t     */\n\t    getText: function (elem)\n\t    {\n\t        if (!elem) { return null; }\n\t\n\t        var str = \"\";\n\t        if (elem.childNodes.length === 0 && elem.nodeType ==\n\t            Strophe.ElementType.TEXT) {\n\t            str += elem.nodeValue;\n\t        }\n\t\n\t        for (var i = 0; i < elem.childNodes.length; i++) {\n\t            if (elem.childNodes[i].nodeType == Strophe.ElementType.TEXT) {\n\t                str += elem.childNodes[i].nodeValue;\n\t            }\n\t        }\n\t\n\t        return Strophe.xmlescape(str);\n\t    },\n\t\n\t    /** Function: copyElement\n\t     *  Copy an XML DOM element.\n\t     *\n\t     *  This function copies a DOM element and all its descendants and returns\n\t     *  the new copy.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - A DOM element.\n\t     *\n\t     *  Returns:\n\t     *    A new, copied DOM element tree.\n\t     */\n\t    copyElement: function (elem)\n\t    {\n\t        var i, el;\n\t        if (elem.nodeType == Strophe.ElementType.NORMAL) {\n\t            el = Strophe.xmlElement(elem.tagName);\n\t\n\t            for (i = 0; i < elem.attributes.length; i++) {\n\t                el.setAttribute(elem.attributes[i].nodeName,\n\t                                elem.attributes[i].value);\n\t            }\n\t\n\t            for (i = 0; i < elem.childNodes.length; i++) {\n\t                el.appendChild(Strophe.copyElement(elem.childNodes[i]));\n\t            }\n\t        } else if (elem.nodeType == Strophe.ElementType.TEXT) {\n\t            el = Strophe.xmlGenerator().createTextNode(elem.nodeValue);\n\t        }\n\t\n\t        return el;\n\t    },\n\t\n\t\n\t    /** Function: createHtml\n\t     *  Copy an HTML DOM element into an XML DOM.\n\t     *\n\t     *  This function copies a DOM element and all its descendants and returns\n\t     *  the new copy.\n\t     *\n\t     *  Parameters:\n\t     *    (HTMLElement) elem - A DOM element.\n\t     *\n\t     *  Returns:\n\t     *    A new, copied DOM element tree.\n\t     */\n\t    createHtml: function (elem)\n\t    {\n\t        var i, el, j, tag, attribute, value, css, cssAttrs, attr, cssName, cssValue;\n\t        if (elem.nodeType == Strophe.ElementType.NORMAL) {\n\t            tag = elem.nodeName.toLowerCase(); // XHTML tags must be lower case.\n\t            if(Strophe.XHTML.validTag(tag)) {\n\t                try {\n\t                    el = Strophe.xmlElement(tag);\n\t                    for(i = 0; i < Strophe.XHTML.attributes[tag].length; i++) {\n\t                        attribute = Strophe.XHTML.attributes[tag][i];\n\t                        value = elem.getAttribute(attribute);\n\t                        if(typeof value == 'undefined' || value === null || value === '' || value === false || value === 0) {\n\t                            continue;\n\t                        }\n\t                        if(attribute == 'style' && typeof value == 'object') {\n\t                            if(typeof value.cssText != 'undefined') {\n\t                                value = value.cssText; // we're dealing with IE, need to get CSS out\n\t                            }\n\t                        }\n\t                        // filter out invalid css styles\n\t                        if(attribute == 'style') {\n\t                            css = [];\n\t                            cssAttrs = value.split(';');\n\t                            for(j = 0; j < cssAttrs.length; j++) {\n\t                                attr = cssAttrs[j].split(':');\n\t                                cssName = attr[0].replace(/^\\s*/, \"\").replace(/\\s*$/, \"\").toLowerCase();\n\t                                if(Strophe.XHTML.validCSS(cssName)) {\n\t                                    cssValue = attr[1].replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\n\t                                    css.push(cssName + ': ' + cssValue);\n\t                                }\n\t                            }\n\t                            if(css.length > 0) {\n\t                                value = css.join('; ');\n\t                                el.setAttribute(attribute, value);\n\t                            }\n\t                        } else {\n\t                            el.setAttribute(attribute, value);\n\t                        }\n\t                    }\n\t\n\t                    for (i = 0; i < elem.childNodes.length; i++) {\n\t                        el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n\t                    }\n\t                } catch(e) { // invalid elements\n\t                  el = Strophe.xmlTextNode('');\n\t                }\n\t            } else {\n\t                el = Strophe.xmlGenerator().createDocumentFragment();\n\t                for (i = 0; i < elem.childNodes.length; i++) {\n\t                    el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n\t                }\n\t            }\n\t        } else if (elem.nodeType == Strophe.ElementType.FRAGMENT) {\n\t            el = Strophe.xmlGenerator().createDocumentFragment();\n\t            for (i = 0; i < elem.childNodes.length; i++) {\n\t                el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n\t            }\n\t        } else if (elem.nodeType == Strophe.ElementType.TEXT) {\n\t            el = Strophe.xmlTextNode(elem.nodeValue);\n\t        }\n\t\n\t        return el;\n\t    },\n\t\n\t    /** Function: escapeNode\n\t     *  Escape the node part (also called local part) of a JID.\n\t     *\n\t     *  Parameters:\n\t     *    (String) node - A node (or local part).\n\t     *\n\t     *  Returns:\n\t     *    An escaped node (or local part).\n\t     */\n\t    escapeNode: function (node)\n\t    {\n\t        if (typeof node !== \"string\") { return node; }\n\t        return node.replace(/^\\s+|\\s+$/g, '')\n\t            .replace(/\\\\/g,  \"\\\\5c\")\n\t            .replace(/ /g,   \"\\\\20\")\n\t            .replace(/\\\"/g,  \"\\\\22\")\n\t            .replace(/\\&/g,  \"\\\\26\")\n\t            .replace(/\\'/g,  \"\\\\27\")\n\t            .replace(/\\//g,  \"\\\\2f\")\n\t            .replace(/:/g,   \"\\\\3a\")\n\t            .replace(/</g,   \"\\\\3c\")\n\t            .replace(/>/g,   \"\\\\3e\")\n\t            .replace(/@/g,   \"\\\\40\");\n\t    },\n\t\n\t    /** Function: unescapeNode\n\t     *  Unescape a node part (also called local part) of a JID.\n\t     *\n\t     *  Parameters:\n\t     *    (String) node - A node (or local part).\n\t     *\n\t     *  Returns:\n\t     *    An unescaped node (or local part).\n\t     */\n\t    unescapeNode: function (node)\n\t    {\n\t        if (typeof node !== \"string\") { return node; }\n\t        return node.replace(/\\\\20/g, \" \")\n\t            .replace(/\\\\22/g, '\"')\n\t            .replace(/\\\\26/g, \"&\")\n\t            .replace(/\\\\27/g, \"'\")\n\t            .replace(/\\\\2f/g, \"/\")\n\t            .replace(/\\\\3a/g, \":\")\n\t            .replace(/\\\\3c/g, \"<\")\n\t            .replace(/\\\\3e/g, \">\")\n\t            .replace(/\\\\40/g, \"@\")\n\t            .replace(/\\\\5c/g, \"\\\\\");\n\t    },\n\t\n\t    /** Function: getNodeFromJid\n\t     *  Get the node portion of a JID String.\n\t     *\n\t     *  Parameters:\n\t     *    (String) jid - A JID.\n\t     *\n\t     *  Returns:\n\t     *    A String containing the node.\n\t     */\n\t    getNodeFromJid: function (jid)\n\t    {\n\t        if (jid.indexOf(\"@\") < 0) { return null; }\n\t        return jid.split(\"@\")[0];\n\t    },\n\t\n\t    /** Function: getDomainFromJid\n\t     *  Get the domain portion of a JID String.\n\t     *\n\t     *  Parameters:\n\t     *    (String) jid - A JID.\n\t     *\n\t     *  Returns:\n\t     *    A String containing the domain.\n\t     */\n\t    getDomainFromJid: function (jid)\n\t    {\n\t        var bare = Strophe.getBareJidFromJid(jid);\n\t        if (bare.indexOf(\"@\") < 0) {\n\t            return bare;\n\t        } else {\n\t            var parts = bare.split(\"@\");\n\t            parts.splice(0, 1);\n\t            return parts.join('@');\n\t        }\n\t    },\n\t\n\t    /** Function: getResourceFromJid\n\t     *  Get the resource portion of a JID String.\n\t     *\n\t     *  Parameters:\n\t     *    (String) jid - A JID.\n\t     *\n\t     *  Returns:\n\t     *    A String containing the resource.\n\t     */\n\t    getResourceFromJid: function (jid)\n\t    {\n\t        var s = jid.split(\"/\");\n\t        if (s.length < 2) { return null; }\n\t        s.splice(0, 1);\n\t        return s.join('/');\n\t    },\n\t\n\t    /** Function: getBareJidFromJid\n\t     *  Get the bare JID from a JID String.\n\t     *\n\t     *  Parameters:\n\t     *    (String) jid - A JID.\n\t     *\n\t     *  Returns:\n\t     *    A String containing the bare JID.\n\t     */\n\t    getBareJidFromJid: function (jid)\n\t    {\n\t        return jid ? jid.split(\"/\")[0] : null;\n\t    },\n\t\n\t    /** Function: log\n\t     *  User overrideable logging function.\n\t     *\n\t     *  This function is called whenever the Strophe library calls any\n\t     *  of the logging functions.  The default implementation of this\n\t     *  function does nothing.  If client code wishes to handle the logging\n\t     *  messages, it should override this with\n\t     *  > Strophe.log = function (level, msg) {\n\t     *  >   (user code here)\n\t     *  > };\n\t     *\n\t     *  Please note that data sent and received over the wire is logged\n\t     *  via Strophe.Connection.rawInput() and Strophe.Connection.rawOutput().\n\t     *\n\t     *  The different levels and their meanings are\n\t     *\n\t     *    DEBUG - Messages useful for debugging purposes.\n\t     *    INFO - Informational messages.  This is mostly information like\n\t     *      'disconnect was called' or 'SASL auth succeeded'.\n\t     *    WARN - Warnings about potential problems.  This is mostly used\n\t     *      to report transient connection errors like request timeouts.\n\t     *    ERROR - Some error occurred.\n\t     *    FATAL - A non-recoverable fatal error occurred.\n\t     *\n\t     *  Parameters:\n\t     *    (Integer) level - The log level of the log message.  This will\n\t     *      be one of the values in Strophe.LogLevel.\n\t     *    (String) msg - The log message.\n\t     */\n\t    /* jshint ignore:start */\n\t    log: function (level, msg)\n\t    {\n\t        return;\n\t    },\n\t    /* jshint ignore:end */\n\t\n\t    /** Function: debug\n\t     *  Log a message at the Strophe.LogLevel.DEBUG level.\n\t     *\n\t     *  Parameters:\n\t     *    (String) msg - The log message.\n\t     */\n\t    debug: function(msg)\n\t    {\n\t        this.log(this.LogLevel.DEBUG, msg);\n\t    },\n\t\n\t    /** Function: info\n\t     *  Log a message at the Strophe.LogLevel.INFO level.\n\t     *\n\t     *  Parameters:\n\t     *    (String) msg - The log message.\n\t     */\n\t    info: function (msg)\n\t    {\n\t        this.log(this.LogLevel.INFO, msg);\n\t    },\n\t\n\t    /** Function: warn\n\t     *  Log a message at the Strophe.LogLevel.WARN level.\n\t     *\n\t     *  Parameters:\n\t     *    (String) msg - The log message.\n\t     */\n\t    warn: function (msg)\n\t    {\n\t        this.log(this.LogLevel.WARN, msg);\n\t    },\n\t\n\t    /** Function: error\n\t     *  Log a message at the Strophe.LogLevel.ERROR level.\n\t     *\n\t     *  Parameters:\n\t     *    (String) msg - The log message.\n\t     */\n\t    error: function (msg)\n\t    {\n\t        this.log(this.LogLevel.ERROR, msg);\n\t    },\n\t\n\t    /** Function: fatal\n\t     *  Log a message at the Strophe.LogLevel.FATAL level.\n\t     *\n\t     *  Parameters:\n\t     *    (String) msg - The log message.\n\t     */\n\t    fatal: function (msg)\n\t    {\n\t        this.log(this.LogLevel.FATAL, msg);\n\t    },\n\t\n\t    /** Function: serialize\n\t     *  Render a DOM element and all descendants to a String.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - A DOM element.\n\t     *\n\t     *  Returns:\n\t     *    The serialized element tree as a String.\n\t     */\n\t    serialize: function (elem)\n\t    {\n\t        var result;\n\t\n\t        if (!elem) { return null; }\n\t\n\t        if (typeof(elem.tree) === \"function\") {\n\t            elem = elem.tree();\n\t        }\n\t\n\t        var nodeName = elem.nodeName;\n\t        var i, child;\n\t\n\t        if (elem.getAttribute(\"_realname\")) {\n\t            nodeName = elem.getAttribute(\"_realname\");\n\t        }\n\t\n\t        result = \"<\" + nodeName;\n\t        for (i = 0; i < elem.attributes.length; i++) {\n\t               if(elem.attributes[i].nodeName != \"_realname\") {\n\t                 result += \" \" + elem.attributes[i].nodeName +\n\t                \"='\" + elem.attributes[i].value\n\t                    .replace(/&/g, \"&amp;\")\n\t                       .replace(/\\'/g, \"&apos;\")\n\t                       .replace(/>/g, \"&gt;\")\n\t                       .replace(/</g, \"&lt;\") + \"'\";\n\t               }\n\t        }\n\t\n\t        if (elem.childNodes.length > 0) {\n\t            result += \">\";\n\t            for (i = 0; i < elem.childNodes.length; i++) {\n\t                child = elem.childNodes[i];\n\t                switch( child.nodeType ){\n\t                  case Strophe.ElementType.NORMAL:\n\t                    // normal element, so recurse\n\t                    result += Strophe.serialize(child);\n\t                    break;\n\t                  case Strophe.ElementType.TEXT:\n\t                    // text element to escape values\n\t                    result += Strophe.xmlescape(child.nodeValue);\n\t                    break;\n\t                  case Strophe.ElementType.CDATA:\n\t                    // cdata section so don't escape values\n\t                    result += \"<![CDATA[\"+child.nodeValue+\"]]>\";\n\t                }\n\t            }\n\t            result += \"</\" + nodeName + \">\";\n\t        } else {\n\t            result += \"/>\";\n\t        }\n\t\n\t        return result;\n\t    },\n\t\n\t    /** PrivateVariable: _requestId\n\t     *  _Private_ variable that keeps track of the request ids for\n\t     *  connections.\n\t     */\n\t    _requestId: 0,\n\t\n\t    /** PrivateVariable: Strophe.connectionPlugins\n\t     *  _Private_ variable Used to store plugin names that need\n\t     *  initialization on Strophe.Connection construction.\n\t     */\n\t    _connectionPlugins: {},\n\t\n\t    /** Function: addConnectionPlugin\n\t     *  Extends the Strophe.Connection object with the given plugin.\n\t     *\n\t     *  Parameters:\n\t     *    (String) name - The name of the extension.\n\t     *    (Object) ptype - The plugin's prototype.\n\t     */\n\t    addConnectionPlugin: function (name, ptype)\n\t    {\n\t        Strophe._connectionPlugins[name] = ptype;\n\t    }\n\t};\n\t\n\t/** Class: Strophe.Builder\n\t *  XML DOM builder.\n\t *\n\t *  This object provides an interface similar to JQuery but for building\n\t *  DOM elements easily and rapidly.  All the functions except for toString()\n\t *  and tree() return the object, so calls can be chained.  Here's an\n\t *  example using the $iq() builder helper.\n\t *  > $iq({to: 'you', from: 'me', type: 'get', id: '1'})\n\t *  >     .c('query', {xmlns: 'strophe:example'})\n\t *  >     .c('example')\n\t *  >     .toString()\n\t *  The above generates this XML fragment\n\t *  > <iq to='you' from='me' type='get' id='1'>\n\t *  >   <query xmlns='strophe:example'>\n\t *  >     <example/>\n\t *  >   </query>\n\t *  > </iq>\n\t *  The corresponding DOM manipulations to get a similar fragment would be\n\t *  a lot more tedious and probably involve several helper variables.\n\t *\n\t *  Since adding children makes new operations operate on the child, up()\n\t *  is provided to traverse up the tree.  To add two children, do\n\t *  > builder.c('child1', ...).up().c('child2', ...)\n\t *  The next operation on the Builder will be relative to the second child.\n\t */\n\t\n\t/** Constructor: Strophe.Builder\n\t *  Create a Strophe.Builder object.\n\t *\n\t *  The attributes should be passed in object notation.  For example\n\t *  > var b = new Builder('message', {to: 'you', from: 'me'});\n\t *  or\n\t *  > var b = new Builder('messsage', {'xml:lang': 'en'});\n\t *\n\t *  Parameters:\n\t *    (String) name - The name of the root element.\n\t *    (Object) attrs - The attributes for the root element in object notation.\n\t *\n\t *  Returns:\n\t *    A new Strophe.Builder.\n\t */\n\tStrophe.Builder = function (name, attrs)\n\t{\n\t    // Set correct namespace for jabber:client elements\n\t    if (name == \"presence\" || name == \"message\" || name == \"iq\") {\n\t        if (attrs && !attrs.xmlns) {\n\t            attrs.xmlns = Strophe.NS.CLIENT;\n\t        } else if (!attrs) {\n\t            attrs = {xmlns: Strophe.NS.CLIENT};\n\t        }\n\t    }\n\t\n\t    // Holds the tree being built.\n\t    this.nodeTree = Strophe.xmlElement(name, attrs);\n\t\n\t    // Points to the current operation node.\n\t    this.node = this.nodeTree;\n\t};\n\t\n\tStrophe.Builder.prototype = {\n\t    /** Function: tree\n\t     *  Return the DOM tree.\n\t     *\n\t     *  This function returns the current DOM tree as an element object.  This\n\t     *  is suitable for passing to functions like Strophe.Connection.send().\n\t     *\n\t     *  Returns:\n\t     *    The DOM tree as a element object.\n\t     */\n\t    tree: function ()\n\t    {\n\t        return this.nodeTree;\n\t    },\n\t\n\t    /** Function: toString\n\t     *  Serialize the DOM tree to a String.\n\t     *\n\t     *  This function returns a string serialization of the current DOM\n\t     *  tree.  It is often used internally to pass data to a\n\t     *  Strophe.Request object.\n\t     *\n\t     *  Returns:\n\t     *    The serialized DOM tree in a String.\n\t     */\n\t    toString: function ()\n\t    {\n\t        return Strophe.serialize(this.nodeTree);\n\t    },\n\t\n\t    /** Function: up\n\t     *  Make the current parent element the new current element.\n\t     *\n\t     *  This function is often used after c() to traverse back up the tree.\n\t     *  For example, to add two children to the same element\n\t     *  > builder.c('child1', {}).up().c('child2', {});\n\t     *\n\t     *  Returns:\n\t     *    The Stophe.Builder object.\n\t     */\n\t    up: function ()\n\t    {\n\t        this.node = this.node.parentNode;\n\t        return this;\n\t    },\n\t\n\t    /** Function: attrs\n\t     *  Add or modify attributes of the current element.\n\t     *\n\t     *  The attributes should be passed in object notation.  This function\n\t     *  does not move the current element pointer.\n\t     *\n\t     *  Parameters:\n\t     *    (Object) moreattrs - The attributes to add/modify in object notation.\n\t     *\n\t     *  Returns:\n\t     *    The Strophe.Builder object.\n\t     */\n\t    attrs: function (moreattrs)\n\t    {\n\t        for (var k in moreattrs) {\n\t            if (moreattrs.hasOwnProperty(k)) {\n\t                if (moreattrs[k] === undefined) {\n\t                    this.node.removeAttribute(k);\n\t                } else {\n\t                    this.node.setAttribute(k, moreattrs[k]);\n\t                }\n\t            }\n\t        }\n\t        return this;\n\t    },\n\t\n\t    /** Function: c\n\t     *  Add a child to the current element and make it the new current\n\t     *  element.\n\t     *\n\t     *  This function moves the current element pointer to the child,\n\t     *  unless text is provided.  If you need to add another child, it\n\t     *  is necessary to use up() to go back to the parent in the tree.\n\t     *\n\t     *  Parameters:\n\t     *    (String) name - The name of the child.\n\t     *    (Object) attrs - The attributes of the child in object notation.\n\t     *    (String) text - The text to add to the child.\n\t     *\n\t     *  Returns:\n\t     *    The Strophe.Builder object.\n\t     */\n\t    c: function (name, attrs, text)\n\t    {\n\t        var child = Strophe.xmlElement(name, attrs, text);\n\t        this.node.appendChild(child);\n\t        if (typeof text !== \"string\") {\n\t            this.node = child;\n\t        }\n\t        return this;\n\t    },\n\t\n\t    /** Function: cnode\n\t     *  Add a child to the current element and make it the new current\n\t     *  element.\n\t     *\n\t     *  This function is the same as c() except that instead of using a\n\t     *  name and an attributes object to create the child it uses an\n\t     *  existing DOM element object.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - A DOM element.\n\t     *\n\t     *  Returns:\n\t     *    The Strophe.Builder object.\n\t     */\n\t    cnode: function (elem)\n\t    {\n\t        var impNode;\n\t        var xmlGen = Strophe.xmlGenerator();\n\t        try {\n\t            impNode = (xmlGen.importNode !== undefined);\n\t        }\n\t        catch (e) {\n\t            impNode = false;\n\t        }\n\t        var newElem = impNode ?\n\t                      xmlGen.importNode(elem, true) :\n\t                      Strophe.copyElement(elem);\n\t        this.node.appendChild(newElem);\n\t        this.node = newElem;\n\t        return this;\n\t    },\n\t\n\t    /** Function: t\n\t     *  Add a child text element.\n\t     *\n\t     *  This *does not* make the child the new current element since there\n\t     *  are no children of text elements.\n\t     *\n\t     *  Parameters:\n\t     *    (String) text - The text data to append to the current element.\n\t     *\n\t     *  Returns:\n\t     *    The Strophe.Builder object.\n\t     */\n\t    t: function (text)\n\t    {\n\t        var child = Strophe.xmlTextNode(text);\n\t        this.node.appendChild(child);\n\t        return this;\n\t    },\n\t\n\t    /** Function: h\n\t     *  Replace current element contents with the HTML passed in.\n\t     *\n\t     *  This *does not* make the child the new current element\n\t     *\n\t     *  Parameters:\n\t     *    (String) html - The html to insert as contents of current element.\n\t     *\n\t     *  Returns:\n\t     *    The Strophe.Builder object.\n\t     */\n\t    h: function (html)\n\t    {\n\t        var fragment = document.createElement('body');\n\t\n\t        // force the browser to try and fix any invalid HTML tags\n\t        fragment.innerHTML = html;\n\t\n\t        // copy cleaned html into an xml dom\n\t        var xhtml = Strophe.createHtml(fragment);\n\t\n\t        while(xhtml.childNodes.length > 0) {\n\t            this.node.appendChild(xhtml.childNodes[0]);\n\t        }\n\t        return this;\n\t    }\n\t};\n\t\n\t/** PrivateClass: Strophe.Handler\n\t *  _Private_ helper class for managing stanza handlers.\n\t *\n\t *  A Strophe.Handler encapsulates a user provided callback function to be\n\t *  executed when matching stanzas are received by the connection.\n\t *  Handlers can be either one-off or persistant depending on their\n\t *  return value. Returning true will cause a Handler to remain active, and\n\t *  returning false will remove the Handler.\n\t *\n\t *  Users will not use Strophe.Handler objects directly, but instead they\n\t *  will use Strophe.Connection.addHandler() and\n\t *  Strophe.Connection.deleteHandler().\n\t */\n\t\n\t/** PrivateConstructor: Strophe.Handler\n\t *  Create and initialize a new Strophe.Handler.\n\t *\n\t *  Parameters:\n\t *    (Function) handler - A function to be executed when the handler is run.\n\t *    (String) ns - The namespace to match.\n\t *    (String) name - The element name to match.\n\t *    (String) type - The element type to match.\n\t *    (String) id - The element id attribute to match.\n\t *    (String) from - The element from attribute to match.\n\t *    (Object) options - Handler options\n\t *\n\t *  Returns:\n\t *    A new Strophe.Handler object.\n\t */\n\tStrophe.Handler = function (handler, ns, name, type, id, from, options)\n\t{\n\t    this.handler = handler;\n\t    this.ns = ns;\n\t    this.name = name;\n\t    this.type = type;\n\t    this.id = id;\n\t    this.options = options || {matchBare: false};\n\t\n\t    // default matchBare to false if undefined\n\t    if (!this.options.matchBare) {\n\t        this.options.matchBare = false;\n\t    }\n\t\n\t    if (this.options.matchBare) {\n\t        this.from = from ? Strophe.getBareJidFromJid(from) : null;\n\t    } else {\n\t        this.from = from;\n\t    }\n\t\n\t    // whether the handler is a user handler or a system handler\n\t    this.user = true;\n\t};\n\t\n\tStrophe.Handler.prototype = {\n\t    /** PrivateFunction: isMatch\n\t     *  Tests if a stanza matches the Strophe.Handler.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The XML element to test.\n\t     *\n\t     *  Returns:\n\t     *    true if the stanza matches and false otherwise.\n\t     */\n\t    isMatch: function (elem)\n\t    {\n\t        var nsMatch;\n\t        var from = null;\n\t\n\t        if (this.options.matchBare) {\n\t            from = Strophe.getBareJidFromJid(elem.getAttribute('from'));\n\t        } else {\n\t            from = elem.getAttribute('from');\n\t        }\n\t\n\t        nsMatch = false;\n\t        if (!this.ns) {\n\t            nsMatch = true;\n\t        } else {\n\t            var that = this;\n\t            Strophe.forEachChild(elem, null, function (elem) {\n\t                if (elem.getAttribute(\"xmlns\") == that.ns) {\n\t                    nsMatch = true;\n\t                }\n\t            });\n\t\n\t            nsMatch = nsMatch || elem.getAttribute(\"xmlns\") == this.ns;\n\t        }\n\t\n\t        var elem_type = elem.getAttribute(\"type\");\n\t        if (nsMatch &&\n\t            (!this.name || Strophe.isTagEqual(elem, this.name)) &&\n\t            (!this.type || (Array.isArray(this.type) ? this.type.indexOf(elem_type) != -1 : elem_type == this.type)) &&\n\t            (!this.id || elem.getAttribute(\"id\") == this.id) &&\n\t            (!this.from || from == this.from)) {\n\t                return true;\n\t        }\n\t\n\t        return false;\n\t    },\n\t\n\t    /** PrivateFunction: run\n\t     *  Run the callback on a matching stanza.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The DOM element that triggered the\n\t     *      Strophe.Handler.\n\t     *\n\t     *  Returns:\n\t     *    A boolean indicating if the handler should remain active.\n\t     */\n\t    run: function (elem)\n\t    {\n\t        var result = null;\n\t        try {\n\t            result = this.handler(elem);\n\t        } catch (e) {\n\t            if (e.sourceURL) {\n\t                Strophe.fatal(\"error: \" + this.handler +\n\t                              \" \" + e.sourceURL + \":\" +\n\t                              e.line + \" - \" + e.name + \": \" + e.message);\n\t            } else if (e.fileName) {\n\t                if (typeof(console) != \"undefined\") {\n\t                    console.trace();\n\t                    console.error(this.handler, \" - error - \", e, e.message);\n\t                }\n\t                Strophe.fatal(\"error: \" + this.handler + \" \" +\n\t                              e.fileName + \":\" + e.lineNumber + \" - \" +\n\t                              e.name + \": \" + e.message);\n\t            } else {\n\t                Strophe.fatal(\"error: \" + e.message + \"\\n\" + e.stack);\n\t            }\n\t\n\t            throw e;\n\t        }\n\t\n\t        return result;\n\t    },\n\t\n\t    /** PrivateFunction: toString\n\t     *  Get a String representation of the Strophe.Handler object.\n\t     *\n\t     *  Returns:\n\t     *    A String.\n\t     */\n\t    toString: function ()\n\t    {\n\t        return \"{Handler: \" + this.handler + \"(\" + this.name + \",\" +\n\t            this.id + \",\" + this.ns + \")}\";\n\t    }\n\t};\n\t\n\t/** PrivateClass: Strophe.TimedHandler\n\t *  _Private_ helper class for managing timed handlers.\n\t *\n\t *  A Strophe.TimedHandler encapsulates a user provided callback that\n\t *  should be called after a certain period of time or at regular\n\t *  intervals.  The return value of the callback determines whether the\n\t *  Strophe.TimedHandler will continue to fire.\n\t *\n\t *  Users will not use Strophe.TimedHandler objects directly, but instead\n\t *  they will use Strophe.Connection.addTimedHandler() and\n\t *  Strophe.Connection.deleteTimedHandler().\n\t */\n\t\n\t/** PrivateConstructor: Strophe.TimedHandler\n\t *  Create and initialize a new Strophe.TimedHandler object.\n\t *\n\t *  Parameters:\n\t *    (Integer) period - The number of milliseconds to wait before the\n\t *      handler is called.\n\t *    (Function) handler - The callback to run when the handler fires.  This\n\t *      function should take no arguments.\n\t *\n\t *  Returns:\n\t *    A new Strophe.TimedHandler object.\n\t */\n\tStrophe.TimedHandler = function (period, handler)\n\t{\n\t    this.period = period;\n\t    this.handler = handler;\n\t\n\t    this.lastCalled = new Date().getTime();\n\t    this.user = true;\n\t};\n\t\n\tStrophe.TimedHandler.prototype = {\n\t    /** PrivateFunction: run\n\t     *  Run the callback for the Strophe.TimedHandler.\n\t     *\n\t     *  Returns:\n\t     *    true if the Strophe.TimedHandler should be called again, and false\n\t     *      otherwise.\n\t     */\n\t    run: function ()\n\t    {\n\t        this.lastCalled = new Date().getTime();\n\t        return this.handler();\n\t    },\n\t\n\t    /** PrivateFunction: reset\n\t     *  Reset the last called time for the Strophe.TimedHandler.\n\t     */\n\t    reset: function ()\n\t    {\n\t        this.lastCalled = new Date().getTime();\n\t    },\n\t\n\t    /** PrivateFunction: toString\n\t     *  Get a string representation of the Strophe.TimedHandler object.\n\t     *\n\t     *  Returns:\n\t     *    The string representation.\n\t     */\n\t    toString: function ()\n\t    {\n\t        return \"{TimedHandler: \" + this.handler + \"(\" + this.period +\")}\";\n\t    }\n\t};\n\t\n\t/** Class: Strophe.Connection\n\t *  XMPP Connection manager.\n\t *\n\t *  This class is the main part of Strophe.  It manages a BOSH or websocket\n\t *  connection to an XMPP server and dispatches events to the user callbacks\n\t *  as data arrives. It supports SASL PLAIN, SASL DIGEST-MD5, SASL SCRAM-SHA1\n\t *  and legacy authentication.\n\t *\n\t *  After creating a Strophe.Connection object, the user will typically\n\t *  call connect() with a user supplied callback to handle connection level\n\t *  events like authentication failure, disconnection, or connection\n\t *  complete.\n\t *\n\t *  The user will also have several event handlers defined by using\n\t *  addHandler() and addTimedHandler().  These will allow the user code to\n\t *  respond to interesting stanzas or do something periodically with the\n\t *  connection. These handlers will be active once authentication is\n\t *  finished.\n\t *\n\t *  To send data to the connection, use send().\n\t */\n\t\n\t/** Constructor: Strophe.Connection\n\t *  Create and initialize a Strophe.Connection object.\n\t *\n\t *  The transport-protocol for this connection will be chosen automatically\n\t *  based on the given service parameter. URLs starting with \"ws://\" or\n\t *  \"wss://\" will use WebSockets, URLs starting with \"http://\", \"https://\"\n\t *  or without a protocol will use BOSH.\n\t *\n\t *  To make Strophe connect to the current host you can leave out the protocol\n\t *  and host part and just pass the path, e.g.\n\t *\n\t *  > var conn = new Strophe.Connection(\"/http-bind/\");\n\t *\n\t *  WebSocket options:\n\t *\n\t *  If you want to connect to the current host with a WebSocket connection you\n\t *  can tell Strophe to use WebSockets through a \"protocol\" attribute in the\n\t *  optional options parameter. Valid values are \"ws\" for WebSocket and \"wss\"\n\t *  for Secure WebSocket.\n\t *  So to connect to \"wss://CURRENT_HOSTNAME/xmpp-websocket\" you would call\n\t *\n\t *  > var conn = new Strophe.Connection(\"/xmpp-websocket/\", {protocol: \"wss\"});\n\t *\n\t *  Note that relative URLs _NOT_ starting with a \"/\" will also include the path\n\t *  of the current site.\n\t *\n\t *  Also because downgrading security is not permitted by browsers, when using\n\t *  relative URLs both BOSH and WebSocket connections will use their secure\n\t *  variants if the current connection to the site is also secure (https).\n\t *\n\t *  BOSH options:\n\t *\n\t *  By adding \"sync\" to the options, you can control if requests will\n\t *  be made synchronously or not. The default behaviour is asynchronous.\n\t *  If you want to make requests synchronous, make \"sync\" evaluate to true:\n\t *  > var conn = new Strophe.Connection(\"/http-bind/\", {sync: true});\n\t *\n\t *  You can also toggle this on an already established connection:\n\t *  > conn.options.sync = true;\n\t *\n\t *  The \"customHeaders\" option can be used to provide custom HTTP headers to be\n\t *  included in the XMLHttpRequests made.\n\t *\n\t *  The \"keepalive\" option can be used to instruct Strophe to maintain the\n\t *  current BOSH session across interruptions such as webpage reloads.\n\t *\n\t *  It will do this by caching the sessions tokens in sessionStorage, and when\n\t *  \"restore\" is called it will check whether there are cached tokens with\n\t *  which it can resume an existing session.\n\t *\n\t *  Parameters:\n\t *    (String) service - The BOSH or WebSocket service URL.\n\t *    (Object) options - A hash of configuration options\n\t *\n\t *  Returns:\n\t *    A new Strophe.Connection object.\n\t */\n\tStrophe.Connection = function (service, options)\n\t{\n\t    // The service URL\n\t    this.service = service;\n\t\n\t    // Configuration options\n\t    this.options = options || {};\n\t    var proto = this.options.protocol || \"\";\n\t\n\t    // Select protocal based on service or options\n\t    if (service.indexOf(\"ws:\") === 0 || service.indexOf(\"wss:\") === 0 ||\n\t            proto.indexOf(\"ws\") === 0) {\n\t        this._proto = new Strophe.Websocket(this);\n\t    } else {\n\t        this._proto = new Strophe.Bosh(this);\n\t    }\n\t\n\t    /* The connected JID. */\n\t    this.jid = \"\";\n\t    /* the JIDs domain */\n\t    this.domain = null;\n\t    /* stream:features */\n\t    this.features = null;\n\t\n\t    // SASL\n\t    this._sasl_data = {};\n\t    this.do_session = false;\n\t    this.do_bind = false;\n\t\n\t    // handler lists\n\t    this.timedHandlers = [];\n\t    this.handlers = [];\n\t    this.removeTimeds = [];\n\t    this.removeHandlers = [];\n\t    this.addTimeds = [];\n\t    this.addHandlers = [];\n\t\n\t    this._authentication = {};\n\t    this._idleTimeout = null;\n\t    this._disconnectTimeout = null;\n\t\n\t    this.authenticated = false;\n\t    this.connected = false;\n\t    this.disconnecting = false;\n\t    this.do_authentication = true;\n\t    this.paused = false;\n\t    this.restored = false;\n\t\n\t    this._data = [];\n\t    this._uniqueId = 0;\n\t\n\t    this._sasl_success_handler = null;\n\t    this._sasl_failure_handler = null;\n\t    this._sasl_challenge_handler = null;\n\t\n\t    // Max retries before disconnecting\n\t    this.maxRetries = 5;\n\t\n\t    // setup onIdle callback every 1/10th of a second\n\t    this._idleTimeout = setTimeout(this._onIdle.bind(this), 100);\n\t\n\t    // initialize plugins\n\t    for (var k in Strophe._connectionPlugins) {\n\t        if (Strophe._connectionPlugins.hasOwnProperty(k)) {\n\t            var ptype = Strophe._connectionPlugins[k];\n\t            // jslint complaints about the below line, but this is fine\n\t            var F = function () {}; // jshint ignore:line\n\t            F.prototype = ptype;\n\t            this[k] = new F();\n\t            this[k].init(this);\n\t        }\n\t    }\n\t};\n\t\n\tStrophe.Connection.prototype = {\n\t    /** Function: reset\n\t     *  Reset the connection.\n\t     *\n\t     *  This function should be called after a connection is disconnected\n\t     *  before that connection is reused.\n\t     */\n\t    reset: function ()\n\t    {\n\t        this._proto._reset();\n\t\n\t        // SASL\n\t        this.do_session = false;\n\t        this.do_bind = false;\n\t\n\t        // handler lists\n\t        this.timedHandlers = [];\n\t        this.handlers = [];\n\t        this.removeTimeds = [];\n\t        this.removeHandlers = [];\n\t        this.addTimeds = [];\n\t        this.addHandlers = [];\n\t        this._authentication = {};\n\t\n\t        this.authenticated = false;\n\t        this.connected = false;\n\t        this.disconnecting = false;\n\t        this.restored = false;\n\t\n\t        this._data = [];\n\t        this._requests = [];\n\t        this._uniqueId = 0;\n\t    },\n\t\n\t    /** Function: pause\n\t     *  Pause the request manager.\n\t     *\n\t     *  This will prevent Strophe from sending any more requests to the\n\t     *  server.  This is very useful for temporarily pausing\n\t     *  BOSH-Connections while a lot of send() calls are happening quickly.\n\t     *  This causes Strophe to send the data in a single request, saving\n\t     *  many request trips.\n\t     */\n\t    pause: function ()\n\t    {\n\t        this.paused = true;\n\t    },\n\t\n\t    /** Function: resume\n\t     *  Resume the request manager.\n\t     *\n\t     *  This resumes after pause() has been called.\n\t     */\n\t    resume: function ()\n\t    {\n\t        this.paused = false;\n\t    },\n\t\n\t    /** Function: getUniqueId\n\t     *  Generate a unique ID for use in <iq/> elements.\n\t     *\n\t     *  All <iq/> stanzas are required to have unique id attributes.  This\n\t     *  function makes creating these easy.  Each connection instance has\n\t     *  a counter which starts from zero, and the value of this counter\n\t     *  plus a colon followed by the suffix becomes the unique id. If no\n\t     *  suffix is supplied, the counter is used as the unique id.\n\t     *\n\t     *  Suffixes are used to make debugging easier when reading the stream\n\t     *  data, and their use is recommended.  The counter resets to 0 for\n\t     *  every new connection for the same reason.  For connections to the\n\t     *  same server that authenticate the same way, all the ids should be\n\t     *  the same, which makes it easy to see changes.  This is useful for\n\t     *  automated testing as well.\n\t     *\n\t     *  Parameters:\n\t     *    (String) suffix - A optional suffix to append to the id.\n\t     *\n\t     *  Returns:\n\t     *    A unique string to be used for the id attribute.\n\t     */\n\t    getUniqueId: function(suffix) {\n\t        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n\t            var r = Math.random() * 16 | 0,\n\t                v = c == 'x' ? r : r & 0x3 | 0x8;\n\t            return v.toString(16);\n\t        });\n\t        if (typeof(suffix) == \"string\" || typeof(suffix) == \"number\") {\n\t            return uuid + \":\" + suffix;\n\t        } else {\n\t            return uuid + \"\";\n\t        }\n\t    },\n\t\n\t    /** Function: connect\n\t     *  Starts the connection process.\n\t     *\n\t     *  As the connection process proceeds, the user supplied callback will\n\t     *  be triggered multiple times with status updates.  The callback\n\t     *  should take two arguments - the status code and the error condition.\n\t     *\n\t     *  The status code will be one of the values in the Strophe.Status\n\t     *  constants.  The error condition will be one of the conditions\n\t     *  defined in RFC 3920 or the condition 'strophe-parsererror'.\n\t     *\n\t     *  The Parameters _wait_, _hold_ and _route_ are optional and only relevant\n\t     *  for BOSH connections. Please see XEP 124 for a more detailed explanation\n\t     *  of the optional parameters.\n\t     *\n\t     *  Parameters:\n\t     *    (String) jid - The user's JID.  This may be a bare JID,\n\t     *      or a full JID.  If a node is not supplied, SASL ANONYMOUS\n\t     *      authentication will be attempted.\n\t     *    (String) pass - The user's password.\n\t     *    (Function) callback - The connect callback function.\n\t     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n\t     *      time the server will wait before returning an empty result for\n\t     *      a request.  The default setting of 60 seconds is recommended.\n\t     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n\t     *      number of connections the server will hold at one time.  This\n\t     *      should almost always be set to 1 (the default).\n\t     *    (String) route - The optional route value.\n\t     *    (String) authcid - The optional alternative authentication identity\n\t     *      (username) if intending to impersonate another user.\n\t     */\n\t    connect: function (jid, pass, callback, wait, hold, route, authcid)\n\t    {\n\t        this.jid = jid;\n\t        /** Variable: authzid\n\t         *  Authorization identity.\n\t         */\n\t        this.authzid = Strophe.getBareJidFromJid(this.jid);\n\t        /** Variable: authcid\n\t         *  Authentication identity (User name).\n\t         */\n\t        this.authcid = authcid || Strophe.getNodeFromJid(this.jid);\n\t        /** Variable: pass\n\t         *  Authentication identity (User password).\n\t         */\n\t        this.pass = pass;\n\t        /** Variable: servtype\n\t         *  Digest MD5 compatibility.\n\t         */\n\t        this.servtype = \"xmpp\";\n\t        this.connect_callback = callback;\n\t        this.disconnecting = false;\n\t        this.connected = false;\n\t        this.authenticated = false;\n\t        this.restored = false;\n\t\n\t        // parse jid for domain\n\t        this.domain = Strophe.getDomainFromJid(this.jid);\n\t\n\t        this._changeConnectStatus(Strophe.Status.CONNECTING, null);\n\t\n\t        this._proto._connect(wait, hold, route);\n\t    },\n\t\n\t    /** Function: attach\n\t     *  Attach to an already created and authenticated BOSH session.\n\t     *\n\t     *  This function is provided to allow Strophe to attach to BOSH\n\t     *  sessions which have been created externally, perhaps by a Web\n\t     *  application.  This is often used to support auto-login type features\n\t     *  without putting user credentials into the page.\n\t     *\n\t     *  Parameters:\n\t     *    (String) jid - The full JID that is bound by the session.\n\t     *    (String) sid - The SID of the BOSH session.\n\t     *    (String) rid - The current RID of the BOSH session.  This RID\n\t     *      will be used by the next request.\n\t     *    (Function) callback The connect callback function.\n\t     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n\t     *      time the server will wait before returning an empty result for\n\t     *      a request.  The default setting of 60 seconds is recommended.\n\t     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n\t     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n\t     *      number of connections the server will hold at one time.  This\n\t     *      should almost always be set to 1 (the default).\n\t     *    (Integer) wind - The optional HTTBIND window value.  This is the\n\t     *      allowed range of request ids that are valid.  The default is 5.\n\t     */\n\t    attach: function (jid, sid, rid, callback, wait, hold, wind)\n\t    {\n\t        if (this._proto instanceof Strophe.Bosh) {\n\t            this._proto._attach(jid, sid, rid, callback, wait, hold, wind);\n\t        } else {\n\t            throw {\n\t                name: 'StropheSessionError',\n\t                message: 'The \"attach\" method can only be used with a BOSH connection.'\n\t            };\n\t        }\n\t    },\n\t\n\t    /** Function: restore\n\t     *  Attempt to restore a cached BOSH session.\n\t     *\n\t     *  This function is only useful in conjunction with providing the\n\t     *  \"keepalive\":true option when instantiating a new Strophe.Connection.\n\t     *\n\t     *  When \"keepalive\" is set to true, Strophe will cache the BOSH tokens\n\t     *  RID (Request ID) and SID (Session ID) and then when this function is\n\t     *  called, it will attempt to restore the session from those cached\n\t     *  tokens.\n\t     *\n\t     *  This function must therefore be called instead of connect or attach.\n\t     *\n\t     *  For an example on how to use it, please see examples/restore.js\n\t     *\n\t     *  Parameters:\n\t     *    (String) jid - The user's JID.  This may be a bare JID or a full JID.\n\t     *    (Function) callback - The connect callback function.\n\t     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n\t     *      time the server will wait before returning an empty result for\n\t     *      a request.  The default setting of 60 seconds is recommended.\n\t     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n\t     *      number of connections the server will hold at one time.  This\n\t     *      should almost always be set to 1 (the default).\n\t     *    (Integer) wind - The optional HTTBIND window value.  This is the\n\t     *      allowed range of request ids that are valid.  The default is 5.\n\t     */\n\t    restore: function (jid, callback, wait, hold, wind)\n\t    {\n\t        if (this._sessionCachingSupported()) {\n\t            this._proto._restore(jid, callback, wait, hold, wind);\n\t        } else {\n\t            throw {\n\t                name: 'StropheSessionError',\n\t                message: 'The \"restore\" method can only be used with a BOSH connection.'\n\t            };\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _sessionCachingSupported\n\t     * Checks whether sessionStorage and JSON are supported and whether we're\n\t     * using BOSH.\n\t     */\n\t    _sessionCachingSupported: function ()\n\t    {\n\t        if (this._proto instanceof Strophe.Bosh) {\n\t            if (!JSON) { return false; }\n\t            try {\n\t                window.sessionStorage.setItem('_strophe_', '_strophe_');\n\t                window.sessionStorage.removeItem('_strophe_');\n\t            } catch (e) {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t        return false;\n\t    },\n\t\n\t    /** Function: xmlInput\n\t     *  User overrideable function that receives XML data coming into the\n\t     *  connection.\n\t     *\n\t     *  The default function does nothing.  User code can override this with\n\t     *  > Strophe.Connection.xmlInput = function (elem) {\n\t     *  >   (user code)\n\t     *  > };\n\t     *\n\t     *  Due to limitations of current Browsers' XML-Parsers the opening and closing\n\t     *  <stream> tag for WebSocket-Connoctions will be passed as selfclosing here.\n\t     *\n\t     *  BOSH-Connections will have all stanzas wrapped in a <body> tag. See\n\t     *  <Strophe.Bosh.strip> if you want to strip this tag.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The XML data received by the connection.\n\t     */\n\t    /* jshint unused:false */\n\t    xmlInput: function (elem)\n\t    {\n\t        return;\n\t    },\n\t    /* jshint unused:true */\n\t\n\t    /** Function: xmlOutput\n\t     *  User overrideable function that receives XML data sent to the\n\t     *  connection.\n\t     *\n\t     *  The default function does nothing.  User code can override this with\n\t     *  > Strophe.Connection.xmlOutput = function (elem) {\n\t     *  >   (user code)\n\t     *  > };\n\t     *\n\t     *  Due to limitations of current Browsers' XML-Parsers the opening and closing\n\t     *  <stream> tag for WebSocket-Connoctions will be passed as selfclosing here.\n\t     *\n\t     *  BOSH-Connections will have all stanzas wrapped in a <body> tag. See\n\t     *  <Strophe.Bosh.strip> if you want to strip this tag.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The XMLdata sent by the connection.\n\t     */\n\t    /* jshint unused:false */\n\t    xmlOutput: function (elem)\n\t    {\n\t        return;\n\t    },\n\t    /* jshint unused:true */\n\t\n\t    /** Function: rawInput\n\t     *  User overrideable function that receives raw data coming into the\n\t     *  connection.\n\t     *\n\t     *  The default function does nothing.  User code can override this with\n\t     *  > Strophe.Connection.rawInput = function (data) {\n\t     *  >   (user code)\n\t     *  > };\n\t     *\n\t     *  Parameters:\n\t     *    (String) data - The data received by the connection.\n\t     */\n\t    /* jshint unused:false */\n\t    rawInput: function (data)\n\t    {\n\t        return;\n\t    },\n\t    /* jshint unused:true */\n\t\n\t    /** Function: rawOutput\n\t     *  User overrideable function that receives raw data sent to the\n\t     *  connection.\n\t     *\n\t     *  The default function does nothing.  User code can override this with\n\t     *  > Strophe.Connection.rawOutput = function (data) {\n\t     *  >   (user code)\n\t     *  > };\n\t     *\n\t     *  Parameters:\n\t     *    (String) data - The data sent by the connection.\n\t     */\n\t    /* jshint unused:false */\n\t    rawOutput: function (data)\n\t    {\n\t        return;\n\t    },\n\t    /* jshint unused:true */\n\t\n\t    /** Function: nextValidRid\n\t     *  User overrideable function that receives the new valid rid.\n\t     *\n\t     *  The default function does nothing. User code can override this with\n\t     *  > Strophe.Connection.nextValidRid = function (rid) {\n\t     *  >    (user code)\n\t     *  > };\n\t     *\n\t     *  Parameters:\n\t     *    (Number) rid - The next valid rid\n\t     */\n\t    /* jshint unused:false */\n\t    nextValidRid: function (rid)\n\t    {\n\t        return;\n\t    },\n\t    /* jshint unused:true */\n\t\n\t    /** Function: send\n\t     *  Send a stanza.\n\t     *\n\t     *  This function is called to push data onto the send queue to\n\t     *  go out over the wire.  Whenever a request is sent to the BOSH\n\t     *  server, all pending data is sent and the queue is flushed.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement |\n\t     *     [XMLElement] |\n\t     *     Strophe.Builder) elem - The stanza to send.\n\t     */\n\t    send: function (elem)\n\t    {\n\t        if (elem === null) { return ; }\n\t        if (typeof(elem.sort) === \"function\") {\n\t            for (var i = 0; i < elem.length; i++) {\n\t                this._queueData(elem[i]);\n\t            }\n\t        } else if (typeof(elem.tree) === \"function\") {\n\t            this._queueData(elem.tree());\n\t        } else {\n\t            this._queueData(elem);\n\t        }\n\t\n\t        this._proto._send();\n\t    },\n\t\n\t    /** Function: flush\n\t     *  Immediately send any pending outgoing data.\n\t     *\n\t     *  Normally send() queues outgoing data until the next idle period\n\t     *  (100ms), which optimizes network use in the common cases when\n\t     *  several send()s are called in succession. flush() can be used to\n\t     *  immediately send all pending data.\n\t     */\n\t    flush: function ()\n\t    {\n\t        // cancel the pending idle period and run the idle function\n\t        // immediately\n\t        clearTimeout(this._idleTimeout);\n\t        this._onIdle();\n\t    },\n\t\n\t    /** Function: sendIQ\n\t     *  Helper function to send IQ stanzas.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The stanza to send.\n\t     *    (Function) callback - The callback function for a successful request.\n\t     *    (Function) errback - The callback function for a failed or timed\n\t     *      out request.  On timeout, the stanza will be null.\n\t     *    (Integer) timeout - The time specified in milliseconds for a\n\t     *      timeout to occur.\n\t     *\n\t     *  Returns:\n\t     *    The id used to send the IQ.\n\t    */\n\t    sendIQ: function(elem, callback, errback, timeout) {\n\t        var timeoutHandler = null;\n\t        var that = this;\n\t\n\t        if (typeof(elem.tree) === \"function\") {\n\t            elem = elem.tree();\n\t        }\n\t        var id = elem.getAttribute('id');\n\t\n\t        // inject id if not found\n\t        if (!id) {\n\t            id = this.getUniqueId(\"sendIQ\");\n\t            elem.setAttribute(\"id\", id);\n\t        }\n\t\n\t        var expectedFrom = elem.getAttribute(\"to\");\n\t        var fulljid = this.jid;\n\t\n\t        var handler = this.addHandler(function (stanza) {\n\t            // remove timeout handler if there is one\n\t            if (timeoutHandler) {\n\t                that.deleteTimedHandler(timeoutHandler);\n\t            }\n\t\n\t            var acceptable = false;\n\t            var from = stanza.getAttribute(\"from\");\n\t            if (from === expectedFrom ||\n\t               (!expectedFrom &&\n\t                   (from === Strophe.getBareJidFromJid(fulljid) ||\n\t                    from === Strophe.getDomainFromJid(fulljid) ||\n\t                    from === fulljid))) {\n\t                acceptable = true;\n\t            }\n\t\n\t            if (!acceptable) {\n\t                throw {\n\t                    name: \"StropheError\",\n\t                    message: \"Got answer to IQ from wrong jid:\" + from +\n\t                             \"\\nExpected jid: \" + expectedFrom\n\t                };\n\t            }\n\t\n\t            var iqtype = stanza.getAttribute('type');\n\t            if (iqtype == 'result') {\n\t                if (callback) {\n\t                    callback(stanza);\n\t                }\n\t            } else if (iqtype == 'error') {\n\t                if (errback) {\n\t                    errback(stanza);\n\t                }\n\t            } else {\n\t                throw {\n\t                    name: \"StropheError\",\n\t                    message: \"Got bad IQ type of \" + iqtype\n\t                };\n\t            }\n\t        }, null, 'iq', ['error', 'result'], id);\n\t\n\t        // if timeout specified, setup timeout handler.\n\t        if (timeout) {\n\t            timeoutHandler = this.addTimedHandler(timeout, function () {\n\t                // get rid of normal handler\n\t                that.deleteHandler(handler);\n\t                // call errback on timeout with null stanza\n\t                if (errback) {\n\t                    errback(null);\n\t                }\n\t                return false;\n\t            });\n\t        }\n\t        this.send(elem);\n\t        return id;\n\t    },\n\t\n\t    /** PrivateFunction: _queueData\n\t     *  Queue outgoing data for later sending.  Also ensures that the data\n\t     *  is a DOMElement.\n\t     */\n\t    _queueData: function (element) {\n\t        if (element === null ||\n\t            !element.tagName ||\n\t            !element.childNodes) {\n\t            throw {\n\t                name: \"StropheError\",\n\t                message: \"Cannot queue non-DOMElement.\"\n\t            };\n\t        }\n\t\n\t        this._data.push(element);\n\t    },\n\t\n\t    /** PrivateFunction: _sendRestart\n\t     *  Send an xmpp:restart stanza.\n\t     */\n\t    _sendRestart: function ()\n\t    {\n\t        this._data.push(\"restart\");\n\t\n\t        this._proto._sendRestart();\n\t\n\t        this._idleTimeout = setTimeout(this._onIdle.bind(this), 100);\n\t    },\n\t\n\t    /** Function: addTimedHandler\n\t     *  Add a timed handler to the connection.\n\t     *\n\t     *  This function adds a timed handler.  The provided handler will\n\t     *  be called every period milliseconds until it returns false,\n\t     *  the connection is terminated, or the handler is removed.  Handlers\n\t     *  that wish to continue being invoked should return true.\n\t     *\n\t     *  Because of method binding it is necessary to save the result of\n\t     *  this function if you wish to remove a handler with\n\t     *  deleteTimedHandler().\n\t     *\n\t     *  Note that user handlers are not active until authentication is\n\t     *  successful.\n\t     *\n\t     *  Parameters:\n\t     *    (Integer) period - The period of the handler.\n\t     *    (Function) handler - The callback function.\n\t     *\n\t     *  Returns:\n\t     *    A reference to the handler that can be used to remove it.\n\t     */\n\t    addTimedHandler: function (period, handler)\n\t    {\n\t        var thand = new Strophe.TimedHandler(period, handler);\n\t        this.addTimeds.push(thand);\n\t        return thand;\n\t    },\n\t\n\t    /** Function: deleteTimedHandler\n\t     *  Delete a timed handler for a connection.\n\t     *\n\t     *  This function removes a timed handler from the connection.  The\n\t     *  handRef parameter is *not* the function passed to addTimedHandler(),\n\t     *  but is the reference returned from addTimedHandler().\n\t     *\n\t     *  Parameters:\n\t     *    (Strophe.TimedHandler) handRef - The handler reference.\n\t     */\n\t    deleteTimedHandler: function (handRef)\n\t    {\n\t        // this must be done in the Idle loop so that we don't change\n\t        // the handlers during iteration\n\t        this.removeTimeds.push(handRef);\n\t    },\n\t\n\t    /** Function: addHandler\n\t     *  Add a stanza handler for the connection.\n\t     *\n\t     *  This function adds a stanza handler to the connection.  The\n\t     *  handler callback will be called for any stanza that matches\n\t     *  the parameters.  Note that if multiple parameters are supplied,\n\t     *  they must all match for the handler to be invoked.\n\t     *\n\t     *  The handler will receive the stanza that triggered it as its argument.\n\t     *  *The handler should return true if it is to be invoked again;\n\t     *  returning false will remove the handler after it returns.*\n\t     *\n\t     *  As a convenience, the ns parameters applies to the top level element\n\t     *  and also any of its immediate children.  This is primarily to make\n\t     *  matching /iq/query elements easy.\n\t     *\n\t     *  The options argument contains handler matching flags that affect how\n\t     *  matches are determined. Currently the only flag is matchBare (a\n\t     *  boolean). When matchBare is true, the from parameter and the from\n\t     *  attribute on the stanza will be matched as bare JIDs instead of\n\t     *  full JIDs. To use this, pass {matchBare: true} as the value of\n\t     *  options. The default value for matchBare is false.\n\t     *\n\t     *  The return value should be saved if you wish to remove the handler\n\t     *  with deleteHandler().\n\t     *\n\t     *  Parameters:\n\t     *    (Function) handler - The user callback.\n\t     *    (String) ns - The namespace to match.\n\t     *    (String) name - The stanza name to match.\n\t     *    (String) type - The stanza type attribute to match.\n\t     *    (String) id - The stanza id attribute to match.\n\t     *    (String) from - The stanza from attribute to match.\n\t     *    (String) options - The handler options\n\t     *\n\t     *  Returns:\n\t     *    A reference to the handler that can be used to remove it.\n\t     */\n\t    addHandler: function (handler, ns, name, type, id, from, options)\n\t    {\n\t        var hand = new Strophe.Handler(handler, ns, name, type, id, from, options);\n\t        this.addHandlers.push(hand);\n\t        return hand;\n\t    },\n\t\n\t    /** Function: deleteHandler\n\t     *  Delete a stanza handler for a connection.\n\t     *\n\t     *  This function removes a stanza handler from the connection.  The\n\t     *  handRef parameter is *not* the function passed to addHandler(),\n\t     *  but is the reference returned from addHandler().\n\t     *\n\t     *  Parameters:\n\t     *    (Strophe.Handler) handRef - The handler reference.\n\t     */\n\t    deleteHandler: function (handRef)\n\t    {\n\t        // this must be done in the Idle loop so that we don't change\n\t        // the handlers during iteration\n\t        this.removeHandlers.push(handRef);\n\t        // If a handler is being deleted while it is being added,\n\t        // prevent it from getting added\n\t        var i = this.addHandlers.indexOf(handRef);\n\t        if (i >= 0) {\n\t            this.addHandlers.splice(i, 1);\n\t        }\n\t    },\n\t\n\t    /** Function: disconnect\n\t     *  Start the graceful disconnection process.\n\t     *\n\t     *  This function starts the disconnection process.  This process starts\n\t     *  by sending unavailable presence and sending BOSH body of type\n\t     *  terminate.  A timeout handler makes sure that disconnection happens\n\t     *  even if the BOSH server does not respond.\n\t     *  If the Connection object isn't connected, at least tries to abort all pending requests\n\t     *  so the connection object won't generate successful requests (which were already opened).\n\t     *\n\t     *  The user supplied connection callback will be notified of the\n\t     *  progress as this process happens.\n\t     *\n\t     *  Parameters:\n\t     *    (String) reason - The reason the disconnect is occuring.\n\t     */\n\t    disconnect: function (reason)\n\t    {\n\t        this._changeConnectStatus(Strophe.Status.DISCONNECTING, reason);\n\t\n\t        Strophe.info(\"Disconnect was called because: \" + reason);\n\t        if (this.connected) {\n\t            var pres = false;\n\t            this.disconnecting = true;\n\t            if (this.authenticated) {\n\t                pres = $pres({\n\t                    xmlns: Strophe.NS.CLIENT,\n\t                    type: 'unavailable'\n\t                });\n\t            }\n\t            // setup timeout handler\n\t            this._disconnectTimeout = this._addSysTimedHandler(\n\t                3000, this._onDisconnectTimeout.bind(this));\n\t            this._proto._disconnect(pres);\n\t        } else {\n\t            Strophe.info(\"Disconnect was called before Strophe connected to the server\");\n\t            this._proto._abortAllRequests();\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _changeConnectStatus\n\t     *  _Private_ helper function that makes sure plugins and the user's\n\t     *  callback are notified of connection status changes.\n\t     *\n\t     *  Parameters:\n\t     *    (Integer) status - the new connection status, one of the values\n\t     *      in Strophe.Status\n\t     *    (String) condition - the error condition or null\n\t     */\n\t    _changeConnectStatus: function (status, condition)\n\t    {\n\t        // notify all plugins listening for status changes\n\t        for (var k in Strophe._connectionPlugins) {\n\t            if (Strophe._connectionPlugins.hasOwnProperty(k)) {\n\t                var plugin = this[k];\n\t                if (plugin.statusChanged) {\n\t                    try {\n\t                        plugin.statusChanged(status, condition);\n\t                    } catch (err) {\n\t                        Strophe.error(\"\" + k + \" plugin caused an exception \" +\n\t                                      \"changing status: \" + err);\n\t                    }\n\t                }\n\t            }\n\t        }\n\t\n\t        // notify the user's callback\n\t        if (this.connect_callback) {\n\t            try {\n\t                this.connect_callback(status, condition);\n\t            } catch (e) {\n\t                Strophe.error(\"User connection callback caused an \" +\n\t                              \"exception: \" + e);\n\t            }\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _doDisconnect\n\t     *  _Private_ function to disconnect.\n\t     *\n\t     *  This is the last piece of the disconnection logic.  This resets the\n\t     *  connection and alerts the user's connection callback.\n\t     */\n\t    _doDisconnect: function (condition)\n\t    {\n\t        if (typeof this._idleTimeout == \"number\") {\n\t            clearTimeout(this._idleTimeout);\n\t        }\n\t\n\t        // Cancel Disconnect Timeout\n\t        if (this._disconnectTimeout !== null) {\n\t            this.deleteTimedHandler(this._disconnectTimeout);\n\t            this._disconnectTimeout = null;\n\t        }\n\t\n\t        Strophe.info(\"_doDisconnect was called\");\n\t        this._proto._doDisconnect();\n\t\n\t        this.authenticated = false;\n\t        this.disconnecting = false;\n\t        this.restored = false;\n\t\n\t        // delete handlers\n\t        this.handlers = [];\n\t        this.timedHandlers = [];\n\t        this.removeTimeds = [];\n\t        this.removeHandlers = [];\n\t        this.addTimeds = [];\n\t        this.addHandlers = [];\n\t\n\t        // tell the parent we disconnected\n\t        this._changeConnectStatus(Strophe.Status.DISCONNECTED, condition);\n\t        this.connected = false;\n\t    },\n\t\n\t    /** PrivateFunction: _dataRecv\n\t     *  _Private_ handler to processes incoming data from the the connection.\n\t     *\n\t     *  Except for _connect_cb handling the initial connection request,\n\t     *  this function handles the incoming data for all requests.  This\n\t     *  function also fires stanza handlers that match each incoming\n\t     *  stanza.\n\t     *\n\t     *  Parameters:\n\t     *    (Strophe.Request) req - The request that has data ready.\n\t     *    (string) req - The stanza a raw string (optiona).\n\t     */\n\t    _dataRecv: function (req, raw)\n\t    {\n\t        Strophe.info(\"_dataRecv called\");\n\t        var elem = this._proto._reqToData(req);\n\t        if (elem === null) { return; }\n\t\n\t        if (this.xmlInput !== Strophe.Connection.prototype.xmlInput) {\n\t            if (elem.nodeName === this._proto.strip && elem.childNodes.length) {\n\t                this.xmlInput(elem.childNodes[0]);\n\t            } else {\n\t                this.xmlInput(elem);\n\t            }\n\t        }\n\t        if (this.rawInput !== Strophe.Connection.prototype.rawInput) {\n\t            if (raw) {\n\t                this.rawInput(raw);\n\t            } else {\n\t                this.rawInput(Strophe.serialize(elem));\n\t            }\n\t        }\n\t\n\t        // remove handlers scheduled for deletion\n\t        var i, hand;\n\t        while (this.removeHandlers.length > 0) {\n\t            hand = this.removeHandlers.pop();\n\t            i = this.handlers.indexOf(hand);\n\t            if (i >= 0) {\n\t                this.handlers.splice(i, 1);\n\t            }\n\t        }\n\t\n\t        // add handlers scheduled for addition\n\t        while (this.addHandlers.length > 0) {\n\t            this.handlers.push(this.addHandlers.pop());\n\t        }\n\t\n\t        // handle graceful disconnect\n\t        if (this.disconnecting && this._proto._emptyQueue()) {\n\t            this._doDisconnect();\n\t            return;\n\t        }\n\t\n\t        var type = elem.getAttribute(\"type\");\n\t        var cond, conflict;\n\t        if (type !== null && type == \"terminate\") {\n\t            // Don't process stanzas that come in after disconnect\n\t            if (this.disconnecting) {\n\t                return;\n\t            }\n\t\n\t            // an error occurred\n\t            cond = elem.getAttribute(\"condition\");\n\t            conflict = elem.getElementsByTagName(\"conflict\");\n\t            if (cond !== null) {\n\t                if (cond == \"remote-stream-error\" && conflict.length > 0) {\n\t                    cond = \"conflict\";\n\t                }\n\t                this._changeConnectStatus(Strophe.Status.CONNFAIL, cond);\n\t            } else {\n\t                this._changeConnectStatus(Strophe.Status.CONNFAIL, \"unknown\");\n\t            }\n\t            this._doDisconnect(cond);\n\t            return;\n\t        }\n\t\n\t        // send each incoming stanza through the handler chain\n\t        var that = this;\n\t        Strophe.forEachChild(elem, null, function (child) {\n\t            var i, newList;\n\t            // process handlers\n\t            newList = that.handlers;\n\t            that.handlers = [];\n\t            for (i = 0; i < newList.length; i++) {\n\t                var hand = newList[i];\n\t                // encapsulate 'handler.run' not to lose the whole handler list if\n\t                // one of the handlers throws an exception\n\t                try {\n\t                    if (hand.isMatch(child) &&\n\t                        (that.authenticated || !hand.user)) {\n\t                        if (hand.run(child)) {\n\t                            that.handlers.push(hand);\n\t                        }\n\t                    } else {\n\t                        that.handlers.push(hand);\n\t                    }\n\t                } catch(e) {\n\t                    // if the handler throws an exception, we consider it as false\n\t                    Strophe.warn('Removing Strophe handlers due to uncaught exception: ' + e.message);\n\t                }\n\t            }\n\t        });\n\t    },\n\t\n\t\n\t    /** Attribute: mechanisms\n\t     *  SASL Mechanisms available for Conncection.\n\t     */\n\t    mechanisms: {},\n\t\n\t    /** PrivateFunction: _connect_cb\n\t     *  _Private_ handler for initial connection request.\n\t     *\n\t     *  This handler is used to process the initial connection request\n\t     *  response from the BOSH server. It is used to set up authentication\n\t     *  handlers and start the authentication process.\n\t     *\n\t     *  SASL authentication will be attempted if available, otherwise\n\t     *  the code will fall back to legacy authentication.\n\t     *\n\t     *  Parameters:\n\t     *    (Strophe.Request) req - The current request.\n\t     *    (Function) _callback - low level (xmpp) connect callback function.\n\t     *      Useful for plugins with their own xmpp connect callback (when their)\n\t     *      want to do something special).\n\t     */\n\t    _connect_cb: function (req, _callback, raw)\n\t    {\n\t        Strophe.info(\"_connect_cb was called\");\n\t\n\t        this.connected = true;\n\t\n\t        var bodyWrap;\n\t        try {\n\t            bodyWrap = this._proto._reqToData(req);\n\t        } catch (e) {\n\t            if (e != \"badformat\") { throw e; }\n\t            this._changeConnectStatus(Strophe.Status.CONNFAIL, 'bad-format');\n\t            this._doDisconnect('bad-format');\n\t        }\n\t        if (!bodyWrap) { return; }\n\t\n\t        if (this.xmlInput !== Strophe.Connection.prototype.xmlInput) {\n\t            if (bodyWrap.nodeName === this._proto.strip && bodyWrap.childNodes.length) {\n\t                this.xmlInput(bodyWrap.childNodes[0]);\n\t            } else {\n\t                this.xmlInput(bodyWrap);\n\t            }\n\t        }\n\t        if (this.rawInput !== Strophe.Connection.prototype.rawInput) {\n\t            if (raw) {\n\t                this.rawInput(raw);\n\t            } else {\n\t                this.rawInput(Strophe.serialize(bodyWrap));\n\t            }\n\t        }\n\t\n\t        var conncheck = this._proto._connect_cb(bodyWrap);\n\t        if (conncheck === Strophe.Status.CONNFAIL) {\n\t            return;\n\t        }\n\t\n\t        this._authentication.sasl_scram_sha1 = false;\n\t        this._authentication.sasl_plain = false;\n\t        this._authentication.sasl_digest_md5 = false;\n\t        this._authentication.sasl_anonymous = false;\n\t\n\t        this._authentication.legacy_auth = false;\n\t\n\t        // Check for the stream:features tag\n\t        var hasFeatures;\n\t        if (bodyWrap.getElementsByTagNameNS) {\n\t            hasFeatures = bodyWrap.getElementsByTagNameNS(Strophe.NS.STREAM, \"features\").length > 0;\n\t        } else {\n\t            hasFeatures = bodyWrap.getElementsByTagName(\"stream:features\").length > 0 || bodyWrap.getElementsByTagName(\"features\").length > 0;\n\t        }\n\t        var mechanisms = bodyWrap.getElementsByTagName(\"mechanism\");\n\t        var matched = [];\n\t        var i, mech, found_authentication = false;\n\t        if (!hasFeatures) {\n\t            this._proto._no_auth_received(_callback);\n\t            return;\n\t        }\n\t        if (mechanisms.length > 0) {\n\t            for (i = 0; i < mechanisms.length; i++) {\n\t                mech = Strophe.getText(mechanisms[i]);\n\t                if (this.mechanisms[mech]) matched.push(this.mechanisms[mech]);\n\t            }\n\t        }\n\t        this._authentication.legacy_auth =\n\t            bodyWrap.getElementsByTagName(\"auth\").length > 0;\n\t        found_authentication = this._authentication.legacy_auth ||\n\t            matched.length > 0;\n\t        if (!found_authentication) {\n\t            this._proto._no_auth_received(_callback);\n\t            return;\n\t        }\n\t        if (this.do_authentication !== false)\n\t            this.authenticate(matched);\n\t    },\n\t\n\t    /** Function: authenticate\n\t     * Set up authentication\n\t     *\n\t     *  Contiunues the initial connection request by setting up authentication\n\t     *  handlers and start the authentication process.\n\t     *\n\t     *  SASL authentication will be attempted if available, otherwise\n\t     *  the code will fall back to legacy authentication.\n\t     *\n\t     */\n\t    authenticate: function (matched)\n\t    {\n\t      var i;\n\t      // Sorting matched mechanisms according to priority.\n\t      for (i = 0; i < matched.length - 1; ++i) {\n\t        var higher = i;\n\t        for (var j = i + 1; j < matched.length; ++j) {\n\t          if (matched[j].prototype.priority > matched[higher].prototype.priority) {\n\t            higher = j;\n\t          }\n\t        }\n\t        if (higher != i) {\n\t          var swap = matched[i];\n\t          matched[i] = matched[higher];\n\t          matched[higher] = swap;\n\t        }\n\t      }\n\t\n\t      // run each mechanism\n\t      var mechanism_found = false;\n\t      for (i = 0; i < matched.length; ++i) {\n\t        if (!matched[i].test(this)) continue;\n\t\n\t        this._sasl_success_handler = this._addSysHandler(\n\t          this._sasl_success_cb.bind(this), null,\n\t          \"success\", null, null);\n\t        this._sasl_failure_handler = this._addSysHandler(\n\t          this._sasl_failure_cb.bind(this), null,\n\t          \"failure\", null, null);\n\t        this._sasl_challenge_handler = this._addSysHandler(\n\t          this._sasl_challenge_cb.bind(this), null,\n\t          \"challenge\", null, null);\n\t\n\t        this._sasl_mechanism = new matched[i]();\n\t        this._sasl_mechanism.onStart(this);\n\t\n\t        var request_auth_exchange = $build(\"auth\", {\n\t          xmlns: Strophe.NS.SASL,\n\t          mechanism: this._sasl_mechanism.name\n\t        });\n\t\n\t        if (this._sasl_mechanism.isClientFirst) {\n\t          var response = this._sasl_mechanism.onChallenge(this, null);\n\t          request_auth_exchange.t(Base64.encode(response));\n\t        }\n\t\n\t        this.send(request_auth_exchange.tree());\n\t\n\t        mechanism_found = true;\n\t        break;\n\t      }\n\t\n\t      if (!mechanism_found) {\n\t        // if none of the mechanism worked\n\t        if (Strophe.getNodeFromJid(this.jid) === null) {\n\t            // we don't have a node, which is required for non-anonymous\n\t            // client connections\n\t            this._changeConnectStatus(Strophe.Status.CONNFAIL,\n\t                                      'x-strophe-bad-non-anon-jid');\n\t            this.disconnect('x-strophe-bad-non-anon-jid');\n\t        } else {\n\t          // fall back to legacy authentication\n\t          this._changeConnectStatus(Strophe.Status.AUTHENTICATING, null);\n\t          this._addSysHandler(this._auth1_cb.bind(this), null, null,\n\t                              null, \"_auth_1\");\n\t\n\t          this.send($iq({\n\t            type: \"get\",\n\t            to: this.domain,\n\t            id: \"_auth_1\"\n\t          }).c(\"query\", {\n\t            xmlns: Strophe.NS.AUTH\n\t          }).c(\"username\", {}).t(Strophe.getNodeFromJid(this.jid)).tree());\n\t        }\n\t      }\n\t\n\t    },\n\t\n\t    _sasl_challenge_cb: function(elem) {\n\t      var challenge = Base64.decode(Strophe.getText(elem));\n\t      var response = this._sasl_mechanism.onChallenge(this, challenge);\n\t\n\t      var stanza = $build('response', {\n\t          xmlns: Strophe.NS.SASL\n\t      });\n\t      if (response !== \"\") {\n\t        stanza.t(Base64.encode(response));\n\t      }\n\t      this.send(stanza.tree());\n\t      return true;\n\t    },\n\t\n\t    /** PrivateFunction: _auth1_cb\n\t     *  _Private_ handler for legacy authentication.\n\t     *\n\t     *  This handler is called in response to the initial <iq type='get'/>\n\t     *  for legacy authentication.  It builds an authentication <iq/> and\n\t     *  sends it, creating a handler (calling back to _auth2_cb()) to\n\t     *  handle the result\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The stanza that triggered the callback.\n\t     *\n\t     *  Returns:\n\t     *    false to remove the handler.\n\t     */\n\t    /* jshint unused:false */\n\t    _auth1_cb: function (elem)\n\t    {\n\t        // build plaintext auth iq\n\t        var iq = $iq({type: \"set\", id: \"_auth_2\"})\n\t            .c('query', {xmlns: Strophe.NS.AUTH})\n\t            .c('username', {}).t(Strophe.getNodeFromJid(this.jid))\n\t            .up()\n\t            .c('password').t(this.pass);\n\t\n\t        if (!Strophe.getResourceFromJid(this.jid)) {\n\t            // since the user has not supplied a resource, we pick\n\t            // a default one here.  unlike other auth methods, the server\n\t            // cannot do this for us.\n\t            this.jid = Strophe.getBareJidFromJid(this.jid) + '/strophe';\n\t        }\n\t        iq.up().c('resource', {}).t(Strophe.getResourceFromJid(this.jid));\n\t\n\t        this._addSysHandler(this._auth2_cb.bind(this), null,\n\t                            null, null, \"_auth_2\");\n\t\n\t        this.send(iq.tree());\n\t\n\t        return false;\n\t    },\n\t    /* jshint unused:true */\n\t\n\t    /** PrivateFunction: _sasl_success_cb\n\t     *  _Private_ handler for succesful SASL authentication.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The matching stanza.\n\t     *\n\t     *  Returns:\n\t     *    false to remove the handler.\n\t     */\n\t    _sasl_success_cb: function (elem)\n\t    {\n\t        if (this._sasl_data[\"server-signature\"]) {\n\t            var serverSignature;\n\t            var success = Base64.decode(Strophe.getText(elem));\n\t            var attribMatch = /([a-z]+)=([^,]+)(,|$)/;\n\t            var matches = success.match(attribMatch);\n\t            if (matches[1] == \"v\") {\n\t                serverSignature = matches[2];\n\t            }\n\t\n\t            if (serverSignature != this._sasl_data[\"server-signature\"]) {\n\t              // remove old handlers\n\t              this.deleteHandler(this._sasl_failure_handler);\n\t              this._sasl_failure_handler = null;\n\t              if (this._sasl_challenge_handler) {\n\t                this.deleteHandler(this._sasl_challenge_handler);\n\t                this._sasl_challenge_handler = null;\n\t              }\n\t\n\t              this._sasl_data = {};\n\t              return this._sasl_failure_cb(null);\n\t            }\n\t        }\n\t\n\t        Strophe.info(\"SASL authentication succeeded.\");\n\t\n\t        if(this._sasl_mechanism)\n\t          this._sasl_mechanism.onSuccess();\n\t\n\t        // remove old handlers\n\t        this.deleteHandler(this._sasl_failure_handler);\n\t        this._sasl_failure_handler = null;\n\t        if (this._sasl_challenge_handler) {\n\t            this.deleteHandler(this._sasl_challenge_handler);\n\t            this._sasl_challenge_handler = null;\n\t        }\n\t\n\t        var streamfeature_handlers = [];\n\t        var wrapper = function(handlers, elem) {\n\t            while (handlers.length) {\n\t                this.deleteHandler(handlers.pop());\n\t            }\n\t            this._sasl_auth1_cb.bind(this)(elem);\n\t            return false;\n\t        };\n\t        streamfeature_handlers.push(this._addSysHandler(function(elem) {\n\t            wrapper.bind(this)(streamfeature_handlers, elem);\n\t        }.bind(this), null, \"stream:features\", null, null));\n\t        streamfeature_handlers.push(this._addSysHandler(function(elem) {\n\t            wrapper.bind(this)(streamfeature_handlers, elem);\n\t        }.bind(this), Strophe.NS.STREAM, \"features\", null, null));\n\t\n\t        // we must send an xmpp:restart now\n\t        this._sendRestart();\n\t\n\t        return false;\n\t    },\n\t\n\t    /** PrivateFunction: _sasl_auth1_cb\n\t     *  _Private_ handler to start stream binding.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The matching stanza.\n\t     *\n\t     *  Returns:\n\t     *    false to remove the handler.\n\t     */\n\t    _sasl_auth1_cb: function (elem)\n\t    {\n\t        // save stream:features for future usage\n\t        this.features = elem;\n\t\n\t        var i, child;\n\t\n\t        for (i = 0; i < elem.childNodes.length; i++) {\n\t            child = elem.childNodes[i];\n\t            if (child.nodeName == 'bind') {\n\t                this.do_bind = true;\n\t            }\n\t\n\t            if (child.nodeName == 'session') {\n\t                this.do_session = true;\n\t            }\n\t        }\n\t\n\t        if (!this.do_bind) {\n\t            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n\t            return false;\n\t        } else {\n\t            this._addSysHandler(this._sasl_bind_cb.bind(this), null, null,\n\t                                null, \"_bind_auth_2\");\n\t\n\t            var resource = Strophe.getResourceFromJid(this.jid);\n\t            if (resource) {\n\t                this.send($iq({type: \"set\", id: \"_bind_auth_2\"})\n\t                          .c('bind', {xmlns: Strophe.NS.BIND})\n\t                          .c('resource', {}).t(resource).tree());\n\t            } else {\n\t                this.send($iq({type: \"set\", id: \"_bind_auth_2\"})\n\t                          .c('bind', {xmlns: Strophe.NS.BIND})\n\t                          .tree());\n\t            }\n\t        }\n\t\n\t        return false;\n\t    },\n\t\n\t    /** PrivateFunction: _sasl_bind_cb\n\t     *  _Private_ handler for binding result and session start.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The matching stanza.\n\t     *\n\t     *  Returns:\n\t     *    false to remove the handler.\n\t     */\n\t    _sasl_bind_cb: function (elem)\n\t    {\n\t        if (elem.getAttribute(\"type\") == \"error\") {\n\t            Strophe.info(\"SASL binding failed.\");\n\t            var conflict = elem.getElementsByTagName(\"conflict\"), condition;\n\t            if (conflict.length > 0) {\n\t                condition = 'conflict';\n\t            }\n\t            this._changeConnectStatus(Strophe.Status.AUTHFAIL, condition);\n\t            return false;\n\t        }\n\t\n\t        // TODO - need to grab errors\n\t        var bind = elem.getElementsByTagName(\"bind\");\n\t        var jidNode;\n\t        if (bind.length > 0) {\n\t            // Grab jid\n\t            jidNode = bind[0].getElementsByTagName(\"jid\");\n\t            if (jidNode.length > 0) {\n\t                this.jid = Strophe.getText(jidNode[0]);\n\t\n\t                if (this.do_session) {\n\t                    this._addSysHandler(this._sasl_session_cb.bind(this),\n\t                                        null, null, null, \"_session_auth_2\");\n\t\n\t                    this.send($iq({type: \"set\", id: \"_session_auth_2\"})\n\t                                  .c('session', {xmlns: Strophe.NS.SESSION})\n\t                                  .tree());\n\t                } else {\n\t                    this.authenticated = true;\n\t                    this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n\t                }\n\t            }\n\t        } else {\n\t            Strophe.info(\"SASL binding failed.\");\n\t            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n\t            return false;\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _sasl_session_cb\n\t     *  _Private_ handler to finish successful SASL connection.\n\t     *\n\t     *  This sets Connection.authenticated to true on success, which\n\t     *  starts the processing of user handlers.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The matching stanza.\n\t     *\n\t     *  Returns:\n\t     *    false to remove the handler.\n\t     */\n\t    _sasl_session_cb: function (elem)\n\t    {\n\t        if (elem.getAttribute(\"type\") == \"result\") {\n\t            this.authenticated = true;\n\t            this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n\t        } else if (elem.getAttribute(\"type\") == \"error\") {\n\t            Strophe.info(\"Session creation failed.\");\n\t            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n\t            return false;\n\t        }\n\t\n\t        return false;\n\t    },\n\t\n\t    /** PrivateFunction: _sasl_failure_cb\n\t     *  _Private_ handler for SASL authentication failure.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The matching stanza.\n\t     *\n\t     *  Returns:\n\t     *    false to remove the handler.\n\t     */\n\t    /* jshint unused:false */\n\t    _sasl_failure_cb: function (elem)\n\t    {\n\t        // delete unneeded handlers\n\t        if (this._sasl_success_handler) {\n\t            this.deleteHandler(this._sasl_success_handler);\n\t            this._sasl_success_handler = null;\n\t        }\n\t        if (this._sasl_challenge_handler) {\n\t            this.deleteHandler(this._sasl_challenge_handler);\n\t            this._sasl_challenge_handler = null;\n\t        }\n\t\n\t        if(this._sasl_mechanism)\n\t          this._sasl_mechanism.onFailure();\n\t        this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n\t        return false;\n\t    },\n\t    /* jshint unused:true */\n\t\n\t    /** PrivateFunction: _auth2_cb\n\t     *  _Private_ handler to finish legacy authentication.\n\t     *\n\t     *  This handler is called when the result from the jabber:iq:auth\n\t     *  <iq/> stanza is returned.\n\t     *\n\t     *  Parameters:\n\t     *    (XMLElement) elem - The stanza that triggered the callback.\n\t     *\n\t     *  Returns:\n\t     *    false to remove the handler.\n\t     */\n\t    _auth2_cb: function (elem)\n\t    {\n\t        if (elem.getAttribute(\"type\") == \"result\") {\n\t            this.authenticated = true;\n\t            this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n\t        } else if (elem.getAttribute(\"type\") == \"error\") {\n\t            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n\t            this.disconnect('authentication failed');\n\t        }\n\t\n\t        return false;\n\t    },\n\t\n\t    /** PrivateFunction: _addSysTimedHandler\n\t     *  _Private_ function to add a system level timed handler.\n\t     *\n\t     *  This function is used to add a Strophe.TimedHandler for the\n\t     *  library code.  System timed handlers are allowed to run before\n\t     *  authentication is complete.\n\t     *\n\t     *  Parameters:\n\t     *    (Integer) period - The period of the handler.\n\t     *    (Function) handler - The callback function.\n\t     */\n\t    _addSysTimedHandler: function (period, handler)\n\t    {\n\t        var thand = new Strophe.TimedHandler(period, handler);\n\t        thand.user = false;\n\t        this.addTimeds.push(thand);\n\t        return thand;\n\t    },\n\t\n\t    /** PrivateFunction: _addSysHandler\n\t     *  _Private_ function to add a system level stanza handler.\n\t     *\n\t     *  This function is used to add a Strophe.Handler for the\n\t     *  library code.  System stanza handlers are allowed to run before\n\t     *  authentication is complete.\n\t     *\n\t     *  Parameters:\n\t     *    (Function) handler - The callback function.\n\t     *    (String) ns - The namespace to match.\n\t     *    (String) name - The stanza name to match.\n\t     *    (String) type - The stanza type attribute to match.\n\t     *    (String) id - The stanza id attribute to match.\n\t     */\n\t    _addSysHandler: function (handler, ns, name, type, id)\n\t    {\n\t        var hand = new Strophe.Handler(handler, ns, name, type, id);\n\t        hand.user = false;\n\t        this.addHandlers.push(hand);\n\t        return hand;\n\t    },\n\t\n\t    /** PrivateFunction: _onDisconnectTimeout\n\t     *  _Private_ timeout handler for handling non-graceful disconnection.\n\t     *\n\t     *  If the graceful disconnect process does not complete within the\n\t     *  time allotted, this handler finishes the disconnect anyway.\n\t     *\n\t     *  Returns:\n\t     *    false to remove the handler.\n\t     */\n\t    _onDisconnectTimeout: function ()\n\t    {\n\t        Strophe.info(\"_onDisconnectTimeout was called\");\n\t\n\t        this._proto._onDisconnectTimeout();\n\t\n\t        // actually disconnect\n\t        this._doDisconnect();\n\t\n\t        return false;\n\t    },\n\t\n\t    /** PrivateFunction: _onIdle\n\t     *  _Private_ handler to process events during idle cycle.\n\t     *\n\t     *  This handler is called every 100ms to fire timed handlers that\n\t     *  are ready and keep poll requests going.\n\t     */\n\t    _onIdle: function ()\n\t    {\n\t        var i, thand, since, newList;\n\t\n\t        // add timed handlers scheduled for addition\n\t        // NOTE: we add before remove in the case a timed handler is\n\t        // added and then deleted before the next _onIdle() call.\n\t        while (this.addTimeds.length > 0) {\n\t            this.timedHandlers.push(this.addTimeds.pop());\n\t        }\n\t\n\t        // remove timed handlers that have been scheduled for deletion\n\t        while (this.removeTimeds.length > 0) {\n\t            thand = this.removeTimeds.pop();\n\t            i = this.timedHandlers.indexOf(thand);\n\t            if (i >= 0) {\n\t                this.timedHandlers.splice(i, 1);\n\t            }\n\t        }\n\t\n\t        // call ready timed handlers\n\t        var now = new Date().getTime();\n\t        newList = [];\n\t        for (i = 0; i < this.timedHandlers.length; i++) {\n\t            thand = this.timedHandlers[i];\n\t            if (this.authenticated || !thand.user) {\n\t                since = thand.lastCalled + thand.period;\n\t                if (since - now <= 0) {\n\t                    if (thand.run()) {\n\t                        newList.push(thand);\n\t                    }\n\t                } else {\n\t                    newList.push(thand);\n\t                }\n\t            }\n\t        }\n\t        this.timedHandlers = newList;\n\t\n\t        clearTimeout(this._idleTimeout);\n\t\n\t        this._proto._onIdle();\n\t\n\t        // reactivate the timer only if connected\n\t        if (this.connected) {\n\t            this._idleTimeout = setTimeout(this._onIdle.bind(this), 100);\n\t        }\n\t    }\n\t};\n\t\n\t/** Class: Strophe.SASLMechanism\n\t *\n\t *  encapsulates SASL authentication mechanisms.\n\t *\n\t *  User code may override the priority for each mechanism or disable it completely.\n\t *  See <priority> for information about changing priority and <test> for informatian on\n\t *  how to disable a mechanism.\n\t *\n\t *  By default, all mechanisms are enabled and the priorities are\n\t *\n\t *  SCRAM-SHA1 - 40\n\t *  DIGEST-MD5 - 30\n\t *  Plain - 20\n\t */\n\t\n\t/**\n\t * PrivateConstructor: Strophe.SASLMechanism\n\t * SASL auth mechanism abstraction.\n\t *\n\t *  Parameters:\n\t *    (String) name - SASL Mechanism name.\n\t *    (Boolean) isClientFirst - If client should send response first without challenge.\n\t *    (Number) priority - Priority.\n\t *\n\t *  Returns:\n\t *    A new Strophe.SASLMechanism object.\n\t */\n\tStrophe.SASLMechanism = function(name, isClientFirst, priority) {\n\t  /** PrivateVariable: name\n\t   *  Mechanism name.\n\t   */\n\t  this.name = name;\n\t  /** PrivateVariable: isClientFirst\n\t   *  If client sends response without initial server challenge.\n\t   */\n\t  this.isClientFirst = isClientFirst;\n\t  /** Variable: priority\n\t   *  Determines which <SASLMechanism> is chosen for authentication (Higher is better).\n\t   *  Users may override this to prioritize mechanisms differently.\n\t   *\n\t   *  In the default configuration the priorities are\n\t   *\n\t   *  SCRAM-SHA1 - 40\n\t   *  DIGEST-MD5 - 30\n\t   *  Plain - 20\n\t   *\n\t   *  Example: (This will cause Strophe to choose the mechanism that the server sent first)\n\t   *\n\t   *  > Strophe.SASLMD5.priority = Strophe.SASLSHA1.priority;\n\t   *\n\t   *  See <SASL mechanisms> for a list of available mechanisms.\n\t   *\n\t   */\n\t  this.priority = priority;\n\t};\n\t\n\tStrophe.SASLMechanism.prototype = {\n\t  /**\n\t   *  Function: test\n\t   *  Checks if mechanism able to run.\n\t   *  To disable a mechanism, make this return false;\n\t   *\n\t   *  To disable plain authentication run\n\t   *  > Strophe.SASLPlain.test = function() {\n\t   *  >   return false;\n\t   *  > }\n\t   *\n\t   *  See <SASL mechanisms> for a list of available mechanisms.\n\t   *\n\t   *  Parameters:\n\t   *    (Strophe.Connection) connection - Target Connection.\n\t   *\n\t   *  Returns:\n\t   *    (Boolean) If mechanism was able to run.\n\t   */\n\t  /* jshint unused:false */\n\t  test: function(connection) {\n\t    return true;\n\t  },\n\t  /* jshint unused:true */\n\t\n\t  /** PrivateFunction: onStart\n\t   *  Called before starting mechanism on some connection.\n\t   *\n\t   *  Parameters:\n\t   *    (Strophe.Connection) connection - Target Connection.\n\t   */\n\t  onStart: function(connection)\n\t  {\n\t    this._connection = connection;\n\t  },\n\t\n\t  /** PrivateFunction: onChallenge\n\t   *  Called by protocol implementation on incoming challenge. If client is\n\t   *  first (isClientFirst == true) challenge will be null on the first call.\n\t   *\n\t   *  Parameters:\n\t   *    (Strophe.Connection) connection - Target Connection.\n\t   *    (String) challenge - current challenge to handle.\n\t   *\n\t   *  Returns:\n\t   *    (String) Mechanism response.\n\t   */\n\t  /* jshint unused:false */\n\t  onChallenge: function(connection, challenge) {\n\t    throw new Error(\"You should implement challenge handling!\");\n\t  },\n\t  /* jshint unused:true */\n\t\n\t  /** PrivateFunction: onFailure\n\t   *  Protocol informs mechanism implementation about SASL failure.\n\t   */\n\t  onFailure: function() {\n\t    this._connection = null;\n\t  },\n\t\n\t  /** PrivateFunction: onSuccess\n\t   *  Protocol informs mechanism implementation about SASL success.\n\t   */\n\t  onSuccess: function() {\n\t    this._connection = null;\n\t  }\n\t};\n\t\n\t  /** Constants: SASL mechanisms\n\t   *  Available authentication mechanisms\n\t   *\n\t   *  Strophe.SASLAnonymous - SASL Anonymous authentication.\n\t   *  Strophe.SASLPlain - SASL Plain authentication.\n\t   *  Strophe.SASLMD5 - SASL Digest-MD5 authentication\n\t   *  Strophe.SASLSHA1 - SASL SCRAM-SHA1 authentication\n\t   */\n\t\n\t// Building SASL callbacks\n\t\n\t/** PrivateConstructor: SASLAnonymous\n\t *  SASL Anonymous authentication.\n\t */\n\tStrophe.SASLAnonymous = function() {};\n\t\n\tStrophe.SASLAnonymous.prototype = new Strophe.SASLMechanism(\"ANONYMOUS\", false, 10);\n\t\n\tStrophe.SASLAnonymous.test = function(connection) {\n\t  return connection.authcid === null;\n\t};\n\t\n\tStrophe.Connection.prototype.mechanisms[Strophe.SASLAnonymous.prototype.name] = Strophe.SASLAnonymous;\n\t\n\t/** PrivateConstructor: SASLPlain\n\t *  SASL Plain authentication.\n\t */\n\tStrophe.SASLPlain = function() {};\n\t\n\tStrophe.SASLPlain.prototype = new Strophe.SASLMechanism(\"PLAIN\", true, 20);\n\t\n\tStrophe.SASLPlain.test = function(connection) {\n\t  return connection.authcid !== null;\n\t};\n\t\n\tStrophe.SASLPlain.prototype.onChallenge = function(connection) {\n\t  var auth_str = connection.authzid;\n\t  auth_str = auth_str + \"\\u0000\";\n\t  auth_str = auth_str + connection.authcid;\n\t  auth_str = auth_str + \"\\u0000\";\n\t  auth_str = auth_str + connection.pass;\n\t  return utils.utf16to8(auth_str);\n\t};\n\t\n\tStrophe.Connection.prototype.mechanisms[Strophe.SASLPlain.prototype.name] = Strophe.SASLPlain;\n\t\n\t/** PrivateConstructor: SASLSHA1\n\t *  SASL SCRAM SHA 1 authentication.\n\t */\n\tStrophe.SASLSHA1 = function() {};\n\t\n\tStrophe.SASLSHA1.prototype = new Strophe.SASLMechanism(\"SCRAM-SHA-1\", true, 40);\n\t\n\tStrophe.SASLSHA1.test = function(connection) {\n\t    return connection.authcid !== null;\n\t};\n\t\n\tStrophe.SASLSHA1.prototype.onChallenge = function(connection, challenge, test_cnonce) {\n\t  var cnonce = test_cnonce || MD5.hexdigest(Math.random() * 1234567890);\n\t  var auth_str = \"n=\" + utils.utf16to8(connection.authcid);\n\t  auth_str += \",r=\";\n\t  auth_str += cnonce;\n\t\n\t  connection._sasl_data.cnonce = cnonce;\n\t  connection._sasl_data[\"client-first-message-bare\"] = auth_str;\n\t\n\t  auth_str = \"n,,\" + auth_str;\n\t\n\t  this.onChallenge = function (connection, challenge) {\n\t    var nonce, salt, iter, Hi, U, U_old, i, k, pass;\n\t    var clientKey, serverKey, clientSignature;\n\t    var responseText = \"c=biws,\";\n\t    var authMessage = connection._sasl_data[\"client-first-message-bare\"] + \",\" +\n\t      challenge + \",\";\n\t    var cnonce = connection._sasl_data.cnonce;\n\t    var attribMatch = /([a-z]+)=([^,]+)(,|$)/;\n\t\n\t    while (challenge.match(attribMatch)) {\n\t      var matches = challenge.match(attribMatch);\n\t      challenge = challenge.replace(matches[0], \"\");\n\t      switch (matches[1]) {\n\t      case \"r\":\n\t        nonce = matches[2];\n\t        break;\n\t      case \"s\":\n\t        salt = matches[2];\n\t        break;\n\t      case \"i\":\n\t        iter = matches[2];\n\t        break;\n\t      }\n\t    }\n\t\n\t    if (nonce.substr(0, cnonce.length) !== cnonce) {\n\t      connection._sasl_data = {};\n\t      return connection._sasl_failure_cb();\n\t    }\n\t\n\t    responseText += \"r=\" + nonce;\n\t    authMessage += responseText;\n\t\n\t    salt = Base64.decode(salt);\n\t    salt += \"\\x00\\x00\\x00\\x01\";\n\t\n\t    pass = utils.utf16to8(connection.pass);\n\t    Hi = U_old = SHA1.core_hmac_sha1(pass, salt);\n\t    for (i = 1; i < iter; i++) {\n\t      U = SHA1.core_hmac_sha1(pass, SHA1.binb2str(U_old));\n\t      for (k = 0; k < 5; k++) {\n\t        Hi[k] ^= U[k];\n\t      }\n\t      U_old = U;\n\t    }\n\t    Hi = SHA1.binb2str(Hi);\n\t\n\t    clientKey = SHA1.core_hmac_sha1(Hi, \"Client Key\");\n\t    serverKey = SHA1.str_hmac_sha1(Hi, \"Server Key\");\n\t    clientSignature = SHA1.core_hmac_sha1(SHA1.str_sha1(SHA1.binb2str(clientKey)), authMessage);\n\t    connection._sasl_data[\"server-signature\"] = SHA1.b64_hmac_sha1(serverKey, authMessage);\n\t\n\t    for (k = 0; k < 5; k++) {\n\t      clientKey[k] ^= clientSignature[k];\n\t    }\n\t\n\t    responseText += \",p=\" + Base64.encode(SHA1.binb2str(clientKey));\n\t    return responseText;\n\t  }.bind(this);\n\t\n\t  return auth_str;\n\t};\n\t\n\tStrophe.Connection.prototype.mechanisms[Strophe.SASLSHA1.prototype.name] = Strophe.SASLSHA1;\n\t\n\t/** PrivateConstructor: SASLMD5\n\t *  SASL DIGEST MD5 authentication.\n\t */\n\tStrophe.SASLMD5 = function() {};\n\t\n\tStrophe.SASLMD5.prototype = new Strophe.SASLMechanism(\"DIGEST-MD5\", false, 30);\n\t\n\tStrophe.SASLMD5.test = function(connection) {\n\t  return connection.authcid !== null;\n\t};\n\t\n\t/** PrivateFunction: _quote\n\t *  _Private_ utility function to backslash escape and quote strings.\n\t *\n\t *  Parameters:\n\t *    (String) str - The string to be quoted.\n\t *\n\t *  Returns:\n\t *    quoted string\n\t */\n\tStrophe.SASLMD5.prototype._quote = function (str)\n\t  {\n\t    return '\"' + str.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"') + '\"';\n\t    //\" end string workaround for emacs\n\t  };\n\t\n\t\n\tStrophe.SASLMD5.prototype.onChallenge = function(connection, challenge, test_cnonce) {\n\t  var attribMatch = /([a-z]+)=(\"[^\"]+\"|[^,\"]+)(?:,|$)/;\n\t  var cnonce = test_cnonce || MD5.hexdigest(\"\" + (Math.random() * 1234567890));\n\t  var realm = \"\";\n\t  var host = null;\n\t  var nonce = \"\";\n\t  var qop = \"\";\n\t  var matches;\n\t\n\t  while (challenge.match(attribMatch)) {\n\t    matches = challenge.match(attribMatch);\n\t    challenge = challenge.replace(matches[0], \"\");\n\t    matches[2] = matches[2].replace(/^\"(.+)\"$/, \"$1\");\n\t    switch (matches[1]) {\n\t    case \"realm\":\n\t      realm = matches[2];\n\t      break;\n\t    case \"nonce\":\n\t      nonce = matches[2];\n\t      break;\n\t    case \"qop\":\n\t      qop = matches[2];\n\t      break;\n\t    case \"host\":\n\t      host = matches[2];\n\t      break;\n\t    }\n\t  }\n\t\n\t  var digest_uri = connection.servtype + \"/\" + connection.domain;\n\t  if (host !== null) {\n\t    digest_uri = digest_uri + \"/\" + host;\n\t  }\n\t\n\t  var cred = utils.utf16to8(connection.authcid + \":\" + realm + \":\" + this._connection.pass);\n\t  var A1 = MD5.hash(cred) + \":\" + nonce + \":\" + cnonce;\n\t  var A2 = 'AUTHENTICATE:' + digest_uri;\n\t\n\t  var responseText = \"\";\n\t  responseText += 'charset=utf-8,';\n\t  responseText += 'username=' + this._quote(utils.utf16to8(connection.authcid)) + ',';\n\t  responseText += 'realm=' + this._quote(realm) + ',';\n\t  responseText += 'nonce=' + this._quote(nonce) + ',';\n\t  responseText += 'nc=00000001,';\n\t  responseText += 'cnonce=' + this._quote(cnonce) + ',';\n\t  responseText += 'digest-uri=' + this._quote(digest_uri) + ',';\n\t  responseText += 'response=' + MD5.hexdigest(MD5.hexdigest(A1) + \":\" +\n\t                                              nonce + \":00000001:\" +\n\t                                              cnonce + \":auth:\" +\n\t                                              MD5.hexdigest(A2)) + \",\";\n\t  responseText += 'qop=auth';\n\t\n\t  this.onChallenge = function () {\n\t      return \"\";\n\t  }.bind(this);\n\t\n\t  return responseText;\n\t};\n\t\n\tStrophe.Connection.prototype.mechanisms[Strophe.SASLMD5.prototype.name] = Strophe.SASLMD5;\n\t\n\treturn {\n\t    Strophe:        Strophe,\n\t    $build:         $build,\n\t    $msg:           $msg,\n\t    $iq:            $iq,\n\t    $pres:          $pres,\n\t    SHA1:           SHA1,\n\t    Base64:         Base64,\n\t    MD5:            MD5,\n\t};\n\t}));\n\t\n\t/*\n\t    This program is distributed under the terms of the MIT license.\n\t    Please see the LICENSE file for details.\n\t\n\t    Copyright 2006-2008, OGG, LLC\n\t*/\n\t\n\t/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n\t/* global define, window, setTimeout, clearTimeout, XMLHttpRequest, ActiveXObject, Strophe, $build */\n\t\n\t(function (root, factory) {\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_5__], __WEBPACK_LOCAL_MODULE_6__ = (function (core) {\n\t            return factory(\n\t                core.Strophe,\n\t                core.$build\n\t            );\n\t        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n\t    } else {\n\t        // Browser globals\n\t        return factory(Strophe, $build);\n\t    }\n\t}(this, function (Strophe, $build) {\n\t\n\t/** PrivateClass: Strophe.Request\n\t *  _Private_ helper class that provides a cross implementation abstraction\n\t *  for a BOSH related XMLHttpRequest.\n\t *\n\t *  The Strophe.Request class is used internally to encapsulate BOSH request\n\t *  information.  It is not meant to be used from user's code.\n\t */\n\t\n\t/** PrivateConstructor: Strophe.Request\n\t *  Create and initialize a new Strophe.Request object.\n\t *\n\t *  Parameters:\n\t *    (XMLElement) elem - The XML data to be sent in the request.\n\t *    (Function) func - The function that will be called when the\n\t *      XMLHttpRequest readyState changes.\n\t *    (Integer) rid - The BOSH rid attribute associated with this request.\n\t *    (Integer) sends - The number of times this same request has been\n\t *      sent.\n\t */\n\tStrophe.Request = function (elem, func, rid, sends)\n\t{\n\t    this.id = ++Strophe._requestId;\n\t    this.xmlData = elem;\n\t    this.data = Strophe.serialize(elem);\n\t    // save original function in case we need to make a new request\n\t    // from this one.\n\t    this.origFunc = func;\n\t    this.func = func;\n\t    this.rid = rid;\n\t    this.date = NaN;\n\t    this.sends = sends || 0;\n\t    this.abort = false;\n\t    this.dead = null;\n\t\n\t    this.age = function () {\n\t        if (!this.date) { return 0; }\n\t        var now = new Date();\n\t        return (now - this.date) / 1000;\n\t    };\n\t    this.timeDead = function () {\n\t        if (!this.dead) { return 0; }\n\t        var now = new Date();\n\t        return (now - this.dead) / 1000;\n\t    };\n\t    this.xhr = this._newXHR();\n\t};\n\t\n\tStrophe.Request.prototype = {\n\t    /** PrivateFunction: getResponse\n\t     *  Get a response from the underlying XMLHttpRequest.\n\t     *\n\t     *  This function attempts to get a response from the request and checks\n\t     *  for errors.\n\t     *\n\t     *  Throws:\n\t     *    \"parsererror\" - A parser error occured.\n\t     *    \"badformat\" - The entity has sent XML that cannot be processed.\n\t     *\n\t     *  Returns:\n\t     *    The DOM element tree of the response.\n\t     */\n\t    getResponse: function ()\n\t    {\n\t        var node = null;\n\t        if (this.xhr.responseXML && this.xhr.responseXML.documentElement) {\n\t            node = this.xhr.responseXML.documentElement;\n\t            if (node.tagName == \"parsererror\") {\n\t                Strophe.error(\"invalid response received\");\n\t                Strophe.error(\"responseText: \" + this.xhr.responseText);\n\t                Strophe.error(\"responseXML: \" +\n\t                              Strophe.serialize(this.xhr.responseXML));\n\t                throw \"parsererror\";\n\t            }\n\t        } else if (this.xhr.responseText) {\n\t            Strophe.error(\"invalid response received\");\n\t            Strophe.error(\"responseText: \" + this.xhr.responseText);\n\t            throw \"badformat\";\n\t        }\n\t\n\t        return node;\n\t    },\n\t\n\t    /** PrivateFunction: _newXHR\n\t     *  _Private_ helper function to create XMLHttpRequests.\n\t     *\n\t     *  This function creates XMLHttpRequests across all implementations.\n\t     *\n\t     *  Returns:\n\t     *    A new XMLHttpRequest.\n\t     */\n\t    _newXHR: function ()\n\t    {\n\t        var xhr = null;\n\t        if (window.XMLHttpRequest) {\n\t            xhr = new XMLHttpRequest();\n\t            if (xhr.overrideMimeType) {\n\t                xhr.overrideMimeType(\"text/xml; charset=utf-8\");\n\t            }\n\t        } else if (window.ActiveXObject) {\n\t            xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n\t        }\n\t\n\t        // use Function.bind() to prepend ourselves as an argument\n\t        xhr.onreadystatechange = this.func.bind(null, this);\n\t\n\t        return xhr;\n\t    }\n\t};\n\t\n\t/** Class: Strophe.Bosh\n\t *  _Private_ helper class that handles BOSH Connections\n\t *\n\t *  The Strophe.Bosh class is used internally by Strophe.Connection\n\t *  to encapsulate BOSH sessions. It is not meant to be used from user's code.\n\t */\n\t\n\t/** File: bosh.js\n\t *  A JavaScript library to enable BOSH in Strophejs.\n\t *\n\t *  this library uses Bidirectional-streams Over Synchronous HTTP (BOSH)\n\t *  to emulate a persistent, stateful, two-way connection to an XMPP server.\n\t *  More information on BOSH can be found in XEP 124.\n\t */\n\t\n\t/** PrivateConstructor: Strophe.Bosh\n\t *  Create and initialize a Strophe.Bosh object.\n\t *\n\t *  Parameters:\n\t *    (Strophe.Connection) connection - The Strophe.Connection that will use BOSH.\n\t *\n\t *  Returns:\n\t *    A new Strophe.Bosh object.\n\t */\n\tStrophe.Bosh = function(connection) {\n\t    this._conn = connection;\n\t    /* request id for body tags */\n\t    this.rid = Math.floor(Math.random() * 4294967295);\n\t    /* The current session ID. */\n\t    this.sid = null;\n\t\n\t    // default BOSH values\n\t    this.hold = 1;\n\t    this.wait = 60;\n\t    this.window = 5;\n\t    this.errors = 0;\n\t\n\t    this._requests = [];\n\t};\n\t\n\tStrophe.Bosh.prototype = {\n\t    /** Variable: strip\n\t     *\n\t     *  BOSH-Connections will have all stanzas wrapped in a <body> tag when\n\t     *  passed to <Strophe.Connection.xmlInput> or <Strophe.Connection.xmlOutput>.\n\t     *  To strip this tag, User code can set <Strophe.Bosh.strip> to \"body\":\n\t     *\n\t     *  > Strophe.Bosh.prototype.strip = \"body\";\n\t     *\n\t     *  This will enable stripping of the body tag in both\n\t     *  <Strophe.Connection.xmlInput> and <Strophe.Connection.xmlOutput>.\n\t     */\n\t    strip: null,\n\t\n\t    /** PrivateFunction: _buildBody\n\t     *  _Private_ helper function to generate the <body/> wrapper for BOSH.\n\t     *\n\t     *  Returns:\n\t     *    A Strophe.Builder with a <body/> element.\n\t     */\n\t    _buildBody: function ()\n\t    {\n\t        var bodyWrap = $build('body', {\n\t            rid: this.rid++,\n\t            xmlns: Strophe.NS.HTTPBIND\n\t        });\n\t        if (this.sid !== null) {\n\t            bodyWrap.attrs({sid: this.sid});\n\t        }\n\t        if (this._conn.options.keepalive) {\n\t            this._cacheSession();\n\t        }\n\t        return bodyWrap;\n\t    },\n\t\n\t    /** PrivateFunction: _reset\n\t     *  Reset the connection.\n\t     *\n\t     *  This function is called by the reset function of the Strophe Connection\n\t     */\n\t    _reset: function ()\n\t    {\n\t        this.rid = Math.floor(Math.random() * 4294967295);\n\t        this.sid = null;\n\t        this.errors = 0;\n\t        window.sessionStorage.removeItem('strophe-bosh-session');\n\t\n\t        this._conn.nextValidRid(this.rid);\n\t    },\n\t\n\t    /** PrivateFunction: _connect\n\t     *  _Private_ function that initializes the BOSH connection.\n\t     *\n\t     *  Creates and sends the Request that initializes the BOSH connection.\n\t     */\n\t    _connect: function (wait, hold, route)\n\t    {\n\t        this.wait = wait || this.wait;\n\t        this.hold = hold || this.hold;\n\t        this.errors = 0;\n\t\n\t        // build the body tag\n\t        var body = this._buildBody().attrs({\n\t            to: this._conn.domain,\n\t            \"xml:lang\": \"en\",\n\t            wait: this.wait,\n\t            hold: this.hold,\n\t            content: \"text/xml; charset=utf-8\",\n\t            ver: \"1.6\",\n\t            \"xmpp:version\": \"1.0\",\n\t            \"xmlns:xmpp\": Strophe.NS.BOSH\n\t        });\n\t\n\t        if(route){\n\t            body.attrs({\n\t                route: route\n\t            });\n\t        }\n\t\n\t        var _connect_cb = this._conn._connect_cb;\n\t\n\t        this._requests.push(\n\t            new Strophe.Request(body.tree(),\n\t                                this._onRequestStateChange.bind(\n\t                                    this, _connect_cb.bind(this._conn)),\n\t                                body.tree().getAttribute(\"rid\")));\n\t        this._throttledRequestHandler();\n\t    },\n\t\n\t    /** PrivateFunction: _attach\n\t     *  Attach to an already created and authenticated BOSH session.\n\t     *\n\t     *  This function is provided to allow Strophe to attach to BOSH\n\t     *  sessions which have been created externally, perhaps by a Web\n\t     *  application.  This is often used to support auto-login type features\n\t     *  without putting user credentials into the page.\n\t     *\n\t     *  Parameters:\n\t     *    (String) jid - The full JID that is bound by the session.\n\t     *    (String) sid - The SID of the BOSH session.\n\t     *    (String) rid - The current RID of the BOSH session.  This RID\n\t     *      will be used by the next request.\n\t     *    (Function) callback The connect callback function.\n\t     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n\t     *      time the server will wait before returning an empty result for\n\t     *      a request.  The default setting of 60 seconds is recommended.\n\t     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n\t     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n\t     *      number of connections the server will hold at one time.  This\n\t     *      should almost always be set to 1 (the default).\n\t     *    (Integer) wind - The optional HTTBIND window value.  This is the\n\t     *      allowed range of request ids that are valid.  The default is 5.\n\t     */\n\t    _attach: function (jid, sid, rid, callback, wait, hold, wind)\n\t    {\n\t        this._conn.jid = jid;\n\t        this.sid = sid;\n\t        this.rid = rid;\n\t\n\t        this._conn.connect_callback = callback;\n\t\n\t        this._conn.domain = Strophe.getDomainFromJid(this._conn.jid);\n\t\n\t        this._conn.authenticated = true;\n\t        this._conn.connected = true;\n\t\n\t        this.wait = wait || this.wait;\n\t        this.hold = hold || this.hold;\n\t        this.window = wind || this.window;\n\t\n\t        this._conn._changeConnectStatus(Strophe.Status.ATTACHED, null);\n\t    },\n\t\n\t    /** PrivateFunction: _restore\n\t     *  Attempt to restore a cached BOSH session\n\t     *\n\t     *  Parameters:\n\t     *    (String) jid - The full JID that is bound by the session.\n\t     *      This parameter is optional but recommended, specifically in cases\n\t     *      where prebinded BOSH sessions are used where it's important to know\n\t     *      that the right session is being restored.\n\t     *    (Function) callback The connect callback function.\n\t     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n\t     *      time the server will wait before returning an empty result for\n\t     *      a request.  The default setting of 60 seconds is recommended.\n\t     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n\t     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n\t     *      number of connections the server will hold at one time.  This\n\t     *      should almost always be set to 1 (the default).\n\t     *    (Integer) wind - The optional HTTBIND window value.  This is the\n\t     *      allowed range of request ids that are valid.  The default is 5.\n\t     */\n\t    _restore: function (jid, callback, wait, hold, wind)\n\t    {\n\t        var session = JSON.parse(window.sessionStorage.getItem('strophe-bosh-session'));\n\t        if (typeof session !== \"undefined\" &&\n\t                   session !== null &&\n\t                   session.rid &&\n\t                   session.sid &&\n\t                   session.jid &&\n\t                   (typeof jid === \"undefined\" || jid === \"null\" || Strophe.getBareJidFromJid(session.jid) == Strophe.getBareJidFromJid(jid)))\n\t        {\n\t            this._conn.restored = true;\n\t            this._attach(session.jid, session.sid, session.rid, callback, wait, hold, wind);\n\t        } else {\n\t            throw { name: \"StropheSessionError\", message: \"_restore: no restoreable session.\" };\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _cacheSession\n\t     *  _Private_ handler for the beforeunload event.\n\t     *\n\t     *  This handler is used to process the Bosh-part of the initial request.\n\t     *  Parameters:\n\t     *    (Strophe.Request) bodyWrap - The received stanza.\n\t     */\n\t    _cacheSession: function ()\n\t    {\n\t        if (this._conn.authenticated) {\n\t            if (this._conn.jid && this.rid && this.sid) {\n\t                window.sessionStorage.setItem('strophe-bosh-session', JSON.stringify({\n\t                    'jid': this._conn.jid,\n\t                    'rid': this.rid,\n\t                    'sid': this.sid\n\t                }));\n\t            }\n\t        } else {\n\t            window.sessionStorage.removeItem('strophe-bosh-session');\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _connect_cb\n\t     *  _Private_ handler for initial connection request.\n\t     *\n\t     *  This handler is used to process the Bosh-part of the initial request.\n\t     *  Parameters:\n\t     *    (Strophe.Request) bodyWrap - The received stanza.\n\t     */\n\t    _connect_cb: function (bodyWrap)\n\t    {\n\t        var typ = bodyWrap.getAttribute(\"type\");\n\t        var cond, conflict;\n\t        if (typ !== null && typ == \"terminate\") {\n\t            // an error occurred\n\t            cond = bodyWrap.getAttribute(\"condition\");\n\t            Strophe.error(\"BOSH-Connection failed: \" + cond);\n\t            conflict = bodyWrap.getElementsByTagName(\"conflict\");\n\t            if (cond !== null) {\n\t                if (cond == \"remote-stream-error\" && conflict.length > 0) {\n\t                    cond = \"conflict\";\n\t                }\n\t                this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, cond);\n\t            } else {\n\t                this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"unknown\");\n\t            }\n\t            this._conn._doDisconnect(cond);\n\t            return Strophe.Status.CONNFAIL;\n\t        }\n\t\n\t        // check to make sure we don't overwrite these if _connect_cb is\n\t        // called multiple times in the case of missing stream:features\n\t        if (!this.sid) {\n\t            this.sid = bodyWrap.getAttribute(\"sid\");\n\t        }\n\t        var wind = bodyWrap.getAttribute('requests');\n\t        if (wind) { this.window = parseInt(wind, 10); }\n\t        var hold = bodyWrap.getAttribute('hold');\n\t        if (hold) { this.hold = parseInt(hold, 10); }\n\t        var wait = bodyWrap.getAttribute('wait');\n\t        if (wait) { this.wait = parseInt(wait, 10); }\n\t    },\n\t\n\t    /** PrivateFunction: _disconnect\n\t     *  _Private_ part of Connection.disconnect for Bosh\n\t     *\n\t     *  Parameters:\n\t     *    (Request) pres - This stanza will be sent before disconnecting.\n\t     */\n\t    _disconnect: function (pres)\n\t    {\n\t        this._sendTerminate(pres);\n\t    },\n\t\n\t    /** PrivateFunction: _doDisconnect\n\t     *  _Private_ function to disconnect.\n\t     *\n\t     *  Resets the SID and RID.\n\t     */\n\t    _doDisconnect: function ()\n\t    {\n\t        this.sid = null;\n\t        this.rid = Math.floor(Math.random() * 4294967295);\n\t        window.sessionStorage.removeItem('strophe-bosh-session');\n\t\n\t        this._conn.nextValidRid(this.rid);\n\t    },\n\t\n\t    /** PrivateFunction: _emptyQueue\n\t     * _Private_ function to check if the Request queue is empty.\n\t     *\n\t     *  Returns:\n\t     *    True, if there are no Requests queued, False otherwise.\n\t     */\n\t    _emptyQueue: function ()\n\t    {\n\t        return this._requests.length === 0;\n\t    },\n\t\n\t    /** PrivateFunction: _hitError\n\t     *  _Private_ function to handle the error count.\n\t     *\n\t     *  Requests are resent automatically until their error count reaches\n\t     *  5.  Each time an error is encountered, this function is called to\n\t     *  increment the count and disconnect if the count is too high.\n\t     *\n\t     *  Parameters:\n\t     *    (Integer) reqStatus - The request status.\n\t     */\n\t    _hitError: function (reqStatus)\n\t    {\n\t        this.errors++;\n\t        Strophe.warn(\"request errored, status: \" + reqStatus +\n\t                     \", number of errors: \" + this.errors);\n\t        if (this.errors > 4) {\n\t            this._conn._onDisconnectTimeout();\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _no_auth_received\n\t     *\n\t     * Called on stream start/restart when no stream:features\n\t     * has been received and sends a blank poll request.\n\t     */\n\t    _no_auth_received: function (_callback)\n\t    {\n\t        if (_callback) {\n\t            _callback = _callback.bind(this._conn);\n\t        } else {\n\t            _callback = this._conn._connect_cb.bind(this._conn);\n\t        }\n\t        var body = this._buildBody();\n\t        this._requests.push(\n\t                new Strophe.Request(body.tree(),\n\t                    this._onRequestStateChange.bind(\n\t                        this, _callback.bind(this._conn)),\n\t                    body.tree().getAttribute(\"rid\")));\n\t        this._throttledRequestHandler();\n\t    },\n\t\n\t    /** PrivateFunction: _onDisconnectTimeout\n\t     *  _Private_ timeout handler for handling non-graceful disconnection.\n\t     *\n\t     *  Cancels all remaining Requests and clears the queue.\n\t     */\n\t    _onDisconnectTimeout: function () {\n\t        this._abortAllRequests();\n\t    },\n\t\n\t    /** PrivateFunction: _abortAllRequests\n\t     *  _Private_ helper function that makes sure all pending requests are aborted.\n\t     */\n\t    _abortAllRequests: function _abortAllRequests() {\n\t        var req;\n\t        while (this._requests.length > 0) {\n\t            req = this._requests.pop();\n\t            req.abort = true;\n\t            req.xhr.abort();\n\t            // jslint complains, but this is fine. setting to empty func\n\t            // is necessary for IE6\n\t            req.xhr.onreadystatechange = function () {}; // jshint ignore:line\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _onIdle\n\t     *  _Private_ handler called by Strophe.Connection._onIdle\n\t     *\n\t     *  Sends all queued Requests or polls with empty Request if there are none.\n\t     */\n\t    _onIdle: function () {\n\t        var data = this._conn._data;\n\t\n\t        // if no requests are in progress, poll\n\t        if (this._conn.authenticated && this._requests.length === 0 &&\n\t            data.length === 0 && !this._conn.disconnecting) {\n\t            Strophe.info(\"no requests during idle cycle, sending \" +\n\t                         \"blank request\");\n\t            data.push(null);\n\t        }\n\t\n\t        if (this._conn.paused) {\n\t            return;\n\t        }\n\t\n\t        if (this._requests.length < 2 && data.length > 0) {\n\t            var body = this._buildBody();\n\t            for (var i = 0; i < data.length; i++) {\n\t                if (data[i] !== null) {\n\t                    if (data[i] === \"restart\") {\n\t                        body.attrs({\n\t                            to: this._conn.domain,\n\t                            \"xml:lang\": \"en\",\n\t                            \"xmpp:restart\": \"true\",\n\t                            \"xmlns:xmpp\": Strophe.NS.BOSH\n\t                        });\n\t                    } else {\n\t                        body.cnode(data[i]).up();\n\t                    }\n\t                }\n\t            }\n\t            delete this._conn._data;\n\t            this._conn._data = [];\n\t            this._requests.push(\n\t                new Strophe.Request(body.tree(),\n\t                                    this._onRequestStateChange.bind(\n\t                                        this, this._conn._dataRecv.bind(this._conn)),\n\t                                    body.tree().getAttribute(\"rid\")));\n\t            this._throttledRequestHandler();\n\t        }\n\t\n\t        if (this._requests.length > 0) {\n\t            var time_elapsed = this._requests[0].age();\n\t            if (this._requests[0].dead !== null) {\n\t                if (this._requests[0].timeDead() >\n\t                    Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait)) {\n\t                    this._throttledRequestHandler();\n\t                }\n\t            }\n\t\n\t            if (time_elapsed > Math.floor(Strophe.TIMEOUT * this.wait)) {\n\t                Strophe.warn(\"Request \" +\n\t                             this._requests[0].id +\n\t                             \" timed out, over \" + Math.floor(Strophe.TIMEOUT * this.wait) +\n\t                             \" seconds since last activity\");\n\t                this._throttledRequestHandler();\n\t            }\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _onRequestStateChange\n\t     *  _Private_ handler for Strophe.Request state changes.\n\t     *\n\t     *  This function is called when the XMLHttpRequest readyState changes.\n\t     *  It contains a lot of error handling logic for the many ways that\n\t     *  requests can fail, and calls the request callback when requests\n\t     *  succeed.\n\t     *\n\t     *  Parameters:\n\t     *    (Function) func - The handler for the request.\n\t     *    (Strophe.Request) req - The request that is changing readyState.\n\t     */\n\t    _onRequestStateChange: function (func, req)\n\t    {\n\t        Strophe.debug(\"request id \" + req.id +\n\t                      \".\" + req.sends + \" state changed to \" +\n\t                      req.xhr.readyState);\n\t\n\t        if (req.abort) {\n\t            req.abort = false;\n\t            return;\n\t        }\n\t\n\t        // request complete\n\t        var reqStatus;\n\t        if (req.xhr.readyState == 4) {\n\t            reqStatus = 0;\n\t            try {\n\t                reqStatus = req.xhr.status;\n\t            } catch (e) {\n\t                // ignore errors from undefined status attribute.  works\n\t                // around a browser bug\n\t            }\n\t\n\t            if (typeof(reqStatus) == \"undefined\") {\n\t                reqStatus = 0;\n\t            }\n\t\n\t            if (this.disconnecting) {\n\t                if (reqStatus >= 400) {\n\t                    this._hitError(reqStatus);\n\t                    return;\n\t                }\n\t            }\n\t\n\t            var reqIs0 = (this._requests[0] == req);\n\t            var reqIs1 = (this._requests[1] == req);\n\t\n\t            if ((reqStatus > 0 && reqStatus < 500) || req.sends > 5) {\n\t                // remove from internal queue\n\t                this._removeRequest(req);\n\t                Strophe.debug(\"request id \" +\n\t                              req.id +\n\t                              \" should now be removed\");\n\t            }\n\t\n\t            // request succeeded\n\t            if (reqStatus == 200) {\n\t                // if request 1 finished, or request 0 finished and request\n\t                // 1 is over Strophe.SECONDARY_TIMEOUT seconds old, we need to\n\t                // restart the other - both will be in the first spot, as the\n\t                // completed request has been removed from the queue already\n\t                if (reqIs1 ||\n\t                    (reqIs0 && this._requests.length > 0 &&\n\t                     this._requests[0].age() > Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait))) {\n\t                    this._restartRequest(0);\n\t                }\n\t\n\t                this._conn.nextValidRid(Number(req.rid) + 1);\n\t\n\t                // call handler\n\t                Strophe.debug(\"request id \" +\n\t                              req.id + \".\" +\n\t                              req.sends + \" got 200\");\n\t                func(req);\n\t                this.errors = 0;\n\t            } else {\n\t                Strophe.error(\"request id \" +\n\t                              req.id + \".\" +\n\t                              req.sends + \" error \" + reqStatus +\n\t                              \" happened\");\n\t                if (reqStatus === 0 ||\n\t                    (reqStatus >= 400 && reqStatus < 600) ||\n\t                    reqStatus >= 12000) {\n\t                    this._hitError(reqStatus);\n\t                    if (reqStatus >= 400 && reqStatus < 500) {\n\t                        this._conn._changeConnectStatus(Strophe.Status.DISCONNECTING, null);\n\t                        this._conn._doDisconnect();\n\t                    }\n\t                }\n\t            }\n\t\n\t            if (!((reqStatus > 0 && reqStatus < 500) ||\n\t                  req.sends > 5)) {\n\t                this._throttledRequestHandler();\n\t            }\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _processRequest\n\t     *  _Private_ function to process a request in the queue.\n\t     *\n\t     *  This function takes requests off the queue and sends them and\n\t     *  restarts dead requests.\n\t     *\n\t     *  Parameters:\n\t     *    (Integer) i - The index of the request in the queue.\n\t     */\n\t    _processRequest: function (i)\n\t    {\n\t        var self = this;\n\t        var req = this._requests[i];\n\t        var reqStatus = -1;\n\t\n\t        try {\n\t            if (req.xhr.readyState == 4) {\n\t                reqStatus = req.xhr.status;\n\t            }\n\t        } catch (e) {\n\t            Strophe.error(\"caught an error in _requests[\" + i +\n\t                          \"], reqStatus: \" + reqStatus);\n\t        }\n\t\n\t        if (typeof(reqStatus) == \"undefined\") {\n\t            reqStatus = -1;\n\t        }\n\t\n\t        // make sure we limit the number of retries\n\t        if (req.sends > this._conn.maxRetries) {\n\t            this._conn._onDisconnectTimeout();\n\t            return;\n\t        }\n\t\n\t        var time_elapsed = req.age();\n\t        var primaryTimeout = (!isNaN(time_elapsed) &&\n\t                              time_elapsed > Math.floor(Strophe.TIMEOUT * this.wait));\n\t        var secondaryTimeout = (req.dead !== null &&\n\t                                req.timeDead() > Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait));\n\t        var requestCompletedWithServerError = (req.xhr.readyState == 4 &&\n\t                                               (reqStatus < 1 ||\n\t                                                reqStatus >= 500));\n\t        if (primaryTimeout || secondaryTimeout ||\n\t            requestCompletedWithServerError) {\n\t            if (secondaryTimeout) {\n\t                Strophe.error(\"Request \" +\n\t                              this._requests[i].id +\n\t                              \" timed out (secondary), restarting\");\n\t            }\n\t            req.abort = true;\n\t            req.xhr.abort();\n\t            // setting to null fails on IE6, so set to empty function\n\t            req.xhr.onreadystatechange = function () {};\n\t            this._requests[i] = new Strophe.Request(req.xmlData,\n\t                                                    req.origFunc,\n\t                                                    req.rid,\n\t                                                    req.sends);\n\t            req = this._requests[i];\n\t        }\n\t\n\t        if (req.xhr.readyState === 0) {\n\t            Strophe.debug(\"request id \" + req.id +\n\t                          \".\" + req.sends + \" posting\");\n\t\n\t            try {\n\t                req.xhr.open(\"POST\", this._conn.service, this._conn.options.sync ? false : true);\n\t                req.xhr.setRequestHeader(\"Content-Type\", \"text/xml; charset=utf-8\");\n\t            } catch (e2) {\n\t                Strophe.error(\"XHR open failed.\");\n\t                if (!this._conn.connected) {\n\t                    this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,\n\t                                              \"bad-service\");\n\t                }\n\t                this._conn.disconnect();\n\t                return;\n\t            }\n\t\n\t            // Fires the XHR request -- may be invoked immediately\n\t            // or on a gradually expanding retry window for reconnects\n\t            var sendFunc = function () {\n\t                req.date = new Date();\n\t                if (self._conn.options.customHeaders){\n\t                    var headers = self._conn.options.customHeaders;\n\t                    for (var header in headers) {\n\t                        if (headers.hasOwnProperty(header)) {\n\t                            req.xhr.setRequestHeader(header, headers[header]);\n\t                        }\n\t                    }\n\t                }\n\t                req.xhr.send(req.data);\n\t            };\n\t\n\t            // Implement progressive backoff for reconnects --\n\t            // First retry (send == 1) should also be instantaneous\n\t            if (req.sends > 1) {\n\t                // Using a cube of the retry number creates a nicely\n\t                // expanding retry window\n\t                var backoff = Math.min(Math.floor(Strophe.TIMEOUT * this.wait),\n\t                                       Math.pow(req.sends, 3)) * 1000;\n\t                setTimeout(sendFunc, backoff);\n\t            } else {\n\t                sendFunc();\n\t            }\n\t\n\t            req.sends++;\n\t\n\t            if (this._conn.xmlOutput !== Strophe.Connection.prototype.xmlOutput) {\n\t                if (req.xmlData.nodeName === this.strip && req.xmlData.childNodes.length) {\n\t                    this._conn.xmlOutput(req.xmlData.childNodes[0]);\n\t                } else {\n\t                    this._conn.xmlOutput(req.xmlData);\n\t                }\n\t            }\n\t            if (this._conn.rawOutput !== Strophe.Connection.prototype.rawOutput) {\n\t                this._conn.rawOutput(req.data);\n\t            }\n\t        } else {\n\t            Strophe.debug(\"_processRequest: \" +\n\t                          (i === 0 ? \"first\" : \"second\") +\n\t                          \" request has readyState of \" +\n\t                          req.xhr.readyState);\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _removeRequest\n\t     *  _Private_ function to remove a request from the queue.\n\t     *\n\t     *  Parameters:\n\t     *    (Strophe.Request) req - The request to remove.\n\t     */\n\t    _removeRequest: function (req)\n\t    {\n\t        Strophe.debug(\"removing request\");\n\t\n\t        var i;\n\t        for (i = this._requests.length - 1; i >= 0; i--) {\n\t            if (req == this._requests[i]) {\n\t                this._requests.splice(i, 1);\n\t            }\n\t        }\n\t\n\t        // IE6 fails on setting to null, so set to empty function\n\t        req.xhr.onreadystatechange = function () {};\n\t\n\t        this._throttledRequestHandler();\n\t    },\n\t\n\t    /** PrivateFunction: _restartRequest\n\t     *  _Private_ function to restart a request that is presumed dead.\n\t     *\n\t     *  Parameters:\n\t     *    (Integer) i - The index of the request in the queue.\n\t     */\n\t    _restartRequest: function (i)\n\t    {\n\t        var req = this._requests[i];\n\t        if (req.dead === null) {\n\t            req.dead = new Date();\n\t        }\n\t\n\t        this._processRequest(i);\n\t    },\n\t\n\t    /** PrivateFunction: _reqToData\n\t     * _Private_ function to get a stanza out of a request.\n\t     *\n\t     * Tries to extract a stanza out of a Request Object.\n\t     * When this fails the current connection will be disconnected.\n\t     *\n\t     *  Parameters:\n\t     *    (Object) req - The Request.\n\t     *\n\t     *  Returns:\n\t     *    The stanza that was passed.\n\t     */\n\t    _reqToData: function (req)\n\t    {\n\t        try {\n\t            return req.getResponse();\n\t        } catch (e) {\n\t            if (e != \"parsererror\") { throw e; }\n\t            this._conn.disconnect(\"strophe-parsererror\");\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _sendTerminate\n\t     *  _Private_ function to send initial disconnect sequence.\n\t     *\n\t     *  This is the first step in a graceful disconnect.  It sends\n\t     *  the BOSH server a terminate body and includes an unavailable\n\t     *  presence if authentication has completed.\n\t     */\n\t    _sendTerminate: function (pres)\n\t    {\n\t        Strophe.info(\"_sendTerminate was called\");\n\t        var body = this._buildBody().attrs({type: \"terminate\"});\n\t\n\t        if (pres) {\n\t            body.cnode(pres.tree());\n\t        }\n\t\n\t        var req = new Strophe.Request(body.tree(),\n\t                                      this._onRequestStateChange.bind(\n\t                                          this, this._conn._dataRecv.bind(this._conn)),\n\t                                      body.tree().getAttribute(\"rid\"));\n\t\n\t        this._requests.push(req);\n\t        this._throttledRequestHandler();\n\t    },\n\t\n\t    /** PrivateFunction: _send\n\t     *  _Private_ part of the Connection.send function for BOSH\n\t     *\n\t     * Just triggers the RequestHandler to send the messages that are in the queue\n\t     */\n\t    _send: function () {\n\t        clearTimeout(this._conn._idleTimeout);\n\t        this._throttledRequestHandler();\n\t        this._conn._idleTimeout = setTimeout(this._conn._onIdle.bind(this._conn), 100);\n\t    },\n\t\n\t    /** PrivateFunction: _sendRestart\n\t     *\n\t     *  Send an xmpp:restart stanza.\n\t     */\n\t    _sendRestart: function ()\n\t    {\n\t        this._throttledRequestHandler();\n\t        clearTimeout(this._conn._idleTimeout);\n\t    },\n\t\n\t    /** PrivateFunction: _throttledRequestHandler\n\t     *  _Private_ function to throttle requests to the connection window.\n\t     *\n\t     *  This function makes sure we don't send requests so fast that the\n\t     *  request ids overflow the connection window in the case that one\n\t     *  request died.\n\t     */\n\t    _throttledRequestHandler: function ()\n\t    {\n\t        if (!this._requests) {\n\t            Strophe.debug(\"_throttledRequestHandler called with \" +\n\t                          \"undefined requests\");\n\t        } else {\n\t            Strophe.debug(\"_throttledRequestHandler called with \" +\n\t                          this._requests.length + \" requests\");\n\t        }\n\t\n\t        if (!this._requests || this._requests.length === 0) {\n\t            return;\n\t        }\n\t\n\t        if (this._requests.length > 0) {\n\t            this._processRequest(0);\n\t        }\n\t\n\t        if (this._requests.length > 1 &&\n\t            Math.abs(this._requests[0].rid -\n\t                     this._requests[1].rid) < this.window) {\n\t            this._processRequest(1);\n\t        }\n\t    }\n\t};\n\treturn Strophe;\n\t}));\n\t\n\t/*\n\t    This program is distributed under the terms of the MIT license.\n\t    Please see the LICENSE file for details.\n\t\n\t    Copyright 2006-2008, OGG, LLC\n\t*/\n\t\n\t/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n\t/* global define, window, clearTimeout, WebSocket, DOMParser, Strophe, $build */\n\t\n\t(function (root, factory) {\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_5__], __WEBPACK_LOCAL_MODULE_7__ = (function (core) {\n\t            return factory(\n\t                core.Strophe,\n\t                core.$build\n\t            );\n\t        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n\t    } else {\n\t        // Browser globals\n\t        return factory(Strophe, $build);\n\t    }\n\t}(this, function (Strophe, $build) {\n\t\n\t/** Class: Strophe.WebSocket\n\t *  _Private_ helper class that handles WebSocket Connections\n\t *\n\t *  The Strophe.WebSocket class is used internally by Strophe.Connection\n\t *  to encapsulate WebSocket sessions. It is not meant to be used from user's code.\n\t */\n\t\n\t/** File: websocket.js\n\t *  A JavaScript library to enable XMPP over Websocket in Strophejs.\n\t *\n\t *  This file implements XMPP over WebSockets for Strophejs.\n\t *  If a Connection is established with a Websocket url (ws://...)\n\t *  Strophe will use WebSockets.\n\t *  For more information on XMPP-over-WebSocket see RFC 7395:\n\t *  http://tools.ietf.org/html/rfc7395\n\t *\n\t *  WebSocket support implemented by Andreas Guth (andreas.guth@rwth-aachen.de)\n\t */\n\t\n\t/** PrivateConstructor: Strophe.Websocket\n\t *  Create and initialize a Strophe.WebSocket object.\n\t *  Currently only sets the connection Object.\n\t *\n\t *  Parameters:\n\t *    (Strophe.Connection) connection - The Strophe.Connection that will use WebSockets.\n\t *\n\t *  Returns:\n\t *    A new Strophe.WebSocket object.\n\t */\n\tStrophe.Websocket = function(connection) {\n\t    this._conn = connection;\n\t    this.strip = \"wrapper\";\n\t\n\t    var service = connection.service;\n\t    if (service.indexOf(\"ws:\") !== 0 && service.indexOf(\"wss:\") !== 0) {\n\t        // If the service is not an absolute URL, assume it is a path and put the absolute\n\t        // URL together from options, current URL and the path.\n\t        var new_service = \"\";\n\t\n\t        if (connection.options.protocol === \"ws\" && window.location.protocol !== \"https:\") {\n\t            new_service += \"ws\";\n\t        } else {\n\t            new_service += \"wss\";\n\t        }\n\t\n\t        new_service += \"://\" + window.location.host;\n\t\n\t        if (service.indexOf(\"/\") !== 0) {\n\t            new_service += window.location.pathname + service;\n\t        } else {\n\t            new_service += service;\n\t        }\n\t\n\t        connection.service = new_service;\n\t    }\n\t};\n\t\n\tStrophe.Websocket.prototype = {\n\t    /** PrivateFunction: _buildStream\n\t     *  _Private_ helper function to generate the <stream> start tag for WebSockets\n\t     *\n\t     *  Returns:\n\t     *    A Strophe.Builder with a <stream> element.\n\t     */\n\t    _buildStream: function ()\n\t    {\n\t        return $build(\"open\", {\n\t            \"xmlns\": Strophe.NS.FRAMING,\n\t            \"to\": this._conn.domain,\n\t            \"version\": '1.0'\n\t        });\n\t    },\n\t\n\t    /** PrivateFunction: _check_streamerror\n\t     * _Private_ checks a message for stream:error\n\t     *\n\t     *  Parameters:\n\t     *    (Strophe.Request) bodyWrap - The received stanza.\n\t     *    connectstatus - The ConnectStatus that will be set on error.\n\t     *  Returns:\n\t     *     true if there was a streamerror, false otherwise.\n\t     */\n\t    _check_streamerror: function (bodyWrap, connectstatus) {\n\t        var errors;\n\t        if (bodyWrap.getElementsByTagNameNS) {\n\t            errors = bodyWrap.getElementsByTagNameNS(Strophe.NS.STREAM, \"error\");\n\t        } else {\n\t            errors = bodyWrap.getElementsByTagName(\"stream:error\");\n\t        }\n\t        if (errors.length === 0) {\n\t            return false;\n\t        }\n\t        var error = errors[0];\n\t\n\t        var condition = \"\";\n\t        var text = \"\";\n\t\n\t        var ns = \"urn:ietf:params:xml:ns:xmpp-streams\";\n\t        for (var i = 0; i < error.childNodes.length; i++) {\n\t            var e = error.childNodes[i];\n\t            if (e.getAttribute(\"xmlns\") !== ns) {\n\t                break;\n\t            } if (e.nodeName === \"text\") {\n\t                text = e.textContent;\n\t            } else {\n\t                condition = e.nodeName;\n\t            }\n\t        }\n\t\n\t        var errorString = \"WebSocket stream error: \";\n\t\n\t        if (condition) {\n\t            errorString += condition;\n\t        } else {\n\t            errorString += \"unknown\";\n\t        }\n\t\n\t        if (text) {\n\t            errorString += \" - \" + condition;\n\t        }\n\t\n\t        Strophe.error(errorString);\n\t\n\t        // close the connection on stream_error\n\t        this._conn._changeConnectStatus(connectstatus, condition);\n\t        this._conn._doDisconnect();\n\t        return true;\n\t    },\n\t\n\t    /** PrivateFunction: _reset\n\t     *  Reset the connection.\n\t     *\n\t     *  This function is called by the reset function of the Strophe Connection.\n\t     *  Is not needed by WebSockets.\n\t     */\n\t    _reset: function ()\n\t    {\n\t        return;\n\t    },\n\t\n\t    /** PrivateFunction: _connect\n\t     *  _Private_ function called by Strophe.Connection.connect\n\t     *\n\t     *  Creates a WebSocket for a connection and assigns Callbacks to it.\n\t     *  Does nothing if there already is a WebSocket.\n\t     */\n\t    _connect: function () {\n\t        // Ensure that there is no open WebSocket from a previous Connection.\n\t        this._closeSocket();\n\t\n\t        // Create the new WobSocket\n\t        this.socket = new WebSocket(this._conn.service, \"xmpp\");\n\t        this.socket.onopen = this._onOpen.bind(this);\n\t        this.socket.onerror = this._onError.bind(this);\n\t        this.socket.onclose = this._onClose.bind(this);\n\t        this.socket.onmessage = this._connect_cb_wrapper.bind(this);\n\t    },\n\t\n\t    /** PrivateFunction: _connect_cb\n\t     *  _Private_ function called by Strophe.Connection._connect_cb\n\t     *\n\t     * checks for stream:error\n\t     *\n\t     *  Parameters:\n\t     *    (Strophe.Request) bodyWrap - The received stanza.\n\t     */\n\t    _connect_cb: function(bodyWrap) {\n\t        var error = this._check_streamerror(bodyWrap, Strophe.Status.CONNFAIL);\n\t        if (error) {\n\t            return Strophe.Status.CONNFAIL;\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _handleStreamStart\n\t     * _Private_ function that checks the opening <open /> tag for errors.\n\t     *\n\t     * Disconnects if there is an error and returns false, true otherwise.\n\t     *\n\t     *  Parameters:\n\t     *    (Node) message - Stanza containing the <open /> tag.\n\t     */\n\t    _handleStreamStart: function(message) {\n\t        var error = false;\n\t\n\t        // Check for errors in the <open /> tag\n\t        var ns = message.getAttribute(\"xmlns\");\n\t        if (typeof ns !== \"string\") {\n\t            error = \"Missing xmlns in <open />\";\n\t        } else if (ns !== Strophe.NS.FRAMING) {\n\t            error = \"Wrong xmlns in <open />: \" + ns;\n\t        }\n\t\n\t        var ver = message.getAttribute(\"version\");\n\t        if (typeof ver !== \"string\") {\n\t            error = \"Missing version in <open />\";\n\t        } else if (ver !== \"1.0\") {\n\t            error = \"Wrong version in <open />: \" + ver;\n\t        }\n\t\n\t        if (error) {\n\t            this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, error);\n\t            this._conn._doDisconnect();\n\t            return false;\n\t        }\n\t\n\t        return true;\n\t    },\n\t\n\t    /** PrivateFunction: _connect_cb_wrapper\n\t     * _Private_ function that handles the first connection messages.\n\t     *\n\t     * On receiving an opening stream tag this callback replaces itself with the real\n\t     * message handler. On receiving a stream error the connection is terminated.\n\t     */\n\t    _connect_cb_wrapper: function(message) {\n\t        if (message.data.indexOf(\"<open \") === 0 || message.data.indexOf(\"<?xml\") === 0) {\n\t            // Strip the XML Declaration, if there is one\n\t            var data = message.data.replace(/^(<\\?.*?\\?>\\s*)*/, \"\");\n\t            if (data === '') return;\n\t\n\t            var streamStart = new DOMParser().parseFromString(data, \"text/xml\").documentElement;\n\t            this._conn.xmlInput(streamStart);\n\t            this._conn.rawInput(message.data);\n\t\n\t            //_handleStreamSteart will check for XML errors and disconnect on error\n\t            if (this._handleStreamStart(streamStart)) {\n\t                //_connect_cb will check for stream:error and disconnect on error\n\t                this._connect_cb(streamStart);\n\t            }\n\t        } else if (message.data.indexOf(\"<close \") === 0) { //'<close xmlns=\"urn:ietf:params:xml:ns:xmpp-framing />') {\n\t            this._conn.rawInput(message.data);\n\t            this._conn.xmlInput(message);\n\t            var see_uri = message.getAttribute(\"see-other-uri\");\n\t            if (see_uri) {\n\t                this._conn._changeConnectStatus(Strophe.Status.REDIRECT, \"Received see-other-uri, resetting connection\");\n\t                this._conn.reset();\n\t                this._conn.service = see_uri;\n\t                this._connect();\n\t            } else {\n\t                this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"Received closing stream\");\n\t                this._conn._doDisconnect();\n\t            }\n\t        } else {\n\t            var string = this._streamWrap(message.data);\n\t            var elem = new DOMParser().parseFromString(string, \"text/xml\").documentElement;\n\t            this.socket.onmessage = this._onMessage.bind(this);\n\t            this._conn._connect_cb(elem, null, message.data);\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _disconnect\n\t     *  _Private_ function called by Strophe.Connection.disconnect\n\t     *\n\t     *  Disconnects and sends a last stanza if one is given\n\t     *\n\t     *  Parameters:\n\t     *    (Request) pres - This stanza will be sent before disconnecting.\n\t     */\n\t    _disconnect: function (pres)\n\t    {\n\t        if (this.socket && this.socket.readyState !== WebSocket.CLOSED) {\n\t            if (pres) {\n\t                this._conn.send(pres);\n\t            }\n\t            var close = $build(\"close\", { \"xmlns\": Strophe.NS.FRAMING });\n\t            this._conn.xmlOutput(close);\n\t            var closeString = Strophe.serialize(close);\n\t            this._conn.rawOutput(closeString);\n\t            try {\n\t                this.socket.send(closeString);\n\t            } catch (e) {\n\t                Strophe.info(\"Couldn't send <close /> tag.\");\n\t            }\n\t        }\n\t        this._conn._doDisconnect();\n\t    },\n\t\n\t    /** PrivateFunction: _doDisconnect\n\t     *  _Private_ function to disconnect.\n\t     *\n\t     *  Just closes the Socket for WebSockets\n\t     */\n\t    _doDisconnect: function ()\n\t    {\n\t        Strophe.info(\"WebSockets _doDisconnect was called\");\n\t        this._closeSocket();\n\t    },\n\t\n\t    /** PrivateFunction _streamWrap\n\t     *  _Private_ helper function to wrap a stanza in a <stream> tag.\n\t     *  This is used so Strophe can process stanzas from WebSockets like BOSH\n\t     */\n\t    _streamWrap: function (stanza)\n\t    {\n\t        return \"<wrapper>\" + stanza + '</wrapper>';\n\t    },\n\t\n\t\n\t    /** PrivateFunction: _closeSocket\n\t     *  _Private_ function to close the WebSocket.\n\t     *\n\t     *  Closes the socket if it is still open and deletes it\n\t     */\n\t    _closeSocket: function ()\n\t    {\n\t        if (this.socket) { try {\n\t            this.socket.close();\n\t        } catch (e) {} }\n\t        this.socket = null;\n\t    },\n\t\n\t    /** PrivateFunction: _emptyQueue\n\t     * _Private_ function to check if the message queue is empty.\n\t     *\n\t     *  Returns:\n\t     *    True, because WebSocket messages are send immediately after queueing.\n\t     */\n\t    _emptyQueue: function ()\n\t    {\n\t        return true;\n\t    },\n\t\n\t    /** PrivateFunction: _onClose\n\t     * _Private_ function to handle websockets closing.\n\t     *\n\t     * Nothing to do here for WebSockets\n\t     */\n\t    _onClose: function() {\n\t        if(this._conn.connected && !this._conn.disconnecting) {\n\t            Strophe.error(\"Websocket closed unexcectedly\");\n\t            this._conn._doDisconnect();\n\t        } else {\n\t            Strophe.info(\"Websocket closed\");\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _no_auth_received\n\t     *\n\t     * Called on stream start/restart when no stream:features\n\t     * has been received.\n\t     */\n\t    _no_auth_received: function (_callback)\n\t    {\n\t        Strophe.error(\"Server did not send any auth methods\");\n\t        this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"Server did not send any auth methods\");\n\t        if (_callback) {\n\t            _callback = _callback.bind(this._conn);\n\t            _callback();\n\t        }\n\t        this._conn._doDisconnect();\n\t    },\n\t\n\t    /** PrivateFunction: _onDisconnectTimeout\n\t     *  _Private_ timeout handler for handling non-graceful disconnection.\n\t     *\n\t     *  This does nothing for WebSockets\n\t     */\n\t    _onDisconnectTimeout: function () {},\n\t\n\t    /** PrivateFunction: _abortAllRequests\n\t     *  _Private_ helper function that makes sure all pending requests are aborted.\n\t     */\n\t    _abortAllRequests: function () {},\n\t\n\t    /** PrivateFunction: _onError\n\t     * _Private_ function to handle websockets errors.\n\t     *\n\t     * Parameters:\n\t     * (Object) error - The websocket error.\n\t     */\n\t    _onError: function(error) {\n\t        Strophe.error(\"Websocket error \" + error);\n\t        this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"The WebSocket connection could not be established was disconnected.\");\n\t        this._disconnect();\n\t    },\n\t\n\t    /** PrivateFunction: _onIdle\n\t     *  _Private_ function called by Strophe.Connection._onIdle\n\t     *\n\t     *  sends all queued stanzas\n\t     */\n\t    _onIdle: function () {\n\t        var data = this._conn._data;\n\t        if (data.length > 0 && !this._conn.paused) {\n\t            for (var i = 0; i < data.length; i++) {\n\t                if (data[i] !== null) {\n\t                    var stanza, rawStanza;\n\t                    if (data[i] === \"restart\") {\n\t                        stanza = this._buildStream().tree();\n\t                    } else {\n\t                        stanza = data[i];\n\t                    }\n\t                    rawStanza = Strophe.serialize(stanza);\n\t                    this._conn.xmlOutput(stanza);\n\t                    this._conn.rawOutput(rawStanza);\n\t                    this.socket.send(rawStanza);\n\t                }\n\t            }\n\t            this._conn._data = [];\n\t        }\n\t    },\n\t\n\t    /** PrivateFunction: _onMessage\n\t     * _Private_ function to handle websockets messages.\n\t     *\n\t     * This function parses each of the messages as if they are full documents. [TODO : We may actually want to use a SAX Push parser].\n\t     *\n\t     * Since all XMPP traffic starts with \"<stream:stream version='1.0' xml:lang='en' xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' id='3697395463' from='SERVER'>\"\n\t     * The first stanza will always fail to be parsed...\n\t     * Addtionnaly, the seconds stanza will always be a <stream:features> with the stream NS defined in the previous stanza... so we need to 'force' the inclusion of the NS in this stanza!\n\t     *\n\t     * Parameters:\n\t     * (string) message - The websocket message.\n\t     */\n\t    _onMessage: function(message) {\n\t        var elem, data;\n\t        // check for closing stream\n\t        var close = '<close xmlns=\"urn:ietf:params:xml:ns:xmpp-framing\" />';\n\t        if (message.data === close) {\n\t            this._conn.rawInput(close);\n\t            this._conn.xmlInput(message);\n\t            if (!this._conn.disconnecting) {\n\t                this._conn._doDisconnect();\n\t            }\n\t            return;\n\t        } else if (message.data.search(\"<open \") === 0) {\n\t            // This handles stream restarts\n\t            elem = new DOMParser().parseFromString(message.data, \"text/xml\").documentElement;\n\t\n\t            if (!this._handleStreamStart(elem)) {\n\t                return;\n\t            }\n\t        } else {\n\t            data = this._streamWrap(message.data);\n\t            elem = new DOMParser().parseFromString(data, \"text/xml\").documentElement;\n\t        }\n\t\n\t        if (this._check_streamerror(elem, Strophe.Status.ERROR)) {\n\t            return;\n\t        }\n\t\n\t        //handle unavailable presence stanza before disconnecting\n\t        if (this._conn.disconnecting &&\n\t                elem.firstChild.nodeName === \"presence\" &&\n\t                elem.firstChild.getAttribute(\"type\") === \"unavailable\") {\n\t            this._conn.xmlInput(elem);\n\t            this._conn.rawInput(Strophe.serialize(elem));\n\t            // if we are already disconnecting we will ignore the unavailable stanza and\n\t            // wait for the </stream:stream> tag before we close the connection\n\t            return;\n\t        }\n\t        this._conn._dataRecv(elem, message.data);\n\t    },\n\t\n\t    /** PrivateFunction: _onOpen\n\t     * _Private_ function to handle websockets connection setup.\n\t     *\n\t     * The opening stream tag is sent here.\n\t     */\n\t    _onOpen: function() {\n\t        Strophe.info(\"Websocket open\");\n\t        var start = this._buildStream();\n\t        this._conn.xmlOutput(start.tree());\n\t\n\t        var startString = Strophe.serialize(start);\n\t        this._conn.rawOutput(startString);\n\t        this.socket.send(startString);\n\t    },\n\t\n\t    /** PrivateFunction: _reqToData\n\t     * _Private_ function to get a stanza out of a request.\n\t     *\n\t     * WebSockets don't use requests, so the passed argument is just returned.\n\t     *\n\t     *  Parameters:\n\t     *    (Object) stanza - The stanza.\n\t     *\n\t     *  Returns:\n\t     *    The stanza that was passed.\n\t     */\n\t    _reqToData: function (stanza)\n\t    {\n\t        return stanza;\n\t    },\n\t\n\t    /** PrivateFunction: _send\n\t     *  _Private_ part of the Connection.send function for WebSocket\n\t     *\n\t     * Just flushes the messages that are in the queue\n\t     */\n\t    _send: function () {\n\t        this._conn.flush();\n\t    },\n\t\n\t    /** PrivateFunction: _sendRestart\n\t     *\n\t     *  Send an xmpp:restart stanza.\n\t     */\n\t    _sendRestart: function ()\n\t    {\n\t        clearTimeout(this._conn._idleTimeout);\n\t        this._conn._onIdle.bind(this._conn)();\n\t    }\n\t};\n\treturn Strophe;\n\t}));\n\t\n\t(function(root){\n\t    if(true){\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t            __WEBPACK_LOCAL_MODULE_5__,\n\t            __WEBPACK_LOCAL_MODULE_6__,\n\t            __WEBPACK_LOCAL_MODULE_7__\n\t        ], __WEBPACK_LOCAL_MODULE_8__ = (function (wrapper) {\n\t            return wrapper;\n\t        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)));\n\t    }\n\t})(this);\n\t\n\t/* jshint ignore:start */\n\tif (callback) {\n\t    if(true){\n\t        //For backwards compatability\n\t        var n_callback = callback;\n\t        !/* require */(/* empty */function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__WEBPACK_LOCAL_MODULE_8__]; (function(o){\n\t            n_callback(o.Strophe,o.$build,o.$msg,o.$iq,o.$pres);\n\t        }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}());\n\t    }else{\n\t        return callback(Strophe, $build, $msg, $iq, $pres);\n\t    }\n\t}\n\t\n\t\n\t})(function (Strophe, build, msg, iq, pres) {\n\t    window.Strophe = Strophe;\n\t    window.$build = build;\n\t    window.$msg = msg;\n\t    window.$iq = iq;\n\t    window.$pres = pres;\n\t});\n\t/* jshint ignore:end */\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// var ConnectionQuality = require('../../libs/connectionquality');\r\n\tvar ManisManagement = __webpack_require__(5);\r\n\t\r\n\t/* jshint -W117 */\r\n\t/* a simple MUC connection plugin\r\n\t * can only handle a single MUC room\r\n\t */\r\n\tStrophe.addConnectionPlugin('emuc', {\r\n\t  connection: null,\r\n\t  roomjid: null,\r\n\t  myroomjid: null,\r\n\t  members: {},\r\n\t  list_members: [], // so we can elect a new focus\r\n\t  presMap: {},\r\n\t  preziMap: {},\r\n\t  joined: false,\r\n\t  isOwner: false,\r\n\t  role: null,\r\n\t  init: function (conn) {\r\n\t    this.connection = conn;\r\n\t  },\r\n\t  initPresenceMap: function (myroomjid) {\r\n\t    this.presMap['to'] = myroomjid;\r\n\t    this.presMap['xns'] = 'http://igniterealtime.org/protocol/ofmeet';\r\n\t  },\r\n\t  doJoin: function (jid, password) {\r\n\t    this.members = {};\r\n\t    this.list_members = [];\r\n\t    this.myroomjid = jid;\r\n\t\r\n\t    console.info(\"Joined MUC as \" + this.myroomjid);\r\n\t\r\n\t    this.initPresenceMap(this.myroomjid.split('/')[0]);\r\n\t\r\n\t    if (!this.roomjid) {\r\n\t      this.roomjid = Strophe.getBareJidFromJid(jid);\r\n\t      // add handlers (just once)\r\n\t      this.connection.addHandler(this.handleManageIq.bind(this), null, 'iq', 'set', null, null);\r\n\t      this.connection.addHandler(this.onPresence.bind(this), null, 'presence', null, null, null, {matchBare: true});\r\n\t      this.connection.addHandler(this.onPresenceUnavailable.bind(this), null, 'presence', 'unavailable', null, null, {matchBare: true});\r\n\t      this.connection.addHandler(this.onPresenceError.bind(this), null, 'presence', 'error', null, null, {matchBare: true});\r\n\t      this.connection.addHandler(this.onMessage.bind(this), null, 'message', null, null, null, {matchBare: true});\r\n\t      this.connection.addHandler(this.handleRecordResultIq.bind(this), null, 'iq', 'result');\r\n\t    }\r\n\t    if (password !== undefined) {\r\n\t      this.presMap['password'] = password;\r\n\t    }\r\n\t    this.roomjid = Strophe.getBareJidFromJid(jid);\r\n\t    this.sendPresence();\r\n\t    // add myself to member list\r\n\t    var participant = {\r\n\t      nickname: config.nickname ? config.nickname : manisConfg.mUserName,\r\n\t      jid: connection.jid,\r\n\t      resource: Strophe.getResourceFromJid(connection.jid),\r\n\t      audio_muted: false,\r\n\t      video_muted: false,\r\n\t      is_moderator: (connection.jid == config.moderatorJid),\r\n\t    };\r\n\t    window.participants.push(participant);\r\n\t  },\r\n\t\r\n\t  handleManageIq: function (iq) {\r\n\t    var from = iq.getAttribute('from');\r\n\t    if(from.indexOf('admin') > -1){\r\n\t      ManisManagement.handleManageMsg(iq);\r\n\t    }\r\n\t    return true;\r\n\t  },\r\n\t\r\n\t  doLeave: function () {\r\n\t    console.log(\"do leave\", this.myroomjid);\r\n\t    var pres = $pres({to: this.myroomjid, type: 'unavailable'});\r\n\t    pres.c('status').t(window.exitCode).up()\r\n\t    // console.log('1111111111111111111111=======willSendUnavailablePresence============', pres.tree())\r\n\t    this.presMap.length = 0;\r\n\t    this.members = {};\r\n\t    this.list_members = [];\r\n\t    this.roomjid = null;\r\n\t    this.connection.send(pres);\r\n\t  },\r\n\t  onPresence: function (pres) {\r\n\t    var from = pres.getAttribute('from');\r\n\t    var type = pres.getAttribute('type');\r\n\t    if (type != null) {\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    // Parse etherpad tag.\r\n\t    var etherpad = $(pres).find('etherpad');\r\n\t    if (etherpad.length) {\r\n\t      $(document).trigger('etherpadadded.muc', [from, etherpad.text()]);\r\n\t    }\r\n\t\r\n\t    // Parse prezi tag.\r\n\t    var presentation = $(pres).find('prezi');\r\n\t    if (presentation.length) {\r\n\t      var url = presentation.attr('url');\r\n\t      var current = presentation.find('>current').text();\r\n\t\r\n\t      //console.log('presentation info received from', from, url);\r\n\t\r\n\t      if (this.preziMap[from] == null) {\r\n\t        this.preziMap[from] = url;\r\n\t\r\n\t        $(document).trigger('presentationadded.muc', [from, url, current]);\r\n\t      }\r\n\t      else {\r\n\t        $(document).trigger('gotoslide.muc', [from, url, current]);\r\n\t      }\r\n\t    }\r\n\t    else if (this.preziMap[from] != null) {\r\n\t      var url = this.preziMap[from];\r\n\t      delete this.preziMap[from];\r\n\t      $(document).trigger('presentationremoved.muc', [from, url]);\r\n\t    }\r\n\t\r\n\t    // Parse audio info tag.\r\n\t    var audioMuted = $(pres).find('audiomuted');\r\n\t    if (audioMuted.length) {\r\n\t      $(document).trigger('audiomuted.muc', [from, audioMuted.text()]);\r\n\t    }\r\n\t\r\n\t    // Parse video info tag.\r\n\t    var videoMuted = $(pres).find('videomuted');\r\n\t    if (videoMuted.length) {\r\n\t      $(document).trigger('videomuted.muc', [from, videoMuted.text()]);\r\n\t    }\r\n\t\r\n\t    // is moderator\r\n\t    var configRole = $(pres).find('configRole').text();\r\n\t    if (configRole.length) {\r\n\t      if(configRole == 'CRUO' || configRole == 'CRUA'){\r\n\t        var isModerator = true;\r\n\t      }else {\r\n\t        var isModerator = false;\r\n\t      }\r\n\t      $(document).trigger('moderatored.muc', [from, isModerator]);\r\n\t    }\r\n\t\r\n\t    // Parse status.\r\n\t    if ($(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]>status[code=\"201\"]').length) {\r\n\t      // http://xmpp.org/extensions/xep-0045.html#createroom-instant\r\n\t      this.isOwner = true;\r\n\t      var create = $iq({type: 'set', to: this.roomjid})\r\n\t        .c('query', {xmlns: 'http://jabber.org/protocol/muc#owner'})\r\n\t        .c('x', {xmlns: 'jabber:x:data', type: 'submit'});\r\n\t      this.connection.sendIQ(create); // fire away\r\n\t    }\r\n\t\r\n\t    // Parse roles.\r\n\t    var member = {};\r\n\t    member.show = $(pres).find('>show').text();\r\n\t    member.status = '';\r\n\t    var tmp = $(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]>item');\r\n\t    member.affiliation = tmp.attr('affiliation');\r\n\t    member.role = tmp.attr('role');\r\n\t\r\n\t    // Focus recognition\r\n\t    member.jid = tmp.attr('jid') ? tmp.attr('jid') : from;\r\n\t    member.isFocus = false;\r\n\t    if (member.jid\r\n\t      && member.jid.indexOf(config.focusUserJid + \"/\") == 0) {\r\n\t      member.isFocus = true;\r\n\t    }\r\n\t\r\n\t    var nicktag = $(pres).find('nick[xmlns=\"http://jabber.org/protocol/nick\"]');\r\n\t    member.displayName = (nicktag.length > 0 ? nicktag.text() : null);\r\n\t    if(config.debug == true){\r\n\t      console.log('receive presence >>>>>>','\\r\\n', pres, '\\r\\n', '<<<<<<');\r\n\t    }\r\n\t\r\n\t    if (from && this.members[from] === undefined) {\r\n\t      // new participant\r\n\t      this.members[from] = member;\r\n\t      this.list_members.push(from);\r\n\t      $(document).trigger('entered.muc', [from, member, pres]);\r\n\t    }\r\n\t    $(document).trigger('presence.muc', [from, member, pres]);\r\n\t    $(document).trigger('presence.status', [pres]);\r\n\t    var ref = $(pres).find('>refIqStatus');\r\n\t    if(ref.length){\r\n\t      var cRef = ref.find('>refIqStatus') || null;\r\n\t      if(cRef && cRef.length){\r\n\t        var refCode = cRef.text() || null;\r\n\t        if(refCode == '301'){\r\n\t          $(document).trigger('manis.recorder.status.change', [true, from]);\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return true;\r\n\t  },\r\n\t\r\n\t  onParticipantLeave: function (from) {\r\n\t    delete this.members[from];\r\n\t    this.list_members.splice(this.list_members.indexOf(from), 1);\r\n\t    return true;\r\n\t  },\r\n\t\r\n\t  onPresenceUnavailable: function (pres) {\r\n\t    var from = pres.getAttribute('from');\r\n\t    // Status code 110 indicates that this notification is \"self-presence\".\r\n\t    // if (!$(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]>status[code=\"110\"]').length) {\r\n\t    this.onParticipantLeave(from);\r\n\t    $(document).trigger('left.muc', [from]);\r\n\t    // }\r\n\t    // If the status code is 110 this means we're leaving and we would like\r\n\t    // to remove everyone else from our view, so we trigger the event.\r\n\t    // else if (this.list_members.length > 1) {\r\n\t    //   for (var i = 0; i < this.list_members.length; i++) {\r\n\t    //     var member = this.list_members[i];\r\n\t    //     delete this.members[i];\r\n\t    //     this.list_members.splice(i, 1);\r\n\t    //     $(document).trigger('left.muc', member);\r\n\t    //   }\r\n\t    // }\r\n\t    // if ($(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]>status[code=\"307\"]').length) {\r\n\t    //   $(document).trigger('kicked.muc', [from]);\r\n\t    // }\r\n\t    return true;\r\n\t  },\r\n\t  onPresenceError: function (pres) {\r\n\t    var from = pres.getAttribute('from');\r\n\t    if ($(pres).find('>error[type=\"auth\"]>not-authorized[xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"]').length) {\r\n\t      $(document).trigger('passwordrequired.muc', [from]);\r\n\t    } else if ($(pres).find(\r\n\t        '>error[type=\"cancel\"]>not-allowed[xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"]').length) {\r\n\t      var toDomain = Strophe.getDomainFromJid(pres.getAttribute('to'));\r\n\t      if (toDomain === config.hosts.anonymousdomain) {\r\n\t        // we are connected with anonymous domain and only non anonymous users can create rooms\r\n\t        // we must authorize the user\r\n\t        $(document).trigger('passwordrequired.main');\r\n\t      } else {\r\n\t        console.warn('onPresError ', pres);\r\n\t        //messageHandler.openReportDialog(null, 'Oops! Something went wrong and we couldn`t connect to the conference.',pres);\r\n\t      }\r\n\t    } else {\r\n\t      console.warn('onPresError ', pres);\r\n\t      //messageHandler.openReportDialog(null, 'Oops! Something went wrong and we couldn`t connect to the conference.', pres);\r\n\t    }\r\n\t    return true;\r\n\t  },\r\n\t  sendMessage: function (body, nickname) {\r\n\t    var msg = $msg({to: this.roomjid, type: 'groupchat'});\r\n\t    msg.c('body', body).up();\r\n\t    if (nickname) {\r\n\t      msg.c('nick', {xmlns: 'http://jabber.org/protocol/nick'}).t(nickname).up();\r\n\t    }\r\n\t    this.connection.send(msg);\r\n\t    // if (APIConnector.isEnabled() && APIConnector.isEventEnabled(\"outgoingMessage\")) {\r\n\t    //   APIConnector.triggerEvent(\"outgoingMessage\", {\"message\": body});\r\n\t    // }\r\n\t    console.log('send message ', body, nickname);\r\n\t  },\r\n\t  setSubject: function (subject) {\r\n\t    var msg = $msg({to: this.roomjid, type: 'groupchat'});\r\n\t    msg.c('subject', subject);\r\n\t    this.connection.send(msg);\r\n\t    //console.log(\"topic changed to \" + subject);\r\n\t  },\r\n\t  onMessage: function (msg) {\r\n\t    // FIXME: this is a hack. but jingle on muc makes nickchanges hard\r\n\t    // console.log('msg ***************** ', msg);\r\n\t    var from = msg.getAttribute('from');\r\n\t\r\n\t    var screen = $(msg).find('>screen[xmlns=\"http://jitsi.org/protocol/screen\"]');\r\n\t    if (screen.length) {\r\n\t      var screenStatus = $(msg).find('property').attr('value');\r\n\t      if(window.isUsingScreenStream == true && connection.jingle.localScreen != null){\r\n\t        console.log('sssssssssssssssssssssss222222222222',screenStatus);\r\n\t        $(document).trigger('manis.been.stop.screen.share');\r\n\t      }\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    var isTextMsgWithParticipant = $(msg).find('>nick[xmlns=\"http://jabber.org/protocol/nick\"]').text() || false;\r\n\t    var nick = $(msg).find('>nick[xmlns=\"http://jabber.org/protocol/nick\"]').text() || Strophe.getResourceFromJid(from);\r\n\t\r\n\t    var txt = $(msg).find('>body').text();\r\n\t    var type = msg.getAttribute(\"type\");\r\n\t    if (type == \"error\") {\r\n\t      // Chat.chatAddError($(msg).find('>text').text(), txt);\r\n\t      console.log(\"message error\", $(msg).find('>text').text(), txt);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    /**\r\n\t    <!-- 显示消息 -->\r\n\t    <message id=\"zb4ey-381\" to=\"0fd1da950287c17e@61.149.55.24/webad9eef98259a3c937880d3516d4061c9\"\r\n\t             from=\"eccd5819a60f3fef@10.20.20.104/focusmastera892483aaae80c1cf598d163d0d6c011\" type=\"groupchat\">\r\n\t      <body xmlns=\"http://igniterealtime.org/protocol/stage\" xml:lang=\"\"\r\n\t            jid=\"fa4d25d33f3e7c62@61.149.55.24/webc5c513a667b106c7b42a389494780deb\" screen=\"false\">\r\n\t        webc5c513a667b106c7b42a389494780deb\r\n\t      </body>\r\n\t      <resource xmlns=\"http://igniterealtime.org/protocol/endpoint\">webc5c513a667b106c7b42a389494780deb</resource>\r\n\t      <ssrc xmlns=\"http://igniterealtime.org/protocol/streamssrc\">156757757</ssrc>\r\n\t      <splitScreen xmlns=\"http://igniterealtime.org/protocol/splitScreen\">0</splitScreen>\r\n\t      <display xmlns=\"http://igniterealtime.org/protocol/display\">\r\n\t        webc5c513a667b106c7b42a389494780deb_156757757,webad9eef98259a3c937880d3516d4061c9_3681994858\r\n\t      </display>\r\n\t    </message>\r\n\t    * */\r\n\t\r\n\t    var displaySort = $(msg).find('>display[xmlns=\"http://igniterealtime.org/protocol/display\"]');\r\n\t    if(displaySort.length){\r\n\t      var displayMode = $(msg).find('>splitScreen[xmlns=\"http://igniterealtime.org/protocol/splitScreen\"]').text() || '0';\r\n\t      var sortParticipants = $(msg).find('>display[xmlns=\"http://igniterealtime.org/protocol/display\"]').text() || '';\r\n\t      var sort = [];\r\n\t      if(sortParticipants){\r\n\t        var sortArr = sortParticipants.split(',');\r\n\t        sortArr.forEach(function(item){\r\n\t          var p = {};\r\n\t          var t = item.split('_');\r\n\t          p.endpoint = t[0];\r\n\t          p.ssrc = t[1];\r\n\t          sort.push(p);\r\n\t        });\r\n\t      }\r\n\t      // console.log('on sort participants from focus: ', sort, ' display model: ', displayMode);\r\n\t      $(document).trigger('manis.on.participants.sort.change', [sort, displayMode]);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t\r\n\t\r\n\t    // var displayMode = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/splitScreen\"]');\r\n\t    // if (displayMode.length) {\r\n\t    //   // console.log('on display mode change msg : ', msg, 'mode', txt);\r\n\t    //   var delay = $(msg).find('>delay[xmlns=\"urn:xmpp:delay\"]');\r\n\t    //   if (delay.length) {\r\n\t    //     // console.log('delay display mode change msg ');\r\n\t    //   } else {\r\n\t    //     $(document).trigger('manis.display.mode.changed', [txt]);\r\n\t    //   }\r\n\t    //   return true;\r\n\t    // }\r\n\t\r\n\t    var roomLock = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/roomlock\"]');\r\n\t    if(roomLock.length){\r\n\t      var lockStatus = roomLock.find('>status').text();\r\n\t      $(document).trigger('manis.room.lock.status.change', [lockStatus]);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    // var mainDisplay = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/stage\"]');\r\n\t    // if (mainDisplay.length) {\r\n\t    //   var endpoint = $(msg).find('>resource[xmlns=\"http://igniterealtime.org/protocol/endpoint\"]') ? $(msg).find('>resource[xmlns=\"http://igniterealtime.org/protocol/endpoint\"]').text() : txt;\r\n\t    //   var streamSSRC = $(msg).find('>ssrc[xmlns=\"http://igniterealtime.org/protocol/streamssrc\"]') ? $(msg).find('>ssrc[xmlns=\"http://igniterealtime.org/protocol/streamssrc\"]').text() : null;\r\n\t    //   // console.log('on main display source change msg : ', msg, endpoint, streamSSRC);\r\n\t    //   var delay = $(msg).find('>delay[xmlns=\"urn:xmpp:delay\"]');\r\n\t    //   if (delay.length) {\r\n\t    //     // console.log('delay main display change msg ');\r\n\t    //   } else {\r\n\t    //     $(document).trigger('manis.main.display.changed', [endpoint, streamSSRC]);\r\n\t    //   }\r\n\t    //   return true;\r\n\t    // }\r\n\t\r\n\t    var annotation = $(msg).find('>annotate[xmlns=\"http://igniterealtime.org/protocol/annotate\"]');\r\n\t    if(annotation.length){\r\n\t        var urlData = annotation.attr('url');\r\n\t        if (urlData.indexOf('getInit') > -1) {\r\n\t          $(document).trigger('manis.on.annotation.get.init', [{\r\n\t              from: from,\r\n\t              action: annotation.attr('action'),\r\n\t              data: urlData\r\n\t          }]);\r\n\t          return true;\r\n\t        }\r\n\t        $(document).trigger('manis.on.annotation', [{\r\n\t          from: from,\r\n\t          action: annotation.attr('action'),\r\n\t          data: urlData\r\n\t        }]);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    var hardRemove = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/hardremove\"]');\r\n\t    if (hardRemove.length) {\r\n\t      var streamSSRC = $(msg).find('>ssrc[xmlns=\"http://igniterealtime.org/protocol/streamssrc\"]') ? $(msg).find('>ssrc[xmlns=\"http://igniterealtime.org/protocol/streamssrc\"]').text() : null;\r\n\t      // console.log('hard remove stream msg : ', msg, endpoint, streamSSRC);\r\n\t      $(document).trigger('mains.on.stream.removed', ['video', streamSSRC, true]);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    var subject = $(msg).find('>subject');\r\n\t    if (subject.length) {\r\n\t      var subjectText = subject.text();\r\n\t      if (subjectText || subjectText == \"\") {\r\n\t        // Chat.chatSetSubject(subjectText);\r\n\t        console.log(\"Subject is changed to \" + subjectText);\r\n\t      }\r\n\t    }\r\n\t    // 会控操作消息\r\n\t    if (from.lastIndexOf(\"admin\") != -1) {\r\n\t      // ManisManagement.onManagementMsg(txt, nick);\r\n\t      return true;\r\n\t    }\r\n\t    // 会议室成员发送的消息\r\n\t    if (txt && isTextMsgWithParticipant) {\r\n\t      $(document).trigger('onmessage.muc', [from, nick, txt]);\r\n\t    }\r\n\t    return true;\r\n\t  },\r\n\t\r\n\t  handleRecordResultIq: function (iq) {\r\n\t    var from = $(iq).attr('from');\r\n\t    var recordResult = $(iq).find('>ref[xmlns=\"urn:xmpp:rayo:1\"]');\r\n\t    if(recordResult.length){\r\n\t      console.log('handle recorder result iq', iq, from);\r\n\t      var uriCode = recordResult.attr('uri') || null;\r\n\t      if(uriCode == '301'){\r\n\t        // record start\r\n\t        $(document).trigger('manis.recorder.status.change', [true, from]);\r\n\t      }\r\n\t    }\r\n\t    return true;\r\n\t  },\r\n\t/*  lockRoom: function (key) {\r\n\t    //http://xmpp.org/extensions/xep-0045.html#roomconfig\r\n\t    var ob = this;\r\n\t    this.connection.sendIQ($iq({\r\n\t        to: this.roomjid,\r\n\t        type: 'get'\r\n\t      }).c('query', {xmlns: 'http://jabber.org/protocol/muc#owner'}),\r\n\t      function (res) {\r\n\t        if ($(res).find('>query>x[xmlns=\"jabber:x:data\"]>field[var=\"muc#roomconfig_roomsecret\"]').length) {\r\n\t          var formsubmit = $iq({\r\n\t            to: ob.roomjid,\r\n\t            type: 'set'\r\n\t          }).c('query', {xmlns: 'http://jabber.org/protocol/muc#owner'});\r\n\t          formsubmit.c('x', {xmlns: 'jabber:x:data', type: 'submit'});\r\n\t          formsubmit.c('field', {'var': 'FORM_TYPE'}).c('value').t('http://jabber.org/protocol/muc#roomconfig').up().up();\r\n\t          formsubmit.c('field', {'var': 'muc#roomconfig_roomsecret'}).c('value').t(key).up().up();\r\n\t          formsubmit.c('field', {'var': 'muc#roomconfig_passwordprotectedroom'}).c('value').t('1').up().up();\r\n\t\r\n\t          this.connection.sendIQ(formsubmit,\r\n\t            function (res) {\r\n\t              // password is required\r\n\t              if (sharedKey) {\r\n\t                //console.log('set room password');\r\n\t                Toolbar.lockLockButton();\r\n\t              }\r\n\t              else {\r\n\t                //console.log('removed room password');\r\n\t                Toolbar.unlockLockButton();\r\n\t              }\r\n\t            },\r\n\t            function (err) {\r\n\t              console.warn('setting password failed', err);\r\n\t              messageHandler.showError('Lock failed',\r\n\t                'Failed to lock conference.',\r\n\t                err);\r\n\t              setSharedKey('');\r\n\t            }\r\n\t          );\r\n\t        } else {\r\n\t          console.warn('room passwords not supported');\r\n\t          messageHandler.showError('Warning',\r\n\t            'Room passwords are currently not supported.');\r\n\t          setSharedKey('');\r\n\t\r\n\t        }\r\n\t      },\r\n\t      function (err) {\r\n\t        console.warn('setting password failed', err);\r\n\t        messageHandler.showError('Lock failed',\r\n\t          'Failed to lock conference.',\r\n\t          err);\r\n\t        setSharedKey('');\r\n\t      }\r\n\t    );\r\n\t  },*/\r\n\t  kick: function (jid) {\r\n\t    var kickIQ = $iq({to: this.roomjid, type: 'set'})\r\n\t      .c('query', {xmlns: 'http://jabber.org/protocol/muc#admin'})\r\n\t      .c('item', {nick: Strophe.getResourceFromJid(jid), role: 'none'})\r\n\t      .c('reason').t('You have been kicked.').up().up().up();\r\n\t\r\n\t    this.connection.sendIQ(\r\n\t      kickIQ,\r\n\t      function (result) {\r\n\t        //console.log('Kick participant with jid: ', jid, result);\r\n\t      },\r\n\t      function (error) {\r\n\t        //console.log('Kick participant error: ', error);\r\n\t      });\r\n\t  },\r\n\t  sendPresence: function () {\r\n\t    if (!this.presMap['to']) {\r\n\t      // Too early to send presence - not initialized\r\n\t      return;\r\n\t    }\r\n\t\r\n\t    // BAO handle jabber.org different from jitsi extensions\r\n\t    // OF does not pass on jitsi extensions inside <x>\r\n\t\r\n\t    if (this.presMap['password']) {\r\n\t      var presx = $pres({to: this.presMap['to']});\r\n\t      presx.c('x', {xmlns: 'http://jabber.org/protocol/muc'});\r\n\t      presx.c('password').t(this.presMap['password']).up();\r\n\t\r\n\t      // Send XEP-0115 'c' stanza that contains our capabilities info\r\n\t      if (connection.caps) {\r\n\t        connection.caps.node = config.clientNode;\r\n\t        presx.c('c', connection.caps.generateCapsAttrs()).up();\r\n\t      }\r\n\t\r\n\t      connection.send(presx);\r\n\t      this.presMap['password'] = null;\r\n\t      return;\r\n\t    }\r\n\t\r\n\t    var pres = $pres({to: this.presMap['to'], from: connection.jid});\r\n\t    pres.c('x', {xmlns: this.presMap['xns']});\r\n\t\r\n\t    pres.c('user-agent', {xmlns: 'http://jitsi.org/jitmeet/user-agent'})\r\n\t      .t(navigator.userAgent).up();\r\n\t\r\n\t    if (this.presMap['bridgeIsDown']) {\r\n\t      pres.c('bridgeIsDown').up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['configRole']) {\r\n\t      pres.c('configRole').t(this.presMap['configRole']).up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['email']) {\r\n\t      pres.c('email').t(this.presMap['email']).up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['userId']) {\r\n\t      pres.c('userId').t(this.presMap['userId']).up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['avartar']) {\r\n\t      pres.c('avartar', {xmlns: \"http://jabber.org/protocol/avartar\"}).t(this.presMap['avartar']).up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['displayName']) {\r\n\t      // XEP-0172\r\n\t      pres.c('nick', {xmlns: 'http://jabber.org/protocol/nick'})\r\n\t        .t(this.presMap['displayName']).up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['audions']) {\r\n\t      pres.c('audiomuted', {xmlns: this.presMap['audions']})\r\n\t        .t(this.presMap['audiomuted']).up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['videons']) {\r\n\t      pres.c('videomuted', {xmlns: this.presMap['videons']})\r\n\t        .t(this.presMap['videomuted']).up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['moderatorns']) {\r\n\t      pres.c('isModerator', {xmlns: this.presMap['moderatorns']})\r\n\t        .t(this.presMap['isModerator']).up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['masterStreamSSRC']) {\r\n\t      pres.c('withMasterStream', {value: this.presMap['withMasterStream']})\r\n\t        .t(this.presMap['masterStreamSSRC']).up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['statsns']) {\r\n\t      var stats = pres.c('stats', {xmlns: this.presMap['statsns']});\r\n\t      for (var stat in this.presMap[\"stats\"])\r\n\t        if (this.presMap[\"stats\"][stat] != null)\r\n\t          stats.c(\"stat\", {name: stat, value: this.presMap[\"stats\"][stat]}).up();\r\n\t      pres.up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['prezins']) {\r\n\t      pres.c('prezi',\r\n\t        {\r\n\t          xmlns: this.presMap['prezins'],\r\n\t          'url': this.presMap['preziurl']\r\n\t        })\r\n\t        .c('current').t(this.presMap['prezicurrent']).up().up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['etherpadns']) {\r\n\t      pres.c('etherpad', {xmlns: this.presMap['etherpadns']})\r\n\t        .t(this.presMap['etherpadname']).up();\r\n\t    }\r\n\t\r\n\t    if (this.presMap['medians']) {\r\n\t      pres.c('media', {xmlns: this.presMap['medians']});\r\n\t      var sourceNumber = 0;\r\n\t      Object.keys(this.presMap).forEach(function (key) {\r\n\t        if (key.indexOf('source') >= 0) {\r\n\t          sourceNumber++;\r\n\t        }\r\n\t      });\r\n\t      if (sourceNumber > 0)\r\n\t        for (var i = 1; i <= sourceNumber / 3; i++) {\r\n\t          pres.c('source',\r\n\t            {\r\n\t              type: this.presMap['source' + i + '_type'],\r\n\t              ssrc: this.presMap['source' + i + '_ssrc'],\r\n\t              direction: this.presMap['source' + i + '_direction']\r\n\t              || 'sendrecv'\r\n\t            }\r\n\t          ).up();\r\n\t        }\r\n\t    }\r\n\t\r\n\t    pres.up();\r\n\t    if(config.debug == true){\r\n\t      console.log('send presence <<<<<<<','\\r\\n', pres.tree(), '\\r\\n', '>>>>>>>');\r\n\t    }\r\n\t    // console.log('send presence at : ', new Date());\r\n\t    connection.send(pres);\r\n\t    $(document).trigger('presence.status', [pres.tree()]);\r\n\t  },\r\n\t  addDisplayNameToPresence: function (displayName) {\r\n\t    this.presMap['displayName'] = displayName;\r\n\t  },\r\n\t  addMediaToPresence: function (sourceNumber, mtype, ssrcs, direction) {\r\n\t    if (!this.presMap['medians'])\r\n\t      this.presMap['medians'] = 'http://estos.de/ns/mjs';\r\n\t\r\n\t    this.presMap['source' + sourceNumber + '_type'] = mtype;\r\n\t    this.presMap['source' + sourceNumber + '_ssrc'] = ssrcs;\r\n\t    this.presMap['source' + sourceNumber + '_direction'] = direction;\r\n\t  },\r\n\t  clearPresenceMedia: function () {\r\n\t    var self = this;\r\n\t    Object.keys(this.presMap).forEach(function (key) {\r\n\t      if (key.indexOf('source') != -1) {\r\n\t        delete self.presMap[key];\r\n\t      }\r\n\t    });\r\n\t  },\r\n\t  addPreziToPresence: function (url, currentSlide) {\r\n\t    this.presMap['prezins'] = 'http://jitsi.org/jitmeet/prezi';\r\n\t    this.presMap['preziurl'] = url;\r\n\t    this.presMap['prezicurrent'] = currentSlide;\r\n\t  },\r\n\t  removePreziFromPresence: function () {\r\n\t    delete this.presMap['prezins'];\r\n\t    delete this.presMap['preziurl'];\r\n\t    delete this.presMap['prezicurrent'];\r\n\t  },\r\n\t  addCurrentSlideToPresence: function (currentSlide) {\r\n\t    this.presMap['prezicurrent'] = currentSlide;\r\n\t  },\r\n\t  getPrezi: function (roomjid) {\r\n\t    return this.preziMap[roomjid];\r\n\t  },\r\n\t  addEtherpadToPresence: function (etherpadName) {\r\n\t    this.presMap['etherpadns'] = 'http://jitsi.org/jitmeet/etherpad';\r\n\t    this.presMap['etherpadname'] = etherpadName;\r\n\t  },\r\n\t  addAudioInfoToPresence: function (isMuted) {\r\n\t    this.presMap['audions'] = 'http://jitsi.org/jitmeet/audio';\r\n\t    this.presMap['audiomuted'] = isMuted.toString();\r\n\t  },\r\n\t  addVideoInfoToPresence: function (isMuted) {\r\n\t    this.presMap['videons'] = 'http://jitsi.org/jitmeet/video';\r\n\t    this.presMap['videomuted'] = isMuted.toString();\r\n\t  },\r\n\t  addConnectionInfoToPresence: function (stats) {\r\n\t    this.presMap['statsns'] = 'http://jitsi.org/jitmeet/stats';\r\n\t    this.presMap['stats'] = stats;\r\n\t  },\r\n\t  addConfigRoleToPresence: function (configRole) {\r\n\t    this.presMap['configRole'] = configRole;\r\n\t  },\r\n\t  findJidFromResource: function (resourceJid) {\r\n\t    if (resourceJid &&\r\n\t      resourceJid === Strophe.getResourceFromJid(connection.emuc.myroomjid)) {\r\n\t      return connection.emuc.myroomjid;\r\n\t    }\r\n\t    var peerJid = null;\r\n\t    Object.keys(this.members).some(function (jid) {\r\n\t      peerJid = jid;\r\n\t      return Strophe.getResourceFromJid(jid) === resourceJid;\r\n\t    });\r\n\t    return peerJid;\r\n\t  },\r\n\t  addBridgeIsDownToPresence: function () {\r\n\t    this.presMap['bridgeIsDown'] = true;\r\n\t  },\r\n\t  addEmailToPresence: function (email) {\r\n\t    this.presMap['email'] = email;\r\n\t  },\r\n\t  addIsModeratorToPresence: function (isModerator) {\r\n\t    this.presMap['moderatorns'] = 'http://jitsi.org/jitmeet/moderator';\r\n\t    this.presMap['isModerator'] = isModerator;\r\n\t  },\r\n\t  addMasterStreamToPresence: function (withMasterStream, masterStreamSSRC) {\r\n\t    this.presMap['withMasterStream'] = withMasterStream;\r\n\t    this.presMap['masterStreamSSRC'] = masterStreamSSRC;\r\n\t  },\r\n\t  addUserIdToPresence: function (userId) {\r\n\t    this.presMap['userId'] = userId;\r\n\t  },\r\n\t  isModerator: function () {\r\n\t    return this.role === 'moderator';\r\n\t  },\r\n\t\r\n\t  addAvartarToPresence: function (avartar) {\r\n\t    this.presMap['avartar'] = avartar;\r\n\t  },\r\n\t});\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by Qiang.Deng on 2017/7/5.\r\n\t */\r\n\tvar Status = __webpack_require__(6);\r\n\tvar Functions = __webpack_require__(27);\r\n\t\r\n\tvar ManisManagement = {\r\n\t\r\n\t  onMsg: null,\r\n\t\r\n\t  onMsgTime: null,\r\n\t\r\n\t  allMsg: 0,\r\n\t\r\n\t  audioRetryTimes: 10,//times, first enter try do audio mute or not\r\n\t\r\n\t  videoRetryTimes: 10,//times, first enter try do video close or not\r\n\t\r\n\t  managerSetAudioMuteTry: null,\r\n\t\r\n\t  managerSetVideoMuteTry: null,\r\n\t\r\n\t  handleManageMsg: function (msg) {\r\n\t\r\n\t    console.log('handle manage message from administrator: ', msg);\r\n\t\r\n\t    var systemUpgrade = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/upgrade\"]');\r\n\t    if(systemUpgrade.length){\r\n\t      //@Comment upcoming, inprogress, complete\r\n\t      var section = systemUpgrade.text() || 'upcoming';\r\n\t      $(document).trigger('manis.on.system.upgrade', [section]);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    // all audio control\r\n\t    var allAudioControl = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/allAudio\"]');\r\n\t    if(allAudioControl.length){\r\n\t      var allAudioMute = allAudioControl.text() == 'true';\r\n\t      this.setAllAudioMute(allAudioMute);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    // all video control\r\n\t    var allVideoControl = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/allVideo\"]');\r\n\t    if(allVideoControl.length){\r\n\t      var allVideoMute = allVideoControl.text() == 'true';\r\n\t      this.setAllVideoMute(allVideoMute);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    // audio control someone\r\n\t    var singleAudioControl = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/audio\"]');\r\n\t    if(singleAudioControl.length){\r\n\t      var singleAudioMute = singleAudioControl.text() == 'true';\r\n\t      this.managerSetAudioMute(singleAudioMute);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    // video control someone\r\n\t    var singleAudioControl = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/video\"]');\r\n\t    if(singleAudioControl.length){\r\n\t      var singleAudioMute = singleAudioControl.text() == 'true';\r\n\t      this.managerSetVideoMute(singleAudioMute);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    // room will close\r\n\t    var roomWillClose = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/toClose\"]');\r\n\t    if(roomWillClose.length){\r\n\t      var timeLeft = roomWillClose.attr('time-left') || 0;\r\n\t      $(document).trigger('manis.on.room.countdown', [timeLeft]);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    // room moderator lost\r\n\t    var moderatorLost = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/lostModerator\"]');\r\n\t    if(moderatorLost.length){\r\n\t      var moderatorLostStatus = moderatorLost.text() == 'true';\r\n\t      var timeLeft = moderatorLost.attr('time-left') || null;\r\n\t      $(document).trigger('manis.on.with.moderator.changed',[!moderatorLostStatus, timeLeft]);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    // room lock\r\n\t    var roomLock = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/lock\"]');\r\n\t    if(roomLock.length){\r\n\t      var lockStatus = roomLock.text() == 'true';\r\n\t      if (Functions.isAdmin()) {\r\n\t        this.manageLockRoom(lockStatus);\r\n\t      }else {\r\n\t        $(document).trigger('manis.room.lock.status.change', [lockStatus]);\r\n\t      }\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    // handle text message\r\n\t    var groupChat = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/groupChat\"]');\r\n\t    if(groupChat.length){\r\n\t      textContent = groupChat.text() || '';\r\n\t      this.onManagementMsg(textContent, null);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    var privateChat = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/privateChat\"]');\r\n\t    if(privateChat.length){\r\n\t      textContent = privateChat.text() || '';\r\n\t      this.onManagementMsg(textContent, null);\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    var moderatorModify = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/moderator\"]');\r\n\t    if(moderatorModify.length){\r\n\t      var moderatorSwitch = moderatorModify.attr('moderator');\r\n\t      var jid = moderatorModify.text() || '';\r\n\t      if(jid){\r\n\t        if(jid == connection.jid){\r\n\t          console.log('manager change my role : ', moderatorSwitch, ' at : ', new Date());\r\n\t          var isAdmin = moderatorSwitch == 'true';\r\n\t          Functions.setAdmin(isAdmin);\r\n\t          connection.emuc.addConfigRoleToPresence(config.role);\r\n\t          connection.emuc.addIsModeratorToPresence(Functions.isAdmin());\r\n\t          connection.emuc.sendPresence();\r\n\t          if(isAdmin){\r\n\t            // on set to moderator by administrator\r\n\t            $(document).trigger('manis.on.grant.admin');\r\n\t          }else {\r\n\t            // on remove moderator by administrator\r\n\t            $(document).trigger('manis.on.remove.admin');\r\n\t          }\r\n\t        }else {\r\n\t          // jid != connection.jis  && I am moderator, reset config.role to 'NONE'\r\n\t          if(Functions.isAdmin()){\r\n\t            console.log('manager change moderator from: ', connection.jid, ' to :', jid, ' at: ', new Date());\r\n\t            Functions.setAdmin(false);\r\n\t            connection.emuc.addConfigRoleToPresence(config.role);\r\n\t            connection.emuc.addIsModeratorToPresence(Functions.isAdmin());\r\n\t            connection.emuc.sendPresence();\r\n\t            $(document).trigger('manis.on.remove.admin');\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t\r\n\t    return true;\r\n\t  },\r\n\t\r\n\t  // 接收到会控消息\r\n\t  onManagementMsg: function (msg, nick) {\r\n\t    this.textMsgFromManager(msg, nick);\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   * 文本消息\r\n\t   * @param message\r\n\t   * @param nick\r\n\t   * @returns {boolean}\r\n\t   */\r\n\t  textMsgFromManager: function (message, nick) {\r\n\t      var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n\t      if(lang == 'en'){\r\n\t        var sender = 'Manager';\r\n\t      }else {\r\n\t        var sender = '会控管理员';\r\n\t      }\r\n\t      $(document).trigger('onmessage.muc', [config.focusUserJid, nick ? nick : sender, message]);\r\n\t      return true;\r\n\t  },\r\n\t\r\n\t  // 全员静音\r\n\t  setAllAudioMute: function (muteStatus) {\r\n\t    // ignore moderator while set all\r\n\t    if((config.role == 'CRUA' || config.role == 'CRUO') && muteStatus ){\r\n\t      return true;\r\n\t    }\r\n\t    this.managerSetAudioMute(muteStatus);\r\n\t  },\r\n\t\r\n\t  // 全员禁视频\r\n\t  setAllVideoMute: function (muteStatus) {\r\n\t    // ignore moderator while set all\r\n\t    if((config.role == 'CRUA' || config.role == 'CRUO') && muteStatus ){\r\n\t      return true;\r\n\t    }\r\n\t    this.managerSetVideoMute(muteStatus);\r\n\t  },\r\n\t\r\n\t  // 锁定会议室\r\n\t  manageLockRoom: function (isLockRoom) {\r\n\t    if (isLockRoom == window.lock) {\r\n\t      console.log('now room is : ', isLockRoom, 'do nothing');\r\n\t      $(document).trigger('manis.room.lock.status.change', [isLockRoom]);\r\n\t      return true;\r\n\t    }\r\n\t    try {\r\n\t      var username = manisConfg.mUserId;\r\n\t      var roomNumber = roomName.split('@')[0];\r\n\t      var _header = Functions.authoredHeader();\r\n\t      $.ajax({\r\n\t        url: window.serverPath + \"/conference/lock?i=\" + username + \"&r=\" + roomNumber + \"&l=\" + isLockRoom,\r\n\t        headers: _header,\r\n\t        // dataType: 'jsonp',\r\n\t        dataType: 'json',\r\n\t        processData: false,\r\n\t        type: 'get',\r\n\t        success: function (rs) {\r\n\t          if (rs.code == 200) {\r\n\t            window.lock = isLockRoom;\r\n\t            console.info('lock or unlock room by management success, now room lock status : ', isLockRoom);\r\n\t            $(document).trigger('manis.room.lock.status.change', [isLockRoom]);\r\n\t          }\r\n\t        }\r\n\t      });\r\n\t    } catch (e) {\r\n\t      console.error('lock or unlock room by management failed, now room lock status : ', !isLockRoom);\r\n\t    }\r\n\t  },\r\n\t\r\n\t  // 结束会议\r\n\t  hangup: function () {\r\n\t    $(document).trigger('manis.management.kill', [true]);\r\n\t  },\r\n\t\r\n\t  // 开关声音\r\n\t  managerSetAudioMute: function (mute) {\r\n\t      // if (window.participants.length < 2) {\r\n\t      //     console.warn('other participant not join yet');\r\n\t      //     if(this.audioRetryTimes > 0) {\r\n\t      //         this.managerSetAudioMuteTry = setTimeout(function () {\r\n\t      //             clearTimeout(ManisManagement.managerSetAudioMuteTry);\r\n\t      //             ManisManagement.audioRetryTimes--;\r\n\t      //             ManisManagement.managerSetAudioMute(mute);\r\n\t      //         }, 2000);\r\n\t      //     }\r\n\t      //     return true;\r\n\t      // }\r\n\t      // this.audioRetryTimes = 0;\r\n\t\r\n\t      Functions.setAudioMute(mute, function(){\r\n\t          window.forceMuted = mute;\r\n\t          $(document).trigger('onmute.audio.muc', [mute]);\r\n\t          // $(document).trigger('audiomuted.muc', [connection.jid, mute.toString()]);\r\n\t      }, function (e) {\r\n\t          console.error('managerSetAudioMute ', e);\r\n\t      });\r\n\t    return true;\r\n\t  },\r\n\t\r\n\t  // 开关视频\r\n\t  managerSetVideoMute: function (mute) {\r\n\t    // if (window.participants.length < 2) {\r\n\t    //   console.warn('other participant not join yet');\r\n\t    //     if(this.videoRetryTimes > 0) {\r\n\t    //         this.managerSetVideoMuteTry = setTimeout(function () {\r\n\t    //             clearTimeout(ManisManagement.managerSetVideoMuteTry);\r\n\t    //             ManisManagement.videoRetryTimes--;\r\n\t    //             ManisManagement.managerSetVideoMute(mute);\r\n\t    //         }, 2000);\r\n\t    //     }\r\n\t    //   return true;\r\n\t    // }\r\n\t    // this.videoRetryTimes = 0;\r\n\t\r\n\t    Functions.setVideoMute(mute, function () {\r\n\t      // $(document).trigger('videomuted.muc', [connection.jid, mute]);\r\n\t      $(document).trigger('onmute.video.muc', [mute]);\r\n\t    }, function (error) {\r\n\t      console.error('manage set video mute switch failed ', error);\r\n\t    });\r\n\t\r\n\t  },\r\n\t};\r\n\t\r\n\tmodule.exports = ManisManagement;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by Deng.Qiang on 2016/12/13.\r\n\t */\r\n\t\r\n\tvar ConnectionQuality = __webpack_require__(7);\r\n\tvar StatsCollector = __webpack_require__(8);\r\n\tvar LocalStatsCollector = __webpack_require__(9);\r\n\tvar AudioLevels = __webpack_require__(10);\r\n\tvar ManisStream = __webpack_require__(11);\r\n\tvar ManisResponse = __webpack_require__(26);\r\n\tvar ManisFunctions = __webpack_require__(27);\r\n\tvar ErrorCode = __webpack_require__(28);\r\n\tvar P2P = __webpack_require__(32);\r\n\tvar adapter = __webpack_require__(12);\r\n\t\r\n\t/**\r\n\t * Starts the {@link StatsCollector} if the feature is enabled in config.js.\r\n\t */\r\n\tfunction startRtpStatsCollector() {\r\n\t  stopRTPStatsCollector();\r\n\t  if (config.enableRtpStats) {\r\n\t    statsCollector = new StatsCollector(\r\n\t      getConferenceHandler().peerconnection, 200, audioLevelUpdated, 2000,\r\n\t        ConnectionQuality.updateLocalStats);\r\n\t    statsCollector.start();\r\n\t  }\r\n\t}\r\n\t\r\n\t\r\n\tfunction stopRTPStatsCollector() {\r\n\t  if (statsCollector) {\r\n\t    statsCollector.stop();\r\n\t    statsCollector = null;\r\n\t    ConnectionQuality.stopSendingStats();\r\n\t  }\r\n\t}\r\n\t\r\n\tfunction getConferenceHandler() {\r\n\t  return activecall;\r\n\t}\r\n\t\r\n\tfunction audioLevelUpdated(jid, audioLevel) {\r\n\t  var resourceJid;\r\n\t  if (jid === LocalStatsCollector.LOCAL_JID) {\r\n\t    resourceJid = AudioLevels.LOCAL_LEVEL;\r\n\t    if (isAudioMuted()) {\r\n\t      audioLevel = 0;\r\n\t    }\r\n\t  }\r\n\t  else {\r\n\t    resourceJid = Strophe.getResourceFromJid(jid);\r\n\t  }\r\n\t\r\n\t  AudioLevels.updateAudioLevel(resourceJid, audioLevel);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Checks whether the audio is muted or not.\r\n\t * @returns {boolean} true if audio is muted and false if not.\r\n\t */\r\n\t\r\n\tfunction isAudioMuted() {\r\n\t  var localAudio = connection.jingle.localAudio;\r\n\t  for (var idx = 0; idx < localAudio.getAudioTracks().length; idx++) {\r\n\t    if (localAudio.getAudioTracks()[idx].enabled === true)\r\n\t      return false;\r\n\t  }\r\n\t  return true;\r\n\t};\r\n\t\r\n\t\r\n\tfunction disposeConference(onUnload) {\r\n\t  var handler = getConferenceHandler();\r\n\t  if (handler && handler.peerconnection) {\r\n\t    // FIXME: probably removing streams is not required and close() should\r\n\t    // be enough\r\n\t    if (connection.jingle.localAudio) {\r\n\t      handler.peerconnection.removeStream(connection.jingle.localAudio, onUnload);\r\n\t    }\r\n\t    if (connection.jingle.localVideo) {\r\n\t      handler.peerconnection.removeStream(connection.jingle.localVideo, onUnload);\r\n\t    }\r\n\t    if (connection.jingle.localScreen) {\r\n\t      handler.peerconnection.removeStream(connection.jingle.localScreen, onUnload);\r\n\t      connection.jingle.localScreen = null;\r\n\t      window.localSSRCS = [];\r\n\t    }\r\n\t    handler.peerconnection.close();\r\n\t  }\r\n\t  stopRTPStatsCollector();\r\n\t  if (onUnload) {\r\n\t    stopLocalRtpStatsCollector();\r\n\t  }\r\n\t  connection.ofmuc.appDestory();\r\n\t  connection.ofmuc.appStop();\r\n\t  activecall = null;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Stops the {@link LocalStatsCollector}.\r\n\t */\r\n\tfunction stopLocalRtpStatsCollector() {\r\n\t  if (localStatsCollector) {\r\n\t    localStatsCollector.stop();\r\n\t    localStatsCollector = null;\r\n\t  }\r\n\t}\r\n\t\r\n\tfunction modifyScreenStream(stream, successCallback, errorCallback, isRemove) {\r\n\t  var conferenceHandler = getConferenceHandler();\r\n\t  if (!conferenceHandler) {\r\n\t    errorCallback({\r\n\t      code: ManisResponse.code_404,\r\n\t      msg: ManisResponse.room_unopend,\r\n\t    });\r\n\t    return;\r\n\t  }\r\n\t  var oldStream = connection.jingle.localVideo;\r\n\t  conferenceHandler.switchStreams(stream, oldStream, successCallback);\r\n\t};\r\n\t\r\n\tfunction addScreenSourceToConnection(stream, callback) {\r\n\t  var conferenceHandler = getConferenceHandler();\r\n\t  if (!conferenceHandler) {\r\n\t    callback({\r\n\t      code: ManisResponse.code_404,\r\n\t      msg: ManisResponse.room_unopend,\r\n\t      errorCode: ErrorCode.conference_room_un_open\r\n\t    });\r\n\t    return;\r\n\t  }\r\n\t  //@TODO add share screen in new functions\r\n\t  conferenceHandler.sourceOperation(stream, callback, \"add\");\r\n\t  // conferenceHandler.addScreen(stream, callback);\r\n\t};\r\n\t\r\n\tfunction removeScreenSourceFromConnection(callback) {\r\n\t  var conferenceHandler = getConferenceHandler();\r\n\t  if (!conferenceHandler) {\r\n\t    callback({\r\n\t      code: ManisResponse.code_404,\r\n\t      msg: ManisResponse.room_unopend,\r\n\t      errorCode: ErrorCode.conference_room_un_open\r\n\t    });\r\n\t    return;\r\n\t  }\r\n\t  var screenStream = connection.jingle.localScreen;\r\n\t    conferenceHandler.sourceOperation(screenStream, function (res) {\r\n\t        if (screenStream.getVideoTracks().length) {\r\n\t            screenStream.getVideoTracks().forEach(function (track) {\r\n\t                track.stop();\r\n\t            });\r\n\t        }\r\n\t        callback(res)\r\n\t    }, \"remove\");\r\n\t  // conferenceHandler.removeScreen(screenStream, callback);\r\n\t  //   conferenceHandler.sourceOperation(screenStream, callback, \"remove\");\r\n\t};\r\n\t\r\n\t\r\n\tfunction addLocalStreamToConnection(mediaStream, callback) {\r\n\t  var conferenceHandler = getConferenceHandler();\r\n\t  if(mediaStream.getVideoTracks().length){\r\n\t    connection.emuc.addVideoInfoToPresence(false);\r\n\t  }\r\n\t  if(mediaStream.getAudioTracks().length){\r\n\t    connection.emuc.addAudioInfoToPresence(false);\r\n\t  }\r\n\t  if (!conferenceHandler) {\r\n\t    if (window.webkitMediaStream) {\r\n\t      var audioStream = new webkitMediaStream();\r\n\t      var videoStream = new webkitMediaStream();\r\n\t      var audioTracks = mediaStream.getAudioTracks();\r\n\t      var videoTracks = mediaStream.getVideoTracks();\r\n\t      for (var i = 0; i < audioTracks.length; i++) {\r\n\t        audioStream.addTrack(audioTracks[i]);\r\n\t      }\r\n\t      for (i = 0; i < videoTracks.length; i++) {\r\n\t        videoStream.addTrack(videoTracks[i]);\r\n\t      }\r\n\t      connection.jingle.localAudio = audioStream;\r\n\t      connection.jingle.localVideo = videoStream;\r\n\t    } else {\r\n\t      connection.jingle.localAudio = mediaStream;\r\n\t      connection.jingle.localVideo = mediaStream;\r\n\t    }\r\n\t    // 发送IQ消息到xmpp进入会议室.\r\n\t    // mediaStream.src = URL.createObjectURL(mediaStream);\r\n\t    mediaStream.ssrc = window.localStreamSSRC;\r\n\t    callback({\r\n\t      code: ManisResponse.code_200,\r\n\t      msg: ManisResponse.add_local_stream_without_negiration_success,\r\n\t      errorCode: ErrorCode.no_error,\r\n\t      response: mediaStream,\r\n\t    });\r\n\t    return;\r\n\t  }\r\n\t  conferenceHandler.addLocalStream(mediaStream, callback);\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\tfunction removeLocalStreamFromConnection(callback) {\r\n\t  var conferenceHandler = getConferenceHandler();\r\n\t  if (!conferenceHandler) {\r\n\t    callback({\r\n\t      code: ManisResponse.code_404,\r\n\t      msg: ManisResponse.room_unopend,\r\n\t      errorCode: ErrorCode.conference_room_un_open\r\n\t    });\r\n\t    return;\r\n\t  }\r\n\t  var localStreams = [];\r\n\t  if(connection.jingle.localAudio){\r\n\t    localStreams.push(connection.jingle.localAudio);\r\n\t  }\r\n\t  if(connection.jingle.localVideo){\r\n\t    localStreams.push(connection.jingle.localVideo);\r\n\t  }\r\n\t  conferenceHandler.removeLocalStream(localStreams, callback);\r\n\t};\r\n\t\r\n\t\r\n\tfunction changeResolutionByApplyConstraints(resolution, videoInput, callback) {\r\n\t  var _this = this;\r\n\t  console.log('try to apply resolution: ', resolution, ' current resolution: ', _this.currentTargetResolution, ' current input: ', _this.currentTargetVideoInput);\r\n\t  var mediaStream = connection.jingle.localVideo;\r\n\t  if(this.currentTargetResolution == resolution && this.currentTargetVideoInput == videoInput && mediaStream.getVideoTracks().length){\r\n\t    // not changed, just return;\r\n\t    if(config.debug == true){\r\n\t      console.log('resolution and video input device is not changed, maybe video stop, reset again');\r\n\t    }\r\n\t    return false;\r\n\t  }\r\n\t  var newResolutionConstraints = ManisFunctions.getConstraintsByResolution(false, true, null, videoInput, resolution);\r\n\t  console.log('new resolution constraints : ', newResolutionConstraints,mediaStream);\r\n\t  const constraints = {\r\n\t    width: newResolutionConstraints.video.width,\r\n\t    height: newResolutionConstraints.video.height,\r\n\t  };\r\n\t  if(mediaStream && constraints){\r\n\t    const track = mediaStream.getVideoTracks()[0];\r\n\t    if(track.applyConstraints != undefined){\r\n\t      track.applyConstraints(constraints)\r\n\t        .then(function (result) {\r\n\t          var options = {\r\n\t            videoInput: videoInput,\r\n\t            resolution: resolution,\r\n\t            replace: false,\r\n\t          };\r\n\t          options.stream = mediaStream;\r\n\t          config.currentResolution = resolution;\r\n\t          _this.currentTargetResolution = resolution;\r\n\t          _this.currentTargetVideoInput = videoInput;\r\n\t          ManisFunctions.setVideoBandwidth(config.videoBandwidth, function () {\r\n\t            console.log('Change bandwidth on the fly complete 2');\r\n\t          });\r\n\t          callback({\r\n\t            code: ManisResponse.code_200,\r\n\t            msg: ManisResponse.change_video_resolution_complete,\r\n\t            response: options,\r\n\t            errorCode: ErrorCode.no_error\r\n\t          });\r\n\t          // Do something with the track such as using the Image Capture API.\r\n\t          console.log('mediaStream apply contraints complete', newResolutionConstraints)\r\n\t        }).catch(function(e){\r\n\t        // The constraints could not be satisfied by the available devices.\r\n\t        console.info('mediaStream apply contraints failed : ', e);\r\n\t        if(e.name.match(/OverconstrainedError/) || e.constructor.name.match(/OverconstrainedError/)){\r\n\t          // if height > 180 or width > 320 , try get lower resolution; else trow error\r\n\t          if(parseInt(resolution) > 180){\r\n\t            if (newResolutionConstraints.video.height.exact == 1080) {\r\n\t              _this.changeResolutionByApplyConstraints('720',   videoInput, callback);\r\n\t              return;\r\n\t            } else if (newResolutionConstraints.video.height.exact == 720) {\r\n\t              _this.changeResolutionByApplyConstraints('768',  videoInput, callback);\r\n\t              return;\r\n\t            }else if (newResolutionConstraints.video.height.exact == 768) {\r\n\t              _this.changeResolutionByApplyConstraints('540',  videoInput, callback);\r\n\t              return;\r\n\t            } else if (newResolutionConstraints.video.height.exact == 540) {\r\n\t              _this.changeResolutionByApplyConstraints('480',  videoInput, callback);\r\n\t              return;\r\n\t            }else if (newResolutionConstraints.video.height.exact == 480) {\r\n\t              _this.changeResolutionByApplyConstraints('240',  videoInput, callback);\r\n\t              return;\r\n\t            }else if (newResolutionConstraints.video.height.exact == 240) {\r\n\t              _this.changeResolutionByApplyConstraints('180',  videoInput, callback);\r\n\t              return;\r\n\t            }\r\n\t          }else {\r\n\t            console.error('Over lest constrained error', e);\r\n\t            throw Error('Over lest constrained error');\r\n\t          }\r\n\t        }else {\r\n\t          console.error('Other error : ', e);\r\n\t          throw Error('Other error ');\r\n\t        }\r\n\t      })\r\n\t    }else {\r\n\t      console.error('ApplyConstraints undefined error ');\r\n\t      throw Error('ApplyConstraints undefined error ');\r\n\t    }\r\n\t  }\r\n\t\r\n\t}\r\n\t\r\n\tfunction modifyLocalVideoStream(resolution, _videoInput, callback, loop) {\r\n\t\r\n\t  var oldStream = connection.jingle.localVideo;\r\n\t\r\n\t  if(this.currentTargetResolution == resolution && this.currentTargetVideoInput == _videoInput && oldStream.getVideoTracks().length){\r\n\t    // not changed, just return;\r\n\t    if(config.debug == true){\r\n\t      console.log('resolution and video input device is not changed, maybe video stop, reset again');\r\n\t    }\r\n\t    return false;\r\n\t  }\r\n\t\r\n\t  if(loop !== true){\r\n\t    this.currentTargetResolution = resolution;\r\n\t    this.currentTargetVideoInput = _videoInput;\r\n\t  }\r\n\t\r\n\t  var conferenceHandler = getConferenceHandler();\r\n\t\r\n\t  if (oldStream.getVideoTracks().length) {\r\n\t    oldStream.getVideoTracks().forEach(function (track) {\r\n\t      if(config.debug == true){\r\n\t        console.log('remove video track : ', track);\r\n\t      }\r\n\t      track.stop();\r\n\t    });\r\n\t  }\r\n\t\r\n\t  var newResolutionConstraints = ManisFunctions.getConstraintsByResolution(false, true, null, _videoInput, resolution);\r\n\t  if(config.debug == true){\r\n\t    console.log('will get new stream by new resolution : ', newResolutionConstraints);\r\n\t  }\r\n\t\r\n\t  ManisStream.getMedia(newResolutionConstraints, function (stream) {\r\n\t    config.currentResolution = resolution;\r\n\t    var options = {\r\n\t      videoInput: _videoInput,\r\n\t      resolution: resolution,\r\n\t      replace: true,\r\n\t    };\r\n\t    // stream.src = URL.createObjectURL(stream);\r\n\t    stream.ssrc = window.localStreamSSRC;\r\n\t    if (window.connectType == 'p2p') {\r\n\t      P2P.switchStream(oldStream, stream, callback, options);\r\n\t    } else {\r\n\t      connection.jingle.localVideo = stream;\r\n\t      options.resource = Strophe.getResourceFromJid(connection.jid);\r\n\t      options.stream = stream;\r\n\t      callback({\r\n\t        code: ManisResponse.code_200,\r\n\t        msg: ManisResponse.change_video_resolution_complete,\r\n\t        response: options,\r\n\t        errorCode: ErrorCode.no_error\r\n\t      });\r\n\t      if(conferenceHandler && conferenceHandler.peerconnection.negotiationInprogress == false){\r\n\t        conferenceHandler.replaceMediaTrack(stream, oldStream, function () {\r\n\t          if (options.stream.ssrc != window.localStreamSSRC) {\r\n\t            options.stream.ssrc = window.localStreamSSRC;\r\n\t          }\r\n\t          callback({\r\n\t            code: ManisResponse.code_200,\r\n\t            msg: ManisResponse.change_video_resolution_complete,\r\n\t            response: options,\r\n\t            errorCode: ErrorCode.no_error\r\n\t          })\r\n\t        })\r\n\t      }else {\r\n\t        setTimeout(function () {\r\n\t          modifyLocalVideoStream(resolution, _videoInput, callback);\r\n\t          return;\r\n\t        }, 1000);\r\n\t      }\r\n\t\r\n\t    }\r\n\t\r\n\t  }, function (error) {\r\n\t    if (error.name == 'DevicesNotFoundError' || error.constructor.name == 'DevicesNotFoundError'\r\n\t        ||error.name == 'NotFoundError' || error.constructor.name == 'NotFoundError') {\r\n\t      callback({\r\n\t        code: ManisResponse.code_404,\r\n\t        msg: ManisResponse.without_usefull_video_device,\r\n\t        errorCode: ErrorCode.media_device_except\r\n\t      });\r\n\t      return;\r\n\t    }\r\n\t    if (error.name == 'NotReadableError') {\r\n\t      callback({\r\n\t        code: ManisResponse.code_400,\r\n\t        msg: ManisResponse.get_user_media_failed,\r\n\t        error: error,\r\n\t        errorCode: ErrorCode.media_device_get_local_media_failed\r\n\t      });\r\n\t      return;\r\n\t    }\r\n\t    if (error.name == 'OverconstrainedError' || error.constructor.name == 'OverconstrainedError') {\r\n\t      if (newResolutionConstraints.video.width.exact > 320 || newResolutionConstraints.video.height.exact > 180) {\r\n\t        // turn down video constraint\r\n\t        if (newResolutionConstraints.video.height.exact == 1080) {\r\n\t          modifyLocalVideoStream('720',   _videoInput, callback);\r\n\t          return;\r\n\t        } else if (newResolutionConstraints.video.height.exact == 720) {\r\n\t          modifyLocalVideoStream('768',  _videoInput, callback);\r\n\t          return;\r\n\t        }else if (newResolutionConstraints.video.height.exact == 768) {\r\n\t          modifyLocalVideoStream('540',  _videoInput, callback);\r\n\t          return;\r\n\t        } else if (newResolutionConstraints.video.height.exact == 540) {\r\n\t          modifyLocalVideoStream('480',  _videoInput, callback);\r\n\t          return;\r\n\t        }else if (newResolutionConstraints.video.height.exact == 480) {\r\n\t          modifyLocalVideoStream('240',  _videoInput, callback);\r\n\t          return;\r\n\t        }else if (newResolutionConstraints.video.height.exact == 240) {\r\n\t          modifyLocalVideoStream('180',  _videoInput, callback);\r\n\t          return;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    console.warn(error)\r\n\t    callback({\r\n\t      code: ManisResponse.code_402,\r\n\t      msg: ManisResponse.unsupport_resolution,\r\n\t      errorCode: ErrorCode.media_device_resolution_nonsupport\r\n\t    });\r\n\t  })\r\n\t\r\n\t};\r\n\t\r\n\tfunction modifyLocalAudioStream(_audioInput, callback) {\r\n\t  var conferenceHandler = getConferenceHandler();\r\n\t  var oldStream = connection.jingle.localAudio;\r\n\t  if (oldStream.getAudioTracks().length) {\r\n\t    oldStream.getAudioTracks().forEach(function (track) {\r\n\t      if(config.debug == true){\r\n\t        console.log(' remove audio track : ', track);\r\n\t      }\r\n\t      track.stop();\r\n\t    });\r\n\t  }\r\n\t\r\n\t  var newAudioInConstraints = ManisFunctions.getConstraintsByResolution(true, false, _audioInput, null, null);\r\n\t  ManisStream.getMedia(newAudioInConstraints, function (stream) {\r\n\t    // before conference start\r\n\t    if(!conferenceHandler){\r\n\t      connection.jingle.localAudio = stream;\r\n\t      callback({\r\n\t        code: ManisResponse.code_200,\r\n\t        msg: ManisResponse.audio_input_change_completed,\r\n\t        errorCode: ErrorCode.no_error\r\n\t      });\r\n\t      return;\r\n\t    }\r\n\t    var options = {\r\n\t      activeAudioInput: _audioInput,\r\n\t      replace: true,\r\n\t    };\r\n\t    options.stream = stream;\r\n\t    if(conferenceHandler.peerconnection.negotiationInprogress == false) {\r\n\t      conferenceHandler.replaceMediaTrack(stream, oldStream, function () {\r\n\t        callback({\r\n\t          code: ManisResponse.code_200,\r\n\t          msg: ManisResponse.audio_input_change_completed,\r\n\t          response: options,\r\n\t          errorCode: ErrorCode.no_error\r\n\t        });\r\n\t      }, 'audio');\r\n\t    }else {\r\n\t      setTimeout(function () {\r\n\t        modifyLocalAudioStream(resolution, _videoInput, callback);\r\n\t        return;\r\n\t      }, 1000);\r\n\t    }\r\n\t  }, function (error) {\r\n\t    callback({\r\n\t      code: ManisResponse.code_400,\r\n\t      msg: ManisResponse.audio_input_change_failed,\r\n\t      error: error,\r\n\t      errorCode: ErrorCode.change_audio_input_device_failed\r\n\t    });\r\n\t  })\r\n\t}\r\n\t\r\n\tfunction generateConstraints(withAudio, withVideo, audioInput, videoInput, videoResolution){\r\n\t  var constraints = {\r\n\t    audio: withAudio ? {} : false,\r\n\t    video: withVideo ? {} : false\r\n\t  };\r\n\t  if(withAudio === true){\r\n\t    constraints.audio.deviceId =  audioInput ? {exact:  audioInput} : undefined;\r\n\t  }\r\n\t  if(withVideo === true){\r\n\t    constraints.video.deviceId =  videoInput ? {exact: videoInput} : undefined;\r\n\t  }\r\n\t  if(withVideo === true && videoResolution){\r\n\t    switch (videoResolution.toString()){\r\n\t      case '1080':\r\n\t        constraints.video.width = {exact: 1920};\r\n\t        constraints.video.height = {exact: 1080};\r\n\t        config.videoBandwidth = (config.videoBandwidth == 1024 * 2 * 2) ? config.videoBandwidth : 1024 * 2;\r\n\t        break;\r\n\t      case '720':\r\n\t        constraints.video.width = {exact: 1280};\r\n\t        constraints.video.height = {exact: 720};\r\n\t        config.videoBandwidth = (config.videoBandwidth == 512 * 2 * 2) ? config.videoBandwidth : 512 * 2;\r\n\t        break;\r\n\t      case '768':\r\n\t        constraints.video.width = {exact: 1024};\r\n\t        constraints.video.height = {exact: 768};\r\n\t        config.videoBandwidth = (config.videoBandwidth == 512 * 2 * 2) ? config.videoBandwidth : 512 * 2;\r\n\t        break;\r\n\t      case '540':\r\n\t        constraints.video.width = {exact: 960};\r\n\t        constraints.video.height = {exact: 540};\r\n\t        config.videoBandwidth = (config.videoBandwidth == 256 * 2 * 2) ? config.videoBandwidth : 256 * 2;\r\n\t        break;\r\n\t      case '480':\r\n\t        constraints.video.width = {exact: 640};\r\n\t        constraints.video.height = {exact: 480};\r\n\t        config.videoBandwidth = (config.videoBandwidth == 256 * 2 * 2) ? config.videoBandwidth : 256 * 2;\r\n\t        break;\r\n\t      case '240':\r\n\t        constraints.video.width = {exact: 320};\r\n\t        constraints.video.height = {exact: 240};\r\n\t        config.videoBandwidth = (config.videoBandwidth == 128 * 2 * 2) ? config.videoBandwidth : 128 * 2;\r\n\t        break;\r\n\t      case '180':\r\n\t        constraints.video.width = {exact: 320};\r\n\t        constraints.video.height = {exact: 180};\r\n\t        config.videoBandwidth = (config.videoBandwidth == 128 * 2 * 2) ? config.videoBandwidth : 128 * 2;\r\n\t        break;\r\n\t      default:\r\n\t        constraints.video.width = {exact: 320};\r\n\t        constraints.video.height = {exact: 180};\r\n\t        config.videoBandwidth = (config.videoBandwidth == 128 * 2 * 2) ? config.videoBandwidth : 128 * 2;\r\n\t        break;\r\n\t    }\r\n\t  }\r\n\t  return constraints;\r\n\t}\r\n\t\r\n\tfunction getDevices(type, callback) {\r\n\t  var audioInputDevices = [];\r\n\t  var audioOutputDevices = [];\r\n\t  var videoInputDevices = [];\r\n\t  var otherDevices = [];\r\n\t  var allDevices = [];\r\n\t\r\n\t  navigator.mediaDevices.enumerateDevices().then(function (deviceInfos) {\r\n\t    for (var i = 0; i !== deviceInfos.length; ++i) {\r\n\t      var deviceInfo = deviceInfos[i];\r\n\t      //console.log(\"-----deviceInfo--------\", deviceInfo);\r\n\t      var device = {value:deviceInfo.deviceId};\r\n\t      if (deviceInfo.kind === 'audioinput') {\r\n\t          //由于safari  deviceInfo 无法获取output 这里做一下处理\r\n\t          if(RTC.isSafari() || RTC.isFirefox()) {\r\n\t              device.label = deviceInfo.label || 'speaker ' + (audioOutputDevices.length + 1);\r\n\t              audioOutputDevices.push(device);\r\n\t          }\r\n\t          device.label = deviceInfo.label || 'microphone ' + (audioInputDevices.length + 1);\r\n\t         audioInputDevices.push(device);\r\n\t      } else if (deviceInfo.kind === 'audiooutput') {\r\n\t        device.label = deviceInfo.label || 'speaker ' + (audioOutputDevices.length + 1);\r\n\t        audioOutputDevices.push(device);\r\n\t      } else if (deviceInfo.kind === 'videoinput') {\r\n\t        device.label = deviceInfo.label || 'camera ' + (videoInputDevices.length + 1);\r\n\t        videoInputDevices.push(device);\r\n\t      } else {\r\n\t        device.label = deviceInfo.label || 'Some other kind of source/device: ';\r\n\t        otherDevices.push(device);\r\n\t      }\r\n\t    }\r\n\t    allDevices = {\r\n\t      audioInputDevices: audioOutputDevices,\r\n\t      audioOutputDevices: audioOutputDevices,\r\n\t      videoInputDevices: videoInputDevices,\r\n\t      otherDevices: otherDevices\r\n\t    };\r\n\t    if (type == 'audioinput') {\r\n\t      var returnData = audioInputDevices;\r\n\t    } else if (type == 'audiooutput') {\r\n\t      var returnData = audioOutputDevices;\r\n\t    } else if (type == 'videoinput') {\r\n\t      var returnData = videoInputDevices;\r\n\t    } else {\r\n\t      var returnData = allDevices;\r\n\t    }\r\n\t    callback({\r\n\t      code: ManisResponse.code_200,\r\n\t      msg: ManisResponse.find_devices,\r\n\t      response: returnData,\r\n\t      errorCode: ErrorCode.no_error\r\n\t    })\r\n\t  }).catch(\r\n\t    function () {\r\n\t      callback({\r\n\t        code: ManisResponse.code_404,\r\n\t        msg: ManisResponse.unfind_devices,\r\n\t        errorCode: ErrorCode.media_device_except\r\n\t      })\r\n\t    });\r\n\t};\r\n\t\r\n\t\r\n\tfunction sendOnlyChannelMsg(callback) {\r\n\t  if(activecall && activecall.peerconnection){\r\n\t    var channel = activecall.peerconnection.channel;\r\n\t    if(channel){\r\n\t      var videoSendOnly = {colibriClass: \"AttendMessageEvent\",type: \"sendonly\"};\r\n\t      var msg = JSON.stringify(videoSendOnly);\r\n\t      try{\r\n\t        console.log('will send sendonly channel msg: ', msg);\r\n\t        channel.send(msg);\r\n\t        callback({\r\n\t          code: ManisResponse.code_200,\r\n\t          msg: ManisResponse.message_send_complete\r\n\t        })\r\n\t      }catch (e){\r\n\t        console.error('send channel msg failed: ', e);\r\n\t        callback({\r\n\t          code: ManisResponse.code_400,\r\n\t          msg: ManisResponse.send_inviste_failed\r\n\t        })\r\n\t      }\r\n\t    }else {\r\n\t      callback({\r\n\t        code: ManisResponse.code_400,\r\n\t        msg: ManisResponse.send_inviste_failed\r\n\t      })\r\n\t    }\r\n\t  }\r\n\t}\r\n\t\r\n\t\r\n\tmodule.exports = {\r\n\t  currentTargetResolution: null,\r\n\t  currentTargetVideoInput: null,\r\n\t  getDevices: getDevices,\r\n\t  modifyLocalVideoStream: modifyLocalVideoStream,\r\n\t  modifyLocalAudioStream: modifyLocalAudioStream,\r\n\t  removeScreenSourceFromConnection: removeScreenSourceFromConnection,\r\n\t  addScreenSourceToConnection: addScreenSourceToConnection,\r\n\t  addLocalStreamToConnection: addLocalStreamToConnection,\r\n\t  removeLocalStreamFromConnection: removeLocalStreamFromConnection,\r\n\t  modifyScreenStream: modifyScreenStream,\r\n\t  disposeConference: disposeConference,\r\n\t  isAudioMuted: isAudioMuted,\r\n\t  startRtpStatsCollector: startRtpStatsCollector,\r\n\t  stopRTPStatsCollector: stopRTPStatsCollector,\r\n\t  changeResolutionByApplyConstraints: changeResolutionByApplyConstraints,\r\n\t  sendOnlyChannelMsg: sendOnlyChannelMsg,\r\n\t  getConferenceHandler: getConferenceHandler,\r\n\t};\r\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\tvar ConnectionQuality = (function () {\r\n\t\r\n\t  /**\r\n\t   * Constructs new ConnectionQuality object\r\n\t   * @constructor\r\n\t   */\r\n\t  function ConnectionQuality() {\r\n\t\r\n\t  }\r\n\t\r\n\t  /**\r\n\t   * local stats\r\n\t   * @type {{}}\r\n\t   */\r\n\t  var stats = {};\r\n\t\r\n\t  /**\r\n\t   * remote stats\r\n\t   * @type {{}}\r\n\t   */\r\n\t  var remoteStats = {};\r\n\t\r\n\t  /**\r\n\t   * Interval for sending statistics to other participants\r\n\t   * @type {null}\r\n\t   */\r\n\t  var sendIntervalId = null;\r\n\t\r\n\t  /**\r\n\t   * Updates the local statistics\r\n\t   * @param data new statistics\r\n\t   */\r\n\t  ConnectionQuality.updateLocalStats = function (data) {\r\n\t    stats = data;\r\n\t    //* VideoLayout.updateLocalConnectionStats(100 - stats.packetLoss.total,stats);\r\n\t    if (sendIntervalId == null) {\r\n\t      startSendingStats();\r\n\t    }\r\n\t  };\r\n\t\r\n\t  /**\r\n\t   * Start statistics sending.\r\n\t   */\r\n\t  // ConnectionQuality.startSendingStats = function() {\r\n\t  function startSendingStats()  {\r\n\t    sendStats();\r\n\t    sendIntervalId = setInterval(sendStats, 10000);\r\n\t  }\r\n\t\r\n\t  /**\r\n\t   * Sends statistics to other participants\r\n\t   */\r\n\t  function sendStats() {\r\n\t    connection.emuc.addConnectionInfoToPresence(convertToMUCStats(stats));\r\n\t    connection.emuc.sendPresence();\r\n\t  }\r\n\t\r\n\t    function get_object_first_attribute(data){\r\n\t        for (var key in data)\r\n\t            return data[key];\r\n\t    }\r\n\t\r\n\t  /**\r\n\t   * Converts statistics to format for sending through XMPP\r\n\t   * @param stats the statistics\r\n\t   * @returns {{bitrate_donwload: *, bitrate_uplpoad: *, packetLoss_total: *, packetLoss_download: *, packetLoss_upload: *}}\r\n\t   */\r\n\t  function convertToMUCStats(stats) {\r\n\t    var resolution = stats.resolution && stats.resolution[connection.jid] ? get_object_first_attribute(stats.resolution[connection.jid]) : '';\r\n\t    var mucStatus =  {\r\n\t    \"bitrate_download\": stats.bitrate&&stats.bitrate.download?stats.bitrate.download:0,\r\n\t    \"bitrate_upload\": stats.bitrate&&stats.bitrate.upload?stats.bitrate.upload:0,\r\n\t    \"packetLoss_total\": stats.packetLoss&&stats.packetLoss.total?stats.packetLoss.total:0,\r\n\t    \"packetLoss_download\": stats.packetLoss&&stats.packetLoss.download?stats.packetLoss.download:0,\r\n\t    \"packetLoss_upload\": stats.packetLoss&&stats.packetLoss.upload?stats.packetLoss.upload:0,\r\n\t    \"frameHeight\": resolution ? resolution.height : '',\r\n\t    \"frameWidth\": resolution ? resolution.width : '',\r\n\t    \"frameRate\": stats.frameRate ? get_object_first_attribute(stats.frameRate) : '',\r\n\t    \"rtt\": stats.rtt ? get_object_first_attribute(stats.rtt) : '',\r\n\t    };\r\n\t      // console.log('SSSSSSSSSSSSSSSSSSSS', stats, connection.jid, 'BBBBBBBBBBBBBBBB', mucStatus);\r\n\t      return mucStatus\r\n\t  }\r\n\t\r\n\t  /**\r\n\t   * Converts statitistics to format used by VideoLayout\r\n\t   * @param stats\r\n\t   * @returns {{bitrate: {download: *, upload: *}, packetLoss: {total: *, download: *, upload: *}}}\r\n\t   */\r\n\t  function parseMUCStats(stats) {\r\n\t    return {\r\n\t      bitrate: {\r\n\t        download: stats.bitrate_download,\r\n\t        upload: stats.bitrate_upload\r\n\t      },\r\n\t      packetLoss: {\r\n\t        total: stats.packetLoss_total,\r\n\t        download: stats.packetLoss_download,\r\n\t        upload: stats.packetLoss_upload\r\n\t      }\r\n\t    };\r\n\t  }\r\n\t\r\n\t  /**\r\n\t   *\r\n\t   * Updates remote statistics\r\n\t   * @param jid the jid associated with the statistics\r\n\t   * @param data the statistics\r\n\t   * @param videoSSRC\r\n\t   */\r\n\t  ConnectionQuality.updateRemoteStats = function (jid, data, videoSSRC) {\r\n\t    if (data == null || data.packetLoss_total == null) {\r\n\t      return;\r\n\t    }\r\n\t    remoteStats[jid] = parseMUCStats(data);\r\n\t    var resource = Strophe.getResourceFromJid(jid);\r\n\t    // update status\r\n\t    var resolution = 'NaN';\r\n\t    // if (document.querySelector('#upload_package_lost_' + resource) != null) {\r\n\t    //   document.querySelector('#upload_package_lost_' + resource).innerHTML = data.packetLoss_upload + '%';\r\n\t    //   document.querySelector('#download_package_lost_' + resource).innerHTML = data.packetLoss_download + '%';\r\n\t    //   document.querySelector('#upload_bitrate_' + resource).innerHTML = data.bitrate_upload + ' Kbps';\r\n\t    //   document.querySelector('#download_bitrate_' + resource).innerHTML = data.bitrate_download + ' Kbps';\r\n\t    // }\r\n\t    // if (document.querySelectorAll('.upload_package_lost_' + resource).length) {\r\n\t    //   var elements = document.querySelectorAll('.upload_package_lost_' + resource);\r\n\t    //   for (var i = 0; i < elements.length; i++) {\r\n\t    //     elements[i].innerHTML = data.packetLoss_upload + '%';\r\n\t    //   }\r\n\t    // }\r\n\t    // if (document.querySelectorAll('.download_package_lost_' + resource).length) {\r\n\t    //   var elements = document.querySelectorAll('.download_package_lost_' + resource);\r\n\t    //   for (var i = 0; i < elements.length; i++) {\r\n\t    //     elements[i].innerHTML = data.packetLoss_download + '%';\r\n\t    //   }\r\n\t    // }\r\n\t    // if (document.querySelectorAll('.upload_bitrate_' + resource).length) {\r\n\t    //   var elements = document.querySelectorAll('.upload_bitrate_' + resource);\r\n\t    //   for (var i = 0; i < elements.length; i++) {\r\n\t    //     elements[i].innerHTML = data.bitrate_upload + ' Kbps';\r\n\t    //   }\r\n\t    // }\r\n\t    // if (document.querySelectorAll('.download_bitrate_' + resource).length) {\r\n\t    //   var elements = document.querySelectorAll('.download_bitrate_' + resource);\r\n\t    //   for (var i = 0; i < elements.length; i++) {\r\n\t    //     elements[i].innerHTML = data.bitrate_download + ' Kbps';\r\n\t    //   }\r\n\t    // }\r\n\t    if (videoSSRC != null) {\r\n\t      var resolutionObj = ssrc2resolution[videoSSRC];\r\n\t      if (resolutionObj != undefined) {\r\n\t        resolution = resolutionObj.width + ' X ' + resolutionObj.height;\r\n\t        // if (document.querySelector('#resolution_' + resource) != null) {\r\n\t        //   document.querySelector('#resolution_' + resource).innerHTML = resolution;\r\n\t        // }\r\n\t        // if (document.querySelectorAll('.resolution_' + resource).length) {\r\n\t        //   var elements = document.querySelectorAll('.resolution_' + resource);\r\n\t        //   for (var i = 0; i < elements.length; i++) {\r\n\t        //     elements[i].innerHTML = resolution;\r\n\t        //   }\r\n\t        // }\r\n\t      }\r\n\t    }\r\n\t    // for (var i = 0; i < window.participants.length; i++) {\r\n\t    //   var participant = window.participants[i];\r\n\t    //   if (participant.resource == resource) {\r\n\t    //     participant.resolution = resolution;\r\n\t    //     participant.parket_loss_upload = data.packetLoss_upload + '%';\r\n\t    //     participant.packet_loss_download = data.packetLoss_download + '%';\r\n\t    //     participant.bitrate_upload = data.bitrate_upload + ' Kbps';\r\n\t    //     participant.bitrate_download = data.bitrate_download + ' Kbps';\r\n\t    //   }\r\n\t    // }\r\n\t\r\n\t\r\n\t  };\r\n\t\r\n\t  /**\r\n\t   * Stops statistics sending.\r\n\t   */\r\n\t  ConnectionQuality.stopSendingStats = function () {\r\n\t    clearInterval(sendIntervalId);\r\n\t    sendIntervalId = null;\r\n\t    //notify UI about stopping statistics gathering\r\n\t    //* VideoLayout.onStatsStop();\r\n\t  };\r\n\t\r\n\t  /**\r\n\t   * Returns the local statistics.\r\n\t   */\r\n\t  ConnectionQuality.getStats = function () {\r\n\t    return stats;\r\n\t  }\r\n\t\r\n\t  return ConnectionQuality;\r\n\t})();\r\n\t\r\n\texports = module.exports = ConnectionQuality;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\t/* global ssrc2jid */\r\n\t/* jshint -W117 */\r\n\t/**\r\n\t * Calculates packet lost percent using the number of lost packets and the\r\n\t * number of all packet.\r\n\t * @param lostPackets the number of lost packets\r\n\t * @param totalPackets the number of all packets.\r\n\t * @returns {number} packet loss percent\r\n\t */\r\n\tfunction calculatePacketLoss(lostPackets, totalPackets) {\r\n\t  if (!totalPackets || totalPackets <= 0 || !lostPackets || lostPackets <= 0)\r\n\t    return 0;\r\n\t  return Math.round((lostPackets / totalPackets) * 100);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Peer statistics data holder.\r\n\t * @constructor\r\n\t */\r\n\tfunction PeerStats() {\r\n\t  this.ssrc2Loss = {};\r\n\t  this.ssrc2AudioLevel = {};\r\n\t  this.ssrc2bitrate = {};\r\n\t  this.ssrc2resolution = {};\r\n\t  this.ssrc2frameRate = {};\r\n\t  this.ssrc2rtt = {};\r\n\t}\r\n\t\r\n\t/**\r\n\t * The bandwidth\r\n\t * @type {{}}\r\n\t */\r\n\tPeerStats.bandwidth = {};\r\n\t\r\n\t/**\r\n\t * The bit rate\r\n\t * @type {{}}\r\n\t */\r\n\tPeerStats.bitrate = {};\r\n\t\r\n\t\r\n\t/**\r\n\t * The packet loss rate\r\n\t * @type {{}}\r\n\t */\r\n\tPeerStats.packetLoss = null;\r\n\t\r\n\t/**\r\n\t * Sets packets loss rate for given <tt>ssrc</tt> that blong to the peer\r\n\t * represented by this instance.\r\n\t * @param ssrc audio or video RTP stream SSRC.\r\n\t * @param lossRate new packet loss rate value to be set.\r\n\t */\r\n\tPeerStats.prototype.setSsrcLoss = function (ssrc, lossRate) {\r\n\t  this.ssrc2Loss[ssrc] = lossRate;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sets resolution for given <tt>ssrc</tt> that belong to the peer\r\n\t * represented by this instance.\r\n\t * @param ssrc audio or video RTP stream SSRC.\r\n\t * @param resolution new resolution value to be set.\r\n\t */\r\n\tPeerStats.prototype.setSsrcResolution = function (ssrc, resolution) {\r\n\t  if (resolution === null && this.ssrc2resolution[ssrc]) {\r\n\t    delete this.ssrc2resolution[ssrc];\r\n\t  }\r\n\t  else if (resolution !== null)\r\n\t    window.ssrc2resolution[ssrc] = this.ssrc2resolution[ssrc] = resolution;\r\n\t};\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param ssrc\r\n\t * @param frameRate\r\n\t */\r\n\tPeerStats.prototype.setFrameRate = function (ssrc, frameRate) {\r\n\t  this.ssrc2frameRate[ssrc] = frameRate\r\n\t};\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param ssrc\r\n\t * @param rtt\r\n\t */\r\n\tPeerStats.prototype.setRtt = function (ssrc, rtt) {\r\n\t    this.ssrc2rtt[ssrc] = rtt\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sets the bit rate for given <tt>ssrc</tt> that blong to the peer\r\n\t * represented by this instance.\r\n\t * @param ssrc audio or video RTP stream SSRC.\r\n\t * @param bitrate new bitrate value to be set.\r\n\t */\r\n\tPeerStats.prototype.setSsrcBitrate = function (ssrc, bitrate) {\r\n\t  if (this.ssrc2bitrate[ssrc]) {\r\n\t    this.ssrc2bitrate[ssrc].download += bitrate.download;\r\n\t    this.ssrc2bitrate[ssrc].upload += bitrate.upload;\r\n\t  }\r\n\t  else {\r\n\t    this.ssrc2bitrate[ssrc] = bitrate;\r\n\t  }\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sets new audio level(input or output) for given <tt>ssrc</tt> that identifies\r\n\t * the stream which belongs to the peer represented by this instance.\r\n\t * @param ssrc RTP stream SSRC for which current audio level value will be\r\n\t *        updated.\r\n\t * @param audioLevel the new audio level value to be set. Value is truncated to\r\n\t *        fit the range from 0 to 1.\r\n\t */\r\n\tPeerStats.prototype.setSsrcAudioLevel = function (ssrc, audioLevel) {\r\n\t  // Range limit 0 - 1\r\n\t  this.ssrc2AudioLevel[ssrc] = Math.min(Math.max(audioLevel, 0), 1);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Array with the transport information.\r\n\t * @type {Array}\r\n\t */\r\n\tPeerStats.transport = [];\r\n\t\r\n\t\r\n\t/**\r\n\t * <tt>StatsCollector</tt> registers for stats updates of given\r\n\t * <tt>peerconnection</tt> in given <tt>interval</tt>. On each update particular\r\n\t * stats are extracted and put in {@link PeerStats} objects. Once the processing\r\n\t * is done <tt>audioLevelsUpdateCallback</tt> is called with <tt>this</tt>\r\n\t * instance as an event source.\r\n\t *\r\n\t * @param peerconnection webRTC peer connection object.\r\n\t * @param interval stats refresh interval given in ms.\r\n\t * @param {function(StatsCollector)} audioLevelsUpdateCallback the callback\r\n\t * called on stats update.\r\n\t * @constructor\r\n\t */\r\n\tfunction StatsCollector(peerconnection, audioLevelsInterval,\r\n\t                        audioLevelsUpdateCallback, statsInterval,\r\n\t                        statsUpdateCallback) {\r\n\t  this.peerconnection = peerconnection;\r\n\t  this.baselineAudioLevelsReport = null;\r\n\t  this.currentAudioLevelsReport = null;\r\n\t  this.currentStatsReport = null;\r\n\t  this.baselineStatsReport = null;\r\n\t  this.audioLevelsIntervalId = null;\r\n\t\r\n\t  /**\r\n\t   * Gather PeerConnection stats once every this many milliseconds.\r\n\t   */\r\n\t  this.GATHER_INTERVAL = 10000;\r\n\t\r\n\t  /**\r\n\t   * Log stats via the focus once every this many milliseconds.\r\n\t   */\r\n\t  this.LOG_INTERVAL = 60000;\r\n\t\r\n\t  /**\r\n\t   * Gather stats and store them in this.statsToBeLogged.\r\n\t   */\r\n\t  this.gatherStatsIntervalId = null;\r\n\t\r\n\t  /**\r\n\t   * Send the stats already saved in this.statsToBeLogged to be logged via\r\n\t   * the focus.\r\n\t   */\r\n\t  this.logStatsIntervalId = null;\r\n\t\r\n\t  /**\r\n\t   * Stores the statistics which will be send to the focus to be logged.\r\n\t   */\r\n\t  this.statsToBeLogged =\r\n\t  {\r\n\t    timestamps: [],\r\n\t    stats: {}\r\n\t  };\r\n\t\r\n\t  // Updates stats interval\r\n\t  this.audioLevelsIntervalMilis = audioLevelsInterval;\r\n\t\r\n\t  this.statsIntervalId = null;\r\n\t  this.statsIntervalMilis = statsInterval;\r\n\t  // Map of jids to PeerStats\r\n\t  this.jid2stats = {};\r\n\t\r\n\t  this.audioLevelsUpdateCallback = audioLevelsUpdateCallback;\r\n\t  this.statsUpdateCallback = statsUpdateCallback;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Stops stats updates.\r\n\t */\r\n\tStatsCollector.prototype.stop = function () {\r\n\t  if (this.audioLevelsIntervalId) {\r\n\t    clearInterval(this.audioLevelsIntervalId);\r\n\t    this.audioLevelsIntervalId = null;\r\n\t    clearInterval(this.statsIntervalId);\r\n\t    this.statsIntervalId = null;\r\n\t    clearInterval(this.logStatsIntervalId);\r\n\t    this.logStatsIntervalId = null;\r\n\t    clearInterval(this.gatherStatsIntervalId);\r\n\t    this.gatherStatsIntervalId = null;\r\n\t  }\r\n\t};\r\n\t\r\n\t/**\r\n\t * Callback passed to <tt>getStats</tt> method.\r\n\t * @param error an error that occurred on <tt>getStats</tt> call.\r\n\t */\r\n\tStatsCollector.prototype.errorCallback = function (error) {\r\n\t  console.error(\"Get stats error\", error);\r\n\t  this.stop();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Starts stats updates.\r\n\t */\r\n\tStatsCollector.prototype.start = function () {\r\n\t  var self = this;\r\n\t  this.audioLevelsIntervalId = setInterval(\r\n\t    function () {\r\n\t      // Interval updates\r\n\t      self.peerconnection.getStats(\r\n\t        function (report) {\r\n\t          var results = null;\r\n\t          if (!report || !report.result || typeof report.result != 'function') {\r\n\t            results = report;\r\n\t          }\r\n\t          else {\r\n\t            results = report.result();\r\n\t          }\r\n\t          //console.error(\"Got interval report\", results);\r\n\t          //console.log(\"-----audioLevelsIntervalId-------\", results);\r\n\t          if(RTC.isSafari() || RTC.isFirefox()) {\r\n\t              self.currentAudioLevelsReport = [];\r\n\t              results.forEach(function (value) {\r\n\t                  // console.log(\"-----audioLevelsIntervalId-------\", value);\r\n\t                  self.currentAudioLevelsReport.push(value);\r\n\t              });\r\n\t          } else {\r\n\t              self.currentAudioLevelsReport = results;\r\n\t          }\r\n\t          self.processAudioLevelReport();\r\n\t          self.baselineAudioLevelsReport = self.currentAudioLevelsReport;\r\n\t        },\r\n\t          self.errorCallback\r\n\t      );\r\n\t    },\r\n\t    self.audioLevelsIntervalMilis\r\n\t  );\r\n\t\r\n\t  this.statsIntervalId = setInterval(\r\n\t    function () {\r\n\t      // Interval updates\r\n\t      self.peerconnection.getStats(\r\n\t        function (report) {\r\n\t          var results = null;\r\n\t          if (!report || !report.result || typeof report.result != 'function') {\r\n\t            //firefox\r\n\t            results = report;\r\n\t          }\r\n\t          else {\r\n\t            //chrome\r\n\t            results = report.result();\r\n\t          }\r\n\t          //console.error(\"Got interval report\", results);\r\n\t          //   console.log(\"-----statsIntervalId-------\", results);\r\n\t          if(RTC.isSafari() || RTC.isFirefox()) {\r\n\t              self.currentStatsReport = [];\r\n\t              results.forEach(function (value) {\r\n\t                  // console.log(\"-----statsIntervalId-------\", value);\r\n\t                  self.currentStatsReport.push(value);\r\n\t              });\r\n\t          } else {\r\n\t              self.currentStatsReport = results;\r\n\t          }\r\n\t          try {\r\n\t            self.processStatsReport();\r\n\t          }\r\n\t          catch (e) {\r\n\t            console.error(\"Unsupported key:\" + e);\r\n\t          }\r\n\t\r\n\t          self.baselineStatsReport = self.currentStatsReport;\r\n\t        },\r\n\t        self.errorCallback\r\n\t      );\r\n\t    },\r\n\t    self.statsIntervalMilis\r\n\t  );\r\n\t\r\n\t  if (config.logStats) {\r\n\t    this.gatherStatsIntervalId = setInterval(\r\n\t      function () {\r\n\t        self.peerconnection.getStats(\r\n\t          function (report) {\r\n\t            self.addStatsToBeLogged(report.result());\r\n\t          },\r\n\t          function () {\r\n\t          }\r\n\t        );\r\n\t      },\r\n\t      this.GATHER_INTERVAL\r\n\t    );\r\n\t\r\n\t    this.logStatsIntervalId = setInterval(\r\n\t      function () {\r\n\t        self.logStats();\r\n\t      },\r\n\t      this.LOG_INTERVAL);\r\n\t  }\r\n\t};\r\n\t\r\n\t/**\r\n\t * Converts the stats to the format used for logging, and saves the data in\r\n\t * this.statsToBeLogged.\r\n\t * @param reports Reports as given by webkitRTCPerConnection.getStats.\r\n\t */\r\n\tStatsCollector.prototype.addStatsToBeLogged = function (reports) {\r\n\t  var self = this;\r\n\t  var num_records = this.statsToBeLogged.timestamps.length;\r\n\t  this.statsToBeLogged.timestamps.push(new Date().getTime());\r\n\t  reports.map(function (report) {\r\n\t    var stat = self.statsToBeLogged.stats[report.id];\r\n\t    if (!stat) {\r\n\t      stat = self.statsToBeLogged.stats[report.id] = {};\r\n\t    }\r\n\t    stat.type = report.type;\r\n\t    report.names().map(function (name) {\r\n\t      var values = stat[name];\r\n\t      if (!values) {\r\n\t        values = stat[name] = [];\r\n\t      }\r\n\t      while (values.length < num_records) {\r\n\t        values.push(null);\r\n\t      }\r\n\t      values.push(report.stat(name));\r\n\t    });\r\n\t  });\r\n\t};\r\n\t\r\n\tStatsCollector.prototype.logStats = function () {\r\n\t  if (!window.focusJid) {\r\n\t    return;\r\n\t  }\r\n\t\r\n\t  var deflate = true;\r\n\t\r\n\t  var content = JSON.stringify(this.statsToBeLogged);\r\n\t  if (deflate) {\r\n\t    content = String.fromCharCode.apply(null, Pako.deflateRaw(content));\r\n\t  }\r\n\t  content = Base64.encode(content);\r\n\t\r\n\t  // XEP-0337-ish\r\n\t  var message = $msg({to: window.focusJid, type: 'normal'});\r\n\t  message.c('log', {\r\n\t    xmlns: 'urn:xmpp:eventlog',\r\n\t    id: 'PeerConnectionStats'\r\n\t  });\r\n\t  message.c('message').t(content).up();\r\n\t  if (deflate) {\r\n\t    message.c('tag', {name: \"deflated\", value: \"true\"}).up();\r\n\t  }\r\n\t  message.up();\r\n\t\r\n\t  connection.send(message);\r\n\t\r\n\t  // Reset the stats\r\n\t  this.statsToBeLogged.stats = {};\r\n\t  this.statsToBeLogged.timestamps = [];\r\n\t};\r\n\tvar keyMap = {\r\n\t  \"firefox\": {\r\n\t    \"ssrc\": \"ssrc\",\r\n\t    \"packetsReceived\": \"packetsReceived\",\r\n\t    \"packetsLost\": \"packetsLost\",\r\n\t    \"packetsSent\": \"packetsSent\",\r\n\t    \"bytesReceived\": \"bytesReceived\",\r\n\t    \"bytesSent\": \"bytesSent\"\r\n\t  },\r\n\t  \"safari\": {\r\n\t    /*\"receiveBandwidth\": \"googAvailableReceiveBandwidth\",\r\n\t    \"sendBandwidth\": \"googAvailableSendBandwidth\",\r\n\t    \"remoteAddress\": \"googRemoteAddress\",\r\n\t    \"transportType\": \"googTransportType\",\r\n\t    \"localAddress\": \"googLocalAddress\",\r\n\t    \"activeConnection\": \"googActiveConnection\",*/\r\n\t    \"ssrc\": \"ssrc\",\r\n\t    \"packetsReceived\": \"packetsReceived\",\r\n\t    \"packetsSent\": \"packetsSent\",\r\n\t    \"packetsLost\": \"packetsLost\",\r\n\t    \"bytesReceived\": \"bytesReceived\",\r\n\t    \"bytesSent\": \"bytesSent\",\r\n\t    \"frameHeight\": \"frameHeight\",\r\n\t    \"frameWidth\": \"frameWidth\"/*,\r\n\t    \"googFrameHeightSent\": \"googFrameHeightSent\",\r\n\t    \"googFrameWidthSent\": \"googFrameWidthSent\",\r\n\t    \"audioInputLevel\": \"audioInputLevel\",\r\n\t    \"audioOutputLevel\": \"audioOutputLevel\"*/\r\n\t  },\r\n\t  \"chrome\": {\r\n\t    \"receiveBandwidth\": \"googAvailableReceiveBandwidth\",\r\n\t    \"sendBandwidth\": \"googAvailableSendBandwidth\",\r\n\t    \"remoteAddress\": \"googRemoteAddress\",\r\n\t    \"transportType\": \"googTransportType\",\r\n\t    \"localAddress\": \"googLocalAddress\",\r\n\t    \"activeConnection\": \"googActiveConnection\",\r\n\t    \"ssrc\": \"ssrc\",\r\n\t    \"frameRateSent\": \"googFrameRateSent\",\r\n\t    \"rtt\": \"googRtt\",\r\n\t    \"packetsReceived\": \"packetsReceived\",\r\n\t    \"packetsSent\": \"packetsSent\",\r\n\t    \"packetsLost\": \"packetsLost\",\r\n\t    \"bytesReceived\": \"bytesReceived\",\r\n\t    \"bytesSent\": \"bytesSent\",\r\n\t    \"googFrameHeightReceived\": \"googFrameHeightReceived\",\r\n\t    \"googFrameWidthReceived\": \"googFrameWidthReceived\",\r\n\t    \"googFrameHeightSent\": \"googFrameHeightSent\",\r\n\t    \"googFrameWidthSent\": \"googFrameWidthSent\",\r\n\t    \"audioInputLevel\": \"audioInputLevel\",\r\n\t    \"audioOutputLevel\": \"audioOutputLevel\"\r\n\t  },\r\n\t  \"opera\": {\r\n\t    \"receiveBandwidth\": \"googAvailableReceiveBandwidth\",\r\n\t    \"sendBandwidth\": \"googAvailableSendBandwidth\",\r\n\t    \"remoteAddress\": \"googRemoteAddress\",\r\n\t    \"transportType\": \"googTransportType\",\r\n\t    \"localAddress\": \"googLocalAddress\",\r\n\t    \"activeConnection\": \"googActiveConnection\",\r\n\t    \"ssrc\": \"ssrc\",\r\n\t    \"frameRateSent\": \"googFrameRateSent\",\r\n\t    \"rtt\": \"googRtt\",\r\n\t    \"packetsReceived\": \"packetsReceived\",\r\n\t    \"packetsSent\": \"packetsSent\",\r\n\t    \"packetsLost\": \"packetsLost\",\r\n\t    \"bytesReceived\": \"bytesReceived\",\r\n\t    \"bytesSent\": \"bytesSent\",\r\n\t    \"googFrameHeightReceived\": \"googFrameHeightReceived\",\r\n\t    \"googFrameWidthReceived\": \"googFrameWidthReceived\",\r\n\t    \"googFrameHeightSent\": \"googFrameHeightSent\",\r\n\t    \"googFrameWidthSent\": \"googFrameWidthSent\",\r\n\t    \"audioInputLevel\": \"audioInputLevel\",\r\n\t    \"audioOutputLevel\": \"audioOutputLevel\"\r\n\t  }\r\n\t};\r\n\t\r\n\t/**\r\n\t * Stats processing logic.\r\n\t */\r\n\tStatsCollector.prototype.processStatsReport = function () {\r\n\t    try {\r\n\t  if (!this.baselineStatsReport) {\r\n\t    return;\r\n\t  }\r\n\t  //if(config.debug)\r\n\t  //   console.log(\"------this.currentStatsReport-------\", this.currentStatsReport);\r\n\t  for (var idx in this.currentStatsReport) {\r\n\t    var now = this.currentStatsReport[idx];\r\n\t        try {\r\n\t            if (getStatValue(now, 'receiveBandwidth') ||\r\n\t                getStatValue(now, 'sendBandwidth')) {\r\n\t                PeerStats.bandwidth = {\r\n\t          \"download\": Math.round(\r\n\t            (getStatValue(now, 'receiveBandwidth')) / 1000),\r\n\t          \"upload\": Math.round(\r\n\t            (getStatValue(now, 'sendBandwidth')) / 1000)\r\n\t                };\r\n\t            }\r\n\t        }\r\n\t        catch (e) {/*not supported*/\r\n\t        }\r\n\t\r\n\t        if (now.type == 'googCandidatePair') {\r\n\t            var ip, type, localIP, active;\r\n\t            try {\r\n\t                ip = getStatValue(now, 'remoteAddress');\r\n\t                type = getStatValue(now, \"transportType\");\r\n\t                localIP = getStatValue(now, \"localAddress\");\r\n\t                active = getStatValue(now, \"activeConnection\");\r\n\t            }\r\n\t            catch (e) {/*not supported*/\r\n\t            }\r\n\t            if (!ip || !type || !localIP || active != \"true\")\r\n\t                continue;\r\n\t            var addressSaved = false;\r\n\t            for (var i = 0; i < PeerStats.transport.length; i++) {\r\n\t                if (PeerStats.transport[i].ip == ip &&\r\n\t                    PeerStats.transport[i].type == type &&\r\n\t                    PeerStats.transport[i].localip == localIP) {\r\n\t                    addressSaved = true;\r\n\t                }\r\n\t            }\r\n\t            if (addressSaved)\r\n\t                continue;\r\n\t            PeerStats.transport.push({localip: localIP, ip: ip, type: type});\r\n\t            continue;\r\n\t        }\r\n\t        //FIXME: the stats don't find the ip info. [safari]\r\n\t        if ((RTC.isSafari() || RTC.isFirefox()) && now.type == \"candidate-pair\") {\r\n\t            if (now.state == \"succeeded\")\r\n\t                continue;\r\n\t            var local = this.currentStatsReport[now.localCandidateId];\r\n\t            var remote = this.currentStatsReport[now.remoteCandidateId];\r\n\t            //if(config.debug)\r\n\t            //console.log(\"-----------candidate-pair-----------\", this.currentStatsReport, local, remote);\r\n\t            /*PeerStats.transport.push({\r\n\t                localip: local.ipAddress + \":\" + local.portNumber,\r\n\t                ip: remote.ipAddress + \":\" + remote.portNumber, type: local.transport\r\n\t            });*/\r\n\t        }\r\n\t\r\n\t        if (now.type == \"candidatepair\") {\r\n\t            if (now.state == \"succeeded\")\r\n\t                continue;\r\n\t\r\n\t            var local = this.currentStatsReport[now.localCandidateId];\r\n\t            var remote = this.currentStatsReport[now.remoteCandidateId];\r\n\t            PeerStats.transport.push({\r\n\t                localip: local.ipAddress + \":\" + local.portNumber,\r\n\t                ip: remote.ipAddress + \":\" + remote.portNumber, type: local.transport\r\n\t            });\r\n\t\r\n\t        }\r\n\t\r\n\t    //[safari]  now.type ==== \"track\" \"outbound-rtp\" \"inbound-rtp\"\r\n\t    if (now.type != 'ssrc' && now.type != \"outboundrtp\" && now.type != \"inboundrtp\"\r\n\t        && now.type != \"track\" && now.type != \"outbound-rtp\" && now.type != \"inbound-rtp\") {\r\n\t        continue;\r\n\t    }\r\n\t    //此处做一下处理获取到真正的ssrc\r\n\t    if((RTC.isSafari() || RTC.isFirefox()) && (now.type == \"inbound-rtp\" || now.type == \"track\")) {\r\n\t        // var ids = now.id.split(\"_\");\r\n\t        // now.ssrc = ids[ids.length - 1];\r\n\t        now.ssrc = now.id.match(/_([\\d.]+)$/)[1];\r\n\t    }\r\n\t\r\n\t\r\n\t    var before = this.baselineStatsReport[idx];\r\n\t    if (!before) {\r\n\t      console.warn(getStatValue(now, 'ssrc') + ' not enough data');\r\n\t      continue;\r\n\t    }\r\n\t\r\n\t    var ssrc = getStatValue(now, 'ssrc');\r\n\t    if (!ssrc)\r\n\t      continue;\r\n\t    var jid = ssrc2jid[ssrc];\r\n\t    if (!jid) {\r\n\t      //console.warn(\"No jid for ssrc: \" + ssrc);\r\n\t      continue;\r\n\t    }\r\n\t\r\n\t    var jidStats = this.jid2stats[jid];\r\n\t    if (!jidStats) {\r\n\t      jidStats = new PeerStats();\r\n\t      this.jid2stats[jid] = jidStats;\r\n\t    }\r\n\t\r\n\t\r\n\t        var isDownloadStream = true;\r\n\t        var key = 'packetsReceived';\r\n\t        if((RTC.isSafari() || RTC.isFirefox()) && now.type == \"track\") {\r\n\t            //safari track only get audiolevel and resolution, don't get packets info\r\n\t        } else {\r\n\t            if (!getStatValue(now, key)) {\r\n\t                isDownloadStream = false;\r\n\t                key = 'packetsSent';\r\n\t                if (!getStatValue(now, key)) {\r\n\t                    console.warn(\"No packetsReceived nor packetSent stat found\");\r\n\t                    continue;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t\r\n\t        var packetsNow = getStatValue(now, key);\r\n\t        if (!packetsNow || packetsNow < 0)\r\n\t            packetsNow = 0;\r\n\t\r\n\t        var packetsBefore = getStatValue(before, key);\r\n\t        if (!packetsBefore || packetsBefore < 0)\r\n\t            packetsBefore = 0;\r\n\t        var packetRate = packetsNow - packetsBefore;\r\n\t        if (!packetRate || packetRate < 0)\r\n\t            packetRate = 0;\r\n\t        var currentLoss = getStatValue(now, 'packetsLost');\r\n\t        if (!currentLoss || currentLoss < 0)\r\n\t            currentLoss = 0;\r\n\t        var previousLoss = getStatValue(before, 'packetsLost');\r\n\t        if (!previousLoss || previousLoss < 0)\r\n\t            previousLoss = 0;\r\n\t        var lossRate = currentLoss - previousLoss;\r\n\t        if (!lossRate || lossRate < 0)\r\n\t            lossRate = 0;\r\n\t        var packetsTotal = (packetRate + lossRate);\r\n\t\r\n\t        jidStats.setSsrcLoss(ssrc,\r\n\t            {\r\n\t                \"packetsTotal\": packetsTotal,\r\n\t                \"packetsLost\": lossRate,\r\n\t                \"isDownloadStream\": isDownloadStream\r\n\t            });\r\n\t\r\n\t\r\n\t        var bytesReceived = 0, bytesSent = 0;\r\n\t        if (getStatValue(now, \"bytesReceived\")) {\r\n\t      bytesReceived = getStatValue(now, \"bytesReceived\") -\r\n\t        getStatValue(before, \"bytesReceived\");\r\n\t        }\r\n\t\r\n\t        if (getStatValue(now, \"bytesSent\")) {\r\n\t      bytesSent = getStatValue(now, \"bytesSent\") -\r\n\t        getStatValue(before, \"bytesSent\");\r\n\t        }\r\n\t        //if(config.debug)\r\n\t        //console.log(\"---now---bytesReceived---bytesSent---\"+bytesReceived+\"---\"+bytesSent, now);\r\n\t        //精确算法到毫秒  否则误差太大\r\n\t        var time = now.timestamp - before.timestamp;\r\n\t        bytesReceived = (bytesReceived <= 0 || time <= 0)?0:Math.round(((bytesReceived * 8 * 1000) / time) / 1024);\r\n\t        bytesSent = (bytesSent <= 0 || time <= 0)?0:Math.round(((bytesSent * 8 * 1000) / time) / 1024);\r\n\t\r\n\t\r\n\t        jidStats.setSsrcBitrate(ssrc, {\r\n\t            \"download\": bytesReceived,\r\n\t            \"upload\": bytesSent\r\n\t        });\r\n\t\r\n\t        var resolution = {height: null, width: null};\r\n\t        try {\r\n\t            if(RTC.isSafari() || RTC.isFirefox()) {\r\n\t                resolution.height = getStatValue(now, \"frameHeight\");\r\n\t                resolution.width = getStatValue(now, \"frameWidth\");\r\n\t                //由于safari  stats中无法获取 本地视频分辨率，只能如此设置\r\n\t                if(!resolution.height && localStreamSSRC == ssrc) {\r\n\t                    resolution = {height:constraints.video.height.exact, width:constraints.video.width.exact}\r\n\t                }\r\n\t            } else {\r\n\t                if (getStatValue(now, \"googFrameHeightReceived\") &&\r\n\t                    getStatValue(now, \"googFrameWidthReceived\")) {\r\n\t                    resolution.height = getStatValue(now, \"googFrameHeightReceived\");\r\n\t                    resolution.width = getStatValue(now, \"googFrameWidthReceived\");\r\n\t                }\r\n\t                else if (getStatValue(now, \"googFrameHeightSent\") &&\r\n\t                    getStatValue(now, \"googFrameWidthSent\")) {\r\n\t                    resolution.height = getStatValue(now, \"googFrameHeightSent\");\r\n\t                    resolution.width = getStatValue(now, \"googFrameWidthSent\");\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        catch (e) {/*not supported*/\r\n\t        }\r\n\t    /*if(config.debug) {\r\n\t        console.log(\"---resolution---height---width---\" + resolution.height +\"---\"+ resolution.width, now);\r\n\t    }*/\r\n\t        if (resolution.height && resolution.width) {\r\n\t            jidStats.setSsrcResolution(ssrc, resolution);\r\n\t        }\r\n\t        else {\r\n\t            jidStats.setSsrcResolution(ssrc, null);\r\n\t        }\r\n\t\r\n\t        var frameRate = getStatValue(now, 'frameRateSent')\r\n\t        var rtt = getStatValue(now, 'rtt')\r\n\t        if (frameRate && rtt) {\r\n\t            // just store video frameRate and rtt yet\r\n\t            jidStats.setFrameRate(ssrc, frameRate)\r\n\t            jidStats.setRtt(ssrc, rtt)\r\n\t        }\r\n\t  }\r\n\t\r\n\t  var self = this;\r\n\t  // Jid stats\r\n\t  var totalPackets = {download: 0, upload: 0};\r\n\t  var lostPackets = {download: 0, upload: 0};\r\n\t  var bitrateDownload = 0;\r\n\t  var bitrateUpload = 0;\r\n\t  var resolutions = {};\r\n\t  var frameRateStatus = {};\r\n\t  var rttStatus = {};\r\n\t  Object.keys(this.jid2stats).forEach(\r\n\t    function (jid) {\r\n\t      Object.keys(self.jid2stats[jid].ssrc2Loss).forEach(\r\n\t        function (ssrc) {\r\n\t          var type = \"upload\";\r\n\t          if (self.jid2stats[jid].ssrc2Loss[ssrc].isDownloadStream)\r\n\t            type = \"download\";\r\n\t          totalPackets[type] +=\r\n\t            self.jid2stats[jid].ssrc2Loss[ssrc].packetsTotal;\r\n\t          lostPackets[type] +=\r\n\t            self.jid2stats[jid].ssrc2Loss[ssrc].packetsLost;\r\n\t        }\r\n\t      );\r\n\t      Object.keys(self.jid2stats[jid].ssrc2bitrate).forEach(\r\n\t        function (ssrc) {\r\n\t          bitrateDownload +=\r\n\t            self.jid2stats[jid].ssrc2bitrate[ssrc].download;\r\n\t          bitrateUpload +=\r\n\t            self.jid2stats[jid].ssrc2bitrate[ssrc].upload;\r\n\t\r\n\t          delete self.jid2stats[jid].ssrc2bitrate[ssrc];\r\n\t        }\r\n\t      );\r\n\t      resolutions[jid] = self.jid2stats[jid].ssrc2resolution;\r\n\t        Object.keys(self.jid2stats[jid].ssrc2frameRate).forEach(\r\n\t            function (ssrc) {\r\n\t                frameRateStatus[ssrc] = self.jid2stats[jid].ssrc2frameRate[ssrc]\r\n\t                delete self.jid2stats[jid].ssrc2frameRate[ssrc];\r\n\t            }\r\n\t        );\r\n\t        Object.keys(self.jid2stats[jid].ssrc2rtt).forEach(\r\n\t            function (ssrc) {\r\n\t                rttStatus[ssrc] = self.jid2stats[jid].ssrc2rtt[ssrc]\r\n\t                delete self.jid2stats[jid].ssrc2rtt[ssrc];\r\n\t            }\r\n\t        );\r\n\t    }\r\n\t  );\r\n\t\r\n\t  PeerStats.bitrate = {\"upload\": bitrateUpload, \"download\": bitrateDownload};\r\n\t    //console.log(\"-----------PeerStats.bitrate--------\", PeerStats.bitrate);\r\n\t  PeerStats.packetLoss = {\r\n\t    total: calculatePacketLoss(lostPackets.download + lostPackets.upload,\r\n\t      totalPackets.download + totalPackets.upload),\r\n\t    download: calculatePacketLoss(lostPackets.download, totalPackets.download),\r\n\t    upload: calculatePacketLoss(lostPackets.upload, totalPackets.upload)\r\n\t  };\r\n\t  this.statsUpdateCallback(\r\n\t    {\r\n\t      \"bitrate\": PeerStats.bitrate,\r\n\t      \"packetLoss\": PeerStats.packetLoss,\r\n\t      \"bandwidth\": PeerStats.bandwidth,\r\n\t      \"resolution\": resolutions,\r\n\t      \"frameRate\": frameRateStatus,\r\n\t      \"rtt\": rttStatus,\r\n\t      \"transport\": PeerStats.transport\r\n\t    });\r\n\t  PeerStats.transport = [];\r\n\t    } catch (e) {\r\n\t        console.error(\"=================processStatsReport:\", e);\r\n\t    }\r\n\t};\r\n\t\r\n\t/**\r\n\t * Stats processing logic.\r\n\t */\r\n\tStatsCollector.prototype.processAudioLevelReport = function () {\r\n\t  if (!this.baselineAudioLevelsReport) {\r\n\t    return;\r\n\t  }\r\n\t\r\n\t  for (var idx in this.currentAudioLevelsReport) {\r\n\t    var now = this.currentAudioLevelsReport[idx];\r\n\t\r\n\t    if (now.type != 'ssrc') {\r\n\t      continue;\r\n\t    }\r\n\t\r\n\t    var before = this.baselineAudioLevelsReport[idx];\r\n\t    if (!before) {\r\n\t      //console.warn(getStatValue(now, 'ssrc') + ' not enough data');\r\n\t      continue;\r\n\t    }\r\n\t\r\n\t    var ssrc = getStatValue(now, 'ssrc');\r\n\t    var jid = ssrc2jid[ssrc];\r\n\t    if (!jid) {\r\n\t      //console.warn(\"No jid for ssrc: \" + ssrc);\r\n\t      continue;\r\n\t    }\r\n\t\r\n\t    var jidStats = this.jid2stats[jid];\r\n\t    if (!jidStats) {\r\n\t      jidStats = new PeerStats();\r\n\t      this.jid2stats[jid] = jidStats;\r\n\t    }\r\n\t\r\n\t    // Audio level\r\n\t    var audioLevel = null;\r\n\t\r\n\t    try {\r\n\t      audioLevel = getStatValue(now, 'audioInputLevel');\r\n\t      if (!audioLevel)\r\n\t        audioLevel = getStatValue(now, 'audioOutputLevel');\r\n\t    }\r\n\t    catch (e) {/*not supported*/\r\n\t      console.warn(\"Audio Levels are not available in the statistics.\");\r\n\t      clearInterval(this.audioLevelsIntervalId);\r\n\t      return;\r\n\t    }\r\n\t\r\n\t    if (audioLevel) {\r\n\t      // TODO: can't find specs about what this value really is,\r\n\t      // but it seems to vary between 0 and around 32k.\r\n\t      audioLevel = audioLevel / 32767;\r\n\t      jidStats.setSsrcAudioLevel(ssrc, audioLevel);\r\n\t      if (jid != connection.emuc.myroomjid)\r\n\t        this.audioLevelsUpdateCallback(jid, audioLevel);\r\n\t    }\r\n\t\r\n\t  }\r\n\t\r\n\t\r\n\t};\r\n\t\r\n\tfunction getStatValue(item, name) {\r\n\t  if (!keyMap[RTC.browser][name]) {\r\n\t     return 0;\r\n\t  }\r\n\t  var key = keyMap[RTC.browser][name];\r\n\t  return RTC.browser == \"chrome\" ? item.stat(key) : item[key];\r\n\t}\r\n\t\r\n\texports = module.exports = StatsCollector;\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\t/**\r\n\t * Provides statistics for the local stream.\r\n\t */\r\n\tvar LocalStatsCollector = (function () {\r\n\t  /**\r\n\t   * Size of the webaudio analizer buffer.\r\n\t   * @type {number}\r\n\t   */\r\n\t  var WEBAUDIO_ANALIZER_FFT_SIZE = 2048;\r\n\t\r\n\t  /**\r\n\t   * Value of the webaudio analizer smoothing time parameter.\r\n\t   * @type {number}\r\n\t   */\r\n\t  var WEBAUDIO_ANALIZER_SMOOTING_TIME = 0.8;\r\n\t\r\n\t  /**\r\n\t   * <tt>LocalStatsCollector</tt> calculates statistics for the local stream.\r\n\t   *\r\n\t   * @param stream the local stream\r\n\t   * @param interval stats refresh interval given in ms.\r\n\t   * @param {function(LocalStatsCollector)} updateCallback the callback called on stats\r\n\t   *                                   update.\r\n\t   * @constructor\r\n\t   */\r\n\t  function LocalStatsCollectorProto(stream, interval, updateCallback) {\r\n\t    window.AudioContext = window.AudioContext || window.webkitAudioContext;\r\n\t    this.stream = stream;\r\n\t    this.intervalId = null;\r\n\t    this.intervalMilis = interval;\r\n\t    this.audioLevelsUpdateCallback = updateCallback;\r\n\t    this.audioLevel = 0;\r\n\t  }\r\n\t\r\n\t  /**\r\n\t   * Starts the collecting the statistics.\r\n\t   */\r\n\t  LocalStatsCollectorProto.prototype.start = function () {\r\n\t    if (!window.AudioContext)\r\n\t      return;\r\n\t\r\n\t    var context = new AudioContext();\r\n\t    var analyser = context.createAnalyser();\r\n\t    analyser.smoothingTimeConstant = WEBAUDIO_ANALIZER_SMOOTING_TIME;\r\n\t    analyser.fftSize = WEBAUDIO_ANALIZER_FFT_SIZE;\r\n\t\r\n\t\r\n\t    var source = context.createMediaStreamSource(this.stream);\r\n\t    source.connect(analyser);\r\n\t\r\n\t\r\n\t    var self = this;\r\n\t\r\n\t    this.intervalId = setInterval(\r\n\t      function () {\r\n\t        var array = new Uint8Array(analyser.frequencyBinCount);\r\n\t        analyser.getByteTimeDomainData(array);\r\n\t        var audioLevel = TimeDomainDataToAudioLevel(array);\r\n\t        if (audioLevel != self.audioLevel) {\r\n\t          self.audioLevel = animateLevel(audioLevel, self.audioLevel);\r\n\t          self.audioLevelsUpdateCallback(LocalStatsCollectorProto.LOCAL_JID, self.audioLevel);\r\n\t        }\r\n\t      },\r\n\t      this.intervalMilis\r\n\t    );\r\n\t\r\n\t  };\r\n\t\r\n\t  /**\r\n\t   * Stops collecting the statistics.\r\n\t   */\r\n\t  LocalStatsCollectorProto.prototype.stop = function () {\r\n\t    if (this.intervalId) {\r\n\t      clearInterval(this.intervalId);\r\n\t      this.intervalId = null;\r\n\t    }\r\n\t  };\r\n\t\r\n\t  /**\r\n\t   * Converts time domain data array to audio level.\r\n\t   * @param array the time domain data array.\r\n\t   * @returns {number} the audio level\r\n\t   */\r\n\t  var TimeDomainDataToAudioLevel = function (samples) {\r\n\t\r\n\t    var maxVolume = 0;\r\n\t\r\n\t    var length = samples.length;\r\n\t\r\n\t    for (var i = 0; i < length; i++) {\r\n\t      if (maxVolume < samples[i])\r\n\t        maxVolume = samples[i];\r\n\t    }\r\n\t\r\n\t    return parseFloat(((maxVolume - 127) / 128).toFixed(3));\r\n\t  };\r\n\t\r\n\t  /**\r\n\t   * Animates audio level change\r\n\t   * @param newLevel the new audio level\r\n\t   * @param lastLevel the last audio level\r\n\t   * @returns {Number} the audio level to be set\r\n\t   */\r\n\t  function animateLevel(newLevel, lastLevel) {\r\n\t    var value = 0;\r\n\t    var diff = lastLevel - newLevel;\r\n\t    if (diff > 0.2) {\r\n\t      value = lastLevel - 0.2;\r\n\t    }\r\n\t    else if (diff < -0.4) {\r\n\t      value = lastLevel + 0.4;\r\n\t    }\r\n\t    else {\r\n\t      value = newLevel;\r\n\t    }\r\n\t\r\n\t    return parseFloat(value.toFixed(3));\r\n\t  }\r\n\t\r\n\t  /**\r\n\t   * Indicates that this audio level is for local jid.\r\n\t   * @type {string}\r\n\t   */\r\n\t  LocalStatsCollectorProto.LOCAL_JID = 'local';\r\n\t\r\n\t  return LocalStatsCollectorProto;\r\n\t})();\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\t/**\r\n\t * The audio Levels plugin.\r\n\t */\r\n\tvar AudioLevels = (function (my) {\r\n\t  var audioLevelCanvasCache = {};\r\n\t\r\n\t  my.LOCAL_LEVEL = 'local';\r\n\t\r\n\t  /**\r\n\t   * Updates the audio level canvas for the given peerJid. If the canvas\r\n\t   * didn't exist we create it.\r\n\t   */\r\n\t  my.updateAudioLevelCanvas = function (peerJid) {\r\n\t    var resourceJid = null;\r\n\t    var videoSpanId = null;\r\n\t    if (!peerJid)\r\n\t      videoSpanId = 'localVideoContainer';\r\n\t    else {\r\n\t      resourceJid = Strophe.getResourceFromJid(peerJid);\r\n\t\r\n\t      videoSpanId = 'participant_' + resourceJid;\r\n\t    }\r\n\t\r\n\t    var videoSpan = document.getElementById(videoSpanId);\r\n\t\r\n\t    if (!videoSpan) {\r\n\t      if (resourceJid)\r\n\t        console.error(\"No video element for jid\", resourceJid);\r\n\t      else\r\n\t        console.error(\"No video element for local video.\");\r\n\t\r\n\t      return;\r\n\t    }\r\n\t\r\n\t    var audioLevelCanvas = $('#' + videoSpanId + '>canvas');\r\n\t\r\n\t    var videoSpaceWidth = $('#remoteVideos').width();\r\n\t    var thumbnailSize = VideoLayout.calculateThumbnailSize(videoSpaceWidth);\r\n\t    var thumbnailWidth = thumbnailSize[0];\r\n\t    var thumbnailHeight = thumbnailSize[1];\r\n\t\r\n\t    if (!audioLevelCanvas || audioLevelCanvas.length === 0) {\r\n\t\r\n\t      audioLevelCanvas = document.createElement('canvas');\r\n\t      audioLevelCanvas.className = \"audiolevel\";\r\n\t      audioLevelCanvas.style.bottom = \"-\" + interfaceConfig.CANVAS_EXTRA / 2 + \"px\";\r\n\t      audioLevelCanvas.style.left = \"-\" + interfaceConfig.CANVAS_EXTRA / 2 + \"px\";\r\n\t      resizeAudioLevelCanvas(audioLevelCanvas,\r\n\t        thumbnailWidth,\r\n\t        thumbnailHeight);\r\n\t\r\n\t      videoSpan.appendChild(audioLevelCanvas);\r\n\t    } else {\r\n\t      audioLevelCanvas = audioLevelCanvas.get(0);\r\n\t\r\n\t      resizeAudioLevelCanvas(audioLevelCanvas,\r\n\t        thumbnailWidth,\r\n\t        thumbnailHeight);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  /**\r\n\t   * Updates the audio level UI for the given resourceJid.\r\n\t   *\r\n\t   * @param resourceJid the resource jid indicating the video element for\r\n\t   * which we draw the audio level\r\n\t   * @param audioLevel the newAudio level to render\r\n\t   */\r\n\t  my.updateAudioLevel = function (resourceJid, audioLevel) {\r\n\t    drawAudioLevelCanvas(resourceJid, audioLevel);\r\n\t\r\n\t    var videoSpanId = getVideoSpanId(resourceJid);\r\n\t\r\n\t    var audioLevelCanvas = $('#' + videoSpanId + '>canvas').get(0);\r\n\t\r\n\t    if (!audioLevelCanvas)\r\n\t      return;\r\n\t\r\n\t    var drawContext = audioLevelCanvas.getContext('2d');\r\n\t\r\n\t    var canvasCache = audioLevelCanvasCache[resourceJid];\r\n\t\r\n\t    drawContext.clearRect(0, 0,\r\n\t      audioLevelCanvas.width, audioLevelCanvas.height);\r\n\t    drawContext.drawImage(canvasCache, 0, 0);\r\n\t\r\n\t    if (resourceJid === AudioLevels.LOCAL_LEVEL) {\r\n\t      if (!connection.emuc.myroomjid) {\r\n\t        return;\r\n\t      }\r\n\t      resourceJid = Strophe.getResourceFromJid(connection.emuc.myroomjid);\r\n\t    }\r\n\t\r\n\t    if (resourceJid === VideoLayout.getLargeVideoState().userResourceJid) {\r\n\t      AudioLevels.updateActiveSpeakerAudioLevel(audioLevel);\r\n\t    }\r\n\t  };\r\n\t\r\n\t  my.updateActiveSpeakerAudioLevel = function (audioLevel) {\r\n\t    var drawContext = $('#activeSpeakerAudioLevel')[0].getContext('2d');\r\n\t    var r = interfaceConfig.ACTIVE_SPEAKER_AVATAR_SIZE / 2;\r\n\t    var center = (interfaceConfig.ACTIVE_SPEAKER_AVATAR_SIZE + r) / 2;\r\n\t\r\n\t    // Save the previous state of the context.\r\n\t    drawContext.save();\r\n\t\r\n\t    drawContext.clearRect(0, 0, 300, 300);\r\n\t\r\n\t    // Draw a circle.\r\n\t    drawContext.arc(center, center, r, 0, 2 * Math.PI);\r\n\t\r\n\t    // Add a shadow around the circle\r\n\t    drawContext.shadowColor = interfaceConfig.SHADOW_COLOR;\r\n\t    drawContext.shadowBlur = getShadowLevel(audioLevel);\r\n\t    drawContext.shadowOffsetX = 0;\r\n\t    drawContext.shadowOffsetY = 0;\r\n\t\r\n\t    // Fill the shape.\r\n\t    drawContext.fill();\r\n\t\r\n\t    drawContext.save();\r\n\t\r\n\t    drawContext.restore();\r\n\t\r\n\t\r\n\t    drawContext.arc(center, center, r, 0, 2 * Math.PI);\r\n\t\r\n\t    drawContext.clip();\r\n\t    drawContext.clearRect(0, 0, 277, 200);\r\n\t\r\n\t    // Restore the previous context state.\r\n\t    drawContext.restore();\r\n\t  };\r\n\t\r\n\t  /**\r\n\t   * Resizes the given audio level canvas to match the given thumbnail size.\r\n\t   */\r\n\t  function resizeAudioLevelCanvas(audioLevelCanvas,\r\n\t                                  thumbnailWidth,\r\n\t                                  thumbnailHeight) {\r\n\t    audioLevelCanvas.width = thumbnailWidth + interfaceConfig.CANVAS_EXTRA;\r\n\t    audioLevelCanvas.height = thumbnailHeight + interfaceConfig.CANVAS_EXTRA;\r\n\t  }\r\n\t\r\n\t  /**\r\n\t   * Draws the audio level canvas into the cached canvas object.\r\n\t   *\r\n\t   * @param resourceJid the resource jid indicating the video element for\r\n\t   * which we draw the audio level\r\n\t   * @param audioLevel the newAudio level to render\r\n\t   */\r\n\t  function drawAudioLevelCanvas(resourceJid, audioLevel) {\r\n\t    if (!audioLevelCanvasCache[resourceJid]) {\r\n\t\r\n\t      var videoSpanId = getVideoSpanId(resourceJid);\r\n\t\r\n\t      var audioLevelCanvasOrig = $('#' + videoSpanId + '>canvas').get(0);\r\n\t\r\n\t      /*\r\n\t       * FIXME Testing has shown that audioLevelCanvasOrig may not exist.\r\n\t       * In such a case, the method CanvasUtil.cloneCanvas may throw an\r\n\t       * error. Since audio levels are frequently updated, the errors have\r\n\t       * been observed to pile into the console, strain the CPU.\r\n\t       */\r\n\t      if (audioLevelCanvasOrig) {\r\n\t        audioLevelCanvasCache[resourceJid]\r\n\t          = CanvasUtil.cloneCanvas(audioLevelCanvasOrig);\r\n\t      }\r\n\t    }\r\n\t\r\n\t    var canvas = audioLevelCanvasCache[resourceJid];\r\n\t\r\n\t    if (!canvas)\r\n\t      return;\r\n\t\r\n\t    var drawContext = canvas.getContext('2d');\r\n\t\r\n\t    drawContext.clearRect(0, 0, canvas.width, canvas.height);\r\n\t\r\n\t    var shadowLevel = getShadowLevel(audioLevel);\r\n\t\r\n\t    if (shadowLevel > 0)\r\n\t    // drawContext, x, y, w, h, r, shadowColor, shadowLevel\r\n\t      CanvasUtil.drawRoundRectGlow(drawContext,\r\n\t        interfaceConfig.CANVAS_EXTRA / 2, interfaceConfig.CANVAS_EXTRA / 2,\r\n\t        canvas.width - interfaceConfig.CANVAS_EXTRA,\r\n\t        canvas.height - interfaceConfig.CANVAS_EXTRA,\r\n\t        interfaceConfig.CANVAS_RADIUS,\r\n\t        interfaceConfig.SHADOW_COLOR,\r\n\t        shadowLevel);\r\n\t  }\r\n\t\r\n\t  /**\r\n\t   * Returns the shadow/glow level for the given audio level.\r\n\t   *\r\n\t   * @param audioLevel the audio level from which we determine the shadow\r\n\t   * level\r\n\t   */\r\n\t  function getShadowLevel(audioLevel) {\r\n\t    var shadowLevel = 0;\r\n\t\r\n\t    if (audioLevel <= 0.3) {\r\n\t      shadowLevel = Math.round(interfaceConfig.CANVAS_EXTRA / 2 * (audioLevel / 0.3));\r\n\t    }\r\n\t    else if (audioLevel <= 0.6) {\r\n\t      shadowLevel = Math.round(interfaceConfig.CANVAS_EXTRA / 2 * ((audioLevel - 0.3) / 0.3));\r\n\t    }\r\n\t    else {\r\n\t      shadowLevel = Math.round(interfaceConfig.CANVAS_EXTRA / 2 * ((audioLevel - 0.6) / 0.4));\r\n\t    }\r\n\t    return shadowLevel;\r\n\t  }\r\n\t\r\n\t  /**\r\n\t   * Returns the video span id corresponding to the given resourceJid or local\r\n\t   * user.\r\n\t   */\r\n\t  function getVideoSpanId(resourceJid) {\r\n\t    var videoSpanId = null;\r\n\t    if (resourceJid === AudioLevels.LOCAL_LEVEL\r\n\t      || (connection.emuc.myroomjid && resourceJid\r\n\t      === Strophe.getResourceFromJid(connection.emuc.myroomjid)))\r\n\t      videoSpanId = 'localVideoContainer';\r\n\t    else\r\n\t      videoSpanId = 'participant_' + resourceJid;\r\n\t\r\n\t    return videoSpanId;\r\n\t  }\r\n\t\r\n\t  /**\r\n\t   * Indicates that the remote video has been resized.\r\n\t   */\r\n\t  $(document).bind('remotevideo.resized', function (event, width, height) {\r\n\t    var resized = false;\r\n\t    $('#remoteVideos>span>canvas').each(function () {\r\n\t      var canvas = $(this).get(0);\r\n\t      if (canvas.width !== width + interfaceConfig.CANVAS_EXTRA) {\r\n\t        canvas.width = width + interfaceConfig.CANVAS_EXTRA;\r\n\t        resized = true;\r\n\t      }\r\n\t\r\n\t      if (canvas.heigh !== height + interfaceConfig.CANVAS_EXTRA) {\r\n\t        canvas.height = height + interfaceConfig.CANVAS_EXTRA;\r\n\t        resized = true;\r\n\t      }\r\n\t    });\r\n\t\r\n\t    if (resized)\r\n\t      Object.keys(audioLevelCanvasCache).forEach(function (resourceJid) {\r\n\t        audioLevelCanvasCache[resourceJid].width\r\n\t          = width + interfaceConfig.CANVAS_EXTRA;\r\n\t        audioLevelCanvasCache[resourceJid].height\r\n\t          = height + interfaceConfig.CANVAS_EXTRA;\r\n\t      });\r\n\t  });\r\n\t\r\n\t  return my;\r\n\t\r\n\t})(AudioLevels || {});\r\n\t\r\n\texports = module.exports = AudioLevels;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar adapter = __webpack_require__(12);\r\n\t\r\n\t/**\r\n\t * 获取本地音视频流\r\n\t *\r\n\t * @param constraints\r\n\t * @param successCallback\r\n\t * @param errorCallback\r\n\t */\r\n\tfunction _getMedia(constraints, successCallback, errorCallback) {\r\n\t  if (stream) {\r\n\t    stream.getTracks().forEach(function (track) {\r\n\t      track.stop();\r\n\t    });\r\n\t  }\r\n\t  navigator.mediaDevices.getUserMedia(constraints)\r\n\t    .then(successCallback)\r\n\t    .catch(function (e) {\r\n\t      errorCallback(e);\r\n\t    });\r\n\t};\r\n\t\r\n\tmodule.exports = {\r\n\t  getMedia: _getMedia\r\n\t};\r\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/*\n\t *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t\n\t'use strict';\n\t\n\tvar adapterFactory = __webpack_require__(13);\n\tmodule.exports = adapterFactory({window: global.window});\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(14);\n\t// Shimming starts here.\n\tmodule.exports = function(dependencies, opts) {\n\t  var window = dependencies && dependencies.window;\n\t\n\t  var options = {\n\t    shimChrome: true,\n\t    shimFirefox: true,\n\t    shimEdge: true,\n\t    shimSafari: true,\n\t  };\n\t\n\t  for (var key in opts) {\n\t    if (hasOwnProperty.call(opts, key)) {\n\t      options[key] = opts[key];\n\t    }\n\t  }\n\t\n\t  // Utils.\n\t  var logging = utils.log;\n\t  var browserDetails = utils.detectBrowser(window);\n\t\n\t  // Uncomment the line below if you want logging to occur, including logging\n\t  // for the switch statement below. Can also be turned on in the browser via\n\t  // adapter.disableLog(false), but then logging from the switch statement below\n\t  // will not appear.\n\t  // require('./utils').disableLog(false);\n\t\n\t  // Browser shims.\n\t  var chromeShim = __webpack_require__(15) || null;\n\t  var edgeShim = __webpack_require__(17) || null;\n\t  var firefoxShim = __webpack_require__(22) || null;\n\t  var safariShim = __webpack_require__(24) || null;\n\t  var commonShim = __webpack_require__(25) || null;\n\t\n\t  // Export to the adapter global object visible in the browser.\n\t  var adapter = {\n\t    browserDetails: browserDetails,\n\t    commonShim: commonShim,\n\t    extractVersion: utils.extractVersion,\n\t    disableLog: utils.disableLog,\n\t    disableWarnings: utils.disableWarnings\n\t  };\n\t\n\t  // Shim browser if found.\n\t  switch (browserDetails.browser) {\n\t    case 'chrome':\n\t      if (!chromeShim || !chromeShim.shimPeerConnection ||\n\t          !options.shimChrome) {\n\t        logging('Chrome shim is not included in this adapter release.');\n\t        return adapter;\n\t      }\n\t      logging('adapter.js shimming chrome.');\n\t      // Export to the adapter global object visible in the browser.\n\t      adapter.browserShim = chromeShim;\n\t      commonShim.shimCreateObjectURL(window);\n\t\n\t      chromeShim.shimGetUserMedia(window);\n\t      chromeShim.shimMediaStream(window);\n\t      chromeShim.shimSourceObject(window);\n\t      chromeShim.shimPeerConnection(window);\n\t      chromeShim.shimOnTrack(window);\n\t      chromeShim.shimAddTrackRemoveTrack(window);\n\t      chromeShim.shimGetSendersWithDtmf(window);\n\t      chromeShim.shimSenderReceiverGetStats(window);\n\t      chromeShim.fixNegotiationNeeded(window);\n\t\n\t      commonShim.shimRTCIceCandidate(window);\n\t      commonShim.shimMaxMessageSize(window);\n\t      commonShim.shimSendThrowTypeError(window);\n\t      break;\n\t    case 'firefox':\n\t      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n\t          !options.shimFirefox) {\n\t        logging('Firefox shim is not included in this adapter release.');\n\t        return adapter;\n\t      }\n\t      logging('adapter.js shimming firefox.');\n\t      // Export to the adapter global object visible in the browser.\n\t      adapter.browserShim = firefoxShim;\n\t      commonShim.shimCreateObjectURL(window);\n\t\n\t      firefoxShim.shimGetUserMedia(window);\n\t      firefoxShim.shimSourceObject(window);\n\t      firefoxShim.shimPeerConnection(window);\n\t      firefoxShim.shimOnTrack(window);\n\t      firefoxShim.shimRemoveStream(window);\n\t      firefoxShim.shimSenderGetStats(window);\n\t      firefoxShim.shimReceiverGetStats(window);\n\t      firefoxShim.shimRTCDataChannel(window);\n\t\n\t      commonShim.shimRTCIceCandidate(window);\n\t      commonShim.shimMaxMessageSize(window);\n\t      commonShim.shimSendThrowTypeError(window);\n\t      break;\n\t    case 'edge':\n\t      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n\t        logging('MS edge shim is not included in this adapter release.');\n\t        return adapter;\n\t      }\n\t      logging('adapter.js shimming edge.');\n\t      // Export to the adapter global object visible in the browser.\n\t      adapter.browserShim = edgeShim;\n\t      commonShim.shimCreateObjectURL(window);\n\t\n\t      edgeShim.shimGetUserMedia(window);\n\t      edgeShim.shimPeerConnection(window);\n\t      edgeShim.shimReplaceTrack(window);\n\t\n\t      // the edge shim implements the full RTCIceCandidate object.\n\t\n\t      commonShim.shimMaxMessageSize(window);\n\t      commonShim.shimSendThrowTypeError(window);\n\t      break;\n\t    case 'safari':\n\t      if (!safariShim || !options.shimSafari) {\n\t        logging('Safari shim is not included in this adapter release.');\n\t        return adapter;\n\t      }\n\t      logging('adapter.js shimming safari.');\n\t      // Export to the adapter global object visible in the browser.\n\t      adapter.browserShim = safariShim;\n\t      commonShim.shimCreateObjectURL(window);\n\t\n\t      safariShim.shimRTCIceServerUrls(window);\n\t      safariShim.shimCreateOfferLegacy(window);\n\t      safariShim.shimCallbacksAPI(window);\n\t      safariShim.shimLocalStreamsAPI(window);\n\t      safariShim.shimRemoteStreamsAPI(window);\n\t      safariShim.shimTrackEventTransceiver(window);\n\t      safariShim.shimGetUserMedia(window);\n\t\n\t      commonShim.shimRTCIceCandidate(window);\n\t      commonShim.shimMaxMessageSize(window);\n\t      commonShim.shimSendThrowTypeError(window);\n\t      break;\n\t    default:\n\t      logging('Unsupported browser!');\n\t      break;\n\t  }\n\t\n\t  return adapter;\n\t};\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t/*\n\t *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t'use strict';\n\t\n\tvar logDisabled_ = true;\n\tvar deprecationWarnings_ = true;\n\t\n\t/**\n\t * Extract browser version out of the provided user agent string.\n\t *\n\t * @param {!string} uastring userAgent string.\n\t * @param {!string} expr Regular expression used as match criteria.\n\t * @param {!number} pos position in the version string to be returned.\n\t * @return {!number} browser version.\n\t */\n\tfunction extractVersion(uastring, expr, pos) {\n\t  var match = uastring.match(expr);\n\t  return match && match.length >= pos && parseInt(match[pos], 10);\n\t}\n\t\n\t// Wraps the peerconnection event eventNameToWrap in a function\n\t// which returns the modified event object (or false to prevent\n\t// the event).\n\tfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n\t  if (!window.RTCPeerConnection) {\n\t    return;\n\t  }\n\t  var proto = window.RTCPeerConnection.prototype;\n\t  var nativeAddEventListener = proto.addEventListener;\n\t  proto.addEventListener = function(nativeEventName, cb) {\n\t    if (nativeEventName !== eventNameToWrap) {\n\t      return nativeAddEventListener.apply(this, arguments);\n\t    }\n\t    var wrappedCallback = function(e) {\n\t      var modifiedEvent = wrapper(e);\n\t      if (modifiedEvent) {\n\t        cb(modifiedEvent);\n\t      }\n\t    };\n\t    this._eventMap = this._eventMap || {};\n\t    this._eventMap[cb] = wrappedCallback;\n\t    return nativeAddEventListener.apply(this, [nativeEventName,\n\t      wrappedCallback]);\n\t  };\n\t\n\t  var nativeRemoveEventListener = proto.removeEventListener;\n\t  proto.removeEventListener = function(nativeEventName, cb) {\n\t    if (nativeEventName !== eventNameToWrap || !this._eventMap\n\t        || !this._eventMap[cb]) {\n\t      return nativeRemoveEventListener.apply(this, arguments);\n\t    }\n\t    var unwrappedCb = this._eventMap[cb];\n\t    delete this._eventMap[cb];\n\t    return nativeRemoveEventListener.apply(this, [nativeEventName,\n\t      unwrappedCb]);\n\t  };\n\t\n\t  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n\t    get: function() {\n\t      return this['_on' + eventNameToWrap];\n\t    },\n\t    set: function(cb) {\n\t      if (this['_on' + eventNameToWrap]) {\n\t        this.removeEventListener(eventNameToWrap,\n\t            this['_on' + eventNameToWrap]);\n\t        delete this['_on' + eventNameToWrap];\n\t      }\n\t      if (cb) {\n\t        this.addEventListener(eventNameToWrap,\n\t            this['_on' + eventNameToWrap] = cb);\n\t      }\n\t    },\n\t    enumerable: true,\n\t    configurable: true\n\t  });\n\t}\n\t\n\t// Utility methods.\n\tmodule.exports = {\n\t  extractVersion: extractVersion,\n\t  wrapPeerConnectionEvent: wrapPeerConnectionEvent,\n\t  disableLog: function(bool) {\n\t    if (typeof bool !== 'boolean') {\n\t      return new Error('Argument type: ' + typeof bool +\n\t          '. Please use a boolean.');\n\t    }\n\t    logDisabled_ = bool;\n\t    return (bool) ? 'adapter.js logging disabled' :\n\t        'adapter.js logging enabled';\n\t  },\n\t\n\t  /**\n\t   * Disable or enable deprecation warnings\n\t   * @param {!boolean} bool set to true to disable warnings.\n\t   */\n\t  disableWarnings: function(bool) {\n\t    if (typeof bool !== 'boolean') {\n\t      return new Error('Argument type: ' + typeof bool +\n\t          '. Please use a boolean.');\n\t    }\n\t    deprecationWarnings_ = !bool;\n\t    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n\t  },\n\t\n\t  log: function() {\n\t    if (typeof window === 'object') {\n\t      if (logDisabled_) {\n\t        return;\n\t      }\n\t      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n\t        console.log.apply(console, arguments);\n\t      }\n\t    }\n\t  },\n\t\n\t  /**\n\t   * Shows a deprecation warning suggesting the modern and spec-compatible API.\n\t   */\n\t  deprecated: function(oldMethod, newMethod) {\n\t    if (!deprecationWarnings_) {\n\t      return;\n\t    }\n\t    console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n\t        ' instead.');\n\t  },\n\t\n\t  /**\n\t   * Browser detector.\n\t   *\n\t   * @return {object} result containing browser and version\n\t   *     properties.\n\t   */\n\t  detectBrowser: function(window) {\n\t    var navigator = window && window.navigator;\n\t\n\t    // Returned result object.\n\t    var result = {};\n\t    result.browser = null;\n\t    result.version = null;\n\t\n\t    // Fail early if it's not a browser\n\t    if (typeof window === 'undefined' || !window.navigator) {\n\t      result.browser = 'Not a browser.';\n\t      return result;\n\t    }\n\t\n\t    if (navigator.mozGetUserMedia) { // Firefox.\n\t      result.browser = 'firefox';\n\t      result.version = extractVersion(navigator.userAgent,\n\t          /Firefox\\/(\\d+)\\./, 1);\n\t    } else if (navigator.webkitGetUserMedia) {\n\t      // Chrome, Chromium, Webview, Opera.\n\t      // Version matches Chrome/WebRTC version.\n\t      result.browser = 'chrome';\n\t      result.version = extractVersion(navigator.userAgent,\n\t          /Chrom(e|ium)\\/(\\d+)\\./, 2);\n\t    } else if (navigator.mediaDevices &&\n\t        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n\t      result.browser = 'edge';\n\t      result.version = extractVersion(navigator.userAgent,\n\t          /Edge\\/(\\d+).(\\d+)$/, 2);\n\t    } else if (window.RTCPeerConnection &&\n\t        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n\t      result.browser = 'safari';\n\t      result.version = extractVersion(navigator.userAgent,\n\t          /AppleWebKit\\/(\\d+)\\./, 1);\n\t    } else { // Default fallthrough: not supported.\n\t      result.browser = 'Not a supported browser.';\n\t      return result;\n\t    }\n\t\n\t    return result;\n\t  }\n\t};\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t/*\n\t *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t'use strict';\n\tvar utils = __webpack_require__(14);\n\tvar logging = utils.log;\n\t\n\t/* iterates the stats graph recursively. */\n\tfunction walkStats(stats, base, resultSet) {\n\t  if (!base || resultSet.has(base.id)) {\n\t    return;\n\t  }\n\t  resultSet.set(base.id, base);\n\t  Object.keys(base).forEach(function(name) {\n\t    if (name.endsWith('Id')) {\n\t      walkStats(stats, stats.get(base[name]), resultSet);\n\t    } else if (name.endsWith('Ids')) {\n\t      base[name].forEach(function(id) {\n\t        walkStats(stats, stats.get(id), resultSet);\n\t      });\n\t    }\n\t  });\n\t}\n\t\n\t/* filter getStats for a sender/receiver track. */\n\tfunction filterStats(result, track, outbound) {\n\t  var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n\t  var filteredResult = new Map();\n\t  if (track === null) {\n\t    return filteredResult;\n\t  }\n\t  var trackStats = [];\n\t  result.forEach(function(value) {\n\t    if (value.type === 'track' &&\n\t        value.trackIdentifier === track.id) {\n\t      trackStats.push(value);\n\t    }\n\t  });\n\t  trackStats.forEach(function(trackStat) {\n\t    result.forEach(function(stats) {\n\t      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n\t        walkStats(result, stats, filteredResult);\n\t      }\n\t    });\n\t  });\n\t  return filteredResult;\n\t}\n\t\n\tmodule.exports = {\n\t  shimGetUserMedia: __webpack_require__(16),\n\t  shimMediaStream: function(window) {\n\t    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n\t  },\n\t\n\t  shimOnTrack: function(window) {\n\t    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n\t        window.RTCPeerConnection.prototype)) {\n\t      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n\t        get: function() {\n\t          return this._ontrack;\n\t        },\n\t        set: function(f) {\n\t          if (this._ontrack) {\n\t            this.removeEventListener('track', this._ontrack);\n\t          }\n\t          this.addEventListener('track', this._ontrack = f);\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t      });\n\t      var origSetRemoteDescription =\n\t          window.RTCPeerConnection.prototype.setRemoteDescription;\n\t      window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n\t        var pc = this;\n\t        if (!pc._ontrackpoly) {\n\t          pc._ontrackpoly = function(e) {\n\t            // onaddstream does not fire when a track is added to an existing\n\t            // stream. But stream.onaddtrack is implemented so we use that.\n\t            e.stream.addEventListener('addtrack', function(te) {\n\t              var receiver;\n\t              if (window.RTCPeerConnection.prototype.getReceivers) {\n\t                receiver = pc.getReceivers().find(function(r) {\n\t                  return r.track && r.track.id === te.track.id;\n\t                });\n\t              } else {\n\t                receiver = {track: te.track};\n\t              }\n\t\n\t              var event = new Event('track');\n\t              event.track = te.track;\n\t              event.receiver = receiver;\n\t              event.transceiver = {receiver: receiver};\n\t              event.streams = [e.stream];\n\t              pc.dispatchEvent(event);\n\t            });\n\t            e.stream.getTracks().forEach(function(track) {\n\t              var receiver;\n\t              if (window.RTCPeerConnection.prototype.getReceivers) {\n\t                receiver = pc.getReceivers().find(function(r) {\n\t                  return r.track && r.track.id === track.id;\n\t                });\n\t              } else {\n\t                receiver = {track: track};\n\t              }\n\t              var event = new Event('track');\n\t              event.track = track;\n\t              event.receiver = receiver;\n\t              event.transceiver = {receiver: receiver};\n\t              event.streams = [e.stream];\n\t              pc.dispatchEvent(event);\n\t            });\n\t          };\n\t          pc.addEventListener('addstream', pc._ontrackpoly);\n\t        }\n\t        return origSetRemoteDescription.apply(pc, arguments);\n\t      };\n\t    } else {\n\t      // even if RTCRtpTransceiver is in window, it is only used and\n\t      // emitted in unified-plan. Unfortunately this means we need\n\t      // to unconditionally wrap the event.\n\t      utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n\t        if (!e.transceiver) {\n\t          Object.defineProperty(e, 'transceiver',\n\t            {value: {receiver: e.receiver}});\n\t        }\n\t        return e;\n\t      });\n\t    }\n\t  },\n\t\n\t  shimGetSendersWithDtmf: function(window) {\n\t    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n\t    if (typeof window === 'object' && window.RTCPeerConnection &&\n\t        !('getSenders' in window.RTCPeerConnection.prototype) &&\n\t        'createDTMFSender' in window.RTCPeerConnection.prototype) {\n\t      var shimSenderWithDtmf = function(pc, track) {\n\t        return {\n\t          track: track,\n\t          get dtmf() {\n\t            if (this._dtmf === undefined) {\n\t              if (track.kind === 'audio') {\n\t                this._dtmf = pc.createDTMFSender(track);\n\t              } else {\n\t                this._dtmf = null;\n\t              }\n\t            }\n\t            return this._dtmf;\n\t          },\n\t          _pc: pc\n\t        };\n\t      };\n\t\n\t      // augment addTrack when getSenders is not available.\n\t      if (!window.RTCPeerConnection.prototype.getSenders) {\n\t        window.RTCPeerConnection.prototype.getSenders = function() {\n\t          this._senders = this._senders || [];\n\t          return this._senders.slice(); // return a copy of the internal state.\n\t        };\n\t        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\t        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n\t          var pc = this;\n\t          var sender = origAddTrack.apply(pc, arguments);\n\t          if (!sender) {\n\t            sender = shimSenderWithDtmf(pc, track);\n\t            pc._senders.push(sender);\n\t          }\n\t          return sender;\n\t        };\n\t\n\t        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n\t        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n\t          var pc = this;\n\t          origRemoveTrack.apply(pc, arguments);\n\t          var idx = pc._senders.indexOf(sender);\n\t          if (idx !== -1) {\n\t            pc._senders.splice(idx, 1);\n\t          }\n\t        };\n\t      }\n\t      var origAddStream = window.RTCPeerConnection.prototype.addStream;\n\t      window.RTCPeerConnection.prototype.addStream = function(stream) {\n\t        var pc = this;\n\t        pc._senders = pc._senders || [];\n\t        origAddStream.apply(pc, [stream]);\n\t        stream.getTracks().forEach(function(track) {\n\t          pc._senders.push(shimSenderWithDtmf(pc, track));\n\t        });\n\t      };\n\t\n\t      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n\t      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n\t        var pc = this;\n\t        pc._senders = pc._senders || [];\n\t        origRemoveStream.apply(pc, [stream]);\n\t\n\t        stream.getTracks().forEach(function(track) {\n\t          var sender = pc._senders.find(function(s) {\n\t            return s.track === track;\n\t          });\n\t          if (sender) {\n\t            pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n\t          }\n\t        });\n\t      };\n\t    } else if (typeof window === 'object' && window.RTCPeerConnection &&\n\t               'getSenders' in window.RTCPeerConnection.prototype &&\n\t               'createDTMFSender' in window.RTCPeerConnection.prototype &&\n\t               window.RTCRtpSender &&\n\t               !('dtmf' in window.RTCRtpSender.prototype)) {\n\t      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n\t      window.RTCPeerConnection.prototype.getSenders = function() {\n\t        var pc = this;\n\t        var senders = origGetSenders.apply(pc, []);\n\t        senders.forEach(function(sender) {\n\t          sender._pc = pc;\n\t        });\n\t        return senders;\n\t      };\n\t\n\t      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n\t        get: function() {\n\t          if (this._dtmf === undefined) {\n\t            if (this.track.kind === 'audio') {\n\t              this._dtmf = this._pc.createDTMFSender(this.track);\n\t            } else {\n\t              this._dtmf = null;\n\t            }\n\t          }\n\t          return this._dtmf;\n\t        }\n\t      });\n\t    }\n\t  },\n\t\n\t  shimSenderReceiverGetStats: function(window) {\n\t    if (!(typeof window === 'object' && window.RTCPeerConnection &&\n\t        window.RTCRtpSender && window.RTCRtpReceiver)) {\n\t      return;\n\t    }\n\t\n\t    // shim sender stats.\n\t    if (!('getStats' in window.RTCRtpSender.prototype)) {\n\t      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n\t      if (origGetSenders) {\n\t        window.RTCPeerConnection.prototype.getSenders = function() {\n\t          var pc = this;\n\t          var senders = origGetSenders.apply(pc, []);\n\t          senders.forEach(function(sender) {\n\t            sender._pc = pc;\n\t          });\n\t          return senders;\n\t        };\n\t      }\n\t\n\t      var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\t      if (origAddTrack) {\n\t        window.RTCPeerConnection.prototype.addTrack = function() {\n\t          var sender = origAddTrack.apply(this, arguments);\n\t          sender._pc = this;\n\t          return sender;\n\t        };\n\t      }\n\t      window.RTCRtpSender.prototype.getStats = function() {\n\t        var sender = this;\n\t        return this._pc.getStats().then(function(result) {\n\t          /* Note: this will include stats of all senders that\n\t           *   send a track with the same id as sender.track as\n\t           *   it is not possible to identify the RTCRtpSender.\n\t           */\n\t          return filterStats(result, sender.track, true);\n\t        });\n\t      };\n\t    }\n\t\n\t    // shim receiver stats.\n\t    if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n\t      var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n\t      if (origGetReceivers) {\n\t        window.RTCPeerConnection.prototype.getReceivers = function() {\n\t          var pc = this;\n\t          var receivers = origGetReceivers.apply(pc, []);\n\t          receivers.forEach(function(receiver) {\n\t            receiver._pc = pc;\n\t          });\n\t          return receivers;\n\t        };\n\t      }\n\t      utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n\t        e.receiver._pc = e.srcElement;\n\t        return e;\n\t      });\n\t      window.RTCRtpReceiver.prototype.getStats = function() {\n\t        var receiver = this;\n\t        return this._pc.getStats().then(function(result) {\n\t          return filterStats(result, receiver.track, false);\n\t        });\n\t      };\n\t    }\n\t\n\t    if (!('getStats' in window.RTCRtpSender.prototype &&\n\t        'getStats' in window.RTCRtpReceiver.prototype)) {\n\t      return;\n\t    }\n\t\n\t    // shim RTCPeerConnection.getStats(track).\n\t    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n\t    window.RTCPeerConnection.prototype.getStats = function() {\n\t      var pc = this;\n\t      if (arguments.length > 0 &&\n\t          arguments[0] instanceof window.MediaStreamTrack) {\n\t        var track = arguments[0];\n\t        var sender;\n\t        var receiver;\n\t        var err;\n\t        pc.getSenders().forEach(function(s) {\n\t          if (s.track === track) {\n\t            if (sender) {\n\t              err = true;\n\t            } else {\n\t              sender = s;\n\t            }\n\t          }\n\t        });\n\t        pc.getReceivers().forEach(function(r) {\n\t          if (r.track === track) {\n\t            if (receiver) {\n\t              err = true;\n\t            } else {\n\t              receiver = r;\n\t            }\n\t          }\n\t          return r.track === track;\n\t        });\n\t        if (err || (sender && receiver)) {\n\t          return Promise.reject(new DOMException(\n\t            'There are more than one sender or receiver for the track.',\n\t            'InvalidAccessError'));\n\t        } else if (sender) {\n\t          return sender.getStats();\n\t        } else if (receiver) {\n\t          return receiver.getStats();\n\t        }\n\t        return Promise.reject(new DOMException(\n\t          'There is no sender or receiver for the track.',\n\t          'InvalidAccessError'));\n\t      }\n\t      return origGetStats.apply(pc, arguments);\n\t    };\n\t  },\n\t\n\t  shimSourceObject: function(window) {\n\t    var URL = window && window.URL;\n\t\n\t    if (typeof window === 'object') {\n\t      if (window.HTMLMediaElement &&\n\t        !('srcObject' in window.HTMLMediaElement.prototype)) {\n\t        // Shim the srcObject property, once, when HTMLMediaElement is found.\n\t        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n\t          get: function() {\n\t            return this._srcObject;\n\t          },\n\t          set: function(stream) {\n\t            var self = this;\n\t            // Use _srcObject as a private property for this shim\n\t            this._srcObject = stream;\n\t            if (this.src) {\n\t              URL.revokeObjectURL(this.src);\n\t            }\n\t\n\t            if (!stream) {\n\t              this.src = '';\n\t              return undefined;\n\t            }\n\t            this.src = URL.createObjectURL(stream);\n\t            // We need to recreate the blob url when a track is added or\n\t            // removed. Doing it manually since we want to avoid a recursion.\n\t            stream.addEventListener('addtrack', function() {\n\t              if (self.src) {\n\t                URL.revokeObjectURL(self.src);\n\t              }\n\t              self.src = URL.createObjectURL(stream);\n\t            });\n\t            stream.addEventListener('removetrack', function() {\n\t              if (self.src) {\n\t                URL.revokeObjectURL(self.src);\n\t              }\n\t              self.src = URL.createObjectURL(stream);\n\t            });\n\t          }\n\t        });\n\t      }\n\t    }\n\t  },\n\t\n\t  shimAddTrackRemoveTrackWithNative: function(window) {\n\t    // shim addTrack/removeTrack with native variants in order to make\n\t    // the interactions with legacy getLocalStreams behave as in other browsers.\n\t    // Keeps a mapping stream.id => [stream, rtpsenders...]\n\t    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n\t      var pc = this;\n\t      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\t      return Object.keys(this._shimmedLocalStreams).map(function(streamId) {\n\t        return pc._shimmedLocalStreams[streamId][0];\n\t      });\n\t    };\n\t\n\t    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\t    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n\t      if (!stream) {\n\t        return origAddTrack.apply(this, arguments);\n\t      }\n\t      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\t\n\t      var sender = origAddTrack.apply(this, arguments);\n\t      if (!this._shimmedLocalStreams[stream.id]) {\n\t        this._shimmedLocalStreams[stream.id] = [stream, sender];\n\t      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n\t        this._shimmedLocalStreams[stream.id].push(sender);\n\t      }\n\t      return sender;\n\t    };\n\t\n\t    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n\t    window.RTCPeerConnection.prototype.addStream = function(stream) {\n\t      var pc = this;\n\t      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\t\n\t      stream.getTracks().forEach(function(track) {\n\t        var alreadyExists = pc.getSenders().find(function(s) {\n\t          return s.track === track;\n\t        });\n\t        if (alreadyExists) {\n\t          throw new DOMException('Track already exists.',\n\t              'InvalidAccessError');\n\t        }\n\t      });\n\t      var existingSenders = pc.getSenders();\n\t      origAddStream.apply(this, arguments);\n\t      var newSenders = pc.getSenders().filter(function(newSender) {\n\t        return existingSenders.indexOf(newSender) === -1;\n\t      });\n\t      this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n\t    };\n\t\n\t    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n\t    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n\t      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\t      delete this._shimmedLocalStreams[stream.id];\n\t      return origRemoveStream.apply(this, arguments);\n\t    };\n\t\n\t    var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n\t    window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n\t      var pc = this;\n\t      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\t      if (sender) {\n\t        Object.keys(this._shimmedLocalStreams).forEach(function(streamId) {\n\t          var idx = pc._shimmedLocalStreams[streamId].indexOf(sender);\n\t          if (idx !== -1) {\n\t            pc._shimmedLocalStreams[streamId].splice(idx, 1);\n\t          }\n\t          if (pc._shimmedLocalStreams[streamId].length === 1) {\n\t            delete pc._shimmedLocalStreams[streamId];\n\t          }\n\t        });\n\t      }\n\t      return origRemoveTrack.apply(this, arguments);\n\t    };\n\t  },\n\t\n\t  shimAddTrackRemoveTrack: function(window) {\n\t    var browserDetails = utils.detectBrowser(window);\n\t    // shim addTrack and removeTrack.\n\t    if (window.RTCPeerConnection.prototype.addTrack &&\n\t        browserDetails.version >= 65) {\n\t      return this.shimAddTrackRemoveTrackWithNative(window);\n\t    }\n\t\n\t    // also shim pc.getLocalStreams when addTrack is shimmed\n\t    // to return the original streams.\n\t    var origGetLocalStreams = window.RTCPeerConnection.prototype\n\t        .getLocalStreams;\n\t    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n\t      var pc = this;\n\t      var nativeStreams = origGetLocalStreams.apply(this);\n\t      pc._reverseStreams = pc._reverseStreams || {};\n\t      return nativeStreams.map(function(stream) {\n\t        return pc._reverseStreams[stream.id];\n\t      });\n\t    };\n\t\n\t    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n\t    window.RTCPeerConnection.prototype.addStream = function(stream) {\n\t      var pc = this;\n\t      pc._streams = pc._streams || {};\n\t      pc._reverseStreams = pc._reverseStreams || {};\n\t\n\t      stream.getTracks().forEach(function(track) {\n\t        var alreadyExists = pc.getSenders().find(function(s) {\n\t          return s.track === track;\n\t        });\n\t        if (alreadyExists) {\n\t          throw new DOMException('Track already exists.',\n\t              'InvalidAccessError');\n\t        }\n\t      });\n\t      // Add identity mapping for consistency with addTrack.\n\t      // Unless this is being used with a stream from addTrack.\n\t      if (!pc._reverseStreams[stream.id]) {\n\t        var newStream = new window.MediaStream(stream.getTracks());\n\t        pc._streams[stream.id] = newStream;\n\t        pc._reverseStreams[newStream.id] = stream;\n\t        stream = newStream;\n\t      }\n\t      origAddStream.apply(pc, [stream]);\n\t    };\n\t\n\t    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n\t    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n\t      var pc = this;\n\t      pc._streams = pc._streams || {};\n\t      pc._reverseStreams = pc._reverseStreams || {};\n\t\n\t      origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n\t      delete pc._reverseStreams[(pc._streams[stream.id] ?\n\t          pc._streams[stream.id].id : stream.id)];\n\t      delete pc._streams[stream.id];\n\t    };\n\t\n\t    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n\t      var pc = this;\n\t      if (pc.signalingState === 'closed') {\n\t        throw new DOMException(\n\t          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n\t          'InvalidStateError');\n\t      }\n\t      var streams = [].slice.call(arguments, 1);\n\t      if (streams.length !== 1 ||\n\t          !streams[0].getTracks().find(function(t) {\n\t            return t === track;\n\t          })) {\n\t        // this is not fully correct but all we can manage without\n\t        // [[associated MediaStreams]] internal slot.\n\t        throw new DOMException(\n\t          'The adapter.js addTrack polyfill only supports a single ' +\n\t          ' stream which is associated with the specified track.',\n\t          'NotSupportedError');\n\t      }\n\t\n\t      var alreadyExists = pc.getSenders().find(function(s) {\n\t        return s.track === track;\n\t      });\n\t      if (alreadyExists) {\n\t        throw new DOMException('Track already exists.',\n\t            'InvalidAccessError');\n\t      }\n\t\n\t      pc._streams = pc._streams || {};\n\t      pc._reverseStreams = pc._reverseStreams || {};\n\t      var oldStream = pc._streams[stream.id];\n\t      if (oldStream) {\n\t        // this is using odd Chrome behaviour, use with caution:\n\t        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n\t        // Note: we rely on the high-level addTrack/dtmf shim to\n\t        // create the sender with a dtmf sender.\n\t        oldStream.addTrack(track);\n\t\n\t        // Trigger ONN async.\n\t        Promise.resolve().then(function() {\n\t          pc.dispatchEvent(new Event('negotiationneeded'));\n\t        });\n\t      } else {\n\t        var newStream = new window.MediaStream([track]);\n\t        pc._streams[stream.id] = newStream;\n\t        pc._reverseStreams[newStream.id] = stream;\n\t        pc.addStream(newStream);\n\t      }\n\t      return pc.getSenders().find(function(s) {\n\t        return s.track === track;\n\t      });\n\t    };\n\t\n\t    // replace the internal stream id with the external one and\n\t    // vice versa.\n\t    function replaceInternalStreamId(pc, description) {\n\t      var sdp = description.sdp;\n\t      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n\t        var externalStream = pc._reverseStreams[internalId];\n\t        var internalStream = pc._streams[externalStream.id];\n\t        sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n\t            externalStream.id);\n\t      });\n\t      return new RTCSessionDescription({\n\t        type: description.type,\n\t        sdp: sdp\n\t      });\n\t    }\n\t    function replaceExternalStreamId(pc, description) {\n\t      var sdp = description.sdp;\n\t      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n\t        var externalStream = pc._reverseStreams[internalId];\n\t        var internalStream = pc._streams[externalStream.id];\n\t        sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n\t            internalStream.id);\n\t      });\n\t      return new RTCSessionDescription({\n\t        type: description.type,\n\t        sdp: sdp\n\t      });\n\t    }\n\t    ['createOffer', 'createAnswer'].forEach(function(method) {\n\t      var nativeMethod = window.RTCPeerConnection.prototype[method];\n\t      window.RTCPeerConnection.prototype[method] = function() {\n\t        var pc = this;\n\t        var args = arguments;\n\t        var isLegacyCall = arguments.length &&\n\t            typeof arguments[0] === 'function';\n\t        if (isLegacyCall) {\n\t          return nativeMethod.apply(pc, [\n\t            function(description) {\n\t              var desc = replaceInternalStreamId(pc, description);\n\t              args[0].apply(null, [desc]);\n\t            },\n\t            function(err) {\n\t              if (args[1]) {\n\t                args[1].apply(null, err);\n\t              }\n\t            }, arguments[2]\n\t          ]);\n\t        }\n\t        return nativeMethod.apply(pc, arguments)\n\t        .then(function(description) {\n\t          return replaceInternalStreamId(pc, description);\n\t        });\n\t      };\n\t    });\n\t\n\t    var origSetLocalDescription =\n\t        window.RTCPeerConnection.prototype.setLocalDescription;\n\t    window.RTCPeerConnection.prototype.setLocalDescription = function() {\n\t      var pc = this;\n\t      if (!arguments.length || !arguments[0].type) {\n\t        return origSetLocalDescription.apply(pc, arguments);\n\t      }\n\t      arguments[0] = replaceExternalStreamId(pc, arguments[0]);\n\t      return origSetLocalDescription.apply(pc, arguments);\n\t    };\n\t\n\t    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\t\n\t    var origLocalDescription = Object.getOwnPropertyDescriptor(\n\t        window.RTCPeerConnection.prototype, 'localDescription');\n\t    Object.defineProperty(window.RTCPeerConnection.prototype,\n\t        'localDescription', {\n\t          get: function() {\n\t            var pc = this;\n\t            var description = origLocalDescription.get.apply(this);\n\t            if (description.type === '') {\n\t              return description;\n\t            }\n\t            return replaceInternalStreamId(pc, description);\n\t          }\n\t        });\n\t\n\t    window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n\t      var pc = this;\n\t      if (pc.signalingState === 'closed') {\n\t        throw new DOMException(\n\t          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n\t          'InvalidStateError');\n\t      }\n\t      // We can not yet check for sender instanceof RTCRtpSender\n\t      // since we shim RTPSender. So we check if sender._pc is set.\n\t      if (!sender._pc) {\n\t        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n\t            'does not implement interface RTCRtpSender.', 'TypeError');\n\t      }\n\t      var isLocal = sender._pc === pc;\n\t      if (!isLocal) {\n\t        throw new DOMException('Sender was not created by this connection.',\n\t            'InvalidAccessError');\n\t      }\n\t\n\t      // Search for the native stream the senders track belongs to.\n\t      pc._streams = pc._streams || {};\n\t      var stream;\n\t      Object.keys(pc._streams).forEach(function(streamid) {\n\t        var hasTrack = pc._streams[streamid].getTracks().find(function(track) {\n\t          return sender.track === track;\n\t        });\n\t        if (hasTrack) {\n\t          stream = pc._streams[streamid];\n\t        }\n\t      });\n\t\n\t      if (stream) {\n\t        if (stream.getTracks().length === 1) {\n\t          // if this is the last track of the stream, remove the stream. This\n\t          // takes care of any shimmed _senders.\n\t          pc.removeStream(pc._reverseStreams[stream.id]);\n\t        } else {\n\t          // relying on the same odd chrome behaviour as above.\n\t          stream.removeTrack(sender.track);\n\t        }\n\t        pc.dispatchEvent(new Event('negotiationneeded'));\n\t      }\n\t    };\n\t  },\n\t\n\t  shimPeerConnection: function(window) {\n\t    var browserDetails = utils.detectBrowser(window);\n\t\n\t    // The RTCPeerConnection object.\n\t    if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n\t      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n\t        // Translate iceTransportPolicy to iceTransports,\n\t        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n\t        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n\t        logging('PeerConnection');\n\t        if (pcConfig && pcConfig.iceTransportPolicy) {\n\t          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n\t        }\n\t\n\t        return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n\t      };\n\t      window.RTCPeerConnection.prototype =\n\t          window.webkitRTCPeerConnection.prototype;\n\t      // wrap static methods. Currently just generateCertificate.\n\t      if (window.webkitRTCPeerConnection.generateCertificate) {\n\t        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n\t          get: function() {\n\t            return window.webkitRTCPeerConnection.generateCertificate;\n\t          }\n\t        });\n\t      }\n\t    }\n\t\n\t    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n\t    window.RTCPeerConnection.prototype.getStats = function(selector,\n\t        successCallback, errorCallback) {\n\t      var pc = this;\n\t      var args = arguments;\n\t\n\t      // If selector is a function then we are in the old style stats so just\n\t      // pass back the original getStats format to avoid breaking old users.\n\t      if (arguments.length > 0 && typeof selector === 'function') {\n\t        return origGetStats.apply(this, arguments);\n\t      }\n\t\n\t      // When spec-style getStats is supported, return those when called with\n\t      // either no arguments or the selector argument is null.\n\t      if (origGetStats.length === 0 && (arguments.length === 0 ||\n\t          typeof arguments[0] !== 'function')) {\n\t        return origGetStats.apply(this, []);\n\t      }\n\t\n\t      var fixChromeStats_ = function(response) {\n\t        var standardReport = {};\n\t        var reports = response.result();\n\t        reports.forEach(function(report) {\n\t          var standardStats = {\n\t            id: report.id,\n\t            timestamp: report.timestamp,\n\t            type: {\n\t              localcandidate: 'local-candidate',\n\t              remotecandidate: 'remote-candidate'\n\t            }[report.type] || report.type\n\t          };\n\t          report.names().forEach(function(name) {\n\t            standardStats[name] = report.stat(name);\n\t          });\n\t          standardReport[standardStats.id] = standardStats;\n\t        });\n\t\n\t        return standardReport;\n\t      };\n\t\n\t      // shim getStats with maplike support\n\t      var makeMapStats = function(stats) {\n\t        return new Map(Object.keys(stats).map(function(key) {\n\t          return [key, stats[key]];\n\t        }));\n\t      };\n\t\n\t      if (arguments.length >= 2) {\n\t        var successCallbackWrapper_ = function(response) {\n\t          args[1](makeMapStats(fixChromeStats_(response)));\n\t        };\n\t\n\t        return origGetStats.apply(this, [successCallbackWrapper_,\n\t          arguments[0]]);\n\t      }\n\t\n\t      // promise-support\n\t      return new Promise(function(resolve, reject) {\n\t        origGetStats.apply(pc, [\n\t          function(response) {\n\t            resolve(makeMapStats(fixChromeStats_(response)));\n\t          }, reject]);\n\t      }).then(successCallback, errorCallback);\n\t    };\n\t\n\t    // add promise support -- natively available in Chrome 51\n\t    if (browserDetails.version < 51) {\n\t      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n\t          .forEach(function(method) {\n\t            var nativeMethod = window.RTCPeerConnection.prototype[method];\n\t            window.RTCPeerConnection.prototype[method] = function() {\n\t              var args = arguments;\n\t              var pc = this;\n\t              var promise = new Promise(function(resolve, reject) {\n\t                nativeMethod.apply(pc, [args[0], resolve, reject]);\n\t              });\n\t              if (args.length < 2) {\n\t                return promise;\n\t              }\n\t              return promise.then(function() {\n\t                args[1].apply(null, []);\n\t              },\n\t              function(err) {\n\t                if (args.length >= 3) {\n\t                  args[2].apply(null, [err]);\n\t                }\n\t              });\n\t            };\n\t          });\n\t    }\n\t\n\t    // promise support for createOffer and createAnswer. Available (without\n\t    // bugs) since M52: crbug/619289\n\t    if (browserDetails.version < 52) {\n\t      ['createOffer', 'createAnswer'].forEach(function(method) {\n\t        var nativeMethod = window.RTCPeerConnection.prototype[method];\n\t        window.RTCPeerConnection.prototype[method] = function() {\n\t          var pc = this;\n\t          if (arguments.length < 1 || (arguments.length === 1 &&\n\t              typeof arguments[0] === 'object')) {\n\t            var opts = arguments.length === 1 ? arguments[0] : undefined;\n\t            return new Promise(function(resolve, reject) {\n\t              nativeMethod.apply(pc, [resolve, reject, opts]);\n\t            });\n\t          }\n\t          return nativeMethod.apply(this, arguments);\n\t        };\n\t      });\n\t    }\n\t\n\t    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n\t    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n\t        .forEach(function(method) {\n\t          var nativeMethod = window.RTCPeerConnection.prototype[method];\n\t          window.RTCPeerConnection.prototype[method] = function() {\n\t            arguments[0] = new ((method === 'addIceCandidate') ?\n\t                window.RTCIceCandidate :\n\t                window.RTCSessionDescription)(arguments[0]);\n\t            return nativeMethod.apply(this, arguments);\n\t          };\n\t        });\n\t\n\t    // support for addIceCandidate(null or undefined)\n\t    var nativeAddIceCandidate =\n\t        window.RTCPeerConnection.prototype.addIceCandidate;\n\t    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n\t      if (!arguments[0]) {\n\t        if (arguments[1]) {\n\t          arguments[1].apply(null);\n\t        }\n\t        return Promise.resolve();\n\t      }\n\t      return nativeAddIceCandidate.apply(this, arguments);\n\t    };\n\t  },\n\t\n\t  fixNegotiationNeeded: function(window) {\n\t    utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function(e) {\n\t      var pc = e.target;\n\t      if (pc.signalingState !== 'stable') {\n\t        return;\n\t      }\n\t      return e;\n\t    });\n\t  },\n\t\n\t  shimGetDisplayMedia: function(window, getSourceId) {\n\t    if ('getDisplayMedia' in window.navigator) {\n\t      return;\n\t    }\n\t    // getSourceId is a function that returns a promise resolving with\n\t    // the sourceId of the screen/window/tab to be shared.\n\t    if (typeof getSourceId !== 'function') {\n\t      console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n\t          'a function');\n\t      return;\n\t    }\n\t    navigator.getDisplayMedia = function(constraints) {\n\t      return getSourceId(constraints)\n\t        .then(function(sourceId) {\n\t          constraints.video = {\n\t            mandatory: {\n\t              chromeMediaSource: 'desktop',\n\t              chromeMediaSourceId: sourceId,\n\t              maxFrameRate: constraints.video.frameRate || 3\n\t            }\n\t          };\n\t          return navigator.mediaDevices.getUserMedia(constraints);\n\t        });\n\t    };\n\t  }\n\t};\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t'use strict';\n\tvar utils = __webpack_require__(14);\n\tvar logging = utils.log;\n\t\n\t// Expose public methods.\n\tmodule.exports = function(window) {\n\t  var browserDetails = utils.detectBrowser(window);\n\t  var navigator = window && window.navigator;\n\t\n\t  var constraintsToChrome_ = function(c) {\n\t    if (typeof c !== 'object' || c.mandatory || c.optional) {\n\t      return c;\n\t    }\n\t    var cc = {};\n\t    Object.keys(c).forEach(function(key) {\n\t      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n\t        return;\n\t      }\n\t      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n\t      if (r.exact !== undefined && typeof r.exact === 'number') {\n\t        r.min = r.max = r.exact;\n\t      }\n\t      var oldname_ = function(prefix, name) {\n\t        if (prefix) {\n\t          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n\t        }\n\t        return (name === 'deviceId') ? 'sourceId' : name;\n\t      };\n\t      if (r.ideal !== undefined) {\n\t        cc.optional = cc.optional || [];\n\t        var oc = {};\n\t        if (typeof r.ideal === 'number') {\n\t          oc[oldname_('min', key)] = r.ideal;\n\t          cc.optional.push(oc);\n\t          oc = {};\n\t          oc[oldname_('max', key)] = r.ideal;\n\t          cc.optional.push(oc);\n\t        } else {\n\t          oc[oldname_('', key)] = r.ideal;\n\t          cc.optional.push(oc);\n\t        }\n\t      }\n\t      if (r.exact !== undefined && typeof r.exact !== 'number') {\n\t        cc.mandatory = cc.mandatory || {};\n\t        cc.mandatory[oldname_('', key)] = r.exact;\n\t      } else {\n\t        ['min', 'max'].forEach(function(mix) {\n\t          if (r[mix] !== undefined) {\n\t            cc.mandatory = cc.mandatory || {};\n\t            cc.mandatory[oldname_(mix, key)] = r[mix];\n\t          }\n\t        });\n\t      }\n\t    });\n\t    if (c.advanced) {\n\t      cc.optional = (cc.optional || []).concat(c.advanced);\n\t    }\n\t    return cc;\n\t  };\n\t\n\t  var shimConstraints_ = function(constraints, func) {\n\t    if (browserDetails.version >= 61) {\n\t      return func(constraints);\n\t    }\n\t    constraints = JSON.parse(JSON.stringify(constraints));\n\t    if (constraints && typeof constraints.audio === 'object') {\n\t      var remap = function(obj, a, b) {\n\t        if (a in obj && !(b in obj)) {\n\t          obj[b] = obj[a];\n\t          delete obj[a];\n\t        }\n\t      };\n\t      constraints = JSON.parse(JSON.stringify(constraints));\n\t      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n\t      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n\t      constraints.audio = constraintsToChrome_(constraints.audio);\n\t    }\n\t    if (constraints && typeof constraints.video === 'object') {\n\t      // Shim facingMode for mobile & surface pro.\n\t      var face = constraints.video.facingMode;\n\t      face = face && ((typeof face === 'object') ? face : {ideal: face});\n\t      var getSupportedFacingModeLies = browserDetails.version < 66;\n\t\n\t      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n\t                    face.ideal === 'user' || face.ideal === 'environment')) &&\n\t          !(navigator.mediaDevices.getSupportedConstraints &&\n\t            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n\t            !getSupportedFacingModeLies)) {\n\t        delete constraints.video.facingMode;\n\t        var matches;\n\t        if (face.exact === 'environment' || face.ideal === 'environment') {\n\t          matches = ['back', 'rear'];\n\t        } else if (face.exact === 'user' || face.ideal === 'user') {\n\t          matches = ['front'];\n\t        }\n\t        if (matches) {\n\t          // Look for matches in label, or use last cam for back (typical).\n\t          return navigator.mediaDevices.enumerateDevices()\n\t          .then(function(devices) {\n\t            devices = devices.filter(function(d) {\n\t              return d.kind === 'videoinput';\n\t            });\n\t            var dev = devices.find(function(d) {\n\t              return matches.some(function(match) {\n\t                return d.label.toLowerCase().indexOf(match) !== -1;\n\t              });\n\t            });\n\t            if (!dev && devices.length && matches.indexOf('back') !== -1) {\n\t              dev = devices[devices.length - 1]; // more likely the back cam\n\t            }\n\t            if (dev) {\n\t              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n\t                                                        {ideal: dev.deviceId};\n\t            }\n\t            constraints.video = constraintsToChrome_(constraints.video);\n\t            logging('chrome: ' + JSON.stringify(constraints));\n\t            return func(constraints);\n\t          });\n\t        }\n\t      }\n\t      constraints.video = constraintsToChrome_(constraints.video);\n\t    }\n\t    logging('chrome: ' + JSON.stringify(constraints));\n\t    return func(constraints);\n\t  };\n\t\n\t  var shimError_ = function(e) {\n\t    if (browserDetails.version >= 64) {\n\t      return e;\n\t    }\n\t    return {\n\t      name: {\n\t        PermissionDeniedError: 'NotAllowedError',\n\t        PermissionDismissedError: 'NotAllowedError',\n\t        InvalidStateError: 'NotAllowedError',\n\t        DevicesNotFoundError: 'NotFoundError',\n\t        ConstraintNotSatisfiedError: 'OverconstrainedError',\n\t        TrackStartError: 'NotReadableError',\n\t        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n\t        MediaDeviceKillSwitchOn: 'NotAllowedError',\n\t        TabCaptureError: 'AbortError',\n\t        ScreenCaptureError: 'AbortError',\n\t        DeviceCaptureError: 'AbortError'\n\t      }[e.name] || e.name,\n\t      message: e.message,\n\t      constraint: e.constraint || e.constraintName,\n\t      toString: function() {\n\t        return this.name + (this.message && ': ') + this.message;\n\t      }\n\t    };\n\t  };\n\t\n\t  var getUserMedia_ = function(constraints, onSuccess, onError) {\n\t    shimConstraints_(constraints, function(c) {\n\t      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n\t        if (onError) {\n\t          onError(shimError_(e));\n\t        }\n\t      });\n\t    });\n\t  };\n\t\n\t  navigator.getUserMedia = getUserMedia_;\n\t\n\t  // Returns the result of getUserMedia as a Promise.\n\t  var getUserMediaPromise_ = function(constraints) {\n\t    return new Promise(function(resolve, reject) {\n\t      navigator.getUserMedia(constraints, resolve, reject);\n\t    });\n\t  };\n\t\n\t  if (!navigator.mediaDevices) {\n\t    navigator.mediaDevices = {\n\t      getUserMedia: getUserMediaPromise_,\n\t      enumerateDevices: function() {\n\t        return new Promise(function(resolve) {\n\t          var kinds = {audio: 'audioinput', video: 'videoinput'};\n\t          return window.MediaStreamTrack.getSources(function(devices) {\n\t            resolve(devices.map(function(device) {\n\t              return {label: device.label,\n\t                kind: kinds[device.kind],\n\t                deviceId: device.id,\n\t                groupId: ''};\n\t            }));\n\t          });\n\t        });\n\t      },\n\t      getSupportedConstraints: function() {\n\t        return {\n\t          deviceId: true, echoCancellation: true, facingMode: true,\n\t          frameRate: true, height: true, width: true\n\t        };\n\t      }\n\t    };\n\t  }\n\t\n\t  // A shim for getUserMedia method on the mediaDevices object.\n\t  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n\t  if (!navigator.mediaDevices.getUserMedia) {\n\t    navigator.mediaDevices.getUserMedia = function(constraints) {\n\t      return getUserMediaPromise_(constraints);\n\t    };\n\t  } else {\n\t    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n\t    // function which returns a Promise, it does not accept spec-style\n\t    // constraints.\n\t    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n\t        bind(navigator.mediaDevices);\n\t    navigator.mediaDevices.getUserMedia = function(cs) {\n\t      return shimConstraints_(cs, function(c) {\n\t        return origGetUserMedia(c).then(function(stream) {\n\t          if (c.audio && !stream.getAudioTracks().length ||\n\t              c.video && !stream.getVideoTracks().length) {\n\t            stream.getTracks().forEach(function(track) {\n\t              track.stop();\n\t            });\n\t            throw new DOMException('', 'NotFoundError');\n\t          }\n\t          return stream;\n\t        }, function(e) {\n\t          return Promise.reject(shimError_(e));\n\t        });\n\t      });\n\t    };\n\t  }\n\t\n\t  // Dummy devicechange event methods.\n\t  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n\t  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n\t    navigator.mediaDevices.addEventListener = function() {\n\t      logging('Dummy mediaDevices.addEventListener called.');\n\t    };\n\t  }\n\t  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n\t    navigator.mediaDevices.removeEventListener = function() {\n\t      logging('Dummy mediaDevices.removeEventListener called.');\n\t    };\n\t  }\n\t};\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(14);\n\tvar filterIceServers = __webpack_require__(18);\n\tvar shimRTCPeerConnection = __webpack_require__(19);\n\t\n\tmodule.exports = {\n\t  shimGetUserMedia: __webpack_require__(21),\n\t  shimPeerConnection: function(window) {\n\t    var browserDetails = utils.detectBrowser(window);\n\t\n\t    if (window.RTCIceGatherer) {\n\t      if (!window.RTCIceCandidate) {\n\t        window.RTCIceCandidate = function(args) {\n\t          return args;\n\t        };\n\t      }\n\t      if (!window.RTCSessionDescription) {\n\t        window.RTCSessionDescription = function(args) {\n\t          return args;\n\t        };\n\t      }\n\t      // this adds an additional event listener to MediaStrackTrack that signals\n\t      // when a tracks enabled property was changed. Workaround for a bug in\n\t      // addStream, see below. No longer required in 15025+\n\t      if (browserDetails.version < 15025) {\n\t        var origMSTEnabled = Object.getOwnPropertyDescriptor(\n\t            window.MediaStreamTrack.prototype, 'enabled');\n\t        Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n\t          set: function(value) {\n\t            origMSTEnabled.set.call(this, value);\n\t            var ev = new Event('enabled');\n\t            ev.enabled = value;\n\t            this.dispatchEvent(ev);\n\t          }\n\t        });\n\t      }\n\t    }\n\t\n\t    // ORTC defines the DTMF sender a bit different.\n\t    // https://github.com/w3c/ortc/issues/714\n\t    if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n\t      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n\t        get: function() {\n\t          if (this._dtmf === undefined) {\n\t            if (this.track.kind === 'audio') {\n\t              this._dtmf = new window.RTCDtmfSender(this);\n\t            } else if (this.track.kind === 'video') {\n\t              this._dtmf = null;\n\t            }\n\t          }\n\t          return this._dtmf;\n\t        }\n\t      });\n\t    }\n\t    // Edge currently only implements the RTCDtmfSender, not the\n\t    // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n\t    if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n\t      window.RTCDTMFSender = window.RTCDtmfSender;\n\t    }\n\t\n\t    var RTCPeerConnectionShim = shimRTCPeerConnection(window,\n\t        browserDetails.version);\n\t    window.RTCPeerConnection = function(config) {\n\t      if (config && config.iceServers) {\n\t        config.iceServers = filterIceServers(config.iceServers);\n\t      }\n\t      return new RTCPeerConnectionShim(config);\n\t    };\n\t    window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n\t  },\n\t  shimReplaceTrack: function(window) {\n\t    // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n\t    if (window.RTCRtpSender &&\n\t        !('replaceTrack' in window.RTCRtpSender.prototype)) {\n\t      window.RTCRtpSender.prototype.replaceTrack =\n\t          window.RTCRtpSender.prototype.setTrack;\n\t    }\n\t  }\n\t};\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(14);\n\t// Edge does not like\n\t// 1) stun: filtered after 14393 unless ?transport=udp is present\n\t// 2) turn: that does not have all of turn:host:port?transport=udp\n\t// 3) turn: with ipv6 addresses\n\t// 4) turn: occurring muliple times\n\tmodule.exports = function(iceServers, edgeVersion) {\n\t  var hasTurn = false;\n\t  iceServers = JSON.parse(JSON.stringify(iceServers));\n\t  return iceServers.filter(function(server) {\n\t    if (server && (server.urls || server.url)) {\n\t      var urls = server.urls || server.url;\n\t      if (server.url && !server.urls) {\n\t        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n\t      }\n\t      var isString = typeof urls === 'string';\n\t      if (isString) {\n\t        urls = [urls];\n\t      }\n\t      urls = urls.filter(function(url) {\n\t        var validTurn = url.indexOf('turn:') === 0 &&\n\t            url.indexOf('transport=udp') !== -1 &&\n\t            url.indexOf('turn:[') === -1 &&\n\t            !hasTurn;\n\t\n\t        if (validTurn) {\n\t          hasTurn = true;\n\t          return true;\n\t        }\n\t        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n\t            url.indexOf('?transport=udp') === -1;\n\t      });\n\t\n\t      delete server.url;\n\t      server.urls = isString ? urls[0] : urls;\n\t      return !!urls.length;\n\t    }\n\t  });\n\t};\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t'use strict';\n\t\n\tvar SDPUtils = __webpack_require__(20);\n\t\n\tfunction fixStatsType(stat) {\n\t  return {\n\t    inboundrtp: 'inbound-rtp',\n\t    outboundrtp: 'outbound-rtp',\n\t    candidatepair: 'candidate-pair',\n\t    localcandidate: 'local-candidate',\n\t    remotecandidate: 'remote-candidate'\n\t  }[stat.type] || stat.type;\n\t}\n\t\n\tfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n\t  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\t\n\t  // Map ICE parameters (ufrag, pwd) to SDP.\n\t  sdp += SDPUtils.writeIceParameters(\n\t      transceiver.iceGatherer.getLocalParameters());\n\t\n\t  // Map DTLS parameters to SDP.\n\t  sdp += SDPUtils.writeDtlsParameters(\n\t      transceiver.dtlsTransport.getLocalParameters(),\n\t      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\t\n\t  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\t\n\t  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n\t    sdp += 'a=sendrecv\\r\\n';\n\t  } else if (transceiver.rtpSender) {\n\t    sdp += 'a=sendonly\\r\\n';\n\t  } else if (transceiver.rtpReceiver) {\n\t    sdp += 'a=recvonly\\r\\n';\n\t  } else {\n\t    sdp += 'a=inactive\\r\\n';\n\t  }\n\t\n\t  if (transceiver.rtpSender) {\n\t    var trackId = transceiver.rtpSender._initialTrackId ||\n\t        transceiver.rtpSender.track.id;\n\t    transceiver.rtpSender._initialTrackId = trackId;\n\t    // spec.\n\t    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n\t        trackId + '\\r\\n';\n\t    sdp += 'a=' + msid;\n\t    // for Chrome. Legacy should no longer be required.\n\t    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n\t        ' ' + msid;\n\t\n\t    // RTX\n\t    if (transceiver.sendEncodingParameters[0].rtx) {\n\t      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n\t          ' ' + msid;\n\t      sdp += 'a=ssrc-group:FID ' +\n\t          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n\t          transceiver.sendEncodingParameters[0].rtx.ssrc +\n\t          '\\r\\n';\n\t    }\n\t  }\n\t  // FIXME: this should be written by writeRtpDescription.\n\t  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n\t      ' cname:' + SDPUtils.localCName + '\\r\\n';\n\t  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n\t    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n\t        ' cname:' + SDPUtils.localCName + '\\r\\n';\n\t  }\n\t  return sdp;\n\t}\n\t\n\t// Edge does not like\n\t// 1) stun: filtered after 14393 unless ?transport=udp is present\n\t// 2) turn: that does not have all of turn:host:port?transport=udp\n\t// 3) turn: with ipv6 addresses\n\t// 4) turn: occurring muliple times\n\tfunction filterIceServers(iceServers, edgeVersion) {\n\t  var hasTurn = false;\n\t  iceServers = JSON.parse(JSON.stringify(iceServers));\n\t  return iceServers.filter(function(server) {\n\t    if (server && (server.urls || server.url)) {\n\t      var urls = server.urls || server.url;\n\t      if (server.url && !server.urls) {\n\t        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n\t      }\n\t      var isString = typeof urls === 'string';\n\t      if (isString) {\n\t        urls = [urls];\n\t      }\n\t      urls = urls.filter(function(url) {\n\t        var validTurn = url.indexOf('turn:') === 0 &&\n\t            url.indexOf('transport=udp') !== -1 &&\n\t            url.indexOf('turn:[') === -1 &&\n\t            !hasTurn;\n\t\n\t        if (validTurn) {\n\t          hasTurn = true;\n\t          return true;\n\t        }\n\t        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n\t            url.indexOf('?transport=udp') === -1;\n\t      });\n\t\n\t      delete server.url;\n\t      server.urls = isString ? urls[0] : urls;\n\t      return !!urls.length;\n\t    }\n\t  });\n\t}\n\t\n\t// Determines the intersection of local and remote capabilities.\n\tfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n\t  var commonCapabilities = {\n\t    codecs: [],\n\t    headerExtensions: [],\n\t    fecMechanisms: []\n\t  };\n\t\n\t  var findCodecByPayloadType = function(pt, codecs) {\n\t    pt = parseInt(pt, 10);\n\t    for (var i = 0; i < codecs.length; i++) {\n\t      if (codecs[i].payloadType === pt ||\n\t          codecs[i].preferredPayloadType === pt) {\n\t        return codecs[i];\n\t      }\n\t    }\n\t  };\n\t\n\t  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n\t    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n\t    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n\t    return lCodec && rCodec &&\n\t        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n\t  };\n\t\n\t  localCapabilities.codecs.forEach(function(lCodec) {\n\t    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n\t      var rCodec = remoteCapabilities.codecs[i];\n\t      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n\t          lCodec.clockRate === rCodec.clockRate) {\n\t        if (lCodec.name.toLowerCase() === 'rtx' &&\n\t            lCodec.parameters && rCodec.parameters.apt) {\n\t          // for RTX we need to find the local rtx that has a apt\n\t          // which points to the same local codec as the remote one.\n\t          if (!rtxCapabilityMatches(lCodec, rCodec,\n\t              localCapabilities.codecs, remoteCapabilities.codecs)) {\n\t            continue;\n\t          }\n\t        }\n\t        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n\t        // number of channels is the highest common number of channels\n\t        rCodec.numChannels = Math.min(lCodec.numChannels,\n\t            rCodec.numChannels);\n\t        // push rCodec so we reply with offerer payload type\n\t        commonCapabilities.codecs.push(rCodec);\n\t\n\t        // determine common feedback mechanisms\n\t        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n\t          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n\t            if (lCodec.rtcpFeedback[j].type === fb.type &&\n\t                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n\t              return true;\n\t            }\n\t          }\n\t          return false;\n\t        });\n\t        // FIXME: also need to determine .parameters\n\t        //  see https://github.com/openpeer/ortc/issues/569\n\t        break;\n\t      }\n\t    }\n\t  });\n\t\n\t  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n\t    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n\t         i++) {\n\t      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n\t      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n\t        commonCapabilities.headerExtensions.push(rHeaderExtension);\n\t        break;\n\t      }\n\t    }\n\t  });\n\t\n\t  // FIXME: fecMechanisms\n\t  return commonCapabilities;\n\t}\n\t\n\t// is action=setLocalDescription with type allowed in signalingState\n\tfunction isActionAllowedInSignalingState(action, type, signalingState) {\n\t  return {\n\t    offer: {\n\t      setLocalDescription: ['stable', 'have-local-offer'],\n\t      setRemoteDescription: ['stable', 'have-remote-offer']\n\t    },\n\t    answer: {\n\t      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n\t      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n\t    }\n\t  }[type][action].indexOf(signalingState) !== -1;\n\t}\n\t\n\tfunction maybeAddCandidate(iceTransport, candidate) {\n\t  // Edge's internal representation adds some fields therefore\n\t  // not all fieldѕ are taken into account.\n\t  var alreadyAdded = iceTransport.getRemoteCandidates()\n\t      .find(function(remoteCandidate) {\n\t        return candidate.foundation === remoteCandidate.foundation &&\n\t            candidate.ip === remoteCandidate.ip &&\n\t            candidate.port === remoteCandidate.port &&\n\t            candidate.priority === remoteCandidate.priority &&\n\t            candidate.protocol === remoteCandidate.protocol &&\n\t            candidate.type === remoteCandidate.type;\n\t      });\n\t  if (!alreadyAdded) {\n\t    iceTransport.addRemoteCandidate(candidate);\n\t  }\n\t  return !alreadyAdded;\n\t}\n\t\n\t\n\tfunction makeError(name, description) {\n\t  var e = new Error(description);\n\t  e.name = name;\n\t  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n\t  e.code = {\n\t    NotSupportedError: 9,\n\t    InvalidStateError: 11,\n\t    InvalidAccessError: 15,\n\t    TypeError: undefined,\n\t    OperationError: undefined\n\t  }[name];\n\t  return e;\n\t}\n\t\n\tmodule.exports = function(window, edgeVersion) {\n\t  // https://w3c.github.io/mediacapture-main/#mediastream\n\t  // Helper function to add the track to the stream and\n\t  // dispatch the event ourselves.\n\t  function addTrackToStreamAndFireEvent(track, stream) {\n\t    stream.addTrack(track);\n\t    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n\t        {track: track}));\n\t  }\n\t\n\t  function removeTrackFromStreamAndFireEvent(track, stream) {\n\t    stream.removeTrack(track);\n\t    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n\t        {track: track}));\n\t  }\n\t\n\t  function fireAddTrack(pc, track, receiver, streams) {\n\t    var trackEvent = new Event('track');\n\t    trackEvent.track = track;\n\t    trackEvent.receiver = receiver;\n\t    trackEvent.transceiver = {receiver: receiver};\n\t    trackEvent.streams = streams;\n\t    window.setTimeout(function() {\n\t      pc._dispatchEvent('track', trackEvent);\n\t    });\n\t  }\n\t\n\t  var RTCPeerConnection = function(config) {\n\t    var pc = this;\n\t\n\t    var _eventTarget = document.createDocumentFragment();\n\t    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n\t        .forEach(function(method) {\n\t          pc[method] = _eventTarget[method].bind(_eventTarget);\n\t        });\n\t\n\t    this.canTrickleIceCandidates = null;\n\t\n\t    this.needNegotiation = false;\n\t\n\t    this.localStreams = [];\n\t    this.remoteStreams = [];\n\t\n\t    this._localDescription = null;\n\t    this._remoteDescription = null;\n\t\n\t    this.signalingState = 'stable';\n\t    this.iceConnectionState = 'new';\n\t    this.connectionState = 'new';\n\t    this.iceGatheringState = 'new';\n\t\n\t    config = JSON.parse(JSON.stringify(config || {}));\n\t\n\t    this.usingBundle = config.bundlePolicy === 'max-bundle';\n\t    if (config.rtcpMuxPolicy === 'negotiate') {\n\t      throw(makeError('NotSupportedError',\n\t          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n\t    } else if (!config.rtcpMuxPolicy) {\n\t      config.rtcpMuxPolicy = 'require';\n\t    }\n\t\n\t    switch (config.iceTransportPolicy) {\n\t      case 'all':\n\t      case 'relay':\n\t        break;\n\t      default:\n\t        config.iceTransportPolicy = 'all';\n\t        break;\n\t    }\n\t\n\t    switch (config.bundlePolicy) {\n\t      case 'balanced':\n\t      case 'max-compat':\n\t      case 'max-bundle':\n\t        break;\n\t      default:\n\t        config.bundlePolicy = 'balanced';\n\t        break;\n\t    }\n\t\n\t    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\t\n\t    this._iceGatherers = [];\n\t    if (config.iceCandidatePoolSize) {\n\t      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n\t        this._iceGatherers.push(new window.RTCIceGatherer({\n\t          iceServers: config.iceServers,\n\t          gatherPolicy: config.iceTransportPolicy\n\t        }));\n\t      }\n\t    } else {\n\t      config.iceCandidatePoolSize = 0;\n\t    }\n\t\n\t    this._config = config;\n\t\n\t    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n\t    // everything that is needed to describe a SDP m-line.\n\t    this.transceivers = [];\n\t\n\t    this._sdpSessionId = SDPUtils.generateSessionId();\n\t    this._sdpSessionVersion = 0;\n\t\n\t    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\t\n\t    this._isClosed = false;\n\t  };\n\t\n\t  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n\t    configurable: true,\n\t    get: function() {\n\t      return this._localDescription;\n\t    }\n\t  });\n\t  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n\t    configurable: true,\n\t    get: function() {\n\t      return this._remoteDescription;\n\t    }\n\t  });\n\t\n\t  // set up event handlers on prototype\n\t  RTCPeerConnection.prototype.onicecandidate = null;\n\t  RTCPeerConnection.prototype.onaddstream = null;\n\t  RTCPeerConnection.prototype.ontrack = null;\n\t  RTCPeerConnection.prototype.onremovestream = null;\n\t  RTCPeerConnection.prototype.onsignalingstatechange = null;\n\t  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n\t  RTCPeerConnection.prototype.onconnectionstatechange = null;\n\t  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n\t  RTCPeerConnection.prototype.onnegotiationneeded = null;\n\t  RTCPeerConnection.prototype.ondatachannel = null;\n\t\n\t  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n\t    if (this._isClosed) {\n\t      return;\n\t    }\n\t    this.dispatchEvent(event);\n\t    if (typeof this['on' + name] === 'function') {\n\t      this['on' + name](event);\n\t    }\n\t  };\n\t\n\t  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n\t    var event = new Event('icegatheringstatechange');\n\t    this._dispatchEvent('icegatheringstatechange', event);\n\t  };\n\t\n\t  RTCPeerConnection.prototype.getConfiguration = function() {\n\t    return this._config;\n\t  };\n\t\n\t  RTCPeerConnection.prototype.getLocalStreams = function() {\n\t    return this.localStreams;\n\t  };\n\t\n\t  RTCPeerConnection.prototype.getRemoteStreams = function() {\n\t    return this.remoteStreams;\n\t  };\n\t\n\t  // internal helper to create a transceiver object.\n\t  // (which is not yet the same as the WebRTC 1.0 transceiver)\n\t  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n\t    var hasBundleTransport = this.transceivers.length > 0;\n\t    var transceiver = {\n\t      track: null,\n\t      iceGatherer: null,\n\t      iceTransport: null,\n\t      dtlsTransport: null,\n\t      localCapabilities: null,\n\t      remoteCapabilities: null,\n\t      rtpSender: null,\n\t      rtpReceiver: null,\n\t      kind: kind,\n\t      mid: null,\n\t      sendEncodingParameters: null,\n\t      recvEncodingParameters: null,\n\t      stream: null,\n\t      associatedRemoteMediaStreams: [],\n\t      wantReceive: true\n\t    };\n\t    if (this.usingBundle && hasBundleTransport) {\n\t      transceiver.iceTransport = this.transceivers[0].iceTransport;\n\t      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n\t    } else {\n\t      var transports = this._createIceAndDtlsTransports();\n\t      transceiver.iceTransport = transports.iceTransport;\n\t      transceiver.dtlsTransport = transports.dtlsTransport;\n\t    }\n\t    if (!doNotAdd) {\n\t      this.transceivers.push(transceiver);\n\t    }\n\t    return transceiver;\n\t  };\n\t\n\t  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n\t    if (this._isClosed) {\n\t      throw makeError('InvalidStateError',\n\t          'Attempted to call addTrack on a closed peerconnection.');\n\t    }\n\t\n\t    var alreadyExists = this.transceivers.find(function(s) {\n\t      return s.track === track;\n\t    });\n\t\n\t    if (alreadyExists) {\n\t      throw makeError('InvalidAccessError', 'Track already exists.');\n\t    }\n\t\n\t    var transceiver;\n\t    for (var i = 0; i < this.transceivers.length; i++) {\n\t      if (!this.transceivers[i].track &&\n\t          this.transceivers[i].kind === track.kind) {\n\t        transceiver = this.transceivers[i];\n\t      }\n\t    }\n\t    if (!transceiver) {\n\t      transceiver = this._createTransceiver(track.kind);\n\t    }\n\t\n\t    this._maybeFireNegotiationNeeded();\n\t\n\t    if (this.localStreams.indexOf(stream) === -1) {\n\t      this.localStreams.push(stream);\n\t    }\n\t\n\t    transceiver.track = track;\n\t    transceiver.stream = stream;\n\t    transceiver.rtpSender = new window.RTCRtpSender(track,\n\t        transceiver.dtlsTransport);\n\t    return transceiver.rtpSender;\n\t  };\n\t\n\t  RTCPeerConnection.prototype.addStream = function(stream) {\n\t    var pc = this;\n\t    if (edgeVersion >= 15025) {\n\t      stream.getTracks().forEach(function(track) {\n\t        pc.addTrack(track, stream);\n\t      });\n\t    } else {\n\t      // Clone is necessary for local demos mostly, attaching directly\n\t      // to two different senders does not work (build 10547).\n\t      // Fixed in 15025 (or earlier)\n\t      var clonedStream = stream.clone();\n\t      stream.getTracks().forEach(function(track, idx) {\n\t        var clonedTrack = clonedStream.getTracks()[idx];\n\t        track.addEventListener('enabled', function(event) {\n\t          clonedTrack.enabled = event.enabled;\n\t        });\n\t      });\n\t      clonedStream.getTracks().forEach(function(track) {\n\t        pc.addTrack(track, clonedStream);\n\t      });\n\t    }\n\t  };\n\t\n\t  RTCPeerConnection.prototype.removeTrack = function(sender) {\n\t    if (this._isClosed) {\n\t      throw makeError('InvalidStateError',\n\t          'Attempted to call removeTrack on a closed peerconnection.');\n\t    }\n\t\n\t    if (!(sender instanceof window.RTCRtpSender)) {\n\t      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n\t          'does not implement interface RTCRtpSender.');\n\t    }\n\t\n\t    var transceiver = this.transceivers.find(function(t) {\n\t      return t.rtpSender === sender;\n\t    });\n\t\n\t    if (!transceiver) {\n\t      throw makeError('InvalidAccessError',\n\t          'Sender was not created by this connection.');\n\t    }\n\t    var stream = transceiver.stream;\n\t\n\t    transceiver.rtpSender.stop();\n\t    transceiver.rtpSender = null;\n\t    transceiver.track = null;\n\t    transceiver.stream = null;\n\t\n\t    // remove the stream from the set of local streams\n\t    var localStreams = this.transceivers.map(function(t) {\n\t      return t.stream;\n\t    });\n\t    if (localStreams.indexOf(stream) === -1 &&\n\t        this.localStreams.indexOf(stream) > -1) {\n\t      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n\t    }\n\t\n\t    this._maybeFireNegotiationNeeded();\n\t  };\n\t\n\t  RTCPeerConnection.prototype.removeStream = function(stream) {\n\t    var pc = this;\n\t    stream.getTracks().forEach(function(track) {\n\t      var sender = pc.getSenders().find(function(s) {\n\t        return s.track === track;\n\t      });\n\t      if (sender) {\n\t        pc.removeTrack(sender);\n\t      }\n\t    });\n\t  };\n\t\n\t  RTCPeerConnection.prototype.getSenders = function() {\n\t    return this.transceivers.filter(function(transceiver) {\n\t      return !!transceiver.rtpSender;\n\t    })\n\t    .map(function(transceiver) {\n\t      return transceiver.rtpSender;\n\t    });\n\t  };\n\t\n\t  RTCPeerConnection.prototype.getReceivers = function() {\n\t    return this.transceivers.filter(function(transceiver) {\n\t      return !!transceiver.rtpReceiver;\n\t    })\n\t    .map(function(transceiver) {\n\t      return transceiver.rtpReceiver;\n\t    });\n\t  };\n\t\n\t\n\t  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n\t      usingBundle) {\n\t    var pc = this;\n\t    if (usingBundle && sdpMLineIndex > 0) {\n\t      return this.transceivers[0].iceGatherer;\n\t    } else if (this._iceGatherers.length) {\n\t      return this._iceGatherers.shift();\n\t    }\n\t    var iceGatherer = new window.RTCIceGatherer({\n\t      iceServers: this._config.iceServers,\n\t      gatherPolicy: this._config.iceTransportPolicy\n\t    });\n\t    Object.defineProperty(iceGatherer, 'state',\n\t        {value: 'new', writable: true}\n\t    );\n\t\n\t    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n\t    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n\t      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n\t      // polyfill since RTCIceGatherer.state is not implemented in\n\t      // Edge 10547 yet.\n\t      iceGatherer.state = end ? 'completed' : 'gathering';\n\t      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n\t        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n\t      }\n\t    };\n\t    iceGatherer.addEventListener('localcandidate',\n\t      this.transceivers[sdpMLineIndex].bufferCandidates);\n\t    return iceGatherer;\n\t  };\n\t\n\t  // start gathering from an RTCIceGatherer.\n\t  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n\t    var pc = this;\n\t    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n\t    if (iceGatherer.onlocalcandidate) {\n\t      return;\n\t    }\n\t    var bufferedCandidateEvents =\n\t      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n\t    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n\t    iceGatherer.removeEventListener('localcandidate',\n\t      this.transceivers[sdpMLineIndex].bufferCandidates);\n\t    iceGatherer.onlocalcandidate = function(evt) {\n\t      if (pc.usingBundle && sdpMLineIndex > 0) {\n\t        // if we know that we use bundle we can drop candidates with\n\t        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n\t        // confused since we dispose the extra ice gatherer.\n\t        return;\n\t      }\n\t      var event = new Event('icecandidate');\n\t      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\t\n\t      var cand = evt.candidate;\n\t      // Edge emits an empty object for RTCIceCandidateComplete‥\n\t      var end = !cand || Object.keys(cand).length === 0;\n\t      if (end) {\n\t        // polyfill since RTCIceGatherer.state is not implemented in\n\t        // Edge 10547 yet.\n\t        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n\t          iceGatherer.state = 'completed';\n\t        }\n\t      } else {\n\t        if (iceGatherer.state === 'new') {\n\t          iceGatherer.state = 'gathering';\n\t        }\n\t        // RTCIceCandidate doesn't have a component, needs to be added\n\t        cand.component = 1;\n\t        // also the usernameFragment. TODO: update SDP to take both variants.\n\t        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\t\n\t        var serializedCandidate = SDPUtils.writeCandidate(cand);\n\t        event.candidate = Object.assign(event.candidate,\n\t            SDPUtils.parseCandidate(serializedCandidate));\n\t\n\t        event.candidate.candidate = serializedCandidate;\n\t        event.candidate.toJSON = function() {\n\t          return {\n\t            candidate: event.candidate.candidate,\n\t            sdpMid: event.candidate.sdpMid,\n\t            sdpMLineIndex: event.candidate.sdpMLineIndex,\n\t            usernameFragment: event.candidate.usernameFragment\n\t          };\n\t        };\n\t      }\n\t\n\t      // update local description.\n\t      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n\t      if (!end) {\n\t        sections[event.candidate.sdpMLineIndex] +=\n\t            'a=' + event.candidate.candidate + '\\r\\n';\n\t      } else {\n\t        sections[event.candidate.sdpMLineIndex] +=\n\t            'a=end-of-candidates\\r\\n';\n\t      }\n\t      pc._localDescription.sdp =\n\t          SDPUtils.getDescription(pc._localDescription.sdp) +\n\t          sections.join('');\n\t      var complete = pc.transceivers.every(function(transceiver) {\n\t        return transceiver.iceGatherer &&\n\t            transceiver.iceGatherer.state === 'completed';\n\t      });\n\t\n\t      if (pc.iceGatheringState !== 'gathering') {\n\t        pc.iceGatheringState = 'gathering';\n\t        pc._emitGatheringStateChange();\n\t      }\n\t\n\t      // Emit candidate. Also emit null candidate when all gatherers are\n\t      // complete.\n\t      if (!end) {\n\t        pc._dispatchEvent('icecandidate', event);\n\t      }\n\t      if (complete) {\n\t        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n\t        pc.iceGatheringState = 'complete';\n\t        pc._emitGatheringStateChange();\n\t      }\n\t    };\n\t\n\t    // emit already gathered candidates.\n\t    window.setTimeout(function() {\n\t      bufferedCandidateEvents.forEach(function(e) {\n\t        iceGatherer.onlocalcandidate(e);\n\t      });\n\t    }, 0);\n\t  };\n\t\n\t  // Create ICE transport and DTLS transport.\n\t  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n\t    var pc = this;\n\t    var iceTransport = new window.RTCIceTransport(null);\n\t    iceTransport.onicestatechange = function() {\n\t      pc._updateIceConnectionState();\n\t      pc._updateConnectionState();\n\t    };\n\t\n\t    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n\t    dtlsTransport.ondtlsstatechange = function() {\n\t      pc._updateConnectionState();\n\t    };\n\t    dtlsTransport.onerror = function() {\n\t      // onerror does not set state to failed by itself.\n\t      Object.defineProperty(dtlsTransport, 'state',\n\t          {value: 'failed', writable: true});\n\t      pc._updateConnectionState();\n\t    };\n\t\n\t    return {\n\t      iceTransport: iceTransport,\n\t      dtlsTransport: dtlsTransport\n\t    };\n\t  };\n\t\n\t  // Destroy ICE gatherer, ICE transport and DTLS transport.\n\t  // Without triggering the callbacks.\n\t  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n\t      sdpMLineIndex) {\n\t    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n\t    if (iceGatherer) {\n\t      delete iceGatherer.onlocalcandidate;\n\t      delete this.transceivers[sdpMLineIndex].iceGatherer;\n\t    }\n\t    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n\t    if (iceTransport) {\n\t      delete iceTransport.onicestatechange;\n\t      delete this.transceivers[sdpMLineIndex].iceTransport;\n\t    }\n\t    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n\t    if (dtlsTransport) {\n\t      delete dtlsTransport.ondtlsstatechange;\n\t      delete dtlsTransport.onerror;\n\t      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n\t    }\n\t  };\n\t\n\t  // Start the RTP Sender and Receiver for a transceiver.\n\t  RTCPeerConnection.prototype._transceive = function(transceiver,\n\t      send, recv) {\n\t    var params = getCommonCapabilities(transceiver.localCapabilities,\n\t        transceiver.remoteCapabilities);\n\t    if (send && transceiver.rtpSender) {\n\t      params.encodings = transceiver.sendEncodingParameters;\n\t      params.rtcp = {\n\t        cname: SDPUtils.localCName,\n\t        compound: transceiver.rtcpParameters.compound\n\t      };\n\t      if (transceiver.recvEncodingParameters.length) {\n\t        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n\t      }\n\t      transceiver.rtpSender.send(params);\n\t    }\n\t    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n\t      // remove RTX field in Edge 14942\n\t      if (transceiver.kind === 'video'\n\t          && transceiver.recvEncodingParameters\n\t          && edgeVersion < 15019) {\n\t        transceiver.recvEncodingParameters.forEach(function(p) {\n\t          delete p.rtx;\n\t        });\n\t      }\n\t      if (transceiver.recvEncodingParameters.length) {\n\t        params.encodings = transceiver.recvEncodingParameters;\n\t      } else {\n\t        params.encodings = [{}];\n\t      }\n\t      params.rtcp = {\n\t        compound: transceiver.rtcpParameters.compound\n\t      };\n\t      if (transceiver.rtcpParameters.cname) {\n\t        params.rtcp.cname = transceiver.rtcpParameters.cname;\n\t      }\n\t      if (transceiver.sendEncodingParameters.length) {\n\t        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n\t      }\n\t      transceiver.rtpReceiver.receive(params);\n\t    }\n\t  };\n\t\n\t  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n\t    var pc = this;\n\t\n\t    // Note: pranswer is not supported.\n\t    if (['offer', 'answer'].indexOf(description.type) === -1) {\n\t      return Promise.reject(makeError('TypeError',\n\t          'Unsupported type \"' + description.type + '\"'));\n\t    }\n\t\n\t    if (!isActionAllowedInSignalingState('setLocalDescription',\n\t        description.type, pc.signalingState) || pc._isClosed) {\n\t      return Promise.reject(makeError('InvalidStateError',\n\t          'Can not set local ' + description.type +\n\t          ' in state ' + pc.signalingState));\n\t    }\n\t\n\t    var sections;\n\t    var sessionpart;\n\t    if (description.type === 'offer') {\n\t      // VERY limited support for SDP munging. Limited to:\n\t      // * changing the order of codecs\n\t      sections = SDPUtils.splitSections(description.sdp);\n\t      sessionpart = sections.shift();\n\t      sections.forEach(function(mediaSection, sdpMLineIndex) {\n\t        var caps = SDPUtils.parseRtpParameters(mediaSection);\n\t        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n\t      });\n\t\n\t      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n\t        pc._gather(transceiver.mid, sdpMLineIndex);\n\t      });\n\t    } else if (description.type === 'answer') {\n\t      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n\t      sessionpart = sections.shift();\n\t      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n\t          'a=ice-lite').length > 0;\n\t      sections.forEach(function(mediaSection, sdpMLineIndex) {\n\t        var transceiver = pc.transceivers[sdpMLineIndex];\n\t        var iceGatherer = transceiver.iceGatherer;\n\t        var iceTransport = transceiver.iceTransport;\n\t        var dtlsTransport = transceiver.dtlsTransport;\n\t        var localCapabilities = transceiver.localCapabilities;\n\t        var remoteCapabilities = transceiver.remoteCapabilities;\n\t\n\t        // treat bundle-only as not-rejected.\n\t        var rejected = SDPUtils.isRejected(mediaSection) &&\n\t            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\t\n\t        if (!rejected && !transceiver.rejected) {\n\t          var remoteIceParameters = SDPUtils.getIceParameters(\n\t              mediaSection, sessionpart);\n\t          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n\t              mediaSection, sessionpart);\n\t          if (isIceLite) {\n\t            remoteDtlsParameters.role = 'server';\n\t          }\n\t\n\t          if (!pc.usingBundle || sdpMLineIndex === 0) {\n\t            pc._gather(transceiver.mid, sdpMLineIndex);\n\t            if (iceTransport.state === 'new') {\n\t              iceTransport.start(iceGatherer, remoteIceParameters,\n\t                  isIceLite ? 'controlling' : 'controlled');\n\t            }\n\t            if (dtlsTransport.state === 'new') {\n\t              dtlsTransport.start(remoteDtlsParameters);\n\t            }\n\t          }\n\t\n\t          // Calculate intersection of capabilities.\n\t          var params = getCommonCapabilities(localCapabilities,\n\t              remoteCapabilities);\n\t\n\t          // Start the RTCRtpSender. The RTCRtpReceiver for this\n\t          // transceiver has already been started in setRemoteDescription.\n\t          pc._transceive(transceiver,\n\t              params.codecs.length > 0,\n\t              false);\n\t        }\n\t      });\n\t    }\n\t\n\t    pc._localDescription = {\n\t      type: description.type,\n\t      sdp: description.sdp\n\t    };\n\t    if (description.type === 'offer') {\n\t      pc._updateSignalingState('have-local-offer');\n\t    } else {\n\t      pc._updateSignalingState('stable');\n\t    }\n\t\n\t    return Promise.resolve();\n\t  };\n\t\n\t  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n\t    var pc = this;\n\t\n\t    // Note: pranswer is not supported.\n\t    if (['offer', 'answer'].indexOf(description.type) === -1) {\n\t      return Promise.reject(makeError('TypeError',\n\t          'Unsupported type \"' + description.type + '\"'));\n\t    }\n\t\n\t    if (!isActionAllowedInSignalingState('setRemoteDescription',\n\t        description.type, pc.signalingState) || pc._isClosed) {\n\t      return Promise.reject(makeError('InvalidStateError',\n\t          'Can not set remote ' + description.type +\n\t          ' in state ' + pc.signalingState));\n\t    }\n\t\n\t    var streams = {};\n\t    pc.remoteStreams.forEach(function(stream) {\n\t      streams[stream.id] = stream;\n\t    });\n\t    var receiverList = [];\n\t    var sections = SDPUtils.splitSections(description.sdp);\n\t    var sessionpart = sections.shift();\n\t    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n\t        'a=ice-lite').length > 0;\n\t    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n\t        'a=group:BUNDLE ').length > 0;\n\t    pc.usingBundle = usingBundle;\n\t    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n\t        'a=ice-options:')[0];\n\t    if (iceOptions) {\n\t      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n\t          .indexOf('trickle') >= 0;\n\t    } else {\n\t      pc.canTrickleIceCandidates = false;\n\t    }\n\t\n\t    sections.forEach(function(mediaSection, sdpMLineIndex) {\n\t      var lines = SDPUtils.splitLines(mediaSection);\n\t      var kind = SDPUtils.getKind(mediaSection);\n\t      // treat bundle-only as not-rejected.\n\t      var rejected = SDPUtils.isRejected(mediaSection) &&\n\t          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\t      var protocol = lines[0].substr(2).split(' ')[2];\n\t\n\t      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n\t      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\t\n\t      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\t\n\t      // Reject datachannels which are not implemented yet.\n\t      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n\t          protocol === 'UDP/DTLS/SCTP'))) {\n\t        // TODO: this is dangerous in the case where a non-rejected m-line\n\t        //     becomes rejected.\n\t        pc.transceivers[sdpMLineIndex] = {\n\t          mid: mid,\n\t          kind: kind,\n\t          protocol: protocol,\n\t          rejected: true\n\t        };\n\t        return;\n\t      }\n\t\n\t      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n\t          pc.transceivers[sdpMLineIndex].rejected) {\n\t        // recycle a rejected transceiver.\n\t        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n\t      }\n\t\n\t      var transceiver;\n\t      var iceGatherer;\n\t      var iceTransport;\n\t      var dtlsTransport;\n\t      var rtpReceiver;\n\t      var sendEncodingParameters;\n\t      var recvEncodingParameters;\n\t      var localCapabilities;\n\t\n\t      var track;\n\t      // FIXME: ensure the mediaSection has rtcp-mux set.\n\t      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n\t      var remoteIceParameters;\n\t      var remoteDtlsParameters;\n\t      if (!rejected) {\n\t        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n\t            sessionpart);\n\t        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n\t            sessionpart);\n\t        remoteDtlsParameters.role = 'client';\n\t      }\n\t      recvEncodingParameters =\n\t          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\t\n\t      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\t\n\t      var isComplete = SDPUtils.matchPrefix(mediaSection,\n\t          'a=end-of-candidates', sessionpart).length > 0;\n\t      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n\t          .map(function(cand) {\n\t            return SDPUtils.parseCandidate(cand);\n\t          })\n\t          .filter(function(cand) {\n\t            return cand.component === 1;\n\t          });\n\t\n\t      // Check if we can use BUNDLE and dispose transports.\n\t      if ((description.type === 'offer' || description.type === 'answer') &&\n\t          !rejected && usingBundle && sdpMLineIndex > 0 &&\n\t          pc.transceivers[sdpMLineIndex]) {\n\t        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n\t        pc.transceivers[sdpMLineIndex].iceGatherer =\n\t            pc.transceivers[0].iceGatherer;\n\t        pc.transceivers[sdpMLineIndex].iceTransport =\n\t            pc.transceivers[0].iceTransport;\n\t        pc.transceivers[sdpMLineIndex].dtlsTransport =\n\t            pc.transceivers[0].dtlsTransport;\n\t        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n\t          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n\t              pc.transceivers[0].dtlsTransport);\n\t        }\n\t        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n\t          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n\t              pc.transceivers[0].dtlsTransport);\n\t        }\n\t      }\n\t      if (description.type === 'offer' && !rejected) {\n\t        transceiver = pc.transceivers[sdpMLineIndex] ||\n\t            pc._createTransceiver(kind);\n\t        transceiver.mid = mid;\n\t\n\t        if (!transceiver.iceGatherer) {\n\t          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n\t              usingBundle);\n\t        }\n\t\n\t        if (cands.length && transceiver.iceTransport.state === 'new') {\n\t          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n\t            transceiver.iceTransport.setRemoteCandidates(cands);\n\t          } else {\n\t            cands.forEach(function(candidate) {\n\t              maybeAddCandidate(transceiver.iceTransport, candidate);\n\t            });\n\t          }\n\t        }\n\t\n\t        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\t\n\t        // filter RTX until additional stuff needed for RTX is implemented\n\t        // in adapter.js\n\t        if (edgeVersion < 15019) {\n\t          localCapabilities.codecs = localCapabilities.codecs.filter(\n\t              function(codec) {\n\t                return codec.name !== 'rtx';\n\t              });\n\t        }\n\t\n\t        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n\t          ssrc: (2 * sdpMLineIndex + 2) * 1001\n\t        }];\n\t\n\t        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n\t        var isNewTrack = false;\n\t        if (direction === 'sendrecv' || direction === 'sendonly') {\n\t          isNewTrack = !transceiver.rtpReceiver;\n\t          rtpReceiver = transceiver.rtpReceiver ||\n\t              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\t\n\t          if (isNewTrack) {\n\t            var stream;\n\t            track = rtpReceiver.track;\n\t            // FIXME: does not work with Plan B.\n\t            if (remoteMsid && remoteMsid.stream === '-') {\n\t              // no-op. a stream id of '-' means: no associated stream.\n\t            } else if (remoteMsid) {\n\t              if (!streams[remoteMsid.stream]) {\n\t                streams[remoteMsid.stream] = new window.MediaStream();\n\t                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n\t                  get: function() {\n\t                    return remoteMsid.stream;\n\t                  }\n\t                });\n\t              }\n\t              Object.defineProperty(track, 'id', {\n\t                get: function() {\n\t                  return remoteMsid.track;\n\t                }\n\t              });\n\t              stream = streams[remoteMsid.stream];\n\t            } else {\n\t              if (!streams.default) {\n\t                streams.default = new window.MediaStream();\n\t              }\n\t              stream = streams.default;\n\t            }\n\t            if (stream) {\n\t              addTrackToStreamAndFireEvent(track, stream);\n\t              transceiver.associatedRemoteMediaStreams.push(stream);\n\t            }\n\t            receiverList.push([track, rtpReceiver, stream]);\n\t          }\n\t        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n\t          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n\t            var nativeTrack = s.getTracks().find(function(t) {\n\t              return t.id === transceiver.rtpReceiver.track.id;\n\t            });\n\t            if (nativeTrack) {\n\t              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n\t            }\n\t          });\n\t          transceiver.associatedRemoteMediaStreams = [];\n\t        }\n\t\n\t        transceiver.localCapabilities = localCapabilities;\n\t        transceiver.remoteCapabilities = remoteCapabilities;\n\t        transceiver.rtpReceiver = rtpReceiver;\n\t        transceiver.rtcpParameters = rtcpParameters;\n\t        transceiver.sendEncodingParameters = sendEncodingParameters;\n\t        transceiver.recvEncodingParameters = recvEncodingParameters;\n\t\n\t        // Start the RTCRtpReceiver now. The RTPSender is started in\n\t        // setLocalDescription.\n\t        pc._transceive(pc.transceivers[sdpMLineIndex],\n\t            false,\n\t            isNewTrack);\n\t      } else if (description.type === 'answer' && !rejected) {\n\t        transceiver = pc.transceivers[sdpMLineIndex];\n\t        iceGatherer = transceiver.iceGatherer;\n\t        iceTransport = transceiver.iceTransport;\n\t        dtlsTransport = transceiver.dtlsTransport;\n\t        rtpReceiver = transceiver.rtpReceiver;\n\t        sendEncodingParameters = transceiver.sendEncodingParameters;\n\t        localCapabilities = transceiver.localCapabilities;\n\t\n\t        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n\t            recvEncodingParameters;\n\t        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n\t            remoteCapabilities;\n\t        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\t\n\t        if (cands.length && iceTransport.state === 'new') {\n\t          if ((isIceLite || isComplete) &&\n\t              (!usingBundle || sdpMLineIndex === 0)) {\n\t            iceTransport.setRemoteCandidates(cands);\n\t          } else {\n\t            cands.forEach(function(candidate) {\n\t              maybeAddCandidate(transceiver.iceTransport, candidate);\n\t            });\n\t          }\n\t        }\n\t\n\t        if (!usingBundle || sdpMLineIndex === 0) {\n\t          if (iceTransport.state === 'new') {\n\t            iceTransport.start(iceGatherer, remoteIceParameters,\n\t                'controlling');\n\t          }\n\t          if (dtlsTransport.state === 'new') {\n\t            dtlsTransport.start(remoteDtlsParameters);\n\t          }\n\t        }\n\t\n\t        // If the offer contained RTX but the answer did not,\n\t        // remove RTX from sendEncodingParameters.\n\t        var commonCapabilities = getCommonCapabilities(\n\t          transceiver.localCapabilities,\n\t          transceiver.remoteCapabilities);\n\t\n\t        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n\t          return c.name.toLowerCase() === 'rtx';\n\t        }).length;\n\t        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n\t          delete transceiver.sendEncodingParameters[0].rtx;\n\t        }\n\t\n\t        pc._transceive(transceiver,\n\t            direction === 'sendrecv' || direction === 'recvonly',\n\t            direction === 'sendrecv' || direction === 'sendonly');\n\t\n\t        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n\t        if (rtpReceiver &&\n\t            (direction === 'sendrecv' || direction === 'sendonly')) {\n\t          track = rtpReceiver.track;\n\t          if (remoteMsid) {\n\t            if (!streams[remoteMsid.stream]) {\n\t              streams[remoteMsid.stream] = new window.MediaStream();\n\t            }\n\t            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n\t            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n\t          } else {\n\t            if (!streams.default) {\n\t              streams.default = new window.MediaStream();\n\t            }\n\t            addTrackToStreamAndFireEvent(track, streams.default);\n\t            receiverList.push([track, rtpReceiver, streams.default]);\n\t          }\n\t        } else {\n\t          // FIXME: actually the receiver should be created later.\n\t          delete transceiver.rtpReceiver;\n\t        }\n\t      }\n\t    });\n\t\n\t    if (pc._dtlsRole === undefined) {\n\t      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n\t    }\n\t\n\t    pc._remoteDescription = {\n\t      type: description.type,\n\t      sdp: description.sdp\n\t    };\n\t    if (description.type === 'offer') {\n\t      pc._updateSignalingState('have-remote-offer');\n\t    } else {\n\t      pc._updateSignalingState('stable');\n\t    }\n\t    Object.keys(streams).forEach(function(sid) {\n\t      var stream = streams[sid];\n\t      if (stream.getTracks().length) {\n\t        if (pc.remoteStreams.indexOf(stream) === -1) {\n\t          pc.remoteStreams.push(stream);\n\t          var event = new Event('addstream');\n\t          event.stream = stream;\n\t          window.setTimeout(function() {\n\t            pc._dispatchEvent('addstream', event);\n\t          });\n\t        }\n\t\n\t        receiverList.forEach(function(item) {\n\t          var track = item[0];\n\t          var receiver = item[1];\n\t          if (stream.id !== item[2].id) {\n\t            return;\n\t          }\n\t          fireAddTrack(pc, track, receiver, [stream]);\n\t        });\n\t      }\n\t    });\n\t    receiverList.forEach(function(item) {\n\t      if (item[2]) {\n\t        return;\n\t      }\n\t      fireAddTrack(pc, item[0], item[1], []);\n\t    });\n\t\n\t    // check whether addIceCandidate({}) was called within four seconds after\n\t    // setRemoteDescription.\n\t    window.setTimeout(function() {\n\t      if (!(pc && pc.transceivers)) {\n\t        return;\n\t      }\n\t      pc.transceivers.forEach(function(transceiver) {\n\t        if (transceiver.iceTransport &&\n\t            transceiver.iceTransport.state === 'new' &&\n\t            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n\t          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n\t              'an end-of-candidates notification');\n\t          transceiver.iceTransport.addRemoteCandidate({});\n\t        }\n\t      });\n\t    }, 4000);\n\t\n\t    return Promise.resolve();\n\t  };\n\t\n\t  RTCPeerConnection.prototype.close = function() {\n\t    this.transceivers.forEach(function(transceiver) {\n\t      /* not yet\n\t      if (transceiver.iceGatherer) {\n\t        transceiver.iceGatherer.close();\n\t      }\n\t      */\n\t      if (transceiver.iceTransport) {\n\t        transceiver.iceTransport.stop();\n\t      }\n\t      if (transceiver.dtlsTransport) {\n\t        transceiver.dtlsTransport.stop();\n\t      }\n\t      if (transceiver.rtpSender) {\n\t        transceiver.rtpSender.stop();\n\t      }\n\t      if (transceiver.rtpReceiver) {\n\t        transceiver.rtpReceiver.stop();\n\t      }\n\t    });\n\t    // FIXME: clean up tracks, local streams, remote streams, etc\n\t    this._isClosed = true;\n\t    this._updateSignalingState('closed');\n\t  };\n\t\n\t  // Update the signaling state.\n\t  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n\t    this.signalingState = newState;\n\t    var event = new Event('signalingstatechange');\n\t    this._dispatchEvent('signalingstatechange', event);\n\t  };\n\t\n\t  // Determine whether to fire the negotiationneeded event.\n\t  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n\t    var pc = this;\n\t    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n\t      return;\n\t    }\n\t    this.needNegotiation = true;\n\t    window.setTimeout(function() {\n\t      if (pc.needNegotiation) {\n\t        pc.needNegotiation = false;\n\t        var event = new Event('negotiationneeded');\n\t        pc._dispatchEvent('negotiationneeded', event);\n\t      }\n\t    }, 0);\n\t  };\n\t\n\t  // Update the ice connection state.\n\t  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n\t    var newState;\n\t    var states = {\n\t      'new': 0,\n\t      closed: 0,\n\t      checking: 0,\n\t      connected: 0,\n\t      completed: 0,\n\t      disconnected: 0,\n\t      failed: 0\n\t    };\n\t    this.transceivers.forEach(function(transceiver) {\n\t      states[transceiver.iceTransport.state]++;\n\t    });\n\t\n\t    newState = 'new';\n\t    if (states.failed > 0) {\n\t      newState = 'failed';\n\t    } else if (states.checking > 0) {\n\t      newState = 'checking';\n\t    } else if (states.disconnected > 0) {\n\t      newState = 'disconnected';\n\t    } else if (states.new > 0) {\n\t      newState = 'new';\n\t    } else if (states.connected > 0) {\n\t      newState = 'connected';\n\t    } else if (states.completed > 0) {\n\t      newState = 'completed';\n\t    }\n\t\n\t    if (newState !== this.iceConnectionState) {\n\t      this.iceConnectionState = newState;\n\t      var event = new Event('iceconnectionstatechange');\n\t      this._dispatchEvent('iceconnectionstatechange', event);\n\t    }\n\t  };\n\t\n\t  // Update the connection state.\n\t  RTCPeerConnection.prototype._updateConnectionState = function() {\n\t    var newState;\n\t    var states = {\n\t      'new': 0,\n\t      closed: 0,\n\t      connecting: 0,\n\t      connected: 0,\n\t      completed: 0,\n\t      disconnected: 0,\n\t      failed: 0\n\t    };\n\t    this.transceivers.forEach(function(transceiver) {\n\t      states[transceiver.iceTransport.state]++;\n\t      states[transceiver.dtlsTransport.state]++;\n\t    });\n\t    // ICETransport.completed and connected are the same for this purpose.\n\t    states.connected += states.completed;\n\t\n\t    newState = 'new';\n\t    if (states.failed > 0) {\n\t      newState = 'failed';\n\t    } else if (states.connecting > 0) {\n\t      newState = 'connecting';\n\t    } else if (states.disconnected > 0) {\n\t      newState = 'disconnected';\n\t    } else if (states.new > 0) {\n\t      newState = 'new';\n\t    } else if (states.connected > 0) {\n\t      newState = 'connected';\n\t    }\n\t\n\t    if (newState !== this.connectionState) {\n\t      this.connectionState = newState;\n\t      var event = new Event('connectionstatechange');\n\t      this._dispatchEvent('connectionstatechange', event);\n\t    }\n\t  };\n\t\n\t  RTCPeerConnection.prototype.createOffer = function() {\n\t    var pc = this;\n\t\n\t    if (pc._isClosed) {\n\t      return Promise.reject(makeError('InvalidStateError',\n\t          'Can not call createOffer after close'));\n\t    }\n\t\n\t    var numAudioTracks = pc.transceivers.filter(function(t) {\n\t      return t.kind === 'audio';\n\t    }).length;\n\t    var numVideoTracks = pc.transceivers.filter(function(t) {\n\t      return t.kind === 'video';\n\t    }).length;\n\t\n\t    // Determine number of audio and video tracks we need to send/recv.\n\t    var offerOptions = arguments[0];\n\t    if (offerOptions) {\n\t      // Reject Chrome legacy constraints.\n\t      if (offerOptions.mandatory || offerOptions.optional) {\n\t        throw new TypeError(\n\t            'Legacy mandatory/optional constraints not supported.');\n\t      }\n\t      if (offerOptions.offerToReceiveAudio !== undefined) {\n\t        if (offerOptions.offerToReceiveAudio === true) {\n\t          numAudioTracks = 1;\n\t        } else if (offerOptions.offerToReceiveAudio === false) {\n\t          numAudioTracks = 0;\n\t        } else {\n\t          numAudioTracks = offerOptions.offerToReceiveAudio;\n\t        }\n\t      }\n\t      if (offerOptions.offerToReceiveVideo !== undefined) {\n\t        if (offerOptions.offerToReceiveVideo === true) {\n\t          numVideoTracks = 1;\n\t        } else if (offerOptions.offerToReceiveVideo === false) {\n\t          numVideoTracks = 0;\n\t        } else {\n\t          numVideoTracks = offerOptions.offerToReceiveVideo;\n\t        }\n\t      }\n\t    }\n\t\n\t    pc.transceivers.forEach(function(transceiver) {\n\t      if (transceiver.kind === 'audio') {\n\t        numAudioTracks--;\n\t        if (numAudioTracks < 0) {\n\t          transceiver.wantReceive = false;\n\t        }\n\t      } else if (transceiver.kind === 'video') {\n\t        numVideoTracks--;\n\t        if (numVideoTracks < 0) {\n\t          transceiver.wantReceive = false;\n\t        }\n\t      }\n\t    });\n\t\n\t    // Create M-lines for recvonly streams.\n\t    while (numAudioTracks > 0 || numVideoTracks > 0) {\n\t      if (numAudioTracks > 0) {\n\t        pc._createTransceiver('audio');\n\t        numAudioTracks--;\n\t      }\n\t      if (numVideoTracks > 0) {\n\t        pc._createTransceiver('video');\n\t        numVideoTracks--;\n\t      }\n\t    }\n\t\n\t    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n\t        pc._sdpSessionVersion++);\n\t    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n\t      // For each track, create an ice gatherer, ice transport,\n\t      // dtls transport, potentially rtpsender and rtpreceiver.\n\t      var track = transceiver.track;\n\t      var kind = transceiver.kind;\n\t      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n\t      transceiver.mid = mid;\n\t\n\t      if (!transceiver.iceGatherer) {\n\t        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n\t            pc.usingBundle);\n\t      }\n\t\n\t      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n\t      // filter RTX until additional stuff needed for RTX is implemented\n\t      // in adapter.js\n\t      if (edgeVersion < 15019) {\n\t        localCapabilities.codecs = localCapabilities.codecs.filter(\n\t            function(codec) {\n\t              return codec.name !== 'rtx';\n\t            });\n\t      }\n\t      localCapabilities.codecs.forEach(function(codec) {\n\t        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n\t        // by adding level-asymmetry-allowed=1\n\t        if (codec.name === 'H264' &&\n\t            codec.parameters['level-asymmetry-allowed'] === undefined) {\n\t          codec.parameters['level-asymmetry-allowed'] = '1';\n\t        }\n\t\n\t        // for subsequent offers, we might have to re-use the payload\n\t        // type of the last offer.\n\t        if (transceiver.remoteCapabilities &&\n\t            transceiver.remoteCapabilities.codecs) {\n\t          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n\t            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n\t                codec.clockRate === remoteCodec.clockRate) {\n\t              codec.preferredPayloadType = remoteCodec.payloadType;\n\t            }\n\t          });\n\t        }\n\t      });\n\t      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n\t        var remoteExtensions = transceiver.remoteCapabilities &&\n\t            transceiver.remoteCapabilities.headerExtensions || [];\n\t        remoteExtensions.forEach(function(rHdrExt) {\n\t          if (hdrExt.uri === rHdrExt.uri) {\n\t            hdrExt.id = rHdrExt.id;\n\t          }\n\t        });\n\t      });\n\t\n\t      // generate an ssrc now, to be used later in rtpSender.send\n\t      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n\t        ssrc: (2 * sdpMLineIndex + 1) * 1001\n\t      }];\n\t      if (track) {\n\t        // add RTX\n\t        if (edgeVersion >= 15019 && kind === 'video' &&\n\t            !sendEncodingParameters[0].rtx) {\n\t          sendEncodingParameters[0].rtx = {\n\t            ssrc: sendEncodingParameters[0].ssrc + 1\n\t          };\n\t        }\n\t      }\n\t\n\t      if (transceiver.wantReceive) {\n\t        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n\t            transceiver.dtlsTransport, kind);\n\t      }\n\t\n\t      transceiver.localCapabilities = localCapabilities;\n\t      transceiver.sendEncodingParameters = sendEncodingParameters;\n\t    });\n\t\n\t    // always offer BUNDLE and dispose on return if not supported.\n\t    if (pc._config.bundlePolicy !== 'max-compat') {\n\t      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n\t        return t.mid;\n\t      }).join(' ') + '\\r\\n';\n\t    }\n\t    sdp += 'a=ice-options:trickle\\r\\n';\n\t\n\t    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n\t      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n\t          'offer', transceiver.stream, pc._dtlsRole);\n\t      sdp += 'a=rtcp-rsize\\r\\n';\n\t\n\t      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n\t          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n\t        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n\t          cand.component = 1;\n\t          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n\t        });\n\t\n\t        if (transceiver.iceGatherer.state === 'completed') {\n\t          sdp += 'a=end-of-candidates\\r\\n';\n\t        }\n\t      }\n\t    });\n\t\n\t    var desc = new window.RTCSessionDescription({\n\t      type: 'offer',\n\t      sdp: sdp\n\t    });\n\t    return Promise.resolve(desc);\n\t  };\n\t\n\t  RTCPeerConnection.prototype.createAnswer = function() {\n\t    var pc = this;\n\t\n\t    if (pc._isClosed) {\n\t      return Promise.reject(makeError('InvalidStateError',\n\t          'Can not call createAnswer after close'));\n\t    }\n\t\n\t    if (!(pc.signalingState === 'have-remote-offer' ||\n\t        pc.signalingState === 'have-local-pranswer')) {\n\t      return Promise.reject(makeError('InvalidStateError',\n\t          'Can not call createAnswer in signalingState ' + pc.signalingState));\n\t    }\n\t\n\t    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n\t        pc._sdpSessionVersion++);\n\t    if (pc.usingBundle) {\n\t      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n\t        return t.mid;\n\t      }).join(' ') + '\\r\\n';\n\t    }\n\t    sdp += 'a=ice-options:trickle\\r\\n';\n\t\n\t    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n\t        pc._remoteDescription.sdp).length;\n\t    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n\t      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n\t        return;\n\t      }\n\t      if (transceiver.rejected) {\n\t        if (transceiver.kind === 'application') {\n\t          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n\t            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n\t          } else {\n\t            sdp += 'm=application 0 ' + transceiver.protocol +\n\t                ' webrtc-datachannel\\r\\n';\n\t          }\n\t        } else if (transceiver.kind === 'audio') {\n\t          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n\t              'a=rtpmap:0 PCMU/8000\\r\\n';\n\t        } else if (transceiver.kind === 'video') {\n\t          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n\t              'a=rtpmap:120 VP8/90000\\r\\n';\n\t        }\n\t        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n\t            'a=inactive\\r\\n' +\n\t            'a=mid:' + transceiver.mid + '\\r\\n';\n\t        return;\n\t      }\n\t\n\t      // FIXME: look at direction.\n\t      if (transceiver.stream) {\n\t        var localTrack;\n\t        if (transceiver.kind === 'audio') {\n\t          localTrack = transceiver.stream.getAudioTracks()[0];\n\t        } else if (transceiver.kind === 'video') {\n\t          localTrack = transceiver.stream.getVideoTracks()[0];\n\t        }\n\t        if (localTrack) {\n\t          // add RTX\n\t          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n\t              !transceiver.sendEncodingParameters[0].rtx) {\n\t            transceiver.sendEncodingParameters[0].rtx = {\n\t              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n\t            };\n\t          }\n\t        }\n\t      }\n\t\n\t      // Calculate intersection of capabilities.\n\t      var commonCapabilities = getCommonCapabilities(\n\t          transceiver.localCapabilities,\n\t          transceiver.remoteCapabilities);\n\t\n\t      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n\t        return c.name.toLowerCase() === 'rtx';\n\t      }).length;\n\t      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n\t        delete transceiver.sendEncodingParameters[0].rtx;\n\t      }\n\t\n\t      sdp += writeMediaSection(transceiver, commonCapabilities,\n\t          'answer', transceiver.stream, pc._dtlsRole);\n\t      if (transceiver.rtcpParameters &&\n\t          transceiver.rtcpParameters.reducedSize) {\n\t        sdp += 'a=rtcp-rsize\\r\\n';\n\t      }\n\t    });\n\t\n\t    var desc = new window.RTCSessionDescription({\n\t      type: 'answer',\n\t      sdp: sdp\n\t    });\n\t    return Promise.resolve(desc);\n\t  };\n\t\n\t  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n\t    var pc = this;\n\t    var sections;\n\t    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n\t        candidate.sdpMid)) {\n\t      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n\t    }\n\t\n\t    // TODO: needs to go into ops queue.\n\t    return new Promise(function(resolve, reject) {\n\t      if (!pc._remoteDescription) {\n\t        return reject(makeError('InvalidStateError',\n\t            'Can not add ICE candidate without a remote description'));\n\t      } else if (!candidate || candidate.candidate === '') {\n\t        for (var j = 0; j < pc.transceivers.length; j++) {\n\t          if (pc.transceivers[j].rejected) {\n\t            continue;\n\t          }\n\t          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n\t          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n\t          sections[j] += 'a=end-of-candidates\\r\\n';\n\t          pc._remoteDescription.sdp =\n\t              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n\t              sections.join('');\n\t          if (pc.usingBundle) {\n\t            break;\n\t          }\n\t        }\n\t      } else {\n\t        var sdpMLineIndex = candidate.sdpMLineIndex;\n\t        if (candidate.sdpMid) {\n\t          for (var i = 0; i < pc.transceivers.length; i++) {\n\t            if (pc.transceivers[i].mid === candidate.sdpMid) {\n\t              sdpMLineIndex = i;\n\t              break;\n\t            }\n\t          }\n\t        }\n\t        var transceiver = pc.transceivers[sdpMLineIndex];\n\t        if (transceiver) {\n\t          if (transceiver.rejected) {\n\t            return resolve();\n\t          }\n\t          var cand = Object.keys(candidate.candidate).length > 0 ?\n\t              SDPUtils.parseCandidate(candidate.candidate) : {};\n\t          // Ignore Chrome's invalid candidates since Edge does not like them.\n\t          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n\t            return resolve();\n\t          }\n\t          // Ignore RTCP candidates, we assume RTCP-MUX.\n\t          if (cand.component && cand.component !== 1) {\n\t            return resolve();\n\t          }\n\t          // when using bundle, avoid adding candidates to the wrong\n\t          // ice transport. And avoid adding candidates added in the SDP.\n\t          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n\t              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n\t            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n\t              return reject(makeError('OperationError',\n\t                  'Can not add ICE candidate'));\n\t            }\n\t          }\n\t\n\t          // update the remoteDescription.\n\t          var candidateString = candidate.candidate.trim();\n\t          if (candidateString.indexOf('a=') === 0) {\n\t            candidateString = candidateString.substr(2);\n\t          }\n\t          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n\t          sections[sdpMLineIndex] += 'a=' +\n\t              (cand.type ? candidateString : 'end-of-candidates')\n\t              + '\\r\\n';\n\t          pc._remoteDescription.sdp =\n\t              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n\t              sections.join('');\n\t        } else {\n\t          return reject(makeError('OperationError',\n\t              'Can not add ICE candidate'));\n\t        }\n\t      }\n\t      resolve();\n\t    });\n\t  };\n\t\n\t  RTCPeerConnection.prototype.getStats = function(selector) {\n\t    if (selector && selector instanceof window.MediaStreamTrack) {\n\t      var senderOrReceiver = null;\n\t      this.transceivers.forEach(function(transceiver) {\n\t        if (transceiver.rtpSender &&\n\t            transceiver.rtpSender.track === selector) {\n\t          senderOrReceiver = transceiver.rtpSender;\n\t        } else if (transceiver.rtpReceiver &&\n\t            transceiver.rtpReceiver.track === selector) {\n\t          senderOrReceiver = transceiver.rtpReceiver;\n\t        }\n\t      });\n\t      if (!senderOrReceiver) {\n\t        throw makeError('InvalidAccessError', 'Invalid selector.');\n\t      }\n\t      return senderOrReceiver.getStats();\n\t    }\n\t\n\t    var promises = [];\n\t    this.transceivers.forEach(function(transceiver) {\n\t      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n\t          'dtlsTransport'].forEach(function(method) {\n\t            if (transceiver[method]) {\n\t              promises.push(transceiver[method].getStats());\n\t            }\n\t          });\n\t    });\n\t    return Promise.all(promises).then(function(allStats) {\n\t      var results = new Map();\n\t      allStats.forEach(function(stats) {\n\t        stats.forEach(function(stat) {\n\t          results.set(stat.id, stat);\n\t        });\n\t      });\n\t      return results;\n\t    });\n\t  };\n\t\n\t  // fix low-level stat names and return Map instead of object.\n\t  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n\t    'RTCIceTransport', 'RTCDtlsTransport'];\n\t  ortcObjects.forEach(function(ortcObjectName) {\n\t    var obj = window[ortcObjectName];\n\t    if (obj && obj.prototype && obj.prototype.getStats) {\n\t      var nativeGetstats = obj.prototype.getStats;\n\t      obj.prototype.getStats = function() {\n\t        return nativeGetstats.apply(this)\n\t        .then(function(nativeStats) {\n\t          var mapStats = new Map();\n\t          Object.keys(nativeStats).forEach(function(id) {\n\t            nativeStats[id].type = fixStatsType(nativeStats[id]);\n\t            mapStats.set(id, nativeStats[id]);\n\t          });\n\t          return mapStats;\n\t        });\n\t      };\n\t    }\n\t  });\n\t\n\t  // legacy callback shims. Should be moved to adapter.js some days.\n\t  var methods = ['createOffer', 'createAnswer'];\n\t  methods.forEach(function(method) {\n\t    var nativeMethod = RTCPeerConnection.prototype[method];\n\t    RTCPeerConnection.prototype[method] = function() {\n\t      var args = arguments;\n\t      if (typeof args[0] === 'function' ||\n\t          typeof args[1] === 'function') { // legacy\n\t        return nativeMethod.apply(this, [arguments[2]])\n\t        .then(function(description) {\n\t          if (typeof args[0] === 'function') {\n\t            args[0].apply(null, [description]);\n\t          }\n\t        }, function(error) {\n\t          if (typeof args[1] === 'function') {\n\t            args[1].apply(null, [error]);\n\t          }\n\t        });\n\t      }\n\t      return nativeMethod.apply(this, arguments);\n\t    };\n\t  });\n\t\n\t  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n\t  methods.forEach(function(method) {\n\t    var nativeMethod = RTCPeerConnection.prototype[method];\n\t    RTCPeerConnection.prototype[method] = function() {\n\t      var args = arguments;\n\t      if (typeof args[1] === 'function' ||\n\t          typeof args[2] === 'function') { // legacy\n\t        return nativeMethod.apply(this, arguments)\n\t        .then(function() {\n\t          if (typeof args[1] === 'function') {\n\t            args[1].apply(null);\n\t          }\n\t        }, function(error) {\n\t          if (typeof args[2] === 'function') {\n\t            args[2].apply(null, [error]);\n\t          }\n\t        });\n\t      }\n\t      return nativeMethod.apply(this, arguments);\n\t    };\n\t  });\n\t\n\t  // getStats is special. It doesn't have a spec legacy method yet we support\n\t  // getStats(something, cb) without error callbacks.\n\t  ['getStats'].forEach(function(method) {\n\t    var nativeMethod = RTCPeerConnection.prototype[method];\n\t    RTCPeerConnection.prototype[method] = function() {\n\t      var args = arguments;\n\t      if (typeof args[1] === 'function') {\n\t        return nativeMethod.apply(this, arguments)\n\t        .then(function() {\n\t          if (typeof args[1] === 'function') {\n\t            args[1].apply(null);\n\t          }\n\t        });\n\t      }\n\t      return nativeMethod.apply(this, arguments);\n\t    };\n\t  });\n\t\n\t  return RTCPeerConnection;\n\t};\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t /* eslint-env node */\n\t'use strict';\n\t\n\t// SDP helpers.\n\tvar SDPUtils = {};\n\t\n\t// Generate an alphanumeric identifier for cname or mids.\n\t// TODO: use UUIDs instead? https://gist.github.com/jed/982883\n\tSDPUtils.generateIdentifier = function() {\n\t  return Math.random().toString(36).substr(2, 10);\n\t};\n\t\n\t// The RTCP CNAME used by all peerconnections from the same JS.\n\tSDPUtils.localCName = SDPUtils.generateIdentifier();\n\t\n\t// Splits SDP into lines, dealing with both CRLF and LF.\n\tSDPUtils.splitLines = function(blob) {\n\t  return blob.trim().split('\\n').map(function(line) {\n\t    return line.trim();\n\t  });\n\t};\n\t// Splits SDP into sessionpart and mediasections. Ensures CRLF.\n\tSDPUtils.splitSections = function(blob) {\n\t  var parts = blob.split('\\nm=');\n\t  return parts.map(function(part, index) {\n\t    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n\t  });\n\t};\n\t\n\t// returns the session description.\n\tSDPUtils.getDescription = function(blob) {\n\t  var sections = SDPUtils.splitSections(blob);\n\t  return sections && sections[0];\n\t};\n\t\n\t// returns the individual media sections.\n\tSDPUtils.getMediaSections = function(blob) {\n\t  var sections = SDPUtils.splitSections(blob);\n\t  sections.shift();\n\t  return sections;\n\t};\n\t\n\t// Returns lines that start with a certain prefix.\n\tSDPUtils.matchPrefix = function(blob, prefix) {\n\t  return SDPUtils.splitLines(blob).filter(function(line) {\n\t    return line.indexOf(prefix) === 0;\n\t  });\n\t};\n\t\n\t// Parses an ICE candidate line. Sample input:\n\t// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n\t// rport 55996\"\n\tSDPUtils.parseCandidate = function(line) {\n\t  var parts;\n\t  // Parse both variants.\n\t  if (line.indexOf('a=candidate:') === 0) {\n\t    parts = line.substring(12).split(' ');\n\t  } else {\n\t    parts = line.substring(10).split(' ');\n\t  }\n\t\n\t  var candidate = {\n\t    foundation: parts[0],\n\t    component: parseInt(parts[1], 10),\n\t    protocol: parts[2].toLowerCase(),\n\t    priority: parseInt(parts[3], 10),\n\t    ip: parts[4],\n\t    address: parts[4], // address is an alias for ip.\n\t    port: parseInt(parts[5], 10),\n\t    // skip parts[6] == 'typ'\n\t    type: parts[7]\n\t  };\n\t\n\t  for (var i = 8; i < parts.length; i += 2) {\n\t    switch (parts[i]) {\n\t      case 'raddr':\n\t        candidate.relatedAddress = parts[i + 1];\n\t        break;\n\t      case 'rport':\n\t        candidate.relatedPort = parseInt(parts[i + 1], 10);\n\t        break;\n\t      case 'tcptype':\n\t        candidate.tcpType = parts[i + 1];\n\t        break;\n\t      case 'ufrag':\n\t        candidate.ufrag = parts[i + 1]; // for backward compability.\n\t        candidate.usernameFragment = parts[i + 1];\n\t        break;\n\t      default: // extension handling, in particular ufrag\n\t        candidate[parts[i]] = parts[i + 1];\n\t        break;\n\t    }\n\t  }\n\t  return candidate;\n\t};\n\t\n\t// Translates a candidate object into SDP candidate attribute.\n\tSDPUtils.writeCandidate = function(candidate) {\n\t  var sdp = [];\n\t  sdp.push(candidate.foundation);\n\t  sdp.push(candidate.component);\n\t  sdp.push(candidate.protocol.toUpperCase());\n\t  sdp.push(candidate.priority);\n\t  sdp.push(candidate.address || candidate.ip);\n\t  sdp.push(candidate.port);\n\t\n\t  var type = candidate.type;\n\t  sdp.push('typ');\n\t  sdp.push(type);\n\t  if (type !== 'host' && candidate.relatedAddress &&\n\t      candidate.relatedPort) {\n\t    sdp.push('raddr');\n\t    sdp.push(candidate.relatedAddress);\n\t    sdp.push('rport');\n\t    sdp.push(candidate.relatedPort);\n\t  }\n\t  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n\t    sdp.push('tcptype');\n\t    sdp.push(candidate.tcpType);\n\t  }\n\t  if (candidate.usernameFragment || candidate.ufrag) {\n\t    sdp.push('ufrag');\n\t    sdp.push(candidate.usernameFragment || candidate.ufrag);\n\t  }\n\t  return 'candidate:' + sdp.join(' ');\n\t};\n\t\n\t// Parses an ice-options line, returns an array of option tags.\n\t// a=ice-options:foo bar\n\tSDPUtils.parseIceOptions = function(line) {\n\t  return line.substr(14).split(' ');\n\t};\n\t\n\t// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n\t// a=rtpmap:111 opus/48000/2\n\tSDPUtils.parseRtpMap = function(line) {\n\t  var parts = line.substr(9).split(' ');\n\t  var parsed = {\n\t    payloadType: parseInt(parts.shift(), 10) // was: id\n\t  };\n\t\n\t  parts = parts[0].split('/');\n\t\n\t  parsed.name = parts[0];\n\t  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n\t  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n\t  // legacy alias, got renamed back to channels in ORTC.\n\t  parsed.numChannels = parsed.channels;\n\t  return parsed;\n\t};\n\t\n\t// Generate an a=rtpmap line from RTCRtpCodecCapability or\n\t// RTCRtpCodecParameters.\n\tSDPUtils.writeRtpMap = function(codec) {\n\t  var pt = codec.payloadType;\n\t  if (codec.preferredPayloadType !== undefined) {\n\t    pt = codec.preferredPayloadType;\n\t  }\n\t  var channels = codec.channels || codec.numChannels || 1;\n\t  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n\t      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n\t};\n\t\n\t// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n\t// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n\t// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\n\tSDPUtils.parseExtmap = function(line) {\n\t  var parts = line.substr(9).split(' ');\n\t  return {\n\t    id: parseInt(parts[0], 10),\n\t    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n\t    uri: parts[1]\n\t  };\n\t};\n\t\n\t// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n\t// RTCRtpHeaderExtension.\n\tSDPUtils.writeExtmap = function(headerExtension) {\n\t  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n\t      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n\t          ? '/' + headerExtension.direction\n\t          : '') +\n\t      ' ' + headerExtension.uri + '\\r\\n';\n\t};\n\t\n\t// Parses an ftmp line, returns dictionary. Sample input:\n\t// a=fmtp:96 vbr=on;cng=on\n\t// Also deals with vbr=on; cng=on\n\tSDPUtils.parseFmtp = function(line) {\n\t  var parsed = {};\n\t  var kv;\n\t  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n\t  for (var j = 0; j < parts.length; j++) {\n\t    kv = parts[j].trim().split('=');\n\t    parsed[kv[0].trim()] = kv[1];\n\t  }\n\t  return parsed;\n\t};\n\t\n\t// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\n\tSDPUtils.writeFmtp = function(codec) {\n\t  var line = '';\n\t  var pt = codec.payloadType;\n\t  if (codec.preferredPayloadType !== undefined) {\n\t    pt = codec.preferredPayloadType;\n\t  }\n\t  if (codec.parameters && Object.keys(codec.parameters).length) {\n\t    var params = [];\n\t    Object.keys(codec.parameters).forEach(function(param) {\n\t      if (codec.parameters[param]) {\n\t        params.push(param + '=' + codec.parameters[param]);\n\t      } else {\n\t        params.push(param);\n\t      }\n\t    });\n\t    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n\t  }\n\t  return line;\n\t};\n\t\n\t// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n\t// a=rtcp-fb:98 nack rpsi\n\tSDPUtils.parseRtcpFb = function(line) {\n\t  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n\t  return {\n\t    type: parts.shift(),\n\t    parameter: parts.join(' ')\n\t  };\n\t};\n\t// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\n\tSDPUtils.writeRtcpFb = function(codec) {\n\t  var lines = '';\n\t  var pt = codec.payloadType;\n\t  if (codec.preferredPayloadType !== undefined) {\n\t    pt = codec.preferredPayloadType;\n\t  }\n\t  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n\t    // FIXME: special handling for trr-int?\n\t    codec.rtcpFeedback.forEach(function(fb) {\n\t      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n\t      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n\t          '\\r\\n';\n\t    });\n\t  }\n\t  return lines;\n\t};\n\t\n\t// Parses an RFC 5576 ssrc media attribute. Sample input:\n\t// a=ssrc:3735928559 cname:something\n\tSDPUtils.parseSsrcMedia = function(line) {\n\t  var sp = line.indexOf(' ');\n\t  var parts = {\n\t    ssrc: parseInt(line.substr(7, sp - 7), 10)\n\t  };\n\t  var colon = line.indexOf(':', sp);\n\t  if (colon > -1) {\n\t    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n\t    parts.value = line.substr(colon + 1);\n\t  } else {\n\t    parts.attribute = line.substr(sp + 1);\n\t  }\n\t  return parts;\n\t};\n\t\n\tSDPUtils.parseSsrcGroup = function(line) {\n\t  var parts = line.substr(13).split(' ');\n\t  return {\n\t    semantics: parts.shift(),\n\t    ssrcs: parts.map(function(ssrc) {\n\t      return parseInt(ssrc, 10);\n\t    })\n\t  };\n\t};\n\t\n\t// Extracts the MID (RFC 5888) from a media section.\n\t// returns the MID or undefined if no mid line was found.\n\tSDPUtils.getMid = function(mediaSection) {\n\t  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n\t  if (mid) {\n\t    return mid.substr(6);\n\t  }\n\t};\n\t\n\tSDPUtils.parseFingerprint = function(line) {\n\t  var parts = line.substr(14).split(' ');\n\t  return {\n\t    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n\t    value: parts[1]\n\t  };\n\t};\n\t\n\t// Extracts DTLS parameters from SDP media section or sessionpart.\n\t// FIXME: for consistency with other functions this should only\n\t//   get the fingerprint line as input. See also getIceParameters.\n\tSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n\t  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n\t      'a=fingerprint:');\n\t  // Note: a=setup line is ignored since we use the 'auto' role.\n\t  // Note2: 'algorithm' is not case sensitive except in Edge.\n\t  return {\n\t    role: 'auto',\n\t    fingerprints: lines.map(SDPUtils.parseFingerprint)\n\t  };\n\t};\n\t\n\t// Serializes DTLS parameters to SDP.\n\tSDPUtils.writeDtlsParameters = function(params, setupType) {\n\t  var sdp = 'a=setup:' + setupType + '\\r\\n';\n\t  params.fingerprints.forEach(function(fp) {\n\t    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n\t  });\n\t  return sdp;\n\t};\n\t// Parses ICE information from SDP media section or sessionpart.\n\t// FIXME: for consistency with other functions this should only\n\t//   get the ice-ufrag and ice-pwd lines as input.\n\tSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n\t  var lines = SDPUtils.splitLines(mediaSection);\n\t  // Search in session part, too.\n\t  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n\t  var iceParameters = {\n\t    usernameFragment: lines.filter(function(line) {\n\t      return line.indexOf('a=ice-ufrag:') === 0;\n\t    })[0].substr(12),\n\t    password: lines.filter(function(line) {\n\t      return line.indexOf('a=ice-pwd:') === 0;\n\t    })[0].substr(10)\n\t  };\n\t  return iceParameters;\n\t};\n\t\n\t// Serializes ICE parameters to SDP.\n\tSDPUtils.writeIceParameters = function(params) {\n\t  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n\t      'a=ice-pwd:' + params.password + '\\r\\n';\n\t};\n\t\n\t// Parses the SDP media section and returns RTCRtpParameters.\n\tSDPUtils.parseRtpParameters = function(mediaSection) {\n\t  var description = {\n\t    codecs: [],\n\t    headerExtensions: [],\n\t    fecMechanisms: [],\n\t    rtcp: []\n\t  };\n\t  var lines = SDPUtils.splitLines(mediaSection);\n\t  var mline = lines[0].split(' ');\n\t  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n\t    var pt = mline[i];\n\t    var rtpmapline = SDPUtils.matchPrefix(\n\t        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n\t    if (rtpmapline) {\n\t      var codec = SDPUtils.parseRtpMap(rtpmapline);\n\t      var fmtps = SDPUtils.matchPrefix(\n\t          mediaSection, 'a=fmtp:' + pt + ' ');\n\t      // Only the first a=fmtp:<pt> is considered.\n\t      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n\t      codec.rtcpFeedback = SDPUtils.matchPrefix(\n\t          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n\t        .map(SDPUtils.parseRtcpFb);\n\t      description.codecs.push(codec);\n\t      // parse FEC mechanisms from rtpmap lines.\n\t      switch (codec.name.toUpperCase()) {\n\t        case 'RED':\n\t        case 'ULPFEC':\n\t          description.fecMechanisms.push(codec.name.toUpperCase());\n\t          break;\n\t        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n\t          break;\n\t      }\n\t    }\n\t  }\n\t  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n\t    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n\t  });\n\t  // FIXME: parse rtcp.\n\t  return description;\n\t};\n\t\n\t// Generates parts of the SDP media section describing the capabilities /\n\t// parameters.\n\tSDPUtils.writeRtpDescription = function(kind, caps) {\n\t  var sdp = '';\n\t\n\t  // Build the mline.\n\t  sdp += 'm=' + kind + ' ';\n\t  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n\t  sdp += ' UDP/TLS/RTP/SAVPF ';\n\t  sdp += caps.codecs.map(function(codec) {\n\t    if (codec.preferredPayloadType !== undefined) {\n\t      return codec.preferredPayloadType;\n\t    }\n\t    return codec.payloadType;\n\t  }).join(' ') + '\\r\\n';\n\t\n\t  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n\t  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\t\n\t  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n\t  caps.codecs.forEach(function(codec) {\n\t    sdp += SDPUtils.writeRtpMap(codec);\n\t    sdp += SDPUtils.writeFmtp(codec);\n\t    sdp += SDPUtils.writeRtcpFb(codec);\n\t  });\n\t  var maxptime = 0;\n\t  caps.codecs.forEach(function(codec) {\n\t    if (codec.maxptime > maxptime) {\n\t      maxptime = codec.maxptime;\n\t    }\n\t  });\n\t  if (maxptime > 0) {\n\t    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n\t  }\n\t  sdp += 'a=rtcp-mux\\r\\n';\n\t\n\t  if (caps.headerExtensions) {\n\t    caps.headerExtensions.forEach(function(extension) {\n\t      sdp += SDPUtils.writeExtmap(extension);\n\t    });\n\t  }\n\t  // FIXME: write fecMechanisms.\n\t  return sdp;\n\t};\n\t\n\t// Parses the SDP media section and returns an array of\n\t// RTCRtpEncodingParameters.\n\tSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n\t  var encodingParameters = [];\n\t  var description = SDPUtils.parseRtpParameters(mediaSection);\n\t  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n\t  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\t\n\t  // filter a=ssrc:... cname:, ignore PlanB-msid\n\t  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n\t  .map(function(line) {\n\t    return SDPUtils.parseSsrcMedia(line);\n\t  })\n\t  .filter(function(parts) {\n\t    return parts.attribute === 'cname';\n\t  });\n\t  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n\t  var secondarySsrc;\n\t\n\t  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n\t  .map(function(line) {\n\t    var parts = line.substr(17).split(' ');\n\t    return parts.map(function(part) {\n\t      return parseInt(part, 10);\n\t    });\n\t  });\n\t  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n\t    secondarySsrc = flows[0][1];\n\t  }\n\t\n\t  description.codecs.forEach(function(codec) {\n\t    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n\t      var encParam = {\n\t        ssrc: primarySsrc,\n\t        codecPayloadType: parseInt(codec.parameters.apt, 10)\n\t      };\n\t      if (primarySsrc && secondarySsrc) {\n\t        encParam.rtx = {ssrc: secondarySsrc};\n\t      }\n\t      encodingParameters.push(encParam);\n\t      if (hasRed) {\n\t        encParam = JSON.parse(JSON.stringify(encParam));\n\t        encParam.fec = {\n\t          ssrc: primarySsrc,\n\t          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n\t        };\n\t        encodingParameters.push(encParam);\n\t      }\n\t    }\n\t  });\n\t  if (encodingParameters.length === 0 && primarySsrc) {\n\t    encodingParameters.push({\n\t      ssrc: primarySsrc\n\t    });\n\t  }\n\t\n\t  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n\t  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n\t  if (bandwidth.length) {\n\t    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n\t      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n\t    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n\t      // use formula from JSEP to convert b=AS to TIAS value.\n\t      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n\t          - (50 * 40 * 8);\n\t    } else {\n\t      bandwidth = undefined;\n\t    }\n\t    encodingParameters.forEach(function(params) {\n\t      params.maxBitrate = bandwidth;\n\t    });\n\t  }\n\t  return encodingParameters;\n\t};\n\t\n\t// parses http://draft.ortc.org/#rtcrtcpparameters*\n\tSDPUtils.parseRtcpParameters = function(mediaSection) {\n\t  var rtcpParameters = {};\n\t\n\t  // Gets the first SSRC. Note tha with RTX there might be multiple\n\t  // SSRCs.\n\t  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n\t      .map(function(line) {\n\t        return SDPUtils.parseSsrcMedia(line);\n\t      })\n\t      .filter(function(obj) {\n\t        return obj.attribute === 'cname';\n\t      })[0];\n\t  if (remoteSsrc) {\n\t    rtcpParameters.cname = remoteSsrc.value;\n\t    rtcpParameters.ssrc = remoteSsrc.ssrc;\n\t  }\n\t\n\t  // Edge uses the compound attribute instead of reducedSize\n\t  // compound is !reducedSize\n\t  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n\t  rtcpParameters.reducedSize = rsize.length > 0;\n\t  rtcpParameters.compound = rsize.length === 0;\n\t\n\t  // parses the rtcp-mux attrіbute.\n\t  // Note that Edge does not support unmuxed RTCP.\n\t  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n\t  rtcpParameters.mux = mux.length > 0;\n\t\n\t  return rtcpParameters;\n\t};\n\t\n\t// parses either a=msid: or a=ssrc:... msid lines and returns\n\t// the id of the MediaStream and MediaStreamTrack.\n\tSDPUtils.parseMsid = function(mediaSection) {\n\t  var parts;\n\t  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n\t  if (spec.length === 1) {\n\t    parts = spec[0].substr(7).split(' ');\n\t    return {stream: parts[0], track: parts[1]};\n\t  }\n\t  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n\t  .map(function(line) {\n\t    return SDPUtils.parseSsrcMedia(line);\n\t  })\n\t  .filter(function(msidParts) {\n\t    return msidParts.attribute === 'msid';\n\t  });\n\t  if (planB.length > 0) {\n\t    parts = planB[0].value.split(' ');\n\t    return {stream: parts[0], track: parts[1]};\n\t  }\n\t};\n\t\n\t// Generate a session ID for SDP.\n\t// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n\t// recommends using a cryptographically random +ve 64-bit value\n\t// but right now this should be acceptable and within the right range\n\tSDPUtils.generateSessionId = function() {\n\t  return Math.random().toString().substr(2, 21);\n\t};\n\t\n\t// Write boilder plate for start of SDP\n\t// sessId argument is optional - if not supplied it will\n\t// be generated randomly\n\t// sessVersion is optional and defaults to 2\n\t// sessUser is optional and defaults to 'thisisadapterortc'\n\tSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n\t  var sessionId;\n\t  var version = sessVer !== undefined ? sessVer : 2;\n\t  if (sessId) {\n\t    sessionId = sessId;\n\t  } else {\n\t    sessionId = SDPUtils.generateSessionId();\n\t  }\n\t  var user = sessUser || 'thisisadapterortc';\n\t  // FIXME: sess-id should be an NTP timestamp.\n\t  return 'v=0\\r\\n' +\n\t      'o=' + user + ' ' + sessionId + ' ' + version +\n\t        ' IN IP4 127.0.0.1\\r\\n' +\n\t      's=-\\r\\n' +\n\t      't=0 0\\r\\n';\n\t};\n\t\n\tSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n\t  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\t\n\t  // Map ICE parameters (ufrag, pwd) to SDP.\n\t  sdp += SDPUtils.writeIceParameters(\n\t      transceiver.iceGatherer.getLocalParameters());\n\t\n\t  // Map DTLS parameters to SDP.\n\t  sdp += SDPUtils.writeDtlsParameters(\n\t      transceiver.dtlsTransport.getLocalParameters(),\n\t      type === 'offer' ? 'actpass' : 'active');\n\t\n\t  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\t\n\t  if (transceiver.direction) {\n\t    sdp += 'a=' + transceiver.direction + '\\r\\n';\n\t  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n\t    sdp += 'a=sendrecv\\r\\n';\n\t  } else if (transceiver.rtpSender) {\n\t    sdp += 'a=sendonly\\r\\n';\n\t  } else if (transceiver.rtpReceiver) {\n\t    sdp += 'a=recvonly\\r\\n';\n\t  } else {\n\t    sdp += 'a=inactive\\r\\n';\n\t  }\n\t\n\t  if (transceiver.rtpSender) {\n\t    // spec.\n\t    var msid = 'msid:' + stream.id + ' ' +\n\t        transceiver.rtpSender.track.id + '\\r\\n';\n\t    sdp += 'a=' + msid;\n\t\n\t    // for Chrome.\n\t    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n\t        ' ' + msid;\n\t    if (transceiver.sendEncodingParameters[0].rtx) {\n\t      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n\t          ' ' + msid;\n\t      sdp += 'a=ssrc-group:FID ' +\n\t          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n\t          transceiver.sendEncodingParameters[0].rtx.ssrc +\n\t          '\\r\\n';\n\t    }\n\t  }\n\t  // FIXME: this should be written by writeRtpDescription.\n\t  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n\t      ' cname:' + SDPUtils.localCName + '\\r\\n';\n\t  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n\t    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n\t        ' cname:' + SDPUtils.localCName + '\\r\\n';\n\t  }\n\t  return sdp;\n\t};\n\t\n\t// Gets the direction from the mediaSection or the sessionpart.\n\tSDPUtils.getDirection = function(mediaSection, sessionpart) {\n\t  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n\t  var lines = SDPUtils.splitLines(mediaSection);\n\t  for (var i = 0; i < lines.length; i++) {\n\t    switch (lines[i]) {\n\t      case 'a=sendrecv':\n\t      case 'a=sendonly':\n\t      case 'a=recvonly':\n\t      case 'a=inactive':\n\t        return lines[i].substr(2);\n\t      default:\n\t        // FIXME: What should happen here?\n\t    }\n\t  }\n\t  if (sessionpart) {\n\t    return SDPUtils.getDirection(sessionpart);\n\t  }\n\t  return 'sendrecv';\n\t};\n\t\n\tSDPUtils.getKind = function(mediaSection) {\n\t  var lines = SDPUtils.splitLines(mediaSection);\n\t  var mline = lines[0].split(' ');\n\t  return mline[0].substr(2);\n\t};\n\t\n\tSDPUtils.isRejected = function(mediaSection) {\n\t  return mediaSection.split(' ', 2)[1] === '0';\n\t};\n\t\n\tSDPUtils.parseMLine = function(mediaSection) {\n\t  var lines = SDPUtils.splitLines(mediaSection);\n\t  var parts = lines[0].substr(2).split(' ');\n\t  return {\n\t    kind: parts[0],\n\t    port: parseInt(parts[1], 10),\n\t    protocol: parts[2],\n\t    fmt: parts.slice(3).join(' ')\n\t  };\n\t};\n\t\n\tSDPUtils.parseOLine = function(mediaSection) {\n\t  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n\t  var parts = line.substr(2).split(' ');\n\t  return {\n\t    username: parts[0],\n\t    sessionId: parts[1],\n\t    sessionVersion: parseInt(parts[2], 10),\n\t    netType: parts[3],\n\t    addressType: parts[4],\n\t    address: parts[5]\n\t  };\n\t};\n\t\n\t// a very naive interpretation of a valid SDP.\n\tSDPUtils.isValidSDP = function(blob) {\n\t  if (typeof blob !== 'string' || blob.length === 0) {\n\t    return false;\n\t  }\n\t  var lines = SDPUtils.splitLines(blob);\n\t  for (var i = 0; i < lines.length; i++) {\n\t    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n\t      return false;\n\t    }\n\t    // TODO: check the modifier a bit more.\n\t  }\n\t  return true;\n\t};\n\t\n\t// Expose public methods.\n\tif (true) {\n\t  module.exports = SDPUtils;\n\t}\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\n\t/*\n\t *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t'use strict';\n\t\n\t// Expose public methods.\n\tmodule.exports = function(window) {\n\t  var navigator = window && window.navigator;\n\t\n\t  var shimError_ = function(e) {\n\t    return {\n\t      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n\t      message: e.message,\n\t      constraint: e.constraint,\n\t      toString: function() {\n\t        return this.name;\n\t      }\n\t    };\n\t  };\n\t\n\t  // getUserMedia error shim.\n\t  var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n\t      bind(navigator.mediaDevices);\n\t  navigator.mediaDevices.getUserMedia = function(c) {\n\t    return origGetUserMedia(c).catch(function(e) {\n\t      return Promise.reject(shimError_(e));\n\t    });\n\t  };\n\t};\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(14);\n\t\n\tmodule.exports = {\n\t  shimGetUserMedia: __webpack_require__(23),\n\t  shimOnTrack: function(window) {\n\t    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n\t        window.RTCPeerConnection.prototype)) {\n\t      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n\t        get: function() {\n\t          return this._ontrack;\n\t        },\n\t        set: function(f) {\n\t          if (this._ontrack) {\n\t            this.removeEventListener('track', this._ontrack);\n\t            this.removeEventListener('addstream', this._ontrackpoly);\n\t          }\n\t          this.addEventListener('track', this._ontrack = f);\n\t          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n\t            e.stream.getTracks().forEach(function(track) {\n\t              var event = new Event('track');\n\t              event.track = track;\n\t              event.receiver = {track: track};\n\t              event.transceiver = {receiver: event.receiver};\n\t              event.streams = [e.stream];\n\t              this.dispatchEvent(event);\n\t            }.bind(this));\n\t          }.bind(this));\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t      });\n\t    }\n\t    if (typeof window === 'object' && window.RTCTrackEvent &&\n\t        ('receiver' in window.RTCTrackEvent.prototype) &&\n\t        !('transceiver' in window.RTCTrackEvent.prototype)) {\n\t      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n\t        get: function() {\n\t          return {receiver: this.receiver};\n\t        }\n\t      });\n\t    }\n\t  },\n\t\n\t  shimSourceObject: function(window) {\n\t    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n\t    if (typeof window === 'object') {\n\t      if (window.HTMLMediaElement &&\n\t        !('srcObject' in window.HTMLMediaElement.prototype)) {\n\t        // Shim the srcObject property, once, when HTMLMediaElement is found.\n\t        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n\t          get: function() {\n\t            return this.mozSrcObject;\n\t          },\n\t          set: function(stream) {\n\t            this.mozSrcObject = stream;\n\t          }\n\t        });\n\t      }\n\t    }\n\t  },\n\t\n\t  shimPeerConnection: function(window) {\n\t    var browserDetails = utils.detectBrowser(window);\n\t\n\t    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n\t        window.mozRTCPeerConnection)) {\n\t      return; // probably media.peerconnection.enabled=false in about:config\n\t    }\n\t    // The RTCPeerConnection object.\n\t    if (!window.RTCPeerConnection) {\n\t      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n\t        if (browserDetails.version < 38) {\n\t          // .urls is not supported in FF < 38.\n\t          // create RTCIceServers with a single url.\n\t          if (pcConfig && pcConfig.iceServers) {\n\t            var newIceServers = [];\n\t            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n\t              var server = pcConfig.iceServers[i];\n\t              if (server.hasOwnProperty('urls')) {\n\t                for (var j = 0; j < server.urls.length; j++) {\n\t                  var newServer = {\n\t                    url: server.urls[j]\n\t                  };\n\t                  if (server.urls[j].indexOf('turn') === 0) {\n\t                    newServer.username = server.username;\n\t                    newServer.credential = server.credential;\n\t                  }\n\t                  newIceServers.push(newServer);\n\t                }\n\t              } else {\n\t                newIceServers.push(pcConfig.iceServers[i]);\n\t              }\n\t            }\n\t            pcConfig.iceServers = newIceServers;\n\t          }\n\t        }\n\t        return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n\t      };\n\t      window.RTCPeerConnection.prototype =\n\t          window.mozRTCPeerConnection.prototype;\n\t\n\t      // wrap static methods. Currently just generateCertificate.\n\t      if (window.mozRTCPeerConnection.generateCertificate) {\n\t        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n\t          get: function() {\n\t            return window.mozRTCPeerConnection.generateCertificate;\n\t          }\n\t        });\n\t      }\n\t\n\t      window.RTCSessionDescription = window.mozRTCSessionDescription;\n\t      window.RTCIceCandidate = window.mozRTCIceCandidate;\n\t    }\n\t\n\t    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n\t    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n\t        .forEach(function(method) {\n\t          var nativeMethod = window.RTCPeerConnection.prototype[method];\n\t          window.RTCPeerConnection.prototype[method] = function() {\n\t            arguments[0] = new ((method === 'addIceCandidate') ?\n\t                window.RTCIceCandidate :\n\t                window.RTCSessionDescription)(arguments[0]);\n\t            return nativeMethod.apply(this, arguments);\n\t          };\n\t        });\n\t\n\t    // support for addIceCandidate(null or undefined)\n\t    var nativeAddIceCandidate =\n\t        window.RTCPeerConnection.prototype.addIceCandidate;\n\t    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n\t      if (!arguments[0]) {\n\t        if (arguments[1]) {\n\t          arguments[1].apply(null);\n\t        }\n\t        return Promise.resolve();\n\t      }\n\t      return nativeAddIceCandidate.apply(this, arguments);\n\t    };\n\t\n\t    // shim getStats with maplike support\n\t    var makeMapStats = function(stats) {\n\t      var map = new Map();\n\t      Object.keys(stats).forEach(function(key) {\n\t        map.set(key, stats[key]);\n\t        map[key] = stats[key];\n\t      });\n\t      return map;\n\t    };\n\t\n\t    var modernStatsTypes = {\n\t      inboundrtp: 'inbound-rtp',\n\t      outboundrtp: 'outbound-rtp',\n\t      candidatepair: 'candidate-pair',\n\t      localcandidate: 'local-candidate',\n\t      remotecandidate: 'remote-candidate'\n\t    };\n\t\n\t    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n\t    window.RTCPeerConnection.prototype.getStats = function(\n\t      selector,\n\t      onSucc,\n\t      onErr\n\t    ) {\n\t      return nativeGetStats.apply(this, [selector || null])\n\t        .then(function(stats) {\n\t          if (browserDetails.version < 48) {\n\t            stats = makeMapStats(stats);\n\t          }\n\t          if (browserDetails.version < 53 && !onSucc) {\n\t            // Shim only promise getStats with spec-hyphens in type names\n\t            // Leave callback version alone; misc old uses of forEach before Map\n\t            try {\n\t              stats.forEach(function(stat) {\n\t                stat.type = modernStatsTypes[stat.type] || stat.type;\n\t              });\n\t            } catch (e) {\n\t              if (e.name !== 'TypeError') {\n\t                throw e;\n\t              }\n\t              // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n\t              stats.forEach(function(stat, i) {\n\t                stats.set(i, Object.assign({}, stat, {\n\t                  type: modernStatsTypes[stat.type] || stat.type\n\t                }));\n\t              });\n\t            }\n\t          }\n\t          return stats;\n\t        })\n\t        .then(onSucc, onErr);\n\t    };\n\t  },\n\t\n\t  shimSenderGetStats: function(window) {\n\t    if (!(typeof window === 'object' && window.RTCPeerConnection &&\n\t        window.RTCRtpSender)) {\n\t      return;\n\t    }\n\t    if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n\t      return;\n\t    }\n\t    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n\t    if (origGetSenders) {\n\t      window.RTCPeerConnection.prototype.getSenders = function() {\n\t        var pc = this;\n\t        var senders = origGetSenders.apply(pc, []);\n\t        senders.forEach(function(sender) {\n\t          sender._pc = pc;\n\t        });\n\t        return senders;\n\t      };\n\t    }\n\t\n\t    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n\t    if (origAddTrack) {\n\t      window.RTCPeerConnection.prototype.addTrack = function() {\n\t        var sender = origAddTrack.apply(this, arguments);\n\t        sender._pc = this;\n\t        return sender;\n\t      };\n\t    }\n\t    window.RTCRtpSender.prototype.getStats = function() {\n\t      return this.track ? this._pc.getStats(this.track) :\n\t          Promise.resolve(new Map());\n\t    };\n\t  },\n\t\n\t  shimReceiverGetStats: function(window) {\n\t    if (!(typeof window === 'object' && window.RTCPeerConnection &&\n\t        window.RTCRtpSender)) {\n\t      return;\n\t    }\n\t    if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n\t      return;\n\t    }\n\t    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n\t    if (origGetReceivers) {\n\t      window.RTCPeerConnection.prototype.getReceivers = function() {\n\t        var pc = this;\n\t        var receivers = origGetReceivers.apply(pc, []);\n\t        receivers.forEach(function(receiver) {\n\t          receiver._pc = pc;\n\t        });\n\t        return receivers;\n\t      };\n\t    }\n\t    utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n\t      e.receiver._pc = e.srcElement;\n\t      return e;\n\t    });\n\t    window.RTCRtpReceiver.prototype.getStats = function() {\n\t      return this._pc.getStats(this.track);\n\t    };\n\t  },\n\t\n\t  shimRemoveStream: function(window) {\n\t    if (!window.RTCPeerConnection ||\n\t        'removeStream' in window.RTCPeerConnection.prototype) {\n\t      return;\n\t    }\n\t    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n\t      var pc = this;\n\t      utils.deprecated('removeStream', 'removeTrack');\n\t      this.getSenders().forEach(function(sender) {\n\t        if (sender.track && stream.getTracks().indexOf(sender.track) !== -1) {\n\t          pc.removeTrack(sender);\n\t        }\n\t      });\n\t    };\n\t  },\n\t\n\t  shimRTCDataChannel: function(window) {\n\t    // rename DataChannel to RTCDataChannel (native fix in FF60):\n\t    // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n\t    if (window.DataChannel && !window.RTCDataChannel) {\n\t      window.RTCDataChannel = window.DataChannel;\n\t    }\n\t  },\n\t\n\t  shimGetDisplayMedia: function(window, preferredMediaSource) {\n\t    if ('getDisplayMedia' in window.navigator) {\n\t      return;\n\t    }\n\t    navigator.getDisplayMedia = function(constraints) {\n\t      if (!(constraints && constraints.video)) {\n\t        var err = new DOMException('getDisplayMedia without video ' +\n\t            'constraints is undefined');\n\t        err.name = 'NotFoundError';\n\t        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n\t        err.code = 8;\n\t        return Promise.reject(err);\n\t      }\n\t      if (constraints.video === true) {\n\t        constraints.video = {mediaSource: preferredMediaSource};\n\t      } else {\n\t        constraints.video.mediaSource = preferredMediaSource;\n\t      }\n\t      return navigator.mediaDevices.getUserMedia(constraints);\n\t    };\n\t  }\n\t};\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(14);\n\tvar logging = utils.log;\n\t\n\t// Expose public methods.\n\tmodule.exports = function(window) {\n\t  var browserDetails = utils.detectBrowser(window);\n\t  var navigator = window && window.navigator;\n\t  var MediaStreamTrack = window && window.MediaStreamTrack;\n\t\n\t  var shimError_ = function(e) {\n\t    return {\n\t      name: {\n\t        InternalError: 'NotReadableError',\n\t        NotSupportedError: 'TypeError',\n\t        PermissionDeniedError: 'NotAllowedError',\n\t        SecurityError: 'NotAllowedError'\n\t      }[e.name] || e.name,\n\t      message: {\n\t        'The operation is insecure.': 'The request is not allowed by the ' +\n\t        'user agent or the platform in the current context.'\n\t      }[e.message] || e.message,\n\t      constraint: e.constraint,\n\t      toString: function() {\n\t        return this.name + (this.message && ': ') + this.message;\n\t      }\n\t    };\n\t  };\n\t\n\t  // getUserMedia constraints shim.\n\t  var getUserMedia_ = function(constraints, onSuccess, onError) {\n\t    var constraintsToFF37_ = function(c) {\n\t      if (typeof c !== 'object' || c.require) {\n\t        return c;\n\t      }\n\t      var require = [];\n\t      Object.keys(c).forEach(function(key) {\n\t        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n\t          return;\n\t        }\n\t        var r = c[key] = (typeof c[key] === 'object') ?\n\t            c[key] : {ideal: c[key]};\n\t        if (r.min !== undefined ||\n\t            r.max !== undefined || r.exact !== undefined) {\n\t          require.push(key);\n\t        }\n\t        if (r.exact !== undefined) {\n\t          if (typeof r.exact === 'number') {\n\t            r. min = r.max = r.exact;\n\t          } else {\n\t            c[key] = r.exact;\n\t          }\n\t          delete r.exact;\n\t        }\n\t        if (r.ideal !== undefined) {\n\t          c.advanced = c.advanced || [];\n\t          var oc = {};\n\t          if (typeof r.ideal === 'number') {\n\t            oc[key] = {min: r.ideal, max: r.ideal};\n\t          } else {\n\t            oc[key] = r.ideal;\n\t          }\n\t          c.advanced.push(oc);\n\t          delete r.ideal;\n\t          if (!Object.keys(r).length) {\n\t            delete c[key];\n\t          }\n\t        }\n\t      });\n\t      if (require.length) {\n\t        c.require = require;\n\t      }\n\t      return c;\n\t    };\n\t    constraints = JSON.parse(JSON.stringify(constraints));\n\t    if (browserDetails.version < 38) {\n\t      logging('spec: ' + JSON.stringify(constraints));\n\t      if (constraints.audio) {\n\t        constraints.audio = constraintsToFF37_(constraints.audio);\n\t      }\n\t      if (constraints.video) {\n\t        constraints.video = constraintsToFF37_(constraints.video);\n\t      }\n\t      logging('ff37: ' + JSON.stringify(constraints));\n\t    }\n\t    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n\t      onError(shimError_(e));\n\t    });\n\t  };\n\t\n\t  // Returns the result of getUserMedia as a Promise.\n\t  var getUserMediaPromise_ = function(constraints) {\n\t    return new Promise(function(resolve, reject) {\n\t      getUserMedia_(constraints, resolve, reject);\n\t    });\n\t  };\n\t\n\t  // Shim for mediaDevices on older versions.\n\t  if (!navigator.mediaDevices) {\n\t    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n\t      addEventListener: function() { },\n\t      removeEventListener: function() { }\n\t    };\n\t  }\n\t  navigator.mediaDevices.enumerateDevices =\n\t      navigator.mediaDevices.enumerateDevices || function() {\n\t        return new Promise(function(resolve) {\n\t          var infos = [\n\t            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n\t            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n\t          ];\n\t          resolve(infos);\n\t        });\n\t      };\n\t\n\t  if (browserDetails.version < 41) {\n\t    // Work around http://bugzil.la/1169665\n\t    var orgEnumerateDevices =\n\t        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n\t    navigator.mediaDevices.enumerateDevices = function() {\n\t      return orgEnumerateDevices().then(undefined, function(e) {\n\t        if (e.name === 'NotFoundError') {\n\t          return [];\n\t        }\n\t        throw e;\n\t      });\n\t    };\n\t  }\n\t  if (browserDetails.version < 49) {\n\t    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n\t        bind(navigator.mediaDevices);\n\t    navigator.mediaDevices.getUserMedia = function(c) {\n\t      return origGetUserMedia(c).then(function(stream) {\n\t        // Work around https://bugzil.la/802326\n\t        if (c.audio && !stream.getAudioTracks().length ||\n\t            c.video && !stream.getVideoTracks().length) {\n\t          stream.getTracks().forEach(function(track) {\n\t            track.stop();\n\t          });\n\t          throw new DOMException('The object can not be found here.',\n\t                                 'NotFoundError');\n\t        }\n\t        return stream;\n\t      }, function(e) {\n\t        return Promise.reject(shimError_(e));\n\t      });\n\t    };\n\t  }\n\t  if (!(browserDetails.version > 55 &&\n\t      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n\t    var remap = function(obj, a, b) {\n\t      if (a in obj && !(b in obj)) {\n\t        obj[b] = obj[a];\n\t        delete obj[a];\n\t      }\n\t    };\n\t\n\t    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n\t        bind(navigator.mediaDevices);\n\t    navigator.mediaDevices.getUserMedia = function(c) {\n\t      if (typeof c === 'object' && typeof c.audio === 'object') {\n\t        c = JSON.parse(JSON.stringify(c));\n\t        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n\t        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n\t      }\n\t      return nativeGetUserMedia(c);\n\t    };\n\t\n\t    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n\t      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n\t      MediaStreamTrack.prototype.getSettings = function() {\n\t        var obj = nativeGetSettings.apply(this, arguments);\n\t        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n\t        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n\t        return obj;\n\t      };\n\t    }\n\t\n\t    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n\t      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n\t      MediaStreamTrack.prototype.applyConstraints = function(c) {\n\t        if (this.kind === 'audio' && typeof c === 'object') {\n\t          c = JSON.parse(JSON.stringify(c));\n\t          remap(c, 'autoGainControl', 'mozAutoGainControl');\n\t          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n\t        }\n\t        return nativeApplyConstraints.apply(this, [c]);\n\t      };\n\t    }\n\t  }\n\t  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n\t    if (browserDetails.version < 44) {\n\t      return getUserMedia_(constraints, onSuccess, onError);\n\t    }\n\t    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n\t    utils.deprecated('navigator.getUserMedia',\n\t        'navigator.mediaDevices.getUserMedia');\n\t    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n\t  };\n\t};\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t'use strict';\n\tvar utils = __webpack_require__(14);\n\t\n\tmodule.exports = {\n\t  shimLocalStreamsAPI: function(window) {\n\t    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n\t      return;\n\t    }\n\t    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n\t      window.RTCPeerConnection.prototype.getLocalStreams = function() {\n\t        if (!this._localStreams) {\n\t          this._localStreams = [];\n\t        }\n\t        return this._localStreams;\n\t      };\n\t    }\n\t    if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\n\t      window.RTCPeerConnection.prototype.getStreamById = function(id) {\n\t        var result = null;\n\t        if (this._localStreams) {\n\t          this._localStreams.forEach(function(stream) {\n\t            if (stream.id === id) {\n\t              result = stream;\n\t            }\n\t          });\n\t        }\n\t        if (this._remoteStreams) {\n\t          this._remoteStreams.forEach(function(stream) {\n\t            if (stream.id === id) {\n\t              result = stream;\n\t            }\n\t          });\n\t        }\n\t        return result;\n\t      };\n\t    }\n\t    if (!('addStream' in window.RTCPeerConnection.prototype)) {\n\t      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n\t      window.RTCPeerConnection.prototype.addStream = function(stream) {\n\t        if (!this._localStreams) {\n\t          this._localStreams = [];\n\t        }\n\t        if (this._localStreams.indexOf(stream) === -1) {\n\t          this._localStreams.push(stream);\n\t        }\n\t        var pc = this;\n\t        stream.getTracks().forEach(function(track) {\n\t          _addTrack.call(pc, track, stream);\n\t        });\n\t      };\n\t\n\t      window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n\t        if (stream) {\n\t          if (!this._localStreams) {\n\t            this._localStreams = [stream];\n\t          } else if (this._localStreams.indexOf(stream) === -1) {\n\t            this._localStreams.push(stream);\n\t          }\n\t        }\n\t        return _addTrack.call(this, track, stream);\n\t      };\n\t    }\n\t    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n\t      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n\t        if (!this._localStreams) {\n\t          this._localStreams = [];\n\t        }\n\t        var index = this._localStreams.indexOf(stream);\n\t        if (index === -1) {\n\t          return;\n\t        }\n\t        this._localStreams.splice(index, 1);\n\t        var pc = this;\n\t        var tracks = stream.getTracks();\n\t        this.getSenders().forEach(function(sender) {\n\t          if (tracks.indexOf(sender.track) !== -1) {\n\t            pc.removeTrack(sender);\n\t          }\n\t        });\n\t      };\n\t    }\n\t  },\n\t  shimRemoteStreamsAPI: function(window) {\n\t    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n\t      return;\n\t    }\n\t    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n\t      window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n\t        return this._remoteStreams ? this._remoteStreams : [];\n\t      };\n\t    }\n\t    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n\t      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n\t        get: function() {\n\t          return this._onaddstream;\n\t        },\n\t        set: function(f) {\n\t          if (this._onaddstream) {\n\t            this.removeEventListener('addstream', this._onaddstream);\n\t          }\n\t          this.addEventListener('addstream', this._onaddstream = f);\n\t        }\n\t      });\n\t      var origSetRemoteDescription =\n\t          window.RTCPeerConnection.prototype.setRemoteDescription;\n\t      window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n\t        var pc = this;\n\t        if (!this._onaddstreampoly) {\n\t          this.addEventListener('track', this._onaddstreampoly = function(e) {\n\t            e.streams.forEach(function(stream) {\n\t              if (!pc._remoteStreams) {\n\t                pc._remoteStreams = [];\n\t              }\n\t              if (pc._remoteStreams.indexOf(stream) >= 0) {\n\t                return;\n\t              }\n\t              pc._remoteStreams.push(stream);\n\t              var event = new Event('addstream');\n\t              event.stream = stream;\n\t              pc.dispatchEvent(event);\n\t            });\n\t          });\n\t        }\n\t        return origSetRemoteDescription.apply(pc, arguments);\n\t      };\n\t    }\n\t  },\n\t  shimCallbacksAPI: function(window) {\n\t    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n\t      return;\n\t    }\n\t    var prototype = window.RTCPeerConnection.prototype;\n\t    var createOffer = prototype.createOffer;\n\t    var createAnswer = prototype.createAnswer;\n\t    var setLocalDescription = prototype.setLocalDescription;\n\t    var setRemoteDescription = prototype.setRemoteDescription;\n\t    var addIceCandidate = prototype.addIceCandidate;\n\t\n\t    prototype.createOffer = function(successCallback, failureCallback) {\n\t      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n\t      var promise = createOffer.apply(this, [options]);\n\t      if (!failureCallback) {\n\t        return promise;\n\t      }\n\t      promise.then(successCallback, failureCallback);\n\t      return Promise.resolve();\n\t    };\n\t\n\t    prototype.createAnswer = function(successCallback, failureCallback) {\n\t      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n\t      var promise = createAnswer.apply(this, [options]);\n\t      if (!failureCallback) {\n\t        return promise;\n\t      }\n\t      promise.then(successCallback, failureCallback);\n\t      return Promise.resolve();\n\t    };\n\t\n\t    var withCallback = function(description, successCallback, failureCallback) {\n\t      var promise = setLocalDescription.apply(this, [description]);\n\t      if (!failureCallback) {\n\t        return promise;\n\t      }\n\t      promise.then(successCallback, failureCallback);\n\t      return Promise.resolve();\n\t    };\n\t    prototype.setLocalDescription = withCallback;\n\t\n\t    withCallback = function(description, successCallback, failureCallback) {\n\t      var promise = setRemoteDescription.apply(this, [description]);\n\t      if (!failureCallback) {\n\t        return promise;\n\t      }\n\t      promise.then(successCallback, failureCallback);\n\t      return Promise.resolve();\n\t    };\n\t    prototype.setRemoteDescription = withCallback;\n\t\n\t    withCallback = function(candidate, successCallback, failureCallback) {\n\t      var promise = addIceCandidate.apply(this, [candidate]);\n\t      if (!failureCallback) {\n\t        return promise;\n\t      }\n\t      promise.then(successCallback, failureCallback);\n\t      return Promise.resolve();\n\t    };\n\t    prototype.addIceCandidate = withCallback;\n\t  },\n\t  shimGetUserMedia: function(window) {\n\t    var navigator = window && window.navigator;\n\t\n\t    if (!navigator.getUserMedia) {\n\t      if (navigator.webkitGetUserMedia) {\n\t        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n\t      } else if (navigator.mediaDevices &&\n\t          navigator.mediaDevices.getUserMedia) {\n\t        navigator.getUserMedia = function(constraints, cb, errcb) {\n\t          navigator.mediaDevices.getUserMedia(constraints)\n\t          .then(cb, errcb);\n\t        }.bind(navigator);\n\t      }\n\t    }\n\t  },\n\t  shimRTCIceServerUrls: function(window) {\n\t    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n\t    var OrigPeerConnection = window.RTCPeerConnection;\n\t    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n\t      if (pcConfig && pcConfig.iceServers) {\n\t        var newIceServers = [];\n\t        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n\t          var server = pcConfig.iceServers[i];\n\t          if (!server.hasOwnProperty('urls') &&\n\t              server.hasOwnProperty('url')) {\n\t            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n\t            server = JSON.parse(JSON.stringify(server));\n\t            server.urls = server.url;\n\t            delete server.url;\n\t            newIceServers.push(server);\n\t          } else {\n\t            newIceServers.push(pcConfig.iceServers[i]);\n\t          }\n\t        }\n\t        pcConfig.iceServers = newIceServers;\n\t      }\n\t      return new OrigPeerConnection(pcConfig, pcConstraints);\n\t    };\n\t    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n\t    // wrap static methods. Currently just generateCertificate.\n\t    if ('generateCertificate' in window.RTCPeerConnection) {\n\t      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n\t        get: function() {\n\t          return OrigPeerConnection.generateCertificate;\n\t        }\n\t      });\n\t    }\n\t  },\n\t  shimTrackEventTransceiver: function(window) {\n\t    // Add event.transceiver member over deprecated event.receiver\n\t    if (typeof window === 'object' && window.RTCPeerConnection &&\n\t        ('receiver' in window.RTCTrackEvent.prototype) &&\n\t        // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n\t        // defined for some reason even when window.RTCTransceiver is not.\n\t        !window.RTCTransceiver) {\n\t      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n\t        get: function() {\n\t          return {receiver: this.receiver};\n\t        }\n\t      });\n\t    }\n\t  },\n\t\n\t  shimCreateOfferLegacy: function(window) {\n\t    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n\t    window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\n\t      var pc = this;\n\t      if (offerOptions) {\n\t        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n\t          // support bit values\n\t          offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n\t        }\n\t        var audioTransceiver = pc.getTransceivers().find(function(transceiver) {\n\t          return transceiver.sender.track &&\n\t              transceiver.sender.track.kind === 'audio';\n\t        });\n\t        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n\t          if (audioTransceiver.direction === 'sendrecv') {\n\t            if (audioTransceiver.setDirection) {\n\t              audioTransceiver.setDirection('sendonly');\n\t            } else {\n\t              audioTransceiver.direction = 'sendonly';\n\t            }\n\t          } else if (audioTransceiver.direction === 'recvonly') {\n\t            if (audioTransceiver.setDirection) {\n\t              audioTransceiver.setDirection('inactive');\n\t            } else {\n\t              audioTransceiver.direction = 'inactive';\n\t            }\n\t          }\n\t        } else if (offerOptions.offerToReceiveAudio === true &&\n\t            !audioTransceiver) {\n\t          pc.addTransceiver('audio');\n\t        }\n\t\n\t\n\t        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n\t          // support bit values\n\t          offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n\t        }\n\t        var videoTransceiver = pc.getTransceivers().find(function(transceiver) {\n\t          return transceiver.sender.track &&\n\t              transceiver.sender.track.kind === 'video';\n\t        });\n\t        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n\t          if (videoTransceiver.direction === 'sendrecv') {\n\t            videoTransceiver.setDirection('sendonly');\n\t          } else if (videoTransceiver.direction === 'recvonly') {\n\t            videoTransceiver.setDirection('inactive');\n\t          }\n\t        } else if (offerOptions.offerToReceiveVideo === true &&\n\t            !videoTransceiver) {\n\t          pc.addTransceiver('video');\n\t        }\n\t      }\n\t      return origCreateOffer.apply(pc, arguments);\n\t    };\n\t  }\n\t};\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n\t *\n\t *  Use of this source code is governed by a BSD-style license\n\t *  that can be found in the LICENSE file in the root of the source\n\t *  tree.\n\t */\n\t /* eslint-env node */\n\t'use strict';\n\t\n\tvar SDPUtils = __webpack_require__(20);\n\tvar utils = __webpack_require__(14);\n\t\n\tmodule.exports = {\n\t  shimRTCIceCandidate: function(window) {\n\t    // foundation is arbitrarily chosen as an indicator for full support for\n\t    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n\t    if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n\t        window.RTCIceCandidate.prototype)) {\n\t      return;\n\t    }\n\t\n\t    var NativeRTCIceCandidate = window.RTCIceCandidate;\n\t    window.RTCIceCandidate = function(args) {\n\t      // Remove the a= which shouldn't be part of the candidate string.\n\t      if (typeof args === 'object' && args.candidate &&\n\t          args.candidate.indexOf('a=') === 0) {\n\t        args = JSON.parse(JSON.stringify(args));\n\t        args.candidate = args.candidate.substr(2);\n\t      }\n\t\n\t      if (args.candidate && args.candidate.length) {\n\t        // Augment the native candidate with the parsed fields.\n\t        var nativeCandidate = new NativeRTCIceCandidate(args);\n\t        var parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n\t        var augmentedCandidate = Object.assign(nativeCandidate,\n\t            parsedCandidate);\n\t\n\t        // Add a serializer that does not serialize the extra attributes.\n\t        augmentedCandidate.toJSON = function() {\n\t          return {\n\t            candidate: augmentedCandidate.candidate,\n\t            sdpMid: augmentedCandidate.sdpMid,\n\t            sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n\t            usernameFragment: augmentedCandidate.usernameFragment,\n\t          };\n\t        };\n\t        return augmentedCandidate;\n\t      }\n\t      return new NativeRTCIceCandidate(args);\n\t    };\n\t    window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\t\n\t    // Hook up the augmented candidate in onicecandidate and\n\t    // addEventListener('icecandidate', ...)\n\t    utils.wrapPeerConnectionEvent(window, 'icecandidate', function(e) {\n\t      if (e.candidate) {\n\t        Object.defineProperty(e, 'candidate', {\n\t          value: new window.RTCIceCandidate(e.candidate),\n\t          writable: 'false'\n\t        });\n\t      }\n\t      return e;\n\t    });\n\t  },\n\t\n\t  // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\t\n\t  shimCreateObjectURL: function(window) {\n\t    var URL = window && window.URL;\n\t\n\t    if (!(typeof window === 'object' && window.HTMLMediaElement &&\n\t          'srcObject' in window.HTMLMediaElement.prototype &&\n\t        URL.createObjectURL && URL.revokeObjectURL)) {\n\t      // Only shim CreateObjectURL using srcObject if srcObject exists.\n\t      return undefined;\n\t    }\n\t\n\t    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n\t    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n\t    var streams = new Map(), newId = 0;\n\t\n\t    URL.createObjectURL = function(stream) {\n\t      if ('getTracks' in stream) {\n\t        var url = 'polyblob:' + (++newId);\n\t        streams.set(url, stream);\n\t        utils.deprecated('URL.createObjectURL(stream)',\n\t            'elem.srcObject = stream');\n\t        return url;\n\t      }\n\t      return nativeCreateObjectURL(stream);\n\t    };\n\t    URL.revokeObjectURL = function(url) {\n\t      nativeRevokeObjectURL(url);\n\t      streams.delete(url);\n\t    };\n\t\n\t    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n\t                                              'src');\n\t    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n\t      get: function() {\n\t        return dsc.get.apply(this);\n\t      },\n\t      set: function(url) {\n\t        this.srcObject = streams.get(url) || null;\n\t        return dsc.set.apply(this, [url]);\n\t      }\n\t    });\n\t\n\t    var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n\t    window.HTMLMediaElement.prototype.setAttribute = function() {\n\t      if (arguments.length === 2 &&\n\t          ('' + arguments[0]).toLowerCase() === 'src') {\n\t        this.srcObject = streams.get(arguments[1]) || null;\n\t      }\n\t      return nativeSetAttribute.apply(this, arguments);\n\t    };\n\t  },\n\t\n\t  shimMaxMessageSize: function(window) {\n\t    if (window.RTCSctpTransport || !window.RTCPeerConnection) {\n\t      return;\n\t    }\n\t    var browserDetails = utils.detectBrowser(window);\n\t\n\t    if (!('sctp' in window.RTCPeerConnection.prototype)) {\n\t      Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n\t        get: function() {\n\t          return typeof this._sctp === 'undefined' ? null : this._sctp;\n\t        }\n\t      });\n\t    }\n\t\n\t    var sctpInDescription = function(description) {\n\t      var sections = SDPUtils.splitSections(description.sdp);\n\t      sections.shift();\n\t      return sections.some(function(mediaSection) {\n\t        var mLine = SDPUtils.parseMLine(mediaSection);\n\t        return mLine && mLine.kind === 'application'\n\t            && mLine.protocol.indexOf('SCTP') !== -1;\n\t      });\n\t    };\n\t\n\t    var getRemoteFirefoxVersion = function(description) {\n\t      // TODO: Is there a better solution for detecting Firefox?\n\t      var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n\t      if (match === null || match.length < 2) {\n\t        return -1;\n\t      }\n\t      var version = parseInt(match[1], 10);\n\t      // Test for NaN (yes, this is ugly)\n\t      return version !== version ? -1 : version;\n\t    };\n\t\n\t    var getCanSendMaxMessageSize = function(remoteIsFirefox) {\n\t      // Every implementation we know can send at least 64 KiB.\n\t      // Note: Although Chrome is technically able to send up to 256 KiB, the\n\t      //       data does not reach the other peer reliably.\n\t      //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n\t      var canSendMaxMessageSize = 65536;\n\t      if (browserDetails.browser === 'firefox') {\n\t        if (browserDetails.version < 57) {\n\t          if (remoteIsFirefox === -1) {\n\t            // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n\t            // fragmentation.\n\t            canSendMaxMessageSize = 16384;\n\t          } else {\n\t            // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n\t            // messages. Thus, supporting ~2 GiB when sending.\n\t            canSendMaxMessageSize = 2147483637;\n\t          }\n\t        } else if (browserDetails.version < 60) {\n\t          // Currently, all FF >= 57 will reset the remote maximum message size\n\t          // to the default value when a data channel is created at a later\n\t          // stage. :(\n\t          // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\t          canSendMaxMessageSize =\n\t            browserDetails.version === 57 ? 65535 : 65536;\n\t        } else {\n\t          // FF >= 60 supports sending ~2 GiB\n\t          canSendMaxMessageSize = 2147483637;\n\t        }\n\t      }\n\t      return canSendMaxMessageSize;\n\t    };\n\t\n\t    var getMaxMessageSize = function(description, remoteIsFirefox) {\n\t      // Note: 65536 bytes is the default value from the SDP spec. Also,\n\t      //       every implementation we know supports receiving 65536 bytes.\n\t      var maxMessageSize = 65536;\n\t\n\t      // FF 57 has a slightly incorrect default remote max message size, so\n\t      // we need to adjust it here to avoid a failure when sending.\n\t      // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n\t      if (browserDetails.browser === 'firefox'\n\t           && browserDetails.version === 57) {\n\t        maxMessageSize = 65535;\n\t      }\n\t\n\t      var match = SDPUtils.matchPrefix(description.sdp, 'a=max-message-size:');\n\t      if (match.length > 0) {\n\t        maxMessageSize = parseInt(match[0].substr(19), 10);\n\t      } else if (browserDetails.browser === 'firefox' &&\n\t                  remoteIsFirefox !== -1) {\n\t        // If the maximum message size is not present in the remote SDP and\n\t        // both local and remote are Firefox, the remote peer can receive\n\t        // ~2 GiB.\n\t        maxMessageSize = 2147483637;\n\t      }\n\t      return maxMessageSize;\n\t    };\n\t\n\t    var origSetRemoteDescription =\n\t        window.RTCPeerConnection.prototype.setRemoteDescription;\n\t    window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n\t      var pc = this;\n\t      pc._sctp = null;\n\t\n\t      if (sctpInDescription(arguments[0])) {\n\t        // Check if the remote is FF.\n\t        var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\t\n\t        // Get the maximum message size the local peer is capable of sending\n\t        var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\t\n\t        // Get the maximum message size of the remote peer.\n\t        var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\t\n\t        // Determine final maximum message size\n\t        var maxMessageSize;\n\t        if (canSendMMS === 0 && remoteMMS === 0) {\n\t          maxMessageSize = Number.POSITIVE_INFINITY;\n\t        } else if (canSendMMS === 0 || remoteMMS === 0) {\n\t          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n\t        } else {\n\t          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n\t        }\n\t\n\t        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n\t        // attribute.\n\t        var sctp = {};\n\t        Object.defineProperty(sctp, 'maxMessageSize', {\n\t          get: function() {\n\t            return maxMessageSize;\n\t          }\n\t        });\n\t        pc._sctp = sctp;\n\t      }\n\t\n\t      return origSetRemoteDescription.apply(pc, arguments);\n\t    };\n\t  },\n\t\n\t  shimSendThrowTypeError: function(window) {\n\t    if (!(window.RTCPeerConnection &&\n\t        'createDataChannel' in window.RTCPeerConnection.prototype)) {\n\t      return;\n\t    }\n\t\n\t    // Note: Although Firefox >= 57 has a native implementation, the maximum\n\t    //       message size can be reset for all data channels at a later stage.\n\t    //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\t\n\t    function wrapDcSend(dc, pc) {\n\t      var origDataChannelSend = dc.send;\n\t      dc.send = function() {\n\t        var data = arguments[0];\n\t        var length = data.length || data.size || data.byteLength;\n\t        if (dc.readyState === 'open' &&\n\t            pc.sctp && length > pc.sctp.maxMessageSize) {\n\t          throw new TypeError('Message too large (can send a maximum of ' +\n\t            pc.sctp.maxMessageSize + ' bytes)');\n\t        }\n\t        return origDataChannelSend.apply(dc, arguments);\n\t      };\n\t    }\n\t    var origCreateDataChannel =\n\t      window.RTCPeerConnection.prototype.createDataChannel;\n\t    window.RTCPeerConnection.prototype.createDataChannel = function() {\n\t      var pc = this;\n\t      var dataChannel = origCreateDataChannel.apply(pc, arguments);\n\t      wrapDcSend(dataChannel, pc);\n\t      return dataChannel;\n\t    };\n\t    utils.wrapPeerConnectionEvent(window, 'datachannel', function(e) {\n\t      wrapDcSend(e.channel, e.target);\n\t      return e;\n\t    });\n\t  }\n\t};\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\n\t/**\r\n\t * Created with IntelliJ IDEA.\r\n\t * User: Deng.Qiang\r\n\t * Date: 2017/1/16\r\n\t * Time: 11:53\r\n\t * Author Deng Qiang\r\n\t * E-mail: dengqiang@fdclouds.com\r\n\t * The mythical alpaca haunt , devout prayer no bug.\r\n\t *\r\n\t * \\      A__A\r\n\t *  \\     (oo)\\__________\r\n\t *        (__)\\          )\\/\\\r\n\t *          ||- - - - -W-||\r\n\t *          ||          ||\r\n\t * = = = = = = = = = = = = = = =\r\n\t */\r\n\tvar Response = {};\r\n\t\r\n\tResponse.code_200 = 200;\r\n\tResponse.code_400 = 400;\r\n\tResponse.code_401 = 401;\r\n\tResponse.code_402 = 402;\r\n\tResponse.code_403 = 403;\r\n\tResponse.code_404 = 404;\r\n\tResponse.code_405 = 405;\r\n\tResponse.code_406 = 406;\r\n\tResponse.code_407 = 407;\r\n\tResponse.code_408 = 408;\r\n\tResponse.code_409 = 409;\r\n\tResponse.code_410 = 410;\r\n\tResponse.code_411 = 411;\r\n\tResponse.code_412 = 412;\r\n\tResponse.code_413 = 413;\r\n\tResponse.code_414 = 414;\r\n\tResponse.code_415 = 415;\r\n\tResponse.code_416 = 416;\r\n\tResponse.code_421 = 421;\r\n\tResponse.code_422 = 422;\r\n\tResponse.code_500 = 500;\r\n\tResponse.time_out_seconds = 60000;\r\n\t\r\n\tResponse.no_test_browser_type_or_version = '非测试通过的浏览器类型或版本',\r\n\tResponse.init_success = '初始化配置完成';\r\n\tResponse.init_failed = '尚未正确配置初始化信息,请检测后再尝试连接';\r\n\tResponse.params_error = '参数错误，缺少服务器地址';\r\n\tResponse.resolution_params_error = '参数错误，分辨率错误';\r\n\tResponse.username_password_except = '参数错误，用户名密码不能为空';\r\n\tResponse.callback_function_except = '参数错误，回调函数不是一个可执行的function';\r\n\tResponse.connection_except = '尚未接入服务器,请先登陆服务器建立链接';\r\n\tResponse.connection_lost = '链接已断开';\r\n\tResponse.mesage_server_except = '服务器配置错误,缺少MSS配置';\r\n\tResponse.sign_failed = '登录失败,请确认服务器地址是否正确';\r\n\tResponse.sign_username_password_error = '登录失败,请确认账号及密码是否正确';\r\n\tResponse.sign_success = '登陆服务器成功';\r\n\tResponse.sign_out_success = '已断开连接并退出登录';\r\n\tResponse.connect_server_success = '服务连接已连接';\r\n\tResponse.create_room_failed = '创建会议失败,请确认服务是否正常,请联系服务提供商';\r\n\tResponse.out_of_source_limit = '接入会议室失败,超出会议资源使用限制';\r\n\tResponse.conference_participant_time_error = '会议尚未开始,请在会议开始前15分钟内入场';\r\n\tResponse.conference_focus_except = '会议室未能正确分配到focus';\r\n\tResponse.conference_vb_except = '会议室未能正确分配到video bridge';\r\n\tResponse.without_usefull_video_device = '没有发现可用的视频输入设备';\r\n\tResponse.out_of_video_device_resolution = '视频输入设备分辨率不满足当前会议系统视频采集需求';\r\n\tResponse.join_room_failed = '接入会议室失败,请确认是否资源超限并联系服务提供商';\r\n\tResponse.join_room_success = '成功进入会议室';\r\n\tResponse.room_locked = '会议室已经被锁定';\r\n\tResponse.room_password_expect = '会议室不存在或密码错误';\r\n\tResponse.room_number_except = '参数错误，请输入正确的会议室号';\r\n\tResponse.room_number_and_nickname_except = '参数错误，请输入正确的会议室号和昵称';\r\n\tResponse.leave_room = '已经离开会议室';\r\n\tResponse.on_participant_joined = '有新的参会者进入到会议室';\r\n\tResponse.on_participant_audio_joined = '参会人员音频接入成功';\r\n\tResponse.on_participant_left = '有人离开了会议室';\r\n\tResponse.got_participants = '获取到参会人员列表';\r\n\tResponse.got_participant_info = '获取到参会人员信息';\r\n\tResponse.got_participant_info_failed = '未找到响应的参会人员';\r\n\tResponse.room_unopend = '会议室尚未开启或不存在';\r\n\tResponse.set_audio_toggle_complete = '设置开关音频完成';\r\n\tResponse.set_audio_toggle_failed = '设置开关音频失败';\r\n\tResponse.set_video_toggle_complete = '设置开关视频完成';\r\n\tResponse.set_video_toggle_failed = '设置开关视频失败';\r\n\tResponse.change_video_resolution_complete = '修改分辨率成功';\r\n\tResponse.unsupport_resolution = '你的设备不支持当前分辨率，请调低分辨率尝试';\r\n\tResponse.unfind_devices = '没有发现可用的音视频设备';\r\n\tResponse.find_devices = '获取到相应的设备列表';\r\n\tResponse.resource_except = '参数错误，缺少用户定位标识';\r\n\tResponse.out_of_authority = '对不起，你不是管理员，没有权限执行此操作';\r\n\tResponse.network_error = '网络错误，请确认服务是否正常并联系服务提供商';\r\n\tResponse.transferc_compere_success = '移交主持人权限成功';\r\n\tResponse.transferc_compere_failed = '移交主持人权限失败';\r\n\tResponse.compere_authority_own = '已经拥有主持人权限，无需再次获取';\r\n\tResponse.compere_password_except = '参数错误，请输入主持人密码';\r\n\tResponse.fetch_compere_error = '获取主持人权限失败，密码错误';\r\n\tResponse.fetch_compere_failed_exist = '获取权限失败,房间存在主持人';\r\n\tResponse.fetch_compere_success = '获取主持人权限成功';\r\n\tResponse.you_are_not_in_room = '你尚未进入会议室';\r\n\tResponse.you_are_in_a_room = '你正在开会或已经在会议室中,无法拨号';\r\n\tResponse.message_content_null = '消息不能为空';\r\n\tResponse.message_send_complete = '消息文本发送成功';\r\n\tResponse.receive_text_message_complete = '收到文本消息';\r\n\tResponse.becontrol_user_resource_except = '请输入被操作的用户唯一标识';\r\n\tResponse.manage_set_audio_mute_success = '主持人设置静音成功';\r\n\tResponse.manage_set_audio_mute_failed = '主持人设置静音失败';\r\n\tResponse.be_set_mute_complete = '被主持人修改音频状态';\r\n\tResponse.be_set_video_complete = '被主持人修改视频状态';\r\n\tResponse.participant_not_in_room = '参会人员已不再会议室';\r\n\tResponse.remove_participant_complete = '成功移除参会人员';\r\n\tResponse.remove_participant_failed = '移除参会人员失败';\r\n\tResponse.you_have_been_eject = '你已经被踢出了房间';\r\n\tResponse.video_device_id_except = '请传入视频输入设备ID';\r\n\tResponse.sip_gateway_except = '网关（Gateway）地址未正确配置';\r\n\tResponse.sip_number_except = '请输入被叫SIP号';\r\n\tResponse.call_sip_success = '呼叫视频终端成功';\r\n\tResponse.call_sip_failed = '呼叫视频终端失败';\r\n\tResponse.cancel_call_sip_success = '取消呼叫视频终端成功';\r\n\tResponse.cancel_call_sip_failed = '取消呼叫视频终端失败';\r\n\tResponse.call_sip_aready_in = '呼叫视频终端已经在会议室中';\r\n\tResponse.be_inviste_user_except = '请输入被邀请人的用户号';\r\n\tResponse.send_inviste_success = '发送邀请成功';\r\n\tResponse.send_inviste_failed = '发送邀请失败';\r\n\tResponse.on_ring_up = '收到邀请入会的响铃';\r\n\tResponse.on_ring_up_reply = '收到邀请入会的答复';\r\n\tResponse.get_my_jid = '获取到我的被叫ID';\r\n\tResponse.room_opened = '会议室已经开启';\r\n\tResponse.share_screen_success = '屏幕共享成功';\r\n\tResponse.share_screen_failed = '屏幕共享失败';\r\n\tResponse.share_screen_error = '屏幕共享失败,请联系服务提供商';\r\n\tResponse.share_screen_ended = '屏幕分享结束,感谢使用;请移除相应节点';\r\n\tResponse.share_app_except = '请传入需要分享的应用路径';\r\n\tResponse.share_app_completed = '成功(开始/关闭)共享应用';\r\n\tResponse.on_stream_added = '收到新的流增加到连接中';\r\n\tResponse.on_stream_added = '收到新的流增加到连接中';\r\n\tResponse.second_stream_except = '需要添加的流不存在';\r\n\tResponse.lock_or_unlock_room_completed = '锁定/解锁房间完成';\r\n\tResponse.lock_or_unlock_room_failed = '锁定/解锁房间失败';\r\n\tResponse.display_mode_execpet = '请传入需要切换的分屏模式';\r\n\tResponse.display_mode_change_complete = '切换显示模式成功';\r\n\tResponse.display_mode_change_failed = '切换显示模式失败';\r\n\tResponse.on_grant_admin_completed = '被授权了主持人权限';\r\n\tResponse.on_remove_admin_completed = '主持人权限被会控收回';\r\n\tResponse.dispaly_block_source_except = '请传入正确的新主屏';\r\n\tResponse.lock_main_display_complete = '切换主屏完成';\r\n\tResponse.lock_main_display_failed = '切换主屏失败';\r\n\tResponse.main_display_block_changed = '主屏资源已经被更改';\r\n\tResponse.order_change_resolution_receiver_except = '需要修改分辨率的用户ID不能为空';\r\n\tResponse.order_change_resolution_resulotion_except = '需要修改到的分辨率不能为空';\r\n\tResponse.order_change_resolution_resulotion_complete = '发送修改分辨率通知成功';\r\n\tResponse.order_change_resolution_resulotion_failed = '发送修改分辨率通知失败';\r\n\tResponse.on_order_change_resolution_order = '收到修改分辨率通知';\r\n\tResponse.nickname_except = '请输入正确的用户昵称';\r\n\tResponse.init_moderator_complete = '初始化权限完成';\r\n\tResponse.init_moderator_failed = '初始化权限失败';\r\n\tResponse.invite_time_out = '请求超时,被叫无人接听';\r\n\tResponse.reply_invite_time_out = '请求超时,对方已挂机';\r\n\tResponse.reject_invite_msg = '已拒绝呼叫';\r\n\tResponse.response_invite_msg_complete = '已处理呼叫信息';\r\n\tResponse.get_my_friends_list = '获取到我的好友列表';\r\n\tResponse.send_hard_remove_strem_msg = '流已从连接中被移除';\r\n\tResponse.local_stream_ssrc_updated = '本地流SSRC已经更新';\r\n\tResponse.with_moderator_status_changed = '存在主持人状态发生变化';\r\n\tResponse.get_user_media_success = '获取到流媒体资源';\r\n\tResponse.get_user_media_failed = '获取流媒体资源失败';\r\n\tResponse.audio_output_except = '音频输出设备不正确';\r\n\tResponse.audio_output_change_completed = '音频输出设备已改变';\r\n\tResponse.audio_input_change_completed = '音频输入设备已改变';\r\n\tResponse.audio_input_change_failed = '音频输入设备切换失败';\r\n\tResponse.room_kill_by_manager = '管理员关闭了会议室';\r\n\tResponse.room_lock_status_change = '房间已';\r\n\tResponse.participant_status_update = '参会用户信息更新';\r\n\tResponse.manis_recorder_status_changed = 'Manis recorder status changed ';\r\n\tResponse.hands_up_send_success = '举手消息已发送';\r\n\tResponse.hands_up_send_failed = '举手发送失败';\r\n\tResponse.on_hands_up_msg = '收到有人举手消息';\r\n\tResponse.response_hands_up_msg_success = '答复举手消息成功';\r\n\tResponse.response_hands_up_msg_failed = '答复举手消息失败';\r\n\tResponse.response_hands_up_action_error = '响应参数中action错误';\r\n\tResponse.on_hands_up_response = '收到举手响应消息';\r\n\tResponse.ring_call_request_in_processed_sent_success = '呼叫消息已处理消息已发送';\r\n\tResponse.ring_call_request_in_processed_sent_failed = '呼叫消息已处理消息发送失败';\r\n\tResponse.ring_call_request_in_processed = '呼叫消息在其他终端上已处理';\r\n\tResponse.media_stream_except = '仅发送模式流媒体资源不能为空';\r\n\tResponse.room_countdown = '会议房间预约时间即将到期,请确认是否需要延长会议时间';\r\n\tResponse.room_extend_time_require = '请输入合法的延长时间,单位为分钟';\r\n\tResponse.room_extend_time_success = '会议延长时间成功';\r\n\tResponse.room_extend_time_failed = '会议延长时间失败';\r\n\tResponse.on_room_model_change_to_audio_only = '获取本地视频失败,自动尝试音频方式入会';\r\n\tResponse.request_participants_sort_complete = '请求人员重新排序成功';\r\n\tResponse.participants_sort_except = '窗口排序字段不能为空';\r\n\tResponse.on_participants_sort_change = '窗口排序发生了变化';\r\n\tResponse.get_phone_number_success = '获取到需要呼叫的电弧号码';\r\n\tResponse.get_phone_number_failed = '获取需要呼叫的电话号码失败';\r\n\tResponse.get_phone_number_except = '请输入需要呼叫的电话号码';\r\n\tResponse.local_stream_except = '本地媒体资源不能为空';\r\n\tResponse.remove_local_stream_failed = '移出本地流媒体资源失败';\r\n\tResponse.system_upgrade_notice = '系统升级';\r\n\tResponse.other_participant_except = '等待其他人员接入后才可以使用';\r\n\tResponse.add_local_stream_without_negiration_success = '未协商加入本地视频成功';\r\n\tResponse.annotation_action_except = '画图板动作不能为空';\r\n\tResponse.encrypt_string_except = '请输入需要加密的字符串';\r\n\t\r\n\t\r\n\tmodule.exports = Response;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by Deng.Qiang on 2016/12/20.\r\n\t *\r\n\t * 公共方法\r\n\t *\r\n\t */\r\n\t\r\n\t// var Status = require('./manis.status');\r\n\tvar ManisResponse = __webpack_require__(26);\r\n\tvar ErrorCode = __webpack_require__(28);\r\n\tvar ms = __webpack_require__(29);\r\n\tvar Encrypt = __webpack_require__(31);\r\n\t\r\n\tvar publicFunctions = {\r\n\t\r\n\t  publicKey: 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDOkK1uFnwLtdDi29TlP7NQJV8Mqfja8z5bYdeaIqCzMIFxABq6+Z48HyhH0CiUinpO3hv3KXdQOmEnern/1HLtvneLMoWp2hSN0TVkrjHQbHusq9rbmZH7hUsqGhBLTfSUVSpuOsY/x+zXEFc1VxQBrwLuIZT18kjKBFgqPSEnewIDAQAB',\r\n\t\r\n\t  currentMainResource: '',\r\n\t  currentMainSSRC: '',\r\n\t\r\n\t  Constraints_1080: {width: {exact: 1920}, height: {exact: 1080}},\r\n\t  Constraints_720: {width: {exact: 1280}, height: {exact: 720}},\r\n\t  Constraints_768: {width: {exact: 1024}, height: {exact: 768}},\r\n\t  Constraints_540: {width: {exact: 960}, height: {exact: 540}},\r\n\t  Constraints_480: {width: {exact: 640}, height: {exact: 480}},\r\n\t  Constraints_360: {width: {exact: 640}, height: {exact: 360}},\r\n\t  Constraints_240: {width: {exact: 320}, height: {exact: 240}},\r\n\t  Constraints_180: {width: {exact: 320}, height: {exact: 180}},\r\n\t\r\n\t  /**\r\n\t   * 根据分辨率计算获取约束和带宽\r\n\t   * @param withAudio\r\n\t   * @param withVideo\r\n\t   * @param audioInput\r\n\t   * @param videoInput\r\n\t   * @param videoResolution\r\n\t   * @returns {{audio: *, video: *}}\r\n\t   */\r\n\t  getConstraintsByResolution: function(withAudio, withVideo, audioInput, videoInput, videoResolution){\r\n\t    var _this = this;\r\n\t    var constraints = {\r\n\t      audio: withAudio ? {} : false,\r\n\t      video: withVideo ? {} : false\r\n\t    };\r\n\t    if(withVideo === true && videoResolution){\r\n\t      var resolution = ms.getResolution();\r\n\t      resolution.forEach(function(obj){\r\n\t          if (obj.height.exact == videoResolution) {\r\n\t              constraints.video = { width: obj.width, height: obj.height};\r\n\t              config.videoBandwidth =  _this.getVideoBandwidthByResolution(videoResolution) ? _this.getVideoBandwidthByResolution(videoResolution) : obj.videoBandwidth;\r\n\t              return;\r\n\t          }\r\n\t      });\r\n\t    }\r\n\t    if(withAudio === true){\r\n\t      var aDevice =  audioInput ? audioInput : undefined;\r\n\t      var cons = '{\"optional\":[{\"sourceId\":\"'+aDevice+'\"},{\"echoCancellation\":true},{\"googEchoCancellation\":true},{\"googAutoGainControl\":true},{\"googNoiseSuppression\":true},{\"googHighpassFilter\":true},{\"googNoiseSuppression2\":true},{\"googEchoCancellation2\":true},{\"googAutoGainControl2\":true},{\"googTypingNoiseDetection\":true}]}'\r\n\t      var audioConstraints =  JSON.parse(cons)\r\n\t      constraints.audio = audioConstraints;\r\n\t    }\r\n\t    if(withVideo === true){\r\n\t      constraints.video.deviceId =  videoInput ? {exact: videoInput} : undefined;\r\n\t      constraints.video.frameRate = { max: 30 , min: 20};\r\n\t    }\r\n\t    console.log(\"=========constraints====\",constraints);\r\n\t    return constraints;\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   *\r\n\t   * @param resolution\r\n\t   * @returns {*}\r\n\t   */\r\n\t  getVideoBandwidthByResolution: function(resolution){\r\n\t    resolution = resolution.toString();\r\n\t    var videoBandwidth = null;\r\n\t    var rbwc = config.rbwc;\r\n\t    if(!rbwc || !rbwc.length){\r\n\t      return videoBandwidth;\r\n\t    }\r\n\t    for(var i = 0; i < rbwc.length; i++){\r\n\t      var item = rbwc[i];\r\n\t      if(item.height == resolution){\r\n\t        videoBandwidth = item.bandwidth;\r\n\t      }\r\n\t    }\r\n\t    return videoBandwidth;\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   * 浏览器是否支持localStorage\r\n\t   *\r\n\t   * @returns {boolean}\r\n\t   */\r\n\t  supportsLocalStorage: function () {\r\n\t    try {\r\n\t      return 'localStorage' in window && window.localStorage !== null;\r\n\t    } catch (e) {\r\n\t      console.log(\"localstorage is not supported\");\r\n\t      return false;\r\n\t    }\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   * 生成唯一标识\r\n\t   * @returns {*}\r\n\t   */\r\n\t  generateUniqueId: function () {\r\n\t    function _p8() {\r\n\t      return (Math.random().toString(16) + \"000000000\").substr(2, 8);\r\n\t    }\r\n\t\r\n\t    return _p8() + _p8() + _p8() + _p8();\r\n\t  }\r\n\t  ,\r\n\t\r\n\t  /**\r\n\t   * Checks whether the audio is muted or not.\r\n\t   * @returns {boolean} true if audio is muted and false if not.\r\n\t   */\r\n\t  isAudioMuted: function () {\r\n\t    var localAudio = connection.jingle.localAudio;\r\n\t    for (var idx = 0; idx < localAudio.getAudioTracks().length; idx++) {\r\n\t      if (localAudio.getAudioTracks()[idx].enabled === true)\r\n\t        return false;\r\n\t    }\r\n\t    return true;\r\n\t  }\r\n\t  ,\r\n\t\r\n\t  isVideoMuted: function () {\r\n\t    var tracks = connection.jingle.localVideo.getVideoTracks();\r\n\t    var mute = true;\r\n\t\r\n\t    for (var i = 0; i < tracks.length; ++i) {\r\n\t      if (tracks[i].enabled) {\r\n\t        mute = false;\r\n\t        break;\r\n\t      }\r\n\t    }\r\n\t    return mute;\r\n\t  },\r\n\t\r\n\t  setAdmin: function (obj) {\r\n\t    if (obj) {\r\n\t      config.role = 'CRUO';\r\n\t    } else {\r\n\t      config.role = 'NONE';\r\n\t    }\r\n\t  }\r\n\t  ,\r\n\t\r\n\t  /**\r\n\t   *  判断角色是否主持人\r\n\t   * @returns {boolean}\r\n\t   */\r\n\t  isAdmin: function () {\r\n\t    if (config.role == 'CRUO' || config.role == 'CRUA') {\r\n\t      return true;\r\n\t    } else if (config.role == 'CRUM') {\r\n\t      return false;\r\n\t    }\r\n\t    return false;\r\n\t  },\r\n\t  /**\r\n\t   * 初始化主持人\r\n\t   * @param callback\r\n\t   */\r\n\t  initModerator: function (callback) {\r\n\t    var self = this;\r\n\t    try {\r\n\t      if (typeof(config.getroomnode) == \"function\") {\r\n\t        var roomNum = config.getroomnode();\r\n\t      } else if (window.roomName != null) {\r\n\t        var roomNum = window.roomName.split('@')[0];\r\n\t      } else {\r\n\t        var roomNum = null;\r\n\t      }\r\n\t      if (roomNum) {\r\n\t        var _header = this.authoredHeader()\r\n\t        $.ajax({\r\n\t          url: window.serverPath + \"/user/initModerator?j=\" + connection.jid + \"&r=\" + roomNum,\r\n\t          // dataType: 'jsonp',\r\n\t          dataType: 'json',\r\n\t          processData: false,\r\n\t          headers: _header,\r\n\t          type: 'get',\r\n\t          async: false,\r\n\t          success: function (rs) {\r\n\t            if (rs.code == 200) {\r\n\t              config.role = rs.obj[0];\r\n\t              var isModerator = self.isAdmin();\r\n\t              connection.emuc.addConfigRoleToPresence(config.role);\r\n\t              connection.emuc.addIsModeratorToPresence(isModerator);\r\n\t              connection.emuc.sendPresence();\r\n\t              // update myself 'is_moderator' status\r\n\t              for(var i = 0 ; i < window.participants.length; i++){\r\n\t                var pt = window.participants[i];\r\n\t                if(pt.jid == connection.jid){\r\n\t                  pt.is_moderator = isModerator;\r\n\t                  window.participants[i] = pt;\r\n\t                }\r\n\t              }\r\n\t              callback({\r\n\t                code: ManisResponse.code_200,\r\n\t                msg: ManisResponse.init_moderator_complete,\r\n\t                response: isModerator,\r\n\t                master: Strophe.getResourceFromJid(rs.obj[1]),\r\n\t                errorCode: ErrorCode.no_error\r\n\t              });\r\n\t            }\r\n\t          },\r\n\t          error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t            callback({\r\n\t              code: ManisResponse.code_500,\r\n\t              msg: ManisResponse.init_moderator_failed,\r\n\t              errorCode: ErrorCode.init_moderator_right_failed\r\n\t            });\r\n\t          }\r\n\t        });\r\n\t      }\r\n\t    } catch (e) {\r\n\t      callback({\r\n\t        code: ManisResponse.code_500,\r\n\t        msg: ManisResponse.init_moderator_failed,\r\n\t        errorCode: ErrorCode.api_fetch_failed\r\n\t      });\r\n\t    }\r\n\t\r\n\t  },\r\n\t\r\n\t  setAudioMute: function (mute, successCallback, errorCallback) {\r\n\t    try {\r\n\t        if (mute == this.isAudioMuted()) {\r\n\t          successCallback();\r\n\t          return true;\r\n\t        }\r\n\t        // It is not clear what is the right way to handle multiple tracks.\r\n\t        // So at least make sure that they are all muted or all unmuted and\r\n\t        // that we send presence just once.\r\n\t        var localAudioTracks = connection.jingle.localAudio.getAudioTracks();\r\n\t        if (localAudioTracks.length > 0) {\r\n\t            for (var idx = 0; idx < localAudioTracks.length; idx++) {\r\n\t                localAudioTracks[idx].enabled = !mute;\r\n\t            }\r\n\t        }\r\n\t        // isMuted is the opposite of audioEnabled\r\n\t        connection.emuc.addAudioInfoToPresence(mute);\r\n\t        connection.emuc.sendPresence();\r\n\t        $(document).trigger('audiomuted.muc', [connection.jid, mute.toString()]);\r\n\t        if(successCallback) {\r\n\t            successCallback();\r\n\t        }\r\n\t    } catch (e) {\r\n\t      if(errorCallback){\r\n\t        errorCallback(e);\r\n\t      }\r\n\t    }\r\n\t  },\r\n\t\r\n\t\r\n\t  setVideoMute: function (mute, successCallback, errorCallback) {\r\n\t    try{\r\n\t      if(mute == this.isVideoMuted()){\r\n\t        successCallback();\r\n\t        return true;\r\n\t      }\r\n\t\r\n\t      var localVideoTracks = connection.jingle.localVideo.getVideoTracks();\r\n\t      if (localVideoTracks.length > 0) {\r\n\t        for (var idx = 0; idx < localVideoTracks.length; idx++) {\r\n\t          localVideoTracks[idx].enabled = !mute;\r\n\t        }\r\n\t      }\r\n\t      connection.emuc.addVideoInfoToPresence(mute);\r\n\t      connection.emuc.sendPresence();\r\n\t      // $(document).trigger('videomuted.muc',[connection.jid, mute.toString()]);\r\n\t      // if(!mute){\r\n\t      //   var session = window.activecall;\r\n\t      //   if (session) {\r\n\t      //     session.setVideoMute(mute, function (muteResult) {\r\n\t      //       console.log('hand session set video mute result: ', muteResult);\r\n\t      //     }, null)\r\n\t      //   }\r\n\t      // }\r\n\t      if(successCallback){\r\n\t          successCallback();\r\n\t      }\r\n\t    }catch (e) {\r\n\t      if(errorCallback){\r\n\t        errorCallback(e);\r\n\t      }\r\n\t    }\r\n\t  },\r\n\t\r\n\t\r\n\t  /**\r\n\t   *\r\n\t   * @param jid\r\n\t   * @returns {*}\r\n\t   */\r\n\t  getUserInfoByJid: function (jid) {\r\n\t    if (window.participants.length) {\r\n\t      for (var k = 0; k < window.participants.length; k++) {\r\n\t        var p = window.participants[k];\r\n\t        if (p.resource == Strophe.getResourceFromJid(jid)) {\r\n\t          // hide jid\r\n\t          return {\r\n\t            nickname: p.nickname,\r\n\t            resource: p.resource,\r\n\t            jid: jid\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return {resource: Strophe.getResourceFromJid(jid), nickname: '', jid: jid};\r\n\t  }\r\n\t  ,\r\n\t\r\n\t  /**\r\n\t   * 通过resource获取用户\r\n\t   * @param resource\r\n\t   * @returns {*}\r\n\t   */\r\n\t  getUserByResource: function (resource) {\r\n\t    if (window.participants.length) {\r\n\t      for (var k = 0; k < window.participants.length; k++) {\r\n\t        var p = window.participants[k];\r\n\t        if (p.resource == resource) {\r\n\t          // hide jid\r\n\t          return p;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    return null;\r\n\t  }\r\n\t  ,\r\n\t\r\n\t  /**\r\n\t   * 判断是否已经已进入会议室\r\n\t   * @returns {boolean}\r\n\t   */\r\n\t  isInRoom: function () {\r\n\t    if (connection.emuc.myroomjid != null && window.participants.length > 0) {\r\n\t      return true;\r\n\t    }\r\n\t    return false;\r\n\t  }\r\n\t  ,\r\n\t\r\n\t  /**\r\n\t   *\r\n\t   * @param resource\r\n\t   * @returns {{resolutionId: string, uploadPackageLostId: string, downloadPackageLostId: string, uploadBitrateId: string, downloadBitrateId: string}}\r\n\t   */\r\n\t  generateStatusNode: function (resource) {\r\n\t    var status = {\r\n\t      resolutionId: 'resolution_' + resource,\r\n\t      uploadPackageLostId: 'upload_package_lost_' + resource,\r\n\t      downloadPackageLostId: 'download_package_lost_' + resource,\r\n\t      uploadBitrateId: 'upload_bitrate_' + resource,\r\n\t      downloadBitrateId: 'download_bitrate_' + resource,\r\n\t    };\r\n\t    return status;\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   *\r\n\t   * @param mode\r\n\t   * @param callback\r\n\t   */\r\n\t  updateDisplayMode: function(mode, callback){\r\n\t    var _header = this.authoredHeader();\r\n\t    $.ajax({\r\n\t      url: window.serverPath + \"/clientApi/splitScreen/\"+config.r+\"?userJid=\" + connection.jid + \"&splitScreen=\" + mode,\r\n\t      // dataType: 'jsonp',\r\n\t      processData: false,\r\n\t      dataType: 'json',\r\n\t      headers: _header,\r\n\t      type: 'get',\r\n\t      async: false,\r\n\t      success: function (rs) {\r\n\t        if (rs.code == 200) {\r\n\t          console.log('update display mode success! ');\r\n\t          callback({\r\n\t            code: rs.code,\r\n\t            msg: ManisResponse.display_mode_change_complete,\r\n\t            errorCode: ErrorCode.no_error\r\n\t          })\r\n\t        }else {\r\n\t          callback({\r\n\t            code: rs.code,\r\n\t            msg: ManisResponse.display_mode_change_failed,\r\n\t            errorCode: ErrorCode.display_model_broadcast_failed\r\n\t          })\r\n\t        }\r\n\t      },\r\n\t      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t        console.error('set display mode failure!', XMLHttpRequest, textStatus, errorThrown);\r\n\t        callback({\r\n\t          code: textStatus,\r\n\t          msg: ManisResponse.display_mode_change_failed,\r\n\t          errorCode: ErrorCode.display_model_broadcast_failed\r\n\t        })\r\n\t      }\r\n\t    });\r\n\t  },\r\n\t\r\n\t  sendChangeDisplayModeMsg: function (mode, callback, mainJid) {\r\n\t    var msg = $msg({to: connection.emuc.roomjid, type: 'groupchat'});//grant\r\n\t    msg.c('body', {\r\n\t      xmlns: 'http://igniterealtime.org/protocol/splitScreen',\r\n\t      jid: mainJid\r\n\t    }).t(mode).up();\r\n\t    // console.log('send change display mode msg : ', msg.tree());\r\n\t    try {\r\n\t      window.connection.send(msg);\r\n\t      callback({\r\n\t        code: ManisResponse.code_200,\r\n\t        msg: ManisResponse.display_mode_change_complete,\r\n\t        response: mode,\r\n\t        errorCode: ErrorCode.no_error\r\n\t      });\r\n\t    } catch (e) {\r\n\t      callback({\r\n\t        code: ManisResponse.code_500,\r\n\t        msg: ManisResponse.display_mode_change_failed,\r\n\t        errorCode: ErrorCode.display_model_broadcast_failed\r\n\t      });\r\n\t    }\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   *\r\n\t   * @param objectiveJid\r\n\t   * @param isScreen\r\n\t   * @param callback\r\n\t   */\r\n\t  updateMainBlockSource: function(objectiveJid, isScreen, callback){\r\n\t    var _header = this.authoredHeader();\r\n\t    $.ajax({\r\n\t      url: window.serverPath + \"/clientApi/stage/\"+config.r+\"?userJid=\" + connection.jid + \"&stageJid=\" + objectiveJid + '&screen=' + isScreen,\r\n\t      // dataType: 'jsonp',\r\n\t      dataType: 'json',\r\n\t      processData: false,\r\n\t      headers: _header,\r\n\t      type: 'get',\r\n\t      async: false,\r\n\t      success: function (rs) {\r\n\t        if (rs.code == 200) {\r\n\t          console.log('update stage success! ');\r\n\t          callback({\r\n\t            code: rs.code,\r\n\t            msg: ManisResponse.lock_main_display_complete,\r\n\t            errorCode: ErrorCode.no_error\r\n\t          })\r\n\t        }else {\r\n\t          callback({\r\n\t            code: rs.code,\r\n\t            msg: ManisResponse.lock_main_display_failed,\r\n\t            errorCode: ErrorCode.main_display_change_failed\r\n\t          })\r\n\t        }\r\n\t      },\r\n\t      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t        console.error('set stage failure!', XMLHttpRequest, textStatus, errorThrown);\r\n\t        callback({\r\n\t          code: textStatus,\r\n\t          msg: ManisResponse.lock_main_display_failed,\r\n\t          errorCode: ErrorCode.main_display_change_failed\r\n\t        })\r\n\t      }\r\n\t    });\r\n\t  },\r\n\t\r\n\t  sendChangeMainBlockSourceMsg: function (objectiveSource, objectSSRC, callback, isScreen) {\r\n\t    var isScreenStream = isScreen ? true : false;\r\n\t    var msg = $msg({to: connection.emuc.roomjid, type: 'groupchat'});//grant\r\n\t    var participant = this.getUserByResource(objectiveSource);\r\n\t    if (participant && participant.jid) {\r\n\t      var _jid = participant.jid;\r\n\t    } else {\r\n\t      var _jid = connection.emuc.roomJid + '/' + objectiveSource;\r\n\t    }\r\n\t    msg.c('body', {\r\n\t      xmlns: 'http://igniterealtime.org/protocol/stage',\r\n\t      jid: _jid,\r\n\t      screen: isScreenStream\r\n\t    }).t(objectiveSource).up();\r\n\t    msg.c('resource', {xmlns: 'http://igniterealtime.org/protocol/endpoint'}).t(objectiveSource).up();\r\n\t    if (objectSSRC) {\r\n\t      msg.c('ssrc', {xmlns: 'http://igniterealtime.org/protocol/streamssrc'}).t(objectSSRC).up();\r\n\t    }\r\n\t    // console.log('send change display mode msg : ', msg.tree());\r\n\t    window.connection.send(msg);\r\n\t    callback({\r\n\t      code: ManisResponse.code_200,\r\n\t      msg: ManisResponse.lock_main_display_complete,\r\n\t      response: objectiveSource,\r\n\t      errorCode: ErrorCode.no_error\r\n\t    });\r\n\t    $(document).trigger('manis.main.display.changed',[objectiveSource, objectSSRC]);\r\n\t    var _this = this;\r\n\t    if(_this.currentMainResource != objectiveSource || _this.currentMainSSRC != objectSSRC){\r\n\t      try {\r\n\t        var _header = _this.authoredHeader();\r\n\t        $.ajax({\r\n\t          url: window.serverPath + \"/user/setStage?j=\" + _jid + \"&r=\" + window.roomName.split('@')[0],\r\n\t          // dataType: 'jsonp',\r\n\t          dataType: 'json',\r\n\t          processData: false,\r\n\t          headers: _header,\r\n\t          type: 'get',\r\n\t          async: false,\r\n\t          success: function (rs) {\r\n\t            if (rs.code == 200) {\r\n\t              console.log('set stage success! ');\r\n\t              _this.currentMainResource = objectiveSource;\r\n\t              _this.currentMainSSRC = objectSSRC;\r\n\t            }\r\n\t          },\r\n\t          error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t            console.error('set stage failure!', XMLHttpRequest, textStatus, errorThrown);\r\n\t          }\r\n\t        });\r\n\t      } catch (e) {\r\n\t      }\r\n\t    }\r\n\t  },\r\n\t\r\n\t  sendHardRemoveStreamMsg: function (objectiveSource, objectSSRC, callback) {\r\n\t    var msg = $msg({to: connection.emuc.roomjid, type: 'groupchat'});//grant\r\n\t    msg.c('body', {\r\n\t      xmlns: 'http://igniterealtime.org/protocol/hardremove',\r\n\t      jid: connection.emuc.connection.jid\r\n\t    }).t(objectiveSource).up();\r\n\t    msg.c('resource', {xmlns: 'http://igniterealtime.org/protocol/endpoint'}).t(objectiveSource).up();\r\n\t    if (objectSSRC) {\r\n\t      msg.c('ssrc', {xmlns: 'http://igniterealtime.org/protocol/streamssrc'}).t(objectSSRC).up();\r\n\t    }\r\n\t    console.log('send hard remove stream msg : ', msg.tree());\r\n\t    window.connection.send(msg);\r\n\t    callback({\r\n\t      code: ManisResponse.code_200,\r\n\t      msg: ManisResponse.send_hard_remove_strem_msg,\r\n\t    });\r\n\t  },\r\n\t\r\n\t  keepAlive: function (userId, endpoint, time) {\r\n\t    var _headers = this.authoredHeader();\r\n\t    $.ajax({\r\n\t      url: window.serverPath + '/clientApi/keepAlive/'+userId+'/'+endpoint+'/'+time,\r\n\t      processData: false,\r\n\t      dataType: 'json',\r\n\t      type: 'get',\r\n\t      async: false,\r\n\t      headers: _headers,\r\n\t      success: function (rs) {\r\n\t        console.log('send keep alive request success : ', rs);\r\n\t        if (rs.mcode == 200) {\r\n\t          window.config.currentTimeMillis = rs.obj.currentTimeMillis;\r\n\t          window.config.token = rs.obj.token;\r\n\t        }\r\n\t      },\r\n\t      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t        console.error('send keep alive request failed :', XMLHttpRequest, textStatus, errorThrown);\r\n\t      }\r\n\t    });\r\n\t  },\r\n\t\r\n\t\r\n\t  requestDisplayParticipants: function(sortParticipants, callback){\r\n\t    var _header = this.authoredHeader();\r\n\t    $.ajax({\r\n\t      url: window.serverPath + '/clientApi/selectParticipants/' + config.r + '?participants=' + sortParticipants + '&userJid=' + connection.jid,\r\n\t      processData: false,\r\n\t      dataType: 'json',\r\n\t      headers: _header,\r\n\t      type: 'get',\r\n\t      async: false,\r\n\t      success: function (rs) {\r\n\t        console.log('send display sort request complete : ', rs);\r\n\t        callback({\r\n\t          code: ManisResponse.code_200,\r\n\t          msg: ManisResponse.request_participants_sort_complete,\r\n\t          errorCode: ErrorCode.no_error,\r\n\t        })\r\n\t      },\r\n\t      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t        console.error('send display sort request failed :', XMLHttpRequest, textStatus, errorThrown);\r\n\t      }\r\n\t    })\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   * @param nickname\r\n\t   * @param action\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\r\n\t  sendHandsUpMsg: function (nickname, action, successCallback, errorCallback) {\r\n\t    var _header = this.authoredHeader();\r\n\t    $.ajax({\r\n\t      url: window.serverPath + '/clientApi/handsUp/apply/' + config.r + '?userJid=' + connection.jid + '&nickname=' + nickname,\r\n\t      processData: false,\r\n\t      dataType: 'json',\r\n\t      type: 'get',\r\n\t      headers: _header,\r\n\t      async: false,\r\n\t      success: function (rs) {\r\n\t        console.log('send hands up request complete : ', rs);\r\n\t        if(rs.code == 200){\r\n\t          successCallback({\r\n\t            code: rs.code,\r\n\t            msg: ManisResponse.hands_up_send_success,\r\n\t          });\r\n\t        }else {\r\n\t          errorCallback({\r\n\t            code: rs.code,\r\n\t            msg: ManisResponse.hands_up_send_failed,\r\n\t          });\r\n\t        }\r\n\t      },\r\n\t      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t        console.error('send hands up request failed :', XMLHttpRequest, textStatus, errorThrown);\r\n\t        errorCallback({\r\n\t          code: textStatus,\r\n\t          msg: ManisResponse.hands_up_send_failed,\r\n\t        });\r\n\t      }\r\n\t    })\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   * @param receiver\r\n\t   * @param action\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\r\n\t  responseHandsUpMsg: function (receiver, action, successCallback, errorCallback) {\r\n\t    var _header = this.authoredHeader();\r\n\t    $.ajax({\r\n\t      url: window.serverPath + '/clientApi/handsUp/' + action + '/' + config.r + '?userJid=' + receiver ,\r\n\t      processData: false,\r\n\t      dataType: 'json',\r\n\t      headers: _header,\r\n\t      type: 'get',\r\n\t      async: false,\r\n\t      success: function (rs) {\r\n\t        console.log('send ', action, ' hands up response complete : ', rs);\r\n\t        if(rs.code == 200){\r\n\t          successCallback({\r\n\t            code: rs.code,\r\n\t            msg: ManisResponse.response_hands_up_msg_success,\r\n\t          });\r\n\t        }else {\r\n\t          errorCallback({\r\n\t            code: rs.code,\r\n\t            msg: ManisResponse.response_hands_up_msg_failed,\r\n\t          });\r\n\t        }\r\n\t      },\r\n\t      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t        console.error('send ', action, ' hands up response failed :', XMLHttpRequest, textStatus, errorThrown);\r\n\t        errorCallback({\r\n\t          code: textStatus,\r\n\t          msg: ManisResponse.response_hands_up_msg_failed,\r\n\t        });\r\n\t      }\r\n\t    })\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   * 广播会议室锁定情况\r\n\t   * @param status\r\n\t   * @returns {boolean}\r\n\t   */\r\n\t  broadcastRoomLockStatus: function (status) {\r\n\t    var msg = $msg({to: connection.emuc.roomjid, type: 'groupchat'});\r\n\t    msg.c('body', {\r\n\t      xmlns: 'http://igniterealtime.org/protocol/roomlock',\r\n\t      jid: connection.emuc.connection.jid\r\n\t    });\r\n\t    msg.c('status').t(status).up().up();\r\n\t    window.connection.send(msg);\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   * 获取呼叫电话号码的正确号码\r\n\t   * @param phone\r\n\t   * @param successCallback\r\n\t   * @param errorCallback\r\n\t   */\r\n\t  getPhoneNumber: function (phone, successCallback, errorCallback) {\r\n\t    var _header = this.authoredHeader();\r\n\t    $.ajax({\r\n\t      url: window.serverPath + '/clientApi/phone/' + phone + '?roomNumber=' + config.r + '&userJid=' + connection.jid ,\r\n\t      processData: false,\r\n\t      dataType: 'json',\r\n\t      type: 'get',\r\n\t      headers: _header,\r\n\t      async: false,\r\n\t      success: function (rs) {\r\n\t        console.log('send fet phone number response complete : ', rs);\r\n\t        if(rs.code == 200){\r\n\t          successCallback({\r\n\t            code: rs.code,\r\n\t            msg: ManisResponse.get_phone_number_success,\r\n\t            errorCode: ErrorCode.no_error,\r\n\t            response: rs.obj\r\n\t          });\r\n\t        }else {\r\n\t          errorCallback({\r\n\t            code: rs.code,\r\n\t            msg: ManisResponse.get_phone_number_failed,\r\n\t            errorCode: ErrorCode.fetch_ring_phone_number_failed,\r\n\t          });\r\n\t        }\r\n\t      },\r\n\t      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t        console.error('send fet phone number response failed :', XMLHttpRequest, textStatus, errorThrown);\r\n\t        errorCallback({\r\n\t          code: textStatus,\r\n\t          msg: ManisResponse.get_phone_number_failed,\r\n\t          errorCode: ErrorCode.api_fetch_failed,\r\n\t        });\r\n\t      }\r\n\t    })\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   * 设置带宽,兼容协商与不重新协商\r\n\t   * @param bandWidth\r\n\t   * @param callback\r\n\t   */\r\n\t  setVideoBandwidth: function (bandWidth, callback) {\r\n\t    var _this = this;\r\n\t    config.videoBandwidth = bandWidth;\r\n\t    var conferenceHandler = window.activecall || null;\r\n\t    if(!conferenceHandler){\r\n\t      if(callback && typeof(callback) == 'function'){\r\n\t        callback();\r\n\t      }\r\n\t      return;\r\n\t    }\r\n\t    // var peerconnection = conferenceHandler.peerconnection.peerconnection;\r\n\t    // if (RTC.browser === 'chrome' &&\r\n\t    //   'RTCRtpSender' in window &&\r\n\t    //   'setParameters' in window.RTCRtpSender.prototype) {\r\n\t    //\r\n\t    //   var sender = _this.getSender(peerconnection.getSenders(), 'video') ;\r\n\t    //   var parameters = sender.getParameters();\r\n\t    //   parameters.encodings[0].maxBitrate = bandWidth * 1000;\r\n\t    //   sender.setParameters(parameters).then(function () {\r\n\t    //       if(callback && typeof(callback) == 'function'){\r\n\t    //         console.log('set video bandwidth without negotiate: ', bandWidth);\r\n\t    //         callback();\r\n\t    //       }\r\n\t    //     })\r\n\t    //     .catch(function(e){\r\n\t    //       console.error(e);\r\n\t    //     });\r\n\t    //   return;\r\n\t    // }else {\r\n\t    //   conferenceHandler.peerconnectionNegotiate(function () {\r\n\t    //     if(callback && typeof(callback) == 'function'){\r\n\t    //       callback();\r\n\t    //     }\r\n\t    //     return;\r\n\t    //   });\r\n\t    // }\r\n\t  },\r\n\t\r\n\t\r\n\t  /**\r\n\t   *  获取对应的sender\r\n\t   * @param senders\r\n\t   * @param type\r\n\t   * @returns {*}\r\n\t   */\r\n\t  getSender: function (senders, type) {\r\n\t    var returnSender = null;\r\n\t    if(!senders || !senders.length){\r\n\t      return returnSender;\r\n\t    }\r\n\t    for (var i = 0; i < senders.length; i++) {\r\n\t      var sender = senders[i];\r\n\t      if(sender && sender.track.kind == type){\r\n\t        returnSender = sender;\r\n\t      }\r\n\t    }\r\n\t    return returnSender;\r\n\t  },\r\n\t\r\n\t\r\n\t  setRoomAudioMuteStatus: function (mute, callback) {\r\n\t      var _header = this.authoredHeader();\r\n\t      $.ajax({\r\n\t          url: window.serverPath + '/clientApi/conferenceCtrl/'+ config.r + '?ctrlType=allAudio&userJid=' + connection.jid + '&status=' + mute ,\r\n\t          processData: false,\r\n\t          dataType: 'json',\r\n\t          headers: _header,\r\n\t          type: 'get',\r\n\t          success: function (rs) {\r\n\t              console.log('send room audio mute status complete : ', rs);\r\n\t              if(rs.code == 200){\r\n\t                  callback({\r\n\t                      code: rs.code,\r\n\t                      msg: ManisResponse.manage_set_audio_mute_success,\r\n\t                      errorCode: ErrorCode.no_error,\r\n\t                      response: rs.obj\r\n\t                  });\r\n\t              }else {\r\n\t                  callback({\r\n\t                      code: rs.code,\r\n\t                      msg: ManisResponse.manage_set_audio_mute_failed,\r\n\t                      errorCode: ErrorCode.operate_someone_audio_failed,\r\n\t                  });\r\n\t              }\r\n\t          },\r\n\t          error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t              console.error('send room audio mute status failed :', XMLHttpRequest, textStatus, errorThrown);\r\n\t              callback({\r\n\t                  code: textStatus,\r\n\t                  msg: ManisResponse.manage_set_audio_mute_failed,\r\n\t                  errorCode: ErrorCode.operate_someone_audio_failed,\r\n\t              });\r\n\t          }\r\n\t      })\r\n\t  },\r\n\t    \r\n\t    \r\n\t  getClientConfig: function (domain, callback) {\r\n\t      $.ajax({\r\n\t          url: window.serverPath + '/clientApi/config?domain='+ domain,\r\n\t          processData: false,\r\n\t          dataType: 'json',\r\n\t          type: 'get',\r\n\t          success: function (res) {\r\n\t              console.log('fetch client config complete : ', res);\r\n\t              if (res.mcode == 200) {\r\n\t                  config = Object.assign(config, res.obj);\r\n\t              }\r\n\t              if (callback) {\r\n\t                callback()\r\n\t              }\r\n\t          },\r\n\t          error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t              console.error('fetch client config  failed :', XMLHttpRequest, textStatus, errorThrown);\r\n\t          }\r\n\t      })\r\n\t  },\r\n\t\r\n\t  encryptStr: function (password) {\r\n\t      var self = this;\r\n\t      var encrypt = new Encrypt.JSEncrypt();\r\n\t      encrypt.setPublicKey(self.publicKey);\r\n\t      var encrypted = encrypt.encrypt(password);\r\n\t      // console.log('-----------passwordEncrypted----------', encrypted);\r\n\t      return encrypted;\r\n\t  },\r\n\t\r\n\t  authoredHeader: function () {\r\n\t    if (!window.connection || !window.config.token) {\r\n\t      return {}\r\n\t    }\r\n\t    return {\r\n\t      userJid: window.connection.jid,\r\n\t      token: window.config.token\r\n\t    }\r\n\t  }\r\n\t\r\n\t};\r\n\t\r\n\tmodule.exports = publicFunctions;\r\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\n\tvar Code = {\r\n\t  no_error: '000000', // 无错误\r\n\t  no_test_browser_type_or_version: '300000', // 非测试通过的浏览器类型或版本\r\n\t  callback_except: '300001', // 回调函数缺失或类型错误\r\n\t  init_params_error: '300002', // 初始化参数错误,缺少服务器地址\r\n\t\r\n\t  username_except: '300103', // 用户名不能为空\r\n\t  user_password_except: '300104', // 用户密码不能为空\r\n\t  user_login_client_failed: '300105', // 用户登录失败\r\n\t  username_not_exist: '300106', // 用户名错误,用户不存在\r\n\t  user_client_auth_failed: '300107', // 用户密码错误,登录失败\r\n\t  user_login_status_error: '300108', // 用户状态错误\r\n\t  anonymous_login_failed: '300109', // 匿名登录失败\r\n\t  user_friends_fetch_failed: '300110', // 获取好友列表失败\r\n\t  user_out_of_service: '300111', // 服务已到期\r\n\t  user_has_been_block_up: '300112', // 用户已停用\r\n\t\r\n\t  message_server_except: '300201', // 缺少message_server配置\r\n\t  message_server_user_except: '300202', // 缺少mss user, 请确认已经登录授权\r\n\t  message_server_connect_failed: '300203', // mss 连接失败\r\n\t  mss_connection_except: '300204', // 缺少mss 连接,请确认是否已经建立相应的链接\r\n\t\r\n\t  conference_room_password_error: '300300', // 会议室密码不正确\r\n\t  conference_room_not_exist: '300301', // 会议室不存在\r\n\t  conference_room_locked: '300302', //会议室已锁定\r\n\t  conference_room_source_limit: '300303', // 超出会议资源使用限制\r\n\t  conference_room_participant_failed: '300304', // 加入会议室失败\r\n\t  conference_room_participant_out_time: '300305', // 未到可参会时间,会议前15分钟内方可入场\r\n\t  conference_room_focus_except: '300306', // 会议室缺少focus\r\n\t  conference_room_vb_except: '300307', // 会议室缺少video bridge\r\n\t  conference_room_participant_failed_unknown_response_code: '300308', // 加入会议室失败,未知的服务端返回码\r\n\t  conference_room_except: '300309', // 会议室房间号不正确\r\n\t  conference_room_nickname_except: '300310', // 参会昵称不正确\r\n\t  conference_room_not_participate: '300311', // 尚未加入到房间,不能进行房间内的操作\r\n\t  conference_room_un_open: '300312', // 会议室尚未开启\r\n\t  conference_room_wait_others: '300313', // 等待其他成员加入\r\n\t  conference_room_opened: '300314', // 会议室已经开启\r\n\t  will_ring_phone_number_except: '300315', // 需要呼叫的电话号码不能为空\r\n\t  fetch_ring_phone_number_failed: '300316', // 获取需要呼叫的电话号码失败\r\n\t\r\n\t  grant_admin_participant_except: '300401', // 被授予主持人权限的参会者不能为空\r\n\t  grant_admin_participant_failed: '300402', // 授权主持人失败\r\n\t  without_permission_for_the_operation: '300403', //无权执行此操作\r\n\t  grant_admin_participant_not_exist: '300404', // 被授予主持人权限的参会者不在会议室中或已离开\r\n\t  fetch_admin_password_except: '300405', // 获取主持人的密码不能为空\r\n\t  fetch_admin_failed_owen_it: '300406', // 您已经是主持人,无需重复获取\r\n\t  fetch_admin_failed: '300407', // 获取主持人权限失败\r\n\t  eject_participant_except: '300408', // 需要移除会议室的参会者不能为空\r\n\t  eject_participant_not_exist: '300409', // 需要移除会议室的参会者已经不在会议室中\r\n\t  eject_participant_failed: '300410', // 移除会议参会者失败\r\n\t  init_moderator_right_failed: '300411', // 初始化权限失败\r\n\t  hand_up_receiver_except: '300412', // 举手消息接收者不能为空\r\n\t  hand_up_send_failed: '300413', // 发送举手消息失败\r\n\t  hand_up_response_action_illegality: '300414', // 未知的举手响应\r\n\t  response_hands_up_msg_failed: '300415', // 响应举手请求失败\r\n\t  conference_delay_failed: '300416', // 会议延时失败\r\n\t  conference_delay_time_require: '300417', // 会议延时时长不能为空\r\n\t  fetch_admin_failed_wrong_password: '300418', // 获取主持人失败,密码错误\r\n\t  fetch_admin_failed_moderator_exist: '300419', //获取主持人权限失败,房间存在主持人\r\n\t\r\n\t  text_message_except: '300501', // 要发送的文本消息不能为空\r\n\t  private_text_message_receiver_not_exist: '300502', // 私信接收者不在会议室中\r\n\t\r\n\t  sip_gateway_except: '300601', // 网关（Gateway）地址未正确配置\r\n\t  sip_client_except: '300602', // 需要呼叫的视频终端不能为空\r\n\t  sip_call_in_progress: '300603', // 呼叫正在进行,请勿重复呼叫\r\n\t  sip_call_signalling_error: '300604', // 呼叫sip信令格式错误\r\n\t  sip_call_failed_error_password: '300605', // 呼叫sip失败,会议室密码错误\r\n\t  sip_call_hang_up: '300606', // sip已断开\r\n\t  sip_call_unknown_error: '300607', // sip呼叫未知服务端错误\r\n\t  sip_call_send_failed: '300608', // 呼叫消息发送失败\r\n\t\r\n\t  display_model_except: '300701', // 请传入需要变换的显示模式类型\r\n\t  display_model_broadcast_failed: '300702', // 显示模式广播失败\r\n\t  main_display_source_except: '300703', // 主屏资源id不能为空\r\n\t  participants_sort_except: '300704', // 请求排序字段不能为空\r\n\t  main_display_change_failed: '300705', // 主屏设置失败\r\n\t  annotation_action_except: '300801', // 画图板动作不能为空\r\n\t\r\n\t  audio_switch_mute_failed: '400101', // 设置音频开关失败\r\n\t  video_switch_mute_failed: '400102', // 设置视频开关失败\r\n\t  operate_someone_audio_participant_except: '400201', // 请传入要被操作音频开关的用户\r\n\t  operate_someone_audio_failed: '400202', // 主持人设置参会人员音频开关失败\r\n\t  operate_someone_video_participant_except: '400301', // 请传入要被操作视频开关的用户\r\n\t  operate_someone_video_failed: '400302', // 主持人设置参会人员视频开关失败\r\n\t  media_device_get_local_media_failed: '400401', // 获取本地视频失败\r\n\t  media_device_resolution_nonsupport: '400402', // 设备不支持当前会议系统最低需求\r\n\t  media_device_except: '400404', // 未发现可用的相应输入设备\r\n\t  change_video_input_device_except: '400405', // 需要切换的视频输入设备不能为空\r\n\t  change_resolution_not_match: '400406', // 不合法的分视频分辨率高度\r\n\t  change_audio_input_device_except: '400407', // 需要切换的音频输入设备不能为空\r\n\t  change_audio_input_device_failed: '400408', //切换音频输入设备失败\r\n\t  change_audio_output_device_except: '400409', // 需要切换的音频输出设备不能为空\r\n\t  second_stream_except: '400501', // 要双路流分享请传入第二路流\r\n\t  second_stream_share_failed: '400502', // 双路流分享失败\r\n\t  get_user_media_constraints_except: '400601', // 请传入获取流的配置对象\r\n\t  send_only_stream_except: '400701', // 仅发送模式输入流不能为空\r\n\t  local_stream_except: '400702', //需要增加的本地媒体资源不能为空\r\n\t  remove_local_stream_failed: '400702', // 移出本地媒体资源失败\r\n\t\r\n\t  api_fetch_failed: '500000', // 网络错误或连接服务超时\r\n\t  unknown_error: '500500', // 服务异常\r\n\t\r\n\t  invoke_receiver_except: '600101', // 被叫用户不能为空\r\n\t  invoke_send_failed: '600102', // 发送拨号信息失败\r\n\t  called_expired: '600103', // 呼叫已过期,对方已挂机\r\n\t  invoke_room_ready_receiver_except: '600104', // 通知房间已经准备就绪的被叫用户不能为空\r\n\t  send_room_ready_msg_failed: '600105', // 发送房间准备就绪消息失败\r\n\t  called_request_in_processed_sent_failed: '600106', // 广播被叫已处理失败\r\n\t\r\n\t  share_screen_extended_plugin_except: '700101', // 屏幕分享插件尚未安装\r\n\t  share_screen_fetch_stream_failed: '700102', // 捕获屏幕视频流失败\r\n\t  share_screen_stop_failed: '700103', // 结束屏幕分享失败\r\n\t  share_screen_nonsupport: '700104', // 当前浏览器版本不支持屏幕分享\r\n\t};\r\n\t\r\n\tmodule.exports = Code;\r\n\t\r\n\t\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar SDPUtil = __webpack_require__(30);\r\n\tvar adapter = __webpack_require__(12);\r\n\t\r\n\tvar _uniqueId = Math.round(Math.random() * 10000);\r\n\t\r\n\tvar ms = {\r\n\t    findValueByName: function (arr, name) {\r\n\t        for (var i = 0; i < arr.length; i++) {\r\n\t            if (arr[i].name == name) {\r\n\t                return arr[i][\"value\"];\r\n\t            }\r\n\t        }\r\n\t    },\r\n\t    getUniqueId: function (suffix) {\r\n\t        if (typeof (suffix) == \"string\" || typeof (suffix) == \"number\") {\r\n\t            return ++_uniqueId + \":\" + suffix;\r\n\t        } else {\r\n\t            return ++_uniqueId + \"\";\r\n\t        }\r\n\t    },\r\n\t    textToXML: function (text) {\r\n\t        var doc = null;\r\n\t        if (window['DOMParser']) {\r\n\t            var parser = new DOMParser();\r\n\t            doc = parser.parseFromString(text, 'text/xml');\r\n\t        } else if (window['ActiveXObject']) {\r\n\t            var doc = new ActiveXObject(\"MSXML2.DOMDocument\");\r\n\t            doc.async = false;\r\n\t            doc.loadXML(text);\r\n\t        } else {\r\n\t            throw Error('No DOMParser object found.');\r\n\t        }\r\n\t        return doc.firstChild;\r\n\t    },\r\n\t\r\n\t    ansToSessAcc: function (sess, contents) {\r\n\t        var sessionAccept = '<iq to=\"' + sess.peerjid + '\" type=\"set\" xmlns=\"jabber:client\" from=\"' + sess.connection.jid + '\" id=\"' + this.getUniqueId(\"sendIQ\") + '\">' +\r\n\t            '<jingle xmlns=\"urn:xmpp:jingle:1\" action=\"session-accept\" initiator=\"' + sess.initiator + '\" responder=\"' + sess.responder + '\" sid=\"' + sess.sid + '\">' +\r\n\t            '<attend xmlns=\"http://jitsi.org/protocol/colibri\" type=\"singlevoice\" endpoint=\"\"/>' +\r\n\t            '<group xmlns=\"urn:xmpp:jingle:apps:grouping:0\" semantics=\"BUNDLE\">' +\r\n\t            '<content name=\"audio\"/>' +\r\n\t            '<content name=\"video\"/>' +\r\n\t            '<content name=\"data\"/>' +\r\n\t            '</group>' +\r\n\t            contents +\r\n\t            '</jingle></iq>';\r\n\t        return this.textToXML(sessionAccept);\r\n\t    },\r\n\t\r\n\t    createDataNode: function (ufrag, pwd, fingerprints) {\r\n\t        var contentNode =\r\n\t            '<content creator=\"responder\" name=\"data\">' +\r\n\t            '<transport ufrag=\"' + ufrag + '\" pwd=\"' + pwd + '\" xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\">' +\r\n\t            '<sctpmap xmlns=\"urn:xmpp:jingle:transports:dtls-sctp:1\" number=\"5000\" protocol=\"webrtc-datachannel\" streams=\"1024\"/>' +\r\n\t            '<fingerprint hash=\"' + fingerprints[0].split(\":\")[1] + '\" xmlns=\"urn:xmpp:jingle:apps:dtls:0\" setup=\"active\">' + fingerprints[1] + '</fingerprint>' +\r\n\t            '</transport>' +\r\n\t            '</content>';\r\n\t        return contentNode;\r\n\t    },\r\n\t\r\n\t    createMediaNode: function (mediaName, mediaGroup, ssrc, cname, msid, ufrag, pwd, fingerprints) {\r\n\t        var contentNode =\r\n\t            '<content creator=\"responder\" name=\"' + mediaName + '\" senders=\"both\">' +\r\n\t            '<description xmlns=\"urn:xmpp:jingle:apps:rtp:1\" media=\"' + mediaName + '\" ssrc=\"' + ssrc + '\">';\r\n\t        contentNode += this.createPayloadNode(mediaName, mediaGroup);\r\n\t        contentNode += this.createSourceNode(mediaName, ssrc, cname, msid);\r\n\t        contentNode += '</description>' +\r\n\t            '<transport ufrag=\"' + ufrag + '\" pwd=\"' + pwd + '\" xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\">' +\r\n\t            '<fingerprint hash=\"' + fingerprints[0].split(\":\")[1] + '\" xmlns=\"urn:xmpp:jingle:apps:dtls:0\" setup=\"active\">' + fingerprints[1] + '</fingerprint>' +\r\n\t            '</transport>' +\r\n\t            '</content>';\r\n\t        return contentNode;\r\n\t\r\n\t    },\r\n\t\r\n\t    createSourceNode: function (mediaName, ssrc, cname, msid) {\r\n\t        var contentNode = '';\r\n\t        contentNode += this.createSourceParamsNode(ssrc, cname, msid);\r\n\t        contentNode += '<rtcp-mux/>';\r\n\t        if (mediaName == \"audio\") {\r\n\t            contentNode += '<rtp-hdrext xmlns=\"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0\" uri=\"urn:ietf:params:rtp-hdrext:ssrc-audio-level\" id=\"1\"/>';\r\n\t        } else {\r\n\t            contentNode +=\r\n\t                '<rtp-hdrext xmlns=\"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0\" uri=\"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\" id=\"3\"/>' +\r\n\t                '<rtp-hdrext xmlns=\"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0\" uri=\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" id=\"5\"/>';\r\n\t        }\r\n\t        return contentNode;\r\n\t    },\r\n\t\r\n\t    createPayloadNode: function (mediaName, mediaGroup) {\r\n\t        var contentNode = '';\r\n\t        var rtpmap = SDPUtil.find_line(mediaGroup, \"a=rtpmap\").split(\":\")[1];\r\n\t        var rtpmap1 = rtpmap.split(\" \")[1];\r\n\t        if (mediaName == \"audio\") {\r\n\t            var _fmtp = SDPUtil.find_line(mediaGroup, \"a=fmtp\"); //;\r\n\t            if (_fmtp) {\r\n\t                var fmtpMus = _fmtp.split(\" \")[1].split(\";\");\r\n\t                contentNode +=\r\n\t                    '<payload-type id=\"' + rtpmap.split(\" \")[0] + '\" name=\"' + rtpmap1.split(\"/\")[0] + '\" clockrate=\"' + rtpmap1.split(\"/\")[1] + '\" channels=\"' + rtpmap1.split(\"/\")[2] + '\">' +\r\n\t                    '<parameter name=\"minptime\" value=\"' + fmtpMus[0].split(\"=\")[1] + '\"/>' +\r\n\t                    '<parameter name=\"useinbandfec\" value=\"' + fmtpMus[1].split(\"=\")[1] + '\"/>' +\r\n\t                    '</payload-type>';\r\n\t            } else {\r\n\t                contentNode +=\r\n\t                    '<payload-type id=\"' + rtpmap.split(\" \")[0] + '\" name=\"' + rtpmap1.split(\"/\")[0] + '\" clockrate=\"' + rtpmap1.split(\"/\")[1] + '\" channels=\"' + rtpmap1.split(\"/\")[2] + '\">' +\r\n\t                    '</payload-type>';\r\n\t            }\r\n\t        } else {\r\n\t            contentNode +=\r\n\t                '<payload-type id=\"' + rtpmap.split(\" \")[0] + '\" name=\"' + rtpmap1.split(\"/\")[0] + '\" clockrate=\"' + rtpmap1.split(\"/\")[1] + '\" channels=\"1\">' +\r\n\t                '<rtcp-fb xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\" type=\"transport-cc\"/>' +\r\n\t                '<rtcp-fb xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\" type=\"ccm\" subtype=\"fir\"/>' +\r\n\t                '<rtcp-fb xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\" type=\"nack\"/>' +\r\n\t                '<rtcp-fb xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\" type=\"nack\" subtype=\"pli\"/>' +\r\n\t                '</payload-type>';\r\n\t        }\r\n\t        return contentNode;\r\n\t    },\r\n\t    getSemantics: function () {\r\n\t        var semantics = null;\r\n\t        var browser = adapter.browserDetails.browser;\r\n\t        var version = adapter.browserDetails.version;\r\n\t        if (browser == \"chrome\") {\r\n\t            if (version > 75) {\r\n\t                semantics = \"unified-plan\";\r\n\t            } else {\r\n\t                semantics = \"plan-b\";\r\n\t            }\r\n\t        } else if (browser == \"firefox\") {\r\n\t            semantics = \"firefox\";\r\n\t        } else {\r\n\t            semantics = \"plan-b\";\r\n\t        }\r\n\t        return semantics;\r\n\t    },\r\n\t    createSourceParamsNode: function (ssrc, cname, msid) {\r\n\t        var source = '<source ssrc=\"' + ssrc + '\" xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\">' +\r\n\t            '<parameter name=\"cname\" value=\"' + cname + '\"/>' +\r\n\t            '<parameter name=\"msid\" value=\"' + msid + '\"/>' +\r\n\t            '<parameter name=\"mslabel\" value=\"' + msid.split(\" \")[0] + '\"/>' +\r\n\t            '<parameter name=\"label\" value=\"' + msid.split(\" \")[1] + '\"/>' +\r\n\t            '</source>';\r\n\t        return source;\r\n\t    },\r\n\t\r\n\t    getBandwidth: function (sourceType) {\r\n\t        var bandwidth = {\r\n\t            audio: config.audioBandwidth ? config.audioBandwidth : 64,   // 64kbits  minimum\r\n\t            video: config.videoBandwidth ? config.videoBandwidth : 256// 256kbits (both min-max)\r\n\t        };\r\n\t        var browser = adapter.browserDetails.browser;\r\n\t        var version = adapter.browserDetails.version;\r\n\t        if (browser == \"chrome\") {\r\n\t            if (version == 57) {\r\n\t                bandwidth.audio *= 1000;\r\n\t                bandwidth.video *= 1000;\r\n\t            }\r\n\t        }\r\n\t        return bandwidth[sourceType];\r\n\t    },\r\n\t    getBrowserName: function () {\r\n\t        return adapter.browserDetails.browser;\r\n\t    },\r\n\t    getBrowserVersion: function () {\r\n\t        return adapter.browserDetails.version;\r\n\t    },\r\n\t    getBrowserInfo: function () {\r\n\t        return {\r\n\t            name: adapter.browserDetails.browser,\r\n\t            version: adapter.browserDetails.version\r\n\t        };\r\n\t    },\r\n\t    isSafari: function () {\r\n\t        return adapter.browserDetails.browser == \"safari\";\r\n\t    },\r\n\t    isChrome: function () {\r\n\t        return adapter.browserDetails.browser == \"chrome\";\r\n\t    },\r\n\t    isFirefox: function () {\r\n\t        return adapter.browserDetails.browser == \"firefox\";\r\n\t    },\r\n\t    getResolution: function () {\r\n\t        return [\r\n\t            {width: {exact: 1920}, height: {exact: 1080}, videoBandwidth: 512 * 4},\r\n\t            {width: {exact: 1280}, height: {exact: 720}, videoBandwidth: 512 * 2},\r\n\t            {width: {exact: 1024}, height: {exact: 768}, videoBandwidth: 512 * 2},\r\n\t            {width: {exact: 960}, height: {exact: 540}, videoBandwidth: 512 * 1},\r\n\t            {width: {exact: 640}, height: {exact: 480}, videoBandwidth: 512 * 1},\r\n\t            // {width: {exact: 640}, height: {exact: 360}, videoBandwidth: 512 * 0.5},\r\n\t            {width: {exact: 320}, height: {exact: 240}, videoBandwidth: 512 * 0.5},\r\n\t            {width: {exact: 320}, height: {exact: 180}, videoBandwidth: 512 * 0.5}\r\n\t        ];\r\n\t    }\r\n\t};\r\n\texports = module.exports = ms;\r\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\n\t/**\r\n\t * Contains utility classes used in SDP class.\r\n\t *\r\n\t */\r\n\t\r\n\t\r\n\tSDPUtil = {\r\n\t  iceparams: function (mediadesc, sessiondesc) {\r\n\t    var data = null;\r\n\t    if (SDPUtil.find_line(mediadesc, 'a=ice-ufrag:', sessiondesc) &&\r\n\t      SDPUtil.find_line(mediadesc, 'a=ice-pwd:', sessiondesc)) {\r\n\t      data = {\r\n\t        ufrag: SDPUtil.parse_iceufrag(SDPUtil.find_line(mediadesc, 'a=ice-ufrag:', sessiondesc)),\r\n\t        pwd: SDPUtil.parse_icepwd(SDPUtil.find_line(mediadesc, 'a=ice-pwd:', sessiondesc))\r\n\t      };\r\n\t    }\r\n\t    return data;\r\n\t  },\r\n\t  parse_iceufrag: function (line) {\r\n\t    return line.substring(12);\r\n\t  },\r\n\t  build_iceufrag: function (frag) {\r\n\t    return 'a=ice-ufrag:' + frag;\r\n\t  },\r\n\t  parse_icepwd: function (line) {\r\n\t    return line.substring(10);\r\n\t  },\r\n\t  build_icepwd: function (pwd) {\r\n\t    return 'a=ice-pwd:' + pwd;\r\n\t  },\r\n\t  parse_mid: function (line) {\r\n\t    return line.substring(6);\r\n\t  },\r\n\t  parse_mline: function (line) {\r\n\t    var parts = line.substring(2).split(' '),\r\n\t      data = {};\r\n\t    data.media = parts.shift();\r\n\t    data.port = parts.shift();\r\n\t    data.proto = parts.shift();\r\n\t    if (parts[parts.length - 1] === '') { // trailing whitespace\r\n\t      parts.pop();\r\n\t    }\r\n\t    data.fmt = parts;\r\n\t    return data;\r\n\t  },\r\n\t  build_mline: function (mline) {\r\n\t    // return 'm=' + mline.media + ' ' + mline.port + ' ' + mline.proto + ' ' + mline.fmt.join(' ');\r\n\t    return 'm=' + mline.media + ' 9 ' + mline.proto + ' ' + mline.fmt.join(' ');\r\n\t  },\r\n\t  parse_rtpmap: function (line) {\r\n\t    var parts = line.substring(9).split(' '),\r\n\t      data = {};\r\n\t    data.id = parts.shift();\r\n\t    parts = parts[0].split('/');\r\n\t    data.name = parts.shift();\r\n\t    data.clockrate = parts.shift();\r\n\t    data.channels = parts.length ? parts.shift() : '1';\r\n\t    return data;\r\n\t  },\r\n\t  /**\r\n\t   * Parses SDP line \"a=sctpmap:...\" and extracts SCTP port from it.\r\n\t   * @param line eg. \"a=sctpmap:5000 webrtc-datachannel\"\r\n\t   * @returns [SCTP port number, protocol, streams]\r\n\t   */\r\n\t  parse_sctpmap: function (line) {\r\n\t    var parts = line.substring(10).split(' ');\r\n\t    var sctpPort = parts[0];\r\n\t    var protocol = parts[1];\r\n\t    // Stream count is optional\r\n\t    var streamCount = parts.length > 2 ? parts[2] : null;\r\n\t    return [sctpPort, protocol, streamCount];// SCTP port\r\n\t  },\r\n\t  build_rtpmap: function (el) {\r\n\t    var line = 'a=rtpmap:' + el.getAttribute('id') + ' ' + el.getAttribute('name') + '/' + el.getAttribute('clockrate');\r\n\t    if (el.getAttribute('channels') && el.getAttribute('channels') != '1') {\r\n\t      line += '/' + el.getAttribute('channels');\r\n\t    }\r\n\t    return line;\r\n\t  },\r\n\t  parse_crypto: function (line) {\r\n\t    var parts = line.substring(9).split(' '),\r\n\t      data = {};\r\n\t    data.tag = parts.shift();\r\n\t    data['crypto-suite'] = parts.shift();\r\n\t    data['key-params'] = parts.shift();\r\n\t    if (parts.length) {\r\n\t      data['session-params'] = parts.join(' ');\r\n\t    }\r\n\t    return data;\r\n\t  },\r\n\t  parse_fingerprint: function (line) { // RFC 4572\r\n\t    var parts = line.substring(14).split(' '),\r\n\t      data = {};\r\n\t    data.hash = parts.shift();\r\n\t    data.fingerprint = parts.shift();\r\n\t    // TODO assert that fingerprint satisfies 2UHEX *(\":\" 2UHEX) ?\r\n\t    return data;\r\n\t  },\r\n\t  parse_fmtp: function (line) {\r\n\t    var parts = line.split(' '),\r\n\t      i, key, value,\r\n\t      data = [];\r\n\t    parts.shift();\r\n\t    parts = parts.join(' ').split(';');\r\n\t    for (i = 0; i < parts.length; i++) {\r\n\t      key = parts[i].split('=')[0];\r\n\t      while (key.length && key[0] == ' ') {\r\n\t        key = key.substring(1);\r\n\t      }\r\n\t      value = parts[i].split('=')[1];\r\n\t      if (key && value) {\r\n\t        data.push({name: key, value: value});\r\n\t      } else if (key) {\r\n\t        // rfc 4733 (DTMF) style stuff\r\n\t        data.push({name: '', value: key});\r\n\t      }\r\n\t    }\r\n\t    return data;\r\n\t  },\r\n\t  parse_icecandidate: function (line) {\r\n\t    var candidate = {},\r\n\t      elems = line.split(' ');\r\n\t    candidate.foundation = elems[0].substring(12);\r\n\t    candidate.component = elems[1];\r\n\t    candidate.protocol = elems[2].toLowerCase();\r\n\t    candidate.priority = elems[3];\r\n\t    candidate.ip = elems[4];\r\n\t    candidate.port = elems[5];\r\n\t    // elems[6] => \"typ\"\r\n\t    candidate.type = elems[7];\r\n\t    candidate.generation = 0; // default value, may be overwritten below\r\n\t    for (var i = 8; i < elems.length; i += 2) {\r\n\t      switch (elems[i]) {\r\n\t        case 'raddr':\r\n\t          candidate['rel-addr'] = elems[i + 1];\r\n\t          break;\r\n\t        case 'rport':\r\n\t          candidate['rel-port'] = elems[i + 1];\r\n\t          break;\r\n\t        case 'generation':\r\n\t          candidate.generation = elems[i + 1];\r\n\t          break;\r\n\t        case 'tcptype':\r\n\t          candidate.tcptype = elems[i + 1];\r\n\t          break;\r\n\t        default: // TODO\r\n\t          console.log('parse_icecandidate not translating \"' + elems[i] + '\" = \"' + elems[i + 1] + '\"');\r\n\t      }\r\n\t    }\r\n\t    candidate.network = '1';\r\n\t    candidate.id = Math.random().toString(36).substr(2, 10); // not applicable to SDP -- FIXME: should be unique, not just random\r\n\t    return candidate;\r\n\t  },\r\n\t  build_icecandidate: function (cand) {\r\n\t    var line = ['a=candidate:' + cand.foundation, cand.component, cand.protocol, cand.priority, cand.ip, cand.port, 'typ', cand.type].join(' ');\r\n\t    line += ' ';\r\n\t    switch (cand.type) {\r\n\t      case 'srflx':\r\n\t      case 'prflx':\r\n\t      case 'relay':\r\n\t        if (cand.hasOwnAttribute('rel-addr') && cand.hasOwnAttribute('rel-port')) {\r\n\t          line += 'raddr';\r\n\t          line += ' ';\r\n\t          line += cand['rel-addr'];\r\n\t          line += ' ';\r\n\t          line += 'rport';\r\n\t          line += ' ';\r\n\t          line += cand['rel-port'];\r\n\t          line += ' ';\r\n\t        }\r\n\t        break;\r\n\t    }\r\n\t    if (cand.hasOwnAttribute('tcptype')) {\r\n\t      line += 'tcptype';\r\n\t      line += ' ';\r\n\t      line += cand.tcptype;\r\n\t      line += ' ';\r\n\t    }\r\n\t    line += 'generation';\r\n\t    line += ' ';\r\n\t    line += cand.hasOwnAttribute('generation') ? cand.generation : '0';\r\n\t    return line;\r\n\t  },\r\n\t  parse_ssrc: function (desc) {\r\n\t    // proprietary mapping of a=ssrc lines\r\n\t    // TODO: see \"Jingle RTP Source Description\" by Juberti and P. Thatcher on google docs\r\n\t    // and parse according to that\r\n\t    var lines = desc.split('\\r\\n'),\r\n\t      data = {};\r\n\t    for (var i = 0; i < lines.length; i++) {\r\n\t      if (lines[i].substring(0, 7) == 'a=ssrc:') {\r\n\t        var idx = lines[i].indexOf(' ');\r\n\t        data[lines[i].substr(idx + 1).split(':', 2)[0]] = lines[i].substr(idx + 1).split(':', 2)[1];\r\n\t      }\r\n\t    }\r\n\t    return data;\r\n\t  },\r\n\t  parse_rtcpfb: function (line) {\r\n\t    var parts = line.substr(10).split(' ');\r\n\t    var data = {};\r\n\t    data.pt = parts.shift();\r\n\t    data.type = parts.shift();\r\n\t    data.params = parts;\r\n\t    return data;\r\n\t  },\r\n\t  parse_extmap: function (line) {\r\n\t    var parts = line.substr(9).split(' ');\r\n\t    var data = {};\r\n\t    data.value = parts.shift();\r\n\t    if (data.value.indexOf('/') != -1) {\r\n\t      data.direction = data.value.substr(data.value.indexOf('/') + 1);\r\n\t      data.value = data.value.substr(0, data.value.indexOf('/'));\r\n\t    } else {\r\n\t      data.direction = 'both';\r\n\t    }\r\n\t    data.uri = parts.shift();\r\n\t    data.params = parts;\r\n\t    return data;\r\n\t  },\r\n\t  find_line: function (haystack, needle, sessionpart) {\r\n\t    var lines = haystack.split('\\r\\n');\r\n\t    for (var i = 0; i < lines.length; i++) {\r\n\t      if (lines[i].substring(0, needle.length) == needle) {\r\n\t        return lines[i];\r\n\t      }\r\n\t    }\r\n\t    if (!sessionpart) {\r\n\t      return false;\r\n\t    }\r\n\t    // search session part\r\n\t    lines = sessionpart.split('\\r\\n');\r\n\t    for (var j = 0; j < lines.length; j++) {\r\n\t      if (lines[j].substring(0, needle.length) == needle) {\r\n\t        return lines[j];\r\n\t      }\r\n\t    }\r\n\t    return false;\r\n\t  },\r\n\t  find_lines: function (haystack, needle, sessionpart) {\r\n\t    var lines = haystack.split('\\r\\n'),\r\n\t      needles = [];\r\n\t    for (var i = 0; i < lines.length; i++) {\r\n\t      if (lines[i].substring(0, needle.length) == needle)\r\n\t        needles.push(lines[i]);\r\n\t    }\r\n\t    if (needles.length || !sessionpart) {\r\n\t      return needles;\r\n\t    }\r\n\t    // search session part\r\n\t    lines = sessionpart.split('\\r\\n');\r\n\t    for (var j = 0; j < lines.length; j++) {\r\n\t      if (lines[j].substring(0, needle.length) == needle) {\r\n\t        needles.push(lines[j]);\r\n\t      }\r\n\t    }\r\n\t    return needles;\r\n\t  },\r\n\t  candidateToJingle: function (line) {\r\n\t    // a=candidate:2979166662 1 udp 2113937151 192.168.2.100 57698 typ host generation 0\r\n\t    //      <candidate component=... foundation=... generation=... id=... ip=... network=... port=... priority=... protocol=... type=.../>\r\n\t    if (line.indexOf('candidate:') === 0) {\r\n\t      line = 'a=' + line;\r\n\t    } else if (line.substring(0, 12) != 'a=candidate:') {\r\n\t      console.log('parseCandidate called with a line that is not a candidate line');\r\n\t      console.log(line);\r\n\t      return null;\r\n\t    }\r\n\t    if (line.substring(line.length - 2) == '\\r\\n') // chomp it\r\n\t      line = line.substring(0, line.length - 2);\r\n\t    var candidate = {},\r\n\t      elems = line.split(' '),\r\n\t      i;\r\n\t    if (elems[6] != 'typ') {\r\n\t      console.log('did not find typ in the right place');\r\n\t      console.log(line);\r\n\t      return null;\r\n\t    }\r\n\t    candidate.foundation = elems[0].substring(12);\r\n\t    candidate.component = elems[1];\r\n\t    candidate.protocol = elems[2].toLowerCase();\r\n\t    candidate.priority = elems[3];\r\n\t    candidate.ip = elems[4];\r\n\t    candidate.port = elems[5];\r\n\t    // elems[6] => \"typ\"\r\n\t    candidate.type = elems[7];\r\n\t\r\n\t    candidate.generation = '0'; // default, may be overwritten below\r\n\t    for (i = 8; i < elems.length; i += 2) {\r\n\t      switch (elems[i]) {\r\n\t        case 'raddr':\r\n\t          candidate['rel-addr'] = elems[i + 1];\r\n\t          break;\r\n\t        case 'rport':\r\n\t          candidate['rel-port'] = elems[i + 1];\r\n\t          break;\r\n\t        case 'generation':\r\n\t          candidate.generation = elems[i + 1];\r\n\t          break;\r\n\t        case 'tcptype':\r\n\t          candidate.tcptype = elems[i + 1];\r\n\t          break;\r\n\t        default: // TODO\r\n\t          if(config.debug)\r\n\t            console.log('not translating \"' + elems[i] + '\" = \"' + elems[i + 1] + '\"');\r\n\t      }\r\n\t    }\r\n\t    candidate.network = '1';\r\n\t    candidate.id = Math.random().toString(36).substr(2, 10); // not applicable to SDP -- FIXME: should be unique, not just random\r\n\t    return candidate;\r\n\t  },\r\n\t  candidateFromJingle: function (cand) {\r\n\t    var line = 'a=candidate:';\r\n\t    line += cand.getAttribute('foundation');\r\n\t    line += ' ';\r\n\t    line += cand.getAttribute('component');\r\n\t    line += ' ';\r\n\t    line += cand.getAttribute('protocol'); //.toUpperCase(); // chrome M23 doesn't like this\r\n\t    line += ' ';\r\n\t    line += cand.getAttribute('priority');\r\n\t    line += ' ';\r\n\t    line += cand.getAttribute('ip');\r\n\t    line += ' ';\r\n\t    line += cand.getAttribute('port');\r\n\t    line += ' ';\r\n\t    line += 'typ';\r\n\t    line += ' ' + cand.getAttribute('type');\r\n\t    line += ' ';\r\n\t    switch (cand.getAttribute('type')) {\r\n\t      case 'srflx':\r\n\t      case 'prflx':\r\n\t      case 'relay':\r\n\t        if (cand.getAttribute('rel-addr') && cand.getAttribute('rel-port')) {\r\n\t          line += 'raddr';\r\n\t          line += ' ';\r\n\t          line += cand.getAttribute('rel-addr');\r\n\t          line += ' ';\r\n\t          line += 'rport';\r\n\t          line += ' ';\r\n\t          line += cand.getAttribute('rel-port');\r\n\t          line += ' ';\r\n\t        }\r\n\t        break;\r\n\t    }\r\n\t    if (cand.getAttribute('protocol').toLowerCase() == 'tcp') {\r\n\t      line += 'tcptype';\r\n\t      line += ' ';\r\n\t      line += cand.getAttribute('tcptype');\r\n\t      line += ' ';\r\n\t    }\r\n\t    line += 'generation';\r\n\t    line += ' ';\r\n\t    line += cand.getAttribute('generation') || '0';\r\n\t    return line + '\\r\\n';\r\n\t  }\r\n\t};\r\n\t\r\n\texports = module.exports = SDPUtil;\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t(function (global, factory) {\n\t\t true ? factory(exports) :\n\t\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t\t(factory((global.JSEncrypt = {})));\n\t}(this, (function (exports) { 'use strict';\n\t\n\tvar BI_RM = \"0123456789abcdefghijklmnopqrstuvwxyz\";\n\tfunction int2char(n) {\n\t    return BI_RM.charAt(n);\n\t}\n\t//#region BIT_OPERATIONS\n\t// (public) this & a\n\tfunction op_and(x, y) {\n\t    return x & y;\n\t}\n\t// (public) this | a\n\tfunction op_or(x, y) {\n\t    return x | y;\n\t}\n\t// (public) this ^ a\n\tfunction op_xor(x, y) {\n\t    return x ^ y;\n\t}\n\t// (public) this & ~a\n\tfunction op_andnot(x, y) {\n\t    return x & ~y;\n\t}\n\t// return index of lowest 1-bit in x, x < 2^31\n\tfunction lbit(x) {\n\t    if (x == 0) {\n\t        return -1;\n\t    }\n\t    var r = 0;\n\t    if ((x & 0xffff) == 0) {\n\t        x >>= 16;\n\t        r += 16;\n\t    }\n\t    if ((x & 0xff) == 0) {\n\t        x >>= 8;\n\t        r += 8;\n\t    }\n\t    if ((x & 0xf) == 0) {\n\t        x >>= 4;\n\t        r += 4;\n\t    }\n\t    if ((x & 3) == 0) {\n\t        x >>= 2;\n\t        r += 2;\n\t    }\n\t    if ((x & 1) == 0) {\n\t        ++r;\n\t    }\n\t    return r;\n\t}\n\t// return number of 1 bits in x\n\tfunction cbit(x) {\n\t    var r = 0;\n\t    while (x != 0) {\n\t        x &= x - 1;\n\t        ++r;\n\t    }\n\t    return r;\n\t}\n\t//#endregion BIT_OPERATIONS\n\t\n\tvar b64map = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\tvar b64pad = \"=\";\n\tfunction hex2b64(h) {\n\t    var i;\n\t    var c;\n\t    var ret = \"\";\n\t    for (i = 0; i + 3 <= h.length; i += 3) {\n\t        c = parseInt(h.substring(i, i + 3), 16);\n\t        ret += b64map.charAt(c >> 6) + b64map.charAt(c & 63);\n\t    }\n\t    if (i + 1 == h.length) {\n\t        c = parseInt(h.substring(i, i + 1), 16);\n\t        ret += b64map.charAt(c << 2);\n\t    }\n\t    else if (i + 2 == h.length) {\n\t        c = parseInt(h.substring(i, i + 2), 16);\n\t        ret += b64map.charAt(c >> 2) + b64map.charAt((c & 3) << 4);\n\t    }\n\t    while ((ret.length & 3) > 0) {\n\t        ret += b64pad;\n\t    }\n\t    return ret;\n\t}\n\t// convert a base64 string to hex\n\tfunction b64tohex(s) {\n\t    var ret = \"\";\n\t    var i;\n\t    var k = 0; // b64 state, 0-3\n\t    var slop = 0;\n\t    for (i = 0; i < s.length; ++i) {\n\t        if (s.charAt(i) == b64pad) {\n\t            break;\n\t        }\n\t        var v = b64map.indexOf(s.charAt(i));\n\t        if (v < 0) {\n\t            continue;\n\t        }\n\t        if (k == 0) {\n\t            ret += int2char(v >> 2);\n\t            slop = v & 3;\n\t            k = 1;\n\t        }\n\t        else if (k == 1) {\n\t            ret += int2char((slop << 2) | (v >> 4));\n\t            slop = v & 0xf;\n\t            k = 2;\n\t        }\n\t        else if (k == 2) {\n\t            ret += int2char(slop);\n\t            ret += int2char(v >> 2);\n\t            slop = v & 3;\n\t            k = 3;\n\t        }\n\t        else {\n\t            ret += int2char((slop << 2) | (v >> 4));\n\t            ret += int2char(v & 0xf);\n\t            k = 0;\n\t        }\n\t    }\n\t    if (k == 1) {\n\t        ret += int2char(slop << 2);\n\t    }\n\t    return ret;\n\t}\n\t\n\t/*! *****************************************************************************\r\n\tCopyright (c) Microsoft Corporation. All rights reserved.\r\n\tLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n\tthis file except in compliance with the License. You may obtain a copy of the\r\n\tLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\t\r\n\tTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n\tKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n\tWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n\tMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\t\r\n\tSee the Apache Version 2.0 License for specific language governing permissions\r\n\tand limitations under the License.\r\n\t***************************************************************************** */\r\n\t/* global Reflect, Promise */\r\n\t\r\n\tvar extendStatics = function(d, b) {\r\n\t    extendStatics = Object.setPrototypeOf ||\r\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\t    return extendStatics(d, b);\r\n\t};\r\n\t\r\n\tfunction __extends(d, b) {\r\n\t    extendStatics(d, b);\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t}\n\t\n\t// Hex JavaScript decoder\n\t// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\n\t// Permission to use, copy, modify, and/or distribute this software for any\n\t// purpose with or without fee is hereby granted, provided that the above\n\t// copyright notice and this permission notice appear in all copies.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n\t// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n\t// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n\t// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n\t// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n\t// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n\t// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\t/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\n\tvar decoder;\n\tvar Hex = {\n\t    decode: function (a) {\n\t        var i;\n\t        if (decoder === undefined) {\n\t            var hex = \"0123456789ABCDEF\";\n\t            var ignore = \" \\f\\n\\r\\t\\u00A0\\u2028\\u2029\";\n\t            decoder = {};\n\t            for (i = 0; i < 16; ++i) {\n\t                decoder[hex.charAt(i)] = i;\n\t            }\n\t            hex = hex.toLowerCase();\n\t            for (i = 10; i < 16; ++i) {\n\t                decoder[hex.charAt(i)] = i;\n\t            }\n\t            for (i = 0; i < ignore.length; ++i) {\n\t                decoder[ignore.charAt(i)] = -1;\n\t            }\n\t        }\n\t        var out = [];\n\t        var bits = 0;\n\t        var char_count = 0;\n\t        for (i = 0; i < a.length; ++i) {\n\t            var c = a.charAt(i);\n\t            if (c == \"=\") {\n\t                break;\n\t            }\n\t            c = decoder[c];\n\t            if (c == -1) {\n\t                continue;\n\t            }\n\t            if (c === undefined) {\n\t                throw new Error(\"Illegal character at offset \" + i);\n\t            }\n\t            bits |= c;\n\t            if (++char_count >= 2) {\n\t                out[out.length] = bits;\n\t                bits = 0;\n\t                char_count = 0;\n\t            }\n\t            else {\n\t                bits <<= 4;\n\t            }\n\t        }\n\t        if (char_count) {\n\t            throw new Error(\"Hex encoding incomplete: 4 bits missing\");\n\t        }\n\t        return out;\n\t    }\n\t};\n\t\n\t// Base64 JavaScript decoder\n\t// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\n\t// Permission to use, copy, modify, and/or distribute this software for any\n\t// purpose with or without fee is hereby granted, provided that the above\n\t// copyright notice and this permission notice appear in all copies.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n\t// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n\t// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n\t// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n\t// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n\t// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n\t// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\t/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\n\tvar decoder$1;\n\tvar Base64 = {\n\t    decode: function (a) {\n\t        var i;\n\t        if (decoder$1 === undefined) {\n\t            var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\t            var ignore = \"= \\f\\n\\r\\t\\u00A0\\u2028\\u2029\";\n\t            decoder$1 = Object.create(null);\n\t            for (i = 0; i < 64; ++i) {\n\t                decoder$1[b64.charAt(i)] = i;\n\t            }\n\t            for (i = 0; i < ignore.length; ++i) {\n\t                decoder$1[ignore.charAt(i)] = -1;\n\t            }\n\t        }\n\t        var out = [];\n\t        var bits = 0;\n\t        var char_count = 0;\n\t        for (i = 0; i < a.length; ++i) {\n\t            var c = a.charAt(i);\n\t            if (c == \"=\") {\n\t                break;\n\t            }\n\t            c = decoder$1[c];\n\t            if (c == -1) {\n\t                continue;\n\t            }\n\t            if (c === undefined) {\n\t                throw new Error(\"Illegal character at offset \" + i);\n\t            }\n\t            bits |= c;\n\t            if (++char_count >= 4) {\n\t                out[out.length] = (bits >> 16);\n\t                out[out.length] = (bits >> 8) & 0xFF;\n\t                out[out.length] = bits & 0xFF;\n\t                bits = 0;\n\t                char_count = 0;\n\t            }\n\t            else {\n\t                bits <<= 6;\n\t            }\n\t        }\n\t        switch (char_count) {\n\t            case 1:\n\t                throw new Error(\"Base64 encoding incomplete: at least 2 bits missing\");\n\t            case 2:\n\t                out[out.length] = (bits >> 10);\n\t                break;\n\t            case 3:\n\t                out[out.length] = (bits >> 16);\n\t                out[out.length] = (bits >> 8) & 0xFF;\n\t                break;\n\t        }\n\t        return out;\n\t    },\n\t    re: /-----BEGIN [^-]+-----([A-Za-z0-9+\\/=\\s]+)-----END [^-]+-----|begin-base64[^\\n]+\\n([A-Za-z0-9+\\/=\\s]+)====/,\n\t    unarmor: function (a) {\n\t        var m = Base64.re.exec(a);\n\t        if (m) {\n\t            if (m[1]) {\n\t                a = m[1];\n\t            }\n\t            else if (m[2]) {\n\t                a = m[2];\n\t            }\n\t            else {\n\t                throw new Error(\"RegExp out of sync\");\n\t            }\n\t        }\n\t        return Base64.decode(a);\n\t    }\n\t};\n\t\n\t// Big integer base-10 printing library\n\t// Copyright (c) 2014 Lapo Luchini <lapo@lapo.it>\n\t// Permission to use, copy, modify, and/or distribute this software for any\n\t// purpose with or without fee is hereby granted, provided that the above\n\t// copyright notice and this permission notice appear in all copies.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n\t// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n\t// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n\t// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n\t// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n\t// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n\t// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\t/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\n\tvar max = 10000000000000; // biggest integer that can still fit 2^53 when multiplied by 256\n\tvar Int10 = /** @class */ (function () {\n\t    function Int10(value) {\n\t        this.buf = [+value || 0];\n\t    }\n\t    Int10.prototype.mulAdd = function (m, c) {\n\t        // assert(m <= 256)\n\t        var b = this.buf;\n\t        var l = b.length;\n\t        var i;\n\t        var t;\n\t        for (i = 0; i < l; ++i) {\n\t            t = b[i] * m + c;\n\t            if (t < max) {\n\t                c = 0;\n\t            }\n\t            else {\n\t                c = 0 | (t / max);\n\t                t -= c * max;\n\t            }\n\t            b[i] = t;\n\t        }\n\t        if (c > 0) {\n\t            b[i] = c;\n\t        }\n\t    };\n\t    Int10.prototype.sub = function (c) {\n\t        // assert(m <= 256)\n\t        var b = this.buf;\n\t        var l = b.length;\n\t        var i;\n\t        var t;\n\t        for (i = 0; i < l; ++i) {\n\t            t = b[i] - c;\n\t            if (t < 0) {\n\t                t += max;\n\t                c = 1;\n\t            }\n\t            else {\n\t                c = 0;\n\t            }\n\t            b[i] = t;\n\t        }\n\t        while (b[b.length - 1] === 0) {\n\t            b.pop();\n\t        }\n\t    };\n\t    Int10.prototype.toString = function (base) {\n\t        if ((base || 10) != 10) {\n\t            throw new Error(\"only base 10 is supported\");\n\t        }\n\t        var b = this.buf;\n\t        var s = b[b.length - 1].toString();\n\t        for (var i = b.length - 2; i >= 0; --i) {\n\t            s += (max + b[i]).toString().substring(1);\n\t        }\n\t        return s;\n\t    };\n\t    Int10.prototype.valueOf = function () {\n\t        var b = this.buf;\n\t        var v = 0;\n\t        for (var i = b.length - 1; i >= 0; --i) {\n\t            v = v * max + b[i];\n\t        }\n\t        return v;\n\t    };\n\t    Int10.prototype.simplify = function () {\n\t        var b = this.buf;\n\t        return (b.length == 1) ? b[0] : this;\n\t    };\n\t    return Int10;\n\t}());\n\t\n\t// ASN.1 JavaScript decoder\n\tvar ellipsis = \"\\u2026\";\n\tvar reTimeS = /^(\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\n\tvar reTimeL = /^(\\d\\d\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\n\tfunction stringCut(str, len) {\n\t    if (str.length > len) {\n\t        str = str.substring(0, len) + ellipsis;\n\t    }\n\t    return str;\n\t}\n\tvar Stream = /** @class */ (function () {\n\t    function Stream(enc, pos) {\n\t        this.hexDigits = \"0123456789ABCDEF\";\n\t        if (enc instanceof Stream) {\n\t            this.enc = enc.enc;\n\t            this.pos = enc.pos;\n\t        }\n\t        else {\n\t            // enc should be an array or a binary string\n\t            this.enc = enc;\n\t            this.pos = pos;\n\t        }\n\t    }\n\t    Stream.prototype.get = function (pos) {\n\t        if (pos === undefined) {\n\t            pos = this.pos++;\n\t        }\n\t        if (pos >= this.enc.length) {\n\t            throw new Error(\"Requesting byte offset \" + pos + \" on a stream of length \" + this.enc.length);\n\t        }\n\t        return (\"string\" === typeof this.enc) ? this.enc.charCodeAt(pos) : this.enc[pos];\n\t    };\n\t    Stream.prototype.hexByte = function (b) {\n\t        return this.hexDigits.charAt((b >> 4) & 0xF) + this.hexDigits.charAt(b & 0xF);\n\t    };\n\t    Stream.prototype.hexDump = function (start, end, raw) {\n\t        var s = \"\";\n\t        for (var i = start; i < end; ++i) {\n\t            s += this.hexByte(this.get(i));\n\t            if (raw !== true) {\n\t                switch (i & 0xF) {\n\t                    case 0x7:\n\t                        s += \"  \";\n\t                        break;\n\t                    case 0xF:\n\t                        s += \"\\n\";\n\t                        break;\n\t                    default:\n\t                        s += \" \";\n\t                }\n\t            }\n\t        }\n\t        return s;\n\t    };\n\t    Stream.prototype.isASCII = function (start, end) {\n\t        for (var i = start; i < end; ++i) {\n\t            var c = this.get(i);\n\t            if (c < 32 || c > 176) {\n\t                return false;\n\t            }\n\t        }\n\t        return true;\n\t    };\n\t    Stream.prototype.parseStringISO = function (start, end) {\n\t        var s = \"\";\n\t        for (var i = start; i < end; ++i) {\n\t            s += String.fromCharCode(this.get(i));\n\t        }\n\t        return s;\n\t    };\n\t    Stream.prototype.parseStringUTF = function (start, end) {\n\t        var s = \"\";\n\t        for (var i = start; i < end;) {\n\t            var c = this.get(i++);\n\t            if (c < 128) {\n\t                s += String.fromCharCode(c);\n\t            }\n\t            else if ((c > 191) && (c < 224)) {\n\t                s += String.fromCharCode(((c & 0x1F) << 6) | (this.get(i++) & 0x3F));\n\t            }\n\t            else {\n\t                s += String.fromCharCode(((c & 0x0F) << 12) | ((this.get(i++) & 0x3F) << 6) | (this.get(i++) & 0x3F));\n\t            }\n\t        }\n\t        return s;\n\t    };\n\t    Stream.prototype.parseStringBMP = function (start, end) {\n\t        var str = \"\";\n\t        var hi;\n\t        var lo;\n\t        for (var i = start; i < end;) {\n\t            hi = this.get(i++);\n\t            lo = this.get(i++);\n\t            str += String.fromCharCode((hi << 8) | lo);\n\t        }\n\t        return str;\n\t    };\n\t    Stream.prototype.parseTime = function (start, end, shortYear) {\n\t        var s = this.parseStringISO(start, end);\n\t        var m = (shortYear ? reTimeS : reTimeL).exec(s);\n\t        if (!m) {\n\t            return \"Unrecognized time: \" + s;\n\t        }\n\t        if (shortYear) {\n\t            // to avoid querying the timer, use the fixed range [1970, 2069]\n\t            // it will conform with ITU X.400 [-10, +40] sliding window until 2030\n\t            m[1] = +m[1];\n\t            m[1] += (+m[1] < 70) ? 2000 : 1900;\n\t        }\n\t        s = m[1] + \"-\" + m[2] + \"-\" + m[3] + \" \" + m[4];\n\t        if (m[5]) {\n\t            s += \":\" + m[5];\n\t            if (m[6]) {\n\t                s += \":\" + m[6];\n\t                if (m[7]) {\n\t                    s += \".\" + m[7];\n\t                }\n\t            }\n\t        }\n\t        if (m[8]) {\n\t            s += \" UTC\";\n\t            if (m[8] != \"Z\") {\n\t                s += m[8];\n\t                if (m[9]) {\n\t                    s += \":\" + m[9];\n\t                }\n\t            }\n\t        }\n\t        return s;\n\t    };\n\t    Stream.prototype.parseInteger = function (start, end) {\n\t        var v = this.get(start);\n\t        var neg = (v > 127);\n\t        var pad = neg ? 255 : 0;\n\t        var len;\n\t        var s = \"\";\n\t        // skip unuseful bits (not allowed in DER)\n\t        while (v == pad && ++start < end) {\n\t            v = this.get(start);\n\t        }\n\t        len = end - start;\n\t        if (len === 0) {\n\t            return neg ? -1 : 0;\n\t        }\n\t        // show bit length of huge integers\n\t        if (len > 4) {\n\t            s = v;\n\t            len <<= 3;\n\t            while (((+s ^ pad) & 0x80) == 0) {\n\t                s = +s << 1;\n\t                --len;\n\t            }\n\t            s = \"(\" + len + \" bit)\\n\";\n\t        }\n\t        // decode the integer\n\t        if (neg) {\n\t            v = v - 256;\n\t        }\n\t        var n = new Int10(v);\n\t        for (var i = start + 1; i < end; ++i) {\n\t            n.mulAdd(256, this.get(i));\n\t        }\n\t        return s + n.toString();\n\t    };\n\t    Stream.prototype.parseBitString = function (start, end, maxLength) {\n\t        var unusedBit = this.get(start);\n\t        var lenBit = ((end - start - 1) << 3) - unusedBit;\n\t        var intro = \"(\" + lenBit + \" bit)\\n\";\n\t        var s = \"\";\n\t        for (var i = start + 1; i < end; ++i) {\n\t            var b = this.get(i);\n\t            var skip = (i == end - 1) ? unusedBit : 0;\n\t            for (var j = 7; j >= skip; --j) {\n\t                s += (b >> j) & 1 ? \"1\" : \"0\";\n\t            }\n\t            if (s.length > maxLength) {\n\t                return intro + stringCut(s, maxLength);\n\t            }\n\t        }\n\t        return intro + s;\n\t    };\n\t    Stream.prototype.parseOctetString = function (start, end, maxLength) {\n\t        if (this.isASCII(start, end)) {\n\t            return stringCut(this.parseStringISO(start, end), maxLength);\n\t        }\n\t        var len = end - start;\n\t        var s = \"(\" + len + \" byte)\\n\";\n\t        maxLength /= 2; // we work in bytes\n\t        if (len > maxLength) {\n\t            end = start + maxLength;\n\t        }\n\t        for (var i = start; i < end; ++i) {\n\t            s += this.hexByte(this.get(i));\n\t        }\n\t        if (len > maxLength) {\n\t            s += ellipsis;\n\t        }\n\t        return s;\n\t    };\n\t    Stream.prototype.parseOID = function (start, end, maxLength) {\n\t        var s = \"\";\n\t        var n = new Int10();\n\t        var bits = 0;\n\t        for (var i = start; i < end; ++i) {\n\t            var v = this.get(i);\n\t            n.mulAdd(128, v & 0x7F);\n\t            bits += 7;\n\t            if (!(v & 0x80)) { // finished\n\t                if (s === \"\") {\n\t                    n = n.simplify();\n\t                    if (n instanceof Int10) {\n\t                        n.sub(80);\n\t                        s = \"2.\" + n.toString();\n\t                    }\n\t                    else {\n\t                        var m = n < 80 ? n < 40 ? 0 : 1 : 2;\n\t                        s = m + \".\" + (n - m * 40);\n\t                    }\n\t                }\n\t                else {\n\t                    s += \".\" + n.toString();\n\t                }\n\t                if (s.length > maxLength) {\n\t                    return stringCut(s, maxLength);\n\t                }\n\t                n = new Int10();\n\t                bits = 0;\n\t            }\n\t        }\n\t        if (bits > 0) {\n\t            s += \".incomplete\";\n\t        }\n\t        return s;\n\t    };\n\t    return Stream;\n\t}());\n\tvar ASN1 = /** @class */ (function () {\n\t    function ASN1(stream, header, length, tag, sub) {\n\t        if (!(tag instanceof ASN1Tag)) {\n\t            throw new Error(\"Invalid tag value.\");\n\t        }\n\t        this.stream = stream;\n\t        this.header = header;\n\t        this.length = length;\n\t        this.tag = tag;\n\t        this.sub = sub;\n\t    }\n\t    ASN1.prototype.typeName = function () {\n\t        switch (this.tag.tagClass) {\n\t            case 0: // universal\n\t                switch (this.tag.tagNumber) {\n\t                    case 0x00:\n\t                        return \"EOC\";\n\t                    case 0x01:\n\t                        return \"BOOLEAN\";\n\t                    case 0x02:\n\t                        return \"INTEGER\";\n\t                    case 0x03:\n\t                        return \"BIT_STRING\";\n\t                    case 0x04:\n\t                        return \"OCTET_STRING\";\n\t                    case 0x05:\n\t                        return \"NULL\";\n\t                    case 0x06:\n\t                        return \"OBJECT_IDENTIFIER\";\n\t                    case 0x07:\n\t                        return \"ObjectDescriptor\";\n\t                    case 0x08:\n\t                        return \"EXTERNAL\";\n\t                    case 0x09:\n\t                        return \"REAL\";\n\t                    case 0x0A:\n\t                        return \"ENUMERATED\";\n\t                    case 0x0B:\n\t                        return \"EMBEDDED_PDV\";\n\t                    case 0x0C:\n\t                        return \"UTF8String\";\n\t                    case 0x10:\n\t                        return \"SEQUENCE\";\n\t                    case 0x11:\n\t                        return \"SET\";\n\t                    case 0x12:\n\t                        return \"NumericString\";\n\t                    case 0x13:\n\t                        return \"PrintableString\"; // ASCII subset\n\t                    case 0x14:\n\t                        return \"TeletexString\"; // aka T61String\n\t                    case 0x15:\n\t                        return \"VideotexString\";\n\t                    case 0x16:\n\t                        return \"IA5String\"; // ASCII\n\t                    case 0x17:\n\t                        return \"UTCTime\";\n\t                    case 0x18:\n\t                        return \"GeneralizedTime\";\n\t                    case 0x19:\n\t                        return \"GraphicString\";\n\t                    case 0x1A:\n\t                        return \"VisibleString\"; // ASCII subset\n\t                    case 0x1B:\n\t                        return \"GeneralString\";\n\t                    case 0x1C:\n\t                        return \"UniversalString\";\n\t                    case 0x1E:\n\t                        return \"BMPString\";\n\t                }\n\t                return \"Universal_\" + this.tag.tagNumber.toString();\n\t            case 1:\n\t                return \"Application_\" + this.tag.tagNumber.toString();\n\t            case 2:\n\t                return \"[\" + this.tag.tagNumber.toString() + \"]\"; // Context\n\t            case 3:\n\t                return \"Private_\" + this.tag.tagNumber.toString();\n\t        }\n\t    };\n\t    ASN1.prototype.content = function (maxLength) {\n\t        if (this.tag === undefined) {\n\t            return null;\n\t        }\n\t        if (maxLength === undefined) {\n\t            maxLength = Infinity;\n\t        }\n\t        var content = this.posContent();\n\t        var len = Math.abs(this.length);\n\t        if (!this.tag.isUniversal()) {\n\t            if (this.sub !== null) {\n\t                return \"(\" + this.sub.length + \" elem)\";\n\t            }\n\t            return this.stream.parseOctetString(content, content + len, maxLength);\n\t        }\n\t        switch (this.tag.tagNumber) {\n\t            case 0x01: // BOOLEAN\n\t                return (this.stream.get(content) === 0) ? \"false\" : \"true\";\n\t            case 0x02: // INTEGER\n\t                return this.stream.parseInteger(content, content + len);\n\t            case 0x03: // BIT_STRING\n\t                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\n\t                    this.stream.parseBitString(content, content + len, maxLength);\n\t            case 0x04: // OCTET_STRING\n\t                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\n\t                    this.stream.parseOctetString(content, content + len, maxLength);\n\t            // case 0x05: // NULL\n\t            case 0x06: // OBJECT_IDENTIFIER\n\t                return this.stream.parseOID(content, content + len, maxLength);\n\t            // case 0x07: // ObjectDescriptor\n\t            // case 0x08: // EXTERNAL\n\t            // case 0x09: // REAL\n\t            // case 0x0A: // ENUMERATED\n\t            // case 0x0B: // EMBEDDED_PDV\n\t            case 0x10: // SEQUENCE\n\t            case 0x11: // SET\n\t                if (this.sub !== null) {\n\t                    return \"(\" + this.sub.length + \" elem)\";\n\t                }\n\t                else {\n\t                    return \"(no elem)\";\n\t                }\n\t            case 0x0C: // UTF8String\n\t                return stringCut(this.stream.parseStringUTF(content, content + len), maxLength);\n\t            case 0x12: // NumericString\n\t            case 0x13: // PrintableString\n\t            case 0x14: // TeletexString\n\t            case 0x15: // VideotexString\n\t            case 0x16: // IA5String\n\t            // case 0x19: // GraphicString\n\t            case 0x1A: // VisibleString\n\t                // case 0x1B: // GeneralString\n\t                // case 0x1C: // UniversalString\n\t                return stringCut(this.stream.parseStringISO(content, content + len), maxLength);\n\t            case 0x1E: // BMPString\n\t                return stringCut(this.stream.parseStringBMP(content, content + len), maxLength);\n\t            case 0x17: // UTCTime\n\t            case 0x18: // GeneralizedTime\n\t                return this.stream.parseTime(content, content + len, (this.tag.tagNumber == 0x17));\n\t        }\n\t        return null;\n\t    };\n\t    ASN1.prototype.toString = function () {\n\t        return this.typeName() + \"@\" + this.stream.pos + \"[header:\" + this.header + \",length:\" + this.length + \",sub:\" + ((this.sub === null) ? \"null\" : this.sub.length) + \"]\";\n\t    };\n\t    ASN1.prototype.toPrettyString = function (indent) {\n\t        if (indent === undefined) {\n\t            indent = \"\";\n\t        }\n\t        var s = indent + this.typeName() + \" @\" + this.stream.pos;\n\t        if (this.length >= 0) {\n\t            s += \"+\";\n\t        }\n\t        s += this.length;\n\t        if (this.tag.tagConstructed) {\n\t            s += \" (constructed)\";\n\t        }\n\t        else if ((this.tag.isUniversal() && ((this.tag.tagNumber == 0x03) || (this.tag.tagNumber == 0x04))) && (this.sub !== null)) {\n\t            s += \" (encapsulates)\";\n\t        }\n\t        s += \"\\n\";\n\t        if (this.sub !== null) {\n\t            indent += \"  \";\n\t            for (var i = 0, max = this.sub.length; i < max; ++i) {\n\t                s += this.sub[i].toPrettyString(indent);\n\t            }\n\t        }\n\t        return s;\n\t    };\n\t    ASN1.prototype.posStart = function () {\n\t        return this.stream.pos;\n\t    };\n\t    ASN1.prototype.posContent = function () {\n\t        return this.stream.pos + this.header;\n\t    };\n\t    ASN1.prototype.posEnd = function () {\n\t        return this.stream.pos + this.header + Math.abs(this.length);\n\t    };\n\t    ASN1.prototype.toHexString = function () {\n\t        return this.stream.hexDump(this.posStart(), this.posEnd(), true);\n\t    };\n\t    ASN1.decodeLength = function (stream) {\n\t        var buf = stream.get();\n\t        var len = buf & 0x7F;\n\t        if (len == buf) {\n\t            return len;\n\t        }\n\t        // no reason to use Int10, as it would be a huge buffer anyways\n\t        if (len > 6) {\n\t            throw new Error(\"Length over 48 bits not supported at position \" + (stream.pos - 1));\n\t        }\n\t        if (len === 0) {\n\t            return null;\n\t        } // undefined\n\t        buf = 0;\n\t        for (var i = 0; i < len; ++i) {\n\t            buf = (buf * 256) + stream.get();\n\t        }\n\t        return buf;\n\t    };\n\t    /**\n\t     * Retrieve the hexadecimal value (as a string) of the current ASN.1 element\n\t     * @returns {string}\n\t     * @public\n\t     */\n\t    ASN1.prototype.getHexStringValue = function () {\n\t        var hexString = this.toHexString();\n\t        var offset = this.header * 2;\n\t        var length = this.length * 2;\n\t        return hexString.substr(offset, length);\n\t    };\n\t    ASN1.decode = function (str) {\n\t        var stream;\n\t        if (!(str instanceof Stream)) {\n\t            stream = new Stream(str, 0);\n\t        }\n\t        else {\n\t            stream = str;\n\t        }\n\t        var streamStart = new Stream(stream);\n\t        var tag = new ASN1Tag(stream);\n\t        var len = ASN1.decodeLength(stream);\n\t        var start = stream.pos;\n\t        var header = start - streamStart.pos;\n\t        var sub = null;\n\t        var getSub = function () {\n\t            var ret = [];\n\t            if (len !== null) {\n\t                // definite length\n\t                var end = start + len;\n\t                while (stream.pos < end) {\n\t                    ret[ret.length] = ASN1.decode(stream);\n\t                }\n\t                if (stream.pos != end) {\n\t                    throw new Error(\"Content size is not correct for container starting at offset \" + start);\n\t                }\n\t            }\n\t            else {\n\t                // undefined length\n\t                try {\n\t                    for (;;) {\n\t                        var s = ASN1.decode(stream);\n\t                        if (s.tag.isEOC()) {\n\t                            break;\n\t                        }\n\t                        ret[ret.length] = s;\n\t                    }\n\t                    len = start - stream.pos; // undefined lengths are represented as negative values\n\t                }\n\t                catch (e) {\n\t                    throw new Error(\"Exception while decoding undefined length content: \" + e);\n\t                }\n\t            }\n\t            return ret;\n\t        };\n\t        if (tag.tagConstructed) {\n\t            // must have valid content\n\t            sub = getSub();\n\t        }\n\t        else if (tag.isUniversal() && ((tag.tagNumber == 0x03) || (tag.tagNumber == 0x04))) {\n\t            // sometimes BitString and OctetString are used to encapsulate ASN.1\n\t            try {\n\t                if (tag.tagNumber == 0x03) {\n\t                    if (stream.get() != 0) {\n\t                        throw new Error(\"BIT STRINGs with unused bits cannot encapsulate.\");\n\t                    }\n\t                }\n\t                sub = getSub();\n\t                for (var i = 0; i < sub.length; ++i) {\n\t                    if (sub[i].tag.isEOC()) {\n\t                        throw new Error(\"EOC is not supposed to be actual content.\");\n\t                    }\n\t                }\n\t            }\n\t            catch (e) {\n\t                // but silently ignore when they don't\n\t                sub = null;\n\t            }\n\t        }\n\t        if (sub === null) {\n\t            if (len === null) {\n\t                throw new Error(\"We can't skip over an invalid tag with undefined length at offset \" + start);\n\t            }\n\t            stream.pos = start + Math.abs(len);\n\t        }\n\t        return new ASN1(streamStart, header, len, tag, sub);\n\t    };\n\t    return ASN1;\n\t}());\n\tvar ASN1Tag = /** @class */ (function () {\n\t    function ASN1Tag(stream) {\n\t        var buf = stream.get();\n\t        this.tagClass = buf >> 6;\n\t        this.tagConstructed = ((buf & 0x20) !== 0);\n\t        this.tagNumber = buf & 0x1F;\n\t        if (this.tagNumber == 0x1F) { // long tag\n\t            var n = new Int10();\n\t            do {\n\t                buf = stream.get();\n\t                n.mulAdd(128, buf & 0x7F);\n\t            } while (buf & 0x80);\n\t            this.tagNumber = n.simplify();\n\t        }\n\t    }\n\t    ASN1Tag.prototype.isUniversal = function () {\n\t        return this.tagClass === 0x00;\n\t    };\n\t    ASN1Tag.prototype.isEOC = function () {\n\t        return this.tagClass === 0x00 && this.tagNumber === 0x00;\n\t    };\n\t    return ASN1Tag;\n\t}());\n\t\n\t// Copyright (c) 2005  Tom Wu\n\t// Bits per digit\n\tvar dbits;\n\t// JavaScript engine analysis\n\tvar canary = 0xdeadbeefcafe;\n\tvar j_lm = ((canary & 0xffffff) == 0xefcafe);\n\t//#region\n\tvar lowprimes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997];\n\tvar lplim = (1 << 26) / lowprimes[lowprimes.length - 1];\n\t//#endregion\n\t// (public) Constructor\n\tvar BigInteger = /** @class */ (function () {\n\t    function BigInteger(a, b, c) {\n\t        if (a != null) {\n\t            if (\"number\" == typeof a) {\n\t                this.fromNumber(a, b, c);\n\t            }\n\t            else if (b == null && \"string\" != typeof a) {\n\t                this.fromString(a, 256);\n\t            }\n\t            else {\n\t                this.fromString(a, b);\n\t            }\n\t        }\n\t    }\n\t    //#region PUBLIC\n\t    // BigInteger.prototype.toString = bnToString;\n\t    // (public) return string representation in given radix\n\t    BigInteger.prototype.toString = function (b) {\n\t        if (this.s < 0) {\n\t            return \"-\" + this.negate().toString(b);\n\t        }\n\t        var k;\n\t        if (b == 16) {\n\t            k = 4;\n\t        }\n\t        else if (b == 8) {\n\t            k = 3;\n\t        }\n\t        else if (b == 2) {\n\t            k = 1;\n\t        }\n\t        else if (b == 32) {\n\t            k = 5;\n\t        }\n\t        else if (b == 4) {\n\t            k = 2;\n\t        }\n\t        else {\n\t            return this.toRadix(b);\n\t        }\n\t        var km = (1 << k) - 1;\n\t        var d;\n\t        var m = false;\n\t        var r = \"\";\n\t        var i = this.t;\n\t        var p = this.DB - (i * this.DB) % k;\n\t        if (i-- > 0) {\n\t            if (p < this.DB && (d = this[i] >> p) > 0) {\n\t                m = true;\n\t                r = int2char(d);\n\t            }\n\t            while (i >= 0) {\n\t                if (p < k) {\n\t                    d = (this[i] & ((1 << p) - 1)) << (k - p);\n\t                    d |= this[--i] >> (p += this.DB - k);\n\t                }\n\t                else {\n\t                    d = (this[i] >> (p -= k)) & km;\n\t                    if (p <= 0) {\n\t                        p += this.DB;\n\t                        --i;\n\t                    }\n\t                }\n\t                if (d > 0) {\n\t                    m = true;\n\t                }\n\t                if (m) {\n\t                    r += int2char(d);\n\t                }\n\t            }\n\t        }\n\t        return m ? r : \"0\";\n\t    };\n\t    // BigInteger.prototype.negate = bnNegate;\n\t    // (public) -this\n\t    BigInteger.prototype.negate = function () {\n\t        var r = nbi();\n\t        BigInteger.ZERO.subTo(this, r);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.abs = bnAbs;\n\t    // (public) |this|\n\t    BigInteger.prototype.abs = function () {\n\t        return (this.s < 0) ? this.negate() : this;\n\t    };\n\t    // BigInteger.prototype.compareTo = bnCompareTo;\n\t    // (public) return + if this > a, - if this < a, 0 if equal\n\t    BigInteger.prototype.compareTo = function (a) {\n\t        var r = this.s - a.s;\n\t        if (r != 0) {\n\t            return r;\n\t        }\n\t        var i = this.t;\n\t        r = i - a.t;\n\t        if (r != 0) {\n\t            return (this.s < 0) ? -r : r;\n\t        }\n\t        while (--i >= 0) {\n\t            if ((r = this[i] - a[i]) != 0) {\n\t                return r;\n\t            }\n\t        }\n\t        return 0;\n\t    };\n\t    // BigInteger.prototype.bitLength = bnBitLength;\n\t    // (public) return the number of bits in \"this\"\n\t    BigInteger.prototype.bitLength = function () {\n\t        if (this.t <= 0) {\n\t            return 0;\n\t        }\n\t        return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ (this.s & this.DM));\n\t    };\n\t    // BigInteger.prototype.mod = bnMod;\n\t    // (public) this mod a\n\t    BigInteger.prototype.mod = function (a) {\n\t        var r = nbi();\n\t        this.abs().divRemTo(a, null, r);\n\t        if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) {\n\t            a.subTo(r, r);\n\t        }\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.modPowInt = bnModPowInt;\n\t    // (public) this^e % m, 0 <= e < 2^32\n\t    BigInteger.prototype.modPowInt = function (e, m) {\n\t        var z;\n\t        if (e < 256 || m.isEven()) {\n\t            z = new Classic(m);\n\t        }\n\t        else {\n\t            z = new Montgomery(m);\n\t        }\n\t        return this.exp(e, z);\n\t    };\n\t    // BigInteger.prototype.clone = bnClone;\n\t    // (public)\n\t    BigInteger.prototype.clone = function () {\n\t        var r = nbi();\n\t        this.copyTo(r);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.intValue = bnIntValue;\n\t    // (public) return value as integer\n\t    BigInteger.prototype.intValue = function () {\n\t        if (this.s < 0) {\n\t            if (this.t == 1) {\n\t                return this[0] - this.DV;\n\t            }\n\t            else if (this.t == 0) {\n\t                return -1;\n\t            }\n\t        }\n\t        else if (this.t == 1) {\n\t            return this[0];\n\t        }\n\t        else if (this.t == 0) {\n\t            return 0;\n\t        }\n\t        // assumes 16 < DB < 32\n\t        return ((this[1] & ((1 << (32 - this.DB)) - 1)) << this.DB) | this[0];\n\t    };\n\t    // BigInteger.prototype.byteValue = bnByteValue;\n\t    // (public) return value as byte\n\t    BigInteger.prototype.byteValue = function () {\n\t        return (this.t == 0) ? this.s : (this[0] << 24) >> 24;\n\t    };\n\t    // BigInteger.prototype.shortValue = bnShortValue;\n\t    // (public) return value as short (assumes DB>=16)\n\t    BigInteger.prototype.shortValue = function () {\n\t        return (this.t == 0) ? this.s : (this[0] << 16) >> 16;\n\t    };\n\t    // BigInteger.prototype.signum = bnSigNum;\n\t    // (public) 0 if this == 0, 1 if this > 0\n\t    BigInteger.prototype.signum = function () {\n\t        if (this.s < 0) {\n\t            return -1;\n\t        }\n\t        else if (this.t <= 0 || (this.t == 1 && this[0] <= 0)) {\n\t            return 0;\n\t        }\n\t        else {\n\t            return 1;\n\t        }\n\t    };\n\t    // BigInteger.prototype.toByteArray = bnToByteArray;\n\t    // (public) convert to bigendian byte array\n\t    BigInteger.prototype.toByteArray = function () {\n\t        var i = this.t;\n\t        var r = [];\n\t        r[0] = this.s;\n\t        var p = this.DB - (i * this.DB) % 8;\n\t        var d;\n\t        var k = 0;\n\t        if (i-- > 0) {\n\t            if (p < this.DB && (d = this[i] >> p) != (this.s & this.DM) >> p) {\n\t                r[k++] = d | (this.s << (this.DB - p));\n\t            }\n\t            while (i >= 0) {\n\t                if (p < 8) {\n\t                    d = (this[i] & ((1 << p) - 1)) << (8 - p);\n\t                    d |= this[--i] >> (p += this.DB - 8);\n\t                }\n\t                else {\n\t                    d = (this[i] >> (p -= 8)) & 0xff;\n\t                    if (p <= 0) {\n\t                        p += this.DB;\n\t                        --i;\n\t                    }\n\t                }\n\t                if ((d & 0x80) != 0) {\n\t                    d |= -256;\n\t                }\n\t                if (k == 0 && (this.s & 0x80) != (d & 0x80)) {\n\t                    ++k;\n\t                }\n\t                if (k > 0 || d != this.s) {\n\t                    r[k++] = d;\n\t                }\n\t            }\n\t        }\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.equals = bnEquals;\n\t    BigInteger.prototype.equals = function (a) {\n\t        return (this.compareTo(a) == 0);\n\t    };\n\t    // BigInteger.prototype.min = bnMin;\n\t    BigInteger.prototype.min = function (a) {\n\t        return (this.compareTo(a) < 0) ? this : a;\n\t    };\n\t    // BigInteger.prototype.max = bnMax;\n\t    BigInteger.prototype.max = function (a) {\n\t        return (this.compareTo(a) > 0) ? this : a;\n\t    };\n\t    // BigInteger.prototype.and = bnAnd;\n\t    BigInteger.prototype.and = function (a) {\n\t        var r = nbi();\n\t        this.bitwiseTo(a, op_and, r);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.or = bnOr;\n\t    BigInteger.prototype.or = function (a) {\n\t        var r = nbi();\n\t        this.bitwiseTo(a, op_or, r);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.xor = bnXor;\n\t    BigInteger.prototype.xor = function (a) {\n\t        var r = nbi();\n\t        this.bitwiseTo(a, op_xor, r);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.andNot = bnAndNot;\n\t    BigInteger.prototype.andNot = function (a) {\n\t        var r = nbi();\n\t        this.bitwiseTo(a, op_andnot, r);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.not = bnNot;\n\t    // (public) ~this\n\t    BigInteger.prototype.not = function () {\n\t        var r = nbi();\n\t        for (var i = 0; i < this.t; ++i) {\n\t            r[i] = this.DM & ~this[i];\n\t        }\n\t        r.t = this.t;\n\t        r.s = ~this.s;\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.shiftLeft = bnShiftLeft;\n\t    // (public) this << n\n\t    BigInteger.prototype.shiftLeft = function (n) {\n\t        var r = nbi();\n\t        if (n < 0) {\n\t            this.rShiftTo(-n, r);\n\t        }\n\t        else {\n\t            this.lShiftTo(n, r);\n\t        }\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.shiftRight = bnShiftRight;\n\t    // (public) this >> n\n\t    BigInteger.prototype.shiftRight = function (n) {\n\t        var r = nbi();\n\t        if (n < 0) {\n\t            this.lShiftTo(-n, r);\n\t        }\n\t        else {\n\t            this.rShiftTo(n, r);\n\t        }\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\n\t    // (public) returns index of lowest 1-bit (or -1 if none)\n\t    BigInteger.prototype.getLowestSetBit = function () {\n\t        for (var i = 0; i < this.t; ++i) {\n\t            if (this[i] != 0) {\n\t                return i * this.DB + lbit(this[i]);\n\t            }\n\t        }\n\t        if (this.s < 0) {\n\t            return this.t * this.DB;\n\t        }\n\t        return -1;\n\t    };\n\t    // BigInteger.prototype.bitCount = bnBitCount;\n\t    // (public) return number of set bits\n\t    BigInteger.prototype.bitCount = function () {\n\t        var r = 0;\n\t        var x = this.s & this.DM;\n\t        for (var i = 0; i < this.t; ++i) {\n\t            r += cbit(this[i] ^ x);\n\t        }\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.testBit = bnTestBit;\n\t    // (public) true iff nth bit is set\n\t    BigInteger.prototype.testBit = function (n) {\n\t        var j = Math.floor(n / this.DB);\n\t        if (j >= this.t) {\n\t            return (this.s != 0);\n\t        }\n\t        return ((this[j] & (1 << (n % this.DB))) != 0);\n\t    };\n\t    // BigInteger.prototype.setBit = bnSetBit;\n\t    // (public) this | (1<<n)\n\t    BigInteger.prototype.setBit = function (n) {\n\t        return this.changeBit(n, op_or);\n\t    };\n\t    // BigInteger.prototype.clearBit = bnClearBit;\n\t    // (public) this & ~(1<<n)\n\t    BigInteger.prototype.clearBit = function (n) {\n\t        return this.changeBit(n, op_andnot);\n\t    };\n\t    // BigInteger.prototype.flipBit = bnFlipBit;\n\t    // (public) this ^ (1<<n)\n\t    BigInteger.prototype.flipBit = function (n) {\n\t        return this.changeBit(n, op_xor);\n\t    };\n\t    // BigInteger.prototype.add = bnAdd;\n\t    // (public) this + a\n\t    BigInteger.prototype.add = function (a) {\n\t        var r = nbi();\n\t        this.addTo(a, r);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.subtract = bnSubtract;\n\t    // (public) this - a\n\t    BigInteger.prototype.subtract = function (a) {\n\t        var r = nbi();\n\t        this.subTo(a, r);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.multiply = bnMultiply;\n\t    // (public) this * a\n\t    BigInteger.prototype.multiply = function (a) {\n\t        var r = nbi();\n\t        this.multiplyTo(a, r);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.divide = bnDivide;\n\t    // (public) this / a\n\t    BigInteger.prototype.divide = function (a) {\n\t        var r = nbi();\n\t        this.divRemTo(a, r, null);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.remainder = bnRemainder;\n\t    // (public) this % a\n\t    BigInteger.prototype.remainder = function (a) {\n\t        var r = nbi();\n\t        this.divRemTo(a, null, r);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\n\t    // (public) [this/a,this%a]\n\t    BigInteger.prototype.divideAndRemainder = function (a) {\n\t        var q = nbi();\n\t        var r = nbi();\n\t        this.divRemTo(a, q, r);\n\t        return [q, r];\n\t    };\n\t    // BigInteger.prototype.modPow = bnModPow;\n\t    // (public) this^e % m (HAC 14.85)\n\t    BigInteger.prototype.modPow = function (e, m) {\n\t        var i = e.bitLength();\n\t        var k;\n\t        var r = nbv(1);\n\t        var z;\n\t        if (i <= 0) {\n\t            return r;\n\t        }\n\t        else if (i < 18) {\n\t            k = 1;\n\t        }\n\t        else if (i < 48) {\n\t            k = 3;\n\t        }\n\t        else if (i < 144) {\n\t            k = 4;\n\t        }\n\t        else if (i < 768) {\n\t            k = 5;\n\t        }\n\t        else {\n\t            k = 6;\n\t        }\n\t        if (i < 8) {\n\t            z = new Classic(m);\n\t        }\n\t        else if (m.isEven()) {\n\t            z = new Barrett(m);\n\t        }\n\t        else {\n\t            z = new Montgomery(m);\n\t        }\n\t        // precomputation\n\t        var g = [];\n\t        var n = 3;\n\t        var k1 = k - 1;\n\t        var km = (1 << k) - 1;\n\t        g[1] = z.convert(this);\n\t        if (k > 1) {\n\t            var g2 = nbi();\n\t            z.sqrTo(g[1], g2);\n\t            while (n <= km) {\n\t                g[n] = nbi();\n\t                z.mulTo(g2, g[n - 2], g[n]);\n\t                n += 2;\n\t            }\n\t        }\n\t        var j = e.t - 1;\n\t        var w;\n\t        var is1 = true;\n\t        var r2 = nbi();\n\t        var t;\n\t        i = nbits(e[j]) - 1;\n\t        while (j >= 0) {\n\t            if (i >= k1) {\n\t                w = (e[j] >> (i - k1)) & km;\n\t            }\n\t            else {\n\t                w = (e[j] & ((1 << (i + 1)) - 1)) << (k1 - i);\n\t                if (j > 0) {\n\t                    w |= e[j - 1] >> (this.DB + i - k1);\n\t                }\n\t            }\n\t            n = k;\n\t            while ((w & 1) == 0) {\n\t                w >>= 1;\n\t                --n;\n\t            }\n\t            if ((i -= n) < 0) {\n\t                i += this.DB;\n\t                --j;\n\t            }\n\t            if (is1) { // ret == 1, don't bother squaring or multiplying it\n\t                g[w].copyTo(r);\n\t                is1 = false;\n\t            }\n\t            else {\n\t                while (n > 1) {\n\t                    z.sqrTo(r, r2);\n\t                    z.sqrTo(r2, r);\n\t                    n -= 2;\n\t                }\n\t                if (n > 0) {\n\t                    z.sqrTo(r, r2);\n\t                }\n\t                else {\n\t                    t = r;\n\t                    r = r2;\n\t                    r2 = t;\n\t                }\n\t                z.mulTo(r2, g[w], r);\n\t            }\n\t            while (j >= 0 && (e[j] & (1 << i)) == 0) {\n\t                z.sqrTo(r, r2);\n\t                t = r;\n\t                r = r2;\n\t                r2 = t;\n\t                if (--i < 0) {\n\t                    i = this.DB - 1;\n\t                    --j;\n\t                }\n\t            }\n\t        }\n\t        return z.revert(r);\n\t    };\n\t    // BigInteger.prototype.modInverse = bnModInverse;\n\t    // (public) 1/this % m (HAC 14.61)\n\t    BigInteger.prototype.modInverse = function (m) {\n\t        var ac = m.isEven();\n\t        if ((this.isEven() && ac) || m.signum() == 0) {\n\t            return BigInteger.ZERO;\n\t        }\n\t        var u = m.clone();\n\t        var v = this.clone();\n\t        var a = nbv(1);\n\t        var b = nbv(0);\n\t        var c = nbv(0);\n\t        var d = nbv(1);\n\t        while (u.signum() != 0) {\n\t            while (u.isEven()) {\n\t                u.rShiftTo(1, u);\n\t                if (ac) {\n\t                    if (!a.isEven() || !b.isEven()) {\n\t                        a.addTo(this, a);\n\t                        b.subTo(m, b);\n\t                    }\n\t                    a.rShiftTo(1, a);\n\t                }\n\t                else if (!b.isEven()) {\n\t                    b.subTo(m, b);\n\t                }\n\t                b.rShiftTo(1, b);\n\t            }\n\t            while (v.isEven()) {\n\t                v.rShiftTo(1, v);\n\t                if (ac) {\n\t                    if (!c.isEven() || !d.isEven()) {\n\t                        c.addTo(this, c);\n\t                        d.subTo(m, d);\n\t                    }\n\t                    c.rShiftTo(1, c);\n\t                }\n\t                else if (!d.isEven()) {\n\t                    d.subTo(m, d);\n\t                }\n\t                d.rShiftTo(1, d);\n\t            }\n\t            if (u.compareTo(v) >= 0) {\n\t                u.subTo(v, u);\n\t                if (ac) {\n\t                    a.subTo(c, a);\n\t                }\n\t                b.subTo(d, b);\n\t            }\n\t            else {\n\t                v.subTo(u, v);\n\t                if (ac) {\n\t                    c.subTo(a, c);\n\t                }\n\t                d.subTo(b, d);\n\t            }\n\t        }\n\t        if (v.compareTo(BigInteger.ONE) != 0) {\n\t            return BigInteger.ZERO;\n\t        }\n\t        if (d.compareTo(m) >= 0) {\n\t            return d.subtract(m);\n\t        }\n\t        if (d.signum() < 0) {\n\t            d.addTo(m, d);\n\t        }\n\t        else {\n\t            return d;\n\t        }\n\t        if (d.signum() < 0) {\n\t            return d.add(m);\n\t        }\n\t        else {\n\t            return d;\n\t        }\n\t    };\n\t    // BigInteger.prototype.pow = bnPow;\n\t    // (public) this^e\n\t    BigInteger.prototype.pow = function (e) {\n\t        return this.exp(e, new NullExp());\n\t    };\n\t    // BigInteger.prototype.gcd = bnGCD;\n\t    // (public) gcd(this,a) (HAC 14.54)\n\t    BigInteger.prototype.gcd = function (a) {\n\t        var x = (this.s < 0) ? this.negate() : this.clone();\n\t        var y = (a.s < 0) ? a.negate() : a.clone();\n\t        if (x.compareTo(y) < 0) {\n\t            var t = x;\n\t            x = y;\n\t            y = t;\n\t        }\n\t        var i = x.getLowestSetBit();\n\t        var g = y.getLowestSetBit();\n\t        if (g < 0) {\n\t            return x;\n\t        }\n\t        if (i < g) {\n\t            g = i;\n\t        }\n\t        if (g > 0) {\n\t            x.rShiftTo(g, x);\n\t            y.rShiftTo(g, y);\n\t        }\n\t        while (x.signum() > 0) {\n\t            if ((i = x.getLowestSetBit()) > 0) {\n\t                x.rShiftTo(i, x);\n\t            }\n\t            if ((i = y.getLowestSetBit()) > 0) {\n\t                y.rShiftTo(i, y);\n\t            }\n\t            if (x.compareTo(y) >= 0) {\n\t                x.subTo(y, x);\n\t                x.rShiftTo(1, x);\n\t            }\n\t            else {\n\t                y.subTo(x, y);\n\t                y.rShiftTo(1, y);\n\t            }\n\t        }\n\t        if (g > 0) {\n\t            y.lShiftTo(g, y);\n\t        }\n\t        return y;\n\t    };\n\t    // BigInteger.prototype.isProbablePrime = bnIsProbablePrime;\n\t    // (public) test primality with certainty >= 1-.5^t\n\t    BigInteger.prototype.isProbablePrime = function (t) {\n\t        var i;\n\t        var x = this.abs();\n\t        if (x.t == 1 && x[0] <= lowprimes[lowprimes.length - 1]) {\n\t            for (i = 0; i < lowprimes.length; ++i) {\n\t                if (x[0] == lowprimes[i]) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        }\n\t        if (x.isEven()) {\n\t            return false;\n\t        }\n\t        i = 1;\n\t        while (i < lowprimes.length) {\n\t            var m = lowprimes[i];\n\t            var j = i + 1;\n\t            while (j < lowprimes.length && m < lplim) {\n\t                m *= lowprimes[j++];\n\t            }\n\t            m = x.modInt(m);\n\t            while (i < j) {\n\t                if (m % lowprimes[i++] == 0) {\n\t                    return false;\n\t                }\n\t            }\n\t        }\n\t        return x.millerRabin(t);\n\t    };\n\t    //#endregion PUBLIC\n\t    //#region PROTECTED\n\t    // BigInteger.prototype.copyTo = bnpCopyTo;\n\t    // (protected) copy this to r\n\t    BigInteger.prototype.copyTo = function (r) {\n\t        for (var i = this.t - 1; i >= 0; --i) {\n\t            r[i] = this[i];\n\t        }\n\t        r.t = this.t;\n\t        r.s = this.s;\n\t    };\n\t    // BigInteger.prototype.fromInt = bnpFromInt;\n\t    // (protected) set from integer value x, -DV <= x < DV\n\t    BigInteger.prototype.fromInt = function (x) {\n\t        this.t = 1;\n\t        this.s = (x < 0) ? -1 : 0;\n\t        if (x > 0) {\n\t            this[0] = x;\n\t        }\n\t        else if (x < -1) {\n\t            this[0] = x + this.DV;\n\t        }\n\t        else {\n\t            this.t = 0;\n\t        }\n\t    };\n\t    // BigInteger.prototype.fromString = bnpFromString;\n\t    // (protected) set from string and radix\n\t    BigInteger.prototype.fromString = function (s, b) {\n\t        var k;\n\t        if (b == 16) {\n\t            k = 4;\n\t        }\n\t        else if (b == 8) {\n\t            k = 3;\n\t        }\n\t        else if (b == 256) {\n\t            k = 8;\n\t            /* byte array */\n\t        }\n\t        else if (b == 2) {\n\t            k = 1;\n\t        }\n\t        else if (b == 32) {\n\t            k = 5;\n\t        }\n\t        else if (b == 4) {\n\t            k = 2;\n\t        }\n\t        else {\n\t            this.fromRadix(s, b);\n\t            return;\n\t        }\n\t        this.t = 0;\n\t        this.s = 0;\n\t        var i = s.length;\n\t        var mi = false;\n\t        var sh = 0;\n\t        while (--i >= 0) {\n\t            var x = (k == 8) ? (+s[i]) & 0xff : intAt(s, i);\n\t            if (x < 0) {\n\t                if (s.charAt(i) == \"-\") {\n\t                    mi = true;\n\t                }\n\t                continue;\n\t            }\n\t            mi = false;\n\t            if (sh == 0) {\n\t                this[this.t++] = x;\n\t            }\n\t            else if (sh + k > this.DB) {\n\t                this[this.t - 1] |= (x & ((1 << (this.DB - sh)) - 1)) << sh;\n\t                this[this.t++] = (x >> (this.DB - sh));\n\t            }\n\t            else {\n\t                this[this.t - 1] |= x << sh;\n\t            }\n\t            sh += k;\n\t            if (sh >= this.DB) {\n\t                sh -= this.DB;\n\t            }\n\t        }\n\t        if (k == 8 && ((+s[0]) & 0x80) != 0) {\n\t            this.s = -1;\n\t            if (sh > 0) {\n\t                this[this.t - 1] |= ((1 << (this.DB - sh)) - 1) << sh;\n\t            }\n\t        }\n\t        this.clamp();\n\t        if (mi) {\n\t            BigInteger.ZERO.subTo(this, this);\n\t        }\n\t    };\n\t    // BigInteger.prototype.clamp = bnpClamp;\n\t    // (protected) clamp off excess high words\n\t    BigInteger.prototype.clamp = function () {\n\t        var c = this.s & this.DM;\n\t        while (this.t > 0 && this[this.t - 1] == c) {\n\t            --this.t;\n\t        }\n\t    };\n\t    // BigInteger.prototype.dlShiftTo = bnpDLShiftTo;\n\t    // (protected) r = this << n*DB\n\t    BigInteger.prototype.dlShiftTo = function (n, r) {\n\t        var i;\n\t        for (i = this.t - 1; i >= 0; --i) {\n\t            r[i + n] = this[i];\n\t        }\n\t        for (i = n - 1; i >= 0; --i) {\n\t            r[i] = 0;\n\t        }\n\t        r.t = this.t + n;\n\t        r.s = this.s;\n\t    };\n\t    // BigInteger.prototype.drShiftTo = bnpDRShiftTo;\n\t    // (protected) r = this >> n*DB\n\t    BigInteger.prototype.drShiftTo = function (n, r) {\n\t        for (var i = n; i < this.t; ++i) {\n\t            r[i - n] = this[i];\n\t        }\n\t        r.t = Math.max(this.t - n, 0);\n\t        r.s = this.s;\n\t    };\n\t    // BigInteger.prototype.lShiftTo = bnpLShiftTo;\n\t    // (protected) r = this << n\n\t    BigInteger.prototype.lShiftTo = function (n, r) {\n\t        var bs = n % this.DB;\n\t        var cbs = this.DB - bs;\n\t        var bm = (1 << cbs) - 1;\n\t        var ds = Math.floor(n / this.DB);\n\t        var c = (this.s << bs) & this.DM;\n\t        for (var i = this.t - 1; i >= 0; --i) {\n\t            r[i + ds + 1] = (this[i] >> cbs) | c;\n\t            c = (this[i] & bm) << bs;\n\t        }\n\t        for (var i = ds - 1; i >= 0; --i) {\n\t            r[i] = 0;\n\t        }\n\t        r[ds] = c;\n\t        r.t = this.t + ds + 1;\n\t        r.s = this.s;\n\t        r.clamp();\n\t    };\n\t    // BigInteger.prototype.rShiftTo = bnpRShiftTo;\n\t    // (protected) r = this >> n\n\t    BigInteger.prototype.rShiftTo = function (n, r) {\n\t        r.s = this.s;\n\t        var ds = Math.floor(n / this.DB);\n\t        if (ds >= this.t) {\n\t            r.t = 0;\n\t            return;\n\t        }\n\t        var bs = n % this.DB;\n\t        var cbs = this.DB - bs;\n\t        var bm = (1 << bs) - 1;\n\t        r[0] = this[ds] >> bs;\n\t        for (var i = ds + 1; i < this.t; ++i) {\n\t            r[i - ds - 1] |= (this[i] & bm) << cbs;\n\t            r[i - ds] = this[i] >> bs;\n\t        }\n\t        if (bs > 0) {\n\t            r[this.t - ds - 1] |= (this.s & bm) << cbs;\n\t        }\n\t        r.t = this.t - ds;\n\t        r.clamp();\n\t    };\n\t    // BigInteger.prototype.subTo = bnpSubTo;\n\t    // (protected) r = this - a\n\t    BigInteger.prototype.subTo = function (a, r) {\n\t        var i = 0;\n\t        var c = 0;\n\t        var m = Math.min(a.t, this.t);\n\t        while (i < m) {\n\t            c += this[i] - a[i];\n\t            r[i++] = c & this.DM;\n\t            c >>= this.DB;\n\t        }\n\t        if (a.t < this.t) {\n\t            c -= a.s;\n\t            while (i < this.t) {\n\t                c += this[i];\n\t                r[i++] = c & this.DM;\n\t                c >>= this.DB;\n\t            }\n\t            c += this.s;\n\t        }\n\t        else {\n\t            c += this.s;\n\t            while (i < a.t) {\n\t                c -= a[i];\n\t                r[i++] = c & this.DM;\n\t                c >>= this.DB;\n\t            }\n\t            c -= a.s;\n\t        }\n\t        r.s = (c < 0) ? -1 : 0;\n\t        if (c < -1) {\n\t            r[i++] = this.DV + c;\n\t        }\n\t        else if (c > 0) {\n\t            r[i++] = c;\n\t        }\n\t        r.t = i;\n\t        r.clamp();\n\t    };\n\t    // BigInteger.prototype.multiplyTo = bnpMultiplyTo;\n\t    // (protected) r = this * a, r != this,a (HAC 14.12)\n\t    // \"this\" should be the larger one if appropriate.\n\t    BigInteger.prototype.multiplyTo = function (a, r) {\n\t        var x = this.abs();\n\t        var y = a.abs();\n\t        var i = x.t;\n\t        r.t = i + y.t;\n\t        while (--i >= 0) {\n\t            r[i] = 0;\n\t        }\n\t        for (i = 0; i < y.t; ++i) {\n\t            r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n\t        }\n\t        r.s = 0;\n\t        r.clamp();\n\t        if (this.s != a.s) {\n\t            BigInteger.ZERO.subTo(r, r);\n\t        }\n\t    };\n\t    // BigInteger.prototype.squareTo = bnpSquareTo;\n\t    // (protected) r = this^2, r != this (HAC 14.16)\n\t    BigInteger.prototype.squareTo = function (r) {\n\t        var x = this.abs();\n\t        var i = r.t = 2 * x.t;\n\t        while (--i >= 0) {\n\t            r[i] = 0;\n\t        }\n\t        for (i = 0; i < x.t - 1; ++i) {\n\t            var c = x.am(i, x[i], r, 2 * i, 0, 1);\n\t            if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\n\t                r[i + x.t] -= x.DV;\n\t                r[i + x.t + 1] = 1;\n\t            }\n\t        }\n\t        if (r.t > 0) {\n\t            r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n\t        }\n\t        r.s = 0;\n\t        r.clamp();\n\t    };\n\t    // BigInteger.prototype.divRemTo = bnpDivRemTo;\n\t    // (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n\t    // r != q, this != m.  q or r may be null.\n\t    BigInteger.prototype.divRemTo = function (m, q, r) {\n\t        var pm = m.abs();\n\t        if (pm.t <= 0) {\n\t            return;\n\t        }\n\t        var pt = this.abs();\n\t        if (pt.t < pm.t) {\n\t            if (q != null) {\n\t                q.fromInt(0);\n\t            }\n\t            if (r != null) {\n\t                this.copyTo(r);\n\t            }\n\t            return;\n\t        }\n\t        if (r == null) {\n\t            r = nbi();\n\t        }\n\t        var y = nbi();\n\t        var ts = this.s;\n\t        var ms = m.s;\n\t        var nsh = this.DB - nbits(pm[pm.t - 1]); // normalize modulus\n\t        if (nsh > 0) {\n\t            pm.lShiftTo(nsh, y);\n\t            pt.lShiftTo(nsh, r);\n\t        }\n\t        else {\n\t            pm.copyTo(y);\n\t            pt.copyTo(r);\n\t        }\n\t        var ys = y.t;\n\t        var y0 = y[ys - 1];\n\t        if (y0 == 0) {\n\t            return;\n\t        }\n\t        var yt = y0 * (1 << this.F1) + ((ys > 1) ? y[ys - 2] >> this.F2 : 0);\n\t        var d1 = this.FV / yt;\n\t        var d2 = (1 << this.F1) / yt;\n\t        var e = 1 << this.F2;\n\t        var i = r.t;\n\t        var j = i - ys;\n\t        var t = (q == null) ? nbi() : q;\n\t        y.dlShiftTo(j, t);\n\t        if (r.compareTo(t) >= 0) {\n\t            r[r.t++] = 1;\n\t            r.subTo(t, r);\n\t        }\n\t        BigInteger.ONE.dlShiftTo(ys, t);\n\t        t.subTo(y, y); // \"negative\" y so we can replace sub with am later\n\t        while (y.t < ys) {\n\t            y[y.t++] = 0;\n\t        }\n\t        while (--j >= 0) {\n\t            // Estimate quotient digit\n\t            var qd = (r[--i] == y0) ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n\t            if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) { // Try it out\n\t                y.dlShiftTo(j, t);\n\t                r.subTo(t, r);\n\t                while (r[i] < --qd) {\n\t                    r.subTo(t, r);\n\t                }\n\t            }\n\t        }\n\t        if (q != null) {\n\t            r.drShiftTo(ys, q);\n\t            if (ts != ms) {\n\t                BigInteger.ZERO.subTo(q, q);\n\t            }\n\t        }\n\t        r.t = ys;\n\t        r.clamp();\n\t        if (nsh > 0) {\n\t            r.rShiftTo(nsh, r);\n\t        } // Denormalize remainder\n\t        if (ts < 0) {\n\t            BigInteger.ZERO.subTo(r, r);\n\t        }\n\t    };\n\t    // BigInteger.prototype.invDigit = bnpInvDigit;\n\t    // (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n\t    // justification:\n\t    //         xy == 1 (mod m)\n\t    //         xy =  1+km\n\t    //   xy(2-xy) = (1+km)(1-km)\n\t    // x[y(2-xy)] = 1-k^2m^2\n\t    // x[y(2-xy)] == 1 (mod m^2)\n\t    // if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n\t    // should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n\t    // JS multiply \"overflows\" differently from C/C++, so care is needed here.\n\t    BigInteger.prototype.invDigit = function () {\n\t        if (this.t < 1) {\n\t            return 0;\n\t        }\n\t        var x = this[0];\n\t        if ((x & 1) == 0) {\n\t            return 0;\n\t        }\n\t        var y = x & 3; // y == 1/x mod 2^2\n\t        y = (y * (2 - (x & 0xf) * y)) & 0xf; // y == 1/x mod 2^4\n\t        y = (y * (2 - (x & 0xff) * y)) & 0xff; // y == 1/x mod 2^8\n\t        y = (y * (2 - (((x & 0xffff) * y) & 0xffff))) & 0xffff; // y == 1/x mod 2^16\n\t        // last step - calculate inverse mod DV directly;\n\t        // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n\t        y = (y * (2 - x * y % this.DV)) % this.DV; // y == 1/x mod 2^dbits\n\t        // we really want the negative inverse, and -DV < y < DV\n\t        return (y > 0) ? this.DV - y : -y;\n\t    };\n\t    // BigInteger.prototype.isEven = bnpIsEven;\n\t    // (protected) true iff this is even\n\t    BigInteger.prototype.isEven = function () {\n\t        return ((this.t > 0) ? (this[0] & 1) : this.s) == 0;\n\t    };\n\t    // BigInteger.prototype.exp = bnpExp;\n\t    // (protected) this^e, e < 2^32, doing sqr and mul with \"r\" (HAC 14.79)\n\t    BigInteger.prototype.exp = function (e, z) {\n\t        if (e > 0xffffffff || e < 1) {\n\t            return BigInteger.ONE;\n\t        }\n\t        var r = nbi();\n\t        var r2 = nbi();\n\t        var g = z.convert(this);\n\t        var i = nbits(e) - 1;\n\t        g.copyTo(r);\n\t        while (--i >= 0) {\n\t            z.sqrTo(r, r2);\n\t            if ((e & (1 << i)) > 0) {\n\t                z.mulTo(r2, g, r);\n\t            }\n\t            else {\n\t                var t = r;\n\t                r = r2;\n\t                r2 = t;\n\t            }\n\t        }\n\t        return z.revert(r);\n\t    };\n\t    // BigInteger.prototype.chunkSize = bnpChunkSize;\n\t    // (protected) return x s.t. r^x < DV\n\t    BigInteger.prototype.chunkSize = function (r) {\n\t        return Math.floor(Math.LN2 * this.DB / Math.log(r));\n\t    };\n\t    // BigInteger.prototype.toRadix = bnpToRadix;\n\t    // (protected) convert to radix string\n\t    BigInteger.prototype.toRadix = function (b) {\n\t        if (b == null) {\n\t            b = 10;\n\t        }\n\t        if (this.signum() == 0 || b < 2 || b > 36) {\n\t            return \"0\";\n\t        }\n\t        var cs = this.chunkSize(b);\n\t        var a = Math.pow(b, cs);\n\t        var d = nbv(a);\n\t        var y = nbi();\n\t        var z = nbi();\n\t        var r = \"\";\n\t        this.divRemTo(d, y, z);\n\t        while (y.signum() > 0) {\n\t            r = (a + z.intValue()).toString(b).substr(1) + r;\n\t            y.divRemTo(d, y, z);\n\t        }\n\t        return z.intValue().toString(b) + r;\n\t    };\n\t    // BigInteger.prototype.fromRadix = bnpFromRadix;\n\t    // (protected) convert from radix string\n\t    BigInteger.prototype.fromRadix = function (s, b) {\n\t        this.fromInt(0);\n\t        if (b == null) {\n\t            b = 10;\n\t        }\n\t        var cs = this.chunkSize(b);\n\t        var d = Math.pow(b, cs);\n\t        var mi = false;\n\t        var j = 0;\n\t        var w = 0;\n\t        for (var i = 0; i < s.length; ++i) {\n\t            var x = intAt(s, i);\n\t            if (x < 0) {\n\t                if (s.charAt(i) == \"-\" && this.signum() == 0) {\n\t                    mi = true;\n\t                }\n\t                continue;\n\t            }\n\t            w = b * w + x;\n\t            if (++j >= cs) {\n\t                this.dMultiply(d);\n\t                this.dAddOffset(w, 0);\n\t                j = 0;\n\t                w = 0;\n\t            }\n\t        }\n\t        if (j > 0) {\n\t            this.dMultiply(Math.pow(b, j));\n\t            this.dAddOffset(w, 0);\n\t        }\n\t        if (mi) {\n\t            BigInteger.ZERO.subTo(this, this);\n\t        }\n\t    };\n\t    // BigInteger.prototype.fromNumber = bnpFromNumber;\n\t    // (protected) alternate constructor\n\t    BigInteger.prototype.fromNumber = function (a, b, c) {\n\t        if (\"number\" == typeof b) {\n\t            // new BigInteger(int,int,RNG)\n\t            if (a < 2) {\n\t                this.fromInt(1);\n\t            }\n\t            else {\n\t                this.fromNumber(a, c);\n\t                if (!this.testBit(a - 1)) {\n\t                    // force MSB set\n\t                    this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), op_or, this);\n\t                }\n\t                if (this.isEven()) {\n\t                    this.dAddOffset(1, 0);\n\t                } // force odd\n\t                while (!this.isProbablePrime(b)) {\n\t                    this.dAddOffset(2, 0);\n\t                    if (this.bitLength() > a) {\n\t                        this.subTo(BigInteger.ONE.shiftLeft(a - 1), this);\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            // new BigInteger(int,RNG)\n\t            var x = [];\n\t            var t = a & 7;\n\t            x.length = (a >> 3) + 1;\n\t            b.nextBytes(x);\n\t            if (t > 0) {\n\t                x[0] &= ((1 << t) - 1);\n\t            }\n\t            else {\n\t                x[0] = 0;\n\t            }\n\t            this.fromString(x, 256);\n\t        }\n\t    };\n\t    // BigInteger.prototype.bitwiseTo = bnpBitwiseTo;\n\t    // (protected) r = this op a (bitwise)\n\t    BigInteger.prototype.bitwiseTo = function (a, op, r) {\n\t        var i;\n\t        var f;\n\t        var m = Math.min(a.t, this.t);\n\t        for (i = 0; i < m; ++i) {\n\t            r[i] = op(this[i], a[i]);\n\t        }\n\t        if (a.t < this.t) {\n\t            f = a.s & this.DM;\n\t            for (i = m; i < this.t; ++i) {\n\t                r[i] = op(this[i], f);\n\t            }\n\t            r.t = this.t;\n\t        }\n\t        else {\n\t            f = this.s & this.DM;\n\t            for (i = m; i < a.t; ++i) {\n\t                r[i] = op(f, a[i]);\n\t            }\n\t            r.t = a.t;\n\t        }\n\t        r.s = op(this.s, a.s);\n\t        r.clamp();\n\t    };\n\t    // BigInteger.prototype.changeBit = bnpChangeBit;\n\t    // (protected) this op (1<<n)\n\t    BigInteger.prototype.changeBit = function (n, op) {\n\t        var r = BigInteger.ONE.shiftLeft(n);\n\t        this.bitwiseTo(r, op, r);\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.addTo = bnpAddTo;\n\t    // (protected) r = this + a\n\t    BigInteger.prototype.addTo = function (a, r) {\n\t        var i = 0;\n\t        var c = 0;\n\t        var m = Math.min(a.t, this.t);\n\t        while (i < m) {\n\t            c += this[i] + a[i];\n\t            r[i++] = c & this.DM;\n\t            c >>= this.DB;\n\t        }\n\t        if (a.t < this.t) {\n\t            c += a.s;\n\t            while (i < this.t) {\n\t                c += this[i];\n\t                r[i++] = c & this.DM;\n\t                c >>= this.DB;\n\t            }\n\t            c += this.s;\n\t        }\n\t        else {\n\t            c += this.s;\n\t            while (i < a.t) {\n\t                c += a[i];\n\t                r[i++] = c & this.DM;\n\t                c >>= this.DB;\n\t            }\n\t            c += a.s;\n\t        }\n\t        r.s = (c < 0) ? -1 : 0;\n\t        if (c > 0) {\n\t            r[i++] = c;\n\t        }\n\t        else if (c < -1) {\n\t            r[i++] = this.DV + c;\n\t        }\n\t        r.t = i;\n\t        r.clamp();\n\t    };\n\t    // BigInteger.prototype.dMultiply = bnpDMultiply;\n\t    // (protected) this *= n, this >= 0, 1 < n < DV\n\t    BigInteger.prototype.dMultiply = function (n) {\n\t        this[this.t] = this.am(0, n - 1, this, 0, 0, this.t);\n\t        ++this.t;\n\t        this.clamp();\n\t    };\n\t    // BigInteger.prototype.dAddOffset = bnpDAddOffset;\n\t    // (protected) this += n << w words, this >= 0\n\t    BigInteger.prototype.dAddOffset = function (n, w) {\n\t        if (n == 0) {\n\t            return;\n\t        }\n\t        while (this.t <= w) {\n\t            this[this.t++] = 0;\n\t        }\n\t        this[w] += n;\n\t        while (this[w] >= this.DV) {\n\t            this[w] -= this.DV;\n\t            if (++w >= this.t) {\n\t                this[this.t++] = 0;\n\t            }\n\t            ++this[w];\n\t        }\n\t    };\n\t    // BigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\n\t    // (protected) r = lower n words of \"this * a\", a.t <= n\n\t    // \"this\" should be the larger one if appropriate.\n\t    BigInteger.prototype.multiplyLowerTo = function (a, n, r) {\n\t        var i = Math.min(this.t + a.t, n);\n\t        r.s = 0; // assumes a,this >= 0\n\t        r.t = i;\n\t        while (i > 0) {\n\t            r[--i] = 0;\n\t        }\n\t        for (var j = r.t - this.t; i < j; ++i) {\n\t            r[i + this.t] = this.am(0, a[i], r, i, 0, this.t);\n\t        }\n\t        for (var j = Math.min(a.t, n); i < j; ++i) {\n\t            this.am(0, a[i], r, i, 0, n - i);\n\t        }\n\t        r.clamp();\n\t    };\n\t    // BigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\n\t    // (protected) r = \"this * a\" without lower n words, n > 0\n\t    // \"this\" should be the larger one if appropriate.\n\t    BigInteger.prototype.multiplyUpperTo = function (a, n, r) {\n\t        --n;\n\t        var i = r.t = this.t + a.t - n;\n\t        r.s = 0; // assumes a,this >= 0\n\t        while (--i >= 0) {\n\t            r[i] = 0;\n\t        }\n\t        for (i = Math.max(n - this.t, 0); i < a.t; ++i) {\n\t            r[this.t + i - n] = this.am(n - i, a[i], r, 0, 0, this.t + i - n);\n\t        }\n\t        r.clamp();\n\t        r.drShiftTo(1, r);\n\t    };\n\t    // BigInteger.prototype.modInt = bnpModInt;\n\t    // (protected) this % n, n < 2^26\n\t    BigInteger.prototype.modInt = function (n) {\n\t        if (n <= 0) {\n\t            return 0;\n\t        }\n\t        var d = this.DV % n;\n\t        var r = (this.s < 0) ? n - 1 : 0;\n\t        if (this.t > 0) {\n\t            if (d == 0) {\n\t                r = this[0] % n;\n\t            }\n\t            else {\n\t                for (var i = this.t - 1; i >= 0; --i) {\n\t                    r = (d * r + this[i]) % n;\n\t                }\n\t            }\n\t        }\n\t        return r;\n\t    };\n\t    // BigInteger.prototype.millerRabin = bnpMillerRabin;\n\t    // (protected) true if probably prime (HAC 4.24, Miller-Rabin)\n\t    BigInteger.prototype.millerRabin = function (t) {\n\t        var n1 = this.subtract(BigInteger.ONE);\n\t        var k = n1.getLowestSetBit();\n\t        if (k <= 0) {\n\t            return false;\n\t        }\n\t        var r = n1.shiftRight(k);\n\t        t = (t + 1) >> 1;\n\t        if (t > lowprimes.length) {\n\t            t = lowprimes.length;\n\t        }\n\t        var a = nbi();\n\t        for (var i = 0; i < t; ++i) {\n\t            // Pick bases at random, instead of starting at 2\n\t            a.fromInt(lowprimes[Math.floor(Math.random() * lowprimes.length)]);\n\t            var y = a.modPow(r, this);\n\t            if (y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {\n\t                var j = 1;\n\t                while (j++ < k && y.compareTo(n1) != 0) {\n\t                    y = y.modPowInt(2, this);\n\t                    if (y.compareTo(BigInteger.ONE) == 0) {\n\t                        return false;\n\t                    }\n\t                }\n\t                if (y.compareTo(n1) != 0) {\n\t                    return false;\n\t                }\n\t            }\n\t        }\n\t        return true;\n\t    };\n\t    // BigInteger.prototype.square = bnSquare;\n\t    // (public) this^2\n\t    BigInteger.prototype.square = function () {\n\t        var r = nbi();\n\t        this.squareTo(r);\n\t        return r;\n\t    };\n\t    //#region ASYNC\n\t    // Public API method\n\t    BigInteger.prototype.gcda = function (a, callback) {\n\t        var x = (this.s < 0) ? this.negate() : this.clone();\n\t        var y = (a.s < 0) ? a.negate() : a.clone();\n\t        if (x.compareTo(y) < 0) {\n\t            var t = x;\n\t            x = y;\n\t            y = t;\n\t        }\n\t        var i = x.getLowestSetBit();\n\t        var g = y.getLowestSetBit();\n\t        if (g < 0) {\n\t            callback(x);\n\t            return;\n\t        }\n\t        if (i < g) {\n\t            g = i;\n\t        }\n\t        if (g > 0) {\n\t            x.rShiftTo(g, x);\n\t            y.rShiftTo(g, y);\n\t        }\n\t        // Workhorse of the algorithm, gets called 200 - 800 times per 512 bit keygen.\n\t        var gcda1 = function () {\n\t            if ((i = x.getLowestSetBit()) > 0) {\n\t                x.rShiftTo(i, x);\n\t            }\n\t            if ((i = y.getLowestSetBit()) > 0) {\n\t                y.rShiftTo(i, y);\n\t            }\n\t            if (x.compareTo(y) >= 0) {\n\t                x.subTo(y, x);\n\t                x.rShiftTo(1, x);\n\t            }\n\t            else {\n\t                y.subTo(x, y);\n\t                y.rShiftTo(1, y);\n\t            }\n\t            if (!(x.signum() > 0)) {\n\t                if (g > 0) {\n\t                    y.lShiftTo(g, y);\n\t                }\n\t                setTimeout(function () { callback(y); }, 0); // escape\n\t            }\n\t            else {\n\t                setTimeout(gcda1, 0);\n\t            }\n\t        };\n\t        setTimeout(gcda1, 10);\n\t    };\n\t    // (protected) alternate constructor\n\t    BigInteger.prototype.fromNumberAsync = function (a, b, c, callback) {\n\t        if (\"number\" == typeof b) {\n\t            if (a < 2) {\n\t                this.fromInt(1);\n\t            }\n\t            else {\n\t                this.fromNumber(a, c);\n\t                if (!this.testBit(a - 1)) {\n\t                    this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), op_or, this);\n\t                }\n\t                if (this.isEven()) {\n\t                    this.dAddOffset(1, 0);\n\t                }\n\t                var bnp_1 = this;\n\t                var bnpfn1_1 = function () {\n\t                    bnp_1.dAddOffset(2, 0);\n\t                    if (bnp_1.bitLength() > a) {\n\t                        bnp_1.subTo(BigInteger.ONE.shiftLeft(a - 1), bnp_1);\n\t                    }\n\t                    if (bnp_1.isProbablePrime(b)) {\n\t                        setTimeout(function () { callback(); }, 0); // escape\n\t                    }\n\t                    else {\n\t                        setTimeout(bnpfn1_1, 0);\n\t                    }\n\t                };\n\t                setTimeout(bnpfn1_1, 0);\n\t            }\n\t        }\n\t        else {\n\t            var x = [];\n\t            var t = a & 7;\n\t            x.length = (a >> 3) + 1;\n\t            b.nextBytes(x);\n\t            if (t > 0) {\n\t                x[0] &= ((1 << t) - 1);\n\t            }\n\t            else {\n\t                x[0] = 0;\n\t            }\n\t            this.fromString(x, 256);\n\t        }\n\t    };\n\t    return BigInteger;\n\t}());\n\t//#region REDUCERS\n\t//#region NullExp\n\tvar NullExp = /** @class */ (function () {\n\t    function NullExp() {\n\t    }\n\t    // NullExp.prototype.convert = nNop;\n\t    NullExp.prototype.convert = function (x) {\n\t        return x;\n\t    };\n\t    // NullExp.prototype.revert = nNop;\n\t    NullExp.prototype.revert = function (x) {\n\t        return x;\n\t    };\n\t    // NullExp.prototype.mulTo = nMulTo;\n\t    NullExp.prototype.mulTo = function (x, y, r) {\n\t        x.multiplyTo(y, r);\n\t    };\n\t    // NullExp.prototype.sqrTo = nSqrTo;\n\t    NullExp.prototype.sqrTo = function (x, r) {\n\t        x.squareTo(r);\n\t    };\n\t    return NullExp;\n\t}());\n\t// Modular reduction using \"classic\" algorithm\n\tvar Classic = /** @class */ (function () {\n\t    function Classic(m) {\n\t        this.m = m;\n\t    }\n\t    // Classic.prototype.convert = cConvert;\n\t    Classic.prototype.convert = function (x) {\n\t        if (x.s < 0 || x.compareTo(this.m) >= 0) {\n\t            return x.mod(this.m);\n\t        }\n\t        else {\n\t            return x;\n\t        }\n\t    };\n\t    // Classic.prototype.revert = cRevert;\n\t    Classic.prototype.revert = function (x) {\n\t        return x;\n\t    };\n\t    // Classic.prototype.reduce = cReduce;\n\t    Classic.prototype.reduce = function (x) {\n\t        x.divRemTo(this.m, null, x);\n\t    };\n\t    // Classic.prototype.mulTo = cMulTo;\n\t    Classic.prototype.mulTo = function (x, y, r) {\n\t        x.multiplyTo(y, r);\n\t        this.reduce(r);\n\t    };\n\t    // Classic.prototype.sqrTo = cSqrTo;\n\t    Classic.prototype.sqrTo = function (x, r) {\n\t        x.squareTo(r);\n\t        this.reduce(r);\n\t    };\n\t    return Classic;\n\t}());\n\t//#endregion\n\t//#region Montgomery\n\t// Montgomery reduction\n\tvar Montgomery = /** @class */ (function () {\n\t    function Montgomery(m) {\n\t        this.m = m;\n\t        this.mp = m.invDigit();\n\t        this.mpl = this.mp & 0x7fff;\n\t        this.mph = this.mp >> 15;\n\t        this.um = (1 << (m.DB - 15)) - 1;\n\t        this.mt2 = 2 * m.t;\n\t    }\n\t    // Montgomery.prototype.convert = montConvert;\n\t    // xR mod m\n\t    Montgomery.prototype.convert = function (x) {\n\t        var r = nbi();\n\t        x.abs().dlShiftTo(this.m.t, r);\n\t        r.divRemTo(this.m, null, r);\n\t        if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) {\n\t            this.m.subTo(r, r);\n\t        }\n\t        return r;\n\t    };\n\t    // Montgomery.prototype.revert = montRevert;\n\t    // x/R mod m\n\t    Montgomery.prototype.revert = function (x) {\n\t        var r = nbi();\n\t        x.copyTo(r);\n\t        this.reduce(r);\n\t        return r;\n\t    };\n\t    // Montgomery.prototype.reduce = montReduce;\n\t    // x = x/R mod m (HAC 14.32)\n\t    Montgomery.prototype.reduce = function (x) {\n\t        while (x.t <= this.mt2) {\n\t            // pad x so am has enough room later\n\t            x[x.t++] = 0;\n\t        }\n\t        for (var i = 0; i < this.m.t; ++i) {\n\t            // faster way of calculating u0 = x[i]*mp mod DV\n\t            var j = x[i] & 0x7fff;\n\t            var u0 = (j * this.mpl + (((j * this.mph + (x[i] >> 15) * this.mpl) & this.um) << 15)) & x.DM;\n\t            // use am to combine the multiply-shift-add into one call\n\t            j = i + this.m.t;\n\t            x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n\t            // propagate carry\n\t            while (x[j] >= x.DV) {\n\t                x[j] -= x.DV;\n\t                x[++j]++;\n\t            }\n\t        }\n\t        x.clamp();\n\t        x.drShiftTo(this.m.t, x);\n\t        if (x.compareTo(this.m) >= 0) {\n\t            x.subTo(this.m, x);\n\t        }\n\t    };\n\t    // Montgomery.prototype.mulTo = montMulTo;\n\t    // r = \"xy/R mod m\"; x,y != r\n\t    Montgomery.prototype.mulTo = function (x, y, r) {\n\t        x.multiplyTo(y, r);\n\t        this.reduce(r);\n\t    };\n\t    // Montgomery.prototype.sqrTo = montSqrTo;\n\t    // r = \"x^2/R mod m\"; x != r\n\t    Montgomery.prototype.sqrTo = function (x, r) {\n\t        x.squareTo(r);\n\t        this.reduce(r);\n\t    };\n\t    return Montgomery;\n\t}());\n\t//#endregion Montgomery\n\t//#region Barrett\n\t// Barrett modular reduction\n\tvar Barrett = /** @class */ (function () {\n\t    function Barrett(m) {\n\t        this.m = m;\n\t        // setup Barrett\n\t        this.r2 = nbi();\n\t        this.q3 = nbi();\n\t        BigInteger.ONE.dlShiftTo(2 * m.t, this.r2);\n\t        this.mu = this.r2.divide(m);\n\t    }\n\t    // Barrett.prototype.convert = barrettConvert;\n\t    Barrett.prototype.convert = function (x) {\n\t        if (x.s < 0 || x.t > 2 * this.m.t) {\n\t            return x.mod(this.m);\n\t        }\n\t        else if (x.compareTo(this.m) < 0) {\n\t            return x;\n\t        }\n\t        else {\n\t            var r = nbi();\n\t            x.copyTo(r);\n\t            this.reduce(r);\n\t            return r;\n\t        }\n\t    };\n\t    // Barrett.prototype.revert = barrettRevert;\n\t    Barrett.prototype.revert = function (x) {\n\t        return x;\n\t    };\n\t    // Barrett.prototype.reduce = barrettReduce;\n\t    // x = x mod m (HAC 14.42)\n\t    Barrett.prototype.reduce = function (x) {\n\t        x.drShiftTo(this.m.t - 1, this.r2);\n\t        if (x.t > this.m.t + 1) {\n\t            x.t = this.m.t + 1;\n\t            x.clamp();\n\t        }\n\t        this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3);\n\t        this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2);\n\t        while (x.compareTo(this.r2) < 0) {\n\t            x.dAddOffset(1, this.m.t + 1);\n\t        }\n\t        x.subTo(this.r2, x);\n\t        while (x.compareTo(this.m) >= 0) {\n\t            x.subTo(this.m, x);\n\t        }\n\t    };\n\t    // Barrett.prototype.mulTo = barrettMulTo;\n\t    // r = x*y mod m; x,y != r\n\t    Barrett.prototype.mulTo = function (x, y, r) {\n\t        x.multiplyTo(y, r);\n\t        this.reduce(r);\n\t    };\n\t    // Barrett.prototype.sqrTo = barrettSqrTo;\n\t    // r = x^2 mod m; x != r\n\t    Barrett.prototype.sqrTo = function (x, r) {\n\t        x.squareTo(r);\n\t        this.reduce(r);\n\t    };\n\t    return Barrett;\n\t}());\n\t//#endregion\n\t//#endregion REDUCERS\n\t// return new, unset BigInteger\n\tfunction nbi() { return new BigInteger(null); }\n\tfunction parseBigInt(str, r) {\n\t    return new BigInteger(str, r);\n\t}\n\t// am: Compute w_j += (x*this_i), propagate carries,\n\t// c is initial carry, returns final carry.\n\t// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n\t// We need to select the fastest one that works in this environment.\n\t// am1: use a single mult and divide to get the high bits,\n\t// max digit bits should be 26 because\n\t// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\n\tfunction am1(i, x, w, j, c, n) {\n\t    while (--n >= 0) {\n\t        var v = x * this[i++] + w[j] + c;\n\t        c = Math.floor(v / 0x4000000);\n\t        w[j++] = v & 0x3ffffff;\n\t    }\n\t    return c;\n\t}\n\t// am2 avoids a big mult-and-extract completely.\n\t// Max digit bits should be <= 30 because we do bitwise ops\n\t// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\n\tfunction am2(i, x, w, j, c, n) {\n\t    var xl = x & 0x7fff;\n\t    var xh = x >> 15;\n\t    while (--n >= 0) {\n\t        var l = this[i] & 0x7fff;\n\t        var h = this[i++] >> 15;\n\t        var m = xh * l + h * xl;\n\t        l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n\t        c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n\t        w[j++] = l & 0x3fffffff;\n\t    }\n\t    return c;\n\t}\n\t// Alternately, set max digit bits to 28 since some\n\t// browsers slow down when dealing with 32-bit numbers.\n\tfunction am3(i, x, w, j, c, n) {\n\t    var xl = x & 0x3fff;\n\t    var xh = x >> 14;\n\t    while (--n >= 0) {\n\t        var l = this[i] & 0x3fff;\n\t        var h = this[i++] >> 14;\n\t        var m = xh * l + h * xl;\n\t        l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n\t        c = (l >> 28) + (m >> 14) + xh * h;\n\t        w[j++] = l & 0xfffffff;\n\t    }\n\t    return c;\n\t}\n\tif (j_lm && (navigator.appName == \"Microsoft Internet Explorer\")) {\n\t    BigInteger.prototype.am = am2;\n\t    dbits = 30;\n\t}\n\telse if (j_lm && (navigator.appName != \"Netscape\")) {\n\t    BigInteger.prototype.am = am1;\n\t    dbits = 26;\n\t}\n\telse { // Mozilla/Netscape seems to prefer am3\n\t    BigInteger.prototype.am = am3;\n\t    dbits = 28;\n\t}\n\tBigInteger.prototype.DB = dbits;\n\tBigInteger.prototype.DM = ((1 << dbits) - 1);\n\tBigInteger.prototype.DV = (1 << dbits);\n\tvar BI_FP = 52;\n\tBigInteger.prototype.FV = Math.pow(2, BI_FP);\n\tBigInteger.prototype.F1 = BI_FP - dbits;\n\tBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n\t// Digit conversions\n\tvar BI_RC = [];\n\tvar rr;\n\tvar vv;\n\trr = \"0\".charCodeAt(0);\n\tfor (vv = 0; vv <= 9; ++vv) {\n\t    BI_RC[rr++] = vv;\n\t}\n\trr = \"a\".charCodeAt(0);\n\tfor (vv = 10; vv < 36; ++vv) {\n\t    BI_RC[rr++] = vv;\n\t}\n\trr = \"A\".charCodeAt(0);\n\tfor (vv = 10; vv < 36; ++vv) {\n\t    BI_RC[rr++] = vv;\n\t}\n\tfunction intAt(s, i) {\n\t    var c = BI_RC[s.charCodeAt(i)];\n\t    return (c == null) ? -1 : c;\n\t}\n\t// return bigint initialized to value\n\tfunction nbv(i) {\n\t    var r = nbi();\n\t    r.fromInt(i);\n\t    return r;\n\t}\n\t// returns bit length of the integer x\n\tfunction nbits(x) {\n\t    var r = 1;\n\t    var t;\n\t    if ((t = x >>> 16) != 0) {\n\t        x = t;\n\t        r += 16;\n\t    }\n\t    if ((t = x >> 8) != 0) {\n\t        x = t;\n\t        r += 8;\n\t    }\n\t    if ((t = x >> 4) != 0) {\n\t        x = t;\n\t        r += 4;\n\t    }\n\t    if ((t = x >> 2) != 0) {\n\t        x = t;\n\t        r += 2;\n\t    }\n\t    if ((t = x >> 1) != 0) {\n\t        x = t;\n\t        r += 1;\n\t    }\n\t    return r;\n\t}\n\t// \"constants\"\n\tBigInteger.ZERO = nbv(0);\n\tBigInteger.ONE = nbv(1);\n\t\n\t// prng4.js - uses Arcfour as a PRNG\n\tvar Arcfour = /** @class */ (function () {\n\t    function Arcfour() {\n\t        this.i = 0;\n\t        this.j = 0;\n\t        this.S = [];\n\t    }\n\t    // Arcfour.prototype.init = ARC4init;\n\t    // Initialize arcfour context from key, an array of ints, each from [0..255]\n\t    Arcfour.prototype.init = function (key) {\n\t        var i;\n\t        var j;\n\t        var t;\n\t        for (i = 0; i < 256; ++i) {\n\t            this.S[i] = i;\n\t        }\n\t        j = 0;\n\t        for (i = 0; i < 256; ++i) {\n\t            j = (j + this.S[i] + key[i % key.length]) & 255;\n\t            t = this.S[i];\n\t            this.S[i] = this.S[j];\n\t            this.S[j] = t;\n\t        }\n\t        this.i = 0;\n\t        this.j = 0;\n\t    };\n\t    // Arcfour.prototype.next = ARC4next;\n\t    Arcfour.prototype.next = function () {\n\t        var t;\n\t        this.i = (this.i + 1) & 255;\n\t        this.j = (this.j + this.S[this.i]) & 255;\n\t        t = this.S[this.i];\n\t        this.S[this.i] = this.S[this.j];\n\t        this.S[this.j] = t;\n\t        return this.S[(t + this.S[this.i]) & 255];\n\t    };\n\t    return Arcfour;\n\t}());\n\t// Plug in your RNG constructor here\n\tfunction prng_newstate() {\n\t    return new Arcfour();\n\t}\n\t// Pool size must be a multiple of 4 and greater than 32.\n\t// An array of bytes the size of the pool will be passed to init()\n\tvar rng_psize = 256;\n\t\n\t// Random number generator - requires a PRNG backend, e.g. prng4.js\n\tvar rng_state;\n\tvar rng_pool = null;\n\tvar rng_pptr;\n\t// Initialize the pool with junk if needed.\n\tif (rng_pool == null) {\n\t    rng_pool = [];\n\t    rng_pptr = 0;\n\t    var t = void 0;\n\t    if (window.crypto && window.crypto.getRandomValues) {\n\t        // Extract entropy (2048 bits) from RNG if available\n\t        var z = new Uint32Array(256);\n\t        window.crypto.getRandomValues(z);\n\t        for (t = 0; t < z.length; ++t) {\n\t            rng_pool[rng_pptr++] = z[t] & 255;\n\t        }\n\t    }\n\t    // Use mouse events for entropy, if we do not have enough entropy by the time\n\t    // we need it, entropy will be generated by Math.random.\n\t    var onMouseMoveListener_1 = function (ev) {\n\t        this.count = this.count || 0;\n\t        if (this.count >= 256 || rng_pptr >= rng_psize) {\n\t            if (window.removeEventListener) {\n\t                window.removeEventListener(\"mousemove\", onMouseMoveListener_1, false);\n\t            }\n\t            else if (window.detachEvent) {\n\t                window.detachEvent(\"onmousemove\", onMouseMoveListener_1);\n\t            }\n\t            return;\n\t        }\n\t        try {\n\t            var mouseCoordinates = ev.x + ev.y;\n\t            rng_pool[rng_pptr++] = mouseCoordinates & 255;\n\t            this.count += 1;\n\t        }\n\t        catch (e) {\n\t            // Sometimes Firefox will deny permission to access event properties for some reason. Ignore.\n\t        }\n\t    };\n\t    if (window.addEventListener) {\n\t        window.addEventListener(\"mousemove\", onMouseMoveListener_1, false);\n\t    }\n\t    else if (window.attachEvent) {\n\t        window.attachEvent(\"onmousemove\", onMouseMoveListener_1);\n\t    }\n\t}\n\tfunction rng_get_byte() {\n\t    if (rng_state == null) {\n\t        rng_state = prng_newstate();\n\t        // At this point, we may not have collected enough entropy.  If not, fall back to Math.random\n\t        while (rng_pptr < rng_psize) {\n\t            var random = Math.floor(65536 * Math.random());\n\t            rng_pool[rng_pptr++] = random & 255;\n\t        }\n\t        rng_state.init(rng_pool);\n\t        for (rng_pptr = 0; rng_pptr < rng_pool.length; ++rng_pptr) {\n\t            rng_pool[rng_pptr] = 0;\n\t        }\n\t        rng_pptr = 0;\n\t    }\n\t    // TODO: allow reseeding after first request\n\t    return rng_state.next();\n\t}\n\tvar SecureRandom = /** @class */ (function () {\n\t    function SecureRandom() {\n\t    }\n\t    SecureRandom.prototype.nextBytes = function (ba) {\n\t        for (var i = 0; i < ba.length; ++i) {\n\t            ba[i] = rng_get_byte();\n\t        }\n\t    };\n\t    return SecureRandom;\n\t}());\n\t\n\t// Depends on jsbn.js and rng.js\n\t// function linebrk(s,n) {\n\t//   var ret = \"\";\n\t//   var i = 0;\n\t//   while(i + n < s.length) {\n\t//     ret += s.substring(i,i+n) + \"\\n\";\n\t//     i += n;\n\t//   }\n\t//   return ret + s.substring(i,s.length);\n\t// }\n\t// function byte2Hex(b) {\n\t//   if(b < 0x10)\n\t//     return \"0\" + b.toString(16);\n\t//   else\n\t//     return b.toString(16);\n\t// }\n\tfunction pkcs1pad1(s, n) {\n\t    if (n < s.length + 22) {\n\t        console.error(\"Message too long for RSA\");\n\t        return null;\n\t    }\n\t    var len = n - s.length - 6;\n\t    var filler = \"\";\n\t    for (var f = 0; f < len; f += 2) {\n\t        filler += \"ff\";\n\t    }\n\t    var m = \"0001\" + filler + \"00\" + s;\n\t    return parseBigInt(m, 16);\n\t}\n\t// PKCS#1 (type 2, random) pad input string s to n bytes, and return a bigint\n\tfunction pkcs1pad2(s, n) {\n\t    if (n < s.length + 11) { // TODO: fix for utf-8\n\t        console.error(\"Message too long for RSA\");\n\t        return null;\n\t    }\n\t    var ba = [];\n\t    var i = s.length - 1;\n\t    while (i >= 0 && n > 0) {\n\t        var c = s.charCodeAt(i--);\n\t        if (c < 128) { // encode using utf-8\n\t            ba[--n] = c;\n\t        }\n\t        else if ((c > 127) && (c < 2048)) {\n\t            ba[--n] = (c & 63) | 128;\n\t            ba[--n] = (c >> 6) | 192;\n\t        }\n\t        else {\n\t            ba[--n] = (c & 63) | 128;\n\t            ba[--n] = ((c >> 6) & 63) | 128;\n\t            ba[--n] = (c >> 12) | 224;\n\t        }\n\t    }\n\t    ba[--n] = 0;\n\t    var rng = new SecureRandom();\n\t    var x = [];\n\t    while (n > 2) { // random non-zero pad\n\t        x[0] = 0;\n\t        while (x[0] == 0) {\n\t            rng.nextBytes(x);\n\t        }\n\t        ba[--n] = x[0];\n\t    }\n\t    ba[--n] = 2;\n\t    ba[--n] = 0;\n\t    return new BigInteger(ba);\n\t}\n\t// \"empty\" RSA key constructor\n\tvar RSAKey = /** @class */ (function () {\n\t    function RSAKey() {\n\t        this.n = null;\n\t        this.e = 0;\n\t        this.d = null;\n\t        this.p = null;\n\t        this.q = null;\n\t        this.dmp1 = null;\n\t        this.dmq1 = null;\n\t        this.coeff = null;\n\t    }\n\t    //#region PROTECTED\n\t    // protected\n\t    // RSAKey.prototype.doPublic = RSADoPublic;\n\t    // Perform raw public operation on \"x\": return x^e (mod n)\n\t    RSAKey.prototype.doPublic = function (x) {\n\t        return x.modPowInt(this.e, this.n);\n\t    };\n\t    // RSAKey.prototype.doPrivate = RSADoPrivate;\n\t    // Perform raw private operation on \"x\": return x^d (mod n)\n\t    RSAKey.prototype.doPrivate = function (x) {\n\t        if (this.p == null || this.q == null) {\n\t            return x.modPow(this.d, this.n);\n\t        }\n\t        // TODO: re-calculate any missing CRT params\n\t        var xp = x.mod(this.p).modPow(this.dmp1, this.p);\n\t        var xq = x.mod(this.q).modPow(this.dmq1, this.q);\n\t        while (xp.compareTo(xq) < 0) {\n\t            xp = xp.add(this.p);\n\t        }\n\t        return xp.subtract(xq).multiply(this.coeff).mod(this.p).multiply(this.q).add(xq);\n\t    };\n\t    //#endregion PROTECTED\n\t    //#region PUBLIC\n\t    // RSAKey.prototype.setPublic = RSASetPublic;\n\t    // Set the public key fields N and e from hex strings\n\t    RSAKey.prototype.setPublic = function (N, E) {\n\t        if (N != null && E != null && N.length > 0 && E.length > 0) {\n\t            this.n = parseBigInt(N, 16);\n\t            this.e = parseInt(E, 16);\n\t        }\n\t        else {\n\t            console.error(\"Invalid RSA public key\");\n\t        }\n\t    };\n\t    // RSAKey.prototype.encrypt = RSAEncrypt;\n\t    // Return the PKCS#1 RSA encryption of \"text\" as an even-length hex string\n\t    RSAKey.prototype.encrypt = function (text) {\n\t        var m = pkcs1pad2(text, (this.n.bitLength() + 7) >> 3);\n\t        if (m == null) {\n\t            return null;\n\t        }\n\t        var c = this.doPublic(m);\n\t        if (c == null) {\n\t            return null;\n\t        }\n\t        var h = c.toString(16);\n\t        if ((h.length & 1) == 0) {\n\t            return h;\n\t        }\n\t        else {\n\t            return \"0\" + h;\n\t        }\n\t    };\n\t    // RSAKey.prototype.setPrivate = RSASetPrivate;\n\t    // Set the private key fields N, e, and d from hex strings\n\t    RSAKey.prototype.setPrivate = function (N, E, D) {\n\t        if (N != null && E != null && N.length > 0 && E.length > 0) {\n\t            this.n = parseBigInt(N, 16);\n\t            this.e = parseInt(E, 16);\n\t            this.d = parseBigInt(D, 16);\n\t        }\n\t        else {\n\t            console.error(\"Invalid RSA private key\");\n\t        }\n\t    };\n\t    // RSAKey.prototype.setPrivateEx = RSASetPrivateEx;\n\t    // Set the private key fields N, e, d and CRT params from hex strings\n\t    RSAKey.prototype.setPrivateEx = function (N, E, D, P, Q, DP, DQ, C) {\n\t        if (N != null && E != null && N.length > 0 && E.length > 0) {\n\t            this.n = parseBigInt(N, 16);\n\t            this.e = parseInt(E, 16);\n\t            this.d = parseBigInt(D, 16);\n\t            this.p = parseBigInt(P, 16);\n\t            this.q = parseBigInt(Q, 16);\n\t            this.dmp1 = parseBigInt(DP, 16);\n\t            this.dmq1 = parseBigInt(DQ, 16);\n\t            this.coeff = parseBigInt(C, 16);\n\t        }\n\t        else {\n\t            console.error(\"Invalid RSA private key\");\n\t        }\n\t    };\n\t    // RSAKey.prototype.generate = RSAGenerate;\n\t    // Generate a new random private key B bits long, using public expt E\n\t    RSAKey.prototype.generate = function (B, E) {\n\t        var rng = new SecureRandom();\n\t        var qs = B >> 1;\n\t        this.e = parseInt(E, 16);\n\t        var ee = new BigInteger(E, 16);\n\t        for (;;) {\n\t            for (;;) {\n\t                this.p = new BigInteger(B - qs, 1, rng);\n\t                if (this.p.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE) == 0 && this.p.isProbablePrime(10)) {\n\t                    break;\n\t                }\n\t            }\n\t            for (;;) {\n\t                this.q = new BigInteger(qs, 1, rng);\n\t                if (this.q.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE) == 0 && this.q.isProbablePrime(10)) {\n\t                    break;\n\t                }\n\t            }\n\t            if (this.p.compareTo(this.q) <= 0) {\n\t                var t = this.p;\n\t                this.p = this.q;\n\t                this.q = t;\n\t            }\n\t            var p1 = this.p.subtract(BigInteger.ONE);\n\t            var q1 = this.q.subtract(BigInteger.ONE);\n\t            var phi = p1.multiply(q1);\n\t            if (phi.gcd(ee).compareTo(BigInteger.ONE) == 0) {\n\t                this.n = this.p.multiply(this.q);\n\t                this.d = ee.modInverse(phi);\n\t                this.dmp1 = this.d.mod(p1);\n\t                this.dmq1 = this.d.mod(q1);\n\t                this.coeff = this.q.modInverse(this.p);\n\t                break;\n\t            }\n\t        }\n\t    };\n\t    // RSAKey.prototype.decrypt = RSADecrypt;\n\t    // Return the PKCS#1 RSA decryption of \"ctext\".\n\t    // \"ctext\" is an even-length hex string and the output is a plain string.\n\t    RSAKey.prototype.decrypt = function (ctext) {\n\t        var c = parseBigInt(ctext, 16);\n\t        var m = this.doPrivate(c);\n\t        if (m == null) {\n\t            return null;\n\t        }\n\t        return pkcs1unpad2(m, (this.n.bitLength() + 7) >> 3);\n\t    };\n\t    // Generate a new random private key B bits long, using public expt E\n\t    RSAKey.prototype.generateAsync = function (B, E, callback) {\n\t        var rng = new SecureRandom();\n\t        var qs = B >> 1;\n\t        this.e = parseInt(E, 16);\n\t        var ee = new BigInteger(E, 16);\n\t        var rsa = this;\n\t        // These functions have non-descript names because they were originally for(;;) loops.\n\t        // I don't know about cryptography to give them better names than loop1-4.\n\t        var loop1 = function () {\n\t            var loop4 = function () {\n\t                if (rsa.p.compareTo(rsa.q) <= 0) {\n\t                    var t = rsa.p;\n\t                    rsa.p = rsa.q;\n\t                    rsa.q = t;\n\t                }\n\t                var p1 = rsa.p.subtract(BigInteger.ONE);\n\t                var q1 = rsa.q.subtract(BigInteger.ONE);\n\t                var phi = p1.multiply(q1);\n\t                if (phi.gcd(ee).compareTo(BigInteger.ONE) == 0) {\n\t                    rsa.n = rsa.p.multiply(rsa.q);\n\t                    rsa.d = ee.modInverse(phi);\n\t                    rsa.dmp1 = rsa.d.mod(p1);\n\t                    rsa.dmq1 = rsa.d.mod(q1);\n\t                    rsa.coeff = rsa.q.modInverse(rsa.p);\n\t                    setTimeout(function () { callback(); }, 0); // escape\n\t                }\n\t                else {\n\t                    setTimeout(loop1, 0);\n\t                }\n\t            };\n\t            var loop3 = function () {\n\t                rsa.q = nbi();\n\t                rsa.q.fromNumberAsync(qs, 1, rng, function () {\n\t                    rsa.q.subtract(BigInteger.ONE).gcda(ee, function (r) {\n\t                        if (r.compareTo(BigInteger.ONE) == 0 && rsa.q.isProbablePrime(10)) {\n\t                            setTimeout(loop4, 0);\n\t                        }\n\t                        else {\n\t                            setTimeout(loop3, 0);\n\t                        }\n\t                    });\n\t                });\n\t            };\n\t            var loop2 = function () {\n\t                rsa.p = nbi();\n\t                rsa.p.fromNumberAsync(B - qs, 1, rng, function () {\n\t                    rsa.p.subtract(BigInteger.ONE).gcda(ee, function (r) {\n\t                        if (r.compareTo(BigInteger.ONE) == 0 && rsa.p.isProbablePrime(10)) {\n\t                            setTimeout(loop3, 0);\n\t                        }\n\t                        else {\n\t                            setTimeout(loop2, 0);\n\t                        }\n\t                    });\n\t                });\n\t            };\n\t            setTimeout(loop2, 0);\n\t        };\n\t        setTimeout(loop1, 0);\n\t    };\n\t    RSAKey.prototype.sign = function (text, digestMethod, digestName) {\n\t        var header = getDigestHeader(digestName);\n\t        var digest = header + digestMethod(text).toString();\n\t        var m = pkcs1pad1(digest, this.n.bitLength() / 4);\n\t        if (m == null) {\n\t            return null;\n\t        }\n\t        var c = this.doPrivate(m);\n\t        if (c == null) {\n\t            return null;\n\t        }\n\t        var h = c.toString(16);\n\t        if ((h.length & 1) == 0) {\n\t            return h;\n\t        }\n\t        else {\n\t            return \"0\" + h;\n\t        }\n\t    };\n\t    RSAKey.prototype.verify = function (text, signature, digestMethod) {\n\t        var c = parseBigInt(signature, 16);\n\t        var m = this.doPublic(c);\n\t        if (m == null) {\n\t            return null;\n\t        }\n\t        var unpadded = m.toString(16).replace(/^1f+00/, \"\");\n\t        var digest = removeDigestHeader(unpadded);\n\t        return digest == digestMethod(text).toString();\n\t    };\n\t    return RSAKey;\n\t}());\n\t// Undo PKCS#1 (type 2, random) padding and, if valid, return the plaintext\n\tfunction pkcs1unpad2(d, n) {\n\t    var b = d.toByteArray();\n\t    var i = 0;\n\t    while (i < b.length && b[i] == 0) {\n\t        ++i;\n\t    }\n\t    if (b.length - i != n - 1 || b[i] != 2) {\n\t        return null;\n\t    }\n\t    ++i;\n\t    while (b[i] != 0) {\n\t        if (++i >= b.length) {\n\t            return null;\n\t        }\n\t    }\n\t    var ret = \"\";\n\t    while (++i < b.length) {\n\t        var c = b[i] & 255;\n\t        if (c < 128) { // utf-8 decode\n\t            ret += String.fromCharCode(c);\n\t        }\n\t        else if ((c > 191) && (c < 224)) {\n\t            ret += String.fromCharCode(((c & 31) << 6) | (b[i + 1] & 63));\n\t            ++i;\n\t        }\n\t        else {\n\t            ret += String.fromCharCode(((c & 15) << 12) | ((b[i + 1] & 63) << 6) | (b[i + 2] & 63));\n\t            i += 2;\n\t        }\n\t    }\n\t    return ret;\n\t}\n\t// https://tools.ietf.org/html/rfc3447#page-43\n\tvar DIGEST_HEADERS = {\n\t    md2: \"3020300c06082a864886f70d020205000410\",\n\t    md5: \"3020300c06082a864886f70d020505000410\",\n\t    sha1: \"3021300906052b0e03021a05000414\",\n\t    sha224: \"302d300d06096086480165030402040500041c\",\n\t    sha256: \"3031300d060960864801650304020105000420\",\n\t    sha384: \"3041300d060960864801650304020205000430\",\n\t    sha512: \"3051300d060960864801650304020305000440\",\n\t    ripemd160: \"3021300906052b2403020105000414\",\n\t};\n\tfunction getDigestHeader(name) {\n\t    return DIGEST_HEADERS[name] || \"\";\n\t}\n\tfunction removeDigestHeader(str) {\n\t    for (var name_1 in DIGEST_HEADERS) {\n\t        if (DIGEST_HEADERS.hasOwnProperty(name_1)) {\n\t            var header = DIGEST_HEADERS[name_1];\n\t            var len = header.length;\n\t            if (str.substr(0, len) == header) {\n\t                return str.substr(len);\n\t            }\n\t        }\n\t    }\n\t    return str;\n\t}\n\t// Return the PKCS#1 RSA encryption of \"text\" as a Base64-encoded string\n\t// function RSAEncryptB64(text) {\n\t//  var h = this.encrypt(text);\n\t//  if(h) return hex2b64(h); else return null;\n\t// }\n\t// public\n\t// RSAKey.prototype.encrypt_b64 = RSAEncryptB64;\n\t\n\t/*!\n\tCopyright (c) 2011, Yahoo! Inc. All rights reserved.\n\tCode licensed under the BSD License:\n\thttp://developer.yahoo.com/yui/license.html\n\tversion: 2.9.0\n\t*/\n\tvar YAHOO = {};\n\tYAHOO.lang = {\n\t    /**\n\t     * Utility to set up the prototype, constructor and superclass properties to\n\t     * support an inheritance strategy that can chain constructors and methods.\n\t     * Static members will not be inherited.\n\t     *\n\t     * @method extend\n\t     * @static\n\t     * @param {Function} subc   the object to modify\n\t     * @param {Function} superc the object to inherit\n\t     * @param {Object} overrides  additional properties/methods to add to the\n\t     *                              subclass prototype.  These will override the\n\t     *                              matching items obtained from the superclass\n\t     *                              if present.\n\t     */\n\t    extend: function(subc, superc, overrides) {\n\t        if (! superc || ! subc) {\n\t            throw new Error(\"YAHOO.lang.extend failed, please check that \" +\n\t                \"all dependencies are included.\");\n\t        }\n\t\n\t        var F = function() {};\n\t        F.prototype = superc.prototype;\n\t        subc.prototype = new F();\n\t        subc.prototype.constructor = subc;\n\t        subc.superclass = superc.prototype;\n\t\n\t        if (superc.prototype.constructor == Object.prototype.constructor) {\n\t            superc.prototype.constructor = superc;\n\t        }\n\t\n\t        if (overrides) {\n\t            var i;\n\t            for (i in overrides) {\n\t                subc.prototype[i] = overrides[i];\n\t            }\n\t\n\t            /*\n\t             * IE will not enumerate native functions in a derived object even if the\n\t             * function was overridden.  This is a workaround for specific functions\n\t             * we care about on the Object prototype.\n\t             * @property _IEEnumFix\n\t             * @param {Function} r  the object to receive the augmentation\n\t             * @param {Function} s  the object that supplies the properties to augment\n\t             * @static\n\t             * @private\n\t             */\n\t            var _IEEnumFix = function() {},\n\t                ADD = [\"toString\", \"valueOf\"];\n\t            try {\n\t                if (/MSIE/.test(navigator.userAgent)) {\n\t                    _IEEnumFix = function(r, s) {\n\t                        for (i = 0; i < ADD.length; i = i + 1) {\n\t                            var fname = ADD[i], f = s[fname];\n\t                            if (typeof f === 'function' && f != Object.prototype[fname]) {\n\t                                r[fname] = f;\n\t                            }\n\t                        }\n\t                    };\n\t                }\n\t            } catch (ex) {}            _IEEnumFix(subc.prototype, overrides);\n\t        }\n\t    }\n\t};\n\t\n\t/* asn1-1.0.13.js (c) 2013-2017 Kenji Urushima | kjur.github.com/jsrsasign/license\n\t */\n\t\n\t/**\n\t * @fileOverview\n\t * @name asn1-1.0.js\n\t * @author Kenji Urushima kenji.urushima@gmail.com\n\t * @version asn1 1.0.13 (2017-Jun-02)\n\t * @since jsrsasign 2.1\n\t * @license <a href=\"https://kjur.github.io/jsrsasign/license/\">MIT License</a>\n\t */\n\t\n\t/**\n\t * kjur's class library name space\n\t * <p>\n\t * This name space provides following name spaces:\n\t * <ul>\n\t * <li>{@link KJUR.asn1} - ASN.1 primitive hexadecimal encoder</li>\n\t * <li>{@link KJUR.asn1.x509} - ASN.1 structure for X.509 certificate and CRL</li>\n\t * <li>{@link KJUR.crypto} - Java Cryptographic Extension(JCE) style MessageDigest/Signature\n\t * class and utilities</li>\n\t * </ul>\n\t * </p>\n\t * NOTE: Please ignore method summary and document of this namespace. This caused by a bug of jsdoc2.\n\t * @name KJUR\n\t * @namespace kjur's class library name space\n\t */\n\tvar KJUR = {};\n\t\n\t/**\n\t * kjur's ASN.1 class library name space\n\t * <p>\n\t * This is ITU-T X.690 ASN.1 DER encoder class library and\n\t * class structure and methods is very similar to\n\t * org.bouncycastle.asn1 package of\n\t * well known BouncyCaslte Cryptography Library.\n\t * <h4>PROVIDING ASN.1 PRIMITIVES</h4>\n\t * Here are ASN.1 DER primitive classes.\n\t * <ul>\n\t * <li>0x01 {@link KJUR.asn1.DERBoolean}</li>\n\t * <li>0x02 {@link KJUR.asn1.DERInteger}</li>\n\t * <li>0x03 {@link KJUR.asn1.DERBitString}</li>\n\t * <li>0x04 {@link KJUR.asn1.DEROctetString}</li>\n\t * <li>0x05 {@link KJUR.asn1.DERNull}</li>\n\t * <li>0x06 {@link KJUR.asn1.DERObjectIdentifier}</li>\n\t * <li>0x0a {@link KJUR.asn1.DEREnumerated}</li>\n\t * <li>0x0c {@link KJUR.asn1.DERUTF8String}</li>\n\t * <li>0x12 {@link KJUR.asn1.DERNumericString}</li>\n\t * <li>0x13 {@link KJUR.asn1.DERPrintableString}</li>\n\t * <li>0x14 {@link KJUR.asn1.DERTeletexString}</li>\n\t * <li>0x16 {@link KJUR.asn1.DERIA5String}</li>\n\t * <li>0x17 {@link KJUR.asn1.DERUTCTime}</li>\n\t * <li>0x18 {@link KJUR.asn1.DERGeneralizedTime}</li>\n\t * <li>0x30 {@link KJUR.asn1.DERSequence}</li>\n\t * <li>0x31 {@link KJUR.asn1.DERSet}</li>\n\t * </ul>\n\t * <h4>OTHER ASN.1 CLASSES</h4>\n\t * <ul>\n\t * <li>{@link KJUR.asn1.ASN1Object}</li>\n\t * <li>{@link KJUR.asn1.DERAbstractString}</li>\n\t * <li>{@link KJUR.asn1.DERAbstractTime}</li>\n\t * <li>{@link KJUR.asn1.DERAbstractStructured}</li>\n\t * <li>{@link KJUR.asn1.DERTaggedObject}</li>\n\t * </ul>\n\t * <h4>SUB NAME SPACES</h4>\n\t * <ul>\n\t * <li>{@link KJUR.asn1.cades} - CAdES long term signature format</li>\n\t * <li>{@link KJUR.asn1.cms} - Cryptographic Message Syntax</li>\n\t * <li>{@link KJUR.asn1.csr} - Certificate Signing Request (CSR/PKCS#10)</li>\n\t * <li>{@link KJUR.asn1.tsp} - RFC 3161 Timestamping Protocol Format</li>\n\t * <li>{@link KJUR.asn1.x509} - RFC 5280 X.509 certificate and CRL</li>\n\t * </ul>\n\t * </p>\n\t * NOTE: Please ignore method summary and document of this namespace.\n\t * This caused by a bug of jsdoc2.\n\t * @name KJUR.asn1\n\t * @namespace\n\t */\n\tif (typeof KJUR.asn1 == \"undefined\" || !KJUR.asn1) KJUR.asn1 = {};\n\t\n\t/**\n\t * ASN1 utilities class\n\t * @name KJUR.asn1.ASN1Util\n\t * @class ASN1 utilities class\n\t * @since asn1 1.0.2\n\t */\n\tKJUR.asn1.ASN1Util = new function() {\n\t    this.integerToByteHex = function(i) {\n\t        var h = i.toString(16);\n\t        if ((h.length % 2) == 1) h = '0' + h;\n\t        return h;\n\t    };\n\t    this.bigIntToMinTwosComplementsHex = function(bigIntegerValue) {\n\t        var h = bigIntegerValue.toString(16);\n\t        if (h.substr(0, 1) != '-') {\n\t            if (h.length % 2 == 1) {\n\t                h = '0' + h;\n\t            } else {\n\t                if (! h.match(/^[0-7]/)) {\n\t                    h = '00' + h;\n\t                }\n\t            }\n\t        } else {\n\t            var hPos = h.substr(1);\n\t            var xorLen = hPos.length;\n\t            if (xorLen % 2 == 1) {\n\t                xorLen += 1;\n\t            } else {\n\t                if (! h.match(/^[0-7]/)) {\n\t                    xorLen += 2;\n\t                }\n\t            }\n\t            var hMask = '';\n\t            for (var i = 0; i < xorLen; i++) {\n\t                hMask += 'f';\n\t            }\n\t            var biMask = new BigInteger(hMask, 16);\n\t            var biNeg = biMask.xor(bigIntegerValue).add(BigInteger.ONE);\n\t            h = biNeg.toString(16).replace(/^-/, '');\n\t        }\n\t        return h;\n\t    };\n\t    /**\n\t     * get PEM string from hexadecimal data and header string\n\t     * @name getPEMStringFromHex\n\t     * @memberOf KJUR.asn1.ASN1Util\n\t     * @function\n\t     * @param {String} dataHex hexadecimal string of PEM body\n\t     * @param {String} pemHeader PEM header string (ex. 'RSA PRIVATE KEY')\n\t     * @return {String} PEM formatted string of input data\n\t     * @description\n\t     * This method converts a hexadecimal string to a PEM string with\n\t     * a specified header. Its line break will be CRLF(\"\\r\\n\").\n\t     * @example\n\t     * var pem  = KJUR.asn1.ASN1Util.getPEMStringFromHex('616161', 'RSA PRIVATE KEY');\n\t     * // value of pem will be:\n\t     * -----BEGIN PRIVATE KEY-----\n\t     * YWFh\n\t     * -----END PRIVATE KEY-----\n\t     */\n\t    this.getPEMStringFromHex = function(dataHex, pemHeader) {\n\t        return hextopem(dataHex, pemHeader);\n\t    };\n\t\n\t    /**\n\t     * generate ASN1Object specifed by JSON parameters\n\t     * @name newObject\n\t     * @memberOf KJUR.asn1.ASN1Util\n\t     * @function\n\t     * @param {Array} param JSON parameter to generate ASN1Object\n\t     * @return {KJUR.asn1.ASN1Object} generated object\n\t     * @since asn1 1.0.3\n\t     * @description\n\t     * generate any ASN1Object specified by JSON param\n\t     * including ASN.1 primitive or structured.\n\t     * Generally 'param' can be described as follows:\n\t     * <blockquote>\n\t     * {TYPE-OF-ASNOBJ: ASN1OBJ-PARAMETER}\n\t     * </blockquote>\n\t     * 'TYPE-OF-ASN1OBJ' can be one of following symbols:\n\t     * <ul>\n\t     * <li>'bool' - DERBoolean</li>\n\t     * <li>'int' - DERInteger</li>\n\t     * <li>'bitstr' - DERBitString</li>\n\t     * <li>'octstr' - DEROctetString</li>\n\t     * <li>'null' - DERNull</li>\n\t     * <li>'oid' - DERObjectIdentifier</li>\n\t     * <li>'enum' - DEREnumerated</li>\n\t     * <li>'utf8str' - DERUTF8String</li>\n\t     * <li>'numstr' - DERNumericString</li>\n\t     * <li>'prnstr' - DERPrintableString</li>\n\t     * <li>'telstr' - DERTeletexString</li>\n\t     * <li>'ia5str' - DERIA5String</li>\n\t     * <li>'utctime' - DERUTCTime</li>\n\t     * <li>'gentime' - DERGeneralizedTime</li>\n\t     * <li>'seq' - DERSequence</li>\n\t     * <li>'set' - DERSet</li>\n\t     * <li>'tag' - DERTaggedObject</li>\n\t     * </ul>\n\t     * @example\n\t     * newObject({'prnstr': 'aaa'});\n\t     * newObject({'seq': [{'int': 3}, {'prnstr': 'aaa'}]})\n\t     * // ASN.1 Tagged Object\n\t     * newObject({'tag': {'tag': 'a1',\n\t     *                    'explicit': true,\n\t     *                    'obj': {'seq': [{'int': 3}, {'prnstr': 'aaa'}]}}});\n\t     * // more simple representation of ASN.1 Tagged Object\n\t     * newObject({'tag': ['a1',\n\t     *                    true,\n\t     *                    {'seq': [\n\t     *                      {'int': 3},\n\t     *                      {'prnstr': 'aaa'}]}\n\t     *                   ]});\n\t     */\n\t    this.newObject = function(param) {\n\t        var _KJUR = KJUR,\n\t            _KJUR_asn1 = _KJUR.asn1,\n\t            _DERBoolean = _KJUR_asn1.DERBoolean,\n\t            _DERInteger = _KJUR_asn1.DERInteger,\n\t            _DERBitString = _KJUR_asn1.DERBitString,\n\t            _DEROctetString = _KJUR_asn1.DEROctetString,\n\t            _DERNull = _KJUR_asn1.DERNull,\n\t            _DERObjectIdentifier = _KJUR_asn1.DERObjectIdentifier,\n\t            _DEREnumerated = _KJUR_asn1.DEREnumerated,\n\t            _DERUTF8String = _KJUR_asn1.DERUTF8String,\n\t            _DERNumericString = _KJUR_asn1.DERNumericString,\n\t            _DERPrintableString = _KJUR_asn1.DERPrintableString,\n\t            _DERTeletexString = _KJUR_asn1.DERTeletexString,\n\t            _DERIA5String = _KJUR_asn1.DERIA5String,\n\t            _DERUTCTime = _KJUR_asn1.DERUTCTime,\n\t            _DERGeneralizedTime = _KJUR_asn1.DERGeneralizedTime,\n\t            _DERSequence = _KJUR_asn1.DERSequence,\n\t            _DERSet = _KJUR_asn1.DERSet,\n\t            _DERTaggedObject = _KJUR_asn1.DERTaggedObject,\n\t            _newObject = _KJUR_asn1.ASN1Util.newObject;\n\t\n\t        var keys = Object.keys(param);\n\t        if (keys.length != 1)\n\t            throw \"key of param shall be only one.\";\n\t        var key = keys[0];\n\t\n\t        if (\":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:\".indexOf(\":\" + key + \":\") == -1)\n\t            throw \"undefined key: \" + key;\n\t\n\t        if (key == \"bool\")    return new _DERBoolean(param[key]);\n\t        if (key == \"int\")     return new _DERInteger(param[key]);\n\t        if (key == \"bitstr\")  return new _DERBitString(param[key]);\n\t        if (key == \"octstr\")  return new _DEROctetString(param[key]);\n\t        if (key == \"null\")    return new _DERNull(param[key]);\n\t        if (key == \"oid\")     return new _DERObjectIdentifier(param[key]);\n\t        if (key == \"enum\")    return new _DEREnumerated(param[key]);\n\t        if (key == \"utf8str\") return new _DERUTF8String(param[key]);\n\t        if (key == \"numstr\")  return new _DERNumericString(param[key]);\n\t        if (key == \"prnstr\")  return new _DERPrintableString(param[key]);\n\t        if (key == \"telstr\")  return new _DERTeletexString(param[key]);\n\t        if (key == \"ia5str\")  return new _DERIA5String(param[key]);\n\t        if (key == \"utctime\") return new _DERUTCTime(param[key]);\n\t        if (key == \"gentime\") return new _DERGeneralizedTime(param[key]);\n\t\n\t        if (key == \"seq\") {\n\t            var paramList = param[key];\n\t            var a = [];\n\t            for (var i = 0; i < paramList.length; i++) {\n\t                var asn1Obj = _newObject(paramList[i]);\n\t                a.push(asn1Obj);\n\t            }\n\t            return new _DERSequence({'array': a});\n\t        }\n\t\n\t        if (key == \"set\") {\n\t            var paramList = param[key];\n\t            var a = [];\n\t            for (var i = 0; i < paramList.length; i++) {\n\t                var asn1Obj = _newObject(paramList[i]);\n\t                a.push(asn1Obj);\n\t            }\n\t            return new _DERSet({'array': a});\n\t        }\n\t\n\t        if (key == \"tag\") {\n\t            var tagParam = param[key];\n\t            if (Object.prototype.toString.call(tagParam) === '[object Array]' &&\n\t                tagParam.length == 3) {\n\t                var obj = _newObject(tagParam[2]);\n\t                return new _DERTaggedObject({tag: tagParam[0],\n\t                    explicit: tagParam[1],\n\t                    obj: obj});\n\t            } else {\n\t                var newParam = {};\n\t                if (tagParam.explicit !== undefined)\n\t                    newParam.explicit = tagParam.explicit;\n\t                if (tagParam.tag !== undefined)\n\t                    newParam.tag = tagParam.tag;\n\t                if (tagParam.obj === undefined)\n\t                    throw \"obj shall be specified for 'tag'.\";\n\t                newParam.obj = _newObject(tagParam.obj);\n\t                return new _DERTaggedObject(newParam);\n\t            }\n\t        }\n\t    };\n\t\n\t    /**\n\t     * get encoded hexadecimal string of ASN1Object specifed by JSON parameters\n\t     * @name jsonToASN1HEX\n\t     * @memberOf KJUR.asn1.ASN1Util\n\t     * @function\n\t     * @param {Array} param JSON parameter to generate ASN1Object\n\t     * @return hexadecimal string of ASN1Object\n\t     * @since asn1 1.0.4\n\t     * @description\n\t     * As for ASN.1 object representation of JSON object,\n\t     * please see {@link newObject}.\n\t     * @example\n\t     * jsonToASN1HEX({'prnstr': 'aaa'});\n\t     */\n\t    this.jsonToASN1HEX = function(param) {\n\t        var asn1Obj = this.newObject(param);\n\t        return asn1Obj.getEncodedHex();\n\t    };\n\t};\n\t\n\t/**\n\t * get dot noted oid number string from hexadecimal value of OID\n\t * @name oidHexToInt\n\t * @memberOf KJUR.asn1.ASN1Util\n\t * @function\n\t * @param {String} hex hexadecimal value of object identifier\n\t * @return {String} dot noted string of object identifier\n\t * @since jsrsasign 4.8.3 asn1 1.0.7\n\t * @description\n\t * This static method converts from hexadecimal string representation of\n\t * ASN.1 value of object identifier to oid number string.\n\t * @example\n\t * KJUR.asn1.ASN1Util.oidHexToInt('550406') &rarr; \"2.5.4.6\"\n\t */\n\tKJUR.asn1.ASN1Util.oidHexToInt = function(hex) {\n\t    var s = \"\";\n\t    var i01 = parseInt(hex.substr(0, 2), 16);\n\t    var i0 = Math.floor(i01 / 40);\n\t    var i1 = i01 % 40;\n\t    var s = i0 + \".\" + i1;\n\t\n\t    var binbuf = \"\";\n\t    for (var i = 2; i < hex.length; i += 2) {\n\t        var value = parseInt(hex.substr(i, 2), 16);\n\t        var bin = (\"00000000\" + value.toString(2)).slice(- 8);\n\t        binbuf = binbuf + bin.substr(1, 7);\n\t        if (bin.substr(0, 1) == \"0\") {\n\t            var bi = new BigInteger(binbuf, 2);\n\t            s = s + \".\" + bi.toString(10);\n\t            binbuf = \"\";\n\t        }\n\t    }\n\t    return s;\n\t};\n\t\n\t/**\n\t * get hexadecimal value of object identifier from dot noted oid value\n\t * @name oidIntToHex\n\t * @memberOf KJUR.asn1.ASN1Util\n\t * @function\n\t * @param {String} oidString dot noted string of object identifier\n\t * @return {String} hexadecimal value of object identifier\n\t * @since jsrsasign 4.8.3 asn1 1.0.7\n\t * @description\n\t * This static method converts from object identifier value string.\n\t * to hexadecimal string representation of it.\n\t * @example\n\t * KJUR.asn1.ASN1Util.oidIntToHex(\"2.5.4.6\") &rarr; \"550406\"\n\t */\n\tKJUR.asn1.ASN1Util.oidIntToHex = function(oidString) {\n\t    var itox = function(i) {\n\t        var h = i.toString(16);\n\t        if (h.length == 1) h = '0' + h;\n\t        return h;\n\t    };\n\t\n\t    var roidtox = function(roid) {\n\t        var h = '';\n\t        var bi = new BigInteger(roid, 10);\n\t        var b = bi.toString(2);\n\t        var padLen = 7 - b.length % 7;\n\t        if (padLen == 7) padLen = 0;\n\t        var bPad = '';\n\t        for (var i = 0; i < padLen; i++) bPad += '0';\n\t        b = bPad + b;\n\t        for (var i = 0; i < b.length - 1; i += 7) {\n\t            var b8 = b.substr(i, 7);\n\t            if (i != b.length - 7) b8 = '1' + b8;\n\t            h += itox(parseInt(b8, 2));\n\t        }\n\t        return h;\n\t    };\n\t\n\t    if (! oidString.match(/^[0-9.]+$/)) {\n\t        throw \"malformed oid string: \" + oidString;\n\t    }\n\t    var h = '';\n\t    var a = oidString.split('.');\n\t    var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\n\t    h += itox(i0);\n\t    a.splice(0, 2);\n\t    for (var i = 0; i < a.length; i++) {\n\t        h += roidtox(a[i]);\n\t    }\n\t    return h;\n\t};\n\t\n\t\n\t// ********************************************************************\n\t//  Abstract ASN.1 Classes\n\t// ********************************************************************\n\t\n\t// ********************************************************************\n\t\n\t/**\n\t * base class for ASN.1 DER encoder object\n\t * @name KJUR.asn1.ASN1Object\n\t * @class base class for ASN.1 DER encoder object\n\t * @property {Boolean} isModified flag whether internal data was changed\n\t * @property {String} hTLV hexadecimal string of ASN.1 TLV\n\t * @property {String} hT hexadecimal string of ASN.1 TLV tag(T)\n\t * @property {String} hL hexadecimal string of ASN.1 TLV length(L)\n\t * @property {String} hV hexadecimal string of ASN.1 TLV value(V)\n\t * @description\n\t */\n\tKJUR.asn1.ASN1Object = function() {\n\t    var hV = '';\n\t\n\t    /**\n\t     * get hexadecimal ASN.1 TLV length(L) bytes from TLV value(V)\n\t     * @name getLengthHexFromValue\n\t     * @memberOf KJUR.asn1.ASN1Object#\n\t     * @function\n\t     * @return {String} hexadecimal string of ASN.1 TLV length(L)\n\t     */\n\t    this.getLengthHexFromValue = function() {\n\t        if (typeof this.hV == \"undefined\" || this.hV == null) {\n\t            throw \"this.hV is null or undefined.\";\n\t        }\n\t        if (this.hV.length % 2 == 1) {\n\t            throw \"value hex must be even length: n=\" + hV.length + \",v=\" + this.hV;\n\t        }\n\t        var n = this.hV.length / 2;\n\t        var hN = n.toString(16);\n\t        if (hN.length % 2 == 1) {\n\t            hN = \"0\" + hN;\n\t        }\n\t        if (n < 128) {\n\t            return hN;\n\t        } else {\n\t            var hNlen = hN.length / 2;\n\t            if (hNlen > 15) {\n\t                throw \"ASN.1 length too long to represent by 8x: n = \" + n.toString(16);\n\t            }\n\t            var head = 128 + hNlen;\n\t            return head.toString(16) + hN;\n\t        }\n\t    };\n\t\n\t    /**\n\t     * get hexadecimal string of ASN.1 TLV bytes\n\t     * @name getEncodedHex\n\t     * @memberOf KJUR.asn1.ASN1Object#\n\t     * @function\n\t     * @return {String} hexadecimal string of ASN.1 TLV\n\t     */\n\t    this.getEncodedHex = function() {\n\t        if (this.hTLV == null || this.isModified) {\n\t            this.hV = this.getFreshValueHex();\n\t            this.hL = this.getLengthHexFromValue();\n\t            this.hTLV = this.hT + this.hL + this.hV;\n\t            this.isModified = false;\n\t            //alert(\"first time: \" + this.hTLV);\n\t        }\n\t        return this.hTLV;\n\t    };\n\t\n\t    /**\n\t     * get hexadecimal string of ASN.1 TLV value(V) bytes\n\t     * @name getValueHex\n\t     * @memberOf KJUR.asn1.ASN1Object#\n\t     * @function\n\t     * @return {String} hexadecimal string of ASN.1 TLV value(V) bytes\n\t     */\n\t    this.getValueHex = function() {\n\t        this.getEncodedHex();\n\t        return this.hV;\n\t    };\n\t\n\t    this.getFreshValueHex = function() {\n\t        return '';\n\t    };\n\t};\n\t\n\t// == BEGIN DERAbstractString ================================================\n\t/**\n\t * base class for ASN.1 DER string classes\n\t * @name KJUR.asn1.DERAbstractString\n\t * @class base class for ASN.1 DER string classes\n\t * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n\t * @property {String} s internal string of value\n\t * @extends KJUR.asn1.ASN1Object\n\t * @description\n\t * <br/>\n\t * As for argument 'params' for constructor, you can specify one of\n\t * following properties:\n\t * <ul>\n\t * <li>str - specify initial ASN.1 value(V) by a string</li>\n\t * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n\t * </ul>\n\t * NOTE: 'params' can be omitted.\n\t */\n\tKJUR.asn1.DERAbstractString = function(params) {\n\t    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\n\t\n\t    /**\n\t     * get string value of this string object\n\t     * @name getString\n\t     * @memberOf KJUR.asn1.DERAbstractString#\n\t     * @function\n\t     * @return {String} string value of this string object\n\t     */\n\t    this.getString = function() {\n\t        return this.s;\n\t    };\n\t\n\t    /**\n\t     * set value by a string\n\t     * @name setString\n\t     * @memberOf KJUR.asn1.DERAbstractString#\n\t     * @function\n\t     * @param {String} newS value by a string to set\n\t     */\n\t    this.setString = function(newS) {\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.s = newS;\n\t        this.hV = stohex(this.s);\n\t    };\n\t\n\t    /**\n\t     * set value by a hexadecimal string\n\t     * @name setStringHex\n\t     * @memberOf KJUR.asn1.DERAbstractString#\n\t     * @function\n\t     * @param {String} newHexString value by a hexadecimal string to set\n\t     */\n\t    this.setStringHex = function(newHexString) {\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.s = null;\n\t        this.hV = newHexString;\n\t    };\n\t\n\t    this.getFreshValueHex = function() {\n\t        return this.hV;\n\t    };\n\t\n\t    if (typeof params != \"undefined\") {\n\t        if (typeof params == \"string\") {\n\t            this.setString(params);\n\t        } else if (typeof params['str'] != \"undefined\") {\n\t            this.setString(params['str']);\n\t        } else if (typeof params['hex'] != \"undefined\") {\n\t            this.setStringHex(params['hex']);\n\t        }\n\t    }\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERAbstractString, KJUR.asn1.ASN1Object);\n\t// == END   DERAbstractString ================================================\n\t\n\t// == BEGIN DERAbstractTime ==================================================\n\t/**\n\t * base class for ASN.1 DER Generalized/UTCTime class\n\t * @name KJUR.asn1.DERAbstractTime\n\t * @class base class for ASN.1 DER Generalized/UTCTime class\n\t * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\n\t * @extends KJUR.asn1.ASN1Object\n\t * @description\n\t * @see KJUR.asn1.ASN1Object - superclass\n\t */\n\tKJUR.asn1.DERAbstractTime = function(params) {\n\t    KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);\n\t\n\t    // --- PRIVATE METHODS --------------------\n\t    this.localDateToUTC = function(d) {\n\t        utc = d.getTime() + (d.getTimezoneOffset() * 60000);\n\t        var utcDate = new Date(utc);\n\t        return utcDate;\n\t    };\n\t\n\t    /*\n\t     * format date string by Data object\n\t     * @name formatDate\n\t     * @memberOf KJUR.asn1.AbstractTime;\n\t     * @param {Date} dateObject\n\t     * @param {string} type 'utc' or 'gen'\n\t     * @param {boolean} withMillis flag for with millisections or not\n\t     * @description\n\t     * 'withMillis' flag is supported from asn1 1.0.6.\n\t     */\n\t    this.formatDate = function(dateObject, type, withMillis) {\n\t        var pad = this.zeroPadding;\n\t        var d = this.localDateToUTC(dateObject);\n\t        var year = String(d.getFullYear());\n\t        if (type == 'utc') year = year.substr(2, 2);\n\t        var month = pad(String(d.getMonth() + 1), 2);\n\t        var day = pad(String(d.getDate()), 2);\n\t        var hour = pad(String(d.getHours()), 2);\n\t        var min = pad(String(d.getMinutes()), 2);\n\t        var sec = pad(String(d.getSeconds()), 2);\n\t        var s = year + month + day + hour + min + sec;\n\t        if (withMillis === true) {\n\t            var millis = d.getMilliseconds();\n\t            if (millis != 0) {\n\t                var sMillis = pad(String(millis), 3);\n\t                sMillis = sMillis.replace(/[0]+$/, \"\");\n\t                s = s + \".\" + sMillis;\n\t            }\n\t        }\n\t        return s + \"Z\";\n\t    };\n\t\n\t    this.zeroPadding = function(s, len) {\n\t        if (s.length >= len) return s;\n\t        return new Array(len - s.length + 1).join('0') + s;\n\t    };\n\t\n\t    // --- PUBLIC METHODS --------------------\n\t    /**\n\t     * get string value of this string object\n\t     * @name getString\n\t     * @memberOf KJUR.asn1.DERAbstractTime#\n\t     * @function\n\t     * @return {String} string value of this time object\n\t     */\n\t    this.getString = function() {\n\t        return this.s;\n\t    };\n\t\n\t    /**\n\t     * set value by a string\n\t     * @name setString\n\t     * @memberOf KJUR.asn1.DERAbstractTime#\n\t     * @function\n\t     * @param {String} newS value by a string to set such like \"130430235959Z\"\n\t     */\n\t    this.setString = function(newS) {\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.s = newS;\n\t        this.hV = stohex(newS);\n\t    };\n\t\n\t    /**\n\t     * set value by a Date object\n\t     * @name setByDateValue\n\t     * @memberOf KJUR.asn1.DERAbstractTime#\n\t     * @function\n\t     * @param {Integer} year year of date (ex. 2013)\n\t     * @param {Integer} month month of date between 1 and 12 (ex. 12)\n\t     * @param {Integer} day day of month\n\t     * @param {Integer} hour hours of date\n\t     * @param {Integer} min minutes of date\n\t     * @param {Integer} sec seconds of date\n\t     */\n\t    this.setByDateValue = function(year, month, day, hour, min, sec) {\n\t        var dateObject = new Date(Date.UTC(year, month - 1, day, hour, min, sec, 0));\n\t        this.setByDate(dateObject);\n\t    };\n\t\n\t    this.getFreshValueHex = function() {\n\t        return this.hV;\n\t    };\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERAbstractTime, KJUR.asn1.ASN1Object);\n\t// == END   DERAbstractTime ==================================================\n\t\n\t// == BEGIN DERAbstractStructured ============================================\n\t/**\n\t * base class for ASN.1 DER structured class\n\t * @name KJUR.asn1.DERAbstractStructured\n\t * @class base class for ASN.1 DER structured class\n\t * @property {Array} asn1Array internal array of ASN1Object\n\t * @extends KJUR.asn1.ASN1Object\n\t * @description\n\t * @see KJUR.asn1.ASN1Object - superclass\n\t */\n\tKJUR.asn1.DERAbstractStructured = function(params) {\n\t    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\n\t\n\t    /**\n\t     * set value by array of ASN1Object\n\t     * @name setByASN1ObjectArray\n\t     * @memberOf KJUR.asn1.DERAbstractStructured#\n\t     * @function\n\t     * @param {array} asn1ObjectArray array of ASN1Object to set\n\t     */\n\t    this.setByASN1ObjectArray = function(asn1ObjectArray) {\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.asn1Array = asn1ObjectArray;\n\t    };\n\t\n\t    /**\n\t     * append an ASN1Object to internal array\n\t     * @name appendASN1Object\n\t     * @memberOf KJUR.asn1.DERAbstractStructured#\n\t     * @function\n\t     * @param {ASN1Object} asn1Object to add\n\t     */\n\t    this.appendASN1Object = function(asn1Object) {\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.asn1Array.push(asn1Object);\n\t    };\n\t\n\t    this.asn1Array = new Array();\n\t    if (typeof params != \"undefined\") {\n\t        if (typeof params['array'] != \"undefined\") {\n\t            this.asn1Array = params['array'];\n\t        }\n\t    }\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERAbstractStructured, KJUR.asn1.ASN1Object);\n\t\n\t\n\t// ********************************************************************\n\t//  ASN.1 Object Classes\n\t// ********************************************************************\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER Boolean\n\t * @name KJUR.asn1.DERBoolean\n\t * @class class for ASN.1 DER Boolean\n\t * @extends KJUR.asn1.ASN1Object\n\t * @description\n\t * @see KJUR.asn1.ASN1Object - superclass\n\t */\n\tKJUR.asn1.DERBoolean = function() {\n\t    KJUR.asn1.DERBoolean.superclass.constructor.call(this);\n\t    this.hT = \"01\";\n\t    this.hTLV = \"0101ff\";\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERBoolean, KJUR.asn1.ASN1Object);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER Integer\n\t * @name KJUR.asn1.DERInteger\n\t * @class class for ASN.1 DER Integer\n\t * @extends KJUR.asn1.ASN1Object\n\t * @description\n\t * <br/>\n\t * As for argument 'params' for constructor, you can specify one of\n\t * following properties:\n\t * <ul>\n\t * <li>int - specify initial ASN.1 value(V) by integer value</li>\n\t * <li>bigint - specify initial ASN.1 value(V) by BigInteger object</li>\n\t * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n\t * </ul>\n\t * NOTE: 'params' can be omitted.\n\t */\n\tKJUR.asn1.DERInteger = function(params) {\n\t    KJUR.asn1.DERInteger.superclass.constructor.call(this);\n\t    this.hT = \"02\";\n\t\n\t    /**\n\t     * set value by Tom Wu's BigInteger object\n\t     * @name setByBigInteger\n\t     * @memberOf KJUR.asn1.DERInteger#\n\t     * @function\n\t     * @param {BigInteger} bigIntegerValue to set\n\t     */\n\t    this.setByBigInteger = function(bigIntegerValue) {\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\n\t    };\n\t\n\t    /**\n\t     * set value by integer value\n\t     * @name setByInteger\n\t     * @memberOf KJUR.asn1.DERInteger\n\t     * @function\n\t     * @param {Integer} integer value to set\n\t     */\n\t    this.setByInteger = function(intValue) {\n\t        var bi = new BigInteger(String(intValue), 10);\n\t        this.setByBigInteger(bi);\n\t    };\n\t\n\t    /**\n\t     * set value by integer value\n\t     * @name setValueHex\n\t     * @memberOf KJUR.asn1.DERInteger#\n\t     * @function\n\t     * @param {String} hexadecimal string of integer value\n\t     * @description\n\t     * <br/>\n\t     * NOTE: Value shall be represented by minimum octet length of\n\t     * two's complement representation.\n\t     * @example\n\t     * new KJUR.asn1.DERInteger(123);\n\t     * new KJUR.asn1.DERInteger({'int': 123});\n\t     * new KJUR.asn1.DERInteger({'hex': '1fad'});\n\t     */\n\t    this.setValueHex = function(newHexString) {\n\t        this.hV = newHexString;\n\t    };\n\t\n\t    this.getFreshValueHex = function() {\n\t        return this.hV;\n\t    };\n\t\n\t    if (typeof params != \"undefined\") {\n\t        if (typeof params['bigint'] != \"undefined\") {\n\t            this.setByBigInteger(params['bigint']);\n\t        } else if (typeof params['int'] != \"undefined\") {\n\t            this.setByInteger(params['int']);\n\t        } else if (typeof params == \"number\") {\n\t            this.setByInteger(params);\n\t        } else if (typeof params['hex'] != \"undefined\") {\n\t            this.setValueHex(params['hex']);\n\t        }\n\t    }\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERInteger, KJUR.asn1.ASN1Object);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER encoded BitString primitive\n\t * @name KJUR.asn1.DERBitString\n\t * @class class for ASN.1 DER encoded BitString primitive\n\t * @extends KJUR.asn1.ASN1Object\n\t * @description\n\t * <br/>\n\t * As for argument 'params' for constructor, you can specify one of\n\t * following properties:\n\t * <ul>\n\t * <li>bin - specify binary string (ex. '10111')</li>\n\t * <li>array - specify array of boolean (ex. [true,false,true,true])</li>\n\t * <li>hex - specify hexadecimal string of ASN.1 value(V) including unused bits</li>\n\t * <li>obj - specify {@link KJUR.asn1.ASN1Util.newObject}\n\t * argument for \"BitString encapsulates\" structure.</li>\n\t * </ul>\n\t * NOTE1: 'params' can be omitted.<br/>\n\t * NOTE2: 'obj' parameter have been supported since\n\t * asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).<br/>\n\t * @example\n\t * // default constructor\n\t * o = new KJUR.asn1.DERBitString();\n\t * // initialize with binary string\n\t * o = new KJUR.asn1.DERBitString({bin: \"1011\"});\n\t * // initialize with boolean array\n\t * o = new KJUR.asn1.DERBitString({array: [true,false,true,true]});\n\t * // initialize with hexadecimal string (04 is unused bits)\n\t * o = new KJUR.asn1.DEROctetString({hex: \"04bac0\"});\n\t * // initialize with ASN1Util.newObject argument for encapsulated\n\t * o = new KJUR.asn1.DERBitString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});\n\t * // above generates a ASN.1 data like this:\n\t * // BIT STRING, encapsulates {\n\t * //   SEQUENCE {\n\t * //     INTEGER 3\n\t * //     PrintableString 'aaa'\n\t * //     }\n\t * //   }\n\t */\n\tKJUR.asn1.DERBitString = function(params) {\n\t    if (params !== undefined && typeof params.obj !== \"undefined\") {\n\t        var o = KJUR.asn1.ASN1Util.newObject(params.obj);\n\t        params.hex = \"00\" + o.getEncodedHex();\n\t    }\n\t    KJUR.asn1.DERBitString.superclass.constructor.call(this);\n\t    this.hT = \"03\";\n\t\n\t    /**\n\t     * set ASN.1 value(V) by a hexadecimal string including unused bits\n\t     * @name setHexValueIncludingUnusedBits\n\t     * @memberOf KJUR.asn1.DERBitString#\n\t     * @function\n\t     * @param {String} newHexStringIncludingUnusedBits\n\t     */\n\t    this.setHexValueIncludingUnusedBits = function(newHexStringIncludingUnusedBits) {\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.hV = newHexStringIncludingUnusedBits;\n\t    };\n\t\n\t    /**\n\t     * set ASN.1 value(V) by unused bit and hexadecimal string of value\n\t     * @name setUnusedBitsAndHexValue\n\t     * @memberOf KJUR.asn1.DERBitString#\n\t     * @function\n\t     * @param {Integer} unusedBits\n\t     * @param {String} hValue\n\t     */\n\t    this.setUnusedBitsAndHexValue = function(unusedBits, hValue) {\n\t        if (unusedBits < 0 || 7 < unusedBits) {\n\t            throw \"unused bits shall be from 0 to 7: u = \" + unusedBits;\n\t        }\n\t        var hUnusedBits = \"0\" + unusedBits;\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.hV = hUnusedBits + hValue;\n\t    };\n\t\n\t    /**\n\t     * set ASN.1 DER BitString by binary string<br/>\n\t     * @name setByBinaryString\n\t     * @memberOf KJUR.asn1.DERBitString#\n\t     * @function\n\t     * @param {String} binaryString binary value string (i.e. '10111')\n\t     * @description\n\t     * Its unused bits will be calculated automatically by length of\n\t     * 'binaryValue'. <br/>\n\t     * NOTE: Trailing zeros '0' will be ignored.\n\t     * @example\n\t     * o = new KJUR.asn1.DERBitString();\n\t     * o.setByBooleanArray(\"01011\");\n\t     */\n\t    this.setByBinaryString = function(binaryString) {\n\t        binaryString = binaryString.replace(/0+$/, '');\n\t        var unusedBits = 8 - binaryString.length % 8;\n\t        if (unusedBits == 8) unusedBits = 0;\n\t        for (var i = 0; i <= unusedBits; i++) {\n\t            binaryString += '0';\n\t        }\n\t        var h = '';\n\t        for (var i = 0; i < binaryString.length - 1; i += 8) {\n\t            var b = binaryString.substr(i, 8);\n\t            var x = parseInt(b, 2).toString(16);\n\t            if (x.length == 1) x = '0' + x;\n\t            h += x;\n\t        }\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.hV = '0' + unusedBits + h;\n\t    };\n\t\n\t    /**\n\t     * set ASN.1 TLV value(V) by an array of boolean<br/>\n\t     * @name setByBooleanArray\n\t     * @memberOf KJUR.asn1.DERBitString#\n\t     * @function\n\t     * @param {array} booleanArray array of boolean (ex. [true, false, true])\n\t     * @description\n\t     * NOTE: Trailing falses will be ignored in the ASN.1 DER Object.\n\t     * @example\n\t     * o = new KJUR.asn1.DERBitString();\n\t     * o.setByBooleanArray([false, true, false, true, true]);\n\t     */\n\t    this.setByBooleanArray = function(booleanArray) {\n\t        var s = '';\n\t        for (var i = 0; i < booleanArray.length; i++) {\n\t            if (booleanArray[i] == true) {\n\t                s += '1';\n\t            } else {\n\t                s += '0';\n\t            }\n\t        }\n\t        this.setByBinaryString(s);\n\t    };\n\t\n\t    /**\n\t     * generate an array of falses with specified length<br/>\n\t     * @name newFalseArray\n\t     * @memberOf KJUR.asn1.DERBitString\n\t     * @function\n\t     * @param {Integer} nLength length of array to generate\n\t     * @return {array} array of boolean falses\n\t     * @description\n\t     * This static method may be useful to initialize boolean array.\n\t     * @example\n\t     * o = new KJUR.asn1.DERBitString();\n\t     * o.newFalseArray(3) &rarr; [false, false, false]\n\t     */\n\t    this.newFalseArray = function(nLength) {\n\t        var a = new Array(nLength);\n\t        for (var i = 0; i < nLength; i++) {\n\t            a[i] = false;\n\t        }\n\t        return a;\n\t    };\n\t\n\t    this.getFreshValueHex = function() {\n\t        return this.hV;\n\t    };\n\t\n\t    if (typeof params != \"undefined\") {\n\t        if (typeof params == \"string\" && params.toLowerCase().match(/^[0-9a-f]+$/)) {\n\t            this.setHexValueIncludingUnusedBits(params);\n\t        } else if (typeof params['hex'] != \"undefined\") {\n\t            this.setHexValueIncludingUnusedBits(params['hex']);\n\t        } else if (typeof params['bin'] != \"undefined\") {\n\t            this.setByBinaryString(params['bin']);\n\t        } else if (typeof params['array'] != \"undefined\") {\n\t            this.setByBooleanArray(params['array']);\n\t        }\n\t    }\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERBitString, KJUR.asn1.ASN1Object);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER OctetString<br/>\n\t * @name KJUR.asn1.DEROctetString\n\t * @class class for ASN.1 DER OctetString\n\t * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n\t * @extends KJUR.asn1.DERAbstractString\n\t * @description\n\t * This class provides ASN.1 OctetString simple type.<br/>\n\t * Supported \"params\" attributes are:\n\t * <ul>\n\t * <li>str - to set a string as a value</li>\n\t * <li>hex - to set a hexadecimal string as a value</li>\n\t * <li>obj - to set a encapsulated ASN.1 value by JSON object\n\t * which is defined in {@link KJUR.asn1.ASN1Util.newObject}</li>\n\t * </ul>\n\t * NOTE: A parameter 'obj' have been supported\n\t * for \"OCTET STRING, encapsulates\" structure.\n\t * since asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).\n\t * @see KJUR.asn1.DERAbstractString - superclass\n\t * @example\n\t * // default constructor\n\t * o = new KJUR.asn1.DEROctetString();\n\t * // initialize with string\n\t * o = new KJUR.asn1.DEROctetString({str: \"aaa\"});\n\t * // initialize with hexadecimal string\n\t * o = new KJUR.asn1.DEROctetString({hex: \"616161\"});\n\t * // initialize with ASN1Util.newObject argument\n\t * o = new KJUR.asn1.DEROctetString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});\n\t * // above generates a ASN.1 data like this:\n\t * // OCTET STRING, encapsulates {\n\t * //   SEQUENCE {\n\t * //     INTEGER 3\n\t * //     PrintableString 'aaa'\n\t * //     }\n\t * //   }\n\t */\n\tKJUR.asn1.DEROctetString = function(params) {\n\t    if (params !== undefined && typeof params.obj !== \"undefined\") {\n\t        var o = KJUR.asn1.ASN1Util.newObject(params.obj);\n\t        params.hex = o.getEncodedHex();\n\t    }\n\t    KJUR.asn1.DEROctetString.superclass.constructor.call(this, params);\n\t    this.hT = \"04\";\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DEROctetString, KJUR.asn1.DERAbstractString);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER Null\n\t * @name KJUR.asn1.DERNull\n\t * @class class for ASN.1 DER Null\n\t * @extends KJUR.asn1.ASN1Object\n\t * @description\n\t * @see KJUR.asn1.ASN1Object - superclass\n\t */\n\tKJUR.asn1.DERNull = function() {\n\t    KJUR.asn1.DERNull.superclass.constructor.call(this);\n\t    this.hT = \"05\";\n\t    this.hTLV = \"0500\";\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERNull, KJUR.asn1.ASN1Object);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER ObjectIdentifier\n\t * @name KJUR.asn1.DERObjectIdentifier\n\t * @class class for ASN.1 DER ObjectIdentifier\n\t * @param {Array} params associative array of parameters (ex. {'oid': '2.5.4.5'})\n\t * @extends KJUR.asn1.ASN1Object\n\t * @description\n\t * <br/>\n\t * As for argument 'params' for constructor, you can specify one of\n\t * following properties:\n\t * <ul>\n\t * <li>oid - specify initial ASN.1 value(V) by a oid string (ex. 2.5.4.13)</li>\n\t * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n\t * </ul>\n\t * NOTE: 'params' can be omitted.\n\t */\n\tKJUR.asn1.DERObjectIdentifier = function(params) {\n\t    var itox = function(i) {\n\t        var h = i.toString(16);\n\t        if (h.length == 1) h = '0' + h;\n\t        return h;\n\t    };\n\t    var roidtox = function(roid) {\n\t        var h = '';\n\t        var bi = new BigInteger(roid, 10);\n\t        var b = bi.toString(2);\n\t        var padLen = 7 - b.length % 7;\n\t        if (padLen == 7) padLen = 0;\n\t        var bPad = '';\n\t        for (var i = 0; i < padLen; i++) bPad += '0';\n\t        b = bPad + b;\n\t        for (var i = 0; i < b.length - 1; i += 7) {\n\t            var b8 = b.substr(i, 7);\n\t            if (i != b.length - 7) b8 = '1' + b8;\n\t            h += itox(parseInt(b8, 2));\n\t        }\n\t        return h;\n\t    };\n\t\n\t    KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);\n\t    this.hT = \"06\";\n\t\n\t    /**\n\t     * set value by a hexadecimal string\n\t     * @name setValueHex\n\t     * @memberOf KJUR.asn1.DERObjectIdentifier#\n\t     * @function\n\t     * @param {String} newHexString hexadecimal value of OID bytes\n\t     */\n\t    this.setValueHex = function(newHexString) {\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.s = null;\n\t        this.hV = newHexString;\n\t    };\n\t\n\t    /**\n\t     * set value by a OID string<br/>\n\t     * @name setValueOidString\n\t     * @memberOf KJUR.asn1.DERObjectIdentifier#\n\t     * @function\n\t     * @param {String} oidString OID string (ex. 2.5.4.13)\n\t     * @example\n\t     * o = new KJUR.asn1.DERObjectIdentifier();\n\t     * o.setValueOidString(\"2.5.4.13\");\n\t     */\n\t    this.setValueOidString = function(oidString) {\n\t        if (! oidString.match(/^[0-9.]+$/)) {\n\t            throw \"malformed oid string: \" + oidString;\n\t        }\n\t        var h = '';\n\t        var a = oidString.split('.');\n\t        var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\n\t        h += itox(i0);\n\t        a.splice(0, 2);\n\t        for (var i = 0; i < a.length; i++) {\n\t            h += roidtox(a[i]);\n\t        }\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.s = null;\n\t        this.hV = h;\n\t    };\n\t\n\t    /**\n\t     * set value by a OID name\n\t     * @name setValueName\n\t     * @memberOf KJUR.asn1.DERObjectIdentifier#\n\t     * @function\n\t     * @param {String} oidName OID name (ex. 'serverAuth')\n\t     * @since 1.0.1\n\t     * @description\n\t     * OID name shall be defined in 'KJUR.asn1.x509.OID.name2oidList'.\n\t     * Otherwise raise error.\n\t     * @example\n\t     * o = new KJUR.asn1.DERObjectIdentifier();\n\t     * o.setValueName(\"serverAuth\");\n\t     */\n\t    this.setValueName = function(oidName) {\n\t        var oid = KJUR.asn1.x509.OID.name2oid(oidName);\n\t        if (oid !== '') {\n\t            this.setValueOidString(oid);\n\t        } else {\n\t            throw \"DERObjectIdentifier oidName undefined: \" + oidName;\n\t        }\n\t    };\n\t\n\t    this.getFreshValueHex = function() {\n\t        return this.hV;\n\t    };\n\t\n\t    if (params !== undefined) {\n\t        if (typeof params === \"string\") {\n\t            if (params.match(/^[0-2].[0-9.]+$/)) {\n\t                this.setValueOidString(params);\n\t            } else {\n\t                this.setValueName(params);\n\t            }\n\t        } else if (params.oid !== undefined) {\n\t            this.setValueOidString(params.oid);\n\t        } else if (params.hex !== undefined) {\n\t            this.setValueHex(params.hex);\n\t        } else if (params.name !== undefined) {\n\t            this.setValueName(params.name);\n\t        }\n\t    }\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier, KJUR.asn1.ASN1Object);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER Enumerated\n\t * @name KJUR.asn1.DEREnumerated\n\t * @class class for ASN.1 DER Enumerated\n\t * @extends KJUR.asn1.ASN1Object\n\t * @description\n\t * <br/>\n\t * As for argument 'params' for constructor, you can specify one of\n\t * following properties:\n\t * <ul>\n\t * <li>int - specify initial ASN.1 value(V) by integer value</li>\n\t * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n\t * </ul>\n\t * NOTE: 'params' can be omitted.\n\t * @example\n\t * new KJUR.asn1.DEREnumerated(123);\n\t * new KJUR.asn1.DEREnumerated({int: 123});\n\t * new KJUR.asn1.DEREnumerated({hex: '1fad'});\n\t */\n\tKJUR.asn1.DEREnumerated = function(params) {\n\t    KJUR.asn1.DEREnumerated.superclass.constructor.call(this);\n\t    this.hT = \"0a\";\n\t\n\t    /**\n\t     * set value by Tom Wu's BigInteger object\n\t     * @name setByBigInteger\n\t     * @memberOf KJUR.asn1.DEREnumerated#\n\t     * @function\n\t     * @param {BigInteger} bigIntegerValue to set\n\t     */\n\t    this.setByBigInteger = function(bigIntegerValue) {\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\n\t    };\n\t\n\t    /**\n\t     * set value by integer value\n\t     * @name setByInteger\n\t     * @memberOf KJUR.asn1.DEREnumerated#\n\t     * @function\n\t     * @param {Integer} integer value to set\n\t     */\n\t    this.setByInteger = function(intValue) {\n\t        var bi = new BigInteger(String(intValue), 10);\n\t        this.setByBigInteger(bi);\n\t    };\n\t\n\t    /**\n\t     * set value by integer value\n\t     * @name setValueHex\n\t     * @memberOf KJUR.asn1.DEREnumerated#\n\t     * @function\n\t     * @param {String} hexadecimal string of integer value\n\t     * @description\n\t     * <br/>\n\t     * NOTE: Value shall be represented by minimum octet length of\n\t     * two's complement representation.\n\t     */\n\t    this.setValueHex = function(newHexString) {\n\t        this.hV = newHexString;\n\t    };\n\t\n\t    this.getFreshValueHex = function() {\n\t        return this.hV;\n\t    };\n\t\n\t    if (typeof params != \"undefined\") {\n\t        if (typeof params['int'] != \"undefined\") {\n\t            this.setByInteger(params['int']);\n\t        } else if (typeof params == \"number\") {\n\t            this.setByInteger(params);\n\t        } else if (typeof params['hex'] != \"undefined\") {\n\t            this.setValueHex(params['hex']);\n\t        }\n\t    }\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DEREnumerated, KJUR.asn1.ASN1Object);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER UTF8String\n\t * @name KJUR.asn1.DERUTF8String\n\t * @class class for ASN.1 DER UTF8String\n\t * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n\t * @extends KJUR.asn1.DERAbstractString\n\t * @description\n\t * @see KJUR.asn1.DERAbstractString - superclass\n\t */\n\tKJUR.asn1.DERUTF8String = function(params) {\n\t    KJUR.asn1.DERUTF8String.superclass.constructor.call(this, params);\n\t    this.hT = \"0c\";\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERUTF8String, KJUR.asn1.DERAbstractString);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER NumericString\n\t * @name KJUR.asn1.DERNumericString\n\t * @class class for ASN.1 DER NumericString\n\t * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n\t * @extends KJUR.asn1.DERAbstractString\n\t * @description\n\t * @see KJUR.asn1.DERAbstractString - superclass\n\t */\n\tKJUR.asn1.DERNumericString = function(params) {\n\t    KJUR.asn1.DERNumericString.superclass.constructor.call(this, params);\n\t    this.hT = \"12\";\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERNumericString, KJUR.asn1.DERAbstractString);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER PrintableString\n\t * @name KJUR.asn1.DERPrintableString\n\t * @class class for ASN.1 DER PrintableString\n\t * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n\t * @extends KJUR.asn1.DERAbstractString\n\t * @description\n\t * @see KJUR.asn1.DERAbstractString - superclass\n\t */\n\tKJUR.asn1.DERPrintableString = function(params) {\n\t    KJUR.asn1.DERPrintableString.superclass.constructor.call(this, params);\n\t    this.hT = \"13\";\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERPrintableString, KJUR.asn1.DERAbstractString);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER TeletexString\n\t * @name KJUR.asn1.DERTeletexString\n\t * @class class for ASN.1 DER TeletexString\n\t * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n\t * @extends KJUR.asn1.DERAbstractString\n\t * @description\n\t * @see KJUR.asn1.DERAbstractString - superclass\n\t */\n\tKJUR.asn1.DERTeletexString = function(params) {\n\t    KJUR.asn1.DERTeletexString.superclass.constructor.call(this, params);\n\t    this.hT = \"14\";\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERTeletexString, KJUR.asn1.DERAbstractString);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER IA5String\n\t * @name KJUR.asn1.DERIA5String\n\t * @class class for ASN.1 DER IA5String\n\t * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n\t * @extends KJUR.asn1.DERAbstractString\n\t * @description\n\t * @see KJUR.asn1.DERAbstractString - superclass\n\t */\n\tKJUR.asn1.DERIA5String = function(params) {\n\t    KJUR.asn1.DERIA5String.superclass.constructor.call(this, params);\n\t    this.hT = \"16\";\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERIA5String, KJUR.asn1.DERAbstractString);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER UTCTime\n\t * @name KJUR.asn1.DERUTCTime\n\t * @class class for ASN.1 DER UTCTime\n\t * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\n\t * @extends KJUR.asn1.DERAbstractTime\n\t * @description\n\t * <br/>\n\t * As for argument 'params' for constructor, you can specify one of\n\t * following properties:\n\t * <ul>\n\t * <li>str - specify initial ASN.1 value(V) by a string (ex.'130430235959Z')</li>\n\t * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n\t * <li>date - specify Date object.</li>\n\t * </ul>\n\t * NOTE: 'params' can be omitted.\n\t * <h4>EXAMPLES</h4>\n\t * @example\n\t * d1 = new KJUR.asn1.DERUTCTime();\n\t * d1.setString('130430125959Z');\n\t *\n\t * d2 = new KJUR.asn1.DERUTCTime({'str': '130430125959Z'});\n\t * d3 = new KJUR.asn1.DERUTCTime({'date': new Date(Date.UTC(2015, 0, 31, 0, 0, 0, 0))});\n\t * d4 = new KJUR.asn1.DERUTCTime('130430125959Z');\n\t */\n\tKJUR.asn1.DERUTCTime = function(params) {\n\t    KJUR.asn1.DERUTCTime.superclass.constructor.call(this, params);\n\t    this.hT = \"17\";\n\t\n\t    /**\n\t     * set value by a Date object<br/>\n\t     * @name setByDate\n\t     * @memberOf KJUR.asn1.DERUTCTime#\n\t     * @function\n\t     * @param {Date} dateObject Date object to set ASN.1 value(V)\n\t     * @example\n\t     * o = new KJUR.asn1.DERUTCTime();\n\t     * o.setByDate(new Date(\"2016/12/31\"));\n\t     */\n\t    this.setByDate = function(dateObject) {\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.date = dateObject;\n\t        this.s = this.formatDate(this.date, 'utc');\n\t        this.hV = stohex(this.s);\n\t    };\n\t\n\t    this.getFreshValueHex = function() {\n\t        if (typeof this.date == \"undefined\" && typeof this.s == \"undefined\") {\n\t            this.date = new Date();\n\t            this.s = this.formatDate(this.date, 'utc');\n\t            this.hV = stohex(this.s);\n\t        }\n\t        return this.hV;\n\t    };\n\t\n\t    if (params !== undefined) {\n\t        if (params.str !== undefined) {\n\t            this.setString(params.str);\n\t        } else if (typeof params == \"string\" && params.match(/^[0-9]{12}Z$/)) {\n\t            this.setString(params);\n\t        } else if (params.hex !== undefined) {\n\t            this.setStringHex(params.hex);\n\t        } else if (params.date !== undefined) {\n\t            this.setByDate(params.date);\n\t        }\n\t    }\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERUTCTime, KJUR.asn1.DERAbstractTime);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER GeneralizedTime\n\t * @name KJUR.asn1.DERGeneralizedTime\n\t * @class class for ASN.1 DER GeneralizedTime\n\t * @param {Array} params associative array of parameters (ex. {'str': '20130430235959Z'})\n\t * @property {Boolean} withMillis flag to show milliseconds or not\n\t * @extends KJUR.asn1.DERAbstractTime\n\t * @description\n\t * <br/>\n\t * As for argument 'params' for constructor, you can specify one of\n\t * following properties:\n\t * <ul>\n\t * <li>str - specify initial ASN.1 value(V) by a string (ex.'20130430235959Z')</li>\n\t * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n\t * <li>date - specify Date object.</li>\n\t * <li>millis - specify flag to show milliseconds (from 1.0.6)</li>\n\t * </ul>\n\t * NOTE1: 'params' can be omitted.\n\t * NOTE2: 'withMillis' property is supported from asn1 1.0.6.\n\t */\n\tKJUR.asn1.DERGeneralizedTime = function(params) {\n\t    KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this, params);\n\t    this.hT = \"18\";\n\t    this.withMillis = false;\n\t\n\t    /**\n\t     * set value by a Date object\n\t     * @name setByDate\n\t     * @memberOf KJUR.asn1.DERGeneralizedTime#\n\t     * @function\n\t     * @param {Date} dateObject Date object to set ASN.1 value(V)\n\t     * @example\n\t     * When you specify UTC time, use 'Date.UTC' method like this:<br/>\n\t     * o1 = new DERUTCTime();\n\t     * o1.setByDate(date);\n\t     *\n\t     * date = new Date(Date.UTC(2015, 0, 31, 23, 59, 59, 0)); #2015JAN31 23:59:59\n\t     */\n\t    this.setByDate = function(dateObject) {\n\t        this.hTLV = null;\n\t        this.isModified = true;\n\t        this.date = dateObject;\n\t        this.s = this.formatDate(this.date, 'gen', this.withMillis);\n\t        this.hV = stohex(this.s);\n\t    };\n\t\n\t    this.getFreshValueHex = function() {\n\t        if (this.date === undefined && this.s === undefined) {\n\t            this.date = new Date();\n\t            this.s = this.formatDate(this.date, 'gen', this.withMillis);\n\t            this.hV = stohex(this.s);\n\t        }\n\t        return this.hV;\n\t    };\n\t\n\t    if (params !== undefined) {\n\t        if (params.str !== undefined) {\n\t            this.setString(params.str);\n\t        } else if (typeof params == \"string\" && params.match(/^[0-9]{14}Z$/)) {\n\t            this.setString(params);\n\t        } else if (params.hex !== undefined) {\n\t            this.setStringHex(params.hex);\n\t        } else if (params.date !== undefined) {\n\t            this.setByDate(params.date);\n\t        }\n\t        if (params.millis === true) {\n\t            this.withMillis = true;\n\t        }\n\t    }\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime, KJUR.asn1.DERAbstractTime);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER Sequence\n\t * @name KJUR.asn1.DERSequence\n\t * @class class for ASN.1 DER Sequence\n\t * @extends KJUR.asn1.DERAbstractStructured\n\t * @description\n\t * <br/>\n\t * As for argument 'params' for constructor, you can specify one of\n\t * following properties:\n\t * <ul>\n\t * <li>array - specify array of ASN1Object to set elements of content</li>\n\t * </ul>\n\t * NOTE: 'params' can be omitted.\n\t */\n\tKJUR.asn1.DERSequence = function(params) {\n\t    KJUR.asn1.DERSequence.superclass.constructor.call(this, params);\n\t    this.hT = \"30\";\n\t    this.getFreshValueHex = function() {\n\t        var h = '';\n\t        for (var i = 0; i < this.asn1Array.length; i++) {\n\t            var asn1Obj = this.asn1Array[i];\n\t            h += asn1Obj.getEncodedHex();\n\t        }\n\t        this.hV = h;\n\t        return this.hV;\n\t    };\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERSequence, KJUR.asn1.DERAbstractStructured);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER Set\n\t * @name KJUR.asn1.DERSet\n\t * @class class for ASN.1 DER Set\n\t * @extends KJUR.asn1.DERAbstractStructured\n\t * @description\n\t * <br/>\n\t * As for argument 'params' for constructor, you can specify one of\n\t * following properties:\n\t * <ul>\n\t * <li>array - specify array of ASN1Object to set elements of content</li>\n\t * <li>sortflag - flag for sort (default: true). ASN.1 BER is not sorted in 'SET OF'.</li>\n\t * </ul>\n\t * NOTE1: 'params' can be omitted.<br/>\n\t * NOTE2: sortflag is supported since 1.0.5.\n\t */\n\tKJUR.asn1.DERSet = function(params) {\n\t    KJUR.asn1.DERSet.superclass.constructor.call(this, params);\n\t    this.hT = \"31\";\n\t    this.sortFlag = true; // item shall be sorted only in ASN.1 DER\n\t    this.getFreshValueHex = function() {\n\t        var a = new Array();\n\t        for (var i = 0; i < this.asn1Array.length; i++) {\n\t            var asn1Obj = this.asn1Array[i];\n\t            a.push(asn1Obj.getEncodedHex());\n\t        }\n\t        if (this.sortFlag == true) a.sort();\n\t        this.hV = a.join('');\n\t        return this.hV;\n\t    };\n\t\n\t    if (typeof params != \"undefined\") {\n\t        if (typeof params.sortflag != \"undefined\" &&\n\t            params.sortflag == false)\n\t            this.sortFlag = false;\n\t    }\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERSet, KJUR.asn1.DERAbstractStructured);\n\t\n\t// ********************************************************************\n\t/**\n\t * class for ASN.1 DER TaggedObject\n\t * @name KJUR.asn1.DERTaggedObject\n\t * @class class for ASN.1 DER TaggedObject\n\t * @extends KJUR.asn1.ASN1Object\n\t * @description\n\t * <br/>\n\t * Parameter 'tagNoNex' is ASN.1 tag(T) value for this object.\n\t * For example, if you find '[1]' tag in a ASN.1 dump,\n\t * 'tagNoHex' will be 'a1'.\n\t * <br/>\n\t * As for optional argument 'params' for constructor, you can specify *ANY* of\n\t * following properties:\n\t * <ul>\n\t * <li>explicit - specify true if this is explicit tag otherwise false\n\t *     (default is 'true').</li>\n\t * <li>tag - specify tag (default is 'a0' which means [0])</li>\n\t * <li>obj - specify ASN1Object which is tagged</li>\n\t * </ul>\n\t * @example\n\t * d1 = new KJUR.asn1.DERUTF8String({'str':'a'});\n\t * d2 = new KJUR.asn1.DERTaggedObject({'obj': d1});\n\t * hex = d2.getEncodedHex();\n\t */\n\tKJUR.asn1.DERTaggedObject = function(params) {\n\t    KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);\n\t    this.hT = \"a0\";\n\t    this.hV = '';\n\t    this.isExplicit = true;\n\t    this.asn1Object = null;\n\t\n\t    /**\n\t     * set value by an ASN1Object\n\t     * @name setString\n\t     * @memberOf KJUR.asn1.DERTaggedObject#\n\t     * @function\n\t     * @param {Boolean} isExplicitFlag flag for explicit/implicit tag\n\t     * @param {Integer} tagNoHex hexadecimal string of ASN.1 tag\n\t     * @param {ASN1Object} asn1Object ASN.1 to encapsulate\n\t     */\n\t    this.setASN1Object = function(isExplicitFlag, tagNoHex, asn1Object) {\n\t        this.hT = tagNoHex;\n\t        this.isExplicit = isExplicitFlag;\n\t        this.asn1Object = asn1Object;\n\t        if (this.isExplicit) {\n\t            this.hV = this.asn1Object.getEncodedHex();\n\t            this.hTLV = null;\n\t            this.isModified = true;\n\t        } else {\n\t            this.hV = null;\n\t            this.hTLV = asn1Object.getEncodedHex();\n\t            this.hTLV = this.hTLV.replace(/^../, tagNoHex);\n\t            this.isModified = false;\n\t        }\n\t    };\n\t\n\t    this.getFreshValueHex = function() {\n\t        return this.hV;\n\t    };\n\t\n\t    if (typeof params != \"undefined\") {\n\t        if (typeof params['tag'] != \"undefined\") {\n\t            this.hT = params['tag'];\n\t        }\n\t        if (typeof params['explicit'] != \"undefined\") {\n\t            this.isExplicit = params['explicit'];\n\t        }\n\t        if (typeof params['obj'] != \"undefined\") {\n\t            this.asn1Object = params['obj'];\n\t            this.setASN1Object(this.isExplicit, this.hT, this.asn1Object);\n\t        }\n\t    }\n\t};\n\tYAHOO.lang.extend(KJUR.asn1.DERTaggedObject, KJUR.asn1.ASN1Object);\n\t\n\t/**\n\t * Create a new JSEncryptRSAKey that extends Tom Wu's RSA key object.\n\t * This object is just a decorator for parsing the key parameter\n\t * @param {string|Object} key - The key in string format, or an object containing\n\t * the parameters needed to build a RSAKey object.\n\t * @constructor\n\t */\n\tvar JSEncryptRSAKey = /** @class */ (function (_super) {\n\t    __extends(JSEncryptRSAKey, _super);\n\t    function JSEncryptRSAKey(key) {\n\t        var _this = _super.call(this) || this;\n\t        // Call the super constructor.\n\t        //  RSAKey.call(this);\n\t        // If a key key was provided.\n\t        if (key) {\n\t            // If this is a string...\n\t            if (typeof key === \"string\") {\n\t                _this.parseKey(key);\n\t            }\n\t            else if (JSEncryptRSAKey.hasPrivateKeyProperty(key) ||\n\t                JSEncryptRSAKey.hasPublicKeyProperty(key)) {\n\t                // Set the values for the key.\n\t                _this.parsePropertiesFrom(key);\n\t            }\n\t        }\n\t        return _this;\n\t    }\n\t    /**\n\t     * Method to parse a pem encoded string containing both a public or private key.\n\t     * The method will translate the pem encoded string in a der encoded string and\n\t     * will parse private key and public key parameters. This method accepts public key\n\t     * in the rsaencryption pkcs #1 format (oid: 1.2.840.113549.1.1.1).\n\t     *\n\t     * @todo Check how many rsa formats use the same format of pkcs #1.\n\t     *\n\t     * The format is defined as:\n\t     * PublicKeyInfo ::= SEQUENCE {\n\t     *   algorithm       AlgorithmIdentifier,\n\t     *   PublicKey       BIT STRING\n\t     * }\n\t     * Where AlgorithmIdentifier is:\n\t     * AlgorithmIdentifier ::= SEQUENCE {\n\t     *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm\n\t     *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)\n\t     * }\n\t     * and PublicKey is a SEQUENCE encapsulated in a BIT STRING\n\t     * RSAPublicKey ::= SEQUENCE {\n\t     *   modulus           INTEGER,  -- n\n\t     *   publicExponent    INTEGER   -- e\n\t     * }\n\t     * it's possible to examine the structure of the keys obtained from openssl using\n\t     * an asn.1 dumper as the one used here to parse the components: http://lapo.it/asn1js/\n\t     * @argument {string} pem the pem encoded string, can include the BEGIN/END header/footer\n\t     * @private\n\t     */\n\t    JSEncryptRSAKey.prototype.parseKey = function (pem) {\n\t        try {\n\t            var modulus = 0;\n\t            var public_exponent = 0;\n\t            var reHex = /^\\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\\s*)+$/;\n\t            var der = reHex.test(pem) ? Hex.decode(pem) : Base64.unarmor(pem);\n\t            var asn1 = ASN1.decode(der);\n\t            // Fixes a bug with OpenSSL 1.0+ private keys\n\t            if (asn1.sub.length === 3) {\n\t                asn1 = asn1.sub[2].sub[0];\n\t            }\n\t            if (asn1.sub.length === 9) {\n\t                // Parse the private key.\n\t                modulus = asn1.sub[1].getHexStringValue(); // bigint\n\t                this.n = parseBigInt(modulus, 16);\n\t                public_exponent = asn1.sub[2].getHexStringValue(); // int\n\t                this.e = parseInt(public_exponent, 16);\n\t                var private_exponent = asn1.sub[3].getHexStringValue(); // bigint\n\t                this.d = parseBigInt(private_exponent, 16);\n\t                var prime1 = asn1.sub[4].getHexStringValue(); // bigint\n\t                this.p = parseBigInt(prime1, 16);\n\t                var prime2 = asn1.sub[5].getHexStringValue(); // bigint\n\t                this.q = parseBigInt(prime2, 16);\n\t                var exponent1 = asn1.sub[6].getHexStringValue(); // bigint\n\t                this.dmp1 = parseBigInt(exponent1, 16);\n\t                var exponent2 = asn1.sub[7].getHexStringValue(); // bigint\n\t                this.dmq1 = parseBigInt(exponent2, 16);\n\t                var coefficient = asn1.sub[8].getHexStringValue(); // bigint\n\t                this.coeff = parseBigInt(coefficient, 16);\n\t            }\n\t            else if (asn1.sub.length === 2) {\n\t                // Parse the public key.\n\t                var bit_string = asn1.sub[1];\n\t                var sequence = bit_string.sub[0];\n\t                modulus = sequence.sub[0].getHexStringValue();\n\t                this.n = parseBigInt(modulus, 16);\n\t                public_exponent = sequence.sub[1].getHexStringValue();\n\t                this.e = parseInt(public_exponent, 16);\n\t            }\n\t            else {\n\t                return false;\n\t            }\n\t            return true;\n\t        }\n\t        catch (ex) {\n\t            return false;\n\t        }\n\t    };\n\t    /**\n\t     * Translate rsa parameters in a hex encoded string representing the rsa key.\n\t     *\n\t     * The translation follow the ASN.1 notation :\n\t     * RSAPrivateKey ::= SEQUENCE {\n\t     *   version           Version,\n\t     *   modulus           INTEGER,  -- n\n\t     *   publicExponent    INTEGER,  -- e\n\t     *   privateExponent   INTEGER,  -- d\n\t     *   prime1            INTEGER,  -- p\n\t     *   prime2            INTEGER,  -- q\n\t     *   exponent1         INTEGER,  -- d mod (p1)\n\t     *   exponent2         INTEGER,  -- d mod (q-1)\n\t     *   coefficient       INTEGER,  -- (inverse of q) mod p\n\t     * }\n\t     * @returns {string}  DER Encoded String representing the rsa private key\n\t     * @private\n\t     */\n\t    JSEncryptRSAKey.prototype.getPrivateBaseKey = function () {\n\t        var options = {\n\t            array: [\n\t                new KJUR.asn1.DERInteger({ int: 0 }),\n\t                new KJUR.asn1.DERInteger({ bigint: this.n }),\n\t                new KJUR.asn1.DERInteger({ int: this.e }),\n\t                new KJUR.asn1.DERInteger({ bigint: this.d }),\n\t                new KJUR.asn1.DERInteger({ bigint: this.p }),\n\t                new KJUR.asn1.DERInteger({ bigint: this.q }),\n\t                new KJUR.asn1.DERInteger({ bigint: this.dmp1 }),\n\t                new KJUR.asn1.DERInteger({ bigint: this.dmq1 }),\n\t                new KJUR.asn1.DERInteger({ bigint: this.coeff })\n\t            ]\n\t        };\n\t        var seq = new KJUR.asn1.DERSequence(options);\n\t        return seq.getEncodedHex();\n\t    };\n\t    /**\n\t     * base64 (pem) encoded version of the DER encoded representation\n\t     * @returns {string} pem encoded representation without header and footer\n\t     * @public\n\t     */\n\t    JSEncryptRSAKey.prototype.getPrivateBaseKeyB64 = function () {\n\t        return hex2b64(this.getPrivateBaseKey());\n\t    };\n\t    /**\n\t     * Translate rsa parameters in a hex encoded string representing the rsa public key.\n\t     * The representation follow the ASN.1 notation :\n\t     * PublicKeyInfo ::= SEQUENCE {\n\t     *   algorithm       AlgorithmIdentifier,\n\t     *   PublicKey       BIT STRING\n\t     * }\n\t     * Where AlgorithmIdentifier is:\n\t     * AlgorithmIdentifier ::= SEQUENCE {\n\t     *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm\n\t     *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)\n\t     * }\n\t     * and PublicKey is a SEQUENCE encapsulated in a BIT STRING\n\t     * RSAPublicKey ::= SEQUENCE {\n\t     *   modulus           INTEGER,  -- n\n\t     *   publicExponent    INTEGER   -- e\n\t     * }\n\t     * @returns {string} DER Encoded String representing the rsa public key\n\t     * @private\n\t     */\n\t    JSEncryptRSAKey.prototype.getPublicBaseKey = function () {\n\t        var first_sequence = new KJUR.asn1.DERSequence({\n\t            array: [\n\t                new KJUR.asn1.DERObjectIdentifier({ oid: \"1.2.840.113549.1.1.1\" }),\n\t                new KJUR.asn1.DERNull()\n\t            ]\n\t        });\n\t        var second_sequence = new KJUR.asn1.DERSequence({\n\t            array: [\n\t                new KJUR.asn1.DERInteger({ bigint: this.n }),\n\t                new KJUR.asn1.DERInteger({ int: this.e })\n\t            ]\n\t        });\n\t        var bit_string = new KJUR.asn1.DERBitString({\n\t            hex: \"00\" + second_sequence.getEncodedHex()\n\t        });\n\t        var seq = new KJUR.asn1.DERSequence({\n\t            array: [\n\t                first_sequence,\n\t                bit_string\n\t            ]\n\t        });\n\t        return seq.getEncodedHex();\n\t    };\n\t    /**\n\t     * base64 (pem) encoded version of the DER encoded representation\n\t     * @returns {string} pem encoded representation without header and footer\n\t     * @public\n\t     */\n\t    JSEncryptRSAKey.prototype.getPublicBaseKeyB64 = function () {\n\t        return hex2b64(this.getPublicBaseKey());\n\t    };\n\t    /**\n\t     * wrap the string in block of width chars. The default value for rsa keys is 64\n\t     * characters.\n\t     * @param {string} str the pem encoded string without header and footer\n\t     * @param {Number} [width=64] - the length the string has to be wrapped at\n\t     * @returns {string}\n\t     * @private\n\t     */\n\t    JSEncryptRSAKey.wordwrap = function (str, width) {\n\t        width = width || 64;\n\t        if (!str) {\n\t            return str;\n\t        }\n\t        var regex = \"(.{1,\" + width + \"})( +|$\\n?)|(.{1,\" + width + \"})\";\n\t        return str.match(RegExp(regex, \"g\")).join(\"\\n\");\n\t    };\n\t    /**\n\t     * Retrieve the pem encoded private key\n\t     * @returns {string} the pem encoded private key with header/footer\n\t     * @public\n\t     */\n\t    JSEncryptRSAKey.prototype.getPrivateKey = function () {\n\t        var key = \"-----BEGIN RSA PRIVATE KEY-----\\n\";\n\t        key += JSEncryptRSAKey.wordwrap(this.getPrivateBaseKeyB64()) + \"\\n\";\n\t        key += \"-----END RSA PRIVATE KEY-----\";\n\t        return key;\n\t    };\n\t    /**\n\t     * Retrieve the pem encoded public key\n\t     * @returns {string} the pem encoded public key with header/footer\n\t     * @public\n\t     */\n\t    JSEncryptRSAKey.prototype.getPublicKey = function () {\n\t        var key = \"-----BEGIN PUBLIC KEY-----\\n\";\n\t        key += JSEncryptRSAKey.wordwrap(this.getPublicBaseKeyB64()) + \"\\n\";\n\t        key += \"-----END PUBLIC KEY-----\";\n\t        return key;\n\t    };\n\t    /**\n\t     * Check if the object contains the necessary parameters to populate the rsa modulus\n\t     * and public exponent parameters.\n\t     * @param {Object} [obj={}] - An object that may contain the two public key\n\t     * parameters\n\t     * @returns {boolean} true if the object contains both the modulus and the public exponent\n\t     * properties (n and e)\n\t     * @todo check for types of n and e. N should be a parseable bigInt object, E should\n\t     * be a parseable integer number\n\t     * @private\n\t     */\n\t    JSEncryptRSAKey.hasPublicKeyProperty = function (obj) {\n\t        obj = obj || {};\n\t        return (obj.hasOwnProperty(\"n\") &&\n\t            obj.hasOwnProperty(\"e\"));\n\t    };\n\t    /**\n\t     * Check if the object contains ALL the parameters of an RSA key.\n\t     * @param {Object} [obj={}] - An object that may contain nine rsa key\n\t     * parameters\n\t     * @returns {boolean} true if the object contains all the parameters needed\n\t     * @todo check for types of the parameters all the parameters but the public exponent\n\t     * should be parseable bigint objects, the public exponent should be a parseable integer number\n\t     * @private\n\t     */\n\t    JSEncryptRSAKey.hasPrivateKeyProperty = function (obj) {\n\t        obj = obj || {};\n\t        return (obj.hasOwnProperty(\"n\") &&\n\t            obj.hasOwnProperty(\"e\") &&\n\t            obj.hasOwnProperty(\"d\") &&\n\t            obj.hasOwnProperty(\"p\") &&\n\t            obj.hasOwnProperty(\"q\") &&\n\t            obj.hasOwnProperty(\"dmp1\") &&\n\t            obj.hasOwnProperty(\"dmq1\") &&\n\t            obj.hasOwnProperty(\"coeff\"));\n\t    };\n\t    /**\n\t     * Parse the properties of obj in the current rsa object. Obj should AT LEAST\n\t     * include the modulus and public exponent (n, e) parameters.\n\t     * @param {Object} obj - the object containing rsa parameters\n\t     * @private\n\t     */\n\t    JSEncryptRSAKey.prototype.parsePropertiesFrom = function (obj) {\n\t        this.n = obj.n;\n\t        this.e = obj.e;\n\t        if (obj.hasOwnProperty(\"d\")) {\n\t            this.d = obj.d;\n\t            this.p = obj.p;\n\t            this.q = obj.q;\n\t            this.dmp1 = obj.dmp1;\n\t            this.dmq1 = obj.dmq1;\n\t            this.coeff = obj.coeff;\n\t        }\n\t    };\n\t    return JSEncryptRSAKey;\n\t}(RSAKey));\n\t\n\t/**\n\t *\n\t * @param {Object} [options = {}] - An object to customize JSEncrypt behaviour\n\t * possible parameters are:\n\t * - default_key_size        {number}  default: 1024 the key size in bit\n\t * - default_public_exponent {string}  default: '010001' the hexadecimal representation of the public exponent\n\t * - log                     {boolean} default: false whether log warn/error or not\n\t * @constructor\n\t */\n\tvar JSEncrypt = /** @class */ (function () {\n\t    function JSEncrypt(options) {\n\t        options = options || {};\n\t        this.default_key_size = parseInt(options.default_key_size, 10) || 1024;\n\t        this.default_public_exponent = options.default_public_exponent || \"010001\"; // 65537 default openssl public exponent for rsa key type\n\t        this.log = options.log || false;\n\t        // The private and public key.\n\t        this.key = null;\n\t    }\n\t    /**\n\t     * Method to set the rsa key parameter (one method is enough to set both the public\n\t     * and the private key, since the private key contains the public key paramenters)\n\t     * Log a warning if logs are enabled\n\t     * @param {Object|string} key the pem encoded string or an object (with or without header/footer)\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.setKey = function (key) {\n\t        if (this.log && this.key) {\n\t            console.warn(\"A key was already set, overriding existing.\");\n\t        }\n\t        this.key = new JSEncryptRSAKey(key);\n\t    };\n\t    /**\n\t     * Proxy method for setKey, for api compatibility\n\t     * @see setKey\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.setPrivateKey = function (privkey) {\n\t        // Create the key.\n\t        this.setKey(privkey);\n\t    };\n\t    /**\n\t     * Proxy method for setKey, for api compatibility\n\t     * @see setKey\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.setPublicKey = function (pubkey) {\n\t        // Sets the public key.\n\t        this.setKey(pubkey);\n\t    };\n\t    /**\n\t     * Proxy method for RSAKey object's decrypt, decrypt the string using the private\n\t     * components of the rsa key object. Note that if the object was not set will be created\n\t     * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor\n\t     * @param {string} str base64 encoded crypted string to decrypt\n\t     * @return {string} the decrypted string\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.decrypt = function (str) {\n\t        // Return the decrypted string.\n\t        try {\n\t            return this.getKey().decrypt(b64tohex(str));\n\t        }\n\t        catch (ex) {\n\t            return false;\n\t        }\n\t    };\n\t    /**\n\t     * Proxy method for RSAKey object's encrypt, encrypt the string using the public\n\t     * components of the rsa key object. Note that if the object was not set will be created\n\t     * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor\n\t     * @param {string} str the string to encrypt\n\t     * @return {string} the encrypted string encoded in base64\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.encrypt = function (str) {\n\t        // Return the encrypted string.\n\t        try {\n\t            return hex2b64(this.getKey().encrypt(str));\n\t        }\n\t        catch (ex) {\n\t            return false;\n\t        }\n\t    };\n\t    /**\n\t     * Proxy method for RSAKey object's sign.\n\t     * @param {string} str the string to sign\n\t     * @param {function} digestMethod hash method\n\t     * @param {string} digestName the name of the hash algorithm\n\t     * @return {string} the signature encoded in base64\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.sign = function (str, digestMethod, digestName) {\n\t        // return the RSA signature of 'str' in 'hex' format.\n\t        try {\n\t            return hex2b64(this.getKey().sign(str, digestMethod, digestName));\n\t        }\n\t        catch (ex) {\n\t            return false;\n\t        }\n\t    };\n\t    /**\n\t     * Proxy method for RSAKey object's verify.\n\t     * @param {string} str the string to verify\n\t     * @param {string} signature the signature encoded in base64 to compare the string to\n\t     * @param {function} digestMethod hash method\n\t     * @return {boolean} whether the data and signature match\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.verify = function (str, signature, digestMethod) {\n\t        // Return the decrypted 'digest' of the signature.\n\t        try {\n\t            return this.getKey().verify(str, b64tohex(signature), digestMethod);\n\t        }\n\t        catch (ex) {\n\t            return false;\n\t        }\n\t    };\n\t    /**\n\t     * Getter for the current JSEncryptRSAKey object. If it doesn't exists a new object\n\t     * will be created and returned\n\t     * @param {callback} [cb] the callback to be called if we want the key to be generated\n\t     * in an async fashion\n\t     * @returns {JSEncryptRSAKey} the JSEncryptRSAKey object\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.getKey = function (cb) {\n\t        // Only create new if it does not exist.\n\t        if (!this.key) {\n\t            // Get a new private key.\n\t            this.key = new JSEncryptRSAKey();\n\t            if (cb && {}.toString.call(cb) === \"[object Function]\") {\n\t                this.key.generateAsync(this.default_key_size, this.default_public_exponent, cb);\n\t                return;\n\t            }\n\t            // Generate the key.\n\t            this.key.generate(this.default_key_size, this.default_public_exponent);\n\t        }\n\t        return this.key;\n\t    };\n\t    /**\n\t     * Returns the pem encoded representation of the private key\n\t     * If the key doesn't exists a new key will be created\n\t     * @returns {string} pem encoded representation of the private key WITH header and footer\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.getPrivateKey = function () {\n\t        // Return the private representation of this key.\n\t        return this.getKey().getPrivateKey();\n\t    };\n\t    /**\n\t     * Returns the pem encoded representation of the private key\n\t     * If the key doesn't exists a new key will be created\n\t     * @returns {string} pem encoded representation of the private key WITHOUT header and footer\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.getPrivateKeyB64 = function () {\n\t        // Return the private representation of this key.\n\t        return this.getKey().getPrivateBaseKeyB64();\n\t    };\n\t    /**\n\t     * Returns the pem encoded representation of the public key\n\t     * If the key doesn't exists a new key will be created\n\t     * @returns {string} pem encoded representation of the public key WITH header and footer\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.getPublicKey = function () {\n\t        // Return the private representation of this key.\n\t        return this.getKey().getPublicKey();\n\t    };\n\t    /**\n\t     * Returns the pem encoded representation of the public key\n\t     * If the key doesn't exists a new key will be created\n\t     * @returns {string} pem encoded representation of the public key WITHOUT header and footer\n\t     * @public\n\t     */\n\t    JSEncrypt.prototype.getPublicKeyB64 = function () {\n\t        // Return the private representation of this key.\n\t        return this.getKey().getPublicBaseKeyB64();\n\t    };\n\t    JSEncrypt.version = \"3.0.0-rc.1\";\n\t    return JSEncrypt;\n\t}());\n\t\n\twindow.JSEncrypt = JSEncrypt;\n\t\n\texports.JSEncrypt = JSEncrypt;\n\texports.default = JSEncrypt;\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\t})));\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\r\n\t * Created by Qiang.Deng on 2017/3/20.\r\n\t */\r\n\tvar strophe = __webpack_require__(3);\r\n\tvar muc = __webpack_require__(4);\r\n\t\r\n\tvar Openfire = __webpack_require__(33);\r\n\tvar ManisStream = __webpack_require__(11);\r\n\tvar ManisResponse = __webpack_require__(26);\r\n\tvar ManisFunctions = __webpack_require__(27);\r\n\t\r\n\tvar peers = {}, myjid;\r\n\t\r\n\t\r\n\tfunction connectXMPP(username, password, nickname, successCallback, errorCallback) {\r\n\t  var openfireHost = window.serverPath + '/http-bind/';\r\n\t  connection = new Openfire.Connection(openfireHost);\r\n\t  try {\r\n\t    connection.connect(username, password, onConnect);\r\n\t    if (nickname) {\r\n\t      config.nickname = nickname;\r\n\t      connection.emuc.addDisplayNameToPresence(nickname);\r\n\t    }\r\n\t    connection.addHandler(onMessage, null, 'message');\r\n\t    connection.addHandler(onJingle, 'urn:xmpp:jingle:1', 'iq', 'set', null, null);\r\n\t    successCallback({\r\n\t      code: ManisResponse.code_200,\r\n\t      msg: ManisResponse.sign_success\r\n\t    });\r\n\t    console.info('userId : ', username.split('@')[0]);\r\n\t  } catch (e) {\r\n\t    errorCallback({\r\n\t      code: ManisResponse.code_400,\r\n\t      msg: ManisResponse.sign_failed,\r\n\t      error: e\r\n\t    })\r\n\t  }\r\n\t\r\n\t}\r\n\t\r\n\t\r\n\tfunction onConnect(status) {\r\n\t  if (status == Strophe.Status.CONNECTED) {\r\n\t    window.connection = connection;\r\n\t    console.log(\"xmpp connected\");\r\n\t    connection.sendIQ($pres().tree());\r\n\t  }\r\n\t}\r\n\t\r\n\tfunction onMessage(msg) {\r\n\t  if (window.connectType != 'p2p') {\r\n\t    return;\r\n\t  }\r\n\t  console.log(msg);\r\n\t  roomId = msg.getAttribute('from');\r\n\t  myjid = msg.getAttribute(\"to\");\r\n\t  var join = $(msg).find('>join');\r\n\t  if (join.length) {\r\n\t    var jids = join[0].childNodes;\r\n\t    for (var i = 0; i < jids.length; i++) {\r\n\t      var jid = jids[i].getAttribute(\"jid\");\r\n\t      if (jid == myjid) {\r\n\t        continue;\r\n\t      }\r\n\t      if (jid == roomId) {\r\n\t        continue;\r\n\t      }\r\n\t      var pc = getOrCreatePeerConnection(jid);\r\n\t      createOffer(pc, jid);\r\n\t    }\r\n\t  }\r\n\t  var left = $(msg).find('>left');\r\n\t  if (left.length) {\r\n\t    var sid = Strophe.getResourceFromJid(left[0].childNodes[0].textContent);\r\n\t    // var remoteVideos = document.getElementById(\"remoteVideos\");\r\n\t    // remoteVideos.removeChild(document.getElementById(sid));\r\n\t    if (window.participants.length > 0) {\r\n\t      for (var k = 0; k <= window.participants.length; k++) {\r\n\t        var p = window.participants[k];\r\n\t        if (p && p.resource === Strophe.getResourceFromJid(sid)) {\r\n\t          window.participants.splice(k, 1);\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    $(document).trigger('manis.room.someone.left', {resource: Strophe.getResourceFromJid(sid)});\r\n\t    peers[sid].close();\r\n\t    delete peers[sid];\r\n\t    console.log(\"sid>>>>\", sid);\r\n\t  }\r\n\t  console.log(\"peers>>>>>>>>\", peers);\r\n\t  return true;\r\n\t}\r\n\t\r\n\tfunction onJingle(iq) {\r\n\t  if (window.connectType != 'p2p') {\r\n\t    return;\r\n\t  }\r\n\t  var rid = $(iq).find('jingle').attr('rid');\r\n\t  var sid = $(iq).find('jingle').attr('sid');\r\n\t  var pc = getOrCreatePeerConnection(sid);\r\n\t  var action = $(iq).find('jingle').attr('action');\r\n\t  var sdp = $(iq).find('jingle').attr('sdp').split(\"||\").join(\"\\r\\n\");\r\n\t  roomId = iq.getAttribute('from');\r\n\t  console.log(\"action>>>>>>>>>>>>>>>>:\", action, \"   rid:\", rid);\r\n\t  if ('session-initiate' == action) {\r\n\t    myjid = rid;\r\n\t\r\n\t    pc.setRemoteDescription(new RTCSessionDescription({\r\n\t      type: 'offer',\r\n\t      sdp: sdp\r\n\t    }));\r\n\t    pc.createAnswer(function (sessionDescription) {\r\n\t      //console.log(\"--------------------------发送本地消息-----------------------------\", sessionDescription);\r\n\t      pc.setLocalDescription(sessionDescription);\r\n\t      var init = $iq({\r\n\t        to: roomId,\r\n\t        type: 'set'\r\n\t      }).c('jingle', {\r\n\t        xmlns: 'urn:xmpp:jingle:1',\r\n\t        action: 'session-accept',\r\n\t        sid: sid,\r\n\t        rid: rid,\r\n\t        sdp: sessionDescription.sdp.split(\"\\r\\n\").join(\"||\")\r\n\t      });\r\n\t      console.log(\"发送 createAnswer\", init.tree());\r\n\t      connection.sendIQ(init);\r\n\t    }, function (error) {\r\n\t      console.log('Failure callback: ' + error);\r\n\t    });\r\n\t  }\r\n\t  if ('session-accept' == action) {\r\n\t    pc.setRemoteDescription(new RTCSessionDescription({\r\n\t      type: 'answer',\r\n\t      sdp: sdp\r\n\t    }));\r\n\t  }\r\n\t  if ('transport-info' == action) {\r\n\t    var cand = $(iq).find('jingle').attr('sdp').split(\"||\");\r\n\t    var candidate = new RTCIceCandidate({\r\n\t      candidate: cand[0],\r\n\t      sdpMLineIndex: cand[1],\r\n\t      sdpMid: cand[2]\r\n\t    });\r\n\t    pc.addIceCandidate(candidate);\r\n\t  }\r\n\t  return true;\r\n\t}\r\n\t\r\n\tfunction getOrCreatePeerConnection(sid) {\r\n\t  var pc = peers[Strophe.getResourceFromJid(sid)];\r\n\t  if (!pc) {\r\n\t    var server = {\"iceServers\": [{\"url\": config.nat}]};\r\n\t    pc = new RTCPeerConnection(server);\r\n\t    pc.onicecandidate = function (event) {\r\n\t      if (event.candidate) {\r\n\t        var init = $iq({\r\n\t          to: roomId,\r\n\t          type: 'set'\r\n\t        }).c('jingle', {\r\n\t          xmlns: 'urn:xmpp:jingle:1',\r\n\t          action: 'transport-info',\r\n\t          sid: sid,\r\n\t          rid: myjid,\r\n\t          sdp: event.candidate.candidate + \"||\" + event.candidate.sdpMLineIndex + \"||\" + event.candidate.sdpMid\r\n\t        });\r\n\t        console.log(\"发送 event.candidate\", sid, \" myjid:\", myjid);\r\n\t        connection.sendIQ(init);\r\n\t      } else {\r\n\t        console.log(\"End of candidates.\");\r\n\t      }\r\n\t    };\r\n\t    pc.onaddstream = function (event) {\r\n\t      /*console.log(\"remote:\" + event.stream.id);\r\n\t       var remoteVideos = document.getElementById(\"remoteVideos\");\r\n\t       var newVideo = document.createElement(\"video\");\r\n\t       newVideo.setAttribute(\"id\", Strophe.getResourceFromJid(sid));\r\n\t       attachMediaStream(newVideo, event.stream);\r\n\t       remoteVideos.appendChild(newVideo);*/\r\n\t      // event.stream.src = URL.createObjectURL(event.stream);\r\n\t      var participant = {\r\n\t        info: ManisFunctions.getUserInfoByJid(sid),\r\n\t        stream: event.stream,\r\n\t        status: ManisFunctions.generateStatusNode(Strophe.getResourceFromJid(sid))\r\n\t      };\r\n\t      $(document).trigger('manis.room.someone.joined', [participant]);\r\n\t    };\r\n\t    pc.onremovestream = function (event) { // 远程视频移除\r\n\t      console.log(\"远程视频移除\", event);\r\n\t    };\r\n\t    pc.addStream(localStream);\r\n\t    peers[Strophe.getResourceFromJid(sid)] = pc;\r\n\t  }\r\n\t  // console.log(peers);\r\n\t  return pc;\r\n\t}\r\n\t\r\n\t\r\n\tfunction createOffer(pc, sid) {\r\n\t  pc.createOffer(function (sessionDescription) {\r\n\t    //console.log(\"--------------------------发送本地消息-----------------------------\", sessionDescription);\r\n\t    pc.setLocalDescription(sessionDescription);\r\n\t    var init = $iq({\r\n\t      to: roomId,\r\n\t      type: 'set'\r\n\t    }).c('jingle', {\r\n\t      xmlns: 'urn:xmpp:jingle:1',\r\n\t      action: 'session-initiate',\r\n\t      sid: sid,\r\n\t      rid: myjid,\r\n\t      sdp: sessionDescription.sdp.split(\"\\r\\n\").join(\"||\")\r\n\t    });\r\n\t    console.log(\"event.createOffer\", init.tree());\r\n\t    connection.sendIQ(init);\r\n\t  }, function (error) {\r\n\t    console.log('Failure callback: ' + error);\r\n\t  });\r\n\t}\r\n\t\r\n\t\r\n\tfunction joinP2PRoom(roomName, successCallback, errorCallback) {\r\n\t\r\n\t  ManisStream.getMedia(constraints, function (stream) {\r\n\t    var mediaStream = localStream = stream;\r\n\t    /* console.log(\"local stream id:\", stream.id);\r\n\t     var container = document.getElementById(\"localVideos\");\r\n\t     var videoElement = document.createElement('video');\r\n\t     videoElement.id = stream.id;\r\n\t     container.appendChild(videoElement);\r\n\t     attachMediaStream(videoElement, stream);*/\r\n\t    if (window.webkitMediaStream) {\r\n\t      var audioStream = new webkitMediaStream();\r\n\t      var videoStream = new webkitMediaStream();\r\n\t      var audioTracks = mediaStream.getAudioTracks();\r\n\t      var videoTracks = mediaStream.getVideoTracks();\r\n\t      for (var i = 0; i < audioTracks.length; i++) {\r\n\t        audioStream.addTrack(audioTracks[i]);\r\n\t      }\r\n\t      for (i = 0; i < videoTracks.length; i++) {\r\n\t        videoStream.addTrack(videoTracks[i]);\r\n\t      }\r\n\t      connection.jingle.localAudio = audioStream;\r\n\t      connection.jingle.localVideo = videoStream;\r\n\t    } else {\r\n\t      connection.jingle.localAudio = mediaStream;\r\n\t      connection.jingle.localVideo = mediaStream;\r\n\t    }\r\n\t\r\n\t\r\n\t    var _to = roomName + '@' + 'conference.' + manisConfg.messageServer;\r\n\t    var iq = createConferenceIq(_to);\r\n\t    connection.sendIQ(iq, function (result) {\r\n\t      connection.emuc.doJoin(_to + \"/\" + Strophe.getResourceFromJid(connection.jid));\r\n\t      var _resource = Strophe.getResourceFromJid(connection.jid);\r\n\t      // localStream.src = URL.createObjectURL(localStream);\r\n\t      var myself = {\r\n\t        info: {\r\n\t          nickname: config.nickname ? config.nickname : manisConfg.mUsername,\r\n\t          resource: _resource\r\n\t        },\r\n\t        stream: localStream,\r\n\t        status: ManisFunctions.generateStatusNode(_resource),\r\n\t        constraints: constraints\r\n\t      };\r\n\t      successCallback({\r\n\t        code: ManisResponse.code_200,\r\n\t        msg: ManisResponse.join_room_success,\r\n\t        response: myself\r\n\t      });\r\n\t    }, function (error) {\r\n\t      errorCallback({\r\n\t        code: ManisResponse.code_400,\r\n\t        msg: ManisResponse.join_room_failed,\r\n\t        error: error\r\n\t      })\r\n\t    });\r\n\t  }, function (error) {\r\n\t    if (error.name == 'DevicesNotFoundError' || error.constructor.name == 'DevicesNotFoundError'\r\n\t        || error.name == 'NotFoundError' || error.constructor.name == 'NotFoundError') {\r\n\t      errorCallback({\r\n\t        code: ManisResponse.code_404,\r\n\t        msg: ManisResponse.without_usefull_video_device\r\n\t      });\r\n\t      return;\r\n\t    }\r\n\t    if (error.name == 'OverconstrainedError' || error.constructor.name == 'OverconstrainedError') {\r\n\t      if ((error.constraint == 'width' && constraints.video.width.exact > 320) || (error.constraint == 'height' && constraints.video.height.exact > 240)) {\r\n\t        // turn down video constraint\r\n\t        if (constraints.video.height.exact == 1080) {\r\n\t          constraints.video.width.exact = 1280;\r\n\t          constraints.video.height.exact = 720;\r\n\t          joinP2PRoom(roomName, successCallback, errorCallback);\r\n\t        } else if (constraints.video.height.exact == 720) {\r\n\t          constraints.video.width.exact = 640;\r\n\t          constraints.video.height.exact = 480;\r\n\t          joinP2PRoom(roomName, successCallback, errorCallback);\r\n\t        } else if (constraints.video.height.exact == 480) {\r\n\t          constraints.video.width.exact = 320;\r\n\t          constraints.video.height.exact = 240;\r\n\t          joinP2PRoom(roomName, successCallback, errorCallback, constraints);\r\n\t        }\r\n\t      } else {\r\n\t        errorCallback({\r\n\t          code: ManisResponse.code_402,\r\n\t          msg: ManisResponse.out_of_video_device_resolution\r\n\t        });\r\n\t        return;\r\n\t      }\r\n\t    }\r\n\t  });\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param roomName\r\n\t * @returns {*}\r\n\t */\r\n\tfunction createConferenceIq(roomName) {\r\n\t  var elem = $iq({\r\n\t    to: \"p2p.\" + manisConfg.messageServer,\r\n\t    type: 'set'\r\n\t  });\r\n\t  elem.c('conference', {\r\n\t    xmlns: 'http://jitsi.org/protocol/focus',\r\n\t    room: roomName\r\n\t  });\r\n\t  elem.up();\r\n\t  return elem;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param successCallback\r\n\t * @param errorCallback\r\n\t */\r\n\tfunction p2pAudioToggleMute(successCallback, errorCallback) {\r\n\t\r\n\t  var mute = !ManisFunctions.isAudioMuted();\r\n\t\r\n\t  try {\r\n\t\r\n\t    var localAudioTracks = connection.jingle.localAudio.getAudioTracks();\r\n\t    if (localAudioTracks.length > 0) {\r\n\t      for (var idx = 0; idx < localAudioTracks.length; idx++) {\r\n\t        localAudioTracks[idx].enabled = !mute;\r\n\t      }\r\n\t    }\r\n\t    connection.emuc.addAudioInfoToPresence(mute);\r\n\t    connection.emuc.sendPresence();\r\n\t    // @TODO 发送iq消息告诉会议室静音状态\r\n\t    successCallback({\r\n\t      code: ManisResponse.code_200,\r\n\t      msg: ManisResponse.set_audio_toggle_complete,\r\n\t      response: mute\r\n\t    })\r\n\t\r\n\t  } catch (e) {\r\n\t    errorCallback({\r\n\t      code: ManisResponse.code_400,\r\n\t      msg: ManisResponse.set_audio_toggle_failed,\r\n\t      response: !mute\r\n\t    })\r\n\t  }\r\n\t\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param successCallback\r\n\t * @param errorCallback\r\n\t */\r\n\tfunction p2pVideoToggleMute(successCallback, errorCallback) {\r\n\t  var mute = !ManisFunctions.isVideoMuted();\r\n\t  try {\r\n\t    var localVideoTracks = connection.jingle.localVideo.getVideoTracks();\r\n\t\r\n\t    for (var i = 0; i < localVideoTracks.length; ++i) {\r\n\t      localVideoTracks[i].enabled = !mute;\r\n\t    }\r\n\t    connection.emuc.addAudioInfoToPresence(mute);\r\n\t    connection.emuc.sendPresence();\r\n\t    // @TODO 发送iq消息告诉会议室开关视频状态\r\n\t    successCallback({\r\n\t      code: ManisResponse.code_200,\r\n\t      msg: ManisResponse.set_video_toggle_complete,\r\n\t      response: mute\r\n\t    })\r\n\t  } catch (e) {\r\n\t    errorCallback({\r\n\t      code: ManisResponse.code_400,\r\n\t      msg: ManisResponse.set_video_toggle_failed,\r\n\t      response: !mute\r\n\t    })\r\n\t  }\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param oldStream\r\n\t * @param newStream\r\n\t * @param callback\r\n\t * @param options\r\n\t */\r\n\tfunction p2pSwitchStream(oldStream, newStream, callback, options) {\r\n\t  console.info('old stream : ', oldStream, '\\r\\n', 'new stream : ', newStream);\r\n\t  // @TODO 待完善换流和新增流\r\n\t}\r\n\t\r\n\tmodule.exports = {\r\n\t  connect: connectXMPP,\r\n\t  join: joinP2PRoom,\r\n\t  muteVideo: p2pVideoToggleMute,\r\n\t  muteAudio: p2pAudioToggleMute,\r\n\t  switchStream: p2pSwitchStream\r\n\t};\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports) {\n\n\tvar Openfire = {};\r\n\t\r\n\t\r\n\t/** Class: Openfire.Connection\r\n\t *  WebSockets Connection Manager for Openfire\r\n\t *\r\n\t *  Thie class manages an WebSockets connection\r\n\t *  to an Openfire XMPP server through the WebSockets plugin and dispatches events to the user callbacks as\r\n\t *  data arrives.  It uses the server side Openfire authentication\r\n\t *\r\n\t *  After creating a Openfire object, the user will typically\r\n\t *  call connect() with a user supplied callback to handle connection level\r\n\t *  events like authentication failure, disconnection, or connection\r\n\t *  complete.\r\n\t *\r\n\t *  To send data to the connection, use send(doc) or sendRaw(text)\r\n\t *\r\n\t *  Use xmlInput(doc) and RawInput(text) overrideable function to receive XML data coming into the\r\n\t *  connection.\r\n\t *\r\n\t *  The user will also have several event handlers defined by using\r\n\t *  addHandler() and addTimedHandler().  These will allow the user code to\r\n\t *  respond to interesting stanzas or do something periodically with the\r\n\t *  connection.  These handlers will be active once authentication is\r\n\t *  finished.\r\n\t *\r\n\t *  Create and initialize a Openfire object.\r\n\t *\r\n\t *\r\n\t *  Returns:\r\n\t *    A new Openfire object.\r\n\t */\r\n\t\r\n\tOpenfire.Connection = function (url, endPoint) {\r\n\t  if (!window.WebSocket) {\r\n\t    window.WebSocket = window.MozWebSocket;\r\n\t\r\n\t    if (!window.WebSocket) {\r\n\t      var msg = \"WebSocket not supported by this browser\";\r\n\t      alert(msg);\r\n\t      throw Error(msg);\r\n\t    }\r\n\t  }\r\n\t\r\n\t  this.host = url.indexOf(\"/\") < 0 ? url : url.split(\"/\")[2];\r\n\t  this.protocol = url.indexOf(\"/\") < 0 ? \"wss:\" : (url.split(\"/\")[0] == \"http:\") ? \"ws:\" : \"wss:\";\r\n\t  this.jid = \"\";\r\n\t  this.resource = endPoint ? endPoint : '';\r\n\t  this.streamId = null;\r\n\t\r\n\t  // handler lists\r\n\t\r\n\t  this.timedHandlers = [];\r\n\t  this.handlers = [];\r\n\t  this.removeTimeds = [];\r\n\t  this.removeHandlers = [];\r\n\t  this.addTimeds = [];\r\n\t  this.addHandlers = [];\r\n\t  this._idleTimeout = null;\r\n\t\r\n\t  this.authenticated = false;\r\n\t  this.disconnecting = false;\r\n\t  this.connected = false;\r\n\t\r\n\t  this.errors = 0;\r\n\t\r\n\t  this._uniqueId = Math.round(Math.random() * 10000);\r\n\t\r\n\t  // setup onIdle callback every 1/10th of a second\r\n\t  this._idleTimeout = setTimeout(this._onIdle.bind(this), 100);\r\n\t\r\n\t  // initialize plugins\r\n\t\r\n\t  for (var k in Strophe._connectionPlugins) {\r\n\t    if (Strophe._connectionPlugins.hasOwnProperty(k)) {\r\n\t      var ptype = Strophe._connectionPlugins[k];\r\n\t      // jslint complaints about the below line, but this is fine\r\n\t      var F = function () {\r\n\t      };\r\n\t      F.prototype = ptype;\r\n\t      this[k] = new F();\r\n\t      this[k].init(this);\r\n\t    }\r\n\t  }\r\n\t}\r\n\t\r\n\tOpenfire.Connection.prototype = {\r\n\t\r\n\t  /** Function: reset\r\n\t   *  Reset the connection.\r\n\t   *\r\n\t   *  This function should be called after a connection is disconnected\r\n\t   *  before that connection is reused.\r\n\t   */\r\n\t\r\n\t  reset: function () {\r\n\t    this.streamId = null;\r\n\t\r\n\t    this.timedHandlers = [];\r\n\t    this.handlers = [];\r\n\t    this.removeTimeds = [];\r\n\t    this.removeHandlers = [];\r\n\t    this.addTimeds = [];\r\n\t    this.addHandlers = [];\r\n\t\r\n\t    this.authenticated = false;\r\n\t    this.disconnecting = false;\r\n\t    this.connected = false;\r\n\t    this.errorCallback = null;\r\n\t\r\n\t    this.errors = 0;\r\n\t  },\r\n\t\r\n\t\r\n\t  /** Function: pause\r\n\t   *  UNUSED with websockets\r\n\t   */\r\n\t\r\n\t  pause: function () {\r\n\t    return;\r\n\t  },\r\n\t\r\n\t  /** Function: resume\r\n\t   *  UNUSED with websockets\r\n\t   */\r\n\t\r\n\t  resume: function () {\r\n\t    return;\r\n\t  },\r\n\t\r\n\t  /** Function: getUniqueId\r\n\t   *  Generate a unique ID for use in <iq/> elements.\r\n\t   *\r\n\t   *  All <iq/> stanzas are required to have unique id attributes.  This\r\n\t   *  function makes creating these easy.  Each connection instance has\r\n\t   *  a counter which starts from zero, and the value of this counter\r\n\t   *  plus a colon followed by the suffix becomes the unique id. If no\r\n\t   *  suffix is supplied, the counter is used as the unique id.\r\n\t   *\r\n\t   *  Suffixes are used to make debugging easier when reading the stream\r\n\t   *  data, and their use is recommended.  The counter resets to 0 for\r\n\t   *  every new connection for the same reason.  For connections to the\r\n\t   *  same server that authenticate the same way, all the ids should be\r\n\t   *  the same, which makes it easy to see changes.  This is useful for\r\n\t   *  automated testing as well.\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (String) suffix - A optional suffix to append to the id.\r\n\t   *\r\n\t   *  Returns:\r\n\t   *    A unique string to be used for the id attribute.\r\n\t   */\r\n\t\r\n\t  getUniqueId: function (suffix) {\r\n\t    if (typeof(suffix) == \"string\" || typeof(suffix) == \"number\") {\r\n\t      return ++this._uniqueId + \":\" + suffix;\r\n\t    } else {\r\n\t      return ++this._uniqueId + \"\";\r\n\t    }\r\n\t  },\r\n\t\r\n\t  /** Function: connect\r\n\t   *  Starts the connection process.\r\n\t   *\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (String) username - The Openfire username.\r\n\t   *    (String) pass - The user's password.\r\n\t   *    (String) resource - The user resource for this connection.\r\n\t   *    (Function) callback The connect callback function.\r\n\t   */\r\n\t\r\n\t  connect: function (jid, pass, callback,errorCallback, wait, hold, route) {\r\n\t    this.jid = jid.indexOf(\"/\") > -1 ? jid : jid + '/' + this.resource;\r\n\t    this.username = jid.indexOf(\"@\") < 0 ? jid : jid.split(\"@\")[0];\r\n\t    this.pass = pass == \"\" ? null : pass;\r\n\t    this.connect_callback = callback;\r\n\t    this.disconnecting = false;\r\n\t    this.errorCallback = errorCallback;\r\n\t    this.connected = false;\r\n\t    this.authenticated = false;\r\n\t    this.errors = 0;\r\n\t    var domain = window.manisParams.domain ? window.manisParams.domain : '';\r\n\t\r\n\t    this._changeConnectStatus(Strophe.Status.CONNECTING, null);\r\n\t    // this.url = this.protocol + \"//\" + this.host + \"/ofmeetws/server?username=\" + this.username + \"&password=\" + this.pass + \"&resource=\" + this.resource;\r\n\t    this.url = this.protocol + \"//\" + this.host + ':' + manisConfg.messageServerPort + \"/websocket?uid=\" + this.username + \"&domain=\" + domain + \"&endpoint=\" + this.resource + '&t='+window.manisConfg.currentTimeMillis;\r\n\t    // console.log('will connect to : ', this.url);\r\n\t    this._ws = new WebSocket(this.url);\r\n\t\r\n\t    this._ws.onopen = this._onopen.bind(this);\r\n\t    this._ws.onmessage = this._onmessage.bind(this);\r\n\t    this._ws.onclose = this._onclose.bind(this);\r\n\t    this._ws.onerror = this._onerror.bind(this);\r\n\t\r\n\t    window.openfireWebSocket = this;\r\n\t\r\n\t    this.jid = this.jid.indexOf(\"@\") < 0 ? this.resource + \"@\" + this.jid : this.jid;\r\n\t\r\n\t    this._changeConnectStatus(Strophe.Status.AUTHENTICATING, null);\r\n\t\r\n\t  },\r\n\t\r\n\t  _onerror: function (error) {\r\n\t    console.error(error);\r\n\t    // $(document).trigger('manis.on.unknown.error', [{code:404, msg: 'connection lost'}]);\r\n\t    if(this.errorCallback){\r\n\t      this.errorCallback(error);\r\n\t    }\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   *\r\n\t   * Private Function: _onopen websocket event handler\r\n\t   *\r\n\t   */\r\n\t\r\n\t  _onopen: function () {\r\n\t    this.connected = true;\r\n\t    this.authenticated = true;\r\n\t    this.resource = Strophe.getResourceFromJid(this.jid);\r\n\t    this.domain = Strophe.getDomainFromJid(this.jid);\r\n\t    var _this = this;\r\n\t\r\n\t    try {\r\n\t\r\n\t      this._changeConnectStatus(Strophe.Status.CONNECTED, null);\r\n\t\r\n\t    } catch (e) {\r\n\t\r\n\t      throw Error(\"User connection callback caused an exception: \" + e);\r\n\t    }\r\n\t\r\n\t    function sendPing() {\r\n\t      if (openfireWebSocket.readyState === openfireWebSocket.OPEN) {\r\n\t        openfireWebSocket.sendRaw(\"ping\");\r\n\t        // console.log('ping at: ', new Date());\r\n\t        _this.interval = setTimeout(sendPing, 10000);\r\n\t      }\r\n\t    }\r\n\t    sendPing();\r\n\t    // this.interval = setInterval(function () {\r\n\t    //   window.openfireWebSocket.sendRaw(\"ping\")\r\n\t    // }, 10000);\r\n\t  },\r\n\t\r\n\t  /** Function: attach\r\n\t   *  UNUSED, use connect again\r\n\t   */\r\n\t\r\n\t  attach: function () {\r\n\t    return\r\n\t  },\r\n\t\r\n\t  /** Function: xmlInput\r\n\t   *  User overrideable function that receives XML data coming into the\r\n\t   *  connection.\r\n\t   *\r\n\t   *  The default function does nothing.  User code can override this with\r\n\t   *  > Openfire.xmlInput = function (elem) {\r\n\t     *  >   (user code)\r\n\t     *  > };\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (XMLElement) elem - The XML data received by the connection.\r\n\t   */\r\n\t\r\n\t  xmlInput: function (elem) {\r\n\t    return;\r\n\t  },\r\n\t\r\n\t  /** Function: xmlOutput\r\n\t   *  User overrideable function that receives XML data sent to the\r\n\t   *  connection.\r\n\t   *\r\n\t   *  The default function does nothing.  User code can override this with\r\n\t   *  > Openfire.xmlOutput = function (elem) {\r\n\t     *  >   (user code)\r\n\t     *  > };\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (XMLElement) elem - The XMLdata sent by the connection.\r\n\t   */\r\n\t\r\n\t  xmlOutput: function (elem) {\r\n\t    return;\r\n\t  },\r\n\t\r\n\t  /** Function: rawInput\r\n\t   *  User overrideable function that receives raw data coming into the\r\n\t   *  connection.\r\n\t   *\r\n\t   *  The default function does nothing.  User code can override this with\r\n\t   *  > Openfire.rawInput = function (data) {\r\n\t     *  >   (user code)\r\n\t     *  > };\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (String) data - The data received by the connection.\r\n\t   */\r\n\t\r\n\t  rawInput: function (data) {\r\n\t    return;\r\n\t  },\r\n\t\r\n\t  /** Function: rawOutput\r\n\t   *  User overrideable function that receives raw data sent to the\r\n\t   *  connection.\r\n\t   *\r\n\t   *  The default function does nothing.  User code can override this with\r\n\t   *  > Openfire.rawOutput = function (data) {\r\n\t     *  >   (user code)\r\n\t     *  > };\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (String) data - The data sent by the connection.\r\n\t   */\r\n\t\r\n\t  rawOutput: function (data) {\r\n\t    return;\r\n\t  },\r\n\t\r\n\t\r\n\t  /** Function: sendRaw\r\n\t   *  Send a stanza in raw XML text.\r\n\t   *\r\n\t   *  This function is called to push data onto the send queue to\r\n\t   *  go out over the wire.  Whenever a request is sent to the BOSH\r\n\t   *  server, all pending data is sent and the queue is flushed.\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    xml - The stanza text XML to send.\r\n\t   */\r\n\t\r\n\t  sendRaw: function (xml) {\r\n\t\r\n\t    if (!this.connected || this._ws == null) {\r\n\t      throw Error(\"Not connected, cannot send packets.\");\r\n\t    }\r\n\t\r\n\t    if (xml != \"ping\") {\r\n\t      this.xmlOutput(this._textToXML(xml));\r\n\t      this.rawOutput(xml);\r\n\t    }\r\n\t\r\n\t    this.doSend(xml);\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   * do send\r\n\t   * @param xml\r\n\t   */\r\n\t  doSend: function (xml) {\r\n\t    var _this = this;\r\n\t    try{\r\n\t      if(config.debug == true){\r\n\t        console.log('Will send content: \\n', xml);\r\n\t      }\r\n\t      _this._ws.send(xml);\r\n\t    }catch (e){\r\n\t      console.warn('send failed, try again after 200 ms: ', e);\r\n\t      setTimeout(function () {\r\n\t        _this.doSend(xml);\r\n\t      }, 1000);\r\n\t    }\r\n\t  },\r\n\t\r\n\t  /** Function: send\r\n\t   *  Send a stanza.\r\n\t   *\r\n\t   *  This function is called to push data onto the send queue to\r\n\t   *  go out over the wire.  Whenever a request is sent to the BOSH\r\n\t   *  server, all pending data is sent and the queue is flushed.\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (XMLElement |\r\n\t   *     [XMLElement] |\r\n\t   *     Strophe.Builder) elem - The stanza to send.\r\n\t   */\r\n\t\r\n\t  send: function (elem) {\r\n\t    /**\r\n\t     @static\r\n\t     @type {number}\r\n\t     @const\r\n\t\r\n\t    WebSocket.OPEN = 1;\r\n\t\r\n\t     @static\r\n\t     @type {number}\r\n\t     @const\r\n\t\r\n\t    WebSocket.CLOSING = 2;\r\n\t\r\n\t     @static\r\n\t     @type {number}\r\n\t     @const\r\n\t\r\n\t    WebSocket.CLOSED = 3;\r\n\t    */\r\n\t    if (this._ws == null || this._ws.readyState >  WebSocket.OPEN) {\r\n\t      // throw Error(\"Not connected, cannot send packets.\");\r\n\t      console.warn(\"Not connected, cannot send packets.\");\r\n\t    }\r\n\t\r\n\t    var toSend = \"\";\r\n\t\r\n\t    if (elem === null) {\r\n\t      return;\r\n\t    }\r\n\t\r\n\t    if (typeof(elem.sort) === \"function\") {\r\n\t      // console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send sort before >>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n\t      //   elem ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n\t      for (var i = 0; i < elem.length; i++) {\r\n\t        toSend += Strophe.serialize(elem[i]);\r\n\t        this.xmlOutput(elem[i]);\r\n\t      }\r\n\t\r\n\t    } else if (typeof(elem.tree) === \"function\") {\r\n\t      // console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send tree before>>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n\t      //   elem ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n\t      elem.attrs({from: connection.jid});\r\n\t\r\n\t      // console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send tree after>>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n\t      //   elem ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n\t\r\n\t      toSend = Strophe.serialize(elem.tree());\r\n\t      this.xmlOutput(elem.tree());\r\n\t\r\n\t    } else {\r\n\t\r\n\t      //   console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send default before>>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n\t      //     elem ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n\t      elem.setAttribute('from', connection.jid);\r\n\t      // console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send default after>>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n\t      //   elem ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n\t      toSend = Strophe.serialize(elem);\r\n\t      this.xmlOutput(elem);\r\n\t    }\r\n\t\r\n\t    this.rawOutput(toSend);\r\n\t    if(config.debug == true){\r\n\t      console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send >>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n\t        toSend ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n\t    }\r\n\t    this.doSend(toSend);\r\n\t  },\r\n\t\r\n\t  /** Function: flush\r\n\t   *  UNUSED\r\n\t   */\r\n\t\r\n\t  flush: function () {\r\n\t    return\r\n\t  },\r\n\t\r\n\t\r\n\t  /** Function: sendIQ\r\n\t   *  Helper function to send IQ stanzas.\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (XMLElement) elem - The stanza to send.\r\n\t   *    (Function) callback - The callback function for a successful request.\r\n\t   *    (Function) errback - The callback function for a failed or timed\r\n\t   *      out request.  On timeout, the stanza will be null.\r\n\t   *    (Integer) timeout - The time specified in milliseconds for a\r\n\t   *      timeout to occur.\r\n\t   *\r\n\t   *  Returns:\r\n\t   *    The id used to send the IQ.\r\n\t   */\r\n\t\r\n\t  sendIQ: function (elem, callback, errback, timeout) {\r\n\t    var timeoutHandler = null;\r\n\t    var that = this;\r\n\t\r\n\t    if (typeof(elem.tree) === \"function\") {\r\n\t      elem = elem.tree();\r\n\t    }\r\n\t    elem.setAttribute(\"from\", connection.jid);\r\n\t    var id = elem.getAttribute('id');\r\n\t\r\n\t    // inject id if not found\r\n\t\r\n\t    if (!id) {\r\n\t      id = this.getUniqueId(\"sendIQ\");\r\n\t      elem.setAttribute(\"id\", id);\r\n\t    }\r\n\t\r\n\t    var handler = this.addHandler(function (stanza) {\r\n\t      // remove timeout handler if there is one\r\n\t\r\n\t      if (timeoutHandler) {\r\n\t        that.deleteTimedHandler(timeoutHandler);\r\n\t      }\r\n\t\r\n\t      var iqtype = stanza.getAttribute('type');\r\n\t\r\n\t      if (iqtype == 'result') {\r\n\t        if (callback) {\r\n\t          callback(stanza);\r\n\t        }\r\n\t\r\n\t      } else if (iqtype == 'get') {\r\n\t\r\n\t      } else if (iqtype == 'error') {\r\n\t        if (errback) {\r\n\t          errback(stanza);\r\n\t        }\r\n\t      } else {\r\n\t        throw {\r\n\t          name: \"StropheError\",\r\n\t          message: \"Got bad IQ type of \" + iqtype\r\n\t        };\r\n\t      }\r\n\t    }, null, 'iq', null, id);\r\n\t\r\n\t    // if timeout specified, setup timeout handler.\r\n\t\r\n\t    if (timeout) {\r\n\t      timeoutHandler = this.addTimedHandler(timeout, function () {\r\n\t        // get rid of normal handler\r\n\t        that.deleteHandler(handler);\r\n\t\r\n\t        // call errback on timeout with null stanza\r\n\t        if (errback) {\r\n\t          errback(null);\r\n\t        }\r\n\t        return false;\r\n\t      });\r\n\t    }\r\n\t\r\n\t    this.send(elem);\r\n\t\r\n\t    return id;\r\n\t  },\r\n\t\r\n\t  /** Function: addTimedHandler\r\n\t   *  Add a timed handler to the connection.\r\n\t   *\r\n\t   *  This function adds a timed handler.  The provided handler will\r\n\t   *  be called every period milliseconds until it returns false,\r\n\t   *  the connection is terminated, or the handler is removed.  Handlers\r\n\t   *  that wish to continue being invoked should return true.\r\n\t   *\r\n\t   *  Because of method binding it is necessary to save the result of\r\n\t   *  this function if you wish to remove a handler with\r\n\t   *  deleteTimedHandler().\r\n\t   *\r\n\t   *  Note that user handlers are not active until authentication is\r\n\t   *  successful.\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (Integer) period - The period of the handler.\r\n\t   *    (Function) handler - The callback function.\r\n\t   *\r\n\t   *  Returns:\r\n\t   *    A reference to the handler that can be used to remove it.\r\n\t   */\r\n\t\r\n\t  addTimedHandler: function (period, handler) {\r\n\t    var thand = new Strophe.TimedHandler(period, handler);\r\n\t    this.addTimeds.push(thand);\r\n\t    return thand;\r\n\t  },\r\n\t\r\n\t\r\n\t  /** Function: deleteTimedHandler\r\n\t   *  Delete a timed handler for a connection.\r\n\t   *\r\n\t   *  This function removes a timed handler from the connection.  The\r\n\t   *  handRef parameter is *not* the function passed to addTimedHandler(),\r\n\t   *  but is the reference returned from addTimedHandler().\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (Strophe.TimedHandler) handRef - The handler reference.\r\n\t   */\r\n\t\r\n\t  deleteTimedHandler: function (handRef) {\r\n\t    // this must be done in the Idle loop so that we don't change\r\n\t    // the handlers during iteration\r\n\t\r\n\t    this.removeTimeds.push(handRef);\r\n\t  },\r\n\t\r\n\t  /** Function: addHandler\r\n\t   *  Add a stanza handler for the connection.\r\n\t   *\r\n\t   *  This function adds a stanza handler to the connection.  The\r\n\t   *  handler callback will be called for any stanza that matches\r\n\t   *  the parameters.  Note that if multiple parameters are supplied,\r\n\t   *  they must all match for the handler to be invoked.\r\n\t   *\r\n\t   *  The handler will receive the stanza that triggered it as its argument.\r\n\t   *  The handler should return true if it is to be invoked again;\r\n\t   *  returning false will remove the handler after it returns.\r\n\t   *\r\n\t   *  As a convenience, the ns parameters applies to the top level element\r\n\t   *  and also any of its immediate children.  This is primarily to make\r\n\t   *  matching /iq/query elements easy.\r\n\t   *\r\n\t   *  The options argument contains handler matching flags that affect how\r\n\t   *  matches are determined. Currently the only flag is matchBare (a\r\n\t   *  boolean). When matchBare is true, the from parameter and the from\r\n\t   *  attribute on the stanza will be matched as bare JIDs instead of\r\n\t   *  full JIDs. To use this, pass {matchBare: true} as the value of\r\n\t   *  options. The default value for matchBare is false.\r\n\t   *\r\n\t   *  The return value should be saved if you wish to remove the handler\r\n\t   *  with deleteHandler().\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (Function) handler - The user callback.\r\n\t   *    (String) ns - The namespace to match.\r\n\t   *    (String) name - The stanza name to match.\r\n\t   *    (String) type - The stanza type attribute to match.\r\n\t   *    (String) id - The stanza id attribute to match.\r\n\t   *    (String) from - The stanza from attribute to match.\r\n\t   *    (String) options - The handler options\r\n\t   *\r\n\t   *  Returns:\r\n\t   *    A reference to the handler that can be used to remove it.\r\n\t   */\r\n\t\r\n\t  addHandler: function (handler, ns, name, type, id, from, options) {\r\n\t    var hand = new Strophe.Handler(handler, ns, name, type, id, from, options);\r\n\t    this.addHandlers.push(hand);\r\n\t    return hand;\r\n\t  },\r\n\t\r\n\t  /** Function: deleteHandler\r\n\t   *  Delete a stanza handler for a connection.\r\n\t   *\r\n\t   *  This function removes a stanza handler from the connection.  The\r\n\t   *  handRef parameter is *not* the function passed to addHandler(),\r\n\t   *  but is the reference returned from addHandler().\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (Strophe.Handler) handRef - The handler reference.\r\n\t   */\r\n\t\r\n\t  deleteHandler: function (handRef) {\r\n\t    // this must be done in the Idle loop so that we don't change\r\n\t    // the handlers during iteration\r\n\t\r\n\t    this.removeHandlers.push(handRef);\r\n\t  },\r\n\t\r\n\t  /** Function: disconnect\r\n\t   *  Start the graceful disconnection process.\r\n\t   *\r\n\t   *  This function starts the disconnection process.  This process starts\r\n\t   *  by sending unavailable presence and sending BOSH body of type\r\n\t   *  terminate.  A timeout handler makes sure that disconnection happens\r\n\t   *  even if the BOSH server does not respond.\r\n\t   *\r\n\t   *  The user supplied connection callback will be notified of the\r\n\t   *  progress as this process happens.\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (String) reason - The reason the disconnect is occuring.\r\n\t   */\r\n\t\r\n\t  disconnect: function (reason) {\r\n\t\r\n\t    if (!this.connected || this._ws == null) {\r\n\t      return;\r\n\t    }\r\n\t\r\n\t    this._changeConnectStatus(Strophe.Status.DISCONNECTING, reason);\r\n\t    Strophe.info(\"Disconnect was called because: \" + reason);\r\n\t\r\n\t    this._ws.close();\r\n\t\r\n\t  },\r\n\t\r\n\t  /** PrivateFunction: _onDisconnectTimeout\r\n\t   *  _Private_ timeout handler for handling non-graceful disconnection.\r\n\t   *\r\n\t   *  If the graceful disconnect process does not complete within the\r\n\t   *  time allotted, this handler finishes the disconnect anyway.\r\n\t   *\r\n\t   *  Returns:\r\n\t   *    false to remove the handler.\r\n\t   */\r\n\t\r\n\t  _onDisconnectTimeout: function () {\r\n\t    Strophe.info(\"_onDisconnectTimeout was called\");\r\n\t\r\n\t    this._doDisconnect();\r\n\t\r\n\t    return false;\r\n\t  },\r\n\t\r\n\t  /** PrivateFunction: _doDisconnect\r\n\t   *  _Private_ function to disconnect.\r\n\t   *\r\n\t   *  This is the last piece of the disconnection logic.  This resets the\r\n\t   *  connection and alerts the user's connection callback.\r\n\t   */\r\n\t\r\n\t  _doDisconnect: function () {\r\n\t    Strophe.info(\"_doDisconnect was called\");\r\n\t    this._onclose();\r\n\t  },\r\n\t\r\n\t  /** PrivateFunction: _changeConnectStatus\r\n\t   *  _Private_ helper function that makes sure plugins and the user's\r\n\t   *  callback are notified of connection status changes.\r\n\t   *\r\n\t   *  Parameters:\r\n\t   *    (Integer) status - the new connection status, one of the values\r\n\t   *      in Strophe.Status\r\n\t   *    (String) condition - the error condition or null\r\n\t   */\r\n\t\r\n\t  _changeConnectStatus: function (status, condition) {\r\n\t    // notify all plugins listening for status changes\r\n\t\r\n\t    for (var k in Strophe._connectionPlugins) {\r\n\t      if (Strophe._connectionPlugins.hasOwnProperty(k)) {\r\n\t        var plugin = this[k];\r\n\t\r\n\t        if (plugin.statusChanged) {\r\n\t          try {\r\n\t            plugin.statusChanged(status, condition);\r\n\t          } catch (err) {\r\n\t            Strophe.error(\"\" + k + \" plugin caused an exception changing status: \" + err);\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t\r\n\t    // notify the user's callback\r\n\t\r\n\t    if (typeof this.connect_callback == 'function') {\r\n\t      try {\r\n\t        this.connect_callback(status, condition);\r\n\t      } catch (e) {\r\n\t        Strophe.error(\"User connection callback caused an exception: \" + e);\r\n\t      }\r\n\t    }\r\n\t  },\r\n\t\r\n\t\r\n\t  /**\r\n\t   *\r\n\t   * Private Function: _onclose websocket event handler\r\n\t   *\r\n\t   */\r\n\t\r\n\t  _onclose: function () {\r\n\t    Strophe.info(\"websocket closed\");\r\n\t    console.log('_onclose - disconnected');\r\n\t    // clearInterval(this.interval);\r\n\t    clearTimeout(this.interval);\r\n\t\r\n\t    this.authenticated = false;\r\n\t    this.disconnecting = false;\r\n\t    this.streamId = null;\r\n\t\r\n\t    // tell the parent we disconnected\r\n\t\r\n\t    this._changeConnectStatus(Strophe.Status.DISCONNECTED, null);\r\n\t    this.connected = false;\r\n\t\r\n\t    // delete handlers\r\n\t\r\n\t    this.handlers = [];\r\n\t    this.timedHandlers = [];\r\n\t    this.removeTimeds = [];\r\n\t    this.removeHandlers = [];\r\n\t    this.addTimeds = [];\r\n\t    this.addHandlers = [];\r\n\t\r\n\t    if (this._ws.readyState != this._ws.CLOSED) {\r\n\t      this._ws.close();\r\n\t    }\r\n\t    window.exitCode = 1010;\r\n\t    $(document).trigger('manis.on.unknown.error', [{code:404, msg: 'connection lost'}]);\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   *\r\n\t   * Private Function: _onmessage websocket event handler\r\n\t   *\r\n\t   */\r\n\t\r\n\t  _onmessage: function (packet) {\r\n\t    var elem;\r\n\t    if(packet.type == 'message' && packet.data == 'pong'){\r\n\t      //on heart bit response, do nothing\r\n\t      return ;\r\n\t    }\r\n\t    try {\r\n\t      elem = this._textToXML(packet.data);\r\n\t      if(config.debug == true){\r\n\t        console.warn(\"<<<<<<<<<<<<<<<<<<<<<<<<<<<<< on message <<<<<<<<<<<<<<<<<<< \\r\\n \" ,\r\n\t          elem,\" \\r\\n <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< \\r\\n \", packet);\r\n\t      }\r\n\t    } catch (e) {\r\n\t\r\n\t      if (e != \"parsererror\") {\r\n\t        throw e;\r\n\t      }\r\n\t      this.disconnect(\"strophe-parsererror\");\r\n\t    }\r\n\t\r\n\t    if (elem === null) {\r\n\t      return;\r\n\t    }\r\n\t\r\n\t    this.xmlInput(elem);\r\n\t    this.rawInput(packet.data);\r\n\t\r\n\t    // remove handlers scheduled for deletion\r\n\t\r\n\t    var i, hand;\r\n\t\r\n\t    while (this.removeHandlers.length > 0) {\r\n\t      hand = this.removeHandlers.pop();\r\n\t      i = this.handlers.indexOf(hand);\r\n\t\r\n\t      if (i >= 0) {\r\n\t        this.handlers.splice(i, 1);\r\n\t      }\r\n\t    }\r\n\t\r\n\t    // add handlers scheduled for addition\r\n\t\r\n\t    while (this.addHandlers.length > 0) {\r\n\t      this.handlers.push(this.addHandlers.pop());\r\n\t    }\r\n\t\r\n\t    // send each incoming stanza through the handler chain\r\n\t\r\n\t    var i, newList;\r\n\t    newList = this.handlers;\r\n\t    this.handlers = [];\r\n\t\r\n\t    for (i = 0; i < newList.length; i++) {\r\n\t      var hand = newList[i];\r\n\t      // console.log('===========', hand.name, hand.ns);\r\n\t\r\n\t      if (hand.isMatch(elem) && (this.authenticated || !hand.user)) {\r\n\t        if (hand.run(elem)) {\r\n\t          this.handlers.push(hand);\r\n\t        }\r\n\t\r\n\t      } else {\r\n\t        this.handlers.push(hand);\r\n\t      }\r\n\t    }\r\n\t\r\n\t    // handle conference leave iq\r\n\t    this._handleConferenceLeaveIq(packet);\r\n\t  },\r\n\t\r\n\t\r\n\t  _handleConferenceLeaveIq: function (packet) {\r\n\t    var element = packet.data;\r\n\t    var from = $(element).attr('from') || null;\r\n\t    var conferenceNode = $(element).find('>conference[xmlns=\"http://jitsi.org/protocol/focus\"]') || null;\r\n\t    if(conferenceNode){\r\n\t      var type = conferenceNode.attr('type');\r\n\t      if(type == 'leave'){\r\n\t        connection.emuc.onParticipantLeave(from);\r\n\t        connection.ofmuc.onParticipantLeave(from);\r\n\t        $(document).trigger('left.muc', [from]);\r\n\t      }else if(type == 'kickout'){\r\n\t        var jid = conferenceNode.attr('kickout');\r\n\t        if(Strophe.getResourceFromJid(connection.jid) == Strophe.getResourceFromJid(jid)){\r\n\t          // if share screen, stop it first\r\n\t          if(window.isUsingScreenStream == true){\r\n\t            $(document).trigger('manis.been.stop.screen.share');\r\n\t          }\r\n\t          // console.log('11111111111144444444444=======handleEjectFrom============', from)\r\n\t          $(document).trigger('oneject.muc', [from]);\r\n\t        }else{\r\n\t          $(document).trigger('left.muc', [jid]);\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t  },\r\n\t\r\n\t  /**\r\n\t   *\r\n\t   * Private Function: _textToXML convert text to DOM Document object\r\n\t   *\r\n\t   */\r\n\t\r\n\t  _textToXML: function (text) {\r\n\t\r\n\t    var doc = null;\r\n\t\r\n\t    if (window['DOMParser']) {\r\n\t      var parser = new DOMParser();\r\n\t      doc = parser.parseFromString(text, 'text/xml');\r\n\t\r\n\t    } else if (window['ActiveXObject']) {\r\n\t      var doc = new ActiveXObject(\"MSXML2.DOMDocument\");\r\n\t      doc.async = false;\r\n\t      doc.loadXML(text);\r\n\t\r\n\t    } else {\r\n\t      throw Error('No DOMParser object found.');\r\n\t    }\r\n\t\r\n\t    return doc.firstChild;\r\n\t  },\r\n\t\r\n\t  /** PrivateFunction: _onIdle\r\n\t   *  _Private_ handler to process events during idle cycle.\r\n\t   *\r\n\t   *  This handler is called every 100ms to fire timed handlers that\r\n\t   *  are ready and keep poll requests going.\r\n\t   */\r\n\t\r\n\t  _onIdle: function () {\r\n\t    var i, thand, since, newList;\r\n\t\r\n\t    // remove timed handlers that have been scheduled for deletion\r\n\t\r\n\t    while (this.removeTimeds.length > 0) {\r\n\t      thand = this.removeTimeds.pop();\r\n\t      i = this.timedHandlers.indexOf(thand);\r\n\t      if (i >= 0) {\r\n\t        this.timedHandlers.splice(i, 1);\r\n\t      }\r\n\t    }\r\n\t\r\n\t    // add timed handlers scheduled for addition\r\n\t\r\n\t    while (this.addTimeds.length > 0) {\r\n\t      this.timedHandlers.push(this.addTimeds.pop());\r\n\t    }\r\n\t\r\n\t    // call ready timed handlers\r\n\t    var now = new Date().getTime();\r\n\t    newList = [];\r\n\t\r\n\t    for (i = 0; i < this.timedHandlers.length; i++) {\r\n\t      thand = this.timedHandlers[i];\r\n\t\r\n\t      if (this.authenticated || !thand.user) {\r\n\t        since = thand.lastCalled + thand.period;\r\n\t\r\n\t        if (since - now <= 0) {\r\n\t          if (thand.run()) {\r\n\t            newList.push(thand);\r\n\t          }\r\n\t        } else {\r\n\t          newList.push(thand);\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t\r\n\t    this.timedHandlers = newList;\r\n\t\r\n\t    // reactivate the timer\r\n\t\r\n\t    clearTimeout(this._idleTimeout);\r\n\t    this._idleTimeout = setTimeout(this._onIdle.bind(this), 100);\r\n\t  }\r\n\t}\r\n\t\r\n\texports = module.exports = Openfire;\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar JingleSession = __webpack_require__(35);\r\n\t\r\n\t/* jshint -W117 */\r\n\tStrophe.addConnectionPlugin('jingle', {\r\n\t  connection: null,\r\n\t  sessions: {},\r\n\t  jid2session: {},\r\n\t  ice_config: (window.config !== undefined && window.config.nat !== undefined) ? {'iceServers': [{'url': window.config.nat}]} : {'iceServers': [{'url': 'stun:stun.l.google.com:19302'}]},\r\n\t  pc_constraints: {},\r\n\t  media_constraints: {\r\n\t    mandatory: {\r\n\t      'OfferToReceiveAudio': true,\r\n\t      'OfferToReceiveVideo': true\r\n\t    }\r\n\t    // MozDontOfferDataChannel: true when this is firefox\r\n\t  },\r\n\t  localAudio: null,\r\n\t  localVideo: null,\r\n\t  localScreen: null,\r\n\t    localScreenSsrc : null,\r\n\t\r\n\t  init: function (conn) {\r\n\t    this.connection = conn;\r\n\t    if (this.connection.disco) {\r\n\t      // http://xmpp.org/extensions/xep-0167.html#support\r\n\t      // http://xmpp.org/extensions/xep-0176.html#support\r\n\t      this.connection.disco.addFeature('urn:xmpp:jingle:1');\r\n\t      this.connection.disco.addFeature('urn:xmpp:jingle:apps:rtp:1');\r\n\t      this.connection.disco.addFeature('urn:xmpp:jingle:transports:ice-udp:1');\r\n\t      this.connection.disco.addFeature('urn:xmpp:jingle:apps:rtp:audio');\r\n\t      this.connection.disco.addFeature('urn:xmpp:jingle:apps:rtp:video');\r\n\t\r\n\t\r\n\t      // this is dealt with by SDP O/A so we don't need to annouce this\r\n\t      //this.connection.disco.addFeature('urn:xmpp:jingle:apps:rtp:rtcp-fb:0'); // XEP-0293\r\n\t      //this.connection.disco.addFeature('urn:xmpp:jingle:apps:rtp:rtp-hdrext:0'); // XEP-0294\r\n\t      if (config.useRtcpMux) {\r\n\t        this.connection.disco.addFeature('urn:ietf:rfc:5761'); // rtcp-mux\r\n\t      }\r\n\t      if (config.useBundle) {\r\n\t        this.connection.disco.addFeature('urn:ietf:rfc:5888'); // a=group, e.g. bundle\r\n\t      }\r\n\t      //this.connection.disco.addFeature('urn:ietf:rfc:5576'); // a=ssrc\r\n\t    }\r\n\t    this.connection.addHandler(this.onJingle.bind(this), 'urn:xmpp:jingle:1', 'iq', 'set', null, null);\r\n\t  },\r\n\t  onJingle: function (iq) {\r\n\t    if (window.connectType == 'p2p') {\r\n\t      return;\r\n\t    }\r\n\t    var sid = $(iq).find('jingle').attr('sid');\r\n\t    var action = $(iq).find('jingle').attr('action');\r\n\t    var fromJid = iq.getAttribute('from');\r\n\t    // send ack first\r\n\t    var ack = $iq({\r\n\t      type: 'result',\r\n\t      to: fromJid,\r\n\t      id: iq.getAttribute('id')\r\n\t    });\r\n\t    console.log('====on jingle ' + action + ' from ' + fromJid, iq, sid, this.sessions);\r\n\t    var sess = this.sessions[sid];\r\n\t    if ('session-initiate' != action) {\r\n\t      if (sess === null) {\r\n\t        ack.type = 'error';\r\n\t        ack.c('error', {type: 'cancel'})\r\n\t          .c('item-not-found', {xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'}).up()\r\n\t          .c('unknown-session', {xmlns: 'urn:xmpp:jingle:errors:1'});\r\n\t        this.connection.send(ack);\r\n\t        return true;\r\n\t      }\r\n\t      // compare from to sess.peerjid (bare jid comparison for later compat with message-mode)\r\n\t      // local jid is not checked\r\n\t      if (Strophe.getBareJidFromJid(fromJid) != Strophe.getBareJidFromJid(sess.peerjid)) {\r\n\t        console.warn('jid mismatch for session id', sid, fromJid, sess.peerjid);\r\n\t        ack.type = 'error';\r\n\t        ack.c('error', {type: 'cancel'})\r\n\t          .c('item-not-found', {xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'}).up()\r\n\t          .c('unknown-session', {xmlns: 'urn:xmpp:jingle:errors:1'});\r\n\t        this.connection.send(ack);\r\n\t        return true;\r\n\t      }\r\n\t    } else if (sess !== undefined) {\r\n\t      // existing session with same session id\r\n\t      // this might be out-of-order if the sess.peerjid is the same as from\r\n\t      ack.type = 'error';\r\n\t      ack.c('error', {type: 'cancel'})\r\n\t        .c('service-unavailable', {xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'}).up();\r\n\t      console.warn('duplicate session id', sid);\r\n\t      this.connection.send(ack);\r\n\t      return true;\r\n\t    }\r\n\t    // FIXME: check for a defined action\r\n\t    this.connection.send(ack);\r\n\t    // see http://xmpp.org/extensions/xep-0166.html#concepts-session\r\n\t    switch (action) {\r\n\t      case 'session-initiate':\r\n\t        sess = new JingleSession($(iq).attr('to'), $(iq).find('jingle').attr('sid'), this.connection);\r\n\t        // configure session\r\n\t\r\n\t        //in firefox we have only one stream object\r\n\t        if (this.localAudio != this.localVideo) {\r\n\t          sess.localStreams.push(this.localAudio);\r\n\t        }\r\n\t        if (this.localVideo) {\r\n\t          sess.localStreams.push(this.localVideo);\r\n\t        }\r\n\t        sess.media_constraints = this.media_constraints;\r\n\t        sess.pc_constraints = this.pc_constraints;\r\n\t        sess.ice_config = this.ice_config;\r\n\t\r\n\t        sess.initiate(fromJid, false);\r\n\t        // FIXME: setRemoteDescription should only be done when this call is to be accepted\r\n\t        sess.setRemoteDescription($(iq).find('>jingle'), 'offer');\r\n\t\r\n\t        this.sessions[sess.sid] = sess;\r\n\t        this.jid2session[sess.peerjid] = sess;\r\n\t\r\n\t        // the callback should either\r\n\t        // .sendAnswer and .accept\r\n\t        // or .sendTerminate -- not necessarily synchronus\r\n\t        $(document).trigger('callincoming.jingle', [sess.sid]);\r\n\t        break;\r\n\t      case 'session-accept':\r\n\t        sess.setRemoteDescription($(iq).find('>jingle'), 'answer');\r\n\t        sess.accept();\r\n\t        $(document).trigger('callaccepted.jingle', [sess.sid]);\r\n\t        break;\r\n\t      case 'session-terminate':\r\n\t        // If this is not the focus sending the terminate, we have\r\n\t        // nothing more to do here.\r\n\t        if (Object.keys(this.sessions).length < 1\r\n\t          || !(this.sessions[Object.keys(this.sessions)[0]] instanceof JingleSession)) {\r\n\t          break;\r\n\t        }\r\n\t        console.log('terminating...', sess.sid);\r\n\t        sess.terminate();\r\n\t        this.terminate(sess.sid);\r\n\t        if ($(iq).find('>jingle>reason').length) {\r\n\t          $(document).trigger('callterminated.jingle', [\r\n\t            sess.sid,\r\n\t            sess.peerjid,\r\n\t            $(iq).find('>jingle>reason>:first')[0].tagName,\r\n\t            $(iq).find('>jingle>reason>text').text()\r\n\t          ]);\r\n\t        } else {\r\n\t          $(document).trigger('callterminated.jingle',\r\n\t            [sess.sid, sess.peerjid]);\r\n\t        }\r\n\t        break;\r\n\t      case 'transport-info':\r\n\t        sess.addIceCandidate($(iq).find('>jingle>content'));\r\n\t        break;\r\n\t      case 'session-info':\r\n\t        var affected;\r\n\t        if ($(iq).find('>jingle>ringing[xmlns=\"urn:xmpp:jingle:apps:rtp:info:1\"]').length) {\r\n\t          $(document).trigger('ringing.jingle', [sess.sid]);\r\n\t        } else if ($(iq).find('>jingle>mute[xmlns=\"urn:xmpp:jingle:apps:rtp:info:1\"]').length) {\r\n\t          affected = $(iq).find('>jingle>mute[xmlns=\"urn:xmpp:jingle:apps:rtp:info:1\"]').attr('name');\r\n\t          $(document).trigger('mute.jingle', [sess.sid, affected]);\r\n\t        } else if ($(iq).find('>jingle>unmute[xmlns=\"urn:xmpp:jingle:apps:rtp:info:1\"]').length) {\r\n\t          affected = $(iq).find('>jingle>unmute[xmlns=\"urn:xmpp:jingle:apps:rtp:info:1\"]').attr('name');\r\n\t          $(document).trigger('unmute.jingle', [sess.sid, affected]);\r\n\t        }\r\n\t        break;\r\n\t      case 'addsource': // FIXME: proprietary, un-jingleish\r\n\t      case 'source-add': // FIXME: proprietary\r\n\t        // sess.addSource($(iq).find('>jingle'), fromJid);\r\n\t        sess.setRemoteDescription($(iq).find('>jingle'), 'offer');\r\n\t        break;\r\n\t      case 'removesource': // FIXME: proprietary, un-jingleish\r\n\t      case 'source-remove': // FIXME: proprietary\r\n\t        // sess.removeSource($(iq).find('>jingle>content'), fromJid);\r\n\t        sess.setRemoteDescription($(iq).find('>jingle'), 'offer');\r\n\t        break;\r\n\t      default:\r\n\t        console.warn('jingle action not implemented', action);\r\n\t        break;\r\n\t    }\r\n\t    return true;\r\n\t  },\r\n\t  initiate: function (peerjid, myjid) { // initiate a new jinglesession to peerjid\r\n\t    var sess = new JingleSession(myjid || this.connection.jid,\r\n\t      Math.random().toString(36).substr(2, 12), // random string\r\n\t      this.connection);\r\n\t    // configure session\r\n\t\r\n\t    //in firefox we have only one stream\r\n\t    if (this.localAudio != this.localVideo) {\r\n\t      sess.localStreams.push(this.localAudio);\r\n\t    }\r\n\t    if (this.localVideo) {\r\n\t      sess.localStreams.push(this.localVideo);\r\n\t    }\r\n\t    sess.media_constraints = this.media_constraints;\r\n\t    sess.pc_constraints = this.pc_constraints;\r\n\t    sess.ice_config = this.ice_config;\r\n\t\r\n\t    sess.initiate(peerjid, true);\r\n\t    this.sessions[sess.sid] = sess;\r\n\t    this.jid2session[sess.peerjid] = sess;\r\n\t    sess.sendOffer();\r\n\t    return sess;\r\n\t  },\r\n\t  terminate: function (sid, reason, text) { // terminate by sessionid (or all sessions)\r\n\t    if (sid === null || sid === undefined) {\r\n\t      for (sid in this.sessions) {\r\n\t        if (this.sessions[sid].state != 'ended') {\r\n\t          this.sessions[sid].sendTerminate(reason || (!this.sessions[sid].active()) ? 'cancel' : null, text);\r\n\t          this.sessions[sid].terminate();\r\n\t        }\r\n\t        delete this.jid2session[this.sessions[sid].peerjid];\r\n\t        delete this.sessions[sid];\r\n\t      }\r\n\t    } else if (this.sessions.hasOwnProperty(sid)) {\r\n\t      if (this.sessions[sid].state != 'ended') {\r\n\t        this.sessions[sid].sendTerminate(reason || (!this.sessions[sid].active()) ? 'cancel' : null, text);\r\n\t        this.sessions[sid].terminate();\r\n\t      }\r\n\t      delete this.jid2session[this.sessions[sid].peerjid];\r\n\t      delete this.sessions[sid];\r\n\t    }\r\n\t  },\r\n\t  // Used to terminate a session when an unavailable presence is received.\r\n\t  terminateByJid: function (jid) {\r\n\t    if (this.jid2session.hasOwnProperty(jid)) {\r\n\t      var sess = this.jid2session[jid];\r\n\t      if (sess) {\r\n\t        sess.terminate();\r\n\t        console.log('peer went away silently', jid);\r\n\t        delete this.sessions[sess.sid];\r\n\t        delete this.jid2session[jid];\r\n\t        $(document).trigger('callterminated.jingle',\r\n\t          [sess.sid, jid], 'gone');\r\n\t      }\r\n\t    }\r\n\t  },\r\n\t  terminateRemoteByJid: function (jid, reason) {\r\n\t    if (this.jid2session.hasOwnProperty(jid)) {\r\n\t      var sess = this.jid2session[jid];\r\n\t      if (sess) {\r\n\t        sess.sendTerminate(reason || (!sess.active()) ? 'kick' : null);\r\n\t        sess.terminate();\r\n\t        console.log('terminate peer with jid', sess.sid, jid);\r\n\t        delete this.sessions[sess.sid];\r\n\t        delete this.jid2session[jid];\r\n\t        $(document).trigger('callterminated.jingle',\r\n\t          [sess.sid, jid, 'kicked']);\r\n\t      }\r\n\t    }\r\n\t  },\r\n\t  getStunAndTurnCredentials: function () {\r\n\t    // get stun and turn configuration from server via xep-0215\r\n\t    // uses time-limited credentials as described in\r\n\t    // http://tools.ietf.org/html/draft-uberti-behave-turn-rest-00\r\n\t    //\r\n\t    // see https://code.google.com/p/prosody-modules/source/browse/mod_turncredentials/mod_turncredentials.lua\r\n\t    // for a prosody module which implements this\r\n\t    //\r\n\t    // currently, this doesn't work with updateIce and therefore credentials with a long\r\n\t    // validity have to be fetched before creating the peerconnection\r\n\t    // TODO: implement refresh via updateIce as described in\r\n\t    //      https://code.google.com/p/webrtc/issues/detail?id=1650\r\n\t    var self = this;\r\n\t    this.connection.sendIQ(\r\n\t      $iq({type: 'get', to: this.connection.domain})\r\n\t        .c('services', {xmlns: 'urn:xmpp:extdisco:1'}).c('service', {host: 'turn.' + this.connection.domain}),\r\n\t      function (res) {\r\n\t        var iceservers = [];\r\n\t        $(res).find('>services>service').each(function (idx, el) {\r\n\t          el = $(el);\r\n\t          var dict = {};\r\n\t          var type = el.attr('type');\r\n\t          switch (type) {\r\n\t            case 'stun':\r\n\t              dict.url = 'stun:' + el.attr('host');\r\n\t              if (el.attr('port')) {\r\n\t                dict.url += ':' + el.attr('port');\r\n\t              }\r\n\t              iceservers.push(dict);\r\n\t              break;\r\n\t            case 'turn':\r\n\t            case 'turns':\r\n\t              dict.url = type + ':';\r\n\t              if (el.attr('username')) { // https://code.google.com/p/webrtc/issues/detail?id=1508\r\n\t                if (navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./) && parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10) < 28) {\r\n\t                  dict.url += el.attr('username') + '@';\r\n\t                } else {\r\n\t                  dict.username = el.attr('username'); // only works in M28\r\n\t                }\r\n\t              }\r\n\t              dict.url += el.attr('host');\r\n\t              if (el.attr('port') && el.attr('port') != '3478') {\r\n\t                dict.url += ':' + el.attr('port');\r\n\t              }\r\n\t              if (el.attr('transport') && el.attr('transport') != 'udp') {\r\n\t                dict.url += '?transport=' + el.attr('transport');\r\n\t              }\r\n\t              if (el.attr('password')) {\r\n\t                dict.credential = el.attr('password');\r\n\t              }\r\n\t              iceservers.push(dict);\r\n\t              break;\r\n\t          }\r\n\t        });\r\n\t        self.ice_config.iceServers = iceservers;\r\n\t      },\r\n\t      function (err) {\r\n\t        console.warn('getting turn credentials failed', err);\r\n\t        console.warn('is mod_turncredentials or similar installed?');\r\n\t      }\r\n\t    );\r\n\t    // implement push?\r\n\t  }\r\n\t});\r\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar SessionBase = __webpack_require__(36);\r\n\tvar SDP = __webpack_require__(37);\r\n\tvar TraceablePeerConnection = __webpack_require__(43);\r\n\tvar simulcast = __webpack_require__(38);\r\n\tvar X2JS = __webpack_require__(52);\r\n\tvar ms = __webpack_require__(29);\r\n\tvar ErrorCode = __webpack_require__(28);\r\n\tvar SdpUtil = __webpack_require__(53);\r\n\t\r\n\t/* jshint -W117 */\r\n\t// Jingle stuff\r\n\tJingleSession.prototype = Object.create(SessionBase.prototype);\r\n\tfunction JingleSession(me, sid, connection) {\r\n\t\r\n\t  SessionBase.call(this, connection, sid);\r\n\t\r\n\t  this.me = me;\r\n\t  this.initiator = null;\r\n\t  this.responder = null;\r\n\t  this.isInitiator = null;\r\n\t  this.peerjid = null;\r\n\t  this.state = null;\r\n\t  this.localSDP = null;\r\n\t  this.remoteSDP = null;\r\n\t  this.localStreams = [];\r\n\t  this.relayedStreams = [];\r\n\t  this.remoteStreams = [];\r\n\t  this.startTime = null;\r\n\t  this.stopTime = null;\r\n\t  this.media_constraints = null;\r\n\t  this.pc_constraints = null;\r\n\t  this.ice_config = {};\r\n\t  this.drip_container = [];\r\n\t\r\n\t  this.usetrickle = true;\r\n\t  this.usepranswer = false; // early transport warmup -- mind you, this might fail. depends on webrtc issue 1718\r\n\t  this.usedrip = false; // dripping is sending trickle candidates not one-by-one\r\n\t\r\n\t  this.hadstuncandidate = false;\r\n\t  this.hadturncandidate = false;\r\n\t  this.lasticecandidate = false;\r\n\t  this.statsinterval = null;\r\n\t  this.reason = null;\r\n\t  this.wait = true;\r\n\t  this.localStreamsSSRC = null;\r\n\t}\r\n\t\r\n\tJingleSession.prototype.initiate = function (peerjid, isInitiator) {\r\n\t  var self = this;\r\n\t  if (this.state !== null) {\r\n\t    console.error('attempt to initiate on session ' + this.sid +  'in state ' + this.state);\r\n\t    return;\r\n\t  }\r\n\t  this.isInitiator = isInitiator;\r\n\t  this.state = 'pending';\r\n\t  this.initiator = isInitiator ? this.me : peerjid;\r\n\t  this.responder = !isInitiator ? this.me : peerjid;\r\n\t  this.peerjid = peerjid;\r\n\t  this.hadstuncandidate = false;\r\n\t  this.hadturncandidate = false;\r\n\t  this.lasticecandidate = false;\r\n\t\r\n\t  this.peerconnection\r\n\t    = new TraceablePeerConnection(\r\n\t    this.connection.jingle.ice_config,\r\n\t    this.connection.jingle.pc_constraints);\r\n\t\r\n\t  this.peerconnection.onicecandidate = function (event) {\r\n\t    self.sendIceCandidate(event.candidate);\r\n\t  };\r\n\t    this.peerconnection.ontrack = function (event) {\r\n\t      console.log('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA', event);\r\n\t    };\r\n\t  this.peerconnection.onaddstream = function (event) {\r\n\t    self.remoteStreams.push(event.stream);\r\n\t    console.log(\"================================REMOTE STREAM ADDED:\",event ,\"\\n stream \" , event.stream ,  \" \\n stream id:  \" ,  event.stream.id);\r\n\t    var streamId = event.stream.id;\r\n\t    if (!(streamId.indexOf(\"mixed\") > -1 || streamId.indexOf(\"re_ms\") > -1)) {\r\n\t        $(document).trigger('remotestreamadded.jingle', [event.stream, SdpUtil.getSsrc(streamId)]);\r\n\t        // clearTimeout(askTimeout);\r\n\t        // askTimeout = setTimeout(function () {\r\n\t        //   self.sendKeyframe();\r\n\t        // },1000 * 10);\r\n\t    }\r\n\t  };\r\n\t  this.peerconnection.onremovestream = function (event) {\r\n\t    // Remove the stream from remoteStreams\r\n\t    var streamIdx = self.remoteStreams.indexOf(event.stream);\r\n\t    if (streamIdx !== -1) {\r\n\t      self.remoteStreams.splice(streamIdx, 1);\r\n\t    }\r\n\t    // FIXME: remotestreamremoved.jingle not defined anywhere(unused)\r\n\t    $(document).trigger('remotestreamremoved.jingle', [event, self.sid]);\r\n\t  };\r\n\t  this.peerconnection.onsignalingstatechange = function (event) {\r\n\t    if (!(self && self.peerconnection)) return;\r\n\t  };\r\n\t  this.peerconnection.oniceconnectionstatechange = function (event) {\r\n\t    if (!(self && self.peerconnection)) return;\r\n\t    switch (self.peerconnection.iceConnectionState) {\r\n\t      case 'connected':\r\n\t        this.startTime = new Date();\r\n\t        break;\r\n\t      case 'disconnected':\r\n\t        this.stopTime = new Date();\r\n\t        break;\r\n\t    }\r\n\t    $(document).trigger('iceconnectionstatechange.jingle', [self.sid, self]);\r\n\t  };\r\n\t  // add any local and relayed stream\r\n\t  this.localStreams.forEach(function (stream) {\r\n\t    self.peerconnection.addStream(stream);\r\n\t  });\r\n\t  this.relayedStreams.forEach(function (stream) {\r\n\t    self.peerconnection.addStream(stream);\r\n\t  });\r\n\t};\r\n\t\r\n\tJingleSession.prototype.accept = function () {\r\n\t  var self = this;\r\n\t  this.state = 'active';\r\n\t\r\n\t  var pranswer = this.peerconnection.localDescription;\r\n\t  if (!pranswer || pranswer.type != 'pranswer') {\r\n\t    return;\r\n\t  }\r\n\t  console.log('going from pranswer to answer');\r\n\t  if (this.usetrickle) {\r\n\t    // remove candidates already sent from session-accept\r\n\t    var lines = SDPUtil.find_lines(pranswer.sdp, 'a=candidate:');\r\n\t    for (var i = 0; i < lines.length; i++) {\r\n\t      pranswer.sdp = pranswer.sdp.replace(lines[i] + '\\r\\n', '');\r\n\t    }\r\n\t  }\r\n\t  while (SDPUtil.find_line(pranswer.sdp, 'a=inactive')) {\r\n\t    // FIXME: change any inactive to sendrecv or whatever they were originally\r\n\t    pranswer.sdp = pranswer.sdp.replace('a=inactive', 'a=sendrecv');\r\n\t  }\r\n\t  pranswer = simulcast.reverseTransformLocalDescription(pranswer);\r\n\t  var prsdp = new SDP(pranswer.sdp);\r\n\t  var accept = $iq({\r\n\t    to: this.peerjid,\r\n\t    type: 'set'\r\n\t  })\r\n\t    .c('jingle', {\r\n\t      xmlns: 'urn:xmpp:jingle:1',\r\n\t      action: 'session-accept',\r\n\t      initiator: this.initiator,\r\n\t      responder: this.responder,\r\n\t      sid: this.sid\r\n\t    });\r\n\t  prsdp.toJingle(accept, this.initiator == this.me ? 'initiator' : 'responder', this.localStreamsSSRC);\r\n\t  var sdp = this.peerconnection.localDescription.sdp;\r\n\t  while (SDPUtil.find_line(sdp, 'a=inactive')) {\r\n\t    // FIXME: change any inactive to sendrecv or whatever they were originally\r\n\t    sdp = sdp.replace('a=inactive', 'a=sendrecv');\r\n\t  }\r\n\t  this.peerconnection.setLocalDescription(new RTCSessionDescription({type: 'answer', sdp: sdp}), // BAO\r\n\t    function () {\r\n\t      //console.log('setLocalDescription success');\r\n\t      $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n\t      console.log('----------------- send accept', accept.tree());\r\n\t      this.connection.sendIQ(accept,\r\n\t        function () {\r\n\t          var ack = {};\r\n\t          ack.source = 'answer';\r\n\t          $(document).trigger('ack.jingle', [self.sid, ack]);\r\n\t        },\r\n\t        function (stanza) {\r\n\t          var error = ($(stanza).find('error').length) ? {\r\n\t            code: $(stanza).find('error').attr('code'),\r\n\t            reason: $(stanza).find('error :first')[0].tagName\r\n\t          } : {};\r\n\t          error.source = 'answer';\r\n\t          $(document).trigger('error.jingle', [self.sid, error]);\r\n\t        });\r\n\t    },\r\n\t    function (e) {\r\n\t      console.error('setLocalDescription failed', e);\r\n\t    }\r\n\t  );\r\n\t};\r\n\t\r\n\t/**\r\n\t * Implements SessionBase.sendSSRCUpdate.\r\n\t */\r\n\tJingleSession.prototype.sendSSRCUpdate = function (sdpMediaSsrcs, fromJid, isadd) {\r\n\t\r\n\t  var self = this;\r\n\t  //console.log('tell', self.peerjid, 'about ' + (isadd ? 'new' : 'removed') + ' ssrcs from' + self.me);\r\n\t\r\n\t  //  BAO This code is now redundant\r\n\t  //\r\n\t  //if (!(this.peerconnection.signalingState == 'stable' && this.peerconnection.iceConnectionState == 'connected')){\r\n\t  //    console.log(\"Too early to send updates\");\r\n\t  //    return;\r\n\t  //}\r\n\t\r\n\t  this.sendSSRCUpdateIq(sdpMediaSsrcs, self.sid, self.initiator, self.peerjid, isadd);\r\n\t};\r\n\t\r\n\tJingleSession.prototype.terminate = function (reason) {\r\n\t  this.state = 'ended';\r\n\t  this.reason = reason;\r\n\t  this.peerconnection.close();\r\n\t  if (this.statsinterval !== null) {\r\n\t    window.clearInterval(this.statsinterval);\r\n\t    this.statsinterval = null;\r\n\t  }\r\n\t};\r\n\t\r\n\tJingleSession.prototype.active = function () {\r\n\t  return this.state == 'active';\r\n\t};\r\n\t\r\n\tJingleSession.prototype.sendIceCandidate = function (candidate) {\r\n\t  // console.log(\"==================sendIceCandidate===========\",candidate);\r\n\t  var self = this;\r\n\t  if (candidate && !this.lasticecandidate) {\r\n\t    var ice = SDPUtil.iceparams(this.localSDP.media[candidate.sdpMLineIndex], this.localSDP.session);\r\n\t    var jcand = SDPUtil.candidateToJingle(candidate.candidate);\r\n\t    if (!(ice && jcand)) {\r\n\t      console.error('failed to get ice && jcand');\r\n\t      return;\r\n\t    }\r\n\t    ice.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\r\n\t\r\n\t    if (jcand.type === 'srflx') {\r\n\t      this.hadstuncandidate = true;\r\n\t    } else if (jcand.type === 'relay') {\r\n\t      this.hadturncandidate = true;\r\n\t    }\r\n\t\r\n\t    if (this.usetrickle) {\r\n\t      if (this.usedrip) {\r\n\t        if (this.drip_container.length === 0) {\r\n\t          // start 20ms callout\r\n\t          window.setTimeout(function () {\r\n\t            if (self.drip_container.length === 0) return;\r\n\t            //console.log('sendIceCandidates timeout', self.usetrickle, self.usedrip, self.drip_container);\r\n\t            self.sendIceCandidates(self.drip_container);\r\n\t            self.drip_container = [];\r\n\t          }, 20);\r\n\t\r\n\t        }\r\n\t        this.drip_container.push(candidate);\r\n\t        return;\r\n\t      } else {\r\n\t        //console.log('sendIceCandidates single', self.usetrickle, self.usedrip, candidate);\r\n\t        self.sendIceCandidates([candidate]);\r\n\t      }\r\n\t    }\r\n\t  } else {\r\n\t    //console.log('sendIceCandidate: last candidate.');\r\n\t    if (!this.usetrickle) {\r\n\t      //console.log('should send full offer now...');\r\n\t      var init = $iq({\r\n\t        to: this.peerjid,\r\n\t        type: 'set'\r\n\t      })\r\n\t        .c('jingle', {\r\n\t          xmlns: 'urn:xmpp:jingle:1',\r\n\t          action: this.peerconnection.localDescription.type == 'offer' ? 'session-initiate' : 'session-accept',\r\n\t          initiator: this.initiator,\r\n\t          sid: this.sid\r\n\t        });\r\n\t      this.localSDP = new SDP(this.peerconnection.localDescription.sdp);\r\n\t      var self = this;\r\n\t      var sendJingle = function (ssrc) {\r\n\t        if (!ssrc)\r\n\t          ssrc = {};\r\n\t        self.localSDP.toJingle(init, self.initiator == self.me ? 'initiator' : 'responder', ssrc);\r\n\t        self.connection.sendIQ(init,\r\n\t          function () {\r\n\t            //console.log('session initiate ack');\r\n\t            var ack = {};\r\n\t            ack.source = 'offer';\r\n\t            $(document).trigger('ack.jingle', [self.sid, ack]);\r\n\t          },\r\n\t          function (stanza) {\r\n\t            self.state = 'error';\r\n\t            self.peerconnection.close();\r\n\t            var error = ($(stanza).find('error').length) ? {\r\n\t              code: $(stanza).find('error').attr('code'),\r\n\t              reason: $(stanza).find('error :first')[0].tagName,\r\n\t            } : {};\r\n\t            error.source = 'offer';\r\n\t            $(document).trigger('error.jingle', [self.sid, error]);\r\n\t          });\r\n\t      }\r\n\t\r\n\t      RTC.getLocalSSRC(this, function (ssrcs) {\r\n\t        if (ssrcs) {\r\n\t          sendJingle(ssrcs);\r\n\t          $(document).trigger(\"setLocalDescription.jingle\", [self.sid]);\r\n\t        }\r\n\t        else {\r\n\t          sendJingle();\r\n\t        }\r\n\t      });\r\n\t\r\n\t    }\r\n\t    this.lasticecandidate = true;\r\n\t    console.log('Have we encountered any srflx candidates? ' + this.hadstuncandidate);\r\n\t    console.log('Have we encountered any relay candidates? ' + this.hadturncandidate);\r\n\t\r\n\t    if (!(this.hadstuncandidate || this.hadturncandidate) && this.peerconnection.signalingState != 'closed') {\r\n\t      $(document).trigger('nostuncandidates.jingle', [this.sid]);\r\n\t    }\r\n\t  }\r\n\t};\r\n\t\r\n\tJingleSession.prototype.sendIceCandidates = function (candidates) {\r\n\t  console.log('sendIceCandidates', candidates);\r\n\t  var self = this;\r\n\t  var relayDone = false;\r\n\t  var cand = $iq({to: this.peerjid, type: 'set'})\r\n\t    .c('jingle', {\r\n\t      xmlns: 'urn:xmpp:jingle:1',\r\n\t      action: 'transport-info',\r\n\t      initiator: this.initiator,\r\n\t      sid: this.sid\r\n\t    });\r\n\t  for (var mid = 0; mid < this.localSDP.media.length; mid++) {\r\n\t    var cands = candidates.filter(function (el) {\r\n\t      return el.sdpMLineIndex == mid;\r\n\t    });\r\n\t    var mline = SDPUtil.parse_mline(this.localSDP.media[mid].split('\\r\\n')[0]);\r\n\t    if (cands.length > 0) {\r\n\t      var ice = SDPUtil.iceparams(this.localSDP.media[mid], this.localSDP.session);\r\n\t      ice.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\r\n\t      cand.c('content', {\r\n\t        creator: this.initiator == this.me ? 'initiator' : 'responder',\r\n\t        name: (cands[0].sdpMid ? cands[0].sdpMid : mline.media)\r\n\t      }).c('transport', ice);\r\n\t      for (var i = 0; i < cands.length; i++) {\r\n\t        cand.c('candidate', SDPUtil.candidateToJingle(cands[i].candidate)).up();\r\n\t      }\r\n\t\r\n\t      // add fingerprint\r\n\t      if (SDPUtil.find_line(this.localSDP.media[mid], 'a=fingerprint:', this.localSDP.session)) {\r\n\t        var tmp = SDPUtil.parse_fingerprint(SDPUtil.find_line(this.localSDP.media[mid], 'a=fingerprint:', this.localSDP.session));\r\n\t        tmp.required = true;\r\n\t        cand.c(\r\n\t          'fingerprint',\r\n\t          {xmlns: 'urn:xmpp:jingle:apps:dtls:0'})\r\n\t          .t(tmp.fingerprint);\r\n\t        delete tmp.fingerprint;\r\n\t        cand.attrs(tmp);\r\n\t        cand.up();\r\n\t      }\r\n\t      cand.up(); // transport\r\n\t      cand.up(); // content\r\n\t    }\r\n\t    self.relayDone = relayDone;\r\n\t  }\r\n\t  // might merge last-candidate notification into this, but it is called alot later. See webrtc issue #2340\r\n\t  //console.log('was this the last candidate', this.lasticecandidate);\r\n\t  this.connection.sendIQ(cand,\r\n\t    function () {\r\n\t      var ack = {};\r\n\t      ack.source = 'transportinfo';\r\n\t      $(document).trigger('ack.jingle', [this.sid, ack]);\r\n\t    },\r\n\t    function (stanza) {\r\n\t      var error = ($(stanza).find('error').length) ? {\r\n\t        code: $(stanza).find('error').attr('code'),\r\n\t        reason: $(stanza).find('error :first')[0].tagName,\r\n\t      } : {};\r\n\t      error.source = 'transportinfo';\r\n\t      $(document).trigger('error.jingle', [this.sid, error]);\r\n\t    });\r\n\t};\r\n\t\r\n\t\r\n\tJingleSession.prototype.sendOffer = function () {\r\n\t  //console.log('sendOffer...');\r\n\t  var self = this;\r\n\t  this.peerconnection.createOffer(function (sdp) {\r\n\t      self.createdOffer(sdp);\r\n\t    },\r\n\t    function (e) {\r\n\t      console.error('createOffer failed', e);\r\n\t    },\r\n\t    this.media_constraints\r\n\t  );\r\n\t};\r\n\t\r\n\tJingleSession.prototype.createdOffer = function (sdp) {\r\n\t  //console.log('createdOffer', sdp);\r\n\t  var self = this;\r\n\t  this.localSDP = new SDP(sdp.sdp);\r\n\t  //this.localSDP.mangle();\r\n\t  var sendJingle = function () {\r\n\t    var init = $iq({\r\n\t      to: this.peerjid,\r\n\t      type: 'set'\r\n\t    })\r\n\t      .c('jingle', {\r\n\t        xmlns: 'urn:xmpp:jingle:1',\r\n\t        action: 'session-initiate',\r\n\t        initiator: this.initiator,\r\n\t        sid: this.sid\r\n\t      });\r\n\t    this.localSDP.toJingle(init, this.initiator == this.me ? 'initiator' : 'responder', this.localStreamsSSRC);\r\n\t    this.connection.sendIQ(init,\r\n\t      function () {\r\n\t        var ack = {};\r\n\t        ack.source = 'offer';\r\n\t        $(document).trigger('ack.jingle', [self.sid, ack]);\r\n\t      },\r\n\t      function (stanza) {\r\n\t        self.state = 'error';\r\n\t        self.peerconnection.close();\r\n\t        var error = ($(stanza).find('error').length) ? {\r\n\t          code: $(stanza).find('error').attr('code'),\r\n\t          reason: $(stanza).find('error :first')[0].tagName,\r\n\t        } : {};\r\n\t        error.source = 'offer';\r\n\t        $(document).trigger('error.jingle', [self.sid, error]);\r\n\t      });\r\n\t  }\r\n\t  // sdp.sdp = this.setBandwidth(this.localSDP.raw); // BAO\r\n\t\r\n\t  this.peerconnection.setLocalDescription(sdp,\r\n\t    function () {\r\n\t      if (this.usetrickle) {\r\n\t        RTC.getLocalSSRC(function (ssrc) {\r\n\t          sendJingle(ssrc);\r\n\t          $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n\t        });\r\n\t      }\r\n\t      else\r\n\t        $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n\t      //console.log('setLocalDescription success');\r\n\t    },\r\n\t    function (e) {\r\n\t      console.error('setLocalDescription failed', e);\r\n\t    }\r\n\t  );\r\n\t  var cands = SDPUtil.find_lines(this.localSDP.raw, 'a=candidate:');\r\n\t  for (var i = 0; i < cands.length; i++) {\r\n\t    var cand = SDPUtil.parse_icecandidate(cands[i]);\r\n\t    if (cand.type == 'srflx') {\r\n\t      this.hadstuncandidate = true;\r\n\t    } else if (cand.type == 'relay') {\r\n\t      this.hadturncandidate = true;\r\n\t    }\r\n\t  }\r\n\t};\r\n\t\r\n\tJingleSession.prototype.setRemoteDescription = function (elem,desctype) {\r\n\t  var _this = this;\r\n\t if (elem[0].outerHTML) {\r\n\t  var iqXml = elem[0].outerHTML;\r\n\t  var emptyIQ = ($(iqXml).find(\">content\").length) == 0;\r\n\t  if(emptyIQ){\r\n\t   console.warn('handle empty iq, ignore: \\n', iqXml);\r\n\t   return true;\r\n\t  }\r\n\t  var x2js = new X2JS({\r\n\t    attributePrefix : \"\"\r\n\t  });\r\n\t  var jsonObj = x2js.xml2js(iqXml);\r\n\t  if (jsonObj.jingle) {\r\n\t    var action = jsonObj.jingle.action;\r\n\t    if (action == \"session-initiate\")  {\r\n\t      var sdp = SdpUtil.xml2sdp(iqXml);\r\n\t      var remotedesc = new RTCSessionDescription({type: desctype, sdp: sdp});\r\n\t      this.peerconnection.peerconnection.setRemoteDescription(remotedesc,\r\n\t        function () {\r\n\t          console.log(\"====setRemoteDescription===1=====ok====\" + action);\r\n\t        },\r\n\t        function (err) {\r\n\t          console.error(\"====setRemoteDescription==1==err======\" + action,err)\r\n\t        }\r\n\t      );\r\n\t    } else if (action == \"source-add\")  {\r\n\t      var sdp = SdpUtil.xml2sdp(iqXml);\r\n\t      var remotedesc = new RTCSessionDescription({type: desctype, sdp: sdp});\r\n\t      this.peerconnection.peerconnection.setRemoteDescription(remotedesc,\r\n\t        function () {\r\n\t          _this.peerconnection.createAnswer(\r\n\t            function (answer) {\r\n\t              _this.peerconnection.peerconnection.setLocalDescription(answer);\r\n\t            },\r\n\t            function (e) {\r\n\t              console.error(\"====createAnswer===1=====err====\" + action,e);\r\n\t            }\r\n\t          );\r\n\t        },\r\n\t        function (e) {\r\n\t          console.error(\"====setRemoteDescription===1=====err====\" + action,e);\r\n\t        }\r\n\t      );\r\n\t    } else if (action == \"source-remove\"){\r\n\t      var sdp = SdpUtil.xml2sdp(iqXml);\r\n\t      var remotedesc = new RTCSessionDescription({type: desctype, sdp: sdp});\r\n\t      this.peerconnection.peerconnection.setRemoteDescription(remotedesc,\r\n\t          function () {\r\n\t            _this.peerconnection.createAnswer(\r\n\t                function (answer) {\r\n\t                  _this.peerconnection.peerconnection.setLocalDescription(answer);\r\n\t                },\r\n\t                function (e) {\r\n\t                  console.log(\"====createAnswer===1=====err====\" + action,e);\r\n\t                }\r\n\t            );\r\n\t          },\r\n\t          function (e) {\r\n\t            console.error(\"====setRemoteDescription===1=====err====\" + action,e);\r\n\t          }\r\n\t      );\r\n\t    }\r\n\t  }\r\n\t }\r\n\t};\r\n\t\r\n\tJingleSession.prototype.addIceCandidate = function (elem) {\r\n\t  var self = this;\r\n\t  if (this.peerconnection.signalingState == 'closed') {\r\n\t    return;\r\n\t  }\r\n\t  if (!this.peerconnection.remoteDescription && this.peerconnection.signalingState == 'have-local-offer') {\r\n\t    console.log('trickle ice candidate arriving before session accept...');\r\n\t    // create a PRANSWER for setRemoteDescription\r\n\t    if (!this.remoteSDP) {\r\n\t      var cobbled = 'v=0\\r\\n' +\r\n\t        'o=- ' + '1923518516' + ' 2 IN IP4 0.0.0.0\\r\\n' +// FIXME\r\n\t        's=-\\r\\n' +\r\n\t        't=0 0\\r\\n';\r\n\t      // first, take some things from the local description\r\n\t      for (var i = 0; i < this.localSDP.media.length; i++) {\r\n\t        cobbled += SDPUtil.find_line(this.localSDP.media[i], 'm=') + '\\r\\n';\r\n\t        cobbled += SDPUtil.find_lines(this.localSDP.media[i], 'a=rtpmap:').join('\\r\\n') + '\\r\\n';\r\n\t        if (SDPUtil.find_line(this.localSDP.media[i], 'a=mid:')) {\r\n\t          cobbled += SDPUtil.find_line(this.localSDP.media[i], 'a=mid:') + '\\r\\n';\r\n\t        }\r\n\t        cobbled += 'a=inactive\\r\\n';\r\n\t      }\r\n\t      this.remoteSDP = new SDP(cobbled);\r\n\t    }\r\n\t    // then add things like ice and dtls from remote candidate\r\n\t    elem.each(function () {\r\n\t      for (var i = 0; i < self.remoteSDP.media.length; i++) {\r\n\t        if (SDPUtil.find_line(self.remoteSDP.media[i], 'a=mid:' + $(this).attr('name')) ||\r\n\t          self.remoteSDP.media[i].indexOf('m=' + $(this).attr('name')) === 0) {\r\n\t          if (!SDPUtil.find_line(self.remoteSDP.media[i], 'a=ice-ufrag:')) {\r\n\t            var tmp = $(this).find('transport');\r\n\t            self.remoteSDP.media[i] += 'a=ice-ufrag:' + tmp.attr('ufrag') + '\\r\\n';\r\n\t            self.remoteSDP.media[i] += 'a=ice-pwd:' + tmp.attr('pwd') + '\\r\\n';\r\n\t            tmp = $(this).find('transport>fingerprint');\r\n\t            if (tmp.length) {\r\n\t              self.remoteSDP.media[i] += 'a=fingerprint:' + tmp.attr('hash') + ' ' + tmp.text() + '\\r\\n';\r\n\t            } else {\r\n\t              console.log('no dtls fingerprint (webrtc issue #1718?)');\r\n\t              self.remoteSDP.media[i] += 'a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:BAADBAADBAADBAADBAADBAADBAADBAADBAADBAAD\\r\\n';\r\n\t            }\r\n\t            break;\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    });\r\n\t    this.remoteSDP.raw = this.remoteSDP.session + this.remoteSDP.media.join('');\r\n\t\r\n\t    // we need a complete SDP with ice-ufrag/ice-pwd in all parts\r\n\t    // this makes the assumption that the PRANSWER is constructed such that the ice-ufrag is in all mediaparts\r\n\t    // but it could be in the session part as well. since the code above constructs this sdp this can't happen however\r\n\t    var iscomplete = this.remoteSDP.media.filter(function (mediapart) {\r\n\t        return SDPUtil.find_line(mediapart, 'a=ice-ufrag:');\r\n\t      }).length == this.remoteSDP.media.length;\r\n\t\r\n\t    if (iscomplete) {\r\n\t      console.log('setting pranswer');\r\n\t      try {\r\n\t        this.peerconnection.setRemoteDescription(new RTCSessionDescription({\r\n\t            type: 'pranswer',\r\n\t            sdp: this.remoteSDP.raw\r\n\t          }),\r\n\t          function () {\r\n\t          },\r\n\t          function (e) {\r\n\t            console.log('setRemoteDescription pranswer failed', e.toString());\r\n\t          });\r\n\t      } catch (e) {\r\n\t        console.error('setting pranswer failed', e);\r\n\t      }\r\n\t    } else {\r\n\t      //console.log('not yet setting pranswer');\r\n\t    }\r\n\t  }\r\n\t  // operate on each content element\r\n\t  elem.each(function () {\r\n\t    // would love to deactivate this, but firefox still requires it\r\n\t    var idx = -1;\r\n\t    var i;\r\n\t    for (i = 0; i < self.remoteSDP.media.length; i++) {\r\n\t      if (SDPUtil.find_line(self.remoteSDP.media[i], 'a=mid:' + $(this).attr('name')) ||\r\n\t        self.remoteSDP.media[i].indexOf('m=' + $(this).attr('name')) === 0) {\r\n\t        idx = i;\r\n\t        break;\r\n\t      }\r\n\t    }\r\n\t    if (idx == -1) { // fall back to localdescription\r\n\t      for (i = 0; i < self.localSDP.media.length; i++) {\r\n\t        if (SDPUtil.find_line(self.localSDP.media[i], 'a=mid:' + $(this).attr('name')) ||\r\n\t          self.localSDP.media[i].indexOf('m=' + $(this).attr('name')) === 0) {\r\n\t          idx = i;\r\n\t          break;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    var name = $(this).attr('name');\r\n\t    // TODO: check ice-pwd and ice-ufrag?\r\n\t    $(this).find('transport>candidate').each(function () {\r\n\t      var line, candidate;\r\n\t      line = SDPUtil.candidateFromJingle(this);\r\n\t      candidate = new RTCIceCandidate({\r\n\t        sdpMLineIndex: idx,\r\n\t        sdpMid: name,\r\n\t        candidate: line\r\n\t      });\r\n\t      try {\r\n\t        self.peerconnection.addIceCandidate(candidate);\r\n\t      } catch (e) {\r\n\t        console.error('addIceCandidate failed', e.toString(), line);\r\n\t      }\r\n\t    });\r\n\t  });\r\n\t};\r\n\t\r\n\tJingleSession.prototype.sendAnswer = function (provisional) {\r\n\t  //console.log('createAnswer', provisional);\r\n\t  var self = this;\r\n\t  this.peerconnection.createAnswer(\r\n\t    function (sdp) {\r\n\t      console.log('createAnswer', provisional);\r\n\t      console.log('createAnswer sdp', sdp);\r\n\t      self.createdAnswer(sdp, provisional);\r\n\t    },\r\n\t    function (e) {\r\n\t      console.error('createAnswer failed', e);\r\n\t    },\r\n\t    this.media_constraints\r\n\t  );\r\n\t};\r\n\t\r\n\tJingleSession.prototype.createdAnswer = function (sdp, provisional) {\r\n\t  console.log(\"===========cretateAnswer===\",sdp);\r\n\t  var self = this;\r\n\t  var medias = sdp.sdp.split('\\r\\nm=');\r\n\t  var contentsNode = '';\r\n\t  if (ms.getSemantics() != \"firefox\")  {\r\n\t    for (var i=0; i< medias.length ; i++ ) {\r\n\t      var mediaGroup = medias[i];\r\n\t      if (mediaGroup) {\r\n\t        var mediaLine = SDPUtil.find_line(mediaGroup, \"a=ssrc\") || SDPUtil.find_line(mediaGroup, \"application\");\r\n\t        if (mediaLine) {\r\n\t          var audioVideoGroup = SDPUtil.find_line(mediaGroup,\"audio\") || SDPUtil.find_line(mediaGroup,\"video\");\r\n\t          var applicationLine = SDPUtil.find_line(mediaGroup,\"application\");\r\n\t\r\n\t          var ufrag = SDPUtil.find_line(mediaGroup,\"a=ice-ufrag\").split(\":\")[1];\r\n\t          var pwd = SDPUtil.find_line(mediaGroup,\"a=ice-pwd\").split(\":\")[1];\r\n\t          var fingerprints = SDPUtil.find_line(mediaGroup,\"a=fingerprint\").split(\" \");\r\n\t\r\n\t          if (audioVideoGroup) {\r\n\t            var mediaName = audioVideoGroup.split(\" \")[0]; //audio video\r\n\t\r\n\t            var msid = SDPUtil.find_line(mediaGroup, \"a=msid\");\r\n\t            var ssrcLine = \"\", ssrc = \"\" , cname = \"\";\r\n\t            if (msid) {\r\n\t              msid = msid.split(\":\")[1];\r\n\t              ssrcLine = SDPUtil.find_line(mediaGroup, \"a=ssrc\").split(\" \");\r\n\t            } else {\r\n\t              var ssrcLines = SDPUtil.find_lines(mediaGroup,\"a=ssrc\");\r\n\t              for (var j = 0 ;j< ssrcLines.length;j++) {\r\n\t                if (ssrcLines[j].indexOf(\"cname\") > -1) {\r\n\t                  ssrcLine = ssrcLines[j].split(\" \");\r\n\t                }\r\n\t                if (ssrcLines[j].indexOf(\"msid\") > -1) {\r\n\t                  msid = ssrcLines[j].split(\"msid:\")[1];\r\n\t                }\r\n\t              }\r\n\t            }\r\n\t            ssrc = ssrcLine[0].split(\":\")[1];\r\n\t            cname = ssrcLine[1].split(\":\")[1];\r\n\t            contentsNode += ms.createMediaNode(mediaName, mediaGroup, ssrc, cname, msid, ufrag, pwd, fingerprints)\r\n\t          } else if (applicationLine) {\r\n\t            contentsNode += ms.createDataNode(ufrag, pwd, fingerprints);\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }// end for\r\n\t  } else {\r\n\t      var fingerprints = SDPUtil.find_line(medias[0],\"a=fingerprint\").split(\" \");\r\n\t      for (var i=1; i< medias.length ; i++ ) {\r\n\t          var mediaGroup = medias[i];\r\n\t          if (mediaGroup) {\r\n\t              var mediaLine = (SDPUtil.find_line(mediaGroup, \"a=sendrecv\") && SDPUtil.find_line(mediaGroup, \"a=ssrc\")) || SDPUtil.find_line(mediaGroup, \"application\");\r\n\t              if (mediaLine) {\r\n\t                  var audioVideoGroup = SDPUtil.find_line(mediaGroup,\"audio\") || SDPUtil.find_line(mediaGroup,\"video\");\r\n\t                  var applicationLine = SDPUtil.find_line(mediaGroup,\"application\");\r\n\t                  var ufrag = SDPUtil.find_line(mediaGroup,\"a=ice-ufrag\").split(\":\")[1];\r\n\t                  var pwd = SDPUtil.find_line(mediaGroup,\"a=ice-pwd\").split(\":\")[1];\r\n\t\r\n\t                  if (audioVideoGroup) {\r\n\t                      var mediaName = audioVideoGroup.split(\" \")[0]; //audio video\r\n\t                      var msid = SDPUtil.find_line(mediaGroup, \"a=msid\");\r\n\t                      var ssrcLine = \"\", ssrc = \"\" , cname = \"\";\r\n\t                      if (msid) {\r\n\t                          msid = msid.split(\":\")[1];\r\n\t                          ssrcLine = SDPUtil.find_line(mediaGroup, \"a=ssrc\").split(\" \");\r\n\t                      } else {\r\n\t                          var ssrcLines = SDPUtil.find_lines(mediaGroup,\"a=ssrc\");\r\n\t                          for (var j = 0 ;j< ssrcLines.length;j++) {\r\n\t                              if (ssrcLines[j].indexOf(\"cname\") > -1) {\r\n\t                                  ssrcLine = ssrcLines[j].split(\" \");\r\n\t                              }\r\n\t                              if (ssrcLines[j].indexOf(\"msid\") > -1) {\r\n\t                                  msid = ssrcLines[j].split(\"msid:\")[1];\r\n\t                              }\r\n\t                          }\r\n\t                      }\r\n\t                      ssrc = ssrcLine[0].split(\":\")[1];\r\n\t                      cname = ssrcLine[1].split(\":\")[1];\r\n\t                      contentsNode += ms.createMediaNode(mediaName, mediaGroup, ssrc, cname, msid, ufrag, pwd, fingerprints);\r\n\t                  } else if (applicationLine) {\r\n\t                      contentsNode += ms.createDataNode(ufrag, pwd, fingerprints);\r\n\t                  }\r\n\t\r\n\t              }\r\n\t          }\r\n\t      }// end for\r\n\t  }\r\n\t\r\n\t  var mxml = ms.ansToSessAcc(self, contentsNode);\r\n\t  console.log(\"==========================createdAnswer============mxml======\\r\\n\", mxml.outerHTML);\r\n\t\r\n\t\r\n\t  this.localSDP = new SDP(sdp.sdp);\r\n\t  //this.localSDP.mangle();\r\n\t  this.usepranswer = provisional === true;\r\n\t  if (this.usetrickle) {\r\n\t    if (this.usepranswer) {\r\n\t      sdp.type = 'pranswer';\r\n\t      for (var i = 0; i < this.localSDP.media.length; i++) {\r\n\t        this.localSDP.media[i] = this.localSDP.media[i].replace('a=sendrecv\\r\\n', 'a=inactive\\r\\n');\r\n\t      }\r\n\t      this.localSDP.raw = this.localSDP.session + '\\r\\n' + this.localSDP.media.join('');\r\n\t    }\r\n\t  }\r\n\t\r\n\t  var sendJingle = function (ssrcs) {\r\n\t    this.connection.sendIQ(mxml,\r\n\t      function () {\r\n\t        // console.log(\"====================this.connection.sendIQ(textToXML(mxml)===========success=========\" + mxml);\r\n\t        // var ack = {};\r\n\t        // ack.source = 'answer';\r\n\t        // $(document).trigger('ack.jingle', [self.sid, ack]);\r\n\t      },\r\n\t      function (stanza) {\r\n\t        // console.log(\"====================this.connection.sendIQ(textToXML(mxml)=======error=============\" + mxml);\r\n\t        // var error = ($(stanza).find('error').length) ? {\r\n\t        //   code: $(stanza).find('error').attr('code'),\r\n\t        //   reason: $(stanza).find('error :first')[0].tagName,\r\n\t        // } : {};\r\n\t        // error.source = 'answer';\r\n\t        // $(document).trigger('error.jingle', [self.sid, error]);\r\n\t      });\r\n\t  }\r\n\t  // sdp.sdp = this.setBandwidth(this.localSDP.raw); //BAO\r\n\t  // console.log(\"===================================answer===sdp============\",sdp.sdp);\r\n\t  var localdesc = new RTCSessionDescription({type: \"answer\", sdp: sdp.sdp});\r\n\t  this.peerconnection.peerconnection.setLocalDescription(localdesc,\r\n\t    function () {\r\n\t      //console.log('setLocalDescription success');\r\n\t      if (self.usetrickle && !self.usepranswer) {\r\n\t        RTC.getLocalSSRC(self, function (ssrc) {\r\n\t          sendJingle(ssrc);\r\n\t          $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n\t        });\r\n\t      }\r\n\t      else\r\n\t        $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n\t    },\r\n\t    function (e) {\r\n\t      console.error('setLocalDescription failed', e);\r\n\t    }\r\n\t  );\r\n\t  var cands = SDPUtil.find_lines(this.localSDP.raw, 'a=candidate:');\r\n\t  for (var j = 0; j < cands.length; j++) {\r\n\t    var cand = SDPUtil.parse_icecandidate(cands[j]);\r\n\t    if (cand.type == 'srflx') {\r\n\t      this.hadstuncandidate = true;\r\n\t    } else if (cand.type == 'relay') {\r\n\t      this.hadturncandidate = true;\r\n\t    }\r\n\t  }\r\n\t};\r\n\t\r\n\tJingleSession.prototype.sendTerminate = function (reason, text) {\r\n\t  var self = this,\r\n\t    term = $iq({\r\n\t      to: this.peerjid,\r\n\t      type: 'set'\r\n\t    })\r\n\t      .c('jingle', {\r\n\t        xmlns: 'urn:xmpp:jingle:1',\r\n\t        action: 'session-terminate',\r\n\t        initiator: this.initiator,\r\n\t        sid: this.sid\r\n\t      })\r\n\t      .c('reason')\r\n\t      .c(reason || 'success');\r\n\t\r\n\t  if (text) {\r\n\t    term.up().c('text').t(text);\r\n\t  }\r\n\t\r\n\t  this.connection.sendIQ(term,\r\n\t    function () {\r\n\t      self.peerconnection.close();\r\n\t      self.peerconnection = null;\r\n\t      self.terminate();\r\n\t      var ack = {};\r\n\t      ack.source = 'terminate';\r\n\t      $(document).trigger('ack.jingle', [self.sid, ack]);\r\n\t    },\r\n\t    function (stanza) {\r\n\t      var error = ($(stanza).find('error').length) ? {\r\n\t        code: $(stanza).find('error').attr('code'),\r\n\t        reason: $(stanza).find('error :first')[0].tagName,\r\n\t      } : {};\r\n\t      $(document).trigger('ack.jingle', [self.sid, error]);\r\n\t    });\r\n\t  if (this.statsinterval !== null) {\r\n\t    window.clearInterval(this.statsinterval);\r\n\t    this.statsinterval = null;\r\n\t  }\r\n\t};\r\n\t\r\n\tJingleSession.prototype.sendMute = function (muted, content) {\r\n\t  var info = $iq({\r\n\t    to: this.peerjid,\r\n\t    type: 'set'\r\n\t  })\r\n\t    .c('jingle', {\r\n\t      xmlns: 'urn:xmpp:jingle:1',\r\n\t      action: 'session-info',\r\n\t      initiator: this.initiator,\r\n\t      sid: this.sid\r\n\t    });\r\n\t  info.c(muted ? 'mute' : 'unmute', {xmlns: 'urn:xmpp:jingle:apps:rtp:info:1'});\r\n\t  info.attrs({'creator': this.me == this.initiator ? 'creator' : 'responder'});\r\n\t  if (content) {\r\n\t    info.attrs({'name': content});\r\n\t  }\r\n\t  this.connection.send(info);\r\n\t};\r\n\t\r\n\tJingleSession.prototype.sendRinging = function () {\r\n\t  var info = $iq({\r\n\t    to: this.peerjid,\r\n\t    type: 'set'\r\n\t  })\r\n\t    .c('jingle', {\r\n\t      xmlns: 'urn:xmpp:jingle:1',\r\n\t      action: 'session-info',\r\n\t      initiator: this.initiator,\r\n\t      sid: this.sid\r\n\t    });\r\n\t  info.c('ringing', {xmlns: 'urn:xmpp:jingle:apps:rtp:info:1'});\r\n\t  this.connection.send(info);\r\n\t};\r\n\t\r\n\tJingleSession.prototype.getStats = function (interval) {\r\n\t  var self = this;\r\n\t  var recv = {audio: 0, video: 0};\r\n\t  var lost = {audio: 0, video: 0};\r\n\t  var lastrecv = {audio: 0, video: 0};\r\n\t  var lastlost = {audio: 0, video: 0};\r\n\t  var loss = {audio: 0, video: 0};\r\n\t  var delta = {audio: 0, video: 0};\r\n\t  this.statsinterval = window.setInterval(function () {\r\n\t    if (self && self.peerconnection && self.peerconnection.getStats) {\r\n\t      self.peerconnection.getStats(function (stats) {\r\n\t        var results = stats.result();\r\n\t        // TODO: there are so much statistics you can get from this..\r\n\t        for (var i = 0; i < results.length; ++i) {\r\n\t          if (results[i].type == 'ssrc') {\r\n\t            var packetsrecv = results[i].stat('packetsReceived');\r\n\t            var packetslost = results[i].stat('packetsLost');\r\n\t            if (packetsrecv && packetslost) {\r\n\t              packetsrecv = parseInt(packetsrecv, 10);\r\n\t              packetslost = parseInt(packetslost, 10);\r\n\t\r\n\t              if (results[i].stat('googFrameRateReceived')) {\r\n\t                lastlost.video = lost.video;\r\n\t                lastrecv.video = recv.video;\r\n\t                recv.video = packetsrecv;\r\n\t                lost.video = packetslost;\r\n\t              } else {\r\n\t                lastlost.audio = lost.audio;\r\n\t                lastrecv.audio = recv.audio;\r\n\t                recv.audio = packetsrecv;\r\n\t                lost.audio = packetslost;\r\n\t              }\r\n\t            }\r\n\t          }\r\n\t        }\r\n\t        delta.audio = recv.audio - lastrecv.audio;\r\n\t        delta.video = recv.video - lastrecv.video;\r\n\t        loss.audio = (delta.audio > 0) ? Math.ceil(100 * (lost.audio - lastlost.audio) / delta.audio) : 0;\r\n\t        loss.video = (delta.video > 0) ? Math.ceil(100 * (lost.video - lastlost.video) / delta.video) : 0;\r\n\t        $(document).trigger('packetloss.jingle', [self.sid, loss]);\r\n\t      });\r\n\t    }\r\n\t  }, interval || 3000);\r\n\t  return this.statsinterval;\r\n\t};\r\n\t\r\n\tfunction getScreenXml(that, action) {\r\n\t  var localScreen = that.connection.jingle.localScreen;\r\n\t  var localSDP = that.peerconnection.peerconnection.localDescription.sdp;\r\n\t  var msid = \"\", ssrc = \"\", cname = \"\";\r\n\t  if (ms.getSemantics() == \"unified-plan\") {\r\n\t    var medias = localSDP.split('\\r\\nm=');\r\n\t    medias.forEach(function(media) {\r\n\t      var sdpMsid = SDPUtil.find_line(media, \"a=msid:\" + localScreen.id);\r\n\t      if (sdpMsid) {\r\n\t        msid = sdpMsid.split(\":\")[1];\r\n\t        var ssrcCname = SDPUtil.find_line(media, \"a=ssrc:\").split(\" \");\r\n\t        ssrc = ssrcCname[0].split(\":\")[1];\r\n\t        cname = ssrcCname[1].split(\":\")[1];\r\n\t      }\r\n\t    })\r\n\t  } else if (ms.getSemantics() == \"plan-b\") {\r\n\t    msid = localScreen.id + \" \" + localScreen.getVideoTracks()[0].id;\r\n\t    var ssrcs = SDPUtil.find_lines(localSDP, \"a=ssrc:\");\r\n\t    ssrcs.forEach(function (obj) {\r\n\t      if (obj.indexOf(msid) > -1) {\r\n\t        ssrc = obj.split(\" \")[0].split(\":\")[1];\r\n\t        cname = SDPUtil.find_line(localSDP, \"a=ssrc:\" + ssrc + \" \" + \"cname:\").split(\":\")[2];\r\n\t        return;\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t  if (ssrc != \"\" && cname != \"\" && msid != \"\") {\r\n\t    var xml = '<iq to=\"' + that.peerjid + '\" type=\"set\" xmlns=\"jabber:client\" from=\"' + that.connection.jid + '\" id=\"' + ms.getUniqueId(\"sendIQ\") + '\">' +\r\n\t        '<jingle xmlns=\"urn:xmpp:jingle:1\" action=\"' + action + '\" initiator=\"' + that.initiator + '\" sid=\"' + that.sid + '\">' +\r\n\t        '<content name=\"video\">' +\r\n\t        '<description xmlns=\"urn:xmpp:jingle:apps:rtp:1\" media=\"video\">';\r\n\t    xml += ms.createSourceParamsNode(ssrc, cname, msid);\r\n\t    xml += '</description>' +\r\n\t        '</content>' +\r\n\t        '</jingle>' +\r\n\t        '</iq>';\r\n\t    console.log('=====getScreenXml===' + action, xml);\r\n\t    return xml;\r\n\t  } else {\r\n\t    return null;\r\n\t  }\r\n\t}\r\n\tJingleSession.prototype.sourceOperation = function(source, cb, action){\r\n\t  var that = this;\r\n\t  var pc = that.peerconnection.peerconnection;\r\n\t  if (action == \"remove\") {\r\n\t    var xml = getScreenXml(that, \"source-remove\");\r\n\t    if (xml) {\r\n\t      that.connection.sendIQ(ms.textToXML(xml));\r\n\t      pc.setRemoteDescription(pc.remoteDescription,\r\n\t          function () {\r\n\t            pc.createAnswer(\r\n\t                function (answer) {\r\n\t                  pc.setLocalDescription(answer,function () {\r\n\t                      cb({\r\n\t                          code: 200,\r\n\t                          msg: 'remove source from connection complete',\r\n\t                          errorCode: ErrorCode.no_error\r\n\t                      })\r\n\t                  },function (e) {\r\n\t                    console.error('setLocalDescription failed', e);\r\n\t                  });\r\n\t                },\r\n\t                function (e) {\r\n\t                  console.error('createAnswer failed', e);\r\n\t                }\r\n\t            );\r\n\t          },\r\n\t          function (e) {\r\n\t            console.error('setRemoteDescription failed', e);\r\n\t          }\r\n\t      );\r\n\t    }\r\n\t  } else if (action == \"add\") {\r\n\t    var senders = pc.getSenders();\r\n\t    var flag = true;\r\n\t    senders.forEach(function (obj) {\r\n\t      if (obj.track && obj.track.label == \"screen:0:0\" && obj.replaceTrack) {\r\n\t        obj.replaceTrack(source.getVideoTracks()[0]);\r\n\t        flag = false;\r\n\t        return;\r\n\t      }\r\n\t    });\r\n\t    if (flag) {\r\n\t      that.connection.jingle.localScreen = source;\r\n\t      pc.addTrack(source.getVideoTracks()[0], source);\r\n\t    }\r\n\t    pc.setRemoteDescription(pc.remoteDescription,\r\n\t        function () {\r\n\t          pc.createAnswer(\r\n\t              function (answer) {\r\n\t                pc.setLocalDescription(answer);\r\n\t                var xml = getScreenXml(that, \"source-add\");\r\n\t                if (xml) {\r\n\t                  that.connection.sendIQ(ms.textToXML(xml));\r\n\t                }\r\n\t                cb({\r\n\t                    code: 200,\r\n\t                    msg: 'success add screen source !',\r\n\t                    response: source,\r\n\t                    errorCode: ErrorCode.no_error\r\n\t                })\r\n\t                $(document).trigger('mains.on.screen.share.start');\r\n\t              },\r\n\t              function (e) {\r\n\t                console.error('createAnswer failed', e);\r\n\t              }\r\n\t          );\r\n\t        },\r\n\t        function (e) {\r\n\t          console.error('setRemoteDescription failed', e);\r\n\t        }\r\n\t    );\r\n\t  }\r\n\t};\r\n\t\r\n\tJingleSession.prototype.replaceMediaTrack = function (newStream, oldStream, callback, replaceType) {\r\n\t    replaceType = (replaceType == 'audio') ? 'audio' : 'video';\r\n\t    var that = this;\r\n\t    var shallRemoveSender = that.getSendersByType(replaceType);\r\n\t    if (shallRemoveSender) {\r\n\t        if (ms.getSemantics() == \"unified-plan\" || ms.getSemantics() == \"firefox\") {\r\n\t            var senders = that.peerconnection.peerconnection.getSenders();\r\n\t            senders.forEach(function (obj) {\r\n\t                if (obj.track && obj.track.id == shallRemoveSender.track.id) {\r\n\t                    obj.replaceTrack(newStream.getTracks()[0]);\r\n\t                    return;\r\n\t                }\r\n\t            });\r\n\t        } else if (ms.getSemantics() == \"plan-b\") {\r\n\t            var pc = that.peerconnection.peerconnection;\r\n\t            var senders = that.peerconnection.peerconnection.getSenders();\r\n\t            senders.forEach(function (obj) {\r\n\t                if (obj.track && obj.track.id == shallRemoveSender.track.id) {\r\n\t                    if (obj.replaceTrack) {\r\n\t                        obj.replaceTrack(newStream.getTracks()[0]);\r\n\t                    } else {\r\n\t                        pc.removeTrack(shallRemoveSender);\r\n\t                        newStream.getTracks().forEach(function (track) {\r\n\t                            var sender = pc.addTrack(track, newStream);\r\n\t                            if (sender.track.kind == replaceType) {\r\n\t                                if (replaceType == 'video') {\r\n\t                                    that.peerconnection.localVideoSender = sender;\r\n\t                                    that.connection.jingle.localVideo = newStream;\r\n\t                                }\r\n\t                                if (replaceType == 'audio') {\r\n\t                                    that.peerconnection.localAudioSender = sender;\r\n\t                                    that.connection.jingle.localAudio = newStream;\r\n\t                                }\r\n\t                            }\r\n\t                        });\r\n\t\r\n\t                        var event = new Event('negotiationneeded');\r\n\t                        that.peerconnection.peerconnection.dispatchEvent(event);\r\n\t                        that.peerconnection.setRemoteDescription(that.peerconnection.remoteDescription, function () {\r\n\t                            console.info('set remote description success ');\r\n\t                            // create Answer\r\n\t                            that.peerconnection.createAnswer(function (modifiedAnswer) {\r\n\t                                console.log('create answer success : ',modifiedAnswer);\r\n\t                                var newSdp = that.replaceSdpSsrc(that.peerconnection.localDescription.sdp, modifiedAnswer.sdp, replaceType);\r\n\t                                modifiedAnswer.sdp = newSdp;\r\n\t                                console.log('answer modified : ',modifiedAnswer);\r\n\t                                that.peerconnection.setLocalDescription(modifiedAnswer, function () {\r\n\t                                    callback();\r\n\t                                }, function (error) {\r\n\t                                    console.error('set local description failed', error);\r\n\t                                });\r\n\t                            }, function (error) {\r\n\t                                console.error('create answer failed', error);\r\n\t                            })\r\n\t                        }, function (error) {\r\n\t                            console.error('set setRemoteDescription failed : ', error);\r\n\t                        });\r\n\t                    }\r\n\t                    return;\r\n\t                }\r\n\t            });\r\n\t        }\r\n\t    }\r\n\t    callback();\r\n\t};\r\n\t\r\n\tJingleSession.prototype.sendKeyframe = function () {\r\n\t  var pc = this.peerconnection.peerconnection;\r\n\t  console.log('sendkeyframe', pc.iceConnectionState);\r\n\t  if (pc.iceConnectionState != 'connected')  {\r\n\t    return;\r\n\t  }\r\n\t  pc.setRemoteDescription(\r\n\t      pc.remoteDescription,\r\n\t      function () {\r\n\t        pc.createAnswer(\r\n\t            function (answer) {\r\n\t              pc.setLocalDescription(\r\n\t                  answer,\r\n\t                  function () {\r\n\t                    // noop\r\n\t                  },\r\n\t                  function (err) {\r\n\t                    console.error('triggerKeyframe setLocalDescription failed', err);\r\n\t                  }\r\n\t              );\r\n\t            },\r\n\t            function (err) {\r\n\t              console.error('triggerKeyframe createAnswer failed', err);\r\n\t            }\r\n\t        );\r\n\t      },\r\n\t      function (err) {\r\n\t        console.error('triggerKeyframe setRemoteDescription failed', err);\r\n\t      }\r\n\t  );\r\n\t}\r\n\texports = module.exports = JingleSession;\r\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar SDP = __webpack_require__(37);\r\n\tvar ManisFunctions = __webpack_require__(27);\r\n\tvar simulcast = __webpack_require__(38);\r\n\tvar transform = __webpack_require__(39);\r\n\tvar ErrorCode = __webpack_require__(28);\r\n\t\r\n\t/**\r\n\t * Base class for ColibriFocus and JingleSession.\r\n\t * @param connection Strophe connection object\r\n\t * @param sid my session identifier(resource)\r\n\t * @constructor\r\n\t */\r\n\tfunction SessionBase(connection, sid) {\r\n\t  this.connection = connection;\r\n\t  this.sid = sid;\r\n\t\r\n\t  this.screenSender = null;\r\n\t  this.localVideoSender = null;\r\n\t  this.localAudioSender = null;\r\n\t  /**\r\n\t   * The indicator which determines whether the (local) video has been muted\r\n\t   * in response to a user command in contrast to an automatic decision made\r\n\t   * by the application logic.\r\n\t   */\r\n\t  this.videoMuteByUser = false;\r\n\t}\r\n\t\r\n\t\r\n\tSessionBase.prototype.modifySources = function (successCallback) {\r\n\t  var self = this;\r\n\t  if (this.peerconnection) {\r\n\t    var isNeedAnswer = false;\r\n\t    if (successCallback) {\r\n\t      isNeedAnswer = true;\r\n\t    }\r\n\t    this.peerconnection.modifySources(function () {\r\n\t      console.log(' will set local description , sid : ', self.sid);\r\n\t      $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n\t      if (successCallback) {\r\n\t        successCallback();\r\n\t      }\r\n\t    }, isNeedAnswer);\r\n\t  }\r\n\t\r\n\t};\r\n\t\r\n\tSessionBase.prototype.addSource = function (xmlJingle, fromJid) {\r\n\t  console.log(\"=============================addsource=======\", xmlJingle[0].outerHTML);\r\n\t  var elem = xmlJingle.find(\">content\");\r\n\t  console.log('handle source add content : ', elem, fromJid);\r\n\t\r\n\t  var self = this;\r\n\t  // FIXME: dirty waiting\r\n\t  if (!self.peerconnection.localDescription) {\r\n\t    console.warn(\"addSource - localDescription not ready yet\")\r\n\t    setTimeout(function () {\r\n\t        self.addSource(elem, fromJid);\r\n\t      },\r\n\t      200\r\n\t    );\r\n\t    return;\r\n\t  }\r\n\t\r\n\t  var videoNode = $(elem).find('description[media=\"video\"]') || null;\r\n\t  if(videoNode.length){\r\n\t    var videoSource = videoNode.find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')|| null;\r\n\t    if(videoSource){\r\n\t      var videoSSRC = videoSource.attr('ssrc') || null;\r\n\t      var jid = videoSource.attr('jid') || null;\r\n\t      var isScreen = videoSource.attr('screen') || false;\r\n\t      if(videoSSRC){\r\n\t        console.log('handle video source added : ', videoSSRC);\r\n\t        var removeSSRC = parseInt(videoSSRC);\r\n\t        ssrc2jid[removeSSRC] = jid;\r\n\t        ssrc2resolution[removeSSRC] = jid;\r\n\t        ssrc2videoType[removeSSRC] = jid;\r\n\t        if(isScreen.toString() == 'true'){\r\n\t          window.screenSSRC = videoSSRC;\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t\r\n\t  var audioNode = $(elem).find('description[media=\"audio\"]') || null;\r\n\t  if(audioNode.length){\r\n\t    var audioSource = audioNode.find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')|| null;\r\n\t    if(audioSource){\r\n\t      var audioSSRC = audioSource.attr('ssrc') || null;\r\n\t      var jid = videoSource.attr('jid') || null;\r\n\t      if(audioSSRC){\r\n\t        console.log('handle audio source added : ', audioSSRC);\r\n\t        var removeSSRC = parseInt(audioSSRC);\r\n\t        ssrc2jid[removeSSRC] = jid ;\r\n\t        ssrc2resolution[removeSSRC] = jid;\r\n\t        ssrc2videoType[removeSSRC] = jid;\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t\r\n\t  self.peerconnection.addSource(elem);\r\n\t\r\n\t  if (navigator.mozGetUserMedia){\r\n\t    self.modifySources(function (result) {\r\n\t      console.log('will create answer', result);\r\n\t    });\r\n\t  }else {\r\n\t    self.modifySources();\r\n\t  }\r\n\t};\r\n\t\r\n\tSessionBase.prototype.removeSource = function (elem, fromJid) {\r\n\t\r\n\t  console.log('handle source remove content : ', elem, fromJid);\r\n\t  var self = this;\r\n\t  // FIXME: dirty waiting\r\n\t  if (!self.peerconnection.localDescription) {\r\n\t    console.warn(\"removeSource - localDescription not ready yet\")\r\n\t    setTimeout(function () {\r\n\t        self.removeSource(elem, fromJid);\r\n\t      },\r\n\t      200\r\n\t    );\r\n\t    return;\r\n\t  }\r\n\t  self.peerconnection.removeSource(elem);\r\n\t\r\n\t  self.modifySources();\r\n\t\r\n\t\r\n\t  var videoNode = $(elem).find('description[media=\"video\"]') || null;\r\n\t  if(videoNode.length){\r\n\t    var videoSource = videoNode.find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')|| null;\r\n\t    if(videoSource){\r\n\t      var videoSSRC = videoSource.attr('ssrc') || null;\r\n\t      if(videoSSRC){\r\n\t        console.log('handle video source remove : ', videoSSRC);\r\n\t        var removeSSRC = parseInt(videoSSRC);\r\n\t        delete ssrc2jid[removeSSRC];\r\n\t        delete ssrc2resolution[removeSSRC];\r\n\t        delete ssrc2videoType[removeSSRC];\r\n\t        $(document).trigger('mains.on.stream.removed', ['video', videoSSRC, false]);\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t\r\n\t  var audioNode = $(elem).find('description[media=\"audio\"]') || null;\r\n\t  if(audioNode.length){\r\n\t    var audioSource = audioNode.find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')|| null;\r\n\t    if(audioSource){\r\n\t      var audioSSRC = audioSource.attr('ssrc') || null;\r\n\t      if(audioSSRC){\r\n\t        console.log('handle audio source remove : ', audioSSRC);\r\n\t        var removeSSRC = parseInt(audioSSRC);\r\n\t        delete ssrc2jid[removeSSRC];\r\n\t        delete ssrc2resolution[removeSSRC];\r\n\t        delete ssrc2videoType[removeSSRC];\r\n\t        $(document).trigger('mains.on.stream.removed', ['audio', audioSSRC, false]);\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t\r\n\t};\r\n\t\r\n\tSessionBase.prototype.getSendersByType = function (replaceType) {\r\n\t  var that = this;\r\n\t  var shallRemoveSender = (replaceType == 'video') ? that.peerconnection.localVideoSender : that.peerconnection.localAudioSender;\r\n\t  if(!shallRemoveSender){\r\n\t    var currentSenders = that.peerconnection.peerconnection.getSenders();\r\n\t    for(var i = 0; i < currentSenders.length; i++){\r\n\t      var sender = currentSenders[i];\r\n\t      if(sender.track.kind == replaceType && !shallRemoveSender){\r\n\t        shallRemoveSender = sender;\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t  return shallRemoveSender;\r\n\t};\r\n\t\r\n\tSessionBase.prototype.peerconnectionNegotiate = function (callback) {\r\n\t  var pc = this.peerconnection.peerconnection;\r\n\t  pc.setRemoteDescription(pc.remoteDescription, function () {\r\n\t    console.info('set remote description success ');\r\n\t    pc.createAnswer(function (modifiedAnswer) {\r\n\t      console.log('create answer success : ',modifiedAnswer);\r\n\t      pc.setLocalDescription(modifiedAnswer, function () {\r\n\t        callback();\r\n\t      }, function (err) {\r\n\t        console.error('set local description failed', err);\r\n\t      });\r\n\t    }, function (err) {\r\n\t      console.error('create answer failed', err);\r\n\t    })\r\n\t  }, function (err) {\r\n\t    console.error('====peerconnectionNegotiate==set remote description failed : ', err);\r\n\t  });\r\n\t};\r\n\t\r\n\t\r\n\tSessionBase.prototype.replaceSdpSsrc = function (oldSdp, newSdp, replaceType) {\r\n\t  console.log('oldSdp : ', '\\r\\n', transform.parse(oldSdp), '\\r\\n', replaceType);\r\n\t  console.log('newSdp : ', '\\r\\n', transform.parse(newSdp), '\\r\\n', replaceType);\r\n\t\r\n\t  var oldSdpObject = transform.parse(oldSdp);\r\n\t  // record old sdp ssrcs for compare adn replace in new sdp\r\n\t  var oldSdpSSRCs = [];\r\n\t  if(oldSdpObject.media && oldSdpObject.media.length){\r\n\t    oldSdpObject.media.forEach(function (media) {\r\n\t      if(media.type == replaceType){\r\n\t        oldSdpSSRCs = media.ssrcs.map(function(ssrcLine){\r\n\t          return ssrcLine.id;\r\n\t        })\r\n\t      }\r\n\t    })\r\n\t  }\r\n\t  console.log('old sdp ', replaceType, ' ssrcs : ', oldSdpSSRCs);\r\n\t\r\n\t  var newSdpObject = transform.parse(newSdp);\r\n\t\r\n\t  var newSdpSSRCs = [];\r\n\t  if(newSdpObject.media && newSdpObject.media.length){\r\n\t    newSdpObject.media.forEach(function (media) {\r\n\t      if(media.type == replaceType){\r\n\t        newSdpSSRCs = media.ssrcs.map(function(ssrcLine){\r\n\t          return ssrcLine.id;\r\n\t        })\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t\r\n\t  console.log('new sdp ', replaceType, ' ssrcs : ', newSdpSSRCs);\r\n\t\r\n\t  var replaceObject = {};\r\n\t\r\n\t  for(var i = 0; i < newSdpSSRCs.length; i++){\r\n\t    var newSSRC = newSdpSSRCs[i];\r\n\t    for(var j = 0; j < oldSdpSSRCs.length; j++){\r\n\t      var oldSSRC = oldSdpSSRCs[j];\r\n\t      if(newSdpSSRCs.indexOf(oldSSRC) == -1 && oldSdpSSRCs.indexOf(newSSRC) == -1){\r\n\t        replaceObject.from = newSSRC;\r\n\t        replaceObject.to = oldSSRC;\r\n\t      }\r\n\t\r\n\t    }\r\n\t  }\r\n\t\r\n\t  console.log('sdp replace to : ', replaceObject);\r\n\t\r\n\t\r\n\t  if(newSdpObject.media && newSdpObject.media.length){\r\n\t    newSdpObject.media.forEach(function (media) {\r\n\t      if(media.type == replaceType){\r\n\t        var replacedSSRCs = media.ssrcs.map(function(ssrcLine){\r\n\t          if(ssrcLine.id == replaceObject.from){\r\n\t            ssrcLine.id = replaceObject.to;\r\n\t          }\r\n\t          return ssrcLine;\r\n\t        });\r\n\t        media.ssrcs = replacedSSRCs;\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t\r\n\t  console.log('sdp replaced : ', newSdpObject);\r\n\t\r\n\t  return transform.write(newSdpObject);\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * Switches video streams.\r\n\t * @param new_stream new stream that will be used as video of this session.\r\n\t * @param oldStream old video stream of this session.\r\n\t * @param success_callback callback executed after successful stream switch.\r\n\t */\r\n\tSessionBase.prototype.switchStreams = function (new_stream, oldStream, success_callback) {\r\n\t  console.log('old stream : ', oldStream, ' new stream : ', new_stream);\r\n\t  var self = this;\r\n\t\r\n\t  // Stop the stream to trigger onended event for old stream\r\n\t  if (oldStream.getAudioTracks().length) {\r\n\t    oldStream.getAudioTracks().forEach(function (track) {\r\n\t      track.stop();\r\n\t    });\r\n\t  }\r\n\t\r\n\t  if (oldStream.getVideoTracks().length) {\r\n\t    oldStream.getVideoTracks().forEach(function (track) {\r\n\t      track.stop();\r\n\t    });\r\n\t  }\r\n\t\r\n\t  // Remember SDP to figure out added/removed SSRCs\r\n\t  var oldSdp = null;\r\n\t  if (self.peerconnection) {\r\n\t    if (self.peerconnection.localDescription) {\r\n\t      oldSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n\t    }\r\n\t    self.peerconnection.removeStream(oldStream, true);\r\n\t    self.peerconnection.addStream(new_stream);\r\n\t  }\r\n\t\r\n\t  self.connection.jingle.localVideo = new_stream;\r\n\t\r\n\t  self.connection.jingle.localStreams = [];\r\n\t\r\n\t  //in firefox we have only one stream object\r\n\t  if (self.connection.jingle.localAudio != self.connection.jingle.localVideo)\r\n\t    self.connection.jingle.localStreams.push(self.connection.jingle.localAudio);\r\n\t  self.connection.jingle.localStreams.push(self.connection.jingle.localVideo);\r\n\t\r\n\t  // Conference is not active\r\n\t  if (!oldSdp || !self.peerconnection) {\r\n\t    success_callback();\r\n\t    return;\r\n\t  }\r\n\t\r\n\t  self.peerconnection.switchstreams = true;\r\n\t  self.modifySources(function () {\r\n\t    console.log('modify sources done');\r\n\t\r\n\t    success_callback();\r\n\t\r\n\t    var newSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n\t    console.log(\"SDPs\", oldSdp, newSdp);\r\n\t    self.notifyMySSRCUpdate(oldSdp, newSdp);\r\n\t  });\r\n\t\r\n\t};\r\n\t\r\n\tSessionBase.prototype.removeScreen = function (oldStream, success_callback) {\r\n\t\r\n\t  var self = this;\r\n\t  // Stop the stream to trigger onended event for old stream\r\n\t\r\n\t  if (oldStream.getAudioTracks().length) {\r\n\t    oldStream.getAudioTracks().forEach(function (track) {\r\n\t      track.stop();\r\n\t    });\r\n\t  }\r\n\t\r\n\t  if (oldStream.getVideoTracks().length) {\r\n\t    oldStream.getVideoTracks().forEach(function (track) {\r\n\t      track.stop();\r\n\t    });\r\n\t  }\r\n\t\r\n\t  // Remember SDP to figure out added/removed SSRCs\r\n\t  var oldSdp = null;\r\n\t  if (self.peerconnection) {\r\n\t    if (self.peerconnection.localDescription) {\r\n\t      oldSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n\t    }\r\n\t    console.log(' peerconnection ', self.peerconnection, self.peerconnection.peerconnection.removeTrack);\r\n\t    if(self.peerconnection.peerconnection.removeTrack != undefined){\r\n\t      self.peerconnection.peerconnection.removeTrack(self.screenSender);\r\n\t      console.log(' remove screen track', self.screenSender);\r\n\t    }else {\r\n\t      self.peerconnection.removeStream(oldStream, true);\r\n\t    }\r\n\t  }\r\n\t  //\r\n\t  //\r\n\t  self.connection.jingle.localStreams = [];\r\n\t\r\n\t  //in firefox we have only one stream object\r\n\t  if (self.connection.jingle.localAudio != self.connection.jingle.localVideo)\r\n\t    self.connection.jingle.localStreams.push(self.connection.jingle.localAudio);\r\n\t  self.connection.jingle.localStreams.push(self.connection.jingle.localVideo);\r\n\t\r\n\t  // Conference is not active\r\n\t  if (!oldSdp || !self.peerconnection) {\r\n\t    connection.jingle.localScreen = null;\r\n\t    success_callback({\r\n\t      code: 200,\r\n\t      msg: 'remove source from connection complete',\r\n\t      errorCode: ErrorCode.no_error\r\n\t    });\r\n\t    return;\r\n\t  }\r\n\t\r\n\t  self.peerconnection.switchstreams = true;\r\n\t  self.modifySources(function () {\r\n\t    console.log('modify sources done');\r\n\t    connection.jingle.localScreen = null;\r\n\t    success_callback({\r\n\t      code: 200,\r\n\t      msg: 'remove source from connection complete',\r\n\t      errorCode: ErrorCode.no_error\r\n\t    });\r\n\t\r\n\t    var newSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n\t    console.log(\"SDPs\", oldSdp, newSdp);\r\n\t    self.notifyMySSRCUpdate(oldSdp, newSdp);\r\n\t  });\r\n\t};\r\n\t\r\n\t\r\n\tSessionBase.prototype.addScreen = function (screenStream, successCallback) {\r\n\t  var self = this;\r\n\t\r\n\t  var oldSdp = null;\r\n\t  if (self.peerconnection) {\r\n\t    if (self.peerconnection.localDescription) {\r\n\t      oldSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n\t    }\r\n\t    console.log(' peerconnection ', self.peerconnection, self.peerconnection.peerconnection.addTrack);\r\n\t    if(self.peerconnection.peerconnection.addTrack != undefined){\r\n\t      var track = screenStream.getVideoTracks()[0];\r\n\t      var screenSender = self.peerconnection.peerconnection.addTrack(track, screenStream);\r\n\t      self.screenSender = screenSender;\r\n\t      console.log(' add screen track', screenSender);\r\n\t    }else {\r\n\t      self.peerconnection.addStream(screenStream);\r\n\t    }\r\n\t  }\r\n\t  self.connection.jingle.localScreen = screenStream;\r\n\t\r\n\t  self.connection.jingle.localStreams = [];\r\n\t\r\n\t  //in firefox we have only one stream object\r\n\t  if (self.connection.jingle.localAudio != self.connection.jingle.localScreen)\r\n\t    self.connection.jingle.localStreams.push(self.connection.jingle.localScreen);\r\n\t  self.connection.jingle.localStreams.push(self.connection.jingle.localScreen);\r\n\t\r\n\t  if (!oldSdp || !self.peerconnection) {\r\n\t    successCallback({\r\n\t      code: 402,\r\n\t      msg: 'Conference is not active',\r\n\t      errorCode: ErrorCode.conference_room_wait_others\r\n\t    });\r\n\t    return;\r\n\t  }\r\n\t  self.peerconnection.switchstreams = true;\r\n\t  self.modifySources(function () {\r\n\t    console.log('modify sources done');\r\n\t\r\n\t    successCallback({\r\n\t      code: 200,\r\n\t      msg: 'success add screen source !',\r\n\t      response: screenStream,\r\n\t      errorCode: ErrorCode.no_error\r\n\t    });\r\n\t\r\n\t    var newSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n\t    console.log(\"SDPs\", oldSdp, newSdp);\r\n\t    self.notifyMySSRCUpdate(oldSdp, newSdp);\r\n\t    $(document).trigger('mains.on.screen.share.start');\r\n\t  });\r\n\t};\r\n\t\r\n\tSessionBase.prototype.removeLocalStream = function (removeStreams, success_callback) {\r\n\t\r\n\t  var self = this;\r\n\t  var senders = [];\r\n\t  // Stop the stream to trigger onended event for old stream\r\n\t  if(removeStreams.length){\r\n\t    for (var i = 0; i < removeStreams.length; i++) {\r\n\t      var stream = removeStreams[i];\r\n\t      if (stream.getAudioTracks().length) {\r\n\t        stream.getAudioTracks().forEach(function (track) {\r\n\t          track.stop();\r\n\t        });\r\n\t        senders.push(self.localAudioSender);\r\n\t      }\r\n\t      if (stream.getVideoTracks().length) {\r\n\t        stream.getVideoTracks().forEach(function (track) {\r\n\t          track.stop();\r\n\t        });\r\n\t        senders.push(self.localVideoSender);\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t  // console.warn('Active sends: ', senders, ' local audio sender:', self.localAudioSender, ' local video sender: ', self.localVideoSender);\r\n\t  // Remember SDP to figure out added/removed SSRCs\r\n\t  var oldSdp = null;\r\n\t  if (self.peerconnection) {\r\n\t    if (self.peerconnection.localDescription) {\r\n\t      oldSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n\t    }\r\n\t    console.log(' peerconnection ', self.peerconnection, self.peerconnection.peerconnection.removeTrack);\r\n\t    if(self.peerconnection.peerconnection.removeTrack != undefined){\r\n\t      if(senders){\r\n\t        for (var j = 0; j < senders.length; j++) {\r\n\t          var sender = senders[j];\r\n\t          self.peerconnection.peerconnection.removeTrack(sender);\r\n\t          console.log(' remove screen track', sender);\r\n\t        }\r\n\t        self.localVideoSender = null;\r\n\t        self.localAudioSender = null;\r\n\t      }\r\n\t    }else {\r\n\t      for (var k = 0; k < removeStreams; k++) {\r\n\t        var stream = removeStreams[k];\r\n\t        self.peerconnection.removeStream(stream, true);\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t\r\n\t  // Conference is not active\r\n\t  if (!oldSdp || !self.peerconnection) {\r\n\t    connection.jingle.localScreen = null;\r\n\t    success_callback({\r\n\t      code: 200,\r\n\t      msg: 'remove source from connection complete',\r\n\t      errorCode: ErrorCode.no_error\r\n\t    });\r\n\t    return;\r\n\t  }\r\n\t\r\n\t  self.peerconnection.switchstreams = true;\r\n\t  self.modifySources(function () {\r\n\t    console.log('modify sources done');\r\n\t    connection.jingle.localScreen = null;\r\n\t    success_callback({\r\n\t      code: 200,\r\n\t      msg: 'remove source from connection complete',\r\n\t      errorCode: ErrorCode.no_error\r\n\t    });\r\n\t\r\n\t    var newSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n\t    console.log(\"SDPs\", oldSdp, newSdp);\r\n\t    self.notifyMySSRCUpdate(oldSdp, newSdp);\r\n\t  });\r\n\t};\r\n\t\r\n\tSessionBase.prototype.addLocalStream = function (localMediaStream, successCallback) {\r\n\t  var self = this;\r\n\t\r\n\t  var oldSdp = null;\r\n\t  if (self.peerconnection) {\r\n\t    if (self.peerconnection.localDescription) {\r\n\t      oldSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n\t    }\r\n\t    console.log(' peerconnection ', self.peerconnection, self.peerconnection.peerconnection.addTrack);\r\n\t    if(self.peerconnection.peerconnection.addTrack != undefined){\r\n\t      // var track = screenStream.getVideoTracks()[0];\r\n\t      // var screenSender = self.peerconnection.peerconnection.addTrack(track, screenStream);\r\n\t      // self.screenSender = screenSender;\r\n\t      // console.log(' add screen track', screenSender);\r\n\t\r\n\t      if (window.webkitMediaStream) {\r\n\t        var audioStream = new webkitMediaStream();\r\n\t        var videoStream = new webkitMediaStream();\r\n\t        var audioTracks = localMediaStream.getAudioTracks();\r\n\t        var videoTracks = localMediaStream.getVideoTracks();\r\n\t        for (var i = 0; i < audioTracks.length; i++) {\r\n\t          audioStream.addTrack(audioTracks[i]);\r\n\t        }\r\n\t        for (i = 0; i < videoTracks.length; i++) {\r\n\t          videoStream.addTrack(videoTracks[i]);\r\n\t        }\r\n\t        connection.jingle.localAudio = audioStream;\r\n\t        connection.jingle.localVideo = videoStream;\r\n\t      } else {\r\n\t        connection.jingle.localAudio = localMediaStream;\r\n\t        connection.jingle.localVideo = localMediaStream;\r\n\t      }\r\n\t      // @Todo add track\r\n\t      localMediaStream.getTracks().forEach(function (track) {\r\n\t        var sender = self.peerconnection.peerconnection.addTrack(\r\n\t          track,\r\n\t          localMediaStream\r\n\t        );\r\n\t        if (sender.track.kind == 'video' && !self.localVideoSender) {\r\n\t          self.localVideoSender = sender;\r\n\t        }\r\n\t        if (sender.track.kind == 'audio' && !self.localAudioSender) {\r\n\t          self.localAudioSender = sender;\r\n\t        }\r\n\t      });\r\n\t    }else {\r\n\t      console.warn('add track is undefined, switch to add stream');\r\n\t      self.peerconnection.addStream(localMediaStream);\r\n\t    }\r\n\t  }\r\n\t\r\n\t  self.connection.jingle.localStreams = [];\r\n\t\r\n\t  self.connection.jingle.localStreams.push(self.connection.jingle.localAudio);\r\n\t  self.connection.jingle.localStreams.push(self.connection.jingle.localVideo);\r\n\t\r\n\t  if (!oldSdp || !self.peerconnection) {\r\n\t    successCallback({\r\n\t      code: 402,\r\n\t      msg: 'Conference is not active',\r\n\t      errorCode: ErrorCode.conference_room_wait_others\r\n\t    });\r\n\t    return;\r\n\t  }\r\n\t  self.peerconnection.switchstreams = true;\r\n\t  self.modifySources(function () {\r\n\t    console.log('modify sources done');\r\n\t\r\n\t    successCallback({\r\n\t      code: 200,\r\n\t      msg: 'success add screen source !',\r\n\t      response: localMediaStream,\r\n\t      errorCode: ErrorCode.no_error\r\n\t    });\r\n\t\r\n\t    var newSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n\t    console.log(\"SDPs\", oldSdp, newSdp);\r\n\t    self.notifyMySSRCUpdate(oldSdp, newSdp);\r\n\t    // $(document).trigger('mains.on.screen.share.start');\r\n\t  });\r\n\t};\r\n\t\r\n\t/**\r\n\t * Figures out added/removed ssrcs and send update IQs.\r\n\t * @param old_sdp SDP object for old description.\r\n\t * @param new_sdp SDP object for new description.\r\n\t */\r\n\tSessionBase.prototype.notifyMySSRCUpdate = function (old_sdp, new_sdp) {\r\n\t\r\n\t  var old_media = old_sdp.getMediaSsrcMap();\r\n\t  var new_media = new_sdp.getMediaSsrcMap();\r\n\t  //console.log(\"old/new medias: \", old_media, new_media);\r\n\t\r\n\t  var toAdd = old_sdp.getNewMedia(new_sdp);\r\n\t  var toRemove = new_sdp.getNewMedia(old_sdp);\r\n\t  //console.log(\"to add\", toAdd);\r\n\t  //console.log(\"to remove\", toRemove);\r\n\t  if (Object.keys(toRemove).length > 0) {\r\n\t    this.sendSSRCUpdate(toRemove, null, false);\r\n\t  }\r\n\t  if (Object.keys(toAdd).length > 0) {\r\n\t    this.sendSSRCUpdate(toAdd, null, true);\r\n\t  }\r\n\t  if (Object.keys(toAdd).length > 0 && Object.keys(toRemove).length <= 0) {\r\n\t    // 增加了新流\r\n\t    console.log(\"to add\", toAdd);\r\n\t    var toAddSSRC = null;\r\n\t    Object.keys(toAdd).forEach(function (index) {\r\n\t      var element = toAdd[index];\r\n\t      if (element.ssrcs) {\r\n\t        Object.keys(element.ssrcs).forEach(function (indexTow) {\r\n\t          toAddSSRC = indexTow;\r\n\t        })\r\n\t      }\r\n\t    });\r\n\t    // if (toAddSSRC) {\r\n\t    //   // start share second stream\r\n\t    //   setTimeout(function () {\r\n\t    //     ManisFunctions.sendChangeMainBlockSourceMsg(Strophe.getResourceFromJid(connection.jid), toAddSSRC, function (result) {\r\n\t    //       console.log('notice set new stream to main complete');\r\n\t    //     }, true)\r\n\t    //   }, 1000);\r\n\t    // }\r\n\t  }\r\n\t  if (Object.keys(toAdd).length <= 0 && Object.keys(toRemove).length > 0) {\r\n\t    // 移除了流\r\n\t    console.log(\"to remove\", toRemove);\r\n\t    var toRemoveSSRC = null;\r\n\t    Object.keys(toRemove).forEach(function (index) {\r\n\t      var element = toRemove[index];\r\n\t      if (element.ssrcs) {\r\n\t        Object.keys(element.ssrcs).forEach(function (indexTow) {\r\n\t          toRemoveSSRC = indexTow;\r\n\t        })\r\n\t      }\r\n\t    });\r\n\t    if (toRemoveSSRC) {\r\n\t      // stop share second stream\r\n\t      ManisFunctions.sendHardRemoveStreamMsg(Strophe.getResourceFromJid(connection.jid), toRemoveSSRC, function (result) {\r\n\t        console.log('notice hard remove stream complete', result);\r\n\t      })\r\n\t    }\r\n\t  }\r\n\t};\r\n\t\r\n\t/**\r\n\t * Empty method that does nothing by default. It should send SSRC update IQs to session participants.\r\n\t * @param sdpMediaSsrcs array of\r\n\t * @param fromJid\r\n\t * @param isAdd\r\n\t */\r\n\tSessionBase.prototype.sendSSRCUpdate = function (sdpMediaSsrcs, fromJid, isAdd) {\r\n\t  //FIXME: put default implementation here(maybe from JingleSession?)\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sends SSRC update IQ.\r\n\t * @param sdpMediaSsrcs SSRCs map obtained from SDP.getNewMedia. Cntains SSRCs to add/remove.\r\n\t * @param sid session identifier that will be put into the IQ.\r\n\t * @param initiator initiator identifier.\r\n\t * @param toJid destination Jid\r\n\t * @param isAdd indicates if this is remove or add operation.\r\n\t */\r\n\tSessionBase.prototype.sendSSRCUpdateIq = function (sdpMediaSsrcs, sid, initiator, toJid, isAdd) {\r\n\t\r\n\t  var self = this;\r\n\t  var modify = $iq({to: toJid, type: 'set'})\r\n\t    .c('jingle', {\r\n\t        xmlns: 'urn:xmpp:jingle:1',\r\n\t        action: isAdd ? 'source-add' : 'source-remove',\r\n\t        initiator: initiator,\r\n\t        sid: sid\r\n\t      }\r\n\t    );\r\n\t  // FIXME: only announce video ssrcs since we mix audio and dont need\r\n\t  //      the audio ssrcs therefore\r\n\t  var modified = false;\r\n\t  Object.keys(sdpMediaSsrcs).forEach(function (channelNum) {\r\n\t    modified = true;\r\n\t    var channel = sdpMediaSsrcs[channelNum];\r\n\t    modify.c('content', {name: channel.mediaType});\r\n\t\r\n\t    modify.c('description', {xmlns: 'urn:xmpp:jingle:apps:rtp:1', media: channel.mediaType});\r\n\t    // FIXME: not completly sure this operates on blocks and / or handles different ssrcs correctly\r\n\t    // generate sources from lines\r\n\t    Object.keys(channel.ssrcs).forEach(function (ssrcNum) {\r\n\t      var mediaSsrc = channel.ssrcs[ssrcNum];\r\n\t      modify.c('source', {xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'});\r\n\t      modify.attrs({ssrc: mediaSsrc.ssrc});\r\n\t      // iterate over ssrc lines\r\n\t      mediaSsrc.lines.forEach(function (line) {\r\n\t        var idx = line.indexOf(' ');\r\n\t        var kv = line.substr(idx + 1);\r\n\t        modify.c('parameter');\r\n\t        if (kv.indexOf(':') == -1) {\r\n\t          modify.attrs({name: kv});\r\n\t        } else {\r\n\t          modify.attrs({name: kv.split(':', 2)[0]});\r\n\t          modify.attrs({value: kv.split(':', 2)[1]});\r\n\t        }\r\n\t        modify.up(); // end of parameter\r\n\t      });\r\n\t      modify.up(); // end of source\r\n\t    });\r\n\t\r\n\t    // generate source groups from lines\r\n\t    channel.ssrcGroups.forEach(function (ssrcGroup) {\r\n\t      if (ssrcGroup.ssrcs.length != 0) {\r\n\t\r\n\t        modify.c('ssrc-group', {\r\n\t          semantics: ssrcGroup.semantics,\r\n\t          xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'\r\n\t        });\r\n\t\r\n\t        ssrcGroup.ssrcs.forEach(function (ssrc) {\r\n\t          modify.c('source', {ssrc: ssrc})\r\n\t            .up(); // end of source\r\n\t        });\r\n\t        modify.up(); // end of ssrc-group\r\n\t      }\r\n\t    });\r\n\t\r\n\t    modify.up(); // end of description\r\n\t    modify.up(); // end of content\r\n\t  });\r\n\t  if (modified) {\r\n\t    self.connection.sendIQ(modify,\r\n\t      function (res) {\r\n\t        console.info('got modify result', res);\r\n\t      },\r\n\t      function (err) {\r\n\t        console.error('got modify error', err);\r\n\t      }\r\n\t    );\r\n\t  } else {\r\n\t    console.log('modification not necessary');\r\n\t  }\r\n\t};\r\n\t\r\n\t/**\r\n\t * Determines whether the (local) video is mute i.e. all video tracks are\r\n\t * disabled.\r\n\t *\r\n\t * @return <tt>true</tt> if the (local) video is mute i.e. all video tracks are\r\n\t * disabled; otherwise, <tt>false</tt>\r\n\t */\r\n\tSessionBase.prototype.isVideoMute = function () {\r\n\t  var tracks = connection.jingle.localVideo.getVideoTracks();\r\n\t  var mute = true;\r\n\t\r\n\t  for (var i = 0; i < tracks.length; ++i) {\r\n\t    if (tracks[i].enabled) {\r\n\t      mute = false;\r\n\t      break;\r\n\t    }\r\n\t  }\r\n\t  return mute;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Mutes/unmutes the (local) video i.e. enables/disables all video tracks.\r\n\t *\r\n\t * @param mute <tt>true</tt> to mute the (local) video i.e. to disable all video\r\n\t * tracks; otherwise, <tt>false</tt>\r\n\t * @param callback a function to be invoked with <tt>mute</tt> after all video\r\n\t * tracks have been enabled/disabled. The function may, optionally, return\r\n\t * another function which is to be invoked after the whole mute/unmute operation\r\n\t * has completed successfully.\r\n\t * @param options an object which specifies optional arguments such as the\r\n\t * <tt>boolean</tt> key <tt>byUser</tt> with default value <tt>true</tt> which\r\n\t * specifies whether the method was initiated in response to a user command (in\r\n\t * contrast to an automatic decision made by the application logic)\r\n\t */\r\n\tSessionBase.prototype.setVideoMute = function (mute, callback, options) {\r\n\t  var byUser;\r\n\t\r\n\t  if (options) {\r\n\t    byUser = options.byUser;\r\n\t    if (typeof byUser === 'undefined') {\r\n\t      byUser = true;\r\n\t    }\r\n\t  } else {\r\n\t    byUser = true;\r\n\t  }\r\n\t  // The user's command to mute the (local) video takes precedence over any\r\n\t  // automatic decision made by the application logic.\r\n\t  if (byUser) {\r\n\t    this.videoMuteByUser = mute;\r\n\t  } else if (this.videoMuteByUser) {\r\n\t    return;\r\n\t  }\r\n\t  var tracks = connection.jingle.localVideo.getVideoTracks();\r\n\t\r\n\t  for (var i = 0; i < tracks.length; ++i) {\r\n\t    tracks[i].enabled = !mute;\r\n\t  }\r\n\t\r\n\t  if (this.peerconnection) {\r\n\t    this.peerconnection.hardMuteVideo(mute);\r\n\t  }\r\n\t\r\n\t  console.log('switch video mute complete and will modify source');\r\n\t  // 屏幕分享中,关闭视频只关闭本地视频流.不需重新协商.屏幕分享关闭,重开视频流需要重新协商\r\n\t  if(window.isUsingScreenStream == true){\r\n\t    this.modifySources(callback(mute));\r\n\t  }else {\r\n\t    this.modifySources(function () {\r\n\t      callback(mute);\r\n\t    });\r\n\t  }\r\n\t};\r\n\t\r\n\t// SDP-based mute by going recvonly/sendrecv\r\n\t// FIXME: should probably black out the screen as well\r\n\tSessionBase.prototype.toggleVideoMute = function (callback) {\r\n\t  setVideoMute(isVideoMute(), callback);\r\n\t};\r\n\t\r\n\texports = module.exports = SessionBase;\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar SDPUtil = __webpack_require__(30);\r\n\t\r\n\t/**\r\n\t * Class holds a=ssrc lines and media type a=mid\r\n\t * @param ssrc synchronization source identifier number(a=ssrc lines from SDP)\r\n\t * @param type media type eg. \"audio\" or \"video\"(a=mid frm SDP)\r\n\t * @constructor\r\n\t */\r\n\tfunction ChannelSsrc(ssrc, type) {\r\n\t  this.ssrc = ssrc;\r\n\t  this.type = type;\r\n\t  this.lines = [];\r\n\t}\r\n\t\r\n\t/**\r\n\t * Class holds a=ssrc-group: lines\r\n\t * @param semantics\r\n\t * @param ssrcs\r\n\t * @constructor\r\n\t */\r\n\tfunction ChannelSsrcGroup(semantics, ssrcs, line) {\r\n\t  this.semantics = semantics;\r\n\t  this.ssrcs = ssrcs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Helper class represents media channel. Is a container for ChannelSsrc, holds channel idx and media type.\r\n\t * @param channelNumber channel idx in SDP media array.\r\n\t * @param mediaType media type(a=mid)\r\n\t * @constructor\r\n\t */\r\n\tfunction MediaChannel(channelNumber, mediaType) {\r\n\t  /**\r\n\t   * SDP channel number\r\n\t   * @type {*}\r\n\t   */\r\n\t  this.chNumber = channelNumber;\r\n\t  /**\r\n\t   * Channel media type(a=mid)\r\n\t   * @type {*}\r\n\t   */\r\n\t  this.mediaType = mediaType;\r\n\t  /**\r\n\t   * The maps of ssrc numbers to ChannelSsrc objects.\r\n\t   */\r\n\t  this.ssrcs = {};\r\n\t\r\n\t  /**\r\n\t   * The array of ChannelSsrcGroup objects.\r\n\t   * @type {Array}\r\n\t   */\r\n\t  this.ssrcGroups = [];\r\n\t}\r\n\t\r\n\t\r\n\t/* jshint -W117 */\r\n\t// SDP STUFF\r\n\tfunction SDP(sdp) {\r\n\t  this.media = sdp.split('\\r\\nm=');\r\n\t  for (var i = 1; i < this.media.length; i++) {\r\n\t    this.media[i] = 'm=' + this.media[i];\r\n\t    if (i != this.media.length - 1) {\r\n\t      this.media[i] += '\\r\\n';\r\n\t    }\r\n\t  }\r\n\t  this.session = this.media.shift() + '\\r\\n';\r\n\t  this.raw = this.session + this.media.join('');\r\n\t}\r\n\t/**\r\n\t * Returns map of MediaChannel mapped per channel idx.\r\n\t */\r\n\tSDP.prototype.getMediaSsrcMap = function () {\r\n\t  var self = this;\r\n\t  var media_ssrcs = {};\r\n\t  for (channelNum = 0; channelNum < self.media.length; channelNum++) {\r\n\t    modified = true;\r\n\t    tmp = SDPUtil.find_lines(self.media[channelNum], 'a=ssrc:');\r\n\t    var type = SDPUtil.parse_mid(SDPUtil.find_line(self.media[channelNum], 'a=mid:'));\r\n\t    var channel = new MediaChannel(channelNum, type);\r\n\t    media_ssrcs[channelNum] = channel;\r\n\t    tmp.forEach(function (line) {\r\n\t      var linessrc = line.substring(7).split(' ')[0];\r\n\t      // allocate new ChannelSsrc\r\n\t      if (!channel.ssrcs[linessrc]) {\r\n\t        channel.ssrcs[linessrc] = new ChannelSsrc(linessrc, type);\r\n\t      }\r\n\t      channel.ssrcs[linessrc].lines.push(line);\r\n\t    });\r\n\t    tmp = SDPUtil.find_lines(self.media[channelNum], 'a=ssrc-group:');\r\n\t    tmp.forEach(function (line) {\r\n\t      var semantics = line.substr(0, idx).substr(13);\r\n\t      var ssrcs = line.substr(14 + semantics.length).split(' ');\r\n\t      if (ssrcs.length != 0) {\r\n\t        var ssrcGroup = new ChannelSsrcGroup(semantics, ssrcs);\r\n\t        channel.ssrcGroups.push(ssrcGroup);\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t  return media_ssrcs;\r\n\t};\r\n\t/**\r\n\t * Returns <tt>true</tt> if this SDP contains given SSRC.\r\n\t * @param ssrc the ssrc to check.\r\n\t * @returns {boolean} <tt>true</tt> if this SDP contains given SSRC.\r\n\t */\r\n\tSDP.prototype.containsSSRC = function (ssrc) {\r\n\t  var channels = this.getMediaSsrcMap();\r\n\t  var contains = false;\r\n\t  Object.keys(channels).forEach(function (chNumber) {\r\n\t    var channel = channels[chNumber];\r\n\t    //console.log(\"Check\", channel, ssrc);\r\n\t    if (Object.keys(channel.ssrcs).indexOf(ssrc) != -1) {\r\n\t      contains = true;\r\n\t    }\r\n\t  });\r\n\t  return contains;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns map of MediaChannel that contains only media not contained in <tt>otherSdp</tt>. Mapped by channel idx.\r\n\t * @param otherSdp the other SDP to check ssrc with.\r\n\t */\r\n\tSDP.prototype.getNewMedia = function (otherSdp) {\r\n\t\r\n\t  // this could be useful in Array.prototype.\r\n\t  function arrayEquals(array) {\r\n\t    // if the other array is a falsy value, return\r\n\t    if (!array)\r\n\t      return false;\r\n\t\r\n\t    // compare lengths - can save a lot of time\r\n\t    if (this.length != array.length)\r\n\t      return false;\r\n\t\r\n\t    for (var i = 0, l = this.length; i < l; i++) {\r\n\t      // Check if we have nested arrays\r\n\t      if (this[i] instanceof Array && array[i] instanceof Array) {\r\n\t        // recurse into the nested arrays\r\n\t        if (!this[i].equals(array[i]))\r\n\t          return false;\r\n\t      }\r\n\t      else if (this[i] != array[i]) {\r\n\t        // Warning - two different object instances will never be equal: {x:20} != {x:20}\r\n\t        return false;\r\n\t      }\r\n\t    }\r\n\t    return true;\r\n\t  }\r\n\t\r\n\t  var myMedia = this.getMediaSsrcMap();\r\n\t  var othersMedia = otherSdp.getMediaSsrcMap();\r\n\t  var newMedia = {};\r\n\t  Object.keys(othersMedia).forEach(function (channelNum) {\r\n\t    var myChannel = myMedia[channelNum];\r\n\t    var othersChannel = othersMedia[channelNum];\r\n\t    if (!myChannel && othersChannel) {\r\n\t      // Add whole channel\r\n\t      newMedia[channelNum] = othersChannel;\r\n\t      return;\r\n\t    }\r\n\t    // Look for new ssrcs accross the channel\r\n\t    Object.keys(othersChannel.ssrcs).forEach(function (ssrc) {\r\n\t      if (Object.keys(myChannel.ssrcs).indexOf(ssrc) === -1) {\r\n\t        // Allocate channel if we've found ssrc that doesn't exist in our channel\r\n\t        if (!newMedia[channelNum]) {\r\n\t          newMedia[channelNum] = new MediaChannel(othersChannel.chNumber, othersChannel.mediaType);\r\n\t        }\r\n\t        newMedia[channelNum].ssrcs[ssrc] = othersChannel.ssrcs[ssrc];\r\n\t      }\r\n\t    });\r\n\t\r\n\t    // Look for new ssrc groups across the channels\r\n\t    othersChannel.ssrcGroups.forEach(function (otherSsrcGroup) {\r\n\t\r\n\t      // try to match the other ssrc-group with an ssrc-group of ours\r\n\t      var matched = false;\r\n\t      for (var i = 0; i < myChannel.ssrcGroups.length; i++) {\r\n\t        var mySsrcGroup = myChannel.ssrcGroups[i];\r\n\t        if (otherSsrcGroup.semantics == mySsrcGroup.semantics\r\n\t          && arrayEquals.apply(otherSsrcGroup.ssrcs, [mySsrcGroup.ssrcs])) {\r\n\t\r\n\t          matched = true;\r\n\t          break;\r\n\t        }\r\n\t      }\r\n\t\r\n\t      if (!matched) {\r\n\t        // Allocate channel if we've found an ssrc-group that doesn't\r\n\t        // exist in our channel\r\n\t\r\n\t        if (!newMedia[channelNum]) {\r\n\t          newMedia[channelNum] = new MediaChannel(othersChannel.chNumber, othersChannel.mediaType);\r\n\t        }\r\n\t        newMedia[channelNum].ssrcGroups.push(otherSsrcGroup);\r\n\t      }\r\n\t    });\r\n\t  });\r\n\t  return newMedia;\r\n\t};\r\n\t\r\n\t// remove iSAC and CN from SDP\r\n\tSDP.prototype.mangle = function () {\r\n\t  var i, j, mline, lines, rtpmap, newdesc;\r\n\t  for (i = 0; i < this.media.length; i++) {\r\n\t    lines = this.media[i].split('\\r\\n');\r\n\t    lines.pop(); // remove empty last element\r\n\t    mline = SDPUtil.parse_mline(lines.shift());\r\n\t    if (mline.media != 'audio')\r\n\t      continue;\r\n\t    newdesc = '';\r\n\t    mline.fmt.length = 0;\r\n\t    for (j = 0; j < lines.length; j++) {\r\n\t      if (lines[j].substr(0, 9) == 'a=rtpmap:') {\r\n\t        rtpmap = SDPUtil.parse_rtpmap(lines[j]);\r\n\t        if (rtpmap.name == 'CN' || rtpmap.name == 'ISAC')\r\n\t          continue;\r\n\t        mline.fmt.push(rtpmap.id);\r\n\t        newdesc += lines[j] + '\\r\\n';\r\n\t      } else {\r\n\t        newdesc += lines[j] + '\\r\\n';\r\n\t      }\r\n\t    }\r\n\t    this.media[i] = SDPUtil.build_mline(mline) + '\\r\\n';\r\n\t    this.media[i] += newdesc;\r\n\t  }\r\n\t  this.raw = this.session + this.media.join('');\r\n\t};\r\n\t\r\n\t// remove lines matching prefix from session section\r\n\tSDP.prototype.removeSessionLines = function (prefix) {\r\n\t  var self = this;\r\n\t  var lines = SDPUtil.find_lines(this.session, prefix);\r\n\t  lines.forEach(function (line) {\r\n\t    self.session = self.session.replace(line + '\\r\\n', '');\r\n\t  });\r\n\t  this.raw = this.session + this.media.join('');\r\n\t  return lines;\r\n\t}\r\n\t// remove lines matching prefix from a media section specified by mediaindex\r\n\t// TODO: non-numeric mediaindex could match mid\r\n\tSDP.prototype.removeMediaLines = function (mediaindex, prefix) {\r\n\t  var self = this;\r\n\t  var lines = SDPUtil.find_lines(this.media[mediaindex], prefix);\r\n\t  lines.forEach(function (line) {\r\n\t    self.media[mediaindex] = self.media[mediaindex].replace(line + '\\r\\n', '');\r\n\t  });\r\n\t  this.raw = this.session + this.media.join('');\r\n\t  return lines;\r\n\t}\r\n\t\r\n\t// add content's to a jingle element\r\n\tSDP.prototype.toJingle = function (elem, thecreator, ssrcs) {\r\n\t//    console.log(\"SSRC\" + ssrcs[\"audio\"] + \" - \" + ssrcs[\"video\"]);\r\n\t  var i, j, k, mline, ssrc, rtpmap, tmp, line, lines;\r\n\t  var self = this;\r\n\t  // new bundle plan\r\n\t  if (SDPUtil.find_line(this.session, 'a=group:')) {\r\n\t    lines = SDPUtil.find_lines(this.session, 'a=group:');\r\n\t    for (i = 0; i < lines.length; i++) {\r\n\t      tmp = lines[i].split(' ');\r\n\t      var semantics = tmp.shift().substr(8);\r\n\t      elem.c('group', {xmlns: 'urn:xmpp:jingle:apps:grouping:0', semantics: semantics});\r\n\t      for (j = 0; j < tmp.length; j++) {\r\n\t        elem.c('content', {name: tmp[j]}).up();\r\n\t      }\r\n\t      elem.up();\r\n\t    }\r\n\t  }\r\n\t  for (i = 0; i < this.media.length; i++) {\r\n\t    mline = SDPUtil.parse_mline(this.media[i].split('\\r\\n')[0]);\r\n\t    if (!(mline.media === 'audio' ||\r\n\t      mline.media === 'video' ||\r\n\t      mline.media === 'application')) {\r\n\t      continue;\r\n\t    }\r\n\t    if (SDPUtil.find_line(this.media[i], 'a=ssrc:')) {\r\n\t      ssrc = SDPUtil.find_line(this.media[i], 'a=ssrc:').substring(7).split(' ')[0]; // take the first\r\n\t    } else {\r\n\t      if (ssrcs && ssrcs[mline.media]) {\r\n\t        ssrc = ssrcs[mline.media];\r\n\t      }\r\n\t      else\r\n\t        ssrc = false;\r\n\t    }\r\n\t\r\n\t    elem.c('content', {creator: thecreator, name: mline.media});\r\n\t    if (SDPUtil.find_line(this.media[i], 'a=mid:')) {\r\n\t      // prefer identifier from a=mid if present\r\n\t      var mid = SDPUtil.parse_mid(SDPUtil.find_line(this.media[i], 'a=mid:'));\r\n\t      elem.attrs({name: mid});\r\n\t    }\r\n\t\r\n\t    if (SDPUtil.find_line(this.media[i], 'a=rtpmap:').length) {\r\n\t      elem.c('description',\r\n\t        {\r\n\t          xmlns: 'urn:xmpp:jingle:apps:rtp:1',\r\n\t          media: mline.media\r\n\t        });\r\n\t      if (ssrc) {\r\n\t        elem.attrs({ssrc: ssrc});\r\n\t      }\r\n\t      for (j = 0; j < mline.fmt.length; j++) {\r\n\t        rtpmap = SDPUtil.find_line(this.media[i], 'a=rtpmap:' + mline.fmt[j]);\r\n\t        elem.c('payload-type', SDPUtil.parse_rtpmap(rtpmap));\r\n\t        // put any 'a=fmtp:' + mline.fmt[j] lines into <param name=foo value=bar/>\r\n\t        if (SDPUtil.find_line(this.media[i], 'a=fmtp:' + mline.fmt[j])) {\r\n\t          tmp = SDPUtil.parse_fmtp(SDPUtil.find_line(this.media[i], 'a=fmtp:' + mline.fmt[j]));\r\n\t          for (k = 0; k < tmp.length; k++) {\r\n\t            elem.c('parameter', tmp[k]).up();\r\n\t          }\r\n\t        }\r\n\t        this.RtcpFbToJingle(i, elem, mline.fmt[j]); // XEP-0293 -- map a=rtcp-fb\r\n\t\r\n\t        elem.up();\r\n\t      }\r\n\t      if (SDPUtil.find_line(this.media[i], 'a=crypto:', this.session)) {\r\n\t        elem.c('encryption', {required: 1});\r\n\t        var crypto = SDPUtil.find_lines(this.media[i], 'a=crypto:', this.session);\r\n\t        crypto.forEach(function (line) {\r\n\t          elem.c('crypto', SDPUtil.parse_crypto(line)).up();\r\n\t        });\r\n\t        elem.up(); // end of encryption\r\n\t      }\r\n\t\r\n\t      if (ssrc) {\r\n\t        // new style mapping\r\n\t        elem.c('source', {ssrc: ssrc, xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'});\r\n\t        // FIXME: group by ssrc and support multiple different ssrcs\r\n\t        var ssrclines = SDPUtil.find_lines(this.media[i], 'a=ssrc:');\r\n\t        if (ssrclines.length > 0) {\r\n\t          ssrclines.forEach(function (line) {\r\n\t            console.log('ssrc line BBBBBBBBBBBBBBBBBBBB: ', line);\r\n\t            idx = line.indexOf(' ');\r\n\t            var linessrc = line.substr(0, idx).substr(7);\r\n\t            if (linessrc != ssrc) {\r\n\t              elem.up();\r\n\t              ssrc = linessrc;\r\n\t              elem.c('source', {ssrc: ssrc, xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'});\r\n\t            }\r\n\t            var kv = line.substr(idx + 1);\r\n\t            elem.c('parameter');\r\n\t            if (kv.indexOf(':') == -1) {\r\n\t              elem.attrs({name: kv});\r\n\t            } else {\r\n\t              elem.attrs({name: kv.split(':', 2)[0]});\r\n\t              elem.attrs({value: kv.split(':', 2)[1]});\r\n\t            }\r\n\t            elem.up();\r\n\t\r\n\t            if (SDPUtil.find_line(self.media[i], 'a=msid:').length){\r\n\t              var msidLine  = SDPUtil.find_line(self.media[i], 'a=msid:');\r\n\t              console.log('msid line CCCCCCCCCCCCCCCCCCC', msidLine);\r\n\t\r\n\t              elem.c('parameter').attrs({name: 'msid', value: msidLine.split(':', 2)[1]}).up();\r\n\t              elem.c('parameter').attrs({name: 'mslabel', value: (msidLine.split(':', 2)[1]).split(' ', 2)[0]}).up();\r\n\t              elem.c('parameter').attrs({name: 'label', value: (msidLine.split(':', 2)[1]).split(' ', 2)[1]}).up();\r\n\t\r\n\t            }\r\n\t          });\r\n\t          elem.up();\r\n\t        }\r\n\t        else {\r\n\t          elem.up();\r\n\t          elem.c('source', {ssrc: ssrc, xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'});\r\n\t          elem.c('parameter');\r\n\t          elem.attrs({name: \"cname\", value: Math.random().toString(36).substring(7)});\r\n\t          elem.up();\r\n\t          var msid = null;\r\n\t          if (mline.media == \"audio\") {\r\n\t            msid = connection.jingle.localAudio.getAudioTracks()[0].id;\r\n\t          }\r\n\t          else {\r\n\t            msid = connection.jingle.localVideo.getVideoTracks()[0].id;\r\n\t          }\r\n\t          if (msid != null) {\r\n\t            msid = msid.replace(/[\\{,\\}]/g, \"\");\r\n\t            elem.c('parameter');\r\n\t            elem.attrs({name: \"msid\", value: msid});\r\n\t            elem.up();\r\n\t            elem.c('parameter');\r\n\t            elem.attrs({name: \"mslabel\", value: msid});\r\n\t            elem.up();\r\n\t            elem.c('parameter');\r\n\t            elem.attrs({name: \"label\", value: msid});\r\n\t            elem.up();\r\n\t            elem.up();\r\n\t          }\r\n\t\r\n\t\r\n\t        }\r\n\t\r\n\t        // XEP-0339 handle ssrc-group attributes\r\n\t        var ssrc_group_lines = SDPUtil.find_lines(this.media[i], 'a=ssrc-group:');\r\n\t        ssrc_group_lines.forEach(function (line) {\r\n\t          idx = line.indexOf(' ');\r\n\t          var semantics = line.substr(0, idx).substr(13);\r\n\t          var ssrcs = line.substr(14 + semantics.length).split(' ');\r\n\t          if (ssrcs.length != 0) {\r\n\t            elem.c('ssrc-group', {semantics: semantics, xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'});\r\n\t            ssrcs.forEach(function (ssrc) {\r\n\t              elem.c('source', {ssrc: ssrc})\r\n\t                .up();\r\n\t            });\r\n\t            elem.up();\r\n\t          }\r\n\t        });\r\n\t      }\r\n\t\r\n\t      if (SDPUtil.find_line(this.media[i], 'a=rtcp-mux')) {\r\n\t        elem.c('rtcp-mux').up();\r\n\t      }\r\n\t\r\n\t      // XEP-0293 -- map a=rtcp-fb:*\r\n\t      this.RtcpFbToJingle(i, elem, '*');\r\n\t\r\n\t      // XEP-0294\r\n\t      if (SDPUtil.find_line(this.media[i], 'a=extmap:')) {\r\n\t        lines = SDPUtil.find_lines(this.media[i], 'a=extmap:');\r\n\t        for (j = 0; j < lines.length; j++) {\r\n\t          tmp = SDPUtil.parse_extmap(lines[j]);\r\n\t          elem.c('rtp-hdrext', {\r\n\t            xmlns: 'urn:xmpp:jingle:apps:rtp:rtp-hdrext:0',\r\n\t            uri: tmp.uri,\r\n\t            id: tmp.value\r\n\t          });\r\n\t          if (tmp.hasOwnProperty('direction')) {\r\n\t            switch (tmp.direction) {\r\n\t              case 'sendonly':\r\n\t                elem.attrs({senders: 'responder'});\r\n\t                break;\r\n\t              case 'recvonly':\r\n\t                elem.attrs({senders: 'initiator'});\r\n\t                break;\r\n\t              case 'sendrecv':\r\n\t                elem.attrs({senders: 'both'});\r\n\t                break;\r\n\t              case 'inactive':\r\n\t                elem.attrs({senders: 'none'});\r\n\t                break;\r\n\t            }\r\n\t          }\r\n\t          // TODO: handle params\r\n\t          elem.up();\r\n\t        }\r\n\t      }\r\n\t      elem.up(); // end of description\r\n\t    }\r\n\t\r\n\t    // map ice-ufrag/pwd, dtls fingerprint, candidates\r\n\t    this.TransportToJingle(i, elem);\r\n\t\r\n\t    if (SDPUtil.find_line(this.media[i], 'a=sendrecv', this.session)) {\r\n\t      elem.attrs({senders: 'both'});\r\n\t    } else if (SDPUtil.find_line(this.media[i], 'a=sendonly', this.session)) {\r\n\t      elem.attrs({senders: 'initiator'});\r\n\t    } else if (SDPUtil.find_line(this.media[i], 'a=recvonly', this.session)) {\r\n\t      elem.attrs({senders: 'responder'});\r\n\t    } else if (SDPUtil.find_line(this.media[i], 'a=inactive', this.session)) {\r\n\t      elem.attrs({senders: 'none'});\r\n\t    }\r\n\t    if (mline.port == '0') {\r\n\t      // estos hack to reject an m-line\r\n\t      elem.attrs({senders: 'rejected'});\r\n\t    }\r\n\t    elem.up(); // end of content\r\n\t  }\r\n\t  elem.up();\r\n\t  return elem;\r\n\t};\r\n\t\r\n\tSDP.prototype.TransportToJingle = function (mediaindex, elem) {\r\n\t  var i = mediaindex;\r\n\t  var tmp;\r\n\t  var self = this;\r\n\t  elem.c('transport');\r\n\t\r\n\t  // XEP-0343 DTLS/SCTP\r\n\t  if (SDPUtil.find_line(this.media[mediaindex], 'a=sctpmap:').length) {\r\n\t    var sctpmap = SDPUtil.find_line(\r\n\t      this.media[i], 'a=sctpmap:', self.session);\r\n\t    if (sctpmap) {\r\n\t      var sctpAttrs = SDPUtil.parse_sctpmap(sctpmap);\r\n\t      elem.c('sctpmap',\r\n\t        {\r\n\t          xmlns: 'urn:xmpp:jingle:transports:dtls-sctp:1',\r\n\t          number: sctpAttrs[0], /* SCTP port */\r\n\t          protocol: sctpAttrs[1], /* protocol */\r\n\t        });\r\n\t      // Optional stream count attribute\r\n\t      if (sctpAttrs.length > 2)\r\n\t        elem.attrs({streams: sctpAttrs[2]});\r\n\t      elem.up();\r\n\t    }\r\n\t  }\r\n\t  // XEP-0320\r\n\t  var fingerprints = SDPUtil.find_lines(this.media[mediaindex], 'a=fingerprint:', this.session);\r\n\t  fingerprints.forEach(function (line) {\r\n\t    tmp = SDPUtil.parse_fingerprint(line);\r\n\t    tmp.xmlns = 'urn:xmpp:jingle:apps:dtls:0';\r\n\t    elem.c('fingerprint').t(tmp.fingerprint);\r\n\t    delete tmp.fingerprint;\r\n\t    line = SDPUtil.find_line(self.media[mediaindex], 'a=setup:', self.session);\r\n\t    if (line) {\r\n\t      tmp.setup = line.substr(8);\r\n\t    }\r\n\t    elem.attrs(tmp);\r\n\t    elem.up(); // end of fingerprint\r\n\t  });\r\n\t  tmp = SDPUtil.iceparams(this.media[mediaindex], this.session);\r\n\t  if (tmp) {\r\n\t    tmp.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\r\n\t    elem.attrs(tmp);\r\n\t    // XEP-0176\r\n\t    if (SDPUtil.find_line(this.media[mediaindex], 'a=candidate:', this.session)) { // add any a=candidate lines\r\n\t      var lines = SDPUtil.find_lines(this.media[mediaindex], 'a=candidate:', this.session);\r\n\t      lines.forEach(function (line) {\r\n\t        elem.c('candidate', SDPUtil.candidateToJingle(line)).up();\r\n\t      });\r\n\t    }\r\n\t  }\r\n\t  elem.up(); // end of transport\r\n\t}\r\n\t\r\n\tSDP.prototype.RtcpFbToJingle = function (mediaindex, elem, payloadtype) { // XEP-0293\r\n\t  var lines = SDPUtil.find_lines(this.media[mediaindex], 'a=rtcp-fb:' + payloadtype);\r\n\t  lines.forEach(function (line) {\r\n\t    var tmp = SDPUtil.parse_rtcpfb(line);\r\n\t    if (tmp.type == 'trr-int') {\r\n\t      elem.c('rtcp-fb-trr-int', {xmlns: 'urn:xmpp:jingle:apps:rtp:rtcp-fb:0', value: tmp.params[0]});\r\n\t      elem.up();\r\n\t    } else {\r\n\t      elem.c('rtcp-fb', {xmlns: 'urn:xmpp:jingle:apps:rtp:rtcp-fb:0', type: tmp.type});\r\n\t      if (tmp.params.length > 0) {\r\n\t        elem.attrs({'subtype': tmp.params[0]});\r\n\t      }\r\n\t      elem.up();\r\n\t    }\r\n\t  });\r\n\t};\r\n\t\r\n\tSDP.prototype.RtcpFbFromJingle = function (elem, payloadtype) { // XEP-0293\r\n\t  var media = '';\r\n\t  var tmp = elem.find('>rtcp-fb-trr-int[xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\"]');\r\n\t  if (tmp.length) {\r\n\t    media += 'a=rtcp-fb:' + '*' + ' ' + 'trr-int' + ' ';\r\n\t    if (tmp.attr('value')) {\r\n\t      media += tmp.attr('value');\r\n\t    } else {\r\n\t      media += '0';\r\n\t    }\r\n\t    media += '\\r\\n';\r\n\t  }\r\n\t  tmp = elem.find('>rtcp-fb[xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\"]');\r\n\t  tmp.each(function () {\r\n\t    media += 'a=rtcp-fb:' + payloadtype + ' ' + $(this).attr('type');\r\n\t    if ($(this).attr('subtype')) {\r\n\t      media += ' ' + $(this).attr('subtype');\r\n\t    }\r\n\t    media += '\\r\\n';\r\n\t  });\r\n\t  return media;\r\n\t};\r\n\t\r\n\t// construct an SDP from a jingle stanza\r\n\tSDP.prototype.fromJingle = function (jingle) {\r\n\t  var self = this;\r\n\t  this.raw = 'v=0\\r\\n' +\r\n\t    'o=- ' + '1923518516' + ' 2 IN IP4 0.0.0.0\\r\\n' +// FIXME\r\n\t    's=-\\r\\n' +\r\n\t    't=0 0\\r\\n'\r\n\t  // http://tools.ietf.org/html/draft-ietf-mmusic-sdp-bundle-negotiation-04#section-8\r\n\t  if ($(jingle).find('>group[xmlns=\"urn:xmpp:jingle:apps:grouping:0\"]').length) {\r\n\t    $(jingle).find('>group[xmlns=\"urn:xmpp:jingle:apps:grouping:0\"]').each(function (idx, group) {\r\n\t      var contents = $(group).find('>content').map(function (idx, content) {\r\n\t        return content.getAttribute('name');\r\n\t      }).get();\r\n\t      if (contents.length > 0) {\r\n\t        self.raw += 'a=group:' + (group.getAttribute('semantics') || group.getAttribute('type')) + ' ' + contents.join(' ') + '\\r\\n';\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t\r\n\t  this.session = this.raw;\r\n\t  jingle.find('>content').each(function () {\r\n\t    var m = self.jingle2media($(this));\r\n\t    self.media.push(m);\r\n\t  });\r\n\t\r\n\t  // reconstruct msid-semantic -- apparently not necessary\r\n\t  /*\r\n\t   var msid = SDPUtil.parse_ssrc(this.raw);\r\n\t   if (msid.hasOwnProperty('mslabel')) {\r\n\t   this.session += \"a=msid-semantic: WMS \" + msid.mslabel + \"\\r\\n\";\r\n\t   }\r\n\t   */\r\n\t\r\n\t  this.raw = this.session + this.media.join('');\r\n\t};\r\n\t\r\n\t// translate a jingle content element into an an SDP media part\r\n\tSDP.prototype.jingle2media = function (content) {\r\n\t  var media = '',\r\n\t    desc = content.find('description'),\r\n\t    ssrc = desc.attr('ssrc'),\r\n\t    self = this,\r\n\t    tmp;\r\n\t  var sctp = content.find(\r\n\t    '>transport>sctpmap[xmlns=\"urn:xmpp:jingle:transports:dtls-sctp:1\"]');\r\n\t\r\n\t  tmp = {media: desc.attr('media')};\r\n\t  tmp.port = '1';\r\n\t  if (content.attr('senders') == 'rejected') {\r\n\t    // estos hack to reject an m-line.\r\n\t    tmp.port = '0';\r\n\t  }\r\n\t  if (content.find('>transport>fingerprint').length || desc.find('encryption').length) {\r\n\t    if (sctp.length)\r\n\t      tmp.proto = 'DTLS/SCTP';\r\n\t    else\r\n\t      // tmp.proto = 'RTP/SAVPF';\r\n\t    tmp.proto = 'UDP/TLS/RTP/SAVPF';\r\n\t  } else {\r\n\t    tmp.proto = 'RTP/AVPF';\r\n\t  }\r\n\t  if (!sctp.length) {\r\n\t    tmp.fmt = desc.find('payload-type').map(\r\n\t      function () {\r\n\t        return this.getAttribute('id');\r\n\t      }).get();\r\n\t    media += SDPUtil.build_mline(tmp) + '\\r\\n';\r\n\t  }\r\n\t  else {\r\n\t    media += 'm=application 1 DTLS/SCTP ' + sctp.attr('number') + '\\r\\n';\r\n\t    media += 'a=sctpmap:' + sctp.attr('number') +\r\n\t      ' ' + sctp.attr('protocol');\r\n\t\r\n\t    var streamCount = sctp.attr('streams');\r\n\t    if (streamCount)\r\n\t      media += ' ' + streamCount + '\\r\\n';\r\n\t    else\r\n\t      media += '\\r\\n';\r\n\t  }\r\n\t\r\n\t  media += 'c=IN IP4 0.0.0.0\\r\\n';\r\n\t  if (!sctp.length)\r\n\t    media += 'a=rtcp:1 IN IP4 0.0.0.0\\r\\n';\r\n\t  tmp = content.find('>transport[xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\"]');\r\n\t  if (tmp.length) {\r\n\t    if (tmp.attr('ufrag')) {\r\n\t      media += SDPUtil.build_iceufrag(tmp.attr('ufrag')) + '\\r\\n';\r\n\t    }\r\n\t    if (tmp.attr('pwd')) {\r\n\t      media += SDPUtil.build_icepwd(tmp.attr('pwd')) + '\\r\\n';\r\n\t    }\r\n\t    tmp.find('>fingerprint').each(function () {\r\n\t      // FIXME: check namespace at some point\r\n\t      media += 'a=fingerprint:' + this.getAttribute('hash');\r\n\t      media += ' ' + $(this).text();\r\n\t      media += '\\r\\n';\r\n\t      if (this.getAttribute('setup')) {\r\n\t        media += 'a=setup:' + this.getAttribute('setup') + '\\r\\n';\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t  switch (content.attr('senders')) {\r\n\t    case 'initiator':\r\n\t      media += 'a=sendonly\\r\\n';\r\n\t      break;\r\n\t    case 'responder':\r\n\t      media += 'a=recvonly\\r\\n';\r\n\t      break;\r\n\t    case 'none':\r\n\t      media += 'a=inactive\\r\\n';\r\n\t      break;\r\n\t    case 'both':\r\n\t      media += 'a=sendrecv\\r\\n';\r\n\t      break;\r\n\t  }\r\n\t  media += 'a=mid:' + content.attr('name') + '\\r\\n';\r\n\t\r\n\t  // <description><rtcp-mux/></description>\r\n\t  // see http://code.google.com/p/libjingle/issues/detail?id=309 -- no spec though\r\n\t  // and http://mail.jabber.org/pipermail/jingle/2011-December/001761.html\r\n\t  if (desc.find('rtcp-mux').length) {\r\n\t    media += 'a=rtcp-mux\\r\\n';\r\n\t  }\r\n\t\r\n\t  if (desc.find('encryption').length) {\r\n\t    desc.find('encryption>crypto').each(function () {\r\n\t      media += 'a=crypto:' + this.getAttribute('tag');\r\n\t      media += ' ' + this.getAttribute('crypto-suite');\r\n\t      media += ' ' + this.getAttribute('key-params');\r\n\t      if (this.getAttribute('session-params')) {\r\n\t        media += ' ' + this.getAttribute('session-params');\r\n\t      }\r\n\t      media += '\\r\\n';\r\n\t    });\r\n\t  }\r\n\t  desc.find('payload-type').each(function () {\r\n\t    media += SDPUtil.build_rtpmap(this) + '\\r\\n';\r\n\t    if ($(this).find('>parameter').length) {\r\n\t      media += 'a=fmtp:' + this.getAttribute('id') + ' ';\r\n\t      media += $(this).find('parameter').map(function () {\r\n\t        return (this.getAttribute('name') ? (this.getAttribute('name') + '=') : '') + this.getAttribute('value');\r\n\t      }).get().join('; ');\r\n\t      media += '\\r\\n';\r\n\t    }\r\n\t    // xep-0293\r\n\t    media += self.RtcpFbFromJingle($(this), this.getAttribute('id'));\r\n\t  });\r\n\t\r\n\t  // xep-0293\r\n\t  media += self.RtcpFbFromJingle(desc, '*');\r\n\t\r\n\t  // xep-0294\r\n\t  tmp = desc.find('>rtp-hdrext[xmlns=\"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0\"]');\r\n\t  tmp.each(function () {\r\n\t    media += 'a=extmap:' + this.getAttribute('id') + ' ' + this.getAttribute('uri') + '\\r\\n';\r\n\t  });\r\n\t  media += \"a=extmap:9 urn:ietf:params:rtp-hdrext:sdes:mid\\r\\n\";\r\n\t  content.find('>transport[xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\"]>candidate').each(function () {\r\n\t    media += SDPUtil.candidateFromJingle(this);\r\n\t  });\r\n\t\r\n\t  // XEP-0339 handle ssrc-group attributes\r\n\t  tmp = content.find('description>ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]').each(function () {\r\n\t    var semantics = this.getAttribute('semantics');\r\n\t    var ssrcs = $(this).find('>source').map(function () {\r\n\t      return this.getAttribute('ssrc');\r\n\t    }).get();\r\n\t\r\n\t    if (ssrcs.length != 0) {\r\n\t      media += 'a=ssrc-group:' + semantics + ' ' + ssrcs.join(' ') + '\\r\\n';\r\n\t    }\r\n\t  });\r\n\t\r\n\t  tmp = content.find('description>source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]');\r\n\t  tmp.each(function () {\r\n\t    var ssrc = this.getAttribute('ssrc');\r\n\t    $(this).find('>parameter').each(function () {\r\n\t      media += 'a=ssrc:' + ssrc + ' ' + this.getAttribute('name');\r\n\t      if (this.getAttribute('value') && this.getAttribute('value').length)\r\n\t        media += ':' + this.getAttribute('value');\r\n\t      media += '\\r\\n';\r\n\t    });\r\n\t  });\r\n\t\r\n\t  return media;\r\n\t};\r\n\t\r\n\texports = module.exports = SDP;\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports) {\n\n\t/*jslint plusplus: true */\r\n\t/*jslint nomen: true*/\r\n\t\r\n\t/**\r\n\t *\r\n\t * @constructor\r\n\t */\r\n\tfunction SimulcastUtils() {\r\n\t  this.logger = new SimulcastLogger(\"SimulcastUtils\", 1);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t * @type {{}}\r\n\t * @private\r\n\t */\r\n\tSimulcastUtils.prototype._emptyCompoundIndex = {};\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param lines\r\n\t * @param videoSources\r\n\t * @private\r\n\t */\r\n\tSimulcastUtils.prototype._replaceVideoSources = function (lines, videoSources) {\r\n\t  var i, inVideo = false, index = -1, howMany = 0;\r\n\t\r\n\t  this.logger.info('Replacing video sources...');\r\n\t\r\n\t  for (i = 0; i < lines.length; i++) {\r\n\t    if (inVideo && lines[i].substring(0, 'm='.length) === 'm=') {\r\n\t      // Out of video.\r\n\t      break;\r\n\t    }\r\n\t\r\n\t    if (!inVideo && lines[i].substring(0, 'm=video '.length) === 'm=video ') {\r\n\t      // In video.\r\n\t      inVideo = true;\r\n\t    }\r\n\t\r\n\t    if (inVideo && (lines[i].substring(0, 'a=ssrc:'.length) === 'a=ssrc:'\r\n\t      || lines[i].substring(0, 'a=ssrc-group:'.length) === 'a=ssrc-group:')) {\r\n\t\r\n\t      if (index === -1) {\r\n\t        index = i;\r\n\t      }\r\n\t\r\n\t      howMany++;\r\n\t    }\r\n\t  }\r\n\t\r\n\t  //  efficiency baby ;)\r\n\t  lines.splice.apply(lines,\r\n\t    [index, howMany].concat(videoSources));\r\n\t\r\n\t};\r\n\t\r\n\tSimulcastUtils.prototype.isValidDescription = function (desc) {\r\n\t  return desc && desc != null\r\n\t    && desc.type && desc.type != ''\r\n\t    && desc.sdp && desc.sdp != '';\r\n\t};\r\n\t\r\n\tSimulcastUtils.prototype._getVideoSources = function (lines) {\r\n\t  var i, inVideo = false, sb = [];\r\n\t\r\n\t  this.logger.info('Getting video sources...');\r\n\t\r\n\t  for (i = 0; i < lines.length; i++) {\r\n\t    if (inVideo && lines[i].substring(0, 'm='.length) === 'm=') {\r\n\t      // Out of video.\r\n\t      break;\r\n\t    }\r\n\t\r\n\t    if (!inVideo && lines[i].substring(0, 'm=video '.length) === 'm=video ') {\r\n\t      // In video.\r\n\t      inVideo = true;\r\n\t    }\r\n\t\r\n\t    if (inVideo && lines[i].substring(0, 'a=ssrc:'.length) === 'a=ssrc:') {\r\n\t      // In SSRC.\r\n\t      sb.push(lines[i]);\r\n\t    }\r\n\t\r\n\t    if (inVideo && lines[i].substring(0, 'a=ssrc-group:'.length) === 'a=ssrc-group:') {\r\n\t      sb.push(lines[i]);\r\n\t    }\r\n\t  }\r\n\t\r\n\t  return sb;\r\n\t};\r\n\t\r\n\tSimulcastUtils.prototype.parseMedia = function (lines, mediatypes) {\r\n\t  var i, res = [], type, cur_media, idx, ssrcs, cur_ssrc, ssrc,\r\n\t    ssrc_attribute, group, semantics, skip = true;\r\n\t\r\n\t  this.logger.info('Parsing media sources...');\r\n\t\r\n\t  for (i = 0; i < lines.length; i++) {\r\n\t    if (lines[i].substring(0, 'm='.length) === 'm=') {\r\n\t\r\n\t      type = lines[i]\r\n\t        .substr('m='.length, lines[i].indexOf(' ') - 'm='.length);\r\n\t      skip = mediatypes !== undefined && mediatypes.indexOf(type) === -1;\r\n\t\r\n\t      if (!skip) {\r\n\t        cur_media = {\r\n\t          'type': type,\r\n\t          'sources': {},\r\n\t          'groups': []\r\n\t        };\r\n\t\r\n\t        res.push(cur_media);\r\n\t      }\r\n\t\r\n\t    } else if (!skip && lines[i].substring(0, 'a=ssrc:'.length) === 'a=ssrc:') {\r\n\t\r\n\t      idx = lines[i].indexOf(' ');\r\n\t      ssrc = lines[i].substring('a=ssrc:'.length, idx);\r\n\t      if (cur_media.sources[ssrc] === undefined) {\r\n\t        cur_ssrc = {'ssrc': ssrc};\r\n\t        cur_media.sources[ssrc] = cur_ssrc;\r\n\t      }\r\n\t\r\n\t      ssrc_attribute = lines[i].substr(idx + 1).split(':', 2)[0];\r\n\t      cur_ssrc[ssrc_attribute] = lines[i].substr(idx + 1).split(':', 2)[1];\r\n\t\r\n\t      if (cur_media.base === undefined) {\r\n\t        cur_media.base = cur_ssrc;\r\n\t      }\r\n\t\r\n\t    } else if (!skip && lines[i].substring(0, 'a=ssrc-group:'.length) === 'a=ssrc-group:') {\r\n\t      idx = lines[i].indexOf(' ');\r\n\t      semantics = lines[i].substr(0, idx).substr('a=ssrc-group:'.length);\r\n\t      ssrcs = lines[i].substr(idx).trim().split(' ');\r\n\t      group = {\r\n\t        'semantics': semantics,\r\n\t        'ssrcs': ssrcs\r\n\t      };\r\n\t      cur_media.groups.push(group);\r\n\t    } else if (!skip && (lines[i].substring(0, 'a=sendrecv'.length) === 'a=sendrecv' ||\r\n\t      lines[i].substring(0, 'a=recvonly'.length) === 'a=recvonly' ||\r\n\t      lines[i].substring(0, 'a=sendonly'.length) === 'a=sendonly' ||\r\n\t      lines[i].substring(0, 'a=inactive'.length) === 'a=inactive')) {\r\n\t\r\n\t      cur_media.direction = lines[i].substring('a='.length);\r\n\t    }\r\n\t  }\r\n\t\r\n\t  return res;\r\n\t};\r\n\t\r\n\t/**\r\n\t * The _indexOfArray() method returns the first a CompoundIndex at which a\r\n\t * given element can be found in the array, or _emptyCompoundIndex if it is\r\n\t * not present.\r\n\t *\r\n\t * Example:\r\n\t *\r\n\t * _indexOfArray('3', [ 'this is line 1', 'this is line 2', 'this is line 3' ])\r\n\t *\r\n\t * returns {row: 2, column: 14}\r\n\t *\r\n\t * @param needle\r\n\t * @param haystack\r\n\t * @param start\r\n\t * @returns {}\r\n\t * @private\r\n\t */\r\n\tSimulcastUtils.prototype._indexOfArray = function (needle, haystack, start) {\r\n\t  var length = haystack.length, idx, i;\r\n\t\r\n\t  if (!start) {\r\n\t    start = 0;\r\n\t  }\r\n\t\r\n\t  for (i = start; i < length; i++) {\r\n\t    idx = haystack[i].indexOf(needle);\r\n\t    if (idx !== -1) {\r\n\t      return {row: i, column: idx};\r\n\t    }\r\n\t  }\r\n\t  return this._emptyCompoundIndex;\r\n\t};\r\n\t\r\n\tSimulcastUtils.prototype._removeSimulcastGroup = function (lines) {\r\n\t  var i;\r\n\t\r\n\t  for (i = lines.length - 1; i >= 0; i--) {\r\n\t    if (lines[i].indexOf('a=ssrc-group:SIM') !== -1) {\r\n\t      lines.splice(i, 1);\r\n\t    }\r\n\t  }\r\n\t};\r\n\t\r\n\tSimulcastUtils.prototype._compileVideoSources = function (videoSources) {\r\n\t  var sb = [], ssrc, addedSSRCs = [];\r\n\t\r\n\t  this.logger.info('Compiling video sources...');\r\n\t\r\n\t  // Add the groups\r\n\t  if (videoSources.groups && videoSources.groups.length !== 0) {\r\n\t    videoSources.groups.forEach(function (group) {\r\n\t      if (group.ssrcs && group.ssrcs.length !== 0) {\r\n\t        sb.push([['a=ssrc-group:', group.semantics].join(''), group.ssrcs.join(' ')].join(' '));\r\n\t\r\n\t        // if (group.semantics !== 'SIM') {\r\n\t        group.ssrcs.forEach(function (ssrc) {\r\n\t          addedSSRCs.push(ssrc);\r\n\t          sb.splice.apply(sb, [sb.length, 0].concat([\r\n\t            [\"a=ssrc:\", ssrc, \" cname:\", videoSources.sources[ssrc].cname].join(''),\r\n\t            [\"a=ssrc:\", ssrc, \" msid:\", videoSources.sources[ssrc].msid].join('')]));\r\n\t        });\r\n\t        //}\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t\r\n\t  // Then add any free sources.\r\n\t  if (videoSources.sources) {\r\n\t    for (ssrc in videoSources.sources) {\r\n\t      if (addedSSRCs.indexOf(ssrc) === -1) {\r\n\t        sb.splice.apply(sb, [sb.length, 0].concat([\r\n\t          [\"a=ssrc:\", ssrc, \" cname:\", videoSources.sources[ssrc].cname].join(''),\r\n\t          [\"a=ssrc:\", ssrc, \" msid:\", videoSources.sources[ssrc].msid].join('')]));\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t\r\n\t  return sb;\r\n\t};\r\n\t\r\n\tfunction SimulcastReceiver() {\r\n\t  this.simulcastUtils = new SimulcastUtils();\r\n\t  this.logger = new SimulcastLogger('SimulcastReceiver', 1);\r\n\t}\r\n\t\r\n\tSimulcastReceiver.prototype._remoteVideoSourceCache = '';\r\n\tSimulcastReceiver.prototype._remoteMaps = {\r\n\t  msid2Quality: {},\r\n\t  ssrc2Msid: {},\r\n\t  msid2ssrc: {},\r\n\t  receivingVideoStreams: {}\r\n\t};\r\n\t\r\n\tSimulcastReceiver.prototype._cacheRemoteVideoSources = function (lines) {\r\n\t  this._remoteVideoSourceCache = this.simulcastUtils._getVideoSources(lines);\r\n\t};\r\n\t\r\n\tSimulcastReceiver.prototype._restoreRemoteVideoSources = function (lines) {\r\n\t  this.simulcastUtils._replaceVideoSources(lines, this._remoteVideoSourceCache);\r\n\t};\r\n\t\r\n\tSimulcastReceiver.prototype._ensureGoogConference = function (lines) {\r\n\t  var sb;\r\n\t\r\n\t  this.logger.info('Ensuring x-google-conference flag...')\r\n\t\r\n\t  if (this.simulcastUtils._indexOfArray('a=x-google-flag:conference', lines) === this.simulcastUtils._emptyCompoundIndex) {\r\n\t    // TODO(gp) do that for the audio as well as suggested by fippo.\r\n\t    // Add the google conference flag\r\n\t    sb = this.simulcastUtils._getVideoSources(lines);\r\n\t    sb = ['a=x-google-flag:conference'].concat(sb);\r\n\t    this.simulcastUtils._replaceVideoSources(lines, sb);\r\n\t  }\r\n\t};\r\n\t\r\n\tSimulcastReceiver.prototype._restoreSimulcastGroups = function (sb) {\r\n\t  this._restoreRemoteVideoSources(sb);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Restores the simulcast groups of the remote description. In\r\n\t * transformRemoteDescription we remove those in order for the set remote\r\n\t * description to succeed. The focus needs the signal the groups to new\r\n\t * participants.\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tSimulcastReceiver.prototype.reverseTransformRemoteDescription = function (desc) {\r\n\t  var sb;\r\n\t\r\n\t  if (!this.simulcastUtils.isValidDescription(desc)) {\r\n\t    return desc;\r\n\t  }\r\n\t\r\n\t  if (config.enableSimulcast) {\r\n\t    sb = desc.sdp.split('\\r\\n');\r\n\t\r\n\t    this._restoreSimulcastGroups(sb);\r\n\t\r\n\t    desc = new RTCSessionDescription({\r\n\t      type: desc.type,\r\n\t      sdp: sb.join('\\r\\n')\r\n\t    });\r\n\t  }\r\n\t\r\n\t  return desc;\r\n\t};\r\n\t\r\n\tSimulcastUtils.prototype._ensureOrder = function (lines) {\r\n\t  var videoSources, sb;\r\n\t\r\n\t  videoSources = this.parseMedia(lines, ['video'])[0];\r\n\t  sb = this._compileVideoSources(videoSources);\r\n\t\r\n\t  this._replaceVideoSources(lines, sb);\r\n\t};\r\n\t\r\n\tSimulcastReceiver.prototype._updateRemoteMaps = function (lines) {\r\n\t  var remoteVideoSources = this.simulcastUtils.parseMedia(lines, ['video'])[0],\r\n\t    videoSource, quality;\r\n\t\r\n\t  // (re) initialize the remote maps.\r\n\t  this._remoteMaps.msid2Quality = {};\r\n\t  this._remoteMaps.ssrc2Msid = {};\r\n\t  this._remoteMaps.msid2ssrc = {};\r\n\t\r\n\t  var self = this;\r\n\t  if (remoteVideoSources && remoteVideoSources.groups && remoteVideoSources.groups.length !== 0) {\r\n\t    remoteVideoSources.groups.forEach(function (group) {\r\n\t      if (group.semantics === 'SIM' && group.ssrcs && group.ssrcs.length !== 0) {\r\n\t        quality = 0;\r\n\t        group.ssrcs.forEach(function (ssrc) {\r\n\t          videoSource = remoteVideoSources.sources[ssrc];\r\n\t          self._remoteMaps.msid2Quality[videoSource.msid] = quality++;\r\n\t          self._remoteMaps.ssrc2Msid[videoSource.ssrc] = videoSource.msid;\r\n\t          self._remoteMaps.msid2ssrc[videoSource.msid] = videoSource.ssrc;\r\n\t        });\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t};\r\n\t\r\n\tSimulcastReceiver.prototype._setReceivingVideoStream = function (resource, ssrc) {\r\n\t  this._remoteMaps.receivingVideoStreams[resource] = ssrc;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a stream with single video track, the one currently being\r\n\t * received by this endpoint.\r\n\t *\r\n\t * @param stream the remote simulcast stream.\r\n\t * @returns {webkitMediaStream}\r\n\t */\r\n\tSimulcastReceiver.prototype.getReceivingVideoStream = function (stream) {\r\n\t  var tracks, i, electedTrack, msid, quality = 0, receivingTrackId;\r\n\t\r\n\t  var self = this;\r\n\t  if (config.enableSimulcast) {\r\n\t\r\n\t    stream.getVideoTracks().some(function (track) {\r\n\t      return Object.keys(self._remoteMaps.receivingVideoStreams).some(function (resource) {\r\n\t        var ssrc = self._remoteMaps.receivingVideoStreams[resource];\r\n\t        var msid = self._remoteMaps.ssrc2Msid[ssrc];\r\n\t        if (msid == [stream.id, track.id].join(' ')) {\r\n\t          electedTrack = track;\r\n\t          return true;\r\n\t        }\r\n\t      });\r\n\t    });\r\n\t\r\n\t    if (!electedTrack) {\r\n\t      // we don't have an elected track, choose by initial quality.\r\n\t      tracks = stream.getVideoTracks();\r\n\t      for (i = 0; i < tracks.length; i++) {\r\n\t        msid = [stream.id, tracks[i].id].join(' ');\r\n\t        if (this._remoteMaps.msid2Quality[msid] === quality) {\r\n\t          electedTrack = tracks[i];\r\n\t          break;\r\n\t        }\r\n\t      }\r\n\t\r\n\t      // TODO(gp) if the initialQuality could not be satisfied, lower\r\n\t      // the requirement and try again.\r\n\t    }\r\n\t  }\r\n\t\r\n\t  return (electedTrack)\r\n\t    ? new webkitMediaStream([electedTrack])\r\n\t    : stream;\r\n\t};\r\n\t\r\n\tSimulcastReceiver.prototype.getReceivingSSRC = function (jid) {\r\n\t  var resource = Strophe.getResourceFromJid(jid);\r\n\t  var ssrc = this._remoteMaps.receivingVideoStreams[resource];\r\n\t\r\n\t  // If we haven't receiving a \"changed\" event yet, then we must be receiving\r\n\t  // low quality (that the sender always streams).\r\n\t  if (!ssrc && connection.jingle) {\r\n\t    var session;\r\n\t    var i, j, k;\r\n\t\r\n\t    var keys = Object.keys(connection.jingle.sessions);\r\n\t    for (i = 0; i < keys.length; i++) {\r\n\t      var sid = keys[i];\r\n\t\r\n\t      if (ssrc) {\r\n\t        // stream found, stop.\r\n\t        break;\r\n\t      }\r\n\t\r\n\t      session = connection.jingle.sessions[sid];\r\n\t      if (session.remoteStreams) {\r\n\t        for (j = 0; j < session.remoteStreams.length; j++) {\r\n\t          var remoteStream = session.remoteStreams[j];\r\n\t\r\n\t          if (ssrc) {\r\n\t            // stream found, stop.\r\n\t            break;\r\n\t          }\r\n\t          var tracks = remoteStream.getVideoTracks();\r\n\t          if (tracks) {\r\n\t            for (k = 0; k < tracks.length; k++) {\r\n\t              var track = tracks[k];\r\n\t              var msid = [remoteStream.id, track.id].join(' ');\r\n\t              var _ssrc = this._remoteMaps.msid2ssrc[msid];\r\n\t              var _jid = ssrc2jid[_ssrc];\r\n\t              var quality = this._remoteMaps.msid2Quality[msid];\r\n\t              if (jid == _jid && quality == 0) {\r\n\t                ssrc = _ssrc;\r\n\t                // stream found, stop.\r\n\t                break;\r\n\t              }\r\n\t            }\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t\r\n\t  return ssrc;\r\n\t};\r\n\t\r\n\tSimulcastReceiver.prototype.getReceivingVideoStreamBySSRC = function (ssrc) {\r\n\t  var session, electedStream;\r\n\t  var i, j, k;\r\n\t  if (connection.jingle) {\r\n\t    var keys = Object.keys(connection.jingle.sessions);\r\n\t    for (i = 0; i < keys.length; i++) {\r\n\t      var sid = keys[i];\r\n\t\r\n\t      if (electedStream) {\r\n\t        // stream found, stop.\r\n\t        break;\r\n\t      }\r\n\t\r\n\t      session = connection.jingle.sessions[sid];\r\n\t      if (session.remoteStreams) {\r\n\t        for (j = 0; j < session.remoteStreams.length; j++) {\r\n\t          var remoteStream = session.remoteStreams[j];\r\n\t\r\n\t          if (electedStream) {\r\n\t            // stream found, stop.\r\n\t            break;\r\n\t          }\r\n\t          var tracks = remoteStream.getVideoTracks();\r\n\t          if (tracks) {\r\n\t            for (k = 0; k < tracks.length; k++) {\r\n\t              var track = tracks[k];\r\n\t              var msid = [remoteStream.id, track.id].join(' ');\r\n\t              var tmp = this._remoteMaps.msid2ssrc[msid];\r\n\t              if (tmp == ssrc) {\r\n\t                electedStream = new webkitMediaStream([track]);\r\n\t                // stream found, stop.\r\n\t                break;\r\n\t              }\r\n\t            }\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t\r\n\t  return {\r\n\t    session: session,\r\n\t    stream: electedStream\r\n\t  };\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets the fully qualified msid (stream.id + track.id) associated to the\r\n\t * SSRC.\r\n\t *\r\n\t * @param ssrc\r\n\t * @returns {*}\r\n\t */\r\n\tSimulcastReceiver.prototype.getRemoteVideoStreamIdBySSRC = function (ssrc) {\r\n\t  return this._remoteMaps.ssrc2Msid[ssrc];\r\n\t};\r\n\t\r\n\tfunction SimulcastSender() {\r\n\t  this.simulcastUtils = new SimulcastUtils();\r\n\t  this.logger = new SimulcastLogger('SimulcastSender', 1);\r\n\t}\r\n\t\r\n\tSimulcastSender.prototype.displayedLocalVideoStream = null;\r\n\t\r\n\tSimulcastSender.prototype._generateGuid = (function () {\r\n\t  function s4() {\r\n\t    return Math.floor((1 + Math.random()) * 0x10000)\r\n\t      .toString(16)\r\n\t      .substring(1);\r\n\t  }\r\n\t\r\n\t  return function () {\r\n\t    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n\t      s4() + '-' + s4() + s4() + s4();\r\n\t  };\r\n\t}());\r\n\t\r\n\t// Returns a random integer between min (included) and max (excluded)\r\n\t// Using Math.round() gives a non-uniform distribution!\r\n\tSimulcastSender.prototype._generateRandomSSRC = function () {\r\n\t  var min = 0, max = 0xffffffff;\r\n\t  return Math.floor(Math.random() * (max - min)) + min;\r\n\t};\r\n\t\r\n\tSimulcastSender.prototype.getLocalVideoStream = function () {\r\n\t  return (this.displayedLocalVideoStream != null)\r\n\t    ? this.displayedLocalVideoStream\r\n\t    // in case we have no simulcast at all, i.e. we didn't perform the GUM\r\n\t    : connection.jingle.localVideo;\r\n\t};\r\n\t\r\n\tfunction NativeSimulcastSender() {\r\n\t  SimulcastSender.call(this); // call the super constructor.\r\n\t}\r\n\t\r\n\tNativeSimulcastSender.prototype = Object.create(SimulcastSender.prototype);\r\n\t\r\n\tNativeSimulcastSender.prototype._localExplosionMap = {};\r\n\tNativeSimulcastSender.prototype._isUsingScreenStream = false;\r\n\tNativeSimulcastSender.prototype._localVideoSourceCache = '';\r\n\t\r\n\tNativeSimulcastSender.prototype.reset = function () {\r\n\t  this._localExplosionMap = {};\r\n\t  this._isUsingScreenStream = isUsingScreenStream;\r\n\t};\r\n\t\r\n\tNativeSimulcastSender.prototype._cacheLocalVideoSources = function (lines) {\r\n\t  this._localVideoSourceCache = this.simulcastUtils._getVideoSources(lines);\r\n\t};\r\n\t\r\n\tNativeSimulcastSender.prototype._restoreLocalVideoSources = function (lines) {\r\n\t  this.simulcastUtils._replaceVideoSources(lines, this._localVideoSourceCache);\r\n\t};\r\n\t\r\n\tNativeSimulcastSender.prototype._appendSimulcastGroup = function (lines) {\r\n\t  var videoSources, ssrcGroup, simSSRC, numOfSubs = 2, i, sb, msid;\r\n\t\r\n\t  this.logger.info('Appending simulcast group...');\r\n\t\r\n\t  // Get the primary SSRC information.\r\n\t  videoSources = this.simulcastUtils.parseMedia(lines, ['video'])[0];\r\n\t\r\n\t  // Start building the SIM SSRC group.\r\n\t  ssrcGroup = ['a=ssrc-group:SIM'];\r\n\t\r\n\t  // The video source buffer.\r\n\t  sb = [];\r\n\t\r\n\t  // Create the simulcast sub-streams.\r\n\t  for (i = 0; i < numOfSubs; i++) {\r\n\t    // TODO(gp) prevent SSRC collision.\r\n\t    simSSRC = this._generateRandomSSRC();\r\n\t    ssrcGroup.push(simSSRC);\r\n\t\r\n\t    if (videoSources.base) {\r\n\t      sb.splice.apply(sb, [sb.length, 0].concat(\r\n\t        [[\"a=ssrc:\", simSSRC, \" cname:\", videoSources.base.cname].join(''),\r\n\t          [\"a=ssrc:\", simSSRC, \" msid:\", videoSources.base.msid].join('')]\r\n\t      ));\r\n\t    }\r\n\t\r\n\t    this.logger.info(['Generated substream ', i, ' with SSRC ', simSSRC, '.'].join(''));\r\n\t\r\n\t  }\r\n\t\r\n\t  // Add the group sim layers.\r\n\t  sb.splice(0, 0, ssrcGroup.join(' '))\r\n\t\r\n\t  this.simulcastUtils._replaceVideoSources(lines, sb);\r\n\t};\r\n\t\r\n\t// Does the actual patching.\r\n\tNativeSimulcastSender.prototype._ensureSimulcastGroup = function (lines) {\r\n\t\r\n\t  this.logger.info('Ensuring simulcast group...');\r\n\t\r\n\t  if (this.simulcastUtils._indexOfArray('a=ssrc-group:SIM', lines) === this.simulcastUtils._emptyCompoundIndex) {\r\n\t    this._appendSimulcastGroup(lines);\r\n\t    this._cacheLocalVideoSources(lines);\r\n\t  } else {\r\n\t    // verify that the ssrcs participating in the SIM group are present\r\n\t    // in the SDP (needed for presence).\r\n\t    this._restoreLocalVideoSources(lines);\r\n\t  }\r\n\t};\r\n\t\r\n\t/**\r\n\t * Produces a single stream with multiple tracks for local video sources.\r\n\t *\r\n\t * @param lines\r\n\t * @private\r\n\t */\r\n\tNativeSimulcastSender.prototype._explodeSimulcastSenderSources = function (lines) {\r\n\t  var sb, msid, sid, tid, videoSources, self;\r\n\t\r\n\t  this.logger.info('Exploding local video sources...');\r\n\t\r\n\t  videoSources = this.simulcastUtils.parseMedia(lines, ['video'])[0];\r\n\t\r\n\t  self = this;\r\n\t  if (videoSources.groups && videoSources.groups.length !== 0) {\r\n\t    videoSources.groups.forEach(function (group) {\r\n\t      if (group.semantics === 'SIM') {\r\n\t        group.ssrcs.forEach(function (ssrc) {\r\n\t\r\n\t          // Get the msid for this ssrc..\r\n\t          if (self._localExplosionMap[ssrc]) {\r\n\t            // .. either from the explosion map..\r\n\t            msid = self._localExplosionMap[ssrc];\r\n\t          } else {\r\n\t            // .. or generate a new one (msid).\r\n\t            sid = videoSources.sources[ssrc].msid\r\n\t              .substring(0, videoSources.sources[ssrc].msid.indexOf(' '));\r\n\t\r\n\t            tid = self._generateGuid();\r\n\t            msid = [sid, tid].join(' ');\r\n\t            self._localExplosionMap[ssrc] = msid;\r\n\t          }\r\n\t\r\n\t          // Assign it to the source object.\r\n\t          videoSources.sources[ssrc].msid = msid;\r\n\t\r\n\t          // TODO(gp) Change the msid of associated sources.\r\n\t        });\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t\r\n\t  sb = this.simulcastUtils._compileVideoSources(videoSources);\r\n\t\r\n\t  this.simulcastUtils._replaceVideoSources(lines, sb);\r\n\t};\r\n\t\r\n\t/**\r\n\t * GUM for simulcast.\r\n\t *\r\n\t * @param constraints\r\n\t * @param success\r\n\t * @param err\r\n\t */\r\n\tNativeSimulcastSender.prototype.getUserMedia = function (constraints, success, err) {\r\n\t\r\n\t  // There's nothing special to do for native simulcast, so just do a normal GUM.\r\n\t  navigator.webkitGetUserMedia(constraints, function (hqStream) {\r\n\t    success(hqStream);\r\n\t  }, err);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Prepares the local description for public usage (i.e. to be signaled\r\n\t * through Jingle to the focus).\r\n\t *\r\n\t * @param desc\r\n\t * @returns {RTCSessionDescription}\r\n\t */\r\n\tNativeSimulcastSender.prototype.reverseTransformLocalDescription = function (desc) {\r\n\t  var sb;\r\n\t\r\n\t  if (!this.simulcastUtils.isValidDescription(desc) || this._isUsingScreenStream) {\r\n\t    return desc;\r\n\t  }\r\n\t\r\n\t\r\n\t  sb = desc.sdp.split('\\r\\n');\r\n\t\r\n\t  this._explodeSimulcastSenderSources(sb);\r\n\t\r\n\t  desc = new RTCSessionDescription({\r\n\t    type: desc.type,\r\n\t    sdp: sb.join('\\r\\n')\r\n\t  });\r\n\t\r\n\t  this.logger.fine(['Exploded local video sources', desc.sdp].join(' '));\r\n\t\r\n\t  return desc;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Ensures that the simulcast group is present in the answer, _if_ native\r\n\t * simulcast is enabled,\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tNativeSimulcastSender.prototype.transformAnswer = function (desc) {\r\n\t\r\n\t  if (!this.simulcastUtils.isValidDescription(desc) || this._isUsingScreenStream) {\r\n\t    return desc;\r\n\t  }\r\n\t\r\n\t  var sb = desc.sdp.split('\\r\\n');\r\n\t\r\n\t  // Even if we have enabled native simulcasting previously\r\n\t  // (with a call to SLD with an appropriate SDP, for example),\r\n\t  // createAnswer seems to consistently generate incomplete SDP\r\n\t  // with missing SSRCS.\r\n\t  //\r\n\t  // So, subsequent calls to SLD will have missing SSRCS and presence\r\n\t  // won't have the complete list of SRCs.\r\n\t  this._ensureSimulcastGroup(sb);\r\n\t\r\n\t  desc = new RTCSessionDescription({\r\n\t    type: desc.type,\r\n\t    sdp: sb.join('\\r\\n')\r\n\t  });\r\n\t\r\n\t  this.logger.fine(['Transformed answer', desc.sdp].join(' '));\r\n\t\r\n\t  return desc;\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tNativeSimulcastSender.prototype.transformLocalDescription = function (desc) {\r\n\t  return desc;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Removes the ssrc-group:SIM from the remote description bacause Chrome\r\n\t * either gets confused and thinks this is an FID group or, if an FID group\r\n\t * is already present, it fails to set the remote description.\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tSimulcastReceiver.prototype.transformRemoteDescription = function (desc) {\r\n\t\r\n\t  if (desc && desc.sdp) {\r\n\t    var sb = desc.sdp.split('\\r\\n');\r\n\t\r\n\t    this._updateRemoteMaps(sb);\r\n\t    this._cacheRemoteVideoSources(sb);\r\n\t\r\n\t    // NOTE(gp) this needs to be called after updateRemoteMaps because we\r\n\t    // need the simulcast group in the _updateRemoteMaps() method.\r\n\t    this.simulcastUtils._removeSimulcastGroup(sb);\r\n\t\r\n\t    if (desc.sdp.indexOf('a=ssrc-group:SIM') !== -1) {\r\n\t      // We don't need the goog conference flag if we're not doing\r\n\t      // simulcast.\r\n\t      this._ensureGoogConference(sb);\r\n\t    }\r\n\t\r\n\t    desc = new RTCSessionDescription({\r\n\t      type: desc.type,\r\n\t      sdp: sb.join('\\r\\n')\r\n\t    });\r\n\t\r\n\t    this.logger.fine(['Transformed remote description', desc.sdp].join(' '));\r\n\t  }\r\n\t\r\n\t  return desc;\r\n\t};\r\n\t\r\n\tNativeSimulcastSender.prototype._setLocalVideoStreamEnabled = function (ssrc, enabled) {\r\n\t  // Nothing to do here, native simulcast does that auto-magically.\r\n\t};\r\n\t\r\n\tNativeSimulcastSender.prototype.constructor = NativeSimulcastSender;\r\n\t\r\n\tfunction SimpleSimulcastSender() {\r\n\t  SimulcastSender.call(this);\r\n\t}\r\n\t\r\n\tSimpleSimulcastSender.prototype = Object.create(SimulcastSender.prototype);\r\n\t\r\n\tSimpleSimulcastSender.prototype.localStream = null;\r\n\tSimpleSimulcastSender.prototype._localMaps = {\r\n\t  msids: [],\r\n\t  msid2ssrc: {}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Groups local video sources together in the ssrc-group:SIM group.\r\n\t *\r\n\t * @param lines\r\n\t * @private\r\n\t */\r\n\tSimpleSimulcastSender.prototype._groupLocalVideoSources = function (lines) {\r\n\t  var sb, videoSources, ssrcs = [], ssrc;\r\n\t\r\n\t  this.logger.info('Grouping local video sources...');\r\n\t\r\n\t  videoSources = this.simulcastUtils.parseMedia(lines, ['video'])[0];\r\n\t\r\n\t  for (ssrc in videoSources.sources) {\r\n\t    // jitsi-meet destroys/creates streams at various places causing\r\n\t    // the original local stream ids to change. The only thing that\r\n\t    // remains unchanged is the trackid.\r\n\t    this._localMaps.msid2ssrc[videoSources.sources[ssrc].msid.split(' ')[1]] = ssrc;\r\n\t  }\r\n\t\r\n\t  var self = this;\r\n\t  // TODO(gp) add only \"free\" sources.\r\n\t  this._localMaps.msids.forEach(function (msid) {\r\n\t    ssrcs.push(self._localMaps.msid2ssrc[msid]);\r\n\t  });\r\n\t\r\n\t  if (!videoSources.groups) {\r\n\t    videoSources.groups = [];\r\n\t  }\r\n\t\r\n\t  videoSources.groups.push({\r\n\t    'semantics': 'SIM',\r\n\t    'ssrcs': ssrcs\r\n\t  });\r\n\t\r\n\t  sb = this.simulcastUtils._compileVideoSources(videoSources);\r\n\t\r\n\t  this.simulcastUtils._replaceVideoSources(lines, sb);\r\n\t};\r\n\t\r\n\t/**\r\n\t * GUM for simulcast.\r\n\t *\r\n\t * @param constraints\r\n\t * @param success\r\n\t * @param err\r\n\t */\r\n\tSimpleSimulcastSender.prototype.getUserMedia = function (constraints, success, err) {\r\n\t\r\n\t  // TODO(gp) what if we request a resolution not supported by the hardware?\r\n\t  // TODO(gp) make the lq stream configurable; although this wouldn't work with native simulcast\r\n\t  var lqConstraints = {\r\n\t    audio: false,\r\n\t    video: {\r\n\t      mandatory: {\r\n\t        maxWidth: 320,\r\n\t        maxHeight: 180,\r\n\t        maxFrameRate: 15\r\n\t      }\r\n\t    }\r\n\t  };\r\n\t\r\n\t  this.logger.info('HQ constraints: ', constraints);\r\n\t  this.logger.info('LQ constraints: ', lqConstraints);\r\n\t\r\n\t\r\n\t  // NOTE(gp) if we request the lq stream first webkitGetUserMedia\r\n\t  // fails randomly. Tested with Chrome 37. As fippo suggested, the\r\n\t  // reason appears to be that Chrome only acquires the cam once and\r\n\t  // then downscales the picture (https://code.google.com/p/chromium/issues/detail?id=346616#c11)\r\n\t\r\n\t  var self = this;\r\n\t  navigator.webkitGetUserMedia(constraints, function (hqStream) {\r\n\t\r\n\t    self.localStream = hqStream;\r\n\t\r\n\t    // reset local maps.\r\n\t    self._localMaps.msids = [];\r\n\t    self._localMaps.msid2ssrc = {};\r\n\t\r\n\t    // add hq trackid to local map\r\n\t    self._localMaps.msids.push(hqStream.getVideoTracks()[0].id);\r\n\t\r\n\t    navigator.webkitGetUserMedia(lqConstraints, function (lqStream) {\r\n\t\r\n\t      self.displayedLocalVideoStream = lqStream;\r\n\t\r\n\t      // NOTE(gp) The specification says Array.forEach() will visit\r\n\t      // the array elements in numeric order, and that it doesn't\r\n\t      // visit elements that don't exist.\r\n\t\r\n\t      // add lq trackid to local map\r\n\t      self._localMaps.msids.splice(0, 0, lqStream.getVideoTracks()[0].id);\r\n\t\r\n\t      self.localStream.addTrack(lqStream.getVideoTracks()[0]);\r\n\t      success(self.localStream);\r\n\t    }, err);\r\n\t  }, err);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Prepares the local description for public usage (i.e. to be signaled\r\n\t * through Jingle to the focus).\r\n\t *\r\n\t * @param desc\r\n\t * @returns {RTCSessionDescription}\r\n\t */\r\n\tSimpleSimulcastSender.prototype.reverseTransformLocalDescription = function (desc) {\r\n\t  var sb;\r\n\t\r\n\t  if (!this.simulcastUtils.isValidDescription(desc)) {\r\n\t    return desc;\r\n\t  }\r\n\t\r\n\t  sb = desc.sdp.split('\\r\\n');\r\n\t\r\n\t  this._groupLocalVideoSources(sb);\r\n\t\r\n\t  desc = new RTCSessionDescription({\r\n\t    type: desc.type,\r\n\t    sdp: sb.join('\\r\\n')\r\n\t  });\r\n\t\r\n\t  this.logger.fine('Grouped local video sources');\r\n\t  this.logger.fine(desc.sdp);\r\n\t\r\n\t  return desc;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Ensures that the simulcast group is present in the answer, _if_ native\r\n\t * simulcast is enabled,\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tSimpleSimulcastSender.prototype.transformAnswer = function (desc) {\r\n\t  return desc;\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tSimpleSimulcastSender.prototype.transformLocalDescription = function (desc) {\r\n\t\r\n\t  var sb = desc.sdp.split('\\r\\n');\r\n\t\r\n\t  this.simulcastUtils._removeSimulcastGroup(sb);\r\n\t\r\n\t  desc = new RTCSessionDescription({\r\n\t    type: desc.type,\r\n\t    sdp: sb.join('\\r\\n')\r\n\t  });\r\n\t\r\n\t  this.logger.fine('Transformed local description');\r\n\t  this.logger.fine(desc.sdp);\r\n\t\r\n\t  return desc;\r\n\t};\r\n\t\r\n\tSimpleSimulcastSender.prototype._setLocalVideoStreamEnabled = function (ssrc, enabled) {\r\n\t  var trackid;\r\n\t\r\n\t  var self = this;\r\n\t  this.logger.log(['Requested to', enabled ? 'enable' : 'disable', ssrc].join(' '));\r\n\t  if (Object.keys(this._localMaps.msid2ssrc).some(function (tid) {\r\n\t      // Search for the track id that corresponds to the ssrc\r\n\t      if (self._localMaps.msid2ssrc[tid] == ssrc) {\r\n\t        trackid = tid;\r\n\t        return true;\r\n\t      }\r\n\t    }) && self.localStream.getVideoTracks().some(function (track) {\r\n\t      // Start/stop the track that corresponds to the track id\r\n\t      if (track.id === trackid) {\r\n\t        track.enabled = enabled;\r\n\t        return true;\r\n\t      }\r\n\t    })) {\r\n\t    this.logger.log([trackid, enabled ? 'enabled' : 'disabled'].join(' '));\r\n\t    $(document).trigger(enabled\r\n\t      ? 'simulcastlayerstarted'\r\n\t      : 'simulcastlayerstopped');\r\n\t  } else {\r\n\t    this.logger.error(\"I don't have a local stream with SSRC \" + ssrc);\r\n\t  }\r\n\t};\r\n\t\r\n\tSimpleSimulcastSender.prototype.constructor = SimpleSimulcastSender;\r\n\t\r\n\tfunction NoSimulcastSender() {\r\n\t  SimulcastSender.call(this);\r\n\t}\r\n\t\r\n\tNoSimulcastSender.prototype = Object.create(SimulcastSender.prototype);\r\n\t\r\n\t/**\r\n\t * GUM for simulcast.\r\n\t *\r\n\t * @param constraints\r\n\t * @param success\r\n\t * @param err\r\n\t */\r\n\tNoSimulcastSender.prototype.getUserMedia = function (constraints, success, err) {\r\n\t  navigator.webkitGetUserMedia(constraints, function (hqStream) {\r\n\t    success(hqStream);\r\n\t  }, err);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Prepares the local description for public usage (i.e. to be signaled\r\n\t * through Jingle to the focus).\r\n\t *\r\n\t * @param desc\r\n\t * @returns {RTCSessionDescription}\r\n\t */\r\n\tNoSimulcastSender.prototype.reverseTransformLocalDescription = function (desc) {\r\n\t  return desc;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Ensures that the simulcast group is present in the answer, _if_ native\r\n\t * simulcast is enabled,\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tNoSimulcastSender.prototype.transformAnswer = function (desc) {\r\n\t  return desc;\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tNoSimulcastSender.prototype.transformLocalDescription = function (desc) {\r\n\t  return desc;\r\n\t};\r\n\t\r\n\tNoSimulcastSender.prototype._setLocalVideoStreamEnabled = function (ssrc, enabled) {\r\n\t\r\n\t};\r\n\t\r\n\tNoSimulcastSender.prototype.constructor = NoSimulcastSender;\r\n\t\r\n\t/**\r\n\t *\r\n\t * @constructor\r\n\t */\r\n\tfunction SimulcastManager() {\r\n\t\r\n\t  // Create the simulcast utilities.\r\n\t  this.simulcastUtils = new SimulcastUtils();\r\n\t\r\n\t  // Create remote simulcast.\r\n\t  this.simulcastReceiver = new SimulcastReceiver();\r\n\t\r\n\t  // Initialize local simulcast.\r\n\t\r\n\t  // TODO(gp) move into SimulcastManager.prototype.getUserMedia and take into\r\n\t  // account constraints.\r\n\t  // if (!config.enableSimulcast) {\r\n\t  this.simulcastSender = new NoSimulcastSender();\r\n\t  // } else {\r\n\t  //\r\n\t  //     var isChromium = window.chrome,\r\n\t  //         vendorName = window.navigator.vendor;\r\n\t  //     if(isChromium !== null && isChromium !== undefined\r\n\t  //         /* skip opera */\r\n\t  //         && vendorName === \"Google Inc.\"\r\n\t  //         /* skip Chromium as suggested by fippo */\r\n\t  //         && !window.navigator.appVersion.match(/Chromium\\//) ) {\r\n\t  //         var ver = parseInt(window.navigator.appVersion.match(/Chrome\\/(\\d+)\\./)[1], 10);\r\n\t  //         if (ver > 37) {\r\n\t  //             this.simulcastSender = new NativeSimulcastSender();\r\n\t  //         } else {\r\n\t  //             this.simulcastSender = new NoSimulcastSender();\r\n\t  //         }\r\n\t  //     } else {\r\n\t  //         this.simulcastSender = new NoSimulcastSender();\r\n\t  //     }\r\n\t  //\r\n\t  // }\r\n\t}\r\n\t\r\n\t/**\r\n\t * Restores the simulcast groups of the remote description. In\r\n\t * transformRemoteDescription we remove those in order for the set remote\r\n\t * description to succeed. The focus needs the signal the groups to new\r\n\t * participants.\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tSimulcastManager.prototype.reverseTransformRemoteDescription = function (desc) {\r\n\t  return this.simulcastReceiver.reverseTransformRemoteDescription(desc);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Removes the ssrc-group:SIM from the remote description bacause Chrome\r\n\t * either gets confused and thinks this is an FID group or, if an FID group\r\n\t * is already present, it fails to set the remote description.\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tSimulcastManager.prototype.transformRemoteDescription = function (desc) {\r\n\t  return this.simulcastReceiver.transformRemoteDescription(desc);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Gets the fully qualified msid (stream.id + track.id) associated to the\r\n\t * SSRC.\r\n\t *\r\n\t * @param ssrc\r\n\t * @returns {*}\r\n\t */\r\n\tSimulcastManager.prototype.getRemoteVideoStreamIdBySSRC = function (ssrc) {\r\n\t  return this.simulcastReceiver.getRemoteVideoStreamIdBySSRC(ssrc);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a stream with single video track, the one currently being\r\n\t * received by this endpoint.\r\n\t *\r\n\t * @param stream the remote simulcast stream.\r\n\t * @returns {webkitMediaStream}\r\n\t */\r\n\tSimulcastManager.prototype.getReceivingVideoStream = function (stream) {\r\n\t  return this.simulcastReceiver.getReceivingVideoStream(stream);\r\n\t};\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tSimulcastManager.prototype.transformLocalDescription = function (desc) {\r\n\t  return this.simulcastSender.transformLocalDescription(desc);\r\n\t};\r\n\t\r\n\t/**\r\n\t *\r\n\t * @returns {*}\r\n\t */\r\n\tSimulcastManager.prototype.getLocalVideoStream = function () {\r\n\t  return this.simulcastSender.getLocalVideoStream();\r\n\t};\r\n\t\r\n\t/**\r\n\t * GUM for simulcast.\r\n\t *\r\n\t * @param constraints\r\n\t * @param success\r\n\t * @param err\r\n\t */\r\n\tSimulcastManager.prototype.getUserMedia = function (constraints, success, err) {\r\n\t\r\n\t  this.simulcastSender.getUserMedia(constraints, success, err);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Prepares the local description for public usage (i.e. to be signaled\r\n\t * through Jingle to the focus).\r\n\t *\r\n\t * @param desc\r\n\t * @returns {RTCSessionDescription}\r\n\t */\r\n\tSimulcastManager.prototype.reverseTransformLocalDescription = function (desc) {\r\n\t  return this.simulcastSender.reverseTransformLocalDescription(desc);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Ensures that the simulcast group is present in the answer, _if_ native\r\n\t * simulcast is enabled,\r\n\t *\r\n\t * @param desc\r\n\t * @returns {*}\r\n\t */\r\n\tSimulcastManager.prototype.transformAnswer = function (desc) {\r\n\t  return this.simulcastSender.transformAnswer(desc);\r\n\t};\r\n\t\r\n\tSimulcastManager.prototype.getReceivingSSRC = function (jid) {\r\n\t  return this.simulcastReceiver.getReceivingSSRC(jid);\r\n\t};\r\n\t\r\n\tSimulcastManager.prototype.getReceivingVideoStreamBySSRC = function (msid) {\r\n\t  return this.simulcastReceiver.getReceivingVideoStreamBySSRC(msid);\r\n\t};\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param lines\r\n\t * @param mediatypes\r\n\t * @returns {*}\r\n\t */\r\n\tSimulcastManager.prototype.parseMedia = function (lines, mediatypes) {\r\n\t  var sb = lines.sdp.split('\\r\\n');\r\n\t  return this.simulcastUtils.parseMedia(sb, mediatypes);\r\n\t};\r\n\t\r\n\tSimulcastManager.prototype._setReceivingVideoStream = function (resource, ssrc) {\r\n\t  this.simulcastReceiver._setReceivingVideoStream(resource, ssrc);\r\n\t};\r\n\t\r\n\tSimulcastManager.prototype._setLocalVideoStreamEnabled = function (ssrc, enabled) {\r\n\t  this.simulcastSender._setLocalVideoStreamEnabled(ssrc, enabled);\r\n\t};\r\n\t\r\n\tSimulcastManager.prototype.resetSender = function () {\r\n\t  if (typeof this.simulcastSender.reset === 'function') {\r\n\t    this.simulcastSender.reset();\r\n\t  }\r\n\t};\r\n\t\r\n\t/**\r\n\t *\r\n\t * @constructor\r\n\t */\r\n\tfunction SimulcastLogger(name, lvl) {\r\n\t  this.name = name;\r\n\t  this.lvl = lvl;\r\n\t}\r\n\t\r\n\tSimulcastLogger.prototype.log = function (text) {\r\n\t  if (this.lvl) {\r\n\t    console.log(text);\r\n\t  }\r\n\t};\r\n\t\r\n\tSimulcastLogger.prototype.info = function (text) {\r\n\t  if (this.lvl > 1) {\r\n\t    console.info(text);\r\n\t  }\r\n\t};\r\n\t\r\n\tSimulcastLogger.prototype.fine = function (text) {\r\n\t  if (this.lvl > 2) {\r\n\t    console.log(text);\r\n\t  }\r\n\t};\r\n\t\r\n\tSimulcastLogger.prototype.error = function (text) {\r\n\t  console.error(text);\r\n\t};\r\n\t\r\n\tvar simulcast = new SimulcastManager();\r\n\t\r\n\texports = module.exports = simulcast;\r\n\t\r\n\t$(document).bind('simulcastlayerschanged', function (event, endpointSimulcastLayers) {\r\n\t  endpointSimulcastLayers.forEach(function (esl) {\r\n\t    var ssrc = esl.simulcastLayer.primarySSRC;\r\n\t    simulcast._setReceivingVideoStream(esl.endpoint, ssrc);\r\n\t  });\r\n\t});\r\n\t\r\n\t$(document).bind('startsimulcastlayer', function (event, simulcastLayer) {\r\n\t  var ssrc = simulcastLayer.primarySSRC;\r\n\t  simulcast._setLocalVideoStreamEnabled(ssrc, true);\r\n\t});\r\n\t\r\n\t$(document).bind('stopsimulcastlayer', function (event, simulcastLayer) {\r\n\t  var ssrc = simulcastLayer.primarySSRC;\r\n\t  simulcast._setLocalVideoStreamEnabled(ssrc, false);\r\n\t});\r\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar parser = __webpack_require__(40);\n\tvar writer = __webpack_require__(42);\n\t\n\texports.write = writer;\n\texports.parse = parser.parse;\n\texports.parseFmtpConfig = parser.parseFmtpConfig;\n\texports.parsePayloads = parser.parsePayloads;\n\texports.parseRemoteCandidates = parser.parseRemoteCandidates;\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar toIntIfInt = function (v) {\n\t  return String(Number(v)) === v ? Number(v) : v;\n\t};\n\t\n\tvar attachProperties = function (match, location, names, rawName) {\n\t  if (rawName && !names) {\n\t    location[rawName] = toIntIfInt(match[1]);\n\t  }\n\t  else {\n\t    for (var i = 0; i < names.length; i += 1) {\n\t      if (match[i+1] != null) {\n\t        location[names[i]] = toIntIfInt(match[i+1]);\n\t      }\n\t    }\n\t  }\n\t};\n\t\n\tvar parseReg = function (obj, location, content) {\n\t  var needsBlank = obj.name && obj.names;\n\t  if (obj.push && !location[obj.push]) {\n\t    location[obj.push] = [];\n\t  }\n\t  else if (needsBlank && !location[obj.name]) {\n\t    location[obj.name] = {};\n\t  }\n\t  var keyLocation = obj.push ?\n\t    {} :  // blank object that will be pushed\n\t    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\t\n\t  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\t\n\t  if (obj.push) {\n\t    location[obj.push].push(keyLocation);\n\t  }\n\t};\n\t\n\tvar grammar = __webpack_require__(41);\n\tvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\t\n\texports.parse = function (sdp) {\n\t  var session = {}\n\t    , media = []\n\t    , location = session; // points at where properties go under (one of the above)\n\t\n\t  // parse lines we understand\n\t  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n\t    var type = l[0];\n\t    var content = l.slice(2);\n\t    if (type === 'm') {\n\t      media.push({rtp: [], fmtp: []});\n\t      location = media[media.length-1]; // point at latest media line\n\t    }\n\t\n\t    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n\t      var obj = grammar[type][j];\n\t      if (obj.reg.test(content)) {\n\t        return parseReg(obj, location, content);\n\t      }\n\t    }\n\t  });\n\t\n\t  session.media = media; // link it up\n\t  return session;\n\t};\n\t\n\tvar fmtpReducer = function (acc, expr) {\n\t  var s = expr.split(/=(.+)/, 2);\n\t  if (s.length === 2) {\n\t    acc[s[0]] = toIntIfInt(s[1]);\n\t  }\n\t  return acc;\n\t};\n\t\n\texports.parseFmtpConfig = function (str) {\n\t  return str.split(/\\;\\s?/).reduce(fmtpReducer, {});\n\t};\n\t\n\texports.parsePayloads = function (str) {\n\t  return str.split(' ').map(Number);\n\t};\n\t\n\texports.parseRemoteCandidates = function (str) {\n\t  var candidates = [];\n\t  var parts = str.split(' ').map(toIntIfInt);\n\t  for (var i = 0; i < parts.length; i += 3) {\n\t    candidates.push({\n\t      component: parts[i],\n\t      ip: parts[i + 1],\n\t      port: parts[i + 2]\n\t    });\n\t  }\n\t  return candidates;\n\t};\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports) {\n\n\tvar grammar = module.exports = {\n\t  v: [{\n\t      name: 'version',\n\t      reg: /^(\\d*)$/\n\t  }],\n\t  o: [{ //o=- 20518 0 IN IP4 203.0.113.1\n\t    // NB: sessionId will be a String in most cases because it is huge\n\t    name: 'origin',\n\t    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n\t    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n\t    format: \"%s %s %d %s IP%d %s\"\n\t  }],\n\t  // default parsing of these only (though some of these feel outdated)\n\t  s: [{ name: 'name' }],\n\t  i: [{ name: 'description' }],\n\t  u: [{ name: 'uri' }],\n\t  e: [{ name: 'email' }],\n\t  p: [{ name: 'phone' }],\n\t  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly..\n\t  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n\t  //k: [{}], // outdated thing ignored\n\t  t: [{ //t=0 0\n\t    name: 'timing',\n\t    reg: /^(\\d*) (\\d*)/,\n\t    names: ['start', 'stop'],\n\t    format: \"%d %d\"\n\t  }],\n\t  c: [{ //c=IN IP4 10.47.197.26\n\t      name: 'connection',\n\t      reg: /^IN IP(\\d) (\\S*)/,\n\t      names: ['version', 'ip'],\n\t      format: \"IN IP%d %s\"\n\t  }],\n\t  b: [{ //b=AS:4000\n\t      push: 'bandwidth',\n\t      reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n\t      names: ['type', 'limit'],\n\t      format: \"%s:%s\"\n\t  }],\n\t  m: [{ //m=video 51744 RTP/AVP 126 97 98 34 31\n\t      // NB: special - pushes to session\n\t      // TODO: rtp/fmtp should be filtered by the payloads found here?\n\t      reg: /^(\\w*) (\\d*) ([\\w\\/]*)(?: (.*))?/,\n\t      names: ['type', 'port', 'protocol', 'payloads'],\n\t      format: \"%s %d %s %s\"\n\t  }],\n\t  a: [\n\t    { //a=rtpmap:110 opus/48000/2\n\t      push: 'rtp',\n\t      reg: /^rtpmap:(\\d*) ([\\w\\-\\.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n\t      names: ['payload', 'codec', 'rate', 'encoding'],\n\t      format: function (o) {\n\t        return (o.encoding) ?\n\t          \"rtpmap:%d %s/%s/%s\":\n\t          o.rate ?\n\t          \"rtpmap:%d %s/%s\":\n\t          \"rtpmap:%d %s\";\n\t      }\n\t    },\n\t    {\n\t      //a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n\t      //a=fmtp:111 minptime=10; useinbandfec=1\n\t      push: 'fmtp',\n\t      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n\t      names: ['payload', 'config'],\n\t      format: \"fmtp:%d %s\"\n\t    },\n\t    { //a=control:streamid=0\n\t        name: 'control',\n\t        reg: /^control:(.*)/,\n\t        format: \"control:%s\"\n\t    },\n\t    { //a=rtcp:65179 IN IP4 193.84.77.194\n\t      name: 'rtcp',\n\t      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n\t      names: ['port', 'netType', 'ipVer', 'address'],\n\t      format: function (o) {\n\t        return (o.address != null) ?\n\t          \"rtcp:%d %s IP%d %s\":\n\t          \"rtcp:%d\";\n\t      }\n\t    },\n\t    { //a=rtcp-fb:98 trr-int 100\n\t      push: 'rtcpFbTrrInt',\n\t      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n\t      names: ['payload', 'value'],\n\t      format: \"rtcp-fb:%d trr-int %d\"\n\t    },\n\t    { //a=rtcp-fb:98 nack rpsi\n\t      push: 'rtcpFb',\n\t      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n\t      names: ['payload', 'type', 'subtype'],\n\t      format: function (o) {\n\t        return (o.subtype != null) ?\n\t          \"rtcp-fb:%s %s %s\":\n\t          \"rtcp-fb:%s %s\";\n\t      }\n\t    },\n\t    { //a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n\t      //a=extmap:1/recvonly URI-gps-string\n\t      push: 'ext',\n\t      reg: /^extmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,\n\t      names: ['value', 'uri', 'config'], // value may include \"/direction\" suffix\n\t      format: function (o) {\n\t        return (o.config != null) ?\n\t          \"extmap:%s %s %s\":\n\t          \"extmap:%s %s\";\n\t      }\n\t    },\n\t    {\n\t      //a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n\t      push: 'crypto',\n\t      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n\t      names: ['id', 'suite', 'config', 'sessionConfig'],\n\t      format: function (o) {\n\t        return (o.sessionConfig != null) ?\n\t          \"crypto:%d %s %s %s\":\n\t          \"crypto:%d %s %s\";\n\t      }\n\t    },\n\t    { //a=setup:actpass\n\t      name: 'setup',\n\t      reg: /^setup:(\\w*)/,\n\t      format: \"setup:%s\"\n\t    },\n\t    { //a=mid:1\n\t      name: 'mid',\n\t      reg: /^mid:([^\\s]*)/,\n\t      format: \"mid:%s\"\n\t    },\n\t    { //a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n\t      name: 'msid',\n\t      reg: /^msid:(.*)/,\n\t      format: \"msid:%s\"\n\t    },\n\t    { //a=ptime:20\n\t      name: 'ptime',\n\t      reg: /^ptime:(\\d*)/,\n\t      format: \"ptime:%d\"\n\t    },\n\t    { //a=maxptime:60\n\t      name: 'maxptime',\n\t      reg: /^maxptime:(\\d*)/,\n\t      format: \"maxptime:%d\"\n\t    },\n\t    { //a=sendrecv\n\t      name: 'direction',\n\t      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n\t    },\n\t    { //a=ice-lite\n\t      name: 'icelite',\n\t      reg: /^(ice-lite)/\n\t    },\n\t    { //a=ice-ufrag:F7gI\n\t      name: 'iceUfrag',\n\t      reg: /^ice-ufrag:(\\S*)/,\n\t      format: \"ice-ufrag:%s\"\n\t    },\n\t    { //a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n\t      name: 'icePwd',\n\t      reg: /^ice-pwd:(\\S*)/,\n\t      format: \"ice-pwd:%s\"\n\t    },\n\t    { //a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n\t      name: 'fingerprint',\n\t      reg: /^fingerprint:(\\S*) (\\S*)/,\n\t      names: ['type', 'hash'],\n\t      format: \"fingerprint:%s %s\"\n\t    },\n\t    {\n\t      //a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n\t      //a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n\t      //a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n\t      //a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n\t      //a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n\t      push:'candidates',\n\t      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n\t      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n\t      format: function (o) {\n\t        var str = \"candidate:%s %d %s %d %s %d typ %s\";\n\t\n\t        str += (o.raddr != null) ? \" raddr %s rport %d\" : \"%v%v\";\n\t\n\t        // NB: candidate has three optional chunks, so %void middles one if it's missing\n\t        str += (o.tcptype != null) ? \" tcptype %s\" : \"%v\";\n\t\n\t        if (o.generation != null) {\n\t          str += \" generation %d\";\n\t        }\n\t\n\t        str += (o['network-id'] != null) ? \" network-id %d\" : \"%v\";\n\t        str += (o['network-cost'] != null) ? \" network-cost %d\" : \"%v\";\n\t        return str;\n\t      }\n\t    },\n\t    { //a=end-of-candidates (keep after the candidates line for readability)\n\t      name: 'endOfCandidates',\n\t      reg: /^(end-of-candidates)/\n\t    },\n\t    { //a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n\t      name: 'remoteCandidates',\n\t      reg: /^remote-candidates:(.*)/,\n\t      format: \"remote-candidates:%s\"\n\t    },\n\t    { //a=ice-options:google-ice\n\t      name: 'iceOptions',\n\t      reg: /^ice-options:(\\S*)/,\n\t      format: \"ice-options:%s\"\n\t    },\n\t    { //a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n\t      push: \"ssrcs\",\n\t      reg: /^ssrc:(\\d*) ([\\w_]*)(?::(.*))?/,\n\t      names: ['id', 'attribute', 'value'],\n\t      format: function (o) {\n\t        var str = \"ssrc:%d\";\n\t        if (o.attribute != null) {\n\t          str += \" %s\";\n\t          if (o.value != null) {\n\t            str += \":%s\";\n\t          }\n\t        }\n\t        return str;\n\t      }\n\t    },\n\t    { //a=ssrc-group:FEC 1 2\n\t      push: \"ssrcGroups\",\n\t      reg: /^ssrc-group:(\\w*) (.*)/,\n\t      names: ['semantics', 'ssrcs'],\n\t      format: \"ssrc-group:%s %s\"\n\t    },\n\t    { //a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n\t      name: \"msidSemantic\",\n\t      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n\t      names: ['semantic', 'token'],\n\t      format: \"msid-semantic: %s %s\" // space after \":\" is not accidental\n\t    },\n\t    { //a=group:BUNDLE audio video\n\t      push: 'groups',\n\t      reg: /^group:(\\w*) (.*)/,\n\t      names: ['type', 'mids'],\n\t      format: \"group:%s %s\"\n\t    },\n\t    { //a=rtcp-mux\n\t      name: 'rtcpMux',\n\t      reg: /^(rtcp-mux)/\n\t    },\n\t    { //a=rtcp-rsize\n\t      name: 'rtcpRsize',\n\t      reg: /^(rtcp-rsize)/\n\t    },\n\t    { //a=sctpmap:5000 webrtc-datachannel 1024\n\t      name: 'sctpmap',\n\t      reg: /^sctpmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,\n\t      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n\t      format: function (o) {\n\t        return (o.maxMessageSize != null) ?\n\t          \"sctpmap:%s %s %s\" :\n\t          \"sctpmap:%s %s\";\n\t      }\n\t    },\n\t    { // any a= that we don't understand is kepts verbatim on media.invalid\n\t      push: 'invalid',\n\t      names: [\"value\"]\n\t    }\n\t  ]\n\t};\n\t\n\t// set sensible defaults to avoid polluting the grammar with boring details\n\tObject.keys(grammar).forEach(function (key) {\n\t  var objs = grammar[key];\n\t  objs.forEach(function (obj) {\n\t    if (!obj.reg) {\n\t      obj.reg = /(.*)/;\n\t    }\n\t    if (!obj.format) {\n\t      obj.format = \"%s\";\n\t    }\n\t  });\n\t});\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar grammar = __webpack_require__(41);\n\t\n\t// customized util.format - discards excess arguments and can void middle ones\n\tvar formatRegExp = /%[sdv%]/g;\n\tvar format = function (formatStr) {\n\t  var i = 1;\n\t  var args = arguments;\n\t  var len = args.length;\n\t  return formatStr.replace(formatRegExp, function (x) {\n\t    if (i >= len) {\n\t      return x; // missing argument\n\t    }\n\t    var arg = args[i];\n\t    i += 1;\n\t    switch (x) {\n\t      case '%%':\n\t        return '%';\n\t      case '%s':\n\t        return String(arg);\n\t      case '%d':\n\t        return Number(arg);\n\t      case '%v':\n\t        return '';\n\t    }\n\t  });\n\t  // NB: we discard excess arguments - they are typically undefined from makeLine\n\t};\n\t\n\tvar makeLine = function (type, obj, location) {\n\t  var str = obj.format instanceof Function ?\n\t    (obj.format(obj.push ? location : location[obj.name])) :\n\t    obj.format;\n\t\n\t  var args = [type + '=' + str];\n\t  if (obj.names) {\n\t    for (var i = 0; i < obj.names.length; i += 1) {\n\t      var n = obj.names[i];\n\t      if (obj.name) {\n\t        args.push(location[obj.name][n]);\n\t      }\n\t      else { // for mLine and push attributes\n\t        args.push(location[obj.names[i]]);\n\t      }\n\t    }\n\t  }\n\t  else {\n\t    args.push(location[obj.name]);\n\t  }\n\t  return format.apply(null, args);\n\t};\n\t\n\t// RFC specified order\n\t// TODO: extend this with all the rest\n\tvar defaultOuterOrder = [\n\t  'v', 'o', 's', 'i',\n\t  'u', 'e', 'p', 'c',\n\t  'b', 't', 'r', 'z', 'a'\n\t];\n\tvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\t\n\t\n\tmodule.exports = function (session, opts) {\n\t  opts = opts || {};\n\t  // ensure certain properties exist\n\t  if (session.version == null) {\n\t    session.version = 0; // \"v=0\" must be there (only defined version atm)\n\t  }\n\t  if (session.name == null) {\n\t    session.name = \" \"; // \"s= \" must be there if no meaningful name set\n\t  }\n\t  session.media.forEach(function (mLine) {\n\t    if (mLine.payloads == null) {\n\t      mLine.payloads = \"\";\n\t    }\n\t  });\n\t\n\t  var outerOrder = opts.outerOrder || defaultOuterOrder;\n\t  var innerOrder = opts.innerOrder || defaultInnerOrder;\n\t  var sdp = [];\n\t\n\t  // loop through outerOrder for matching properties on session\n\t  outerOrder.forEach(function (type) {\n\t    grammar[type].forEach(function (obj) {\n\t      if (obj.name in session && session[obj.name] != null) {\n\t        sdp.push(makeLine(type, obj, session));\n\t      }\n\t      else if (obj.push in session && session[obj.push] != null) {\n\t        session[obj.push].forEach(function (el) {\n\t          sdp.push(makeLine(type, obj, el));\n\t        });\n\t      }\n\t    });\n\t  });\n\t\n\t  // then for each media line, follow the innerOrder\n\t  session.media.forEach(function (mLine) {\n\t    sdp.push(makeLine('m', grammar.m[0], mLine));\n\t\n\t    innerOrder.forEach(function (type) {\n\t      grammar[type].forEach(function (obj) {\n\t        if (obj.name in mLine && mLine[obj.name] != null) {\n\t          sdp.push(makeLine(type, obj, mLine));\n\t        }\n\t        else if (obj.push in mLine && mLine[obj.push] != null) {\n\t          mLine[obj.push].forEach(function (el) {\n\t            sdp.push(makeLine(type, obj, el));\n\t          });\n\t        }\n\t      });\n\t    });\n\t  });\n\t\n\t  return sdp.join('\\r\\n') + '\\r\\n';\n\t};\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar simulcast = __webpack_require__(38);\r\n\tvar SDP = __webpack_require__(37);\r\n\tvar transform = __webpack_require__(39);\r\n\tvar Interop = __webpack_require__(44).Interop;\r\n\tvar ms = __webpack_require__(29);\r\n\t\r\n\tfunction TraceablePeerConnection(ice_config, constraints) {\r\n\t  var self = this;\r\n\t\r\n\t  var semantics = ms.getSemantics();\r\n\t  if(!ice_config){\r\n\t    ice_config = {};\r\n\t  }\r\n\t  if (semantics && semantics != \"firefox\") {\r\n\t      ice_config.sdpSemantics = semantics;\r\n\t  }\r\n\t  this.peerconnection = new RTCPeerConnection(ice_config);\r\n\t  // this.peerconnection = new RTCPeerConnection(ice_config, constraints);\r\n\t  this.updateLog = [];\r\n\t  this.stats = {};\r\n\t  this.statsinterval = null;\r\n\t  this.maxstats = 0; // limit to 300 values, i.e. 5 minutes; set to 0 to disable\r\n\t  // var Interop = require('sdp-interop').Interop;\r\n\t  this.interop = new Interop();\r\n\t  this.localVideoSender = null;\r\n\t  this.localAudioSender = null;\r\n\t  this.resetLocalDescriptionTimes = 0;\r\n\t  this.negotiationInprogress = false; // 协商进行中\r\n\t  /**\r\n\t   * Array of ssrcs that will be added on next modifySources call.\r\n\t   * @type {Array}\r\n\t   */\r\n\t  this.addssrc = [];\r\n\t  /**\r\n\t   * Array of ssrcs that will be added on next modifySources call.\r\n\t   * @type {Array}\r\n\t   */\r\n\t  this.removessrc = [];\r\n\t  /**\r\n\t   * Pending operation that will be done during modifySources call.\r\n\t   * Currently 'mute'/'unmute' operations are supported.\r\n\t   *\r\n\t   * @type {String}\r\n\t   */\r\n\t  this.pendingop = null;\r\n\t\r\n\t  /**\r\n\t   * data channel\r\n\t   * @type {null}\r\n\t   */\r\n\t  this.channel = null;\r\n\t\r\n\t  /**\r\n\t   * Flag indicates that peer connection stream have changed and modifySources should proceed.\r\n\t   * @type {boolean}\r\n\t   */\r\n\t  this.switchstreams = false;\r\n\t\r\n\t  // override as desired\r\n\t  this.trace = function (what, info) {\r\n\t    //console.warn('WTRACE', what, info);\r\n\t    self.updateLog.push({\r\n\t      time: new Date(),\r\n\t      type: what,\r\n\t      value: info || \"\"\r\n\t    });\r\n\t  };\r\n\t  this.onicecandidate = null;\r\n\t  this.peerconnection.onicecandidate = function (event) {\r\n\t    self.trace('onicecandidate', JSON.stringify(event.candidate, null, ' '));\r\n\t    if (self.onicecandidate !== null) {\r\n\t      self.onicecandidate(event);\r\n\t    }\r\n\t  };\r\n\t  this.peerconnection.ontrack = function(event) {\r\n\t    // TODO change to ontrack while onaddstream is droped\r\n\t  };\r\n\t  this.onaddstream = null;\r\n\t  this.peerconnection.onaddstream = function (event) {\r\n\t    self.trace('onaddstream', event.stream.id);\r\n\t    if (self.onaddstream !== null) {\r\n\t      self.onaddstream(event);\r\n\t    }\r\n\t  };\r\n\t  this.onremovestream = null;\r\n\t  this.peerconnection.onremovestream = function (event) {\r\n\t    self.trace('onremovestream', event.stream.id);\r\n\t    if (self.onremovestream !== null) {\r\n\t      self.onremovestream(event);\r\n\t    }\r\n\t  };\r\n\t  this.onsignalingstatechange = null;\r\n\t  this.peerconnection.onsignalingstatechange = function (event) {\r\n\t    self.trace('onsignalingstatechange', self.signalingState);\r\n\t    console.info('onsignalingstatechange', self.signalingState);\r\n\t    if (self.onsignalingstatechange !== null) {\r\n\t      self.onsignalingstatechange(event);\r\n\t    }\r\n\t  };\r\n\t  this.oniceconnectionstatechange = null;\r\n\t  this.peerconnection.oniceconnectionstatechange = function (event) {\r\n\t    self.trace('oniceconnectionstatechange', self.iceConnectionState);\r\n\t    console.info('oniceconnectionstatechange', self.iceConnectionState);\r\n\t    if (self.oniceconnectionstatechange !== null) {\r\n\t      self.oniceconnectionstatechange(event);\r\n\t    }\r\n\t  };\r\n\t  this.onnegotiationneeded = null;\r\n\t  this.peerconnection.onnegotiationneeded = function (event) {\r\n\t    self.trace('onnegotiationneeded');\r\n\t    if (self.onnegotiationneeded !== null) {\r\n\t      self.onnegotiationneeded(event);\r\n\t    }\r\n\t  };\r\n\t  self.ondatachannel = null;\r\n\t  this.peerconnection.ondatachannel = function (event) {\r\n\t    console.log('on data channel : ', event);\r\n\t    if (event.channel) {\r\n\t      self.channel = event.channel;\r\n\t    }\r\n\t    self.trace('ondatachannel', event);\r\n\t    if (self.ondatachannel !== null) {\r\n\t      self.ondatachannel(event);\r\n\t    }\r\n\t  };\r\n\t  if (!navigator.mozGetUserMedia && this.maxstats) {\r\n\t    this.statsinterval = window.setInterval(function () {\r\n\t      self.peerconnection.getStats(function (stats) {\r\n\t        var results = stats.result();\r\n\t        for (var i = 0; i < results.length; ++i) {\r\n\t          //console.log(results[i].type, results[i].id, results[i].names())\r\n\t          var now = new Date();\r\n\t          results[i].names().forEach(function (name) {\r\n\t            var id = results[i].id + '-' + name;\r\n\t            if (!self.stats[id]) {\r\n\t              self.stats[id] = {\r\n\t                startTime: now,\r\n\t                endTime: now,\r\n\t                values: [],\r\n\t                times: []\r\n\t              };\r\n\t            }\r\n\t            self.stats[id].values.push(results[i].stat(name));\r\n\t            self.stats[id].times.push(now.getTime());\r\n\t            if (self.stats[id].values.length > self.maxstats) {\r\n\t              self.stats[id].values.shift();\r\n\t              self.stats[id].times.shift();\r\n\t            }\r\n\t            self.stats[id].endTime = now;\r\n\t          });\r\n\t        }\r\n\t      });\r\n\t\r\n\t    }, 1000);\r\n\t  }\r\n\t\r\n\t};\r\n\t\r\n\tdumpSDP = function (description) {\r\n\t  return 'type: ' + description.type + '\\r\\n' + description.sdp;\r\n\t}\r\n\t\r\n\twindow.dumpSDP = dumpSDP;\r\n\t\r\n\tif (TraceablePeerConnection.prototype.__defineGetter__ !== undefined) {\r\n\t  TraceablePeerConnection.prototype.__defineGetter__('signalingState', function () {\r\n\t    return this.peerconnection.signalingState;\r\n\t  });\r\n\t  TraceablePeerConnection.prototype.__defineGetter__('iceConnectionState', function () {\r\n\t    return this.peerconnection.iceConnectionState;\r\n\t  });\r\n\t  TraceablePeerConnection.prototype.__defineGetter__('localDescription', function () {\r\n\t    var publicLocalDescription = simulcast.reverseTransformLocalDescription(this.peerconnection.localDescription);\r\n\t    // if we're running on FF, transform to Plan B first.\r\n\t    if (navigator.mozGetUserMedia && publicLocalDescription) {\r\n\t      publicLocalDescription = this.interop.toPlanB(publicLocalDescription);\r\n\t    }\r\n\t    return publicLocalDescription;\r\n\t  });\r\n\t  TraceablePeerConnection.prototype.__defineGetter__('remoteDescription', function () {\r\n\t    var publicRemoteDescription = simulcast.reverseTransformRemoteDescription(this.peerconnection.remoteDescription);\r\n\t    // if we're running on FF, transform to Plan B first.\r\n\t    if (navigator.mozGetUserMedia && publicRemoteDescription) {\r\n\t      publicRemoteDescription = this.interop.toPlanB(publicRemoteDescription);\r\n\t    }\r\n\t    return publicRemoteDescription;\r\n\t  });\r\n\t}\r\n\t\r\n\tTraceablePeerConnection.prototype.addStream = function (stream) {\r\n\t  this.trace('addStream', stream.id);\r\n\t  simulcast.resetSender();\r\n\t  try {\r\n\t    var that = this;\r\n\t    stream.getTracks().forEach(function (track) {\r\n\t      var sender = that.peerconnection.addTrack(\r\n\t        track,\r\n\t        stream\r\n\t      );\r\n\t      if (sender.track.kind == 'video' && !that.localVideoSender) {\r\n\t        that.localVideoSender = sender;\r\n\t      }\r\n\t      if (sender.track.kind == 'audio' && !that.localAudioSender) {\r\n\t        that.localAudioSender = sender;\r\n\t      }\r\n\t    });\r\n\t\r\n\t    // this.peerconnection.addStream(stream);\r\n\t  }\r\n\t  catch (e) {\r\n\t    console.error(e);\r\n\t    return;\r\n\t  }\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.removeStream = function (stream, stopStreams) {\r\n\t  this.trace('removeStream', stream.id);\r\n\t  simulcast.resetSender();\r\n\t  if (stopStreams) {\r\n\t    stream.getAudioTracks().forEach(function (track) {\r\n\t      track.stop();\r\n\t    });\r\n\t    stream.getVideoTracks().forEach(function (track) {\r\n\t      track.stop();\r\n\t    });\r\n\t  }\r\n\t  this.peerconnection.removeStream(stream);\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.createDataChannel = function (label, opts) {\r\n\t  this.trace('createDataChannel', label, opts);\r\n\t  return this.peerconnection.createDataChannel(label, opts);\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.setLocalDescription = function (description, successCallback, failureCallback) {\r\n\t  var self = this;\r\n\t  this.trace('setLocalDescription', dumpSDP(description));\r\n\t  this.peerconnection.setLocalDescription(description,\r\n\t      function () {\r\n\t        self.trace('setLocalDescriptionOnSuccess');\r\n\t        successCallback();\r\n\t      },\r\n\t      function (err) {\r\n\t        self.trace('setLocalDescriptionOnFailure', err);\r\n\t        failureCallback(err);\r\n\t      }\r\n\t  );\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.setRemoteDescription = function (description, successCallback, failureCallback) {\r\n\t  var self = this;\r\n\t  this.trace('setRemoteDescription', dumpSDP(description));\r\n\t  this.peerconnection.setRemoteDescription(description,\r\n\t      function () {\r\n\t        self.trace('setRemoteDescriptionOnSuccess');\r\n\t        successCallback();\r\n\t      },\r\n\t      function (err) {\r\n\t        self.trace('setRemoteDescriptionOnFailure', err);\r\n\t        failureCallback(err);\r\n\t      }\r\n\t  );\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.hardMuteVideo = function (muted) {\r\n\t  this.pendingop = muted ? 'mute' : 'unmute';\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.enqueueAddSsrc = function (channel, ssrcLines) {\r\n\t  if (!this.addssrc[channel]) {\r\n\t    this.addssrc[channel] = '';\r\n\t  }\r\n\t  this.addssrc[channel] += ssrcLines;\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.addSource = function (elem) {\r\n\t  console.log('addssrc', new Date().getTime());\r\n\t  console.log('ice', this.iceConnectionState);\r\n\t  var sdp = new SDP(this.remoteDescription.sdp);\r\n\t  var mySdp = new SDP(this.peerconnection.localDescription.sdp);\r\n\t\r\n\t  var self = this;\r\n\t  $(elem).each(function (idx, content) {\r\n\t    var name = $(content).attr('name');\r\n\t    var lines = '';\r\n\t    tmp = $(content).find('ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]').each(function () {\r\n\t      var semantics = this.getAttribute('semantics');\r\n\t      var ssrcs = $(this).find('>source').map(function () {\r\n\t        return this.getAttribute('ssrc');\r\n\t      }).get();\r\n\t\r\n\t      if (ssrcs.length != 0) {\r\n\t        lines += 'a=ssrc-group:' + semantics + ' ' + ssrcs.join(' ') + '\\r\\n';\r\n\t      }\r\n\t    });\r\n\t    tmp = $(content).find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]'); // can handle both >source and >description>source\r\n\t    tmp.each(function () {\r\n\t      var ssrc = $(this).attr('ssrc');\r\n\t      if (mySdp.containsSSRC(ssrc)) {\r\n\t        /**\r\n\t         * This happens when multiple participants change their streams at the same time and\r\n\t         * ColibriFocus.modifySources have to wait for stable state. In the meantime multiple\r\n\t         * addssrc are scheduled for update IQ. See\r\n\t         */\r\n\t        console.warn(\"Got add stream request for my own ssrc: \" + ssrc);\r\n\t        return;\r\n\t      }\r\n\t      $(this).find('>parameter').each(function () {\r\n\t        lines += 'a=ssrc:' + ssrc + ' ' + $(this).attr('name');\r\n\t        if ($(this).attr('value') && $(this).attr('value').length)\r\n\t          lines += ':' + $(this).attr('value');\r\n\t        lines += '\\r\\n';\r\n\t      });\r\n\t    });\r\n\t    if(lines){\r\n\t      var nameIndex, tempMedia;\r\n\t      if(name == 'audio'){\r\n\t        nameIndex = 0;\r\n\t        tempMedia = sdp.media[nameIndex];\r\n\t      }else if(name == 'video'){\r\n\t        nameIndex = 1;\r\n\t        tempMedia = sdp.media[nameIndex];\r\n\t      }\r\n\t      sdp.media.forEach(function (media, idx) {\r\n\t        console.log('++++++++++++++ source add lines 1 \\n', SDPUtil.find_line(media, 'a=mid:'), name);\r\n\t        if (!SDPUtil.find_line(media, 'a=mid:' + name) && !SDPUtil.find_line(media, 'a=mid:' + nameIndex))\r\n\t          return;\r\n\t        // sdp.media[idx] += lines;\r\n\t        if(name == 'audio' || name == 'video' && tempMedia){\r\n\t          console.log('++++++++++++++ source add 2 ', name, \"\\n\", tempMedia.split('a=ssrc:', 2)[0] );\r\n\t          if(tempMedia.split('a=ssrc:', 2)[0]){\r\n\t            lines = tempMedia.split('a=ssrc:', 2)[0] + lines;\r\n\t          }\r\n\t          sdp.media.push(lines);\r\n\t          self.enqueueAddSsrc(idx, lines);\r\n\t        }\r\n\t      });\r\n\t    }\r\n\t    console.log('++++++++++++++ source add medias \\n', sdp.media);\r\n\t    sdp.raw = sdp.session + sdp.media.join('');\r\n\t    console.log('++++++++++++++ source add sdp \\n', sdp.raw);\r\n\t  });\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.enqueueRemoveSsrc = function (channel, ssrcLines) {\r\n\t  if (!this.removessrc[channel]) {\r\n\t    this.removessrc[channel] = '';\r\n\t  }\r\n\t  this.removessrc[channel] += ssrcLines;\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.removeSource = function (elem) {\r\n\t  console.log('removessrc', new Date().getTime());\r\n\t  console.log('ice', this.iceConnectionState);\r\n\t  var sdp = new SDP(this.remoteDescription.sdp);\r\n\t  var mySdp = new SDP(this.peerconnection.localDescription.sdp);\r\n\t\r\n\t  var self = this;\r\n\t  $(elem).each(function (idx, content) {\r\n\t    var name = $(content).attr('name');\r\n\t    var lines = '';\r\n\t    tmp = $(content).find('ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]').each(function () {\r\n\t      var semantics = this.getAttribute('semantics');\r\n\t      var ssrcs = $(this).find('>source').map(function () {\r\n\t        return this.getAttribute('ssrc');\r\n\t      }).get();\r\n\t\r\n\t      if (ssrcs.length != 0) {\r\n\t        lines += 'a=ssrc-group:' + semantics + ' ' + ssrcs.join(' ') + '\\r\\n';\r\n\t      }\r\n\t    });\r\n\t    tmp = $(content).find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]'); // can handle both >source and >description>source\r\n\t    tmp.each(function () {\r\n\t      var ssrc = $(this).attr('ssrc');\r\n\t      // This should never happen, but can be useful for bug detection\r\n\t      if (mySdp.containsSSRC(ssrc)) {\r\n\t        console.error(\"Got remove stream request for my own ssrc: \" + ssrc);\r\n\t        return;\r\n\t      }\r\n\t      $(this).find('>parameter').each(function () {\r\n\t        lines += 'a=ssrc:' + ssrc + ' ' + $(this).attr('name');\r\n\t        if ($(this).attr('value') && $(this).attr('value').length)\r\n\t          lines += ':' + $(this).attr('value');\r\n\t        lines += '\\r\\n';\r\n\t      });\r\n\t    });\r\n\t    sdp.media.forEach(function (media, idx) {\r\n\t      if (!SDPUtil.find_line(media, 'a=mid:' + name))\r\n\t        return;\r\n\t      sdp.media[idx] += lines;\r\n\t      self.enqueueRemoveSsrc(idx, lines);\r\n\t    });\r\n\t    sdp.raw = sdp.session + sdp.media.join('');\r\n\t  });\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.modifySources = function (successCallback, isNeedAnswer) {\r\n\t  var self = this;\r\n\t  if (this.signalingState == 'closed') return;\r\n\t  if (!(this.addssrc.length || this.removessrc.length || this.pendingop !== null || this.switchstreams)) {\r\n\t    // There is nothing to do since scheduled job might have been executed by another succeeding call\r\n\t    console.warn('There is nothing to do since scheduled job might have been executed by another succeeding call');\r\n\t    if (successCallback) {\r\n\t      successCallback();\r\n\t    }\r\n\t    return;\r\n\t  }\r\n\t\r\n\t  // FIXME: this is a big hack\r\n\t  // https://code.google.com/p/webrtc/issues/detail?id=2688\r\n\t  // ^ has been fixed.\r\n\t\r\n\t  // Reset switch streams flag\r\n\t  this.switchstreams = false;\r\n\t  console.log('222222222222222221111111111111111111 \\n', this.remoteDescription.sdp);\r\n\t  var sdp = new SDP(this.remoteDescription.sdp);\r\n\t  console.log('22222222222222222222222222222222222 \\n', sdp.raw);\r\n\t  // add sources\r\n\t  this.addssrc.forEach(function (lines, idx) {\r\n\t    // sdp.media[idx] += lines;\r\n\t    sdp.media.push(lines);\r\n\t  });\r\n\t  this.addssrc = [];\r\n\t\r\n\t  // remove sources\r\n\t  this.removessrc.forEach(function (lines, idx) {\r\n\t    lines = lines.split('\\r\\n');\r\n\t    lines.pop(); // remove empty last element;\r\n\t    lines.forEach(function (line) {\r\n\t      sdp.media[idx] = sdp.media[idx].replace(line + '\\r\\n', '');\r\n\t    });\r\n\t  });\r\n\t  this.removessrc = [];\r\n\t\r\n\t  // FIXME:\r\n\t  // this was a hack for the situation when only one peer exists\r\n\t  // in the conference.\r\n\t  // check if still required and remove\r\n\t  if (sdp.media[0])\r\n\t    sdp.media[0] = sdp.media[0].replace('a=recvonly', 'a=sendrecv');\r\n\t  if (sdp.media[1])\r\n\t    sdp.media[1] = sdp.media[1].replace('a=recvonly', 'a=sendrecv');\r\n\t\r\n\t  sdp.raw = sdp.session + sdp.media.join('');\r\n\t  console.log('222222222222222223333333333333333333 \\n', sdp.raw, \"\\n\", sdp.media);\r\n\t  this.setRemoteDescription(new RTCSessionDescription({type: 'offer', sdp: sdp.raw}),\r\n\t    function () {\r\n\t\r\n\t      if (self.signalingState == 'closed') {\r\n\t        console.error(\"createAnswer attempt on closed state\");\r\n\t        return;\r\n\t      }\r\n\t\r\n\t      if (isNeedAnswer) {\r\n\t        self.createAnswer(\r\n\t          function (modifiedAnswer) {\r\n\t            // change video direction, see https://github.com/jitsi/jitmeet/issues/41\r\n\t            console.log('AAAAAAAAAAAAAAAAA new answer: ', modifiedAnswer);\r\n\t            if (self.pendingop !== null) {\r\n\t              var sdp = new SDP(modifiedAnswer.sdp);\r\n\t              if (sdp.media.length > 1) {\r\n\t                switch (self.pendingop) {\r\n\t                  case 'mute':\r\n\t                    sdp.media[1] = sdp.media[1].replace('a=sendrecv', 'a=recvonly');\r\n\t                    break;\r\n\t                  case 'unmute':\r\n\t                    sdp.media[1] = sdp.media[1].replace('a=recvonly', 'a=sendrecv');\r\n\t                    break;\r\n\t                }\r\n\t                sdp.raw = sdp.session + sdp.media.join('');\r\n\t                modifiedAnswer.sdp = sdp.raw;\r\n\t              }\r\n\t              self.pendingop = null;\r\n\t            }\r\n\t\r\n\t            // FIXME: pushing down an answer while ice connection state\r\n\t            // console.log('AAAAAAAAAAAAAAAA will set local description ', manualRemoveUnknownSSRCFromSDP(modifiedAnswer));\r\n\t            // modifiedAnswer = manualRemoveUnknownSSRCFromSDP(modifiedAnswer);\r\n\t            // is still checking is bad...\r\n\t            //console.log(self.peerconnection.iceConnectionState);\r\n\t\r\n\t            // trying to work around another chrome bug\r\n\t            //modifiedAnswer.sdp = modifiedAnswer.sdp.replace(/a=setup:active/g, 'a=setup:actpass');\r\n\t            self.setLocalDescription(modifiedAnswer,\r\n\t              function () {\r\n\t                //console.log('modified setLocalDescription ok');\r\n\t                if (successCallback) {\r\n\t                  successCallback();\r\n\t                }\r\n\t              },\r\n\t              function (error) {\r\n\t                console.error('modified setLocalDescription failed', error);\r\n\t              }\r\n\t            );\r\n\t          },\r\n\t          function (error) {\r\n\t            console.error('modified answer failed', error);\r\n\t          }\r\n\t        );\r\n\t      } else {\r\n\t        // 不需要set local description ,直接解锁\r\n\t        self.negotiationInprogress = false;\r\n\t      }\r\n\t    },\r\n\t    function (error) {\r\n\t      console.error('modify failed', error);\r\n\t    }\r\n\t  );\r\n\t};\r\n\t\r\n\tfunction manualRemoveUnknownSSRCFromSDP(beforeAnswer) {\r\n\t\r\n\t  // console.log('AAAAAAAAAAAAAAAAAAAAAAAAAAA before modify media : ', transform.parse(beforeAnswer.sdp).media, ' \\r Before answer : ', beforeAnswer);\r\n\t\r\n\t  var sdp = transform.parse(beforeAnswer.sdp);\r\n\t  var media = sdp.media;\r\n\t  media.forEach(function (value, key) {\r\n\t    if (value.type == 'video') {\r\n\t      var video = value;\r\n\t      var ssrcsLength = video.ssrcs.length;\r\n\t      if (ssrcsLength > 4) { // 如果是屏幕分享者,则需要发送两股流.\r\n\t        // rebuilt ssrcs\r\n\t        var newSSRCS = [];\r\n\t        newSSRCS.push(video.ssrcs[ssrcsLength - 4]);\r\n\t        newSSRCS.push(video.ssrcs[ssrcsLength - 3]);\r\n\t        newSSRCS.push(video.ssrcs[ssrcsLength - 2]);\r\n\t        newSSRCS.push(video.ssrcs[ssrcsLength - 1]);\r\n\t        video.ssrcs = newSSRCS;\r\n\t      }\r\n\t      media[key] = video;\r\n\t    }\r\n\t  });\r\n\t  sdp.media = media;\r\n\t  // console.log('AAAAAAAAAAAAAAAAAAAAAAAAAAA after modify media : ', media, 'after sdp : ', transform.write(sdp));\r\n\t  beforeAnswer.sdp = transform.write(sdp);\r\n\t\r\n\t  // console.log('AAAAAAAAAAAAAAAAAAAAAAAAAAA after modify media : ', ' \\r after answer : ', beforeAnswer);\r\n\t  return beforeAnswer;\r\n\t}\r\n\t\r\n\tTraceablePeerConnection.prototype.close = function () {\r\n\t  this.trace('stop');\r\n\t  if (this.statsinterval !== null) {\r\n\t    window.clearInterval(this.statsinterval);\r\n\t    this.statsinterval = null;\r\n\t  }\r\n\t  this.peerconnection.close();\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.createOffer = function (successCallback, failureCallback, constraints) {\r\n\t  var self = this;\r\n\t  this.trace('createOffer', JSON.stringify(constraints, null, ' '));\r\n\t  this.peerconnection.createOffer(\r\n\t    function (offer) {\r\n\t      self.trace('createOfferOnSuccess', dumpSDP(offer));\r\n\t      if (navigator.mozGetUserMedia)\r\n\t        offer = self.interop.toPlanB(offer);\r\n\t      console.log('------------------ Create Offer Success--------------------', dumpSDP(offer));\r\n\t      successCallback(offer);\r\n\t    },\r\n\t    function (err) {\r\n\t      self.trace('createOfferOnFailure', err);\r\n\t      failureCallback(err);\r\n\t    },\r\n\t    constraints\r\n\t  );\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.createAnswer = function (successCallback, failureCallback, constraints) {\r\n\t  var self = this;\r\n\t  this.trace('createAnswer', JSON.stringify(constraints, null, ' '));\r\n\t  this.peerconnection.createAnswer(\r\n\t    function (answer) {\r\n\t      answer = simulcast.transformAnswer(answer);\r\n\t      // if (navigator.mozGetUserMedia) {\r\n\t      //   answer = self.interop.toPlanB(answer);\r\n\t      // }\r\n\t      // console.log('------------------ Create Answer Success--------------------', dumpSDP(answer));\r\n\t      successCallback(answer);\r\n\t    },\r\n\t    function (err) {\r\n\t      self.trace('createAnswerOnFailure', err);\r\n\t      failureCallback(err);\r\n\t    },\r\n\t    constraints\r\n\t  );\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.addIceCandidate = function (candidate, successCallback, failureCallback) {\r\n\t  var self = this;\r\n\t  this.trace('addIceCandidate', JSON.stringify(candidate, null, ' '));\r\n\t  this.peerconnection.addIceCandidate(candidate);\r\n\t  /* maybe later\r\n\t   this.peerconnection.addIceCandidate(candidate,\r\n\t   function () {\r\n\t   self.trace('addIceCandidateOnSuccess');\r\n\t   successCallback();\r\n\t   },\r\n\t   function (err) {\r\n\t   self.trace('addIceCandidateOnFailure', err);\r\n\t   failureCallback(err);\r\n\t   }\r\n\t   );\r\n\t   */\r\n\t};\r\n\t\r\n\tTraceablePeerConnection.prototype.getStats = function (callback, errorCallback) {\r\n\t  if (ms.isFirefox()) {\r\n\t    this.peerconnection.getStats(null).then(callback);\r\n\t  } else if (ms.isSafari()) {\r\n\t    this.peerconnection.getStats(null).then(callback);\r\n\t  } else {\r\n\t    this.peerconnection.getStats(callback);\r\n\t  }\r\n\t};\r\n\t\r\n\texports = module.exports = TraceablePeerConnection;\r\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* Copyright @ 2015 Atlassian Pty Ltd\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *     http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software\n\t * distributed under the License is distributed on an \"AS IS\" BASIS,\n\t * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t * See the License for the specific language governing permissions and\n\t * limitations under the License.\n\t */\n\t\n\texports.Interop = __webpack_require__(45);\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* Copyright @ 2015 Atlassian Pty Ltd\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *     http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software\n\t * distributed under the License is distributed on an \"AS IS\" BASIS,\n\t * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t * See the License for the specific language governing permissions and\n\t * limitations under the License.\n\t */\n\t\n\t/* global RTCSessionDescription */\n\t/* global RTCIceCandidate */\n\t/* jshint -W097 */\n\t\"use strict\";\n\t\n\tvar transform = __webpack_require__(46);\n\tvar arrayEquals = __webpack_require__(51);\n\t\n\tfunction Interop() {\n\t\n\t    /**\n\t     * This map holds the most recent Unified Plan offer/answer SDP that was\n\t     * converted to Plan B, with the SDP type ('offer' or 'answer') as keys and\n\t     * the SDP string as values.\n\t     *\n\t     * @type {{}}\n\t     */\n\t    this.cache = {\n\t        mlB2UMap : {},\n\t        mlU2BMap : {}\n\t    };\n\t}\n\t\n\tmodule.exports = Interop;\n\t\n\t/**\n\t * Changes the candidate args to match with the related Unified Plan\n\t */\n\tInterop.prototype.candidateToUnifiedPlan = function(candidate) {\n\t    var cand = new RTCIceCandidate(candidate);\n\t\n\t    cand.sdpMLineIndex = this.cache.mlB2UMap[cand.sdpMLineIndex];\n\t    /* TODO: change sdpMid to (audio|video)-SSRC */\n\t\n\t    return cand;\n\t};\n\t\n\t/**\n\t * Changes the candidate args to match with the related Plan B\n\t */\n\tInterop.prototype.candidateToPlanB = function(candidate) {\n\t    var cand = new RTCIceCandidate(candidate);\n\t\n\t    if (cand.sdpMid.indexOf('audio') === 0) {\n\t      cand.sdpMid = 'audio';\n\t    } else if (cand.sdpMid.indexOf('video') === 0) {\n\t      cand.sdpMid = 'video';\n\t    } else {\n\t      throw new Error('candidate with ' + cand.sdpMid + ' not allowed');\n\t    }\n\t\n\t    cand.sdpMLineIndex = this.cache.mlU2BMap[cand.sdpMLineIndex];\n\t\n\t    return cand;\n\t};\n\t\n\t/**\n\t * Returns the index of the first m-line with the given media type and with a\n\t * direction which allows sending, in the last Unified Plan description with\n\t * type \"answer\" converted to Plan B. Returns {null} if there is no saved\n\t * answer, or if none of its m-lines with the given type allow sending.\n\t * @param type the media type (\"audio\" or \"video\").\n\t * @returns {*}\n\t */\n\tInterop.prototype.getFirstSendingIndexFromAnswer = function(type) {\n\t    if (!this.cache.answer) {\n\t        return null;\n\t    }\n\t\n\t    var session = transform.parse(this.cache.answer);\n\t    if (session && session.media && Array.isArray(session.media)){\n\t        for (var i = 0; i < session.media.length; i++) {\n\t            if (session.media[i].type == type &&\n\t                (!session.media[i].direction /* default to sendrecv */ ||\n\t                    session.media[i].direction === 'sendrecv' ||\n\t                    session.media[i].direction === 'sendonly')){\n\t                return i;\n\t            }\n\t        }\n\t    }\n\t\n\t    return null;\n\t};\n\t\n\t/**\n\t * This method transforms a Unified Plan SDP to an equivalent Plan B SDP. A\n\t * PeerConnection wrapper transforms the SDP to Plan B before passing it to the\n\t * application.\n\t *\n\t * @param desc\n\t * @returns {*}\n\t */\n\tInterop.prototype.toPlanB = function(desc) {\n\t    var self = this;\n\t    //#region Preliminary input validation.\n\t\n\t    if (typeof desc !== 'object' || desc === null ||\n\t        typeof desc.sdp !== 'string') {\n\t        console.warn('An empty description was passed as an argument.');\n\t        return desc;\n\t    }\n\t\n\t    // Objectify the SDP for easier manipulation.\n\t    var session = transform.parse(desc.sdp);\n\t\n\t    // If the SDP contains no media, there's nothing to transform.\n\t    if (typeof session.media === 'undefined' ||\n\t        !Array.isArray(session.media) || session.media.length === 0) {\n\t        console.warn('The description has no media.');\n\t        return desc;\n\t    }\n\t\n\t    // Try some heuristics to \"make sure\" this is a Unified Plan SDP. Plan B\n\t    // SDP has a video, an audio and a data \"channel\" at most.\n\t    if (session.media.length <= 3 && session.media.every(function(m) {\n\t            return ['video', 'audio', 'data'].indexOf(m.mid) !== -1;\n\t        })) {\n\t        console.warn('This description does not look like Unified Plan.');\n\t        return desc;\n\t    }\n\t\n\t    //#endregion\n\t\n\t    // HACK https://bugzilla.mozilla.org/show_bug.cgi?id=1113443\n\t    var sdp = desc.sdp;\n\t    var rewrite = false;\n\t    for (var i = 0; i < session.media.length; i++) {\n\t        var uLine = session.media[i];\n\t        uLine.rtp.forEach(function(rtp) {\n\t            if (rtp.codec === 'NULL')\n\t            {\n\t                rewrite = true;\n\t                var offer = transform.parse(self.cache.offer);\n\t                rtp.codec = offer.media[i].rtp[0].codec;\n\t            }\n\t        });\n\t    }\n\t    if (rewrite) {\n\t        sdp = transform.write(session);\n\t    }\n\t\n\t    // Unified Plan SDP is our \"precious\". Cache it for later use in the Plan B\n\t    // -> Unified Plan transformation.\n\t    this.cache[desc.type] = sdp;\n\t\n\t    //#region Convert from Unified Plan to Plan B.\n\t\n\t    // We rebuild the session.media array.\n\t    var media = session.media;\n\t    session.media = [];\n\t\n\t    // Associative array that maps channel types to channel objects for fast\n\t    // access to channel objects by their type, e.g. type2bl['audio']->channel\n\t    // obj.\n\t    var type2bl = {};\n\t\n\t    // Used to build the group:BUNDLE value after the channels construction\n\t    // loop.\n\t    var types = [];\n\t\n\t    // Used to aggregate the directions of the m-lines.\n\t    var directionResult = {};\n\t\n\t    media.forEach(function(uLine) {\n\t        // rtcp-mux is required in the Plan B SDP.\n\t        if ((typeof uLine.rtcpMux !== 'string' ||\n\t            uLine.rtcpMux !== 'rtcp-mux') &&\n\t            uLine.direction !== 'inactive') {\n\t            throw new Error('Cannot convert to Plan B because m-lines ' +\n\t                'without the rtcp-mux attribute were found.');\n\t        }\n\t\n\t        // If we don't have a channel for this uLine.type OR the selected is\n\t        // inactive, then select this uLine as the channel basis.\n\t        if (typeof type2bl[uLine.type] === 'undefined' ||\n\t            type2bl[uLine.type].direction === 'inactive') {\n\t            type2bl[uLine.type] = uLine;\n\t        }\n\t    });\n\t\n\t    // Implode the Unified Plan m-lines/tracks into Plan B channels.\n\t    media.forEach(function(uLine) {\n\t        var type = uLine.type;\n\t\n\t        if (type === 'application') {\n\t            session.media.push(uLine);\n\t            types.push(uLine.mid);\n\t            return;\n\t        }\n\t\n\t        // Add sources to the channel and handle a=msid.\n\t        if (typeof uLine.sources === 'object') {\n\t            Object.keys(uLine.sources).forEach(function(ssrc) {\n\t                if (typeof type2bl[type].sources !== 'object')\n\t                    type2bl[type].sources = {};\n\t\n\t                // Assign the sources to the channel.\n\t                type2bl[type].sources[ssrc] = uLine.sources[ssrc];\n\t\n\t                if (typeof uLine.msid !== 'undefined') {\n\t                    // In Plan B the msid is an SSRC attribute. Also, we don't\n\t                    // care about the obsolete label and mslabel attributes.\n\t                    //\n\t                    // Note that it is not guaranteed that the uLine will\n\t                    // have an msid. recvonly channels in particular don't have\n\t                    // one.\n\t                    type2bl[type].sources[ssrc].msid = uLine.msid;\n\t                }\n\t                // NOTE ssrcs in ssrc groups will share msids, as\n\t                // draft-uberti-rtcweb-plan-00 mandates.\n\t            });\n\t        }\n\t\n\t        // Add ssrc groups to the channel.\n\t        if (typeof uLine.ssrcGroups !== 'undefined' &&\n\t                Array.isArray(uLine.ssrcGroups)) {\n\t\n\t            // Create the ssrcGroups array, if it's not defined.\n\t            if (typeof type2bl[type].ssrcGroups === 'undefined' ||\n\t                    !Array.isArray(type2bl[type].ssrcGroups)) {\n\t                type2bl[type].ssrcGroups = [];\n\t            }\n\t\n\t            type2bl[type].ssrcGroups\n\t                = type2bl[type].ssrcGroups.concat(uLine.ssrcGroups);\n\t        }\n\t\n\t        var direction = uLine.direction;\n\t\n\t        directionResult[type]\n\t            = (directionResult[type] || 0 /* inactive */)\n\t                | directionMasks[direction || 'inactive'];\n\t\n\t        if (type2bl[type] === uLine) {\n\t            // Plan B mids are in ['audio', 'video', 'data']\n\t            uLine.mid = type;\n\t\n\t            // Plan B doesn't support/need the bundle-only attribute.\n\t            delete uLine.bundleOnly;\n\t\n\t            // In Plan B the msid is an SSRC attribute.\n\t            delete uLine.msid;\n\t\n\t            if (direction !== 'inactive') {\n\t              // Used to build the group:BUNDLE value after this loop.\n\t              types.push(type);\n\t            }\n\t\n\t            // Add the channel to the new media array.\n\t            session.media.push(uLine);\n\t        }\n\t    });\n\t\n\t    // We regenerate the BUNDLE group with the new mids.\n\t    session.groups.some(function(group) {\n\t        if (group.type === 'BUNDLE') {\n\t            group.mids = types.join(' ');\n\t            return true;\n\t        }\n\t    });\n\t\n\t    // msid semantic\n\t    session.msidSemantic = {\n\t        semantic: 'WMS',\n\t        token: '*'\n\t    };\n\t\n\t    var resStr = transform.write(session);\n\t\n\t    return new RTCSessionDescription({\n\t        type: desc.type,\n\t        sdp: resStr\n\t    });\n\t\n\t    //#endregion\n\t};\n\t\n\t/**\n\t * This method transforms a Plan B SDP to an equivalent Unified Plan SDP. A\n\t * PeerConnection wrapper transforms the SDP to Unified Plan before passing it\n\t * to FF.\n\t *\n\t * @param desc\n\t * @returns {*}\n\t */\n\tInterop.prototype.toUnifiedPlan = function(desc) {\n\t    var self = this;\n\t    //#region Preliminary input validation.\n\t\n\t    if (typeof desc !== 'object' || desc === null ||\n\t        typeof desc.sdp !== 'string') {\n\t        console.warn('An empty description was passed as an argument.');\n\t        return desc;\n\t    }\n\t\n\t    var session = transform.parse(desc.sdp);\n\t\n\t    // If the SDP contains no media, there's nothing to transform.\n\t    if (typeof session.media === 'undefined' ||\n\t        !Array.isArray(session.media) || session.media.length === 0) {\n\t        console.warn('The description has no media.');\n\t        return desc;\n\t    }\n\t\n\t    // Try some heuristics to \"make sure\" this is a Plan B SDP. Plan B SDP has\n\t    // a video, an audio and a data \"channel\" at most.\n\t    if (session.media.length > 3 || !session.media.every(function(m) {\n\t            return ['video', 'audio', 'data'].indexOf(m.mid) !== -1;\n\t        })) {\n\t        console.warn('This description does not look like Plan B.');\n\t        return desc;\n\t    }\n\t\n\t    // Make sure this Plan B SDP can be converted to a Unified Plan SDP.\n\t    var mids = [];\n\t    session.media.forEach(function(m) {\n\t        mids.push(m.mid);\n\t    });\n\t\n\t    var hasBundle = false;\n\t    if (typeof session.groups !== 'undefined' &&\n\t        Array.isArray(session.groups)) {\n\t        hasBundle = session.groups.every(function(g) {\n\t            return g.type !== 'BUNDLE' ||\n\t                arrayEquals.apply(g.mids.sort(), [mids.sort()]);\n\t        });\n\t    }\n\t\n\t    if (!hasBundle) {\n\t        throw new Error(\"Cannot convert to Unified Plan because m-lines that\" +\n\t            \" are not bundled were found.\");\n\t    }\n\t\n\t    //#endregion\n\t\n\t\n\t    //#region Convert from Plan B to Unified Plan.\n\t\n\t    // Unfortunately, a Plan B offer/answer doesn't have enough information to\n\t    // rebuild an equivalent Unified Plan offer/answer.\n\t    //\n\t    // For example, if this is a local answer (in Unified Plan style) that we\n\t    // convert to Plan B prior to handing it over to the application (the\n\t    // PeerConnection wrapper called us, for instance, after a successful\n\t    // createAnswer), we want to remember the m-line at which we've seen the\n\t    // (local) SSRC. That's because when the application wants to do call the\n\t    // SLD method, forcing us to do the inverse transformation (from Plan B to\n\t    // Unified Plan), we need to know to which m-line to assign the (local)\n\t    // SSRC. We also need to know all the other m-lines that the original\n\t    // answer had and include them in the transformed answer as well.\n\t    //\n\t    // Another example is if this is a remote offer that we convert to Plan B\n\t    // prior to giving it to the application, we want to remember the mid at\n\t    // which we've seen the (remote) SSRC.\n\t    //\n\t    // In the iteration that follows, we use the cached Unified Plan (if it\n\t    // exists) to assign mids to ssrcs.\n\t\n\t    var cached;\n\t    if (typeof this.cache[desc.type] !== 'undefined') {\n\t        cached = transform.parse(this.cache[desc.type]);\n\t    }\n\t\n\t    var recvonlySsrcs = {\n\t        audio: {},\n\t        video: {}\n\t    };\n\t\n\t    // A helper map that sends mids to m-line objects. We use it later to\n\t    // rebuild the Unified Plan style session.media array.\n\t    var mid2ul = {};\n\t    var bIdx = 0;\n\t    var uIdx = 0;\n\t\n\t    session.media.forEach(function(bLine) {\n\t        console.log('===== bLine', bLine);\n\t        if (bLine.type === 'application') {\n\t            mid2ul[bLine.mid] = bLine;\n\t            return;\n\t        }\n\t        if ((typeof bLine.rtcpMux !== 'string' ||\n\t            bLine.rtcpMux !== 'rtcp-mux') &&\n\t            bLine.direction !== 'inactive') {\n\t            throw new Error(\"Cannot convert to Unified Plan because m-lines \" +\n\t                \"without the rtcp-mux attribute were found.\");\n\t        }\n\t\n\t        // With rtcp-mux and bundle all the channels should have the same ICE\n\t        // stuff.\n\t        var sources = bLine.sources;\n\t        var ssrcGroups = bLine.ssrcGroups;\n\t        var candidates = bLine.candidates;\n\t        var iceUfrag = bLine.iceUfrag;\n\t        var icePwd = bLine.icePwd;\n\t        var fingerprint = bLine.fingerprint;\n\t        var port = bLine.port;\n\t\n\t        // We'll use the \"bLine\" object as a prototype for each new \"mLine\"\n\t        // that we create, but first we need to clean it up a bit.\n\t        delete bLine.sources;\n\t        delete bLine.ssrcGroups;\n\t        delete bLine.candidates;\n\t        delete bLine.iceUfrag;\n\t        delete bLine.icePwd;\n\t        delete bLine.fingerprint;\n\t        delete bLine.port;\n\t        delete bLine.mid;\n\t\n\t        // inverted ssrc group map\n\t        var ssrc2group = {};\n\t        if (typeof ssrcGroups !== 'undefined' && Array.isArray(ssrcGroups)) {\n\t            ssrcGroups.forEach(function (ssrcGroup) {\n\t\n\t                // TODO(gp) find out how to receive simulcast with FF. For the\n\t                // time being, hide it.\n\t                if (ssrcGroup.semantics === 'SIM') {\n\t                    return;\n\t                }\n\t\n\t                // XXX This might brake if an SSRC is in more than one group\n\t                // for some reason.\n\t                if (typeof ssrcGroup.ssrcs !== 'undefined' &&\n\t                    Array.isArray(ssrcGroup.ssrcs)) {\n\t                    ssrcGroup.ssrcs.forEach(function (ssrc) {\n\t                        if (typeof ssrc2group[ssrc] === 'undefined') {\n\t                            ssrc2group[ssrc] = [];\n\t                        }\n\t\n\t                        ssrc2group[ssrc].push(ssrcGroup);\n\t                    });\n\t                }\n\t            });\n\t        }\n\t\n\t        // ssrc to m-line index.\n\t        var ssrc2ml = {};\n\t\n\t        if (typeof sources === 'object') {\n\t\n\t            // Explode the Plan B channel sources with one m-line per source.\n\t            Object.keys(sources).forEach(function(ssrc) {\n\t\n\t                // The (unified) m-line for this SSRC. We either create it from\n\t                // scratch or, if it's a grouped SSRC, we re-use a related\n\t                // mline. In other words, if the source is grouped with another\n\t                // source, put the two together in the same m-line.\n\t                var uLine;\n\t\n\t                // We assume here that we are the answerer in the O/A, so any\n\t                // offers which we translate come from the remote side, while\n\t                // answers are local. So the check below is to make that we\n\t                // handle receive-only SSRCs in a special way only if they come\n\t                // from the remote side.\n\t                if (desc.type==='offer') {\n\t                    // We want to detect SSRCs which are used by a remote peer\n\t                    // in an m-line with direction=recvonly (i.e. they are\n\t                    // being used for RTCP only).\n\t                    // This information would have gotten lost if the remote\n\t                    // peer used Unified Plan and their local description was\n\t                    // translated to Plan B. So we use the lack of an MSID\n\t                    // attribute to deduce a \"receive only\" SSRC.\n\t                    if (!sources[ssrc].msid) {\n\t                        recvonlySsrcs[bLine.type][ssrc] = sources[ssrc];\n\t                        // Receive-only SSRCs must not create new m-lines. We\n\t                        // will assign them to an existing m-line later.\n\t                        return;\n\t                    }\n\t                }\n\t\n\t                if (typeof ssrc2group[ssrc] !== 'undefined' &&\n\t                    Array.isArray(ssrc2group[ssrc])) {\n\t                    ssrc2group[ssrc].some(function (ssrcGroup) {\n\t                        // ssrcGroup.ssrcs *is* an Array, no need to check\n\t                        // again here.\n\t                        return ssrcGroup.ssrcs.some(function (related) {\n\t                            if (typeof ssrc2ml[related] === 'object') {\n\t                                uLine = ssrc2ml[related];\n\t                                return true;\n\t                            }\n\t                        });\n\t                    });\n\t                }\n\t\n\t                if (typeof uLine === 'object') {\n\t                    // the m-line already exists. Just add the source.\n\t                    uLine.sources[ssrc] = sources[ssrc];\n\t                    delete sources[ssrc].msid;\n\t                } else {\n\t                    // Use the \"bLine\" as a prototype for the \"uLine\".\n\t                    uLine = Object.create(bLine);\n\t                    ssrc2ml[ssrc] = uLine;\n\t\n\t                    if (typeof sources[ssrc].msid !== 'undefined') {\n\t                        // Assign the msid of the source to the m-line. Note\n\t                        // that it is not guaranteed that the source will have\n\t                        // msid. In particular \"recvonly\" sources don't have an\n\t                        // msid. Note that \"recvonly\" is a term only defined\n\t                        // for m-lines.\n\t                        uLine.msid = sources[ssrc].msid;\n\t                        delete sources[ssrc].msid;\n\t                    }\n\t\n\t                    // We assign one SSRC per media line.\n\t                    uLine.sources = {};\n\t                    uLine.sources[ssrc] = sources[ssrc];\n\t                    uLine.ssrcGroups = ssrc2group[ssrc];\n\t\n\t                    // Use the cached Unified Plan SDP (if it exists) to assign\n\t                    // SSRCs to mids.\n\t                    if (typeof cached !== 'undefined' &&\n\t                        typeof cached.media !== 'undefined' &&\n\t                        Array.isArray(cached.media)) {\n\t\n\t                        cached.media.forEach(function (m) {\n\t                            if (typeof m.sources === 'object') {\n\t                                Object.keys(m.sources).forEach(function (s) {\n\t                                    if (s === ssrc) {\n\t                                        uLine.mid = m.mid;\n\t                                    }\n\t                                });\n\t                            }\n\t                        });\n\t                    }\n\t\n\t                    if (typeof uLine.mid === 'undefined') {\n\t\n\t                        // If this is an SSRC that we see for the first time\n\t                        // assign it a new mid. This is typically the case when\n\t                        // this method is called to transform a remote\n\t                        // description for the first time or when there is a\n\t                        // new SSRC in the remote description because a new\n\t                        // peer has joined the conference. Local SSRCs should\n\t                        // have already been added to the map in the toPlanB\n\t                        // method.\n\t                        //\n\t                        // Because FF generates answers in Unified Plan style,\n\t                        // we MUST already have a cached answer with all the\n\t                        // local SSRCs mapped to some m-line/mid.\n\t\n\t                        if (desc.type === 'answer') {\n\t                            throw new Error(\"An unmapped SSRC was found.\");\n\t                        }\n\t\n\t                        uLine.mid = [bLine.type, '-', ssrc].join('');\n\t                    }\n\t\n\t                    // Include the candidates in the 1st media line.\n\t                    uLine.candidates = candidates;\n\t                    uLine.iceUfrag = iceUfrag;\n\t                    uLine.icePwd = icePwd;\n\t                    uLine.fingerprint = fingerprint;\n\t                    uLine.port = port;\n\t\n\t                    mid2ul[uLine.mid] = uLine;\n\t\n\t                    self.cache.mlU2BMap[uIdx] = bIdx;\n\t                    if (typeof self.cache.mlB2UMap[bIdx] === 'undefined') {\n\t                      self.cache.mlB2UMap[bIdx] = uIdx;\n\t                    }\n\t                    uIdx++;\n\t                }\n\t            });\n\t        }\n\t\n\t        bIdx++;\n\t    });\n\t\n\t    // Rebuild the media array in the right order and add the missing mLines\n\t    // (missing from the Plan B SDP).\n\t    session.media = [];\n\t    mids = []; // reuse\n\t\n\t    if (desc.type === 'answer') {\n\t\n\t        // The media lines in the answer must match the media lines in the\n\t        // offer. The order is important too. Here we assume that Firefox is\n\t        // the answerer, so we merely have to use the reconstructed (unified)\n\t        // answer to update the cached (unified) answer accordingly.\n\t        //\n\t        // In the general case, one would have to use the cached (unified)\n\t        // offer to find the m-lines that are missing from the reconstructed\n\t        // answer, potentially grabbing them from the cached (unified) answer.\n\t        // One has to be careful with this approach because inactive m-lines do\n\t        // not always have an mid, making it tricky (impossible?) to find where\n\t        // exactly and which m-lines are missing from the reconstructed answer.\n\t\n\t        for (var i = 0; i < cached.media.length; i++) {\n\t            var uLine = cached.media[i];\n\t\n\t            if (typeof mid2ul[uLine.mid] === 'undefined') {\n\t\n\t                // The mid isn't in the reconstructed (unified) answer.\n\t                // This is either a (unified) m-line containing a remote\n\t                // track only, or a (unified) m-line containing a remote\n\t                // track and a local track that has been removed.\n\t                // In either case, it MUST exist in the cached\n\t                // (unified) answer.\n\t                //\n\t                // In case this is a removed local track, clean-up\n\t                // the (unified) m-line and make sure it's 'recvonly' or\n\t                // 'inactive'.\n\t\n\t                delete uLine.msid;\n\t                delete uLine.sources;\n\t                delete uLine.ssrcGroups;\n\t                if (!uLine.direction\n\t                    || uLine.direction === 'sendrecv')\n\t                    uLine.direction = 'recvonly';\n\t                else if (uLine.direction === 'sendonly')\n\t                    uLine.direction = 'inactive';\n\t            } else {\n\t                // This is an (unified) m-line/channel that contains a local\n\t                // track (sendrecv or sendonly channel) or it's a unified\n\t                // recvonly m-line/channel. In either case, since we're\n\t                // going from PlanB -> Unified Plan this m-line MUST\n\t                // exist in the cached answer.\n\t            }\n\t\n\t            session.media.push(uLine);\n\t\n\t            if (typeof uLine.mid === 'string') {\n\t                // inactive lines don't/may not have an mid.\n\t                mids.push(uLine.mid);\n\t            }\n\t        }\n\t    } else {\n\t\n\t        // SDP offer/answer (and the JSEP spec) forbids removing an m-section\n\t        // under any circumstances. If we are no longer interested in sending a\n\t        // track, we just remove the msid and ssrc attributes and set it to\n\t        // either a=recvonly (as the reofferer, we must use recvonly if the\n\t        // other side was previously sending on the m-section, but we can also\n\t        // leave the possibility open if it wasn't previously in use), or\n\t        // a=inactive.\n\t\n\t        if (typeof cached !== 'undefined' &&\n\t            typeof cached.media !== 'undefined' &&\n\t            Array.isArray(cached.media)) {\n\t            cached.media.forEach(function(uLine) {\n\t                mids.push(uLine.mid);\n\t                if (typeof mid2ul[uLine.mid] !== 'undefined') {\n\t                    session.media.push(mid2ul[uLine.mid]);\n\t                } else {\n\t                    delete uLine.msid;\n\t                    delete uLine.sources;\n\t                    delete uLine.ssrcGroups;\n\t                    if (!uLine.direction\n\t                        || uLine.direction === 'sendrecv')\n\t                        uLine.direction = 'recvonly';\n\t                    if (!uLine.direction\n\t                        || uLine.direction === 'sendonly')\n\t                        uLine.direction = 'inactive';\n\t                    session.media.push(uLine);\n\t                }\n\t            });\n\t        }\n\t\n\t        // Add all the remaining (new) m-lines of the transformed SDP.\n\t        Object.keys(mid2ul).forEach(function(mid) {\n\t            if (mids.indexOf(mid) === -1) {\n\t                mids.push(mid);\n\t                if (mid2ul[mid].direction === 'recvonly') {\n\t                    // This is a remote recvonly channel. Add its SSRC to the\n\t                    // appropriate sendrecv or sendonly channel.\n\t                    // TODO(gp) what if we don't have sendrecv/sendonly\n\t                    // channel?\n\t\n\t                    session.media.some(function (uLine) {\n\t                        if ((uLine.direction === 'sendrecv' ||\n\t                            uLine.direction === 'sendonly') &&\n\t                            uLine.type === mid2ul[mid].type) {\n\t\n\t                            // mid2ul[mid] shouldn't have any ssrc-groups\n\t                            Object.keys(mid2ul[mid].sources).forEach(\n\t                                function (ssrc) {\n\t                                uLine.sources[ssrc] =\n\t                                    mid2ul[mid].sources[ssrc];\n\t                            });\n\t\n\t                            return true;\n\t                        }\n\t                    });\n\t                } else {\n\t                    session.media.push(mid2ul[mid]);\n\t                }\n\t            }\n\t        });\n\t    }\n\t\n\t    // After we have constructed the Plan Unified m-lines we can figure out\n\t    // where (in which m-line) to place the 'recvonly SSRCs'.\n\t    // Note: we assume here that we are the answerer in the O/A, so any offers\n\t    // which we translate come from the remote side, while answers are local\n\t    // (and so our last local description is cached as an 'answer').\n\t    [\"audio\", \"video\"].forEach(function (type) {\n\t        if (!session || !session.media || !Array.isArray(session.media))\n\t            return;\n\t\n\t        var idx = null;\n\t        if (Object.keys(recvonlySsrcs[type]).length > 0) {\n\t            idx = self.getFirstSendingIndexFromAnswer(type);\n\t            if (idx === null){\n\t                // If this is the first offer we receive, we don't have a\n\t                // cached answer. Assume that we will be sending media using\n\t                // the first m-line for each media type.\n\t\n\t                for (var i = 0; i < session.media.length; i++) {\n\t                    if (session.media[i].type === type) {\n\t                        idx = i;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t        }\n\t\n\t        if (idx && session.media.length > idx) {\n\t            var mLine = session.media[idx];\n\t            Object.keys(recvonlySsrcs[type]).forEach(function(ssrc) {\n\t                if (mLine.sources && mLine.sources[ssrc]) {\n\t                    console.warn(\"Replacing an existing SSRC.\");\n\t                }\n\t                if (!mLine.sources) {\n\t                    mLine.sources = {};\n\t                }\n\t\n\t                mLine.sources[ssrc] = recvonlySsrcs[type][ssrc];\n\t            });\n\t        }\n\t    });\n\t\n\t    // We regenerate the BUNDLE group (since we regenerated the mids)\n\t    session.groups.some(function(group) {\n\t        if (group.type === 'BUNDLE') {\n\t            group.mids = mids.join(' ');\n\t            return true;\n\t        }\n\t    });\n\t\n\t    // msid semantic\n\t    session.msidSemantic = {\n\t        semantic: 'WMS',\n\t        token: '*'\n\t    };\n\t\n\t    var resStr = transform.write(session);\n\t\n\t    // Cache the transformed SDP (Unified Plan) for later re-use in this\n\t    // function.\n\t    this.cache[desc.type] = resStr;\n\t\n\t    return new RTCSessionDescription({\n\t        type: desc.type,\n\t        sdp: resStr\n\t    });\n\t\n\t    //#endregion\n\t};\n\t\n\t/**\n\t * Maps the direction strings to their binary representation. The binary\n\t * representation of the directions will contain only 2 bits. The least\n\t * significant bit will indicate the receiving direction and the other bit will\n\t * indicate the sending direction.\n\t *\n\t * @type {Map<string, number>}\n\t */\n\tvar directionMasks = {\n\t    'inactive': 0, // 00\n\t    'recvonly': 1, // 01\n\t    'sendonly': 2, // 10\n\t    'sendrecv': 3  // 11\n\t}\n\t\n\t/**\n\t * Parses a number into direction string.\n\t *\n\t * @param {number} direction - The number to be parsed.\n\t * @returns {string} - The parsed direction string.\n\t */\n\tfunction parseDirection(direction) {\n\t    // Filter all other bits except the 2 less significant.\n\t    var directionMask = direction & 3;\n\t\n\t    switch (directionMask) {\n\t    case 0:\n\t        return 'inactive';\n\t    case 1:\n\t        return 'recvonly';\n\t    case 2:\n\t        return 'sendonly';\n\t    case 3:\n\t        return 'sendrecv';\n\t    }\n\t}\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* Copyright @ 2015 Atlassian Pty Ltd\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *     http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software\n\t * distributed under the License is distributed on an \"AS IS\" BASIS,\n\t * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t * See the License for the specific language governing permissions and\n\t * limitations under the License.\n\t */\n\t\n\tvar transform = __webpack_require__(47);\n\t\n\texports.write = function(session, opts) {\n\t\n\t  if (typeof session !== 'undefined' &&\n\t      typeof session.media !== 'undefined' &&\n\t      Array.isArray(session.media)) {\n\t\n\t    session.media.forEach(function (mLine) {\n\t      // expand sources to ssrcs\n\t      if (typeof mLine.sources !== 'undefined' &&\n\t        Object.keys(mLine.sources).length !== 0) {\n\t          mLine.ssrcs = [];\n\t          Object.keys(mLine.sources).forEach(function (ssrc) {\n\t            var source = mLine.sources[ssrc];\n\t            Object.keys(source).forEach(function (attribute) {\n\t              mLine.ssrcs.push({\n\t                id: ssrc,\n\t                attribute: attribute,\n\t                value: source[attribute]\n\t              });\n\t            });\n\t          });\n\t          delete mLine.sources;\n\t        }\n\t\n\t      // join ssrcs in ssrc groups\n\t      if (typeof mLine.ssrcGroups !== 'undefined' &&\n\t        Array.isArray(mLine.ssrcGroups)) {\n\t          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n\t            if (typeof ssrcGroup.ssrcs !== 'undefined' &&\n\t                Array.isArray(ssrcGroup.ssrcs)) {\n\t              ssrcGroup.ssrcs = ssrcGroup.ssrcs.join(' ');\n\t            }\n\t          });\n\t        }\n\t    });\n\t  }\n\t\n\t  // join group mids\n\t  if (typeof session !== 'undefined' &&\n\t      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\t\n\t    session.groups.forEach(function (g) {\n\t      if (typeof g.mids !== 'undefined' && Array.isArray(g.mids)) {\n\t        g.mids = g.mids.join(' ');\n\t      }\n\t    });\n\t  }\n\t\n\t  return transform.write(session, opts);\n\t};\n\t\n\texports.parse = function(sdp) {\n\t  var session = transform.parse(sdp);\n\t\n\t  if (typeof session !== 'undefined' && typeof session.media !== 'undefined' &&\n\t      Array.isArray(session.media)) {\n\t\n\t    session.media.forEach(function (mLine) {\n\t      // group sources attributes by ssrc\n\t      if (typeof mLine.ssrcs !== 'undefined' && Array.isArray(mLine.ssrcs)) {\n\t        mLine.sources = {};\n\t        mLine.ssrcs.forEach(function (ssrc) {\n\t          if (!mLine.sources[ssrc.id])\n\t          mLine.sources[ssrc.id] = {};\n\t        mLine.sources[ssrc.id][ssrc.attribute] = ssrc.value;\n\t        });\n\t\n\t        delete mLine.ssrcs;\n\t      }\n\t\n\t      // split ssrcs in ssrc groups\n\t      if (typeof mLine.ssrcGroups !== 'undefined' &&\n\t        Array.isArray(mLine.ssrcGroups)) {\n\t          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n\t            if (typeof ssrcGroup.ssrcs === 'string') {\n\t              ssrcGroup.ssrcs = ssrcGroup.ssrcs.split(' ');\n\t            }\n\t          });\n\t        }\n\t    });\n\t  }\n\t  // split group mids\n\t  if (typeof session !== 'undefined' &&\n\t      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\t\n\t    session.groups.forEach(function (g) {\n\t      if (typeof g.mids === 'string') {\n\t        g.mids = g.mids.split(' ');\n\t      }\n\t    });\n\t  }\n\t\n\t  return session;\n\t};\n\t\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar parser = __webpack_require__(48);\n\tvar writer = __webpack_require__(50);\n\t\n\texports.write = writer;\n\texports.parse = parser.parse;\n\texports.parseFmtpConfig = parser.parseFmtpConfig;\n\texports.parseParams = parser.parseParams;\n\texports.parsePayloads = parser.parsePayloads;\n\texports.parseRemoteCandidates = parser.parseRemoteCandidates;\n\texports.parseImageAttributes = parser.parseImageAttributes;\n\texports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar toIntIfInt = function (v) {\n\t  return String(Number(v)) === v ? Number(v) : v;\n\t};\n\t\n\tvar attachProperties = function (match, location, names, rawName) {\n\t  if (rawName && !names) {\n\t    location[rawName] = toIntIfInt(match[1]);\n\t  }\n\t  else {\n\t    for (var i = 0; i < names.length; i += 1) {\n\t      if (match[i+1] != null) {\n\t        location[names[i]] = toIntIfInt(match[i+1]);\n\t      }\n\t    }\n\t  }\n\t};\n\t\n\tvar parseReg = function (obj, location, content) {\n\t  var needsBlank = obj.name && obj.names;\n\t  if (obj.push && !location[obj.push]) {\n\t    location[obj.push] = [];\n\t  }\n\t  else if (needsBlank && !location[obj.name]) {\n\t    location[obj.name] = {};\n\t  }\n\t  var keyLocation = obj.push ?\n\t    {} :  // blank object that will be pushed\n\t    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\t\n\t  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\t\n\t  if (obj.push) {\n\t    location[obj.push].push(keyLocation);\n\t  }\n\t};\n\t\n\tvar grammar = __webpack_require__(49);\n\tvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\t\n\texports.parse = function (sdp) {\n\t  var session = {}\n\t    , media = []\n\t    , location = session; // points at where properties go under (one of the above)\n\t\n\t  // parse lines we understand\n\t  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n\t    var type = l[0];\n\t    var content = l.slice(2);\n\t    if (type === 'm') {\n\t      media.push({rtp: [], fmtp: []});\n\t      location = media[media.length-1]; // point at latest media line\n\t    }\n\t\n\t    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n\t      var obj = grammar[type][j];\n\t      if (obj.reg.test(content)) {\n\t        return parseReg(obj, location, content);\n\t      }\n\t    }\n\t  });\n\t\n\t  session.media = media; // link it up\n\t  return session;\n\t};\n\t\n\tvar paramReducer = function (acc, expr) {\n\t  var s = expr.split(/=(.+)/, 2);\n\t  if (s.length === 2) {\n\t    acc[s[0]] = toIntIfInt(s[1]);\n\t  }\n\t  return acc;\n\t};\n\t\n\texports.parseParams = function (str) {\n\t  return str.split(/\\;\\s?/).reduce(paramReducer, {});\n\t};\n\t\n\t// For backward compatibility - alias will be removed in 3.0.0\n\texports.parseFmtpConfig = exports.parseParams;\n\t\n\texports.parsePayloads = function (str) {\n\t  return str.split(' ').map(Number);\n\t};\n\t\n\texports.parseRemoteCandidates = function (str) {\n\t  var candidates = [];\n\t  var parts = str.split(' ').map(toIntIfInt);\n\t  for (var i = 0; i < parts.length; i += 3) {\n\t    candidates.push({\n\t      component: parts[i],\n\t      ip: parts[i + 1],\n\t      port: parts[i + 2]\n\t    });\n\t  }\n\t  return candidates;\n\t};\n\t\n\texports.parseImageAttributes = function (str) {\n\t  return str.split(' ').map(function (item) {\n\t    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n\t  });\n\t};\n\t\n\texports.parseSimulcastStreamList = function (str) {\n\t  return str.split(';').map(function (stream) {\n\t    return stream.split(',').map(function (format) {\n\t      var scid, paused = false;\n\t\n\t      if (format[0] !== '~') {\n\t        scid = toIntIfInt(format);\n\t      } else {\n\t        scid = toIntIfInt(format.substring(1, format.length));\n\t        paused = true;\n\t      }\n\t\n\t      return {\n\t        scid: scid,\n\t        paused: paused\n\t      };\n\t    });\n\t  });\n\t};\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports) {\n\n\tvar grammar = module.exports = {\n\t  v: [{\n\t    name: 'version',\n\t    reg: /^(\\d*)$/\n\t  }],\n\t  o: [{ //o=- 20518 0 IN IP4 203.0.113.1\n\t    // NB: sessionId will be a String in most cases because it is huge\n\t    name: 'origin',\n\t    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n\t    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n\t    format: '%s %s %d %s IP%d %s'\n\t  }],\n\t  // default parsing of these only (though some of these feel outdated)\n\t  s: [{ name: 'name' }],\n\t  i: [{ name: 'description' }],\n\t  u: [{ name: 'uri' }],\n\t  e: [{ name: 'email' }],\n\t  p: [{ name: 'phone' }],\n\t  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly..\n\t  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n\t  //k: [{}], // outdated thing ignored\n\t  t: [{ //t=0 0\n\t    name: 'timing',\n\t    reg: /^(\\d*) (\\d*)/,\n\t    names: ['start', 'stop'],\n\t    format: '%d %d'\n\t  }],\n\t  c: [{ //c=IN IP4 10.47.197.26\n\t    name: 'connection',\n\t    reg: /^IN IP(\\d) (\\S*)/,\n\t    names: ['version', 'ip'],\n\t    format: 'IN IP%d %s'\n\t  }],\n\t  b: [{ //b=AS:4000\n\t    push: 'bandwidth',\n\t    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n\t    names: ['type', 'limit'],\n\t    format: '%s:%s'\n\t  }],\n\t  m: [{ //m=video 51744 RTP/AVP 126 97 98 34 31\n\t    // NB: special - pushes to session\n\t    // TODO: rtp/fmtp should be filtered by the payloads found here?\n\t    reg: /^(\\w*) (\\d*) ([\\w\\/]*)(?: (.*))?/,\n\t    names: ['type', 'port', 'protocol', 'payloads'],\n\t    format: '%s %d %s %s'\n\t  }],\n\t  a: [\n\t    { //a=rtpmap:110 opus/48000/2\n\t      push: 'rtp',\n\t      reg: /^rtpmap:(\\d*) ([\\w\\-\\.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n\t      names: ['payload', 'codec', 'rate', 'encoding'],\n\t      format: function (o) {\n\t        return (o.encoding) ?\n\t          'rtpmap:%d %s/%s/%s':\n\t          o.rate ?\n\t          'rtpmap:%d %s/%s':\n\t          'rtpmap:%d %s';\n\t      }\n\t    },\n\t    { //a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n\t      //a=fmtp:111 minptime=10; useinbandfec=1\n\t      push: 'fmtp',\n\t      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n\t      names: ['payload', 'config'],\n\t      format: 'fmtp:%d %s'\n\t    },\n\t    { //a=control:streamid=0\n\t      name: 'control',\n\t      reg: /^control:(.*)/,\n\t      format: 'control:%s'\n\t    },\n\t    { //a=rtcp:65179 IN IP4 193.84.77.194\n\t      name: 'rtcp',\n\t      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n\t      names: ['port', 'netType', 'ipVer', 'address'],\n\t      format: function (o) {\n\t        return (o.address != null) ?\n\t          'rtcp:%d %s IP%d %s':\n\t          'rtcp:%d';\n\t      }\n\t    },\n\t    { //a=rtcp-fb:98 trr-int 100\n\t      push: 'rtcpFbTrrInt',\n\t      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n\t      names: ['payload', 'value'],\n\t      format: 'rtcp-fb:%d trr-int %d'\n\t    },\n\t    { //a=rtcp-fb:98 nack rpsi\n\t      push: 'rtcpFb',\n\t      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n\t      names: ['payload', 'type', 'subtype'],\n\t      format: function (o) {\n\t        return (o.subtype != null) ?\n\t          'rtcp-fb:%s %s %s':\n\t          'rtcp-fb:%s %s';\n\t      }\n\t    },\n\t    { //a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n\t      //a=extmap:1/recvonly URI-gps-string\n\t      push: 'ext',\n\t      reg: /^extmap:(\\d+)(?:\\/(\\w+))? (\\S*)(?: (\\S*))?/,\n\t      names: ['value', 'direction', 'uri', 'config'],\n\t      format: function (o) {\n\t        return 'extmap:%d' + (o.direction ? '/%s' : '%v') + ' %s' + (o.config ? ' %s' : '');\n\t      }\n\t    },\n\t    { //a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n\t      push: 'crypto',\n\t      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n\t      names: ['id', 'suite', 'config', 'sessionConfig'],\n\t      format: function (o) {\n\t        return (o.sessionConfig != null) ?\n\t          'crypto:%d %s %s %s':\n\t          'crypto:%d %s %s';\n\t      }\n\t    },\n\t    { //a=setup:actpass\n\t      name: 'setup',\n\t      reg: /^setup:(\\w*)/,\n\t      format: 'setup:%s'\n\t    },\n\t    { //a=mid:1\n\t      name: 'mid',\n\t      reg: /^mid:([^\\s]*)/,\n\t      format: 'mid:%s'\n\t    },\n\t    { //a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n\t      name: 'msid',\n\t      reg: /^msid:(.*)/,\n\t      format: 'msid:%s'\n\t    },\n\t    { //a=ptime:20\n\t      name: 'ptime',\n\t      reg: /^ptime:(\\d*)/,\n\t      format: 'ptime:%d'\n\t    },\n\t    { //a=maxptime:60\n\t      name: 'maxptime',\n\t      reg: /^maxptime:(\\d*)/,\n\t      format: 'maxptime:%d'\n\t    },\n\t    { //a=sendrecv\n\t      name: 'direction',\n\t      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n\t    },\n\t    { //a=ice-lite\n\t      name: 'icelite',\n\t      reg: /^(ice-lite)/\n\t    },\n\t    { //a=ice-ufrag:F7gI\n\t      name: 'iceUfrag',\n\t      reg: /^ice-ufrag:(\\S*)/,\n\t      format: 'ice-ufrag:%s'\n\t    },\n\t    { //a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n\t      name: 'icePwd',\n\t      reg: /^ice-pwd:(\\S*)/,\n\t      format: 'ice-pwd:%s'\n\t    },\n\t    { //a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n\t      name: 'fingerprint',\n\t      reg: /^fingerprint:(\\S*) (\\S*)/,\n\t      names: ['type', 'hash'],\n\t      format: 'fingerprint:%s %s'\n\t    },\n\t    { //a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n\t      //a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n\t      //a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n\t      //a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n\t      //a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n\t      push:'candidates',\n\t      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n\t      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n\t      format: function (o) {\n\t        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\t\n\t        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\t\n\t        // NB: candidate has three optional chunks, so %void middles one if it's missing\n\t        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\t\n\t        if (o.generation != null) {\n\t          str += ' generation %d';\n\t        }\n\t\n\t        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n\t        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n\t        return str;\n\t      }\n\t    },\n\t    { //a=end-of-candidates (keep after the candidates line for readability)\n\t      name: 'endOfCandidates',\n\t      reg: /^(end-of-candidates)/\n\t    },\n\t    { //a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n\t      name: 'remoteCandidates',\n\t      reg: /^remote-candidates:(.*)/,\n\t      format: 'remote-candidates:%s'\n\t    },\n\t    { //a=ice-options:google-ice\n\t      name: 'iceOptions',\n\t      reg: /^ice-options:(\\S*)/,\n\t      format: 'ice-options:%s'\n\t    },\n\t    { //a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n\t      push: 'ssrcs',\n\t      reg: /^ssrc:(\\d*) ([\\w_]*)(?::(.*))?/,\n\t      names: ['id', 'attribute', 'value'],\n\t      format: function (o) {\n\t        var str = 'ssrc:%d';\n\t        if (o.attribute != null) {\n\t          str += ' %s';\n\t          if (o.value != null) {\n\t            str += ':%s';\n\t          }\n\t        }\n\t        return str;\n\t      }\n\t    },\n\t    { //a=ssrc-group:FEC 1 2\n\t      //a=ssrc-group:FEC-FR 3004364195 1080772241\n\t      push: 'ssrcGroups',\n\t      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n\t      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n\t      names: ['semantics', 'ssrcs'],\n\t      format: 'ssrc-group:%s %s'\n\t    },\n\t    { //a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n\t      name: 'msidSemantic',\n\t      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n\t      names: ['semantic', 'token'],\n\t      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n\t    },\n\t    { //a=group:BUNDLE audio video\n\t      push: 'groups',\n\t      reg: /^group:(\\w*) (.*)/,\n\t      names: ['type', 'mids'],\n\t      format: 'group:%s %s'\n\t    },\n\t    { //a=rtcp-mux\n\t      name: 'rtcpMux',\n\t      reg: /^(rtcp-mux)/\n\t    },\n\t    { //a=rtcp-rsize\n\t      name: 'rtcpRsize',\n\t      reg: /^(rtcp-rsize)/\n\t    },\n\t    { //a=sctpmap:5000 webrtc-datachannel 1024\n\t      name: 'sctpmap',\n\t      reg: /^sctpmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,\n\t      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n\t      format: function (o) {\n\t        return (o.maxMessageSize != null) ?\n\t          'sctpmap:%s %s %s' :\n\t          'sctpmap:%s %s';\n\t      }\n\t    },\n\t    { //a=x-google-flag:conference\n\t      name: 'xGoogleFlag',\n\t      reg: /^x-google-flag:([^\\s]*)/,\n\t      format: 'x-google-flag:%s'\n\t    },\n\t    { //a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n\t      push: 'rids',\n\t      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n\t      names: ['id', 'direction', 'params'],\n\t      format: function (o) {\n\t        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n\t      }\n\t    },\n\t    { //a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n\t      //a=imageattr:* send [x=800,y=640] recv *\n\t      //a=imageattr:100 recv [x=320,y=240]\n\t      push: 'imageattrs',\n\t      reg: new RegExp(\n\t        //a=imageattr:97\n\t        '^imageattr:(\\\\d+|\\\\*)' +\n\t        //send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n\t        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n\t        //recv [x=330,y=250]\n\t        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n\t      ),\n\t      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n\t      format: function (o) {\n\t        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n\t      }\n\t    },\n\t    { //a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n\t      //a=simulcast:recv 1;4,5 send 6;7\n\t      name: 'simulcast',\n\t      reg: new RegExp(\n\t        //a=simulcast:\n\t        '^simulcast:' +\n\t        //send 1,2,3;~4,~5\n\t        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n\t        //space + recv 6;~7,~8\n\t        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n\t        //end\n\t        '$'\n\t      ),\n\t      names: ['dir1', 'list1', 'dir2', 'list2'],\n\t      format: function (o) {\n\t        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n\t      }\n\t    },\n\t    { //Old simulcast draft 03 (implemented by Firefox)\n\t      //  https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n\t      //a=simulcast: recv pt=97;98 send pt=97\n\t      //a=simulcast: send rid=5;6;7 paused=6,7\n\t      name: 'simulcast_03',\n\t      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n\t      names: ['value'],\n\t      format: 'simulcast: %s'\n\t    },\n\t    {\n\t      //a=framerate:25\n\t      //a=framerate:29.97\n\t      name: 'framerate',\n\t      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n\t      format: 'framerate:%s'\n\t    },\n\t    { // any a= that we don't understand is kepts verbatim on media.invalid\n\t      push: 'invalid',\n\t      names: ['value']\n\t    }\n\t  ]\n\t};\n\t\n\t// set sensible defaults to avoid polluting the grammar with boring details\n\tObject.keys(grammar).forEach(function (key) {\n\t  var objs = grammar[key];\n\t  objs.forEach(function (obj) {\n\t    if (!obj.reg) {\n\t      obj.reg = /(.*)/;\n\t    }\n\t    if (!obj.format) {\n\t      obj.format = '%s';\n\t    }\n\t  });\n\t});\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar grammar = __webpack_require__(49);\n\t\n\t// customized util.format - discards excess arguments and can void middle ones\n\tvar formatRegExp = /%[sdv%]/g;\n\tvar format = function (formatStr) {\n\t  var i = 1;\n\t  var args = arguments;\n\t  var len = args.length;\n\t  return formatStr.replace(formatRegExp, function (x) {\n\t    if (i >= len) {\n\t      return x; // missing argument\n\t    }\n\t    var arg = args[i];\n\t    i += 1;\n\t    switch (x) {\n\t    case '%%':\n\t      return '%';\n\t    case '%s':\n\t      return String(arg);\n\t    case '%d':\n\t      return Number(arg);\n\t    case '%v':\n\t      return '';\n\t    }\n\t  });\n\t  // NB: we discard excess arguments - they are typically undefined from makeLine\n\t};\n\t\n\tvar makeLine = function (type, obj, location) {\n\t  var str = obj.format instanceof Function ?\n\t    (obj.format(obj.push ? location : location[obj.name])) :\n\t    obj.format;\n\t\n\t  var args = [type + '=' + str];\n\t  if (obj.names) {\n\t    for (var i = 0; i < obj.names.length; i += 1) {\n\t      var n = obj.names[i];\n\t      if (obj.name) {\n\t        args.push(location[obj.name][n]);\n\t      }\n\t      else { // for mLine and push attributes\n\t        args.push(location[obj.names[i]]);\n\t      }\n\t    }\n\t  }\n\t  else {\n\t    args.push(location[obj.name]);\n\t  }\n\t  return format.apply(null, args);\n\t};\n\t\n\t// RFC specified order\n\t// TODO: extend this with all the rest\n\tvar defaultOuterOrder = [\n\t  'v', 'o', 's', 'i',\n\t  'u', 'e', 'p', 'c',\n\t  'b', 't', 'r', 'z', 'a'\n\t];\n\tvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\t\n\t\n\tmodule.exports = function (session, opts) {\n\t  opts = opts || {};\n\t  // ensure certain properties exist\n\t  if (session.version == null) {\n\t    session.version = 0; // 'v=0' must be there (only defined version atm)\n\t  }\n\t  if (session.name == null) {\n\t    session.name = ' '; // 's= ' must be there if no meaningful name set\n\t  }\n\t  session.media.forEach(function (mLine) {\n\t    if (mLine.payloads == null) {\n\t      mLine.payloads = '';\n\t    }\n\t  });\n\t\n\t  var outerOrder = opts.outerOrder || defaultOuterOrder;\n\t  var innerOrder = opts.innerOrder || defaultInnerOrder;\n\t  var sdp = [];\n\t\n\t  // loop through outerOrder for matching properties on session\n\t  outerOrder.forEach(function (type) {\n\t    grammar[type].forEach(function (obj) {\n\t      if (obj.name in session && session[obj.name] != null) {\n\t        sdp.push(makeLine(type, obj, session));\n\t      }\n\t      else if (obj.push in session && session[obj.push] != null) {\n\t        session[obj.push].forEach(function (el) {\n\t          sdp.push(makeLine(type, obj, el));\n\t        });\n\t      }\n\t    });\n\t  });\n\t\n\t  // then for each media line, follow the innerOrder\n\t  session.media.forEach(function (mLine) {\n\t    sdp.push(makeLine('m', grammar.m[0], mLine));\n\t\n\t    innerOrder.forEach(function (type) {\n\t      grammar[type].forEach(function (obj) {\n\t        if (obj.name in mLine && mLine[obj.name] != null) {\n\t          sdp.push(makeLine(type, obj, mLine));\n\t        }\n\t        else if (obj.push in mLine && mLine[obj.push] != null) {\n\t          mLine[obj.push].forEach(function (el) {\n\t            sdp.push(makeLine(type, obj, el));\n\t          });\n\t        }\n\t      });\n\t    });\n\t  });\n\t\n\t  return sdp.join('\\r\\n') + '\\r\\n';\n\t};\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports) {\n\n\t/* Copyright @ 2015 Atlassian Pty Ltd\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\");\n\t * you may not use this file except in compliance with the License.\n\t * You may obtain a copy of the License at\n\t *\n\t *     http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software\n\t * distributed under the License is distributed on an \"AS IS\" BASIS,\n\t * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t * See the License for the specific language governing permissions and\n\t * limitations under the License.\n\t */\n\t\n\tmodule.exports = function arrayEquals(array) {\n\t    // if the other array is a falsy value, return\n\t    if (!array)\n\t        return false;\n\t\n\t    // compare lengths - can save a lot of time\n\t    if (this.length != array.length)\n\t        return false;\n\t\n\t    for (var i = 0, l = this.length; i < l; i++) {\n\t        // Check if we have nested arrays\n\t        if (this[i] instanceof Array && array[i] instanceof Array) {\n\t            // recurse into the nested arrays\n\t            if (!arrayEquals.apply(this[i], [array[i]]))\n\t                return false;\n\t        } else if (this[i] != array[i]) {\n\t            // Warning - two different object instances will never be equal:\n\t            // {x:20} != {x:20}\n\t            return false;\n\t        }\n\t    }\n\t    return true;\n\t};\n\t\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\r\n\t\tCopyright 2015 Axinom\r\n\t\tCopyright 2011-2013 Abdulla Abdurakhmanov\r\n\t\tOriginal sources are available at https://code.google.com/p/x2js/\r\n\t\r\n\t\tLicensed under the Apache License, Version 2.0 (the \"License\");\r\n\t\tyou may not use this file except in compliance with the License.\r\n\t\tYou may obtain a copy of the License at\r\n\t\r\n\t\thttp://www.apache.org/licenses/LICENSE-2.0\r\n\t\r\n\t\tUnless required by applicable law or agreed to in writing, software\r\n\t\tdistributed under the License is distributed on an \"AS IS\" BASIS,\r\n\t\tWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n\t\tSee the License for the specific language governing permissions and\r\n\t\tlimitations under the License.\r\n\t*/\r\n\t\r\n\t/*\r\n\t\tSupported export methods:\r\n\t\t* AMD\r\n\t\t* <script> (window.X2JS)\r\n\t\t* Node.js\r\n\t\r\n\t\tLimitations:\r\n\t\t* Attribute namespace prefixes are not parsed as such.\r\n\t\t* Overall the serialization/deserializaton code is \"best effort\" and not foolproof.\r\n\t*/\r\n\t\r\n\t// Module definition pattern used is returnExports from https://github.com/umdjs/umd\r\n\t(function (root, factory) {\r\n\t\t\"use strict\";\r\n\t\r\n\t\t/* global define */\r\n\t\tif (true) {\r\n\t\t\t// AMD. Register as an anonymous module.\r\n\t\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t\t} else if (typeof module === 'object' && module.exports) {\r\n\t\t\t// Node. Does not work with strict CommonJS, but only CommonJS-like\r\n\t\t\t// environments that support module.exports, like Node.\r\n\t\t\tmodule.exports = factory(require(\"xmldom\").DOMParser);\r\n\t\t} else {\r\n\t\t\t// Browser globals (root is window)\r\n\t\t\troot.X2JS = factory();\r\n\t\t}\r\n\t})(this, function (CustomDOMParser) {\r\n\t\t\"use strict\";\r\n\t\r\n\t\t// We return a constructor that can be used to make X2JS instances.\r\n\t\treturn function X2JS(config) {\r\n\t\t\tvar VERSION = \"3.1.1\";\r\n\t\r\n\t\t\tconfig = config || {};\r\n\t\r\n\t\t\tfunction initConfigDefaults() {\r\n\t\t\t\t// If set to \"property\" then <element>_asArray will be created\r\n\t\t\t\t// to allow you to access any element as an array (even if there is only one of it).\r\n\t\t\t\tconfig.arrayAccessForm = config.arrayAccessForm || \"none\";\r\n\t\r\n\t\t\t\t// If \"text\" then <empty></empty> will be transformed to \"\".\r\n\t\t\t\t// If \"object\" then <empty></empty> will be transformed to {}.\r\n\t\t\t\tconfig.emptyNodeForm = config.emptyNodeForm || \"text\";\r\n\t\r\n\t\t\t\t// Function that will be called for each elements, if the function returns true, the element will be skipped\r\n\t\t\t\t// function(name, value) { return true; };\r\n\t\t\t\tconfig.jsAttributeFilter = config.jsAttributeFilter;\r\n\t\r\n\t\t\t\t// Function that will be called for each elements, the element value will be replaced by the returned value\r\n\t\t\t\t// function(name, value) { return parseFloat(value); };\r\n\t\t\t\tconfig.jsAttributeConverter = config.jsAttributeConverter;\r\n\t\r\n\t\t\t\t// Allows attribute values to be converted on the fly during parsing to objects.\r\n\t\t\t\t// \t\"test\": function(name, value) { return true; }\r\n\t\t\t\t//\t\"convert\": function(name, value) { return parseFloat(value); };\r\n\t\t\t\t// convert() will be called for every attribute where test() returns true\r\n\t\t\t\t// and the return value from convert() will replace the original value of the attribute.\r\n\t\t\t\tconfig.attributeConverters = config.attributeConverters || [];\r\n\t\r\n\t\t\t\t// Any elements that match the paths here will have their text parsed\r\n\t\t\t\t// as an XML datetime value (2011-11-12T13:00:00-07:00 style).\r\n\t\t\t\t// The path can be a plain string (parent.child1.child2),\r\n\t\t\t\t// a regex (/.*\\.child2/) or function(elementPath).\r\n\t\t\t\tconfig.datetimeAccessFormPaths = config.datetimeAccessFormPaths || [];\r\n\t\r\n\t\t\t\t// Any elements that match the paths listed here will be stored in JavaScript objects\r\n\t\t\t\t// as arrays even if there is only one of them. The path can be a plain string\r\n\t\t\t\t// (parent.child1.child2), a regex (/.*\\.child2/) or function(elementName, elementPath).\r\n\t\t\t\tconfig.arrayAccessFormPaths = config.arrayAccessFormPaths || [];\r\n\t\r\n\t\t\t\t// If true, a toString function is generated to print nodes containing text or cdata.\r\n\t\t\t\t// Useful if you want to accept both plain text and CData as equivalent inputs.\r\n\t\t\t\tif (config.enableToStringFunc === undefined) {\r\n\t\t\t\t\tconfig.enableToStringFunc = true;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// If true, empty text tags are ignored for elements with child nodes.\r\n\t\t\t\tif (config.skipEmptyTextNodesForObj === undefined) {\r\n\t\t\t\t\tconfig.skipEmptyTextNodesForObj = true;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// If true, whitespace is trimmed from text nodes.\r\n\t\t\t\tif (config.stripWhitespaces === undefined) {\r\n\t\t\t\t\tconfig.stripWhitespaces = true;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// If true, double quotes are used in generated XML.\r\n\t\t\t\tif (config.useDoubleQuotes === undefined) {\r\n\t\t\t\t\tconfig.useDoubleQuotes = true;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// If true, the root element of the XML document is ignored when converting to objects.\r\n\t\t\t\t// The result will directly have the root element's children as its own properties.\r\n\t\t\t\tif (config.ignoreRoot === undefined) {\r\n\t\t\t\t\tconfig.ignoreRoot = false;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Whether XML characters in text are escaped when reading/writing XML.\r\n\t\t\t\tif (config.escapeMode === undefined) {\r\n\t\t\t\t\tconfig.escapeMode = true;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Prefix to use for properties that are created to represent XML attributes.\r\n\t\t\t\tif (config.attributePrefix === undefined) {\r\n\t\t\t\t\tconfig.attributePrefix = \"_\";\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// If true, empty elements will created as self closing elements (<element />)\r\n\t\t\t\t// If false, empty elements will be created with start and end tags (<element></element>)\r\n\t\t\t\tif (config.selfClosingElements === undefined) {\r\n\t\t\t\t\tconfig.selfClosingElements = true;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// If this property defined as false and an XML element has CData node ONLY, it will be converted to text without additional property \"__cdata\"\r\n\t\t\t\tif (config.keepCData === undefined) {\r\n\t\t\t\t\tconfig.keepCData = false;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// If true, will output dates in UTC\r\n\t\t\t\tif (config.jsDateUTC === undefined) {\r\n\t\t\t\t\tconfig.jsDateUTC = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction initRequiredPolyfills() {\r\n\t\t\t\tfunction pad(number) {\r\n\t\t\t\t\tvar r = String(number);\r\n\t\t\t\t\tif (r.length === 1) {\r\n\t\t\t\t\t\tr = '0' + r;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn r;\r\n\t\t\t\t}\r\n\t\t\t\t// Hello IE8-\r\n\t\t\t\tif (typeof String.prototype.trim !== 'function') {\r\n\t\t\t\t\tString.prototype.trim = function trim() {\r\n\t\t\t\t\t\treturn this.replace(/^\\s+|^\\n+|(\\s|\\n)+$/g, '');\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof Date.prototype.toISOString !== 'function') {\r\n\t\t\t\t\t// Implementation from http://stackoverflow.com/questions/2573521/how-do-i-output-an-iso-8601-formatted-string-in-javascript\r\n\t\t\t\t\tDate.prototype.toISOString = function toISOString() {\r\n\t\t\t\t\t\tvar MS_IN_S = 1000;\r\n\t\r\n\t\t\t\t\t\treturn this.getUTCFullYear()\r\n\t\t\t\t\t\t\t+ '-' + pad(this.getUTCMonth() + 1)\r\n\t\t\t\t\t\t\t+ '-' + pad(this.getUTCDate())\r\n\t\t\t\t\t\t\t+ 'T' + pad(this.getUTCHours())\r\n\t\t\t\t\t\t\t+ ':' + pad(this.getUTCMinutes())\r\n\t\t\t\t\t\t\t+ ':' + pad(this.getUTCSeconds())\r\n\t\t\t\t\t\t\t+ '.' + String((this.getUTCMilliseconds() / MS_IN_S).toFixed(3)).slice(2, 5)\r\n\t\t\t\t\t\t\t+ 'Z';\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tinitConfigDefaults();\r\n\t\t\tinitRequiredPolyfills();\r\n\t\r\n\t\t\tvar DOMNodeTypes = {\r\n\t\t\t\t\"ELEMENT_NODE\": 1,\r\n\t\t\t\t\"TEXT_NODE\": 3,\r\n\t\t\t\t\"CDATA_SECTION_NODE\": 4,\r\n\t\t\t\t\"COMMENT_NODE\": 8,\r\n\t\t\t\t\"DOCUMENT_NODE\": 9\r\n\t\t\t};\r\n\t\r\n\t\t\tfunction getDomNodeLocalName(domNode) {\r\n\t\t\t\tvar localName = domNode.localName;\r\n\t\t\t\tif (localName == null) {\r\n\t\t\t\t\t// Yeah, this is IE!!\r\n\t\t\t\t\tlocalName = domNode.baseName;\r\n\t\t\t\t}\r\n\t\t\t\tif (localName == null || localName === \"\") {\r\n\t\t\t\t\t// ===\"\" is IE too\r\n\t\t\t\t\tlocalName = domNode.nodeName;\r\n\t\t\t\t}\r\n\t\t\t\treturn localName;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction getDomNodeNamespacePrefix(node) {\r\n\t\t\t\treturn node.prefix;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction escapeXmlChars(str) {\r\n\t\t\t\tif (typeof str === \"string\")\r\n\t\t\t\t\treturn str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#x27;');\r\n\t\t\t\telse\r\n\t\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction unescapeXmlChars(str) {\r\n\t\t\t\treturn str.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"').replace(/&#x27;/g, \"'\").replace(/&amp;/g, '&');\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction ensureProperArrayAccessForm(element, childName, elementPath) {\r\n\t\t\t\tswitch (config.arrayAccessForm) {\r\n\t\t\t\t\tcase \"property\":\r\n\t\t\t\t\t\tif (!(element[childName] instanceof Array))\r\n\t\t\t\t\t\t\telement[childName + \"_asArray\"] = [element[childName]];\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\telement[childName + \"_asArray\"] = element[childName];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (!(element[childName] instanceof Array) && config.arrayAccessFormPaths.length > 0) {\r\n\t\t\t\t\tvar match = false;\r\n\t\r\n\t\t\t\t\tfor (var i = 0; i < config.arrayAccessFormPaths.length; i++) {\r\n\t\t\t\t\t\tvar arrayPath = config.arrayAccessFormPaths[i];\r\n\t\t\t\t\t\tif (typeof arrayPath === \"string\") {\r\n\t\t\t\t\t\t\tif (arrayPath === elementPath) {\r\n\t\t\t\t\t\t\t\tmatch = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (arrayPath instanceof RegExp) {\r\n\t\t\t\t\t\t\tif (arrayPath.test(elementPath)) {\r\n\t\t\t\t\t\t\t\tmatch = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (typeof arrayPath === \"function\") {\r\n\t\t\t\t\t\t\tif (arrayPath(childName, elementPath)) {\r\n\t\t\t\t\t\t\t\tmatch = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif (match)\r\n\t\t\t\t\t\telement[childName] = [element[childName]];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction xmlDateTimeToDate(prop) {\r\n\t\t\t\t// Implementation based up on http://stackoverflow.com/questions/8178598/xml-datetime-to-javascript-date-object\r\n\t\t\t\t// Improved to support full spec and optional parts\r\n\t\t\t\tvar MINUTES_PER_HOUR = 60;\r\n\t\r\n\t\t\t\tvar bits = prop.split(/[-T:+Z]/g);\r\n\t\r\n\t\t\t\tvar d = new Date(bits[0], bits[1] - 1, bits[2]);\r\n\t\t\t\tvar secondBits = bits[5].split(\"\\.\");\r\n\t\t\t\td.setHours(bits[3], bits[4], secondBits[0]);\r\n\t\t\t\tif (secondBits.length > 1)\r\n\t\t\t\t\td.setMilliseconds(secondBits[1]);\r\n\t\r\n\t\t\t\t// Get supplied time zone offset in minutes\r\n\t\t\t\tif (bits[6] && bits[7]) {\r\n\t\t\t\t\tvar offsetMinutes = bits[6] * MINUTES_PER_HOUR + Number(bits[7]);\r\n\t\t\t\t\tvar sign = /\\d\\d-\\d\\d:\\d\\d$/.test(prop) ? '-' : '+';\r\n\t\r\n\t\t\t\t\t// Apply the sign\r\n\t\t\t\t\toffsetMinutes = 0 + (sign === '-' ? -1 * offsetMinutes : offsetMinutes);\r\n\t\r\n\t\t\t\t\t// Apply offset and local timezone\r\n\t\t\t\t\td.setMinutes(d.getMinutes() - offsetMinutes - d.getTimezoneOffset());\r\n\t\t\t\t} else if (prop.indexOf(\"Z\", prop.length - 1) !== -1) {\r\n\t\t\t\t\td = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds()));\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// d is now a local time equivalent to the supplied time\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction convertToDateIfRequired(value, childName, fullPath) {\r\n\t\t\t\tif (config.datetimeAccessFormPaths.length > 0) {\r\n\t\t\t\t\tvar pathWithoutTextNode = fullPath.split(\"\\.#\")[0];\r\n\t\r\n\t\t\t\t\tfor (var i = 0; i < config.datetimeAccessFormPaths.length; i++) {\r\n\t\t\t\t\t\tvar candidatePath = config.datetimeAccessFormPaths[i];\r\n\t\t\t\t\t\tif (typeof candidatePath === \"string\") {\r\n\t\t\t\t\t\t\tif (candidatePath === pathWithoutTextNode)\r\n\t\t\t\t\t\t\t\treturn xmlDateTimeToDate(value);\r\n\t\t\t\t\t\t} else if (candidatePath instanceof RegExp) {\r\n\t\t\t\t\t\t\tif (candidatePath.test(pathWithoutTextNode))\r\n\t\t\t\t\t\t\t\treturn xmlDateTimeToDate(value);\r\n\t\t\t\t\t\t} else if (typeof candidatePath === \"function\") {\r\n\t\t\t\t\t\t\tif (candidatePath(pathWithoutTextNode))\r\n\t\t\t\t\t\t\t\treturn xmlDateTimeToDate(value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction deserializeRootElementChildren(rootElement) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tvar children = rootElement.childNodes;\r\n\t\r\n\t\t\t\t// Alternative for firstElementChild which is not supported in some environments\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\tvar child = children.item(i);\r\n\t\t\t\t\tif (child.nodeType === DOMNodeTypes.ELEMENT_NODE) {\r\n\t\t\t\t\t\tvar childName = getDomNodeLocalName(child);\r\n\t\r\n\t\t\t\t\t\tif (config.ignoreRoot)\r\n\t\t\t\t\t\t\tresult = deserializeDomChildren(child, childName);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tresult[childName] = deserializeDomChildren(child, childName);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction deserializeElementChildren(element, elementPath) {\r\n\t\t\t\tvar result = {};\r\n\t\t\t\tresult.__cnt = 0;\r\n\t\r\n\t\t\t\tvar nodeChildren = element.childNodes;\r\n\t\r\n\t\t\t\t// Child nodes.\r\n\t\t\t\tfor (var iChild = 0; iChild < nodeChildren.length; iChild++) {\r\n\t\t\t\t\tvar child = nodeChildren.item(iChild);\r\n\t\t\t\t\tvar childName = getDomNodeLocalName(child);\r\n\t\r\n\t\t\t\t\tif (child.nodeType === DOMNodeTypes.COMMENT_NODE)\r\n\t\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t\tresult.__cnt++;\r\n\t\r\n\t\t\t\t\t// We deliberately do not accept everything falsey here because\r\n\t\t\t\t\t// elements that resolve to empty string should still be preserved.\r\n\t\t\t\t\tif (result[childName] == null) {\r\n\t\t\t\t\t\tresult[childName] = deserializeDomChildren(child, elementPath + \".\" + childName);\r\n\t\t\t\t\t\tensureProperArrayAccessForm(result, childName, elementPath + \".\" + childName);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (!(result[childName] instanceof Array)) {\r\n\t\t\t\t\t\t\tresult[childName] = [result[childName]];\r\n\t\t\t\t\t\t\tensureProperArrayAccessForm(result, childName, elementPath + \".\" + childName);\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tresult[childName][result[childName].length] = deserializeDomChildren(child, elementPath + \".\" + childName);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Attributes\r\n\t\t\t\tfor (var iAttribute = 0; iAttribute < element.attributes.length; iAttribute++) {\r\n\t\t\t\t\tvar attribute = element.attributes.item(iAttribute);\r\n\t\t\t\t\tresult.__cnt++;\r\n\t\r\n\t\t\t\t\tvar adjustedValue = attribute.value;\r\n\t\t\t\t\tfor (var iConverter = 0; iConverter < config.attributeConverters.length; iConverter++) {\r\n\t\t\t\t\t\tvar converter = config.attributeConverters[iConverter];\r\n\t\t\t\t\t\tif (converter.test.call(null, attribute.name, attribute.value))\r\n\t\t\t\t\t\t\tadjustedValue = converter.convert.call(null, attribute.name, attribute.value);\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tresult[config.attributePrefix + attribute.name] = adjustedValue;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Node namespace prefix\r\n\t\t\t\tvar namespacePrefix = getDomNodeNamespacePrefix(element);\r\n\t\t\t\tif (namespacePrefix) {\r\n\t\t\t\t\tresult.__cnt++;\r\n\t\t\t\t\tresult.__prefix = namespacePrefix;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (result[\"#text\"]) {\r\n\t\t\t\t\tresult.__text = result[\"#text\"];\r\n\t\r\n\t\t\t\t\tif (result.__text instanceof Array) {\r\n\t\t\t\t\t\tresult.__text = result.__text.join(\"\\n\");\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif (config.escapeMode)\r\n\t\t\t\t\t\tresult.__text = unescapeXmlChars(result.__text);\r\n\t\r\n\t\t\t\t\tif (config.stripWhitespaces)\r\n\t\t\t\t\t\tresult.__text = result.__text.trim();\r\n\t\r\n\t\t\t\t\tdelete result[\"#text\"];\r\n\t\r\n\t\t\t\t\tif (config.arrayAccessForm === \"property\")\r\n\t\t\t\t\t\tdelete result[\"#text_asArray\"];\r\n\t\r\n\t\t\t\t\tresult.__text = convertToDateIfRequired(result.__text, \"#text\", elementPath + \".#text\");\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (result.hasOwnProperty('#cdata-section')) {\r\n\t\t\t\t\tresult.__cdata = result[\"#cdata-section\"];\r\n\t\t\t\t\tdelete result[\"#cdata-section\"];\r\n\t\r\n\t\t\t\t\tif (config.arrayAccessForm === \"property\")\r\n\t\t\t\t\t\tdelete result[\"#cdata-section_asArray\"];\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (result.__cnt === 1 && result.__text) {\r\n\t\t\t\t\tresult = result.__text;\r\n\t\t\t\t} else if (result.__cnt === 0 && config.emptyNodeForm === \"text\") {\r\n\t\t\t\t\tresult = '';\r\n\t\t\t\t} else if (result.__cnt > 1 && result.__text !== undefined && config.skipEmptyTextNodesForObj) {\r\n\t\t\t\t\tif (config.stripWhitespaces && result.__text === \"\" || result.__text.trim() === \"\") {\r\n\t\t\t\t\t\tdelete result.__text;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdelete result.__cnt;\r\n\t\r\n\t\t\t\t/**\r\n\t\t\t\t * We are checking if we are creating a __cdata property or if we just add the content of cdata inside result.\r\n\t\t\t\t * But, if we have a property inside xml tag (<tag PROPERTY=\"1\"></tag>), and a cdata inside, we can't ignore it.\r\n\t\t\t\t * In this case we are keeping __cdata property.\r\n\t\t\t\t */\r\n\t\t\t\tif (!config.keepCData && (!result.hasOwnProperty('__text') && result.hasOwnProperty('__cdata') && Object.keys(result).length === 1)) {\r\n\t\t\t\t\treturn (result.__cdata ? result.__cdata : '');\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (config.enableToStringFunc && (result.__text || result.__cdata)) {\r\n\t\t\t\t\tresult.toString = function toString() {\r\n\t\t\t\t\t\treturn (this.__text ? this.__text : '') + (this.__cdata ? this.__cdata : '');\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction deserializeDomChildren(node, parentPath) {\r\n\t\t\t\tif (node.nodeType === DOMNodeTypes.DOCUMENT_NODE) {\r\n\t\t\t\t\treturn deserializeRootElementChildren(node);\r\n\t\t\t\t} else if (node.nodeType === DOMNodeTypes.ELEMENT_NODE) {\r\n\t\t\t\t\treturn deserializeElementChildren(node, parentPath);\r\n\t\t\t\t} else if (node.nodeType === DOMNodeTypes.TEXT_NODE || node.nodeType === DOMNodeTypes.CDATA_SECTION_NODE) {\r\n\t\t\t\t\treturn node.nodeValue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction serializeStartTag(jsObject, elementName, attributeNames, selfClosing) {\r\n\t\t\t\tvar resultStr = \"<\" + ((jsObject && jsObject.__prefix) ? (jsObject.__prefix + \":\") : \"\") + elementName;\r\n\t\r\n\t\t\t\tif (attributeNames) {\r\n\t\t\t\t\tfor (var i = 0; i < attributeNames.length; i++) {\r\n\t\t\t\t\t\tvar attributeName = attributeNames[i];\r\n\t\t\t\t\t\tvar attributeValue = jsObject[attributeName];\r\n\t\r\n\t\t\t\t\t\tif (config.escapeMode)\r\n\t\t\t\t\t\t\tattributeValue = escapeXmlChars(attributeValue);\r\n\t\r\n\t\t\t\t\t\tresultStr += \" \" + attributeName.substr(config.attributePrefix.length) + \"=\";\r\n\t\r\n\t\t\t\t\t\tif (config.useDoubleQuotes)\r\n\t\t\t\t\t\t\tresultStr += '\"' + attributeValue + '\"';\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tresultStr += \"'\" + attributeValue + \"'\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (!selfClosing)\r\n\t\t\t\t\tresultStr += \">\";\r\n\t\t\t\telse\r\n\t\t\t\t\tresultStr += \" />\";\r\n\t\r\n\t\t\t\treturn resultStr;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction serializeEndTag(jsObject, elementName) {\r\n\t\t\t\treturn \"</\" + ((jsObject && jsObject.__prefix) ? (jsObject.__prefix + \":\") : \"\") + elementName + \">\";\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction endsWith(str, suffix) {\r\n\t\t\t\treturn str.indexOf(suffix, str.length - suffix.length) !== -1;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction isSpecialProperty(jsonObj, propertyName) {\r\n\t\t\t\tif ((config.arrayAccessForm === \"property\" && endsWith(propertyName.toString(), (\"_asArray\")))\r\n\t\t\t\t\t|| propertyName.toString().indexOf(config.attributePrefix) === 0\r\n\t\t\t\t\t|| propertyName.toString().indexOf(\"__\") === 0\r\n\t\t\t\t\t|| (jsonObj[propertyName] instanceof Function))\r\n\t\t\t\t\treturn true;\r\n\t\t\t\telse\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction getDataElementCount(jsObject) {\r\n\t\t\t\tvar count = 0;\r\n\t\r\n\t\t\t\tif (jsObject instanceof Object) {\r\n\t\t\t\t\tfor (var propertyName in jsObject) {\r\n\t\t\t\t\t\tif (isSpecialProperty(jsObject, propertyName))\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn count;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction getDataAttributeNames(jsObject) {\r\n\t\t\t\tvar names = [];\r\n\t\r\n\t\t\t\tif (jsObject instanceof Object) {\r\n\t\t\t\t\tfor (var attributeName in jsObject) {\r\n\t\t\t\t\t\tif (attributeName.toString().indexOf(\"__\") === -1\r\n\t\t\t\t\t\t\t&& attributeName.toString().indexOf(config.attributePrefix) === 0) {\r\n\t\t\t\t\t\t\tnames.push(attributeName);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn names;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction serializeComplexTextNodeContents(textNode) {\r\n\t\t\t\tvar result = \"\";\r\n\t\r\n\t\t\t\tif (textNode.__cdata) {\r\n\t\t\t\t\tresult += \"<![CDATA[\" + textNode.__cdata + \"]]>\";\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (textNode.__text || typeof (textNode.__text) === 'number' || typeof (textNode.__text) === 'boolean') {\r\n\t\t\t\t\tif (config.escapeMode)\r\n\t\t\t\t\t\tresult += escapeXmlChars(textNode.__text);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tresult += textNode.__text;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction serializeTextNodeContents(textNode) {\r\n\t\t\t\tvar result = \"\";\r\n\t\r\n\t\t\t\tif (textNode instanceof Object) {\r\n\t\t\t\t\tresult += serializeComplexTextNodeContents(textNode);\r\n\t\t\t\t} else if (textNode !== null) {\r\n\t\t\t\t\tif (config.escapeMode)\r\n\t\t\t\t\t\tresult += escapeXmlChars(textNode);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tresult += textNode;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction serializeArray(elementArray, elementName, attributes) {\r\n\t\t\t\tvar result = \"\";\r\n\t\r\n\t\t\t\tif (elementArray.length === 0) {\r\n\t\t\t\t\tresult += serializeStartTag(elementArray, elementName, attributes, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var i = 0; i < elementArray.length; i++) {\r\n\t\t\t\t\t\tresult += serializeJavaScriptObject(elementArray[i], elementName, getDataAttributeNames(elementArray[i]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction serializeJavaScriptObject(element, elementName, attributes) {\r\n\t\t\t\tvar result = \"\";\r\n\t\r\n\t\t\t\t// Filter out elements\r\n\t\t\t\tif (config.jsAttributeFilter && config.jsAttributeFilter.call(null, elementName, element)) {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t\t// Convert element\r\n\t\t\t\tif (config.jsAttributeConverter) {\r\n\t\t\t\t\telement = config.jsAttributeConverter.call(null, elementName, element);\r\n\t\t\t\t}\r\n\t\t\t\tif ((element === undefined || element === null || element === '') && config.selfClosingElements) {\r\n\t\t\t\t\tresult += serializeStartTag(element, elementName, attributes, true);\r\n\t\t\t\t} else if (typeof element === 'object') {\r\n\t\t\t\t\tif (Object.prototype.toString.call(element) === '[object Array]') {\r\n\t\t\t\t\t\tresult += serializeArray(element, elementName, attributes);\r\n\t\t\t\t\t} else if (element instanceof Date) {\r\n\t\t\t\t\t\tresult += serializeStartTag(element, elementName, attributes, false);\r\n\t\t\t\t\t\t// Serialize date\r\n\t\t\t\t\t\tresult += config.jsDateUTC ? element.toUTCString() : element.toISOString();\r\n\t\t\t\t\t\tresult += serializeEndTag(element, elementName);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar childElementCount = getDataElementCount(element);\r\n\t\t\t\t\t\tif (childElementCount > 0 || typeof (element.__text) === 'number' || typeof (element.__text) === 'boolean' || element.__text || element.__cdata) {\r\n\t\t\t\t\t\t\tresult += serializeStartTag(element, elementName, attributes, false);\r\n\t\t\t\t\t\t\tresult += serializeJavaScriptObjectChildren(element);\r\n\t\t\t\t\t\t\tresult += serializeEndTag(element, elementName);\r\n\t\t\t\t\t\t} else if (config.selfClosingElements) {\r\n\t\t\t\t\t\t\tresult += serializeStartTag(element, elementName, attributes, true);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresult += serializeStartTag(element, elementName, attributes, false);\r\n\t\t\t\t\t\t\tresult += serializeEndTag(element, elementName);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult += serializeStartTag(element, elementName, attributes, false);\r\n\t\t\t\t\tresult += serializeTextNodeContents(element);\r\n\t\t\t\t\tresult += serializeEndTag(element, elementName);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction serializeJavaScriptObjectChildren(jsObject) {\r\n\t\t\t\tvar result = \"\";\r\n\t\r\n\t\t\t\tvar elementCount = getDataElementCount(jsObject);\r\n\t\r\n\t\t\t\tif (elementCount > 0) {\r\n\t\t\t\t\tfor (var elementName in jsObject) {\r\n\t\t\t\t\t\tif (isSpecialProperty(jsObject, elementName))\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t\t\tvar element = jsObject[elementName];\r\n\t\t\t\t\t\tvar attributes = getDataAttributeNames(element);\r\n\t\r\n\t\t\t\t\t\tresult += serializeJavaScriptObject(element, elementName, attributes);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tresult += serializeTextNodeContents(jsObject);\r\n\t\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction parseXml(xml) {\r\n\t\t\t\tif (xml === undefined) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (typeof xml !== \"string\") {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar parser = null;\r\n\t\t\t\tvar domNode = null;\r\n\t\r\n\t\t\t\tif (CustomDOMParser) {\r\n\t\t\t\t\t// This branch is used for node.js, with the xmldom parser.\r\n\t\t\t\t\tparser = new CustomDOMParser();\r\n\t\r\n\t\t\t\t\tdomNode = parser.parseFromString(xml, \"text/xml\");\r\n\t\t\t\t} else if (window && window.DOMParser) {\r\n\t\t\t\t\tparser = new window.DOMParser();\r\n\t\t\t\t\tvar parsererrorNS = null;\r\n\t\r\n\t\t\t\t\tvar isIEParser = window.ActiveXObject || \"ActiveXObject\" in window;\r\n\t\r\n\t\t\t\t\t// IE9+ now is here\r\n\t\t\t\t\tif (!isIEParser) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tparsererrorNS = parser.parseFromString(\"INVALID\", \"text/xml\").childNodes[0].namespaceURI;\r\n\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\tparsererrorNS = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdomNode = parser.parseFromString(xml, \"text/xml\");\r\n\t\t\t\t\t\tif (parsererrorNS !== null && domNode.getElementsByTagNameNS(parsererrorNS, \"parsererror\").length > 0) {\r\n\t\t\t\t\t\t\tdomNode = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\tdomNode = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// IE :(\r\n\t\t\t\t\tif (xml.indexOf(\"<?\") === 0) {\r\n\t\t\t\t\t\txml = xml.substr(xml.indexOf(\"?>\") + 2);\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t/* global ActiveXObject */\r\n\t\t\t\t\tdomNode = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\t\tdomNode.async = \"false\";\r\n\t\t\t\t\tdomNode.loadXML(xml);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn domNode;\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.asArray = function asArray(prop) {\r\n\t\t\t\tif (prop === undefined || prop === null) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t} else if (prop instanceof Array) {\r\n\t\t\t\t\treturn prop;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn [prop];\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\tthis.toXmlDateTime = function toXmlDateTime(dt) {\r\n\t\t\t\tif (dt instanceof Date) {\r\n\t\t\t\t\treturn dt.toISOString();\r\n\t\t\t\t} else if (typeof (dt) === 'number') {\r\n\t\t\t\t\treturn new Date(dt).toISOString();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\tthis.asDateTime = function asDateTime(prop) {\r\n\t\t\t\tif (typeof (prop) === \"string\") {\r\n\t\t\t\t\treturn xmlDateTimeToDate(prop);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn prop;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\t/*\r\n\t\t\t\tInternally the logic works in a cycle:\r\n\t\t\t\tDOM->JS - implemented by custom logic (deserialization).\r\n\t\t\t\tJS->XML - implemented by custom logic (serialization).\r\n\t\t\t\tXML->DOM - implemented by browser.\r\n\t\t\t*/\r\n\t\r\n\t\t\t// Transformns an XML string into DOM-tree\r\n\t\t\tthis.xml2dom = function xml2dom(xml) {\r\n\t\t\t\treturn parseXml(xml);\r\n\t\t\t};\r\n\t\r\n\t\t\t// Transforms a DOM tree to JavaScript objects.\r\n\t\t\tthis.dom2js = function dom2js(domNode) {\r\n\t\t\t\treturn deserializeDomChildren(domNode, null);\r\n\t\t\t};\r\n\t\r\n\t\t\t// Transforms JavaScript objects to a DOM tree.\r\n\t\t\tthis.js2dom = function js2dom(jsObject) {\r\n\t\t\t\tvar xml = this.js2xml(jsObject);\r\n\t\t\t\treturn parseXml(xml);\r\n\t\t\t};\r\n\t\r\n\t\t\t// Transformns an XML string into JavaScript objects.\r\n\t\t\tthis.xml2js = function xml2js(xml) {\r\n\t\t\t\tvar domNode = parseXml(xml);\r\n\t\t\t\tif (domNode != null)\r\n\t\t\t\t\treturn this.dom2js(domNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\r\n\t\t\t// Transforms JavaScript objects into an XML string.\r\n\t\t\tthis.js2xml = function js2xml(jsObject) {\r\n\t\t\t\treturn serializeJavaScriptObjectChildren(jsObject);\r\n\t\t\t};\r\n\t\r\n\t\t\tthis.getVersion = function getVersion() {\r\n\t\t\t\treturn VERSION;\r\n\t\t\t};\r\n\t\t};\r\n\t});\r\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar ms = __webpack_require__(29);\r\n\tvar X2JS = __webpack_require__(52);\r\n\t\r\n\tvar x2js = new X2JS({\r\n\t    attributePrefix: \"\"\r\n\t});\r\n\tvar _ssrcList = new Map();\r\n\t\r\n\t\r\n\t/**\r\n\t * audio/video/data集合\r\n\t */\r\n\tvar mediaObjList = new Array();\r\n\t\r\n\t/**\r\n\t * 1.保存VB节点，source-add时重用公共部分\r\n\t * 2.SDP对应的->cname : mixedaudio mixedvideo\r\n\t */\r\n\tvar _mixedAudioObj, _mixedVideoObj;\r\n\t\r\n\t/**\r\n\t * 1.生成假的SSRC\r\n\t * 2.自增\r\n\t */\r\n\tvar _ssrc = 100;\r\n\t\r\n\tvar midMum = 0;\r\n\t\r\n\tvar SsrcObj = function (isNew) {\r\n\t    this.jid = \"\";\r\n\t    this.isNew = isNew;\r\n\t};\r\n\t\r\n\tvar MediaObj = function (type) {\r\n\t    this.type = type;\r\n\t    this.ssrc = \"\";\r\n\t    this.title = \"\";\r\n\t    if (ms.getSemantics() != \"plan-b\") {\r\n\t        this.mid = midMum;\r\n\t    } else {\r\n\t        this.mid = type;\r\n\t    }\r\n\t    this.body = \"\";\r\n\t    if (this.type == \"data\") {\r\n\t        this.ssrc = \"0\";\r\n\t    }\r\n\t\r\n\t    /**\r\n\t     * 删除替换时保留原始MediaStream对象，根据endpoint修改\r\n\t     */\r\n\t    this.streamId = \"\";\r\n\t\r\n\t    /**\r\n\t     * sdp:mslabel对应MediaStream对象的ID属性\r\n\t     */\r\n\t    this.mslabel = \"\";\r\n\t\r\n\t    midMum++;\r\n\t};\r\n\tvar SdpUtil = {\r\n\t    markScreenSSRC: function (xml) {\r\n\t        var content = $(xml).find(\">content\");\r\n\t        var videoNode = $(content).find('description[media=\"video\"]') || null;\r\n\t        var videoSources = videoNode.find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]') || null;\r\n\t        for (var i = 0; i < videoSources.length; i++) {\r\n\t            var videoSource = $(videoSources[i]);\r\n\t            var isScreen = videoSource.attr('screen') || false;\r\n\t            var videoSSRC = videoSource.attr('ssrc') || null;\r\n\t            if (isScreen.toString() == 'true') {\r\n\t                console.log('find screen source: ', videoSource[0], videoSSRC);\r\n\t                window.screenSSRC = parseInt(videoSSRC);\r\n\t            }\r\n\t        }\r\n\t    },\r\n\t    xml2sdp: function (xml) {\r\n\t        var that = this;\r\n\t        that.markScreenSSRC(xml)\r\n\t        var jsonObj = x2js.xml2js(xml);\r\n\t        if (jsonObj && jsonObj.jingle) {\r\n\t            var action = jsonObj.jingle.action;\r\n\t            var contents = jsonObj.jingle.content;\r\n\t            if (action && contents) {\r\n\t                if (!contents.length) {\r\n\t                    var _array = new Array();\r\n\t                    _array.push(contents);\r\n\t                    contents = _array;\r\n\t                }\r\n\t                if (action == \"session-initiate\") {\r\n\t                    _ssrcList = new Map();\r\n\t                    mediaObjList = new Array();\r\n\t\r\n\t                    contents.forEach(function (content) {\r\n\t                        var name = content.name;\r\n\t                        if (name && content.description) {\r\n\t                            if (name != \"data\") {\r\n\t                                var sources = content.description.source;\r\n\t                                if (!sources.length) {\r\n\t                                    var _array = new Array();\r\n\t                                    _array.push(sources);\r\n\t                                    sources = _array;\r\n\t                                }\r\n\t                                sources.forEach(function (source) {\r\n\t                                    that.getSessionInitiateMediaObj(name, content, source);\r\n\t                                });\r\n\t                            } else {\r\n\t                                if (content.transport) {\r\n\t                                    var title = \"m=\" + content.description.media + \" 9 DTLS/SCTP \" + content.transport.sctpmap.number + \"\\r\\n\"\r\n\t                                        + \"c=IN IP4 0.0.0.0\" + \"\\r\\n\"\r\n\t                                        + \"a=ice-ufrag:\" + content.transport.ufrag + \"\\r\\n\"\r\n\t                                        + \"a=ice-pwd:\" + content.transport.pwd + \"\\r\\n\"\r\n\t                                        + \"a=ice-options:trickle\" + \"\\r\\n\"\r\n\t                                        + \"a=fingerprint:\" + content.transport.fingerprint.hash + \" \" + content.transport.fingerprint[\"__text\"] + \"\\r\\n\"\r\n\t                                        + \"a=setup:actpass\" + \"\\r\\n\"\r\n\t                                    var candidates = content.transport.candidate;\r\n\t                                    for (var i = 0; i < candidates.length; i++) {\r\n\t                                        var candidate = candidates[i];\r\n\t                                        title += \"a=candidate:\" + candidate.foundation\r\n\t                                            + \" \" + candidate.component\r\n\t                                            + \" \" + candidate.protocol\r\n\t                                            + \" \" + candidate.priority\r\n\t                                            + \" \" + candidate.ip\r\n\t                                            + \" \" + candidate.port\r\n\t                                            + \" typ \" + candidate.type + \" generation \" + candidate.generation + \"\\r\\n\";\r\n\t                                    }\r\n\t                                    title += \"a=sendrecv\" + \"\\r\\n\"\r\n\t                                        + \"a=rtcp-mux\" + \"\\r\\n\";\r\n\t                                    var body = \"a=sctpmap:\" + content.transport.sctpmap.number + \" \" + content.transport.sctpmap.protocol + \" \" + content.transport.sctpmap.streams + \"\\r\\n\";\r\n\t                                    var media = new MediaObj(name);\r\n\t                                    media.title = title;\r\n\t                                    media.body = body;\r\n\t                                    // 保存 data/application\r\n\t                                    mediaObjList.push(media);\r\n\t                                }\r\n\t                            }\r\n\t                        }\r\n\t                    });\r\n\t\r\n\t                } else if (action == \"source-add\") {\r\n\t                    var that = this;\r\n\t                    contents.forEach(function (content) {\r\n\t                        that.getSourceAddObj(content);\r\n\t                    });\r\n\t                } else if (action == \"source-remove\") {\r\n\t                    var that = this;\r\n\t                    contents.forEach(function (content) {\r\n\t                        that.getSourceRemoveObj(content);\r\n\t                    });\r\n\t                }\r\n\t\r\n\t                var sdp = this.getOfferSDP();\r\n\t                console.log(\"========================sdp========\" + action + \"\\n\" + sdp + \",ssrcList:\", _ssrcList);\r\n\t                return sdp;\r\n\t            }\r\n\t        }\r\n\t    },\r\n\t    getSessionInitiateMediaObj: function (name, content, source) {\r\n\t        if (source && name && content) {\r\n\t            var streamId = ms.findValueByName(source.parameter, 'mslabel');\r\n\t            if (streamId) {\r\n\t                var media = new MediaObj(name);\r\n\t                media.ssrc = source.ssrc;\r\n\t                media.title = this.getMediaTtileSDP(name, content);\r\n\t                media.body = this.getMediaBodySDP(source);\r\n\t\r\n\t                media.mslabel = streamId;\r\n\t                media.label = ms.findValueByName(source.parameter, 'label');\r\n\t                media.streamId = streamId;\r\n\t\r\n\t                this.saveSsrc(streamId, media, source, name, true);\r\n\t\r\n\t                // 保存 audio / video\r\n\t                mediaObjList.push(media);\r\n\t\r\n\t                if (media.mslabel.indexOf(\"mixed\") > -1) {\r\n\t                    if (name == \"audio\") {\r\n\t                        _mixedAudioObj = media;\r\n\t                    } else {\r\n\t                        _mixedVideoObj = media;\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    },\r\n\t    getMediaBodySDP: function (source) {\r\n\t        var rs = \"\";\r\n\t        if (ms.getSemantics() != \"plan-b\") {\r\n\t            rs += \"a=msid:\" + ms.findValueByName(source.parameter, 'msid') + \"\\r\\n\";\r\n\t        }\r\n\t        rs += \"a=ssrc:\" + source.ssrc + \" cname:\" + ms.findValueByName(source.parameter, 'cname') + \"\\r\\n\";\r\n\t        if (ms.getSemantics() != \"firefox\") {\r\n\t            rs += \"a=ssrc:\" + source.ssrc + \" msid:\" + ms.findValueByName(source.parameter, 'msid') + \"\\r\\n\"\r\n\t                + \"a=ssrc:\" + source.ssrc + \" mslabel:\" + ms.findValueByName(source.parameter, 'mslabel') + \"\\r\\n\"\r\n\t                + \"a=ssrc:\" + source.ssrc + \" label:\" + ms.findValueByName(source.parameter, 'label') + \"\\r\\n\";\r\n\t        }\r\n\t        return rs;\r\n\t    },\r\n\t    getMediaTtileSDP: function (name, content) {\r\n\t        var payloads = content.description[\"payload-type\"];\r\n\t        if (!payloads.length) {\r\n\t            var _array = new Array();\r\n\t            _array.push(payloads);\r\n\t            payloads = _array;\r\n\t        }\r\n\t        var payloadTypeIds = new Array();\r\n\t        payloads.forEach(function (payload) {\r\n\t            payloadTypeIds.push(payload.id);\r\n\t        });\r\n\t\r\n\t        var rs = \"m=\" + name + \" 9 UDP/TLS/RTP/SAVPF \" + payloadTypeIds.join(\" \") + \"\\r\\n\"\r\n\t            + \"c=IN IP4 0.0.0.0\" + \"\\r\\n\"\r\n\t            + \"a=rtcp:9 IN IP4 0.0.0.0\\r\\n\"\r\n\t            + \"a=ice-ufrag:\" + content.transport.ufrag + \"\\r\\n\"\r\n\t            + \"a=ice-pwd:\" + content.transport.pwd + \"\\r\\n\"\r\n\t            + \"a=ice-options:trickle\" + \"\\r\\n\"\r\n\t            + \"a=fingerprint:\" + content.transport.fingerprint.hash + \" \" + content.transport.fingerprint[\"__text\"] + \"\\r\\n\"\r\n\t            + \"a=setup:actpass\" + \"\\r\\n\";\r\n\t        // if (name == \"audio\") {\r\n\t        //     rs += \"a=extmap:1 urn:ietf:params:rtp-hdrext:ssrc-audio-level\" + \"\\r\\n\"\r\n\t        //     // + \"a=extmap:9 urn:ietf:params:rtp-hdrext:sdes:mid\" + \"\\r\\n\"\r\n\t        // } else if (name == \"video\") {\r\n\t        //     // rs += \"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\" + \"\\r\\n\"\r\n\t        //     //     + \"a=extmap:4 urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id\" + \"\\r\\n\"\r\n\t        //     //     + \"a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" + \"\\r\\n\"\r\n\t        //     //+ \"a=extmap:9 urn:ietf:params:rtp-hdrext:sdes:mid\" + \"\\r\\n\"\r\n\t        // }\r\n\t        var rtpHdrext = content.description[\"rtp-hdrext\"];\r\n\t        if (!rtpHdrext.length) {\r\n\t            rs += \"a=extmap:\" + rtpHdrext.id + \" \" + rtpHdrext.uri + \"\\r\\n\";\r\n\t        } else {\r\n\t            rtpHdrext.forEach(function (obj) {\r\n\t                rs += \"a=extmap:\" + obj.id + \" \" + obj.uri + \"\\r\\n\";\r\n\t            });\r\n\t        }\r\n\t        var candidates = content.transport.candidate;\r\n\t        for (var i = 0; i < candidates.length; i++) {\r\n\t            var candidate = candidates[i];\r\n\t            rs += \"a=candidate:\" + candidate.foundation\r\n\t                + \" \" + candidate.component\r\n\t                + \" \" + candidate.protocol\r\n\t                + \" \" + candidate.priority\r\n\t                + \" \" + candidate.ip\r\n\t                + \" \" + candidate.port\r\n\t                + \" typ \" + candidate.type + \" generation \" + candidate.generation + \"\\r\\n\";\r\n\t        }\r\n\t        rs += \"a=sendrecv\" + \"\\r\\n\"\r\n\t            + \"a=rtcp-mux\" + \"\\r\\n\";\r\n\t\r\n\t        payloads.forEach(function (payload) {\r\n\t            var id = payload.id;\r\n\t            var payloadName = payload.name;\r\n\t            var clockrate = payload.clockrate;\r\n\t            if (name == \"audio\") {\r\n\t                var channels = payload.channels;\r\n\t                if (channels) {\r\n\t                    rs += \"a=rtpmap:\" + id + \" \" + payloadName + \"/\" + clockrate + \"/\" + channels + \"\\r\\n\";\r\n\t                } else {\r\n\t                    rs += \"a=rtpmap:\" + id + \" \" + payloadName + \"/\" + clockrate + \"\\r\\n\"\r\n\t                }\r\n\t                rs += \"a=rtcp-fb:\" + id + \" transport-cc\" + \"\\r\\n\";\r\n\t            } else if (name == \"video\") {\r\n\t                rs += \"a=rtpmap:\" + id + \" \" + payloadName + \"/\" + clockrate + \"\\r\\n\"\r\n\t                if (payload[\"rtcp-fb\"]) {\r\n\t                    rs += \"a=rtcp-fb:\" + id + \" ccm fir\" + \"\\r\\n\"\r\n\t                        + \"a=rtcp-fb:\" + id + \" nack\" + \"\\r\\n\"\r\n\t                        + \"a=rtcp-fb:\" + id + \" nack pli\" + \"\\r\\n\"\r\n\t                        + \"a=rtcp-fb:\" + id + \" transport-cc\" + \"\\r\\n\"\r\n\t                }\r\n\t            }\r\n\t            if (payload.parameter) {\r\n\t                if (payload.parameter.length) {\r\n\t                    var pars = \"\";\r\n\t                    for (var i = 0, j = payload.parameter.length; i < j; i++) {\r\n\t                        if (i == 0) {\r\n\t                            pars += payload.parameter[i][\"name\"] + \"=\" + payload.parameter[i][\"value\"];\r\n\t                        } else {\r\n\t                            pars += \";\" + payload.parameter[i][\"name\"] + \"=\" + payload.parameter[i][\"value\"];\r\n\t                        }\r\n\t                    }\r\n\t                    rs += \"a=fmtp:\" + id + \" \" + pars + \"\\r\\n\";\r\n\t                } else {\r\n\t                    rs += \"a=fmtp:\" + id + \" \" + payload.parameter[\"name\"] + \"=\" + payload.parameter[\"value\"] + \"\\r\\n\";\r\n\t                }\r\n\t            }\r\n\t        });\r\n\t        return rs;\r\n\t    },\r\n\t    getSourceAddObj: function (content) {\r\n\t        var that = this;\r\n\t        var name = content.name;\r\n\t        if (name != \"data\") {\r\n\t            if (ms.getSemantics() == \"plan-b\") {\r\n\t                var sources = content.description.source;\r\n\t                if (sources) {\r\n\t                    if (!sources.length) {\r\n\t                        var _array = new Array();\r\n\t                        _array.push(sources);\r\n\t                        sources = _array;\r\n\t                    }\r\n\t                    sources.forEach(function (source) {\r\n\t                        var obj = new MediaObj(name);\r\n\t                        if (name == \"audio\") {\r\n\t                            obj.title = _mixedAudioObj.title;\r\n\t                        } else {\r\n\t                            obj.title = _mixedVideoObj.title;\r\n\t                        }\r\n\t                        var streamId = ms.findValueByName(source.parameter, 'mslabel');\r\n\t\r\n\t                        if (streamId) {\r\n\t                            obj.body = that.getMediaBodySDP(source);\r\n\t                            obj.ssrc = source.ssrc;\r\n\t                            obj.mslabel = streamId;\r\n\t                            obj.label = ms.findValueByName(source.parameter, 'label');\r\n\t                            obj.streamId = streamId;\r\n\t                            mediaObjList.push(obj);\r\n\t\r\n\t                            that.saveSsrc(streamId, obj, source, name, true);\r\n\t                        }\r\n\t                    });\r\n\t                }\r\n\t            } else {\r\n\t                var flag = true;\r\n\t                mediaObjList.forEach(function (obj) {\r\n\t                    if (obj.type == name && obj.mslabel == \"re_mslabel\") {\r\n\t                        var source = content.description.source;\r\n\t                        if (source && flag) {\r\n\t                            var mslabel = ms.findValueByName(source.parameter, 'mslabel');\r\n\t                            if (mslabel) {\r\n\t                                obj.body = that.getMediaBodySDP(source);\r\n\t                                obj.mslabel = mslabel;\r\n\t                                obj.label = ms.findValueByName(source.parameter, 'label');\r\n\t                                obj.ssrc = source.ssrc;\r\n\t\r\n\t                                that.saveSsrc(mslabel, obj, source, name, true);\r\n\t                                flag = false;\r\n\t                                return;\r\n\t                            }\r\n\t                        }\r\n\t                    }\r\n\t                });\r\n\t\r\n\t                if (flag) {\r\n\t                    var source = content.description.source;\r\n\t                    var streamId = ms.findValueByName(source.parameter, 'mslabel');\r\n\t                    if (source && streamId) {\r\n\t                        var obj = new MediaObj(name);\r\n\t                        if (name == \"audio\") {\r\n\t                            obj.title = _mixedAudioObj.title;\r\n\t                        } else {\r\n\t                            obj.title = _mixedVideoObj.title;\r\n\t                        }\r\n\t\r\n\t                        obj.body = that.getMediaBodySDP(source);\r\n\t                        obj.mslabel = streamId;\r\n\t                        obj.label = ms.findValueByName(source.parameter, 'label');\r\n\t                        obj.ssrc = source.ssrc;\r\n\t                        obj.streamId = streamId;\r\n\t                        mediaObjList.push(obj);\r\n\t\r\n\t                        that.saveSsrc(streamId, obj, source, name, false);\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t\r\n\t        }\r\n\t    },\r\n\t    saveSsrc: function (streamId, obj, source, name, flag) {\r\n\t        if (streamId && streamId.indexOf(\"mixed\") == -1) {\r\n\t            var type = {\r\n\t                ssrc: obj.ssrc,\r\n\t                label: obj.label\r\n\t            };\r\n\t            var ssrcObj = _ssrcList.get(streamId);\r\n\t            if (!ssrcObj) {\r\n\t                ssrcObj = new SsrcObj(flag);\r\n\t                ssrcObj.jid = source.jid;\r\n\t                ssrcObj[name] = type;\r\n\t                _ssrcList.set(streamId, ssrcObj);\r\n\t            } else {\r\n\t                ssrcObj[name] = type;\r\n\t            }\r\n\t        }\r\n\t    },\r\n\t    getSourceRemoveObj: function (content) {\r\n\t        var that = this;\r\n\t        var name = content.name;\r\n\t        if (name != \"data\") {\r\n\t            var sources = content.description.source;\r\n\t            if (sources) {\r\n\t                if (!sources.length) {\r\n\t                    var _array = new Array();\r\n\t                    _array.push(sources);\r\n\t                    sources = _array;\r\n\t                }\r\n\t                if (ms.getSemantics() == \"plan-b\") {\r\n\t                    sources.forEach(function (source) {\r\n\t                        var streamId = ms.findValueByName(source.parameter, 'mslabel');\r\n\t                        if (streamId) {\r\n\t                            _ssrcList.delete(streamId);\r\n\t                            var _array = new Array();\r\n\t                            mediaObjList.forEach(function (obj) {\r\n\t                                if (obj.ssrc == source.ssrc) {\r\n\t                                    $(document).trigger('mains.on.stream.removed', [name, source.ssrc, false]);\r\n\t                                } else {\r\n\t                                    _array.push(obj);\r\n\t                                }\r\n\t                            });\r\n\t                            mediaObjList = _array;\r\n\t                        }\r\n\t                    });\r\n\t                } else if (ms.getSemantics() == \"unified-plan\") {\r\n\t                    sources.forEach(function (source) {\r\n\t                        var streamId = ms.findValueByName(source.parameter, 'mslabel')\r\n\t                        if (streamId) {\r\n\t                            _ssrcList.delete(streamId);\r\n\t                            mediaObjList.forEach(function (obj) {\r\n\t                                if (obj.ssrc == source.ssrc) {\r\n\t                                    obj.body = that.getReplaceMediaBodySDP();\r\n\t                                    obj.ssrc = _ssrc;\r\n\t                                    obj.label = \"re_label\";\r\n\t                                    obj.mslabel = \"re_mslabel\";\r\n\t                                    $(document).trigger('mains.on.stream.removed', [name, source.ssrc, false]);\r\n\t                                }\r\n\t                            });\r\n\t                        }\r\n\t                    });\r\n\t                } else if (ms.getSemantics() == \"firefox\") {\r\n\t                    sources.forEach(function (source) {\r\n\t                        var msid = ms.findValueByName(source.parameter, 'msid');\r\n\t                        if (msid) {\r\n\t                            var labels = msid.split(\" \");\r\n\t                            var streamId = labels[0];\r\n\t                            _ssrcList.delete(streamId);\r\n\t\r\n\t                            mediaObjList.forEach(function (obj) {\r\n\t                                if (obj.ssrc == source.ssrc) {\r\n\t                                    obj.body = that.getReplaceMediaBodySDP();\r\n\t                                    obj.ssrc = _ssrc;\r\n\t                                    obj.label = \"re_label\";\r\n\t                                    obj.mslabel = \"re_mslabel\";\r\n\t\r\n\t                                    $(document).trigger('mains.on.stream.removed', [name, source.ssrc, false]);\r\n\t                                }\r\n\t                            });\r\n\t                        }\r\n\t                    });\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    },\r\n\t    getOfferSDP: function () {\r\n\t        if (ms.getSemantics() == \"plan-b\") {\r\n\t            var bundleNumStr = \"\", audioGroup = \"\", videoGroup = \"\", dataGroup = \"\";\r\n\t            mediaObjList.forEach(function (obj) {\r\n\t                if (obj.type == \"audio\") {\r\n\t                    if (audioGroup == \"\") {\r\n\t                        bundleNumStr += \" \" + obj.mid;\r\n\t                        audioGroup += obj.title;\r\n\t                        audioGroup += \"a=mid:\" + obj.mid + \"\\r\\n\";\r\n\t                        audioGroup += \"b=AS:\" + ms.getBandwidth(obj.type) + \"\\r\\n\";\r\n\t                        audioGroup += obj.body;\r\n\t                    } else {\r\n\t                        audioGroup += obj.body;\r\n\t                    }\r\n\t                }\r\n\t                if (obj.type == \"video\") {\r\n\t                    if (videoGroup == \"\") {\r\n\t                        bundleNumStr += \" \" + obj.mid;\r\n\t                        videoGroup += obj.title;\r\n\t                        videoGroup += \"a=mid:\" + obj.mid + \"\\r\\n\";\r\n\t                        videoGroup += \"b=AS:\" + ms.getBandwidth(obj.type) + \"\\r\\n\";\r\n\t                        videoGroup += obj.body;\r\n\t                    } else {\r\n\t                        videoGroup += obj.body;\r\n\t                    }\r\n\t                }\r\n\t                if (obj.type == \"data\") {\r\n\t                    if (dataGroup == \"\") {\r\n\t                        bundleNumStr += \" \" + obj.mid;\r\n\t                        dataGroup += obj.title;\r\n\t                        dataGroup += \"a=mid:\" + obj.mid + \"\\r\\n\";\r\n\t                        dataGroup += obj.body;\r\n\t                    }\r\n\t                }\r\n\t            });\r\n\t            var sdpOffer = \"v=0\\r\\n\"\r\n\t                + \"o=- 1923518516 2 IN IP4 0.0.0.0\\r\\n\"\r\n\t                + \"s=-\\r\\n\"\r\n\t                + \"t=0 0\\r\\n\"\r\n\t                + \"a=group:BUNDLE\" + bundleNumStr + \"\\r\\n\"\r\n\t                + \"a=msid-semantic: WMS\\r\\n\"\r\n\t                + audioGroup\r\n\t                + videoGroup\r\n\t                + dataGroup;\r\n\t            return sdpOffer;\r\n\t        } else {\r\n\t            var bundleNumStr = \"\", bootSdpOffer = \"\";\r\n\t            mediaObjList.forEach(function (obj) {\r\n\t                bundleNumStr += \" \" + obj.mid;\r\n\t                bootSdpOffer += obj.title;\r\n\t                bootSdpOffer += \"a=mid:\" + obj.mid + \"\\r\\n\";\r\n\t                if (obj.type != \"data\") {\r\n\t                    bootSdpOffer += \"b=AS:\" + ms.getBandwidth(obj.type) + \"\\r\\n\";\r\n\t                }\r\n\t                bootSdpOffer += obj.body;\r\n\t            });\r\n\t\r\n\t            var sdpOffer = \"v=0\\r\\n\" +\r\n\t                \"o=- 1923518516 2 IN IP4 0.0.0.0\\r\\n\" +\r\n\t                \"s=-\\r\\n\" +\r\n\t                \"t=0 0\\r\\n\" +\r\n\t                \"a=group:BUNDLE\" + bundleNumStr + \"\\r\\n\" +\r\n\t                \"a=msid-semantic: WMS *\\r\\n\" + bootSdpOffer;\r\n\t            return sdpOffer;\r\n\t        }\r\n\t    },\r\n\t    getSsrc: function (streamId) {\r\n\t        if (streamId) {\r\n\t            return _ssrcList.get(streamId);\r\n\t        } else {\r\n\t            return _ssrcList;\r\n\t        }\r\n\t    },\r\n\t    getReplaceMediaBodySDP: function () {\r\n\t        var rs = \"a=msid:re_mslabel re_label\\r\\n\"\r\n\t            + \"a=ssrc:\" + _ssrc + \" cname:re_cname\\r\\n\"\r\n\t        if (ms.getSemantics() != \"firefox\") {\r\n\t            rs += \"a=ssrc:\" + _ssrc + \" msid:re_mslabel re_label\\r\\n\"\r\n\t                + \"a=ssrc:\" + _ssrc + \" mslabel:re_mslabel\\r\\n\"\r\n\t                + \"a=ssrc:\" + _ssrc + \" label:re_label\\r\\n\";\r\n\t        }\r\n\t        _ssrc++;\r\n\t        return rs;\r\n\t    }\r\n\t};\r\n\texports = module.exports = SdpUtil;\r\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar LZString = __webpack_require__(55);\r\n\tvar ManisFunctions = __webpack_require__(27);\r\n\tvar ManisResponse = __webpack_require__(26);\r\n\tvar ErrorCode = __webpack_require__(28);\r\n\t\r\n\tvar whiteboardStart = false;\r\n\t/*\r\n\t $(document).ready(function () {\r\n\t var conferenceList = '<datalist id=\"conference-list\">'\r\n\t\r\n\t for (var i = 0; i < config.conferences.length; i++) {\r\n\t conferenceList = conferenceList + '<option value=\"' + Strophe.getNodeFromJid(config.conferences[i].jid) + '\">' + config.conferences[i].name + '</option>'\r\n\t }\r\n\t\r\n\t conferenceList = conferenceList + '</datalist>'\r\n\t\r\n\t $(\"body\").append(conferenceList);\r\n\t $(\"#enter_room_field\").attr(\"list\", \"conference-list\");\r\n\t\r\n\t setTimeout(function () {\r\n\t if ($('#ofmeet-extension-installed').length > 0) {\r\n\t var msg = {\r\n\t type: 'ofmeetSetConfig',\r\n\t host: window.location.host,\r\n\t username: Strophe.getResourceFromJid(this.connection.jid)\r\n\t };\r\n\t console.log(\"window.post.ofmeetSetConfig\", msg);\r\n\t window.postMessage(msg, '*');\r\n\t }\r\n\t }, 5000);\r\n\t });\r\n\t */\r\n\t\r\n\t\r\n\tStrophe.addConnectionPlugin('ofmuc', {\r\n\t  connection: null,\r\n\t  roomJid: null,\r\n\t  members: {},\r\n\t  sharePDF: null,\r\n\t  shareApp: null,\r\n\t  shareLink: '',\r\n\t  linkSharer: false,\r\n\t  pdfPage: \"1\",\r\n\t  recordingToken: null,\r\n\t  isRecording: false,\r\n\t  urls: [],\r\n\t  bookmarks: [],\r\n\t  appRunning: false,\r\n\t  enableCursor: true,\r\n\t  video: null,\r\n\t  appStartFrom: null,\r\n\t\r\n\t  init: function (conn) {\r\n\t    this.connection = conn;\r\n\t    this.connection.addHandler(this.onMessage.bind(this), null, 'message');\r\n\t    this.connection.addHandler(this.onPresence.bind(this), null, 'presence');\r\n\t    this.connection.addHandler(this.onPresenceUnavailable.bind(this), null, 'presence', 'unavailable');\r\n\t\r\n\t    var that = this;\r\n\t\r\n\t    that.shareLink = \"\";\r\n\t\r\n\t    // $(window).resize(function () {\r\n\t    //   that.resize();\r\n\t    // });\r\n\t\r\n\t\r\n\t    window.addEventListener('message', function (event) {\r\n\t      // console.log(\"addListener message ofmuc\", event);\r\n\t\r\n\t      if (!event.data) return;\r\n\t      if (event.data.type == 'ofmeetLoaded') that.appReady();\r\n\t      if (event.data.type == 'ofmeetSendMessage') that.appMessage(event.data.msg);\r\n\t    });\r\n\t  },\r\n\t\r\n\t  resize: function () {\r\n\t    if ($('#presentation>iframe')) {\r\n\t      $('#presentation>iframe').width(this.getPresentationWidth());\r\n\t      $('#presentation>iframe').height(this.getPresentationHeight());\r\n\t    }\r\n\t  },\r\n\t\r\n\t  getPresentationWidth: function () {\r\n\t    var availableWidth = window.innerWidth * 0.6;\r\n\t    /*var availableHeight = this.getPresentationHeight();\r\n\t\r\n\t     var aspectRatio = 16.5 / 9.0;\r\n\t     if (availableHeight < availableWidth / aspectRatio) {\r\n\t     availableWidth = Math.floor(availableHeight * aspectRatio);\r\n\t     }*/\r\n\t    return availableWidth - 10;\r\n\t  },\r\n\t\r\n\t  getPresentationHeight: function () {\r\n\t    var remoteVideos = $('#remoteVideos');\r\n\t    return window.innerHeight - 40 - (remoteVideos[0].scrollHeight - remoteVideos.outerHeight()) - 120;//(window.innerHeight - remoteVideos.outerHeight())*0.9;\r\n\t  },\r\n\t\r\n\t  onPresence: function (pres) {\r\n\t    //console.log('ofmuc onPresence', $(pres))\r\n\t\r\n\t    var from = pres.getAttribute('from');\r\n\t    var type = pres.getAttribute('type');\r\n\t\r\n\t    if (type != null) {\r\n\t      return true;\r\n\t    }\r\n\t    if(config.debug == true){\r\n\t      console.log('ofmuc on presence', pres, from, type);\r\n\t    }\r\n\t    var member = {};\r\n\t    member.jid = from;\r\n\t    if(this.members[from] === undefined){\r\n\t      this.members[from] = member;\r\n\t      if(this.shareApp){\r\n\t        this.appShare(\"create\", this.shareApp);\r\n\t      }\r\n\t    }\r\n\t    return true;\r\n\t  },\r\n\t\r\n\t  onParticipantLeave: function (from) {\r\n\t    delete this.members[from];\r\n\t    return true;\r\n\t  },\r\n\t\r\n\t  onPresenceUnavailable: function (pres) {\r\n\t    //console.log('onPresenceUnavailable', $(pres));\r\n\t\r\n\t    var from = pres.getAttribute('from');\r\n\t    if (!this.roomJid) return true;\r\n\t\r\n\t    this.onParticipantLeave(from);\r\n\t    return true;\r\n\t  },\r\n\t\r\n\t  onMessage: function (msg) {\r\n\t    if(window.clientType == 'electron-client'){\r\n\t      return ;\r\n\t    }\r\n\t    // console.warn('onMessage', $(msg))\r\n\t    var that = this;\r\n\t    var from = msg.getAttribute('from');\r\n\t    var type = msg.getAttribute('type');\r\n\t    var farparty = Strophe.getResourceFromJid(from);\r\n\t\r\n\t    if (type == \"chat\" && type != \"error\") {\r\n\t      $(msg).find('remotecontrol').each(function () {\r\n\t        var action = $(this).attr('action');\r\n\t        var requestor = Strophe.getResourceFromJid(from);\r\n\t\r\n\t        console.log(\"remote control message\", action, requestor);\r\n\t\r\n\t        if (action == \"request\")\t// requested\r\n\t        {\r\n\t          var msg2 = $msg({to: from, type: 'chat'});\r\n\t\r\n\t          if (!isUsingScreenStream || remoteControlled) {\r\n\t            msg2.c('remotecontrol', {\r\n\t              xmlns: 'http://igniterealtime.org/protocol/remotecontrol',\r\n\t              action: 'rejected'\r\n\t            }).up();\r\n\t            that.connection.send(msg2);\r\n\t\r\n\t          } else {\r\n\t\r\n\t            $.prompt(requestor + ' would like to control your desktop?',\r\n\t              {\r\n\t                title: \"Desktop Remote Control\",\r\n\t                persistent: false,\r\n\t                buttons: {\"Permit\": true, \"Deny\": false},\r\n\t                defaultButton: 1,\r\n\t                loaded: function (event) {\r\n\t                },\r\n\t                submit: function (e, v, m, f) {\r\n\t                  if (v) {\r\n\t                    msg2.c('remotecontrol', {\r\n\t                      xmlns: 'http://igniterealtime.org/protocol/remotecontrol',\r\n\t                      action: 'accepted'\r\n\t                    }).up();\r\n\t\r\n\t                    remoteControlled = true;\r\n\t                    remoteController = requestor;\r\n\t\r\n\t                    window.postMessage({type: 'ofmeetSetRequestorOn', id: requestor}, '*');\r\n\t\r\n\t                  } else {\r\n\t                    msg2.c('remotecontrol', {\r\n\t                      xmlns: 'http://igniterealtime.org/protocol/remotecontrol',\r\n\t                      action: 'rejected'\r\n\t                    }).up();\r\n\t                  }\r\n\t\r\n\t                  that.connection.send(msg2);\r\n\t                }\r\n\t              });\r\n\t          }\r\n\t        }\r\n\t        else if (action == \"terminate\")\t// requested\r\n\t        {\r\n\t          remoteControlled = false;\r\n\t          remoteController = null;\r\n\t\r\n\t          window.postMessage({type: 'ofmeetSetRequestorOff'}, '*');\r\n\t        }\r\n\t\r\n\t        else if (action == \"rejected\")\t\t// requestor\r\n\t        {\r\n\t          $.prompt(\"Your request was rejected\",\r\n\t            {\r\n\t              title: \"Desktop Remote Control\",\r\n\t              persistent: false\r\n\t            }\r\n\t          );\r\n\t        }\r\n\t        else if (action == \"accepted\")\t\t// requestor\r\n\t        {\r\n\t          isRemoteControl = true;\r\n\t          // Toolbar.changeRemoteControlButtonState(true);\r\n\t\r\n\t          $.prompt(\"You now have remote desktop control of \" + requestor,\r\n\t            {\r\n\t              title: \"Desktop Remote Control\",\r\n\t              persistent: false\r\n\t            }\r\n\t          );\r\n\t        }\r\n\t        else if (action == \"terminated\")\t\t// requestor\r\n\t        {\r\n\t          isRemoteControl = false;\r\n\t          // Toolbar.changeRemoteControlButtonState(false);\r\n\t        }\r\n\t\r\n\t        return;\r\n\t      });\r\n\t\r\n\t      $(msg).find('body').each(function () {\r\n\t        var body = $('<div/>').text($(this).text()).html();\r\n\t\r\n\t        // console.log('onMessage chat', body, from)\r\n\t\r\n\t        if (body.indexOf('https://') == 0 && body.indexOf('/ofmeet/?b=') > 0) {\r\n\t          $(document).trigger(\"ofmuc.meeting.invite\", [body, Strophe.getBareJidFromJid(from)]);\r\n\t        }\r\n\t\r\n\t      });\r\n\t\r\n\t      return true;\r\n\t    }\r\n\t\r\n\t    if (!farparty) farparty = Strophe.getResourceFromJid(from);\r\n\t    if (!that.roomJid) that.roomJid = Strophe.getBareJidFromJid(from);\r\n\t\r\n\t    $(msg).find('appshare').each(function () {\r\n\t      var action = $(this).attr('action');\r\n\t      var url = $(this).attr('url');\r\n\t\r\n\t      if (Strophe.getResourceFromJid(from) != Strophe.getResourceFromJid(that.connection.jid)) {\r\n\t        that.handleAppShare(action, url, farparty);\r\n\t      }\r\n\t    });\r\n\t\r\n\t    $(msg).find('pdfshare').each(function () {\r\n\t      var action = $(this).attr('action');\r\n\t      var url = $(this).attr('url');\r\n\t\r\n\t      if (Strophe.getResourceFromJid(from) != Strophe.getResourceFromJid(that.connection.jid)) {\r\n\t        that.handlePdfShare(action, url, farparty);\r\n\t      }\r\n\t    });\r\n\t\r\n\t    $(msg).find('linkshare').each(function () {\r\n\t      var action = $(this).attr('action');\r\n\t      var url = $(this).attr('url');\r\n\t\r\n\t      if (Strophe.getResourceFromJid(from) != Strophe.getResourceFromJid(that.connection.jid)) {\r\n\t        that.handleLinkShare(action, url, farparty);\r\n\t      }\r\n\t    });\r\n\t\r\n\t    $(msg).find('avatarshare').each(function () {\r\n\t      that.members[from].avatar = $(this).text();\r\n\t      Avatar.setUserAvatar(from);\r\n\t    });\r\n\t\r\n\t    return true;\r\n\t  },\r\n\t\r\n\t  appSave: function (callback) {\r\n\t    console.log(\"ofmuc.appSave\");\r\n\t\r\n\t    var canSave = false;\r\n\t\r\n\t    try {\r\n\t      canSave = this.appFrame && this.appFrame.contentWindow.ManisMeetings && this.appFrame.contentWindow.ManisMeetings.getContent;\r\n\t    } catch (e) {\r\n\t      if (callback) callback()\r\n\t    }\r\n\t\r\n\t    if (canSave) {\r\n\t      var content = this.appFrame.contentWindow.ManisMeetings.getContent();\r\n\t\r\n\t      if (content != null) {\r\n\t        var compressed = LZString.compressToBase64(content);\r\n\t\r\n\t        //console.log(\"ofmuc.appSave\", this.shareApp, content, compressed);\r\n\t\r\n\t        var ns = this.shareApp + \"/\" + this.roomJid;\r\n\t        var iq = $iq({to: manisConfg.messageServer, type: 'set'});\r\n\t        iq.c('query', {xmlns: \"jabber:iq:private\"}).c('ofmeet-application', {xmlns: ns}).t(compressed);\r\n\t\r\n\t        this.connection.sendIQ(iq,\r\n\t\r\n\t          function (resp) {\r\n\t            if (callback) callback()\r\n\t          },\r\n\t\r\n\t          function (err) {\r\n\t            var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n\t            if (lang == 'en') {\r\n\t              var promptContent = 'Application save...';\r\n\t            }else {\r\n\t              var promptContent = '数据保存中...';\r\n\t            }\r\n\t            $.prompt(promptContent, {title: err, persistent: false});\r\n\t          }\r\n\t        );\r\n\t\r\n\t      } else if (callback) callback();\r\n\t\r\n\t    } else if (callback) callback()\r\n\t  },\r\n\t\r\n\t  appPrint: function () {\r\n\t    //console.log(\"ofmuc.appPrint\");\r\n\t\r\n\t    var canPrint = false;\r\n\t\r\n\t    try {\r\n\t      canPrint = this.appFrame && this.appFrame.contentWindow.ManisMeetings && this.appFrame.contentWindow.ManisMeetings.getPrintContent;\r\n\t    } catch (e) {\r\n\t    }\r\n\t\r\n\t    if (canPrint) {\r\n\t      var content = this.appFrame.contentWindow.ManisMeetings.getPrintContent();\r\n\t      var printWin = window.open();\r\n\t      printWin.document.write(content);\r\n\t      printWin.print();\r\n\t      printWin.close();\r\n\t    }\r\n\t  },\r\n\t\r\n\t  appEnableCursor: function (flag) {\r\n\t    //console.log(\"ofmuc.appEnableCursor\", flag)\r\n\t    this.enableCursor = flag;\r\n\t  },\r\n\t\r\n\t  appReady: function () {\r\n\t    //console.log(\"ofmuc.appReady\")\r\n\t\r\n\t    if (this.appRunning) return;\r\n\t\r\n\t    $.prompt.close();\r\n\t\r\n\t    this.setPresentationVisible(true);\r\n\t    // VideoLayout.resizeLargeVideoContainer();\r\n\t    // VideoLayout.positionLarge();\r\n\t    // VideoLayout.resizeThumbnails();\r\n\t    // this.resize();\r\n\t\r\n\t    // request for initial content\r\n\t\r\n\t    if (this.shareApp)     // owner, get from server\r\n\t    {\r\n\t      var that = this;\r\n\t      var ns = this.shareApp + \"/\" + this.roomJid;\r\n\t      var iq = $iq({to: manisConfg.messageServer, type: 'get'});\r\n\t      iq.c('query', {xmlns: \"jabber:iq:private\"}).c('ofmeet-application', {xmlns: ns});\r\n\t\r\n\t      this.connection.sendIQ(iq,\r\n\t\r\n\t        function (resp) {\r\n\t          var response = \"\";\r\n\t\r\n\t          $(resp).find('ofmeet-application').each(function () {\r\n\t            try {\r\n\t              if (that.appFrame && that.appFrame.contentWindow.ManisMeetings && that.appFrame.contentWindow.ManisMeetings.setContent) {\r\n\t                var content = LZString.decompressFromBase64($(this).text());\r\n\t                //console.log(\"ofmuc.appReady\", that.shareApp, content);\r\n\t                that.appFrame.contentWindow.ManisMeetings.setContent(content);\r\n\t              }\r\n\t            } catch (e) {\r\n\t            }\r\n\t          });\r\n\t        },\r\n\t\r\n\t        function (err) {\r\n\t            var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n\t            if (lang == 'en') {\r\n\t              var promptContent = 'Application data retrieve...';\r\n\t            }else {\r\n\t              var promptContent = '数据恢复中...';\r\n\t            }\r\n\t          $.prompt(promptContent, {title: err, persistent: false});\r\n\t        }\r\n\t      );\r\n\t\r\n\t      this.appShare(\"create\", this.shareApp);\r\n\t\r\n\t    } else { \t\t// request from peers\r\n\t      var msg = $msg({to: this.roomJid, type: 'groupchat'});\r\n\t      msg.c('appshare', {\r\n\t        xmlns: 'http://igniterealtime.org/protocol/appshare',\r\n\t        action: 'message',\r\n\t        url: '{\"type\": \"joined\"}'\r\n\t      }).up();\r\n\t      this.connection.send(msg);\r\n\t    }\r\n\t\r\n\t    this.appRunning = true;\r\n\t    if (this.appFrame) this.appFrame.contentWindow.postMessage({\r\n\t      type: 'ofmeetEnableCursor',\r\n\t      flag: this.enableCursor\r\n\t    }, '*');\r\n\t\r\n\t    if (this.appFrame) {\r\n\t      this.appFrame.contentWindow.__isadmin = ManisFunctions.isAdmin();\r\n\t      if (!ManisFunctions.isAdmin()) {\r\n\t        this.appFrame.contentWindow.DisableInput();\r\n\t      }\r\n\t    }\r\n\t  },\r\n\t\r\n\t  appShare: function (action, url) {\r\n\t    this.roomJid = window.parent.connection.emuc.roomjid;\r\n\t    // console.log(\"ofmuc.appShare\", url, action, this.roomJid);\r\n\t    var msg = $msg({to: this.roomJid, type: 'groupchat'});\r\n\t    msg.c('appshare', {xmlns: 'http://igniterealtime.org/protocol/appshare', action: action, url: url}).up();\r\n\t    console.log('xxxxxxxxxxxxx', msg.tree());\r\n\t    this.connection.send(msg);\r\n\t  },\r\n\t\r\n\t  appStart: function (url, owner, callback) {\r\n\t    __isshow = false;\r\n\t    //console.log(\"ofmuc.appStart\", url, owner);\r\n\t    if (!this.roomJid) {\r\n\t      this.roomJid = window.parent.connection.emuc.roomjid;\r\n\t    }\r\n\t\r\n\t    this.enableCursor = true;\r\n\t    // Toolbar.changeShareAppsButtonState(true);\r\n\t\r\n\t    $('#presentation').html('<iframe id=\"appViewer\" src=\"' + url + \"?room=\" + roomName + \"&user=\" + self.nickname + '\"></iframe>');\r\n\t    this.appFrame = document.getElementById(\"appViewer\");\r\n\t    $('.media-container').addClass('hidden');\r\n\t    $('.whiteboard-container').removeClass('hidden');\r\n\t    $(document).trigger('resizeWhiteboardContainer');\r\n\t    var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n\t    if(lang == 'en'){\r\n\t      var promptTitle = 'Application Loader';\r\n\t      var promptContent = 'Please wait....';\r\n\t    }else {\r\n\t        var promptTitle = '初始化应用';\r\n\t        var promptContent = '请稍后....';\r\n\t    }\r\n\t    $.prompt(promptContent,\r\n\t      {\r\n\t        title: promptTitle,\r\n\t        persistent: false\r\n\t      }\r\n\t    );\r\n\t    if(callback){\r\n\t      callback({\r\n\t        code: ManisResponse.code_200,\r\n\t        msg: ManisResponse.share_app_completed,\r\n\t        errorCode: ErrorCode.no_error,\r\n\t        response: true\r\n\t      })\r\n\t    }\r\n\t    var _this = this;\r\n\t    $(document).bind('app.share.endpoint.left', function (event, from) {\r\n\t      if (from == _this.appStartFrom) {\r\n\t        _this.appStop();\r\n\t      }\r\n\t    });\r\n\t  },\r\n\t\r\n\t  appStop: function (url) {\r\n\t    //console.log(\"ofmuc.appStop\", url);\r\n\t    __isshow = true;\r\n\t    this.setPresentationVisible(false);\r\n\t    // Toolbar.changeShareAppsButtonState(false);\r\n\t\r\n\t    if (this.appFrame) {\r\n\t      this.appFrame.contentWindow.location.href = \"about:blank\";\r\n\t      this.appFrame = null;\r\n\t      this.appRunning = false;\r\n\t\r\n\t      $('#presentation').html('');\r\n\t      $('.whiteboard-container').addClass('hidden');\r\n\t      $('.media-container').removeClass('hidden');\r\n\t    }\r\n\t  },\r\n\t\r\n\t  appMessage: function (msg) {\r\n\t\r\n\t    //console.log(\"ofmuc.appMessage\", msg);\r\n\t\r\n\t    if (this.appFrame) {\r\n\t      this.appShare(\"message\", JSON.stringify(msg));\r\n\t    }\r\n\t  },\r\n\t\r\n\t  handleAppShare: function (action, url, from) {\r\n\t    // console.log(\"ofmuc.handleAppShare\", url, action, from);\r\n\t\r\n\t    if (this.shareApp == null) {\r\n\t      if (this.appFrame == null) {\r\n\t        if (action == \"create\") this.appStart(url, false);\r\n\t        // 记录当前分享屏幕的人的endpoint,以备此人异常退出时,关闭共享白板.\r\n\t        this.appStartFrom = from;\r\n\t      } else {\r\n\t\r\n\t        if (action == \"destroy\") this.appStop(url);\r\n\t      }\r\n\t    }\r\n\t\r\n\t    if (this.appFrame && this.appFrame.contentWindow) {\r\n\t      if (this.enableCursor) this.appFrame.contentWindow.postMessage({\r\n\t        type: 'ofmeetSetMessage',\r\n\t        json: url,\r\n\t        from: from\r\n\t      }, '*');\r\n\t\r\n\t      try {\r\n\t        if (this.appFrame.contentWindow.ManisMeetings && this.appFrame.contentWindow.ManisMeetings.handleAppMessage && action == \"message\") {\r\n\t          this.appFrame.contentWindow.ManisMeetings.handleAppMessage(url, from);\r\n\t        }\r\n\t      } catch (e) {\r\n\t      }\r\n\t    }\r\n\t  },\r\n\t\r\n\t  openAppsDialog: function (auto, shareDir, callback) {\r\n\t    //console.log(\"ofmuc.openAppsDialog\");\r\n\t    var that = this;\r\n\t    var canPrint = false;\r\n\t    var canSave = false;\r\n\t    try {\r\n\t      canPrint = this.appFrame && this.appFrame.contentWindow.ManisMeetings && this.appFrame.contentWindow.ManisMeetings.getPrintContent;\r\n\t      canSave = this.appFrame && this.appFrame.contentWindow.ManisMeetings && this.appFrame.contentWindow.ManisMeetings.setContent;\r\n\t    } catch (e) {\r\n\t    }\r\n\t\r\n\t    var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n\t    if (lang == 'en') {\r\n\t      var removeButtons = {\"Close\": 1};\r\n\t      var printButtons = {\"Confirm\": 1};\r\n\t    } else {\r\n\t      var removeButtons = {\"关闭\": 1};\r\n\t      var printButtons = {\"确定\": 1};\r\n\t    }\r\n\t\r\n\t    if (canPrint) {\r\n\t      if (lang == 'en') {\r\n\t        removeButtons[\"Print\"] = 2;\r\n\t        printButtons[\"Print\"] = 2;\r\n\t      } else {\r\n\t        removeButtons[\"打印\"] = 2;\r\n\t        printButtons[\"打印\"] = 2;\r\n\t      }\r\n\t    }\r\n\t\r\n\t    if (canSave) {\r\n\t      if (lang == 'en') {\r\n\t        removeButtons[\"Save\"] = 3;\r\n\t      } else {\r\n\t        removeButtons[\"保存\"] = 3;\r\n\t      }\r\n\t    }\r\n\t\r\n\t    if (auto) {\r\n\t      if (this.shareApp) {\r\n\t        that.appSave(function () {\r\n\t          that.appShare(\"destroy\", that.shareApp);\r\n\t          that.appStop(that.shareApp);\r\n\t          that.shareApp = null;\r\n\t        });\r\n\t      }\r\n\t    } else if (this.shareApp) {\r\n\t      if (this.isPresentationVisible() == false) {\r\n\t        this.setPresentationVisible(true);\r\n\t\r\n\t      } else {\r\n\t\r\n\t        if(lang == 'en'){\r\n\t          var noticeStr = 'Do you want to close the Shared application ';\r\n\t          var noticeTitle = 'Stop whiteboard share ';\r\n\t        }else {\r\n\t          var noticeStr = '您是否想要关闭共享的应用程序';\r\n\t          var noticeTitle = '关闭应用程序共享';\r\n\t        }\r\n\t\r\n\t        $.prompt(noticeStr,\r\n\t          {\r\n\t            title: noticeTitle,\r\n\t            buttons: removeButtons,\r\n\t            defaultButton: 1,\r\n\t            submit: function (e, v, m, f) {\r\n\t              if (v == 1) {\r\n\t                // that.appSave(function () {\r\n\t                //   that.appShare(\"destroy\", that.shareApp);\r\n\t                //   that.appStop(that.shareApp);\r\n\t                //   that.shareApp = null;\r\n\t                //   whiteboardStart = false;\r\n\t                // });\r\n\t                that.appDestory(callback);\r\n\t              }\r\n\t              else if (v == 3) {\r\n\t                that.appSave();\r\n\t              }\r\n\t              else if (v == 2) {\r\n\t                that.appPrint();\r\n\t              }\r\n\t            }\r\n\t          });\r\n\t      }\r\n\t    }\r\n\t    else if (this.appFrame != null) {\r\n\t\r\n\t      if (this.isPresentationVisible() == false) {\r\n\t        this.setPresentationVisible(true);\r\n\t\r\n\t      } else {\r\n\t        var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n\t        if (lang == 'en') {\r\n\t          var promptTitle = 'Application share';\r\n\t          var promptContent = 'Application share busy, someone using at this moment';\r\n\t        }else {\r\n\t            var promptTitle = '分享应用程序';\r\n\t            var promptContent = '其他成员正在共享应用程序或文档. 在同一时刻此会议仅允许一个共享的应用程序';\r\n\t        }\r\n\t        $.prompt(promptContent,\r\n\t          {\r\n\t            f: promptTitle,\r\n\t            buttons: printButtons,\r\n\t            defaultButton: 0,\r\n\t            submit: function (e, v, m, f) {\r\n\t              if (v == 1) {\r\n\t                //$.prompt.close();\r\n\t              }\r\n\t              else if (v == 2) {\r\n\t                that.appPrint();\r\n\t              }\r\n\t            }\r\n\t          });\r\n\t      }\r\n\t    }\r\n\t    else {\r\n\t      that.shareApp = shareDir ? shareDir : 'apps/drawing';\r\n\t      that.appStart(that.shareApp, true, callback);\r\n\t      whiteboardStart = true;\r\n\t    }\r\n\t  },\r\n\t\r\n\t  appDestory: function (callback) {\r\n\t    var that = this;\r\n\t    if(that.shareApp || whiteboardStart){\r\n\t      that.appSave(function () {\r\n\t        that.appShare(\"destroy\", that.shareApp);\r\n\t        that.appStop(that.shareApp);\r\n\t        that.shareApp = null;\r\n\t        whiteboardStart = false;\r\n\t      });\r\n\t      if(callback){\r\n\t        callback({\r\n\t          code: ManisResponse.code_200,\r\n\t            errorCode: ErrorCode.no_error,\r\n\t          msg: ManisResponse.share_app_completed,\r\n\t          response: false\r\n\t        })\r\n\t      }\r\n\t    }\r\n\t  },\r\n\t\r\n\t  setPresentationVisible: function (visible) {\r\n\t    /*   if (!visible) {\r\n\t     $(\"#remoteVideos\").toggleClass(\"hidden\", config.layout === LAYOUT_SURROUND);\r\n\t     } else {\r\n\t     $(\"#remoteVideos\").toggleClass(\"hidden\", visible);\r\n\t     }\r\n\t     $(\"#splitscrean\").attr(\"disabled\", visible);*/\r\n\t    if (visible) {\r\n\t      // Trigger the video.selected event to indicate a change in the\r\n\t      // large video.\r\n\t      // $(document).trigger(\"video.selected\", [true]);\r\n\t\r\n\t      $('#largeVideo').fadeOut(300, function () {\r\n\t        // VideoLayout.setLargeVideoVisible(false);\r\n\t        $('#presentation>iframe').fadeIn(300, function () {\r\n\t          $('#presentation>iframe').css({opacity: '1'});\r\n\t          // ToolbarToggler.dockToolbar(false);\r\n\t        });\r\n\t      });\r\n\t    }\r\n\t    else {\r\n\t      if ($('#presentation>iframe').css('opacity') == '1') {\r\n\t        $('#presentation>iframe').fadeOut(300, function () {\r\n\t          $('#presentation>iframe').css({opacity: '0'});\r\n\t          // $('#reloadPresentation').css({display: 'none'});\r\n\t        });\r\n\t      }\r\n\t      // $('#largeVideo').fadeIn(300, function () {\r\n\t      //   VideoLayout.setLargeVideoVisible(true);\r\n\t      //   ToolbarToggler.dockToolbar(true);\r\n\t      // });\r\n\t    }\r\n\t  },\r\n\t\r\n\t  isPresentationVisible: function () {\r\n\t    return ($('#presentation>iframe') != null && $('#presentation>iframe').css('opacity') == 1);\r\n\t  },\r\n\t\r\n\t  validURL: function (url) {\r\n\t    var p = /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[\\+~%\\/.\\w-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w]*))?)/;\r\n\t    return url.match(p);\r\n\t  },\r\n\t\r\n\t  iframeURL: function (url) {\r\n\t    return url.indexOf(\"<iframe src=\") > -1;\r\n\t  },\r\n\t});\r\n\t\r\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports) {\n\n\t// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\r\n\t// This work is free. You can redistribute it and/or modify it\r\n\t// under the terms of the WTFPL, Version 2\r\n\t// For more information see LICENSE.txt or http://www.wtfpl.net/\r\n\t//\r\n\t// For more information, the home page:\r\n\t// http://pieroxy.net/blog/pages/lz-string/testing.html\r\n\t//\r\n\t// LZ-based compression algorithm, version 1.3.7\r\n\tvar LZString = {\r\n\t\r\n\t\r\n\t  // private property\r\n\t  _keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n\t  _f: String.fromCharCode,\r\n\t\r\n\t  compressToBase64: function (input) {\r\n\t    if (input == null) return \"\";\r\n\t    var output = \"\";\r\n\t    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n\t    var i = 0;\r\n\t\r\n\t    input = LZString.compress(input);\r\n\t\r\n\t    while (i < input.length * 2) {\r\n\t\r\n\t      if (i % 2 == 0) {\r\n\t        chr1 = input.charCodeAt(i / 2) >> 8;\r\n\t        chr2 = input.charCodeAt(i / 2) & 255;\r\n\t        if (i / 2 + 1 < input.length)\r\n\t          chr3 = input.charCodeAt(i / 2 + 1) >> 8;\r\n\t        else\r\n\t          chr3 = NaN;\r\n\t      } else {\r\n\t        chr1 = input.charCodeAt((i - 1) / 2) & 255;\r\n\t        if ((i + 1) / 2 < input.length) {\r\n\t          chr2 = input.charCodeAt((i + 1) / 2) >> 8;\r\n\t          chr3 = input.charCodeAt((i + 1) / 2) & 255;\r\n\t        } else\r\n\t          chr2 = chr3 = NaN;\r\n\t      }\r\n\t      i += 3;\r\n\t\r\n\t      enc1 = chr1 >> 2;\r\n\t      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n\t      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n\t      enc4 = chr3 & 63;\r\n\t\r\n\t      if (isNaN(chr2)) {\r\n\t        enc3 = enc4 = 64;\r\n\t      } else if (isNaN(chr3)) {\r\n\t        enc4 = 64;\r\n\t      }\r\n\t\r\n\t      output = output +\r\n\t        LZString._keyStr[enc1] + LZString._keyStr[enc2] +\r\n\t        LZString._keyStr[enc3] + LZString._keyStr[enc4];\r\n\t\r\n\t    }\r\n\t\r\n\t    return output;\r\n\t  },\r\n\t\r\n\t  decompressFromBase64: function (input) {\r\n\t    if (input == null) return \"\";\r\n\t    var output = \"\",\r\n\t      ol = 0,\r\n\t      output_,\r\n\t      chr1, chr2, chr3,\r\n\t      enc1, enc2, enc3, enc4,\r\n\t      i = 0, f = LZString._f;\r\n\t\r\n\t    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\t\r\n\t    while (i < input.length) {\r\n\t\r\n\t      enc1 = LZString._keyStr.indexOf(input[i++]);\r\n\t      enc2 = LZString._keyStr.indexOf(input[i++]);\r\n\t      enc3 = LZString._keyStr.indexOf(input[i++]);\r\n\t      enc4 = LZString._keyStr.indexOf(input[i++]);\r\n\t\r\n\t      chr1 = (enc1 << 2) | (enc2 >> 4);\r\n\t      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n\t      chr3 = ((enc3 & 3) << 6) | enc4;\r\n\t\r\n\t      if (ol % 2 == 0) {\r\n\t        output_ = chr1 << 8;\r\n\t\r\n\t        if (enc3 != 64) {\r\n\t          output += f(output_ | chr2);\r\n\t        }\r\n\t        if (enc4 != 64) {\r\n\t          output_ = chr3 << 8;\r\n\t        }\r\n\t      } else {\r\n\t        output = output + f(output_ | chr1);\r\n\t\r\n\t        if (enc3 != 64) {\r\n\t          output_ = chr2 << 8;\r\n\t        }\r\n\t        if (enc4 != 64) {\r\n\t          output += f(output_ | chr3);\r\n\t        }\r\n\t      }\r\n\t      ol += 3;\r\n\t    }\r\n\t\r\n\t    return LZString.decompress(output);\r\n\t\r\n\t  },\r\n\t\r\n\t  compressToUTF16: function (input) {\r\n\t    if (input == null) return \"\";\r\n\t    var output = \"\",\r\n\t      i, c,\r\n\t      current,\r\n\t      status = 0,\r\n\t      f = LZString._f;\r\n\t\r\n\t    input = LZString.compress(input);\r\n\t\r\n\t    for (i = 0; i < input.length; i++) {\r\n\t      c = input.charCodeAt(i);\r\n\t      switch (status) {\r\n\t        case 0:\r\n\t          output += f((c >> 1) + 32);\r\n\t          current = (c & 1) << 14;\r\n\t          status++;\r\n\t          break;\r\n\t\r\n\t        case 14:\r\n\t          output += f((current + (c >> 15)) + 32, (c & 32767) + 32);\r\n\t          status = 0;\r\n\t          break;\r\n\t\r\n\t        default:\r\n\t          output += f((current + (c >> (status + 1))) + 32);\r\n\t          current = (c & ((2 << status) - 1)) << (14 - status);\r\n\t          status++;\r\n\t          break;\r\n\t      }\r\n\t    }\r\n\t\r\n\t    return output + f(current + 32);\r\n\t  },\r\n\t\r\n\t\r\n\t  decompressFromUTF16: function (input) {\r\n\t    if (input == null) return \"\";\r\n\t    var output = \"\",\r\n\t      current, c,\r\n\t      status = 0,\r\n\t      i = 0,\r\n\t      f = LZString._f;\r\n\t\r\n\t    while (i < input.length) {\r\n\t      c = input.charCodeAt(i) - 32;\r\n\t\r\n\t      switch (status++) {\r\n\t        case 0:\r\n\t          current = c << 1;\r\n\t          break;\r\n\t        case 1:\r\n\t          output += f(current | (c >> 14));\r\n\t          current = (c & 16383) << 2;\r\n\t          break;\r\n\t        case 2:\r\n\t          output += f(current | (c >> 13));\r\n\t          current = (c & 8191) << 3;\r\n\t          break;\r\n\t        case 3:\r\n\t          output += f(current | (c >> 12));\r\n\t          current = (c & 4095) << 4;\r\n\t          break;\r\n\t        case 4:\r\n\t          output += f(current | (c >> 11));\r\n\t          current = (c & 2047) << 5;\r\n\t          break;\r\n\t        case 5:\r\n\t          output += f(current | (c >> 10));\r\n\t          current = (c & 1023) << 6;\r\n\t          break;\r\n\t        case 6:\r\n\t          output += f(current | (c >> 9));\r\n\t          current = (c & 511) << 7;\r\n\t          break;\r\n\t        case 7:\r\n\t          output += f(current | (c >> 8));\r\n\t          current = (c & 255) << 8;\r\n\t          break;\r\n\t        case 8:\r\n\t          output += f(current | (c >> 7));\r\n\t          current = (c & 127) << 9;\r\n\t          break;\r\n\t        case 9:\r\n\t          output += f(current | (c >> 6));\r\n\t          current = (c & 63) << 10;\r\n\t          break;\r\n\t        case 10:\r\n\t          output += f(current | (c >> 5));\r\n\t          current = (c & 31) << 11;\r\n\t          break;\r\n\t        case 11:\r\n\t          output += f(current | (c >> 4));\r\n\t          current = (c & 15) << 12;\r\n\t          break;\r\n\t        case 12:\r\n\t          output += f(current | (c >> 3));\r\n\t          current = (c & 7) << 13;\r\n\t          break;\r\n\t        case 13:\r\n\t          output += f(current | (c >> 2));\r\n\t          current = (c & 3) << 14;\r\n\t          break;\r\n\t        case 14:\r\n\t          output += f(current | (c >> 1));\r\n\t          current = (c & 1) << 15;\r\n\t          break;\r\n\t        case 15:\r\n\t          output += f(current | c);\r\n\t          status = 0;\r\n\t          break;\r\n\t      }\r\n\t\r\n\t\r\n\t      i++;\r\n\t    }\r\n\t\r\n\t    return LZString.decompress(output);\r\n\t    //return output;\r\n\t\r\n\t  },\r\n\t\r\n\t\r\n\t  //compress into uint8array (UCS-2 big endian format)\r\n\t  compressToUint8Array: function (uncompressed) {\r\n\t\r\n\t    var compressed = LZString.compress(uncompressed);\r\n\t    var buf = new Uint8Array(compressed.length * 2); // 2 bytes per character\r\n\t\r\n\t    for (var i = 0, TotalLen = compressed.length; i < TotalLen; i++) {\r\n\t      var current_value = compressed.charCodeAt(i);\r\n\t      buf[i * 2] = current_value >>> 8;\r\n\t      buf[i * 2 + 1] = current_value % 256;\r\n\t    }\r\n\t    return buf;\r\n\t\r\n\t  },\r\n\t\r\n\t  //decompress from uint8array (UCS-2 big endian format)\r\n\t  decompressFromUint8Array: function (compressed) {\r\n\t\r\n\t    if (compressed === null || compressed === undefined) {\r\n\t      return LZString.decompress(compressed);\r\n\t    } else {\r\n\t\r\n\t      var buf = new Array(compressed.length / 2); // 2 bytes per character\r\n\t\r\n\t      for (var i = 0, TotalLen = buf.length; i < TotalLen; i++) {\r\n\t        buf[i] = compressed[i * 2] * 256 + compressed[i * 2 + 1];\r\n\t      }\r\n\t\r\n\t      return LZString.decompress(String.fromCharCode.apply(null, buf));\r\n\t\r\n\t    }\r\n\t\r\n\t  },\r\n\t\r\n\t  //compress into a string that is already URI encoded\r\n\t  compressToEncodedURIComponent: function (uncompressed) {\r\n\t    return LZString.compressToBase64(uncompressed).replace(/=/g, \"$\").replace(/\\//g, \"-\");\r\n\t  },\r\n\t\r\n\t  //decompress from an output of compressToEncodedURIComponent\r\n\t  decompressFromEncodedURIComponent: function (compressed) {\r\n\t    if (compressed) compressed = compressed.replace(/$/g, \"=\").replace(/-/g, \"/\");\r\n\t    return LZString.decompressFromBase64(compressed);\r\n\t  },\r\n\t\r\n\t\r\n\t  compress: function (uncompressed) {\r\n\t    if (uncompressed == null) return \"\";\r\n\t    var i, value,\r\n\t      context_dictionary = {},\r\n\t      context_dictionaryToCreate = {},\r\n\t      context_c = \"\",\r\n\t      context_wc = \"\",\r\n\t      context_w = \"\",\r\n\t      context_enlargeIn = 2, // Compensate for the first entry which should not count\r\n\t      context_dictSize = 3,\r\n\t      context_numBits = 2,\r\n\t      context_data_string = \"\",\r\n\t      context_data_val = 0,\r\n\t      context_data_position = 0,\r\n\t      ii,\r\n\t      f = LZString._f;\r\n\t\r\n\t    for (ii = 0; ii < uncompressed.length; ii += 1) {\r\n\t      context_c = uncompressed[ii];\r\n\t      if (!Object.prototype.hasOwnProperty.call(context_dictionary, context_c)) {\r\n\t        context_dictionary[context_c] = context_dictSize++;\r\n\t        context_dictionaryToCreate[context_c] = true;\r\n\t      }\r\n\t\r\n\t      context_wc = context_w + context_c;\r\n\t      if (Object.prototype.hasOwnProperty.call(context_dictionary, context_wc)) {\r\n\t        context_w = context_wc;\r\n\t      } else {\r\n\t        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {\r\n\t          if (context_w.charCodeAt(0) < 256) {\r\n\t            for (i = 0; i < context_numBits; i++) {\r\n\t              context_data_val = (context_data_val << 1);\r\n\t              if (context_data_position == 15) {\r\n\t                context_data_position = 0;\r\n\t                context_data_string += f(context_data_val);\r\n\t                context_data_val = 0;\r\n\t              } else {\r\n\t                context_data_position++;\r\n\t              }\r\n\t            }\r\n\t            value = context_w.charCodeAt(0);\r\n\t            for (i = 0; i < 8; i++) {\r\n\t              context_data_val = (context_data_val << 1) | (value & 1);\r\n\t              if (context_data_position == 15) {\r\n\t                context_data_position = 0;\r\n\t                context_data_string += f(context_data_val);\r\n\t                context_data_val = 0;\r\n\t              } else {\r\n\t                context_data_position++;\r\n\t              }\r\n\t              value = value >> 1;\r\n\t            }\r\n\t          } else {\r\n\t            value = 1;\r\n\t            for (i = 0; i < context_numBits; i++) {\r\n\t              context_data_val = (context_data_val << 1) | value;\r\n\t              if (context_data_position == 15) {\r\n\t                context_data_position = 0;\r\n\t                context_data_string += f(context_data_val);\r\n\t                context_data_val = 0;\r\n\t              } else {\r\n\t                context_data_position++;\r\n\t              }\r\n\t              value = 0;\r\n\t            }\r\n\t            value = context_w.charCodeAt(0);\r\n\t            for (i = 0; i < 16; i++) {\r\n\t              context_data_val = (context_data_val << 1) | (value & 1);\r\n\t              if (context_data_position == 15) {\r\n\t                context_data_position = 0;\r\n\t                context_data_string += f(context_data_val);\r\n\t                context_data_val = 0;\r\n\t              } else {\r\n\t                context_data_position++;\r\n\t              }\r\n\t              value = value >> 1;\r\n\t            }\r\n\t          }\r\n\t          context_enlargeIn--;\r\n\t          if (context_enlargeIn == 0) {\r\n\t            context_enlargeIn = Math.pow(2, context_numBits);\r\n\t            context_numBits++;\r\n\t          }\r\n\t          delete context_dictionaryToCreate[context_w];\r\n\t        } else {\r\n\t          value = context_dictionary[context_w];\r\n\t          for (i = 0; i < context_numBits; i++) {\r\n\t            context_data_val = (context_data_val << 1) | (value & 1);\r\n\t            if (context_data_position == 15) {\r\n\t              context_data_position = 0;\r\n\t              context_data_string += f(context_data_val);\r\n\t              context_data_val = 0;\r\n\t            } else {\r\n\t              context_data_position++;\r\n\t            }\r\n\t            value = value >> 1;\r\n\t          }\r\n\t\r\n\t\r\n\t        }\r\n\t        context_enlargeIn--;\r\n\t        if (context_enlargeIn == 0) {\r\n\t          context_enlargeIn = Math.pow(2, context_numBits);\r\n\t          context_numBits++;\r\n\t        }\r\n\t        // Add wc to the dictionary.\r\n\t        context_dictionary[context_wc] = context_dictSize++;\r\n\t        context_w = String(context_c);\r\n\t      }\r\n\t    }\r\n\t\r\n\t    // Output the code for w.\r\n\t    if (context_w !== \"\") {\r\n\t      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {\r\n\t        if (context_w.charCodeAt(0) < 256) {\r\n\t          for (i = 0; i < context_numBits; i++) {\r\n\t            context_data_val = (context_data_val << 1);\r\n\t            if (context_data_position == 15) {\r\n\t              context_data_position = 0;\r\n\t              context_data_string += f(context_data_val);\r\n\t              context_data_val = 0;\r\n\t            } else {\r\n\t              context_data_position++;\r\n\t            }\r\n\t          }\r\n\t          value = context_w.charCodeAt(0);\r\n\t          for (i = 0; i < 8; i++) {\r\n\t            context_data_val = (context_data_val << 1) | (value & 1);\r\n\t            if (context_data_position == 15) {\r\n\t              context_data_position = 0;\r\n\t              context_data_string += f(context_data_val);\r\n\t              context_data_val = 0;\r\n\t            } else {\r\n\t              context_data_position++;\r\n\t            }\r\n\t            value = value >> 1;\r\n\t          }\r\n\t        } else {\r\n\t          value = 1;\r\n\t          for (i = 0; i < context_numBits; i++) {\r\n\t            context_data_val = (context_data_val << 1) | value;\r\n\t            if (context_data_position == 15) {\r\n\t              context_data_position = 0;\r\n\t              context_data_string += f(context_data_val);\r\n\t              context_data_val = 0;\r\n\t            } else {\r\n\t              context_data_position++;\r\n\t            }\r\n\t            value = 0;\r\n\t          }\r\n\t          value = context_w.charCodeAt(0);\r\n\t          for (i = 0; i < 16; i++) {\r\n\t            context_data_val = (context_data_val << 1) | (value & 1);\r\n\t            if (context_data_position == 15) {\r\n\t              context_data_position = 0;\r\n\t              context_data_string += f(context_data_val);\r\n\t              context_data_val = 0;\r\n\t            } else {\r\n\t              context_data_position++;\r\n\t            }\r\n\t            value = value >> 1;\r\n\t          }\r\n\t        }\r\n\t        context_enlargeIn--;\r\n\t        if (context_enlargeIn == 0) {\r\n\t          context_enlargeIn = Math.pow(2, context_numBits);\r\n\t          context_numBits++;\r\n\t        }\r\n\t        delete context_dictionaryToCreate[context_w];\r\n\t      } else {\r\n\t        value = context_dictionary[context_w];\r\n\t        for (i = 0; i < context_numBits; i++) {\r\n\t          context_data_val = (context_data_val << 1) | (value & 1);\r\n\t          if (context_data_position == 15) {\r\n\t            context_data_position = 0;\r\n\t            context_data_string += f(context_data_val);\r\n\t            context_data_val = 0;\r\n\t          } else {\r\n\t            context_data_position++;\r\n\t          }\r\n\t          value = value >> 1;\r\n\t        }\r\n\t\r\n\t\r\n\t      }\r\n\t      context_enlargeIn--;\r\n\t      if (context_enlargeIn == 0) {\r\n\t        context_enlargeIn = Math.pow(2, context_numBits);\r\n\t        context_numBits++;\r\n\t      }\r\n\t    }\r\n\t\r\n\t    // Mark the end of the stream\r\n\t    value = 2;\r\n\t    for (i = 0; i < context_numBits; i++) {\r\n\t      context_data_val = (context_data_val << 1) | (value & 1);\r\n\t      if (context_data_position == 15) {\r\n\t        context_data_position = 0;\r\n\t        context_data_string += f(context_data_val);\r\n\t        context_data_val = 0;\r\n\t      } else {\r\n\t        context_data_position++;\r\n\t      }\r\n\t      value = value >> 1;\r\n\t    }\r\n\t\r\n\t    // Flush the last char\r\n\t    while (true) {\r\n\t      context_data_val = (context_data_val << 1);\r\n\t      if (context_data_position == 15) {\r\n\t        context_data_string += f(context_data_val);\r\n\t        break;\r\n\t      }\r\n\t      else context_data_position++;\r\n\t    }\r\n\t    return context_data_string;\r\n\t  },\r\n\t\r\n\t  decompress: function (compressed) {\r\n\t    if (compressed == null) return \"\";\r\n\t    if (compressed == \"\") return null;\r\n\t    var dictionary = [],\r\n\t      next,\r\n\t      enlargeIn = 4,\r\n\t      dictSize = 4,\r\n\t      numBits = 3,\r\n\t      entry = \"\",\r\n\t      result = \"\",\r\n\t      i,\r\n\t      w,\r\n\t      bits, resb, maxpower, power,\r\n\t      c,\r\n\t      f = LZString._f,\r\n\t      data = {string: compressed, val: compressed.charCodeAt(0), position: 32768, index: 1};\r\n\t\r\n\t    for (i = 0; i < 3; i += 1) {\r\n\t      dictionary[i] = i;\r\n\t    }\r\n\t\r\n\t    bits = 0;\r\n\t    maxpower = Math.pow(2, 2);\r\n\t    power = 1;\r\n\t    while (power != maxpower) {\r\n\t      resb = data.val & data.position;\r\n\t      data.position >>= 1;\r\n\t      if (data.position == 0) {\r\n\t        data.position = 32768;\r\n\t        data.val = data.string.charCodeAt(data.index++);\r\n\t      }\r\n\t      bits |= (resb > 0 ? 1 : 0) * power;\r\n\t      power <<= 1;\r\n\t    }\r\n\t\r\n\t    switch (next = bits) {\r\n\t      case 0:\r\n\t        bits = 0;\r\n\t        maxpower = Math.pow(2, 8);\r\n\t        power = 1;\r\n\t        while (power != maxpower) {\r\n\t          resb = data.val & data.position;\r\n\t          data.position >>= 1;\r\n\t          if (data.position == 0) {\r\n\t            data.position = 32768;\r\n\t            data.val = data.string.charCodeAt(data.index++);\r\n\t          }\r\n\t          bits |= (resb > 0 ? 1 : 0) * power;\r\n\t          power <<= 1;\r\n\t        }\r\n\t        c = f(bits);\r\n\t        break;\r\n\t      case 1:\r\n\t        bits = 0;\r\n\t        maxpower = Math.pow(2, 16);\r\n\t        power = 1;\r\n\t        while (power != maxpower) {\r\n\t          resb = data.val & data.position;\r\n\t          data.position >>= 1;\r\n\t          if (data.position == 0) {\r\n\t            data.position = 32768;\r\n\t            data.val = data.string.charCodeAt(data.index++);\r\n\t          }\r\n\t          bits |= (resb > 0 ? 1 : 0) * power;\r\n\t          power <<= 1;\r\n\t        }\r\n\t        c = f(bits);\r\n\t        break;\r\n\t      case 2:\r\n\t        return \"\";\r\n\t    }\r\n\t    dictionary[3] = c;\r\n\t    w = result = c;\r\n\t    while (true) {\r\n\t      if (data.index > data.string.length) {\r\n\t        return \"\";\r\n\t      }\r\n\t\r\n\t      bits = 0;\r\n\t      maxpower = Math.pow(2, numBits);\r\n\t      power = 1;\r\n\t      while (power != maxpower) {\r\n\t        resb = data.val & data.position;\r\n\t        data.position >>= 1;\r\n\t        if (data.position == 0) {\r\n\t          data.position = 32768;\r\n\t          data.val = data.string.charCodeAt(data.index++);\r\n\t        }\r\n\t        bits |= (resb > 0 ? 1 : 0) * power;\r\n\t        power <<= 1;\r\n\t      }\r\n\t\r\n\t      switch (c = bits) {\r\n\t        case 0:\r\n\t          bits = 0;\r\n\t          maxpower = Math.pow(2, 8);\r\n\t          power = 1;\r\n\t          while (power != maxpower) {\r\n\t            resb = data.val & data.position;\r\n\t            data.position >>= 1;\r\n\t            if (data.position == 0) {\r\n\t              data.position = 32768;\r\n\t              data.val = data.string.charCodeAt(data.index++);\r\n\t            }\r\n\t            bits |= (resb > 0 ? 1 : 0) * power;\r\n\t            power <<= 1;\r\n\t          }\r\n\t\r\n\t          dictionary[dictSize++] = f(bits);\r\n\t          c = dictSize - 1;\r\n\t          enlargeIn--;\r\n\t          break;\r\n\t        case 1:\r\n\t          bits = 0;\r\n\t          maxpower = Math.pow(2, 16);\r\n\t          power = 1;\r\n\t          while (power != maxpower) {\r\n\t            resb = data.val & data.position;\r\n\t            data.position >>= 1;\r\n\t            if (data.position == 0) {\r\n\t              data.position = 32768;\r\n\t              data.val = data.string.charCodeAt(data.index++);\r\n\t            }\r\n\t            bits |= (resb > 0 ? 1 : 0) * power;\r\n\t            power <<= 1;\r\n\t          }\r\n\t          dictionary[dictSize++] = f(bits);\r\n\t          c = dictSize - 1;\r\n\t          enlargeIn--;\r\n\t          break;\r\n\t        case 2:\r\n\t          return result;\r\n\t      }\r\n\t\r\n\t      if (enlargeIn == 0) {\r\n\t        enlargeIn = Math.pow(2, numBits);\r\n\t        numBits++;\r\n\t      }\r\n\t\r\n\t      if (dictionary[c]) {\r\n\t        entry = dictionary[c];\r\n\t      } else {\r\n\t        if (c === dictSize) {\r\n\t          entry = w + w[0];\r\n\t        } else {\r\n\t          return null;\r\n\t        }\r\n\t      }\r\n\t      result += entry;\r\n\t\r\n\t      // Add w+entry[0] to the dictionary.\r\n\t      dictionary[dictSize++] = w + entry[0];\r\n\t      enlargeIn--;\r\n\t\r\n\t      w = entry;\r\n\t\r\n\t      if (enlargeIn == 0) {\r\n\t        enlargeIn = Math.pow(2, numBits);\r\n\t        numBits++;\r\n\t      }\r\n\t\r\n\t    }\r\n\t  }\r\n\t};\r\n\t\r\n\texports = module.exports = LZString;\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar ManisStream = __webpack_require__(11);\r\n\tvar ManisEvents = __webpack_require__(57);\r\n\tvar crypto = __webpack_require__(60);\r\n\tvar ManisFunctions = __webpack_require__(27);\r\n\tvar ManisResponse = __webpack_require__(26);\r\n\tvar ErrorCode = __webpack_require__(28);\r\n\tvar P2P = __webpack_require__(32);\r\n\t\r\n\tconst CHECK_RESOURCES_URL = \"/user/join\";\r\n\tconst JOIN_BY_ANONYMOUS_URL = \"/loginClientAnonymous\";\r\n\tconst JOIN_ROOM_URL = \"/user/joinConferenceClient\";\r\n\tconst GRANT_ADMIN = \"/user/grantAdmin\";\r\n\tconst FETCH_ADMIN = \"/user/getModerator\";\r\n\tconst CREATE_OR_JOIN_CONFERENCE = '/clientApi/createOrJoinConference';\r\n\tconst DELAY_ROOM_PATH = '/clientApi/conferences/extend/';\r\n\tconst CONFIG_RESOURCE_UPDATE = '/clientApi/conference/resources';\r\n\tvar ms = __webpack_require__(29);\r\n\t\r\n\tconst QVGAConstraints = {width: {exact: 320}, height: {exact: 180}};\r\n\tconst VGAConstraints = {width: {exact: 960}, height: {exact: 540}};\r\n\tconst HDConstraints = {width: {exact: 1280}, height: {exact: 720}};\r\n\tconst FullHDConstraints = {width: {exact: 1920}, height: {exact: 1080}};\r\n\t\r\n\tconst XGAConstraints_240 = {width: {exact: 320}, height: {exact: 240}};\r\n\tconst XGAConstraints_480 = {width: {exact: 640}, height: {exact: 480}};\r\n\tconst XGAConstraints_768 = {width: {exact: 1024}, height: {exact: 768}};\r\n\tvar constraints =\r\n\t{\r\n\t  video: FullHDConstraints,\r\n\t  audio: {\r\n\t      // mandatory: {}, optional: [\r\n\t      // {googEchoCancellation: true},\r\n\t      // {googAutoGainControl: true},\r\n\t      // {googNoiseSupression: true},\r\n\t      // {googHighpassFilter: true},\r\n\t      // {googNoisesuppression2: true},\r\n\t      // {googEchoCancellation2: true},\r\n\t      // {googAutoGainControl2: true}\r\n\t      // ]368\r\n\t  }\r\n\t};\r\n\twindow.constraints = constraints;\r\n\t\r\n\t/**\r\n\t * 初始化默认输入设备\r\n\t */\r\n\tfunction initDefaultInputDevices(audioInput, videoInput, audioOut) {\r\n\t  if (audioInput) {\r\n\t    window.currentAudioInputDeviceId = audioInput;\r\n\t  }\r\n\t  if (videoInput) {\r\n\t    window.currentVideoInputDeviceId = videoInput;\r\n\t  }\r\n\t  if (audioOut) {\r\n\t    window.currentAudioOutputDeviceId = audioInput;\r\n\t  }\r\n\t  navigator.mediaDevices.enumerateDevices().then(gotInputDevices).catch(handleError);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param error\r\n\t */\r\n\tfunction handleError(error) {\r\n\t  console.log('navigator.getUserMedia error: ', error);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param devicesInfo\r\n\t * @returns {*}\r\n\t */\r\n\tfunction gotInputDevices(devicesInfo) {\r\n\t  for (var i = 0; i !== devicesInfo.length; ++i) {\r\n\t    var deviceInfo = devicesInfo[i];\r\n\t    if (config.debug == true) {\r\n\t      console.log(deviceInfo);\r\n\t    }\r\n\t    if (deviceInfo.kind == 'videoinput' && !window.currentVideoInputDeviceId) {\r\n\t      window.currentVideoInputDeviceId = deviceInfo.deviceId;\r\n\t    } else if (deviceInfo.kind == 'audioinput' && !window.currentAudioInputDeviceId) {\r\n\t      window.currentAudioInputDeviceId = deviceInfo.deviceId;\r\n\t    }\r\n\t  }\r\n\t}\r\n\t\r\n\t\r\n\tfunction generateDefaultConstraints(audioOnly) {\r\n\t  var constraints = {\r\n\t    audio: {},\r\n\t    video: {},\r\n\t  };\r\n\t  if (audioOnly == true) {\r\n\t    constraints.video = false;\r\n\t  } else {\r\n\t    if (config.resolution) {\r\n\t      var defaultResolution = config.resolution;\r\n\t      switch (defaultResolution) {\r\n\t        case 1080:\r\n\t        case '1080':\r\n\t          constraints.video = FullHDConstraints;\r\n\t          config.videoBandwidth = (config.videoBandwidth == 1024 * 2 * 2) ? config.videoBandwidth : 1024 * 2;\r\n\t          break;\r\n\t        case 720:\r\n\t        case '720':\r\n\t          constraints.video = HDConstraints;\r\n\t          config.videoBandwidth = (config.videoBandwidth == 512 * 2 * 2) ? config.videoBandwidth : 512 * 2;\r\n\t          break;\r\n\t        case 768:\r\n\t        case '768':\r\n\t          constraints.video = XGAConstraints_768;\r\n\t          config.videoBandwidth = (config.videoBandwidth == 512 * 2 * 2) ? config.videoBandwidth : 512 * 2;\r\n\t          break;\r\n\t        case 540:\r\n\t        case '540':\r\n\t          constraints.video = VGAConstraints;\r\n\t          config.videoBandwidth = (config.videoBandwidth == 256 * 2 * 2) ? config.videoBandwidth : 256 * 2;\r\n\t          break;\r\n\t        case 480:\r\n\t        case '480':\r\n\t          constraints.video = XGAConstraints_480;\r\n\t          config.videoBandwidth = (config.videoBandwidth == 256 * 2 * 2) ? config.videoBandwidth : 256 * 2;\r\n\t          break;\r\n\t        case 240:\r\n\t        case '240':\r\n\t          constraints.video = XGAConstraints_240;\r\n\t          config.videoBandwidth = (config.videoBandwidth == 128 * 2 * 2) ? config.videoBandwidth : 128 * 2;\r\n\t          break;\r\n\t        case 180:\r\n\t        case '180':\r\n\t          constraints.video = QVGAConstraints;\r\n\t          config.videoBandwidth = (config.videoBandwidth == 128 * 2 * 2) ? config.videoBandwidth : 128 * 2;\r\n\t          break;\r\n\t        default:\r\n\t          constraints.video = HDConstraints;\r\n\t          config.videoBandwidth = (config.videoBandwidth == 512 * 2 * 2) ? config.videoBandwidth : 512 * 2;\r\n\t      }\r\n\t    }\r\n\t    if (constraints.video && window.currentVideoInputDeviceId) {\r\n\t      // constraints.video.deviceId = window.currentVideoInputDeviceId;\r\n\t      constraints.video.deviceId = window.currentVideoInputDeviceId ? {exact: window.currentVideoInputDeviceId} : undefined;\r\n\t    }\r\n\t  }\r\n\t  if (window.currentAudioInputDeviceId) {\r\n\t    // constraints.audio.deviceId = window.currentAudioInputDeviceId;\r\n\t    constraints.audio.deviceId = window.currentAudioInputDeviceId ? {exact: window.currentAudioInputDeviceId} : undefined;\r\n\t  }\r\n\t  window.constraints = constraints;\r\n\t  return constraints;\r\n\t}\r\n\t\r\n\t/**\r\n\t * 会控创建会议室回调(optional)\r\n\t * @param response\r\n\t */\r\n\tfunction createRoomInCtlCallback(response) {\r\n\t  console.log('get create room in ctl response :', response);\r\n\t}\r\n\t\r\n\tfunction grantAdminCallBack(response) {\r\n\t  console.log('get grant admin response :', response);\r\n\t}\r\n\t\r\n\tfunction validRoomCallBack(response) {\r\n\t  console.log('valid room response :', response);\r\n\t}\r\n\t\r\n\tfunction fetchAdminCallBack(response) {\r\n\t  console.log('fetch admin response:', response);\r\n\t}\r\n\t\r\n\twindow.validRoomCallBack = validRoomCallBack;\r\n\twindow.fetchAdminCallBack = fetchAdminCallBack;\r\n\twindow.createRoomInCtlCallback = createRoomInCtlCallback;\r\n\twindow.grantAdminCallBack = grantAdminCallBack;\r\n\t\r\n\t/**\r\n\t * 获取会议室的focus,后续可能会修改创建规则\r\n\t * @return {null}\r\n\t */\r\n\tfunction getFocusComponent() {\r\n\t  var focusComponent = (config.hosts && config.hosts.focus) ? config.hosts.focus : null;\r\n\t  if (!focusComponent) {\r\n\t    focusComponent = 'ofmeet-focus.' + manisConfg.messageServer;\r\n\t  }\r\n\t  return focusComponent;\r\n\t};\r\n\t\r\n\t/**\r\n\t * 退出会议室iq\r\n\t * @returns {*}\r\n\t */\r\n\tfunction leaveConferenceRoom() {\r\n\t  var elem = $iq({to: roomName, type: 'set'});\r\n\t  elem.c('conference', {\r\n\t    xmlns: 'http://jitsi.org/protocol/focus',\r\n\t    room: roomName,\r\n\t    type: 'leave'\r\n\t  }).c('property', {\r\n\t    name: 'exitCode',\r\n\t    value: window.exitCode\r\n\t  });\r\n\t  elem.up();\r\n\t  // console.log('1111111111111122222222222222=======willSendLeavePresence============', elem.tree())\r\n\t  connection.sendIQ(elem, function (success) {\r\n\t    console.log('leave room complete : ', success)\r\n\t  }, function (error) {\r\n\t    console.log('leave room failed : ', error);\r\n\t  });\r\n\t};\r\n\t\r\n\t/**\r\n\t * 生成创建会议室的iq消息\r\n\t * @param connResp\r\n\t * @return {*}\r\n\t */\r\n\tfunction createConferenceIq(connResp, isJoin) {\r\n\t  var elem = $iq({to: connResp.focusJid, type: 'set', from: connection.jid});\r\n\t  elem.c('conference', {\r\n\t    xmlns: 'http://jitsi.org/protocol/focus',\r\n\t    room: connResp.r ? connResp.r + '@conference.' + manisConfg.messageServer : null\r\n\t  });\r\n\t  if (connResp.vb !== undefined) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'bridge', value: connResp.vb})\r\n\t      .up();\r\n\t  }\r\n\t  if (connResp.autoRecord !== undefined) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'autoRecord', value: connResp.autoRecord})\r\n\t      .up();\r\n\t  }\r\n\t  if (config.channelLastN !== undefined) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'channelLastN', value: config.channelLastN})\r\n\t      .up();\r\n\t  }\r\n\t  if (config.adaptiveLastN !== undefined) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'adaptiveLastN', value: config.adaptiveLastN})\r\n\t      .up();\r\n\t  }\r\n\t  if (config.adaptiveSimulcast !== undefined) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'adaptiveSimulcast', value: config.adaptiveSimulcast})\r\n\t      .up();\r\n\t  }\r\n\t  if (config.openSctp !== undefined) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'openSctp', value: config.openSctp})\r\n\t      .up();\r\n\t  }\r\n\t  if (config.enableFirefoxSupport !== undefined) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'enableFirefoxHacks', value: config.enableFirefoxSupport})\r\n\t      .up();\r\n\t  }\r\n\t  if (connection.resource !== undefined) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'endPoint', value: connection.resource})\r\n\t      .up();\r\n\t  }\r\n\t  if (config.nat !== undefined) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'nat', value: config.nat})\r\n\t      .up();\r\n\t  }\r\n\t  elem.c(\r\n\t    'property', {\r\n\t      name: 'simulcastMode',\r\n\t      value: 'rewriting'\r\n\t    }).up();\r\n\t  if (connResp.audioEncoding) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'audioEncoding', value: connResp.audioEncoding})\r\n\t      .up();\r\n\t  }\r\n\t  if (connResp.videoEncoding) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'videoEncoding', value: connResp.videoEncoding})\r\n\t      .up();\r\n\t  }\r\n\t  if (config.nickname) {\r\n\t    elem.c(\r\n\t      'property',\r\n\t      {name: 'nick', value: config.nickname})\r\n\t      .up();\r\n\t  }\r\n\t  elem.c(\r\n\t    'property', {\r\n\t      name: 'action',\r\n\t      value: isJoin ? 'join' : ''\r\n\t    }).up();\r\n\t  elem.up();\r\n\t  return elem;\r\n\t}\r\n\t\r\n\t/**\r\n\t * 发送iq消息创建会议室\r\n\t * @param connResp\r\n\t * @param successCallback\r\n\t * @param errorCallback\r\n\t * @param mediaStream\r\n\t */\r\n\tfunction doJoinRoom(connResp, successCallback, errorCallback, mediaStream, constraints) {\r\n\t  // Send create conference IQ\r\n\t  var that = this;\r\n\t  var iq = createConferenceIq(connResp, true);\r\n\t  console.log('generate create room iq : ', iq.tree());\r\n\t  connection.sendIQ(iq, function (result) {\r\n\t    console.info('send iq complete : ', result);\r\n\t    if ('true' == $(result).find('conference').attr('ready')) {\r\n\t      // room is ready\r\n\t      var focusJid = $(result).attr('from');\r\n\t      window.focusJid = focusJid;\r\n\t      doJoinAfterFocus(successCallback, errorCallback, mediaStream, constraints, connResp);\r\n\t    } else {\r\n\t      setTimeout(function () {\r\n\t        doJoinRoom(connResp, successCallback, errorCallback, mediaStream, constraints);\r\n\t      }, 1000);\r\n\t      return;\r\n\t    }\r\n\t\r\n\t  }, function (error) {\r\n\t    console.error('send iq failure : ', error);\r\n\t    setTimeout(function () {\r\n\t      doJoinRoom(connResp, successCallback, errorCallback, mediaStream, constraints);\r\n\t    }, 1000);\r\n\t  });\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param successCallback\r\n\t * @param errorCallback\r\n\t * @param mediaStream\r\n\t * @param connResp\r\n\t */\r\n\tfunction doJoinAfterFocus(successCallback, errorCallback, mediaStream, constraints, connResp) {\r\n\t  try {\r\n\t    var roomJid = roomName + '/' + connection.resource;\r\n\t    connection.emuc.doJoin(roomJid);\r\n\t    connection.emuc.addAudioInfoToPresence((constraints.audio == false));\r\n\t    connection.emuc.addVideoInfoToPresence((constraints.video == false));\r\n\t    var _resource = Strophe.getResourceFromJid(connection.jid);\r\n\t    var myself = {\r\n\t      info: {\r\n\t        nickname: config.nickname ? config.nickname : manisConfg.mUsername,\r\n\t        resource: _resource,\r\n\t        roomNumber: connResp.r,\r\n\t        roomPassword: config.roomPassword ? config.roomPassword : '',\r\n\t        jid: connection.jid,\r\n\t      },\r\n\t      stream: connection.jingle.localVideo,\r\n\t      status: ManisFunctions.generateStatusNode(_resource),\r\n\t      constraints: constraints,\r\n\t      roomName: connResp.r,\r\n\t      hands_up: false,\r\n\t      is_moderator: (connection.jid == config.moderatorJid),\r\n\t      audio_only: (constraints.video == false),\r\n\t      video_muted: (constraints.video == false),\r\n\t    };\r\n\t    successCallback({\r\n\t      code: ManisResponse.code_200,\r\n\t      msg: ManisResponse.join_room_success,\r\n\t      response: myself,\r\n\t      errorCode: ErrorCode.no_error\r\n\t    });\r\n\t  } catch (e) {\r\n\t    errorCallback({\r\n\t      code: ManisResponse.code_500,\r\n\t      msg: ManisResponse.join_room_failed,\r\n\t      errorCode: ErrorCode.conference_room_participant_failed\r\n\t    });\r\n\t  }\r\n\t\r\n\t}\r\n\t\r\n\tfunction getLocalStream(constraints, successCallback, errorCallback) {\r\n\t  console.log('try to get user media with constraints: ', constraints);\r\n\t  ManisStream.getMedia(constraints, function (mediaStream) {\r\n\t    config.currentResolution = constraints.video ? constraints.video.height.exact : null;\r\n\t    successCallback(mediaStream);\r\n\t  }, function (error) {\r\n\t    if (error.name == 'DevicesNotFoundError' || error.constructor.name == 'DevicesNotFoundError') {\r\n\t      errorCallback({\r\n\t        code: ManisResponse.code_404,\r\n\t        msg: ManisResponse.without_usefull_video_device,\r\n\t        errorCode: ErrorCode.media_device_except\r\n\t      });\r\n\t      return;\r\n\t    } else if (error.name == 'OverconstrainedError' || error.constructor.name == 'OverconstrainedError') {\r\n\t      if(constraints.video){\r\n\t        if (constraints.video.height.exact > 180) {\r\n\t           var resolution = ms.getResolution();\r\n\t           for (var i = 0; i < resolution.length - 1; i++) {\r\n\t             if (constraints.video.height.exact == resolution[i].height.exact) {\r\n\t               var newConstraints = ManisFunctions.getConstraintsByResolution((constraints.audio != false),\r\n\t                   (constraints.video != false), ((constraints.audio && constraints.audio.deviceId) ? constraints.audio.deviceId.exact : undefined),\r\n\t                   ((constraints.video && constraints.video.deviceId) ? constraints.video.deviceId.exact : undefined), resolution[i + 1].height.exact);\r\n\t               getLocalStream(newConstraints, successCallback, errorCallback);\r\n\t             }\r\n\t           }\r\n\t        } else {\r\n\t          console.error(error);\r\n\t          errorCallback({\r\n\t            code: ManisResponse.code_402,\r\n\t            msg: ManisResponse.out_of_video_device_resolution,\r\n\t            errorCode: ErrorCode.media_device_resolution_nonsupport\r\n\t          });\r\n\t          return;\r\n\t        }\r\n\t      }\r\n\t    } else {\r\n\t      console.error(error);\r\n\t      errorCallback({\r\n\t        code: ManisResponse.code_400,\r\n\t        msg: ManisResponse.get_user_media_failed,\r\n\t        error: error,\r\n\t        errorCode: ErrorCode.media_device_get_local_media_failed\r\n\t      });\r\n\t      return;\r\n\t    }\r\n\t  });\r\n\t}\r\n\t\r\n\t/**\r\n\t * 加入房间\r\n\t * @param connResp\r\n\t * @param successCallback\r\n\t * @param errorCallback\r\n\t * @param audioOnly\r\n\t * @param localMediaStream\r\n\t * @param withoutStream\r\n\t */\r\n\tfunction joinRoom(connResp, successCallback, errorCallback, audioOnly, localMediaStream, withoutStream) {\r\n\t  var isModerator = (connection.jid == config.moderatorJid);\r\n\t  ManisFunctions.setAdmin(isModerator);\r\n\t  connection.emuc.addConfigRoleToPresence(config.role);\r\n\t  connection.emuc.addIsModeratorToPresence(isModerator);\r\n\t  connection.emuc.addAvartarToPresence(config.photo || '');\r\n\t  if (window.connectType == 'p2p') {\r\n\t    P2P.join(connResp.r, successCallback, errorCallback);\r\n\t  } else {\r\n\t    if (!localMediaStream) {\r\n\t      if (withoutStream) {\r\n\t        // just join room,without any media stream\r\n\t        var withAudio = false;\r\n\t        var withVideo = false;\r\n\t        var audioIn = undefined;\r\n\t        var videoIn = undefined;\r\n\t        var constraints = ManisFunctions.getConstraintsByResolution(withAudio, withVideo, audioIn, videoIn, config.resolution);\r\n\t        doJoinRoom(connResp, successCallback, errorCallback, localMediaStream, constraints);\r\n\t      } else {\r\n\t      // var constraints = generateDefaultConstraints(audioOnly);\r\n\t      var withAudio = true;\r\n\t      var withVideo = !(audioOnly == true);\r\n\t      var audioIn = (window.currentAudioInputDeviceId) ? window.currentAudioInputDeviceId : undefined;\r\n\t      var videoIn = (window.currentVideoInputDeviceId) ? window.currentVideoInputDeviceId : undefined;\r\n\t      var constraints = ManisFunctions.getConstraintsByResolution(withAudio, withVideo, audioIn, videoIn, config.resolution);\r\n\t      getLocalStream(constraints, function (mediaStream) {\r\n\t        console.log(\"=========================getLocalStream====================\",mediaStream);\r\n\t        if (window.webkitMediaStream) {\r\n\t          var audioStream = new webkitMediaStream();\r\n\t          var videoStream = new webkitMediaStream();\r\n\t          var audioTracks = mediaStream.getAudioTracks();\r\n\t          var videoTracks = mediaStream.getVideoTracks();\r\n\t          for (var i = 0; i < audioTracks.length; i++) {\r\n\t            audioStream.addTrack(audioTracks[i]);\r\n\t          }\r\n\t          for (i = 0; i < videoTracks.length; i++) {\r\n\t            videoStream.addTrack(videoTracks[i]);\r\n\t          }\r\n\t          connection.jingle.localAudio = audioStream;\r\n\t          connection.jingle.localVideo = videoStream;\r\n\t        } else {\r\n\t          connection.jingle.localAudio = mediaStream;\r\n\t          connection.jingle.localVideo = mediaStream;\r\n\t        }\r\n\t        // 发送IQ消息到xmpp进入会议室.\r\n\t        // mediaStream.src = URL.createObjectURL(mediaStream);\r\n\t        mediaStream.ssrc = window.localStreamSSRC;\r\n\t        doJoinRoom(connResp, successCallback, errorCallback, mediaStream, constraints);\r\n\t      }, function (error) {\r\n\t        if (!audioOnly) {\r\n\t          console.log('get local video media stream failed, try audio only model');\r\n\t          $(document).trigger('manis.on.switch.to.audio.model', [!audioOnly]);\r\n\t          joinRoom(connResp, successCallback, errorCallback, true, localMediaStream, withoutStream);\r\n\t          return;\r\n\t        } else {\r\n\t          console.error(error);\r\n\t          errorCallback(error);\r\n\t        }\r\n\t      });\r\n\t      }\r\n\t    } else {\r\n\t      if (window.webkitMediaStream) {\r\n\t        var audioStream = new webkitMediaStream();\r\n\t        var videoStream = new webkitMediaStream();\r\n\t        var audioTracks = localMediaStream.getAudioTracks();\r\n\t        var videoTracks = localMediaStream.getVideoTracks();\r\n\t        for (var i = 0; i < audioTracks.length; i++) {\r\n\t          audioStream.addTrack(audioTracks[i]);\r\n\t        }\r\n\t        for (i = 0; i < videoTracks.length; i++) {\r\n\t          videoStream.addTrack(videoTracks[i]);\r\n\t        }\r\n\t        connection.jingle.localAudio = audioStream;\r\n\t        connection.jingle.localVideo = videoStream;\r\n\t      } else {\r\n\t        connection.jingle.localAudio = localMediaStream;\r\n\t        connection.jingle.localVideo = localMediaStream;\r\n\t      }\r\n\t      // 发送IQ消息到xmpp进入会议室.\r\n\t      // mediaStream.src = URL.createObjectURL(mediaStream);\r\n\t      localMediaStream.ssrc = window.localStreamSSRC;\r\n\t      doJoinRoom(connResp, successCallback, errorCallback, localMediaStream, {});\r\n\t    }\r\n\t  }\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * 创建会议室: (一) 调用会控创建会议室\r\n\t *\r\n\t * @param userId\r\n\t * @param jid\r\n\t * @param roomPassword\r\n\t * @param comperePassword\r\n\t * @param successCallback\r\n\t * @param errorCallback\r\n\t * @param server\r\n\t */\r\n\tfunction createRoom(userId, jid, roomPassword, comperePassword, successCallback, errorCallback, server) {\r\n\t  var _header = ManisFunctions.authoredHeader();\r\n\t  try {\r\n\t    $.ajax({\r\n\t      url: server,\r\n\t      // dataType: 'jsonp',\r\n\t      // jsonpCallback: 'createRoomInCtlCallback',\r\n\t      data: {u: userId, j: jid, p: roomPassword, op: comperePassword},\r\n\t      headers: _header,\r\n\t      type: 'GET',\r\n\t      async: false,\r\n\t      timeout: 2000,\r\n\t      success: function (response, textStatus, xOptions) {\r\n\t        // console.info('get create room in ctl result : ', response, 'xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t        if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n\t          if (response.code == 500) {\r\n\t            // conference exist\r\n\t            console.info('room exist in ctl do join: ', response);\r\n\t            validRoom(response.obj.r, roomPassword, successCallback, errorCallback)\r\n\t          } else if (response.code == 200) {\r\n\t            ManisFunctions.setAdmin(true);\r\n\t            // create room in ctl success\r\n\t            console.info('create room in ctl success: ', response);\r\n\t            // room name   100220006@conference.192.168.5.60\r\n\t            if (response.obj.moderator != undefined) {\r\n\t              var isModerator = response.obj.moderator == 'true';\r\n\t              connection.emuc.addIsModeratorToPresence(isModerator);\r\n\t            }\r\n\t            config.gw = response.obj.gw;\r\n\t            config.title = response.obj.title;\r\n\t            window.roomName = response.obj.r + '@conference.' + manisConfg.messageServer;\r\n\t            window.config.focusUserJid = 'focus@' + manisConfg.messageServer;\r\n\t            joinRoom(response.obj, successCallback, errorCallback);\r\n\t          }\r\n\t        } else {\r\n\t          // create room in ctl failure\r\n\t          errorCallback({\r\n\t            code: ManisResponse.code_403,\r\n\t            msg: ManisResponse.out_of_source_limit\r\n\t          });\r\n\t        }\r\n\t      },\r\n\t      error: function (xOptions, textStatus) {\r\n\t        console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t        errorCallback({\r\n\t          code: ManisResponse.code_500,\r\n\t          msg: ManisResponse.create_room_failed\r\n\t        });\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t  catch (e) {\r\n\t    console.error('xhr request failure with error : ', e);\r\n\t    errorCallback({\r\n\t      code: ManisResponse.code_500,\r\n\t      msg: ManisResponse.create_room_failed\r\n\t    });\r\n\t  }\r\n\t\r\n\t};\r\n\t\r\n\tfunction fetchAdmin(participant, roomName, password, successCallback, errorCallback) {\r\n\t  var md5 = crypto.createHash('md5');\r\n\t  md5.update(password);\r\n\t  var md5Password = md5.digest('hex');\r\n\t  var _header = ManisFunctions.authoredHeader();\r\n\t  // try {\r\n\t  $.ajax({\r\n\t    url: window.serverPath + FETCH_ADMIN,\r\n\t    dataType: 'json',\r\n\t    // jsonpCallback: 'fetchAdminCallBack',\r\n\t    data: {r: roomName, j: participant.jid, p: md5Password},\r\n\t    headers: _header,\r\n\t    type: 'GET',\r\n\t    // async: false,\r\n\t    timeout: 2000,\r\n\t    success: function (response, textStatus, xOptions) {\r\n\t      // if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n\t      if (response.mcode == 200) {\r\n\t        ManisFunctions.setAdmin(true);\r\n\t        var msg = $msg({to: participant.jid, type: 'chat'});//grant\r\n\t        msg.c('body', {\r\n\t          xmlns: 'http://igniterealtime.org/protocol/grantAdmin',\r\n\t          jid: participant.jid\r\n\t        }).t(\"true\").up();\r\n\t        window.connection.send(msg);\r\n\t        window.connection.emuc.addConfigRoleToPresence(config.role);\r\n\t        window.connection.emuc.addIsModeratorToPresence(ManisFunctions.isAdmin());\r\n\t        window.connection.emuc.sendPresence();\r\n\t        successCallback({\r\n\t          code: ManisResponse.code_200,\r\n\t          msg: ManisResponse.fetch_compere_success,\r\n\t          errorCode: ErrorCode.no_error\r\n\t        });\r\n\t      }else if(response.mcode == 703){\r\n\t        errorCallback({\r\n\t          code: response.mcode,\r\n\t          msg: ManisResponse.fetch_compere_error,\r\n\t          errorCode: ErrorCode.fetch_admin_failed_wrong_password\r\n\t        });\r\n\t      }else if(response.mcode == 702){\r\n\t          errorCallback({\r\n\t              code: response.mcode,\r\n\t              msg: ManisResponse.fetch_compere_failed_exist,\r\n\t              errorCode: ErrorCode.fetch_admin_failed_moderator_exist\r\n\t          });\r\n\t      }else {\r\n\t        errorCallback({\r\n\t          code: response.mcode,\r\n\t          msg: ManisResponse.fetch_compere_error,\r\n\t          errorCode: ErrorCode.fetch_admin_failed\r\n\t        });\r\n\t      }\r\n\t      // } else {\r\n\t      //   errorCallback({\r\n\t      //     code: ManisResponse.code_400,\r\n\t      //     msg: ManisResponse.fetch_compere_error\r\n\t      //   });\r\n\t      // }\r\n\t    },\r\n\t    error: function (xOptions, textStatus) {\r\n\t      errorCallback({\r\n\t        code: ManisResponse.code_500,\r\n\t        msg: ManisResponse.network_error,\r\n\t        errorCode: ErrorCode.api_fetch_failed\r\n\t      });\r\n\t    }\r\n\t  });\r\n\t  // } catch (e) {\r\n\t  //   errorCallBack({\r\n\t  //     code: ManisResponse.code_500,\r\n\t  //     msg: ManisResponse.network_error\r\n\t  //   });\r\n\t  // }\r\n\t};\r\n\t\r\n\tfunction grantAdmin(participant, roomName, successCallback, errorCallback) {\r\n\t  var _header = ManisFunctions.authoredHeader();\r\n\t  // try {\r\n\t  $.ajax({\r\n\t    url: window.serverPath + GRANT_ADMIN,\r\n\t    dataType: 'json',\r\n\t    // jsonpCallback: 'grantAdminCallBack',\r\n\t    data: {r: roomName, j: participant.jid, i: config.mUserId},\r\n\t    headers: _header,\r\n\t    type: 'GET',\r\n\t    // async: false,\r\n\t    timeout: 2000,\r\n\t    success: function (response) {\r\n\t      // if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n\t      if (response.code == 200) {\r\n\t        ManisFunctions.setAdmin(false);\r\n\t        // console.log('grant admin success');\r\n\t        var _jid = window.connection.emuc.roomjid + '/' + Strophe.getResourceFromJid(participant.jid)\r\n\t        var msg = $msg({to: _jid, type: 'chat'});//grant\r\n\t        msg.c('body', {\r\n\t          xmlns: 'http://igniterealtime.org/protocol/grantAdmin',\r\n\t          jid: _jid\r\n\t        }).t(\"true\").up();\r\n\t        window.connection.send(msg);\r\n\t        window.connection.emuc.addConfigRoleToPresence(config.role);\r\n\t        window.connection.emuc.addIsModeratorToPresence(ManisFunctions.isAdmin());\r\n\t        window.connection.emuc.sendPresence();\r\n\t        // update myself 'is_moderator' status\r\n\t        for (var i = 0; i < window.participants.length; i++) {\r\n\t          var pt = window.participants[i];\r\n\t          if (pt.jid == connection.jid) {\r\n\t            pt.is_moderator = ManisFunctions.isAdmin();\r\n\t            window.participants[i] = pt;\r\n\t          }\r\n\t        }\r\n\t        successCallback({\r\n\t          code: ManisResponse.code_200,\r\n\t          msg: ManisResponse.transferc_compere_success,\r\n\t          errorCode: ErrorCode.no_error\r\n\t        });\r\n\t      } else {\r\n\t        errorCallback({\r\n\t          code: ManisResponse.code_400,\r\n\t          msg: ManisResponse.transferc_compere_failed,\r\n\t          errorCode: ErrorCode.grant_admin_participant_failed\r\n\t        })\r\n\t      }\r\n\t      // } else {\r\n\t      //   errorCallback({\r\n\t      //     code: ManisResponse.code_403,\r\n\t      //     msg: ManisResponse.out_of_authority\r\n\t      //   })\r\n\t      // }\r\n\t    },\r\n\t    error: function (xOptions, textStatus) {\r\n\t      errorCallback({\r\n\t        code: ManisResponse.code_500,\r\n\t        msg: ManisResponse.network_error,\r\n\t        errorCode: ErrorCode.api_fetch_failed\r\n\t      });\r\n\t    }\r\n\t  });\r\n\t  // } catch (e) {\r\n\t  //   errorCallback({\r\n\t  //     code: ManisResponse.code_500,\r\n\t  //     msg: ManisResponse.network_error\r\n\t  //   });\r\n\t  // }\r\n\t};\r\n\t\r\n\tfunction setAudioMute(resource, mute, successCallback, errorCallback) {\r\n\t  var participant = ManisFunctions.getUserByResource(resource);\r\n\t  var iqToFocus = $iq({to: window.focusJid, type: 'set'}).c('mute', {\r\n\t    xmlns: 'http://jitsi.org/jitmeet/audio',\r\n\t    jid: participant.jid,\r\n\t    userjid: participant.jid\r\n\t  }).t(mute.toString()).up();\r\n\t  window.connection.sendIQ(iqToFocus, function (success) {\r\n\t    if (participant.jid == window.self.jid) {\r\n\t      ManisFunctions.setAudioMute(mute);\r\n\t    }\r\n\t    successCallback({\r\n\t      code: ManisResponse.code_200,\r\n\t      msg: ManisResponse.manage_set_audio_mute_success,\r\n\t      response: mute,\r\n\t      errorCode: ErrorCode.no_error\r\n\t    });\r\n\t  }, function (error) {\r\n\t    errorCallback({\r\n\t      code: ManisResponse.code_400,\r\n\t      msg: ManisResponse.manage_set_audio_mute_failed,\r\n\t      errorCode: ErrorCode.operate_someone_audio_failed\r\n\t    })\r\n\t  });\r\n\t};\r\n\t\r\n\tfunction setVideoMute(resource, mute, successCallback, errorCallback) {\r\n\t  var participant = ManisFunctions.getUserByResource(resource);\r\n\t  var iqToFocus = $iq({to: window.focusJid, type: 'set'}).c('mute', {\r\n\t    xmlns: 'http://jitsi.org/jitmeet/video',\r\n\t    jid: participant.jid,\r\n\t    userjid: participant.jid\r\n\t  }).t(mute.toString()).up();\r\n\t  window.connection.sendIQ(iqToFocus, function (success) {\r\n\t    if (participant.jid == window.self.jid) {\r\n\t      ManisFunctions.setVideoMute(mute);\r\n\t      $(document).trigger('onmute.video.muc', mute);\r\n\t    }\r\n\t    successCallback({\r\n\t      code: ManisResponse.code_200,\r\n\t      msg: ManisResponse.set_video_toggle_complete,\r\n\t      response: mute,\r\n\t      errorCode: ErrorCode.no_error\r\n\t    });\r\n\t  }, function (error) {\r\n\t    errorCallback({\r\n\t      code: ManisResponse.code_400,\r\n\t      msg: ManisResponse.set_video_toggle_failed,\r\n\t      errorCode: ErrorCode.operate_someone_video_failed\r\n\t    })\r\n\t  });\r\n\t};\r\n\t\r\n\t\r\n\tfunction eject(participant, successCallback, errorCallback) {\r\n\t  try {\r\n\t    var msg = $msg({to: participant.jid, type: 'chat'});\r\n\t    msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/eject', jid: participant.jid}).t(\"true\").up();\r\n\t    window.connection.send(msg);\r\n\t    successCallback({\r\n\t      code: ManisResponse.code_200,\r\n\t      msg: ManisResponse.remove_participant_complete,\r\n\t      errorCode: ErrorCode.no_error\r\n\t    });\r\n\t  } catch (e) {\r\n\t    errorCallback({\r\n\t      code: ManisResponse.code_400,\r\n\t      msg: ManisResponse.remove_participant_failed,\r\n\t      errorCode: ErrorCode.eject_participant_failed\r\n\t    });\r\n\t  }\r\n\t};\r\n\t\r\n\tfunction validRoom(roomName, roomPassword, successCallBack, errorCallback) {\r\n\t  var _header = ManisFunctions.authoredHeader();\r\n\t  try {\r\n\t    $.ajax({\r\n\t      url: window.serverPath + JOIN_ROOM_URL,\r\n\t      // dataType: 'jsonp',\r\n\t      // jsonpCallback: 'validRoomCallBack',\r\n\t      data: {r: roomName, p: roomPassword, u: manisConfg.mUserId, j: connection.jid},\r\n\t      dataType: 'json',\r\n\t      headers: _header,\r\n\t      type: 'GET',\r\n\t      // async: true,\r\n\t      timeout: 2000,\r\n\t      success: function (response, textStatus, xOptions) {\r\n\t        if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n\t          if (response.code == 200) {\r\n\t            console.log('success join room :', roomName, response);\r\n\t            var isModerator = (response.obj.moderator ? response.obj.moderator == connection.jid : ManisFunctions.isAdmin());\r\n\t            if (response.obj.moderator != undefined) {\r\n\t              connection.emuc.addIsModeratorToPresence(isModerator);\r\n\t              connection.emuc.sendPresence();\r\n\t            }\r\n\t            // ③ 加入会议\r\n\t            window.roomName = roomName + '@conference.' + manisConfg.messageServer;\r\n\t            var resp = response;\r\n\t            resp.r = roomName;\r\n\t            resp.vb = response.obj.vb;\r\n\t            config.gw = response.obj.gw;\r\n\t            config.title = response.obj.title;\r\n\t            ManisFunctions.setAdmin(isModerator);\r\n\t            joinRoom(resp, successCallBack, errorCallback);\r\n\t          } else if (response.code == 401) {\r\n\t            // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t            errorCallback({\r\n\t              code: ManisResponse.code_422,\r\n\t              msg: ManisResponse.room_password_expect\r\n\t            });\r\n\t          } else if (response.code == 403) {\r\n\t            // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t            errorCallback({\r\n\t              code: ManisResponse.code_405,\r\n\t              msg: ManisResponse.room_locked\r\n\t            });\r\n\t          }\r\n\t        } else {\r\n\t          // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t          errorCallback({\r\n\t            code: ManisResponse.code_500,\r\n\t            msg: ManisResponse.join_room_failed\r\n\t          });\r\n\t        }\r\n\t      },\r\n\t      error: function (xOptions, textStatus) {\r\n\t        // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t        errorCallback({\r\n\t          code: ManisResponse.code_500,\r\n\t          msg: ManisResponse.join_room_failed\r\n\t        });\r\n\t      }\r\n\t    });\r\n\t  } catch (e) {\r\n\t    // console.error('xhr request failure with error : ', e);\r\n\t    errorCallBack({\r\n\t      code: ManisResponse.code_500,\r\n\t      msg: ManisResponse.join_room_failed\r\n\t    });\r\n\t  }\r\n\t}\r\n\t\r\n\tfunction joinConferenceRoom(conferenceName, conferencePassword, successCallback, errorCallback) {\r\n\t  join(conferenceName, conferencePassword, successCallback, errorCallback);\r\n\t};\r\n\t\r\n\tfunction join(conferenceName, conferencePassword, successCallback, errorCallback) {\r\n\t  // ① 判断是否超出会议资源限制\r\n\t  var _header = ManisFunctions.authoredHeader();\r\n\t  try {\r\n\t    $.ajax({\r\n\t      url: window.serverPath + CHECK_RESOURCES_URL,\r\n\t      // dataType: 'jsonp',\r\n\t      // jsonpCallback: 'checkResourcesCallBack',\r\n\t      data: {r: conferenceName, j: connection.jid, u: manisConfg.mUserId},\r\n\t      dataType: 'json',\r\n\t      headers: _header,\r\n\t      type: 'GET',\r\n\t      // async: true,\r\n\t      timeout: 2000,\r\n\t      success: function (response, textStatus, xOptions) {\r\n\t        if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n\t          // ② 判断会议室是否存在以及会议室密码是否正确\r\n\t          if (response.code == 200) {\r\n\t            // console.warn('get check resource result: ', response);\r\n\t            var d = conferencePassword;\r\n\t            if (d != undefined && d != '' && d != null) {\r\n\t              console.log('room resources check success.');\r\n\t              var md5 = crypto.createHash('md5');\r\n\t              md5.update(conferencePassword);\r\n\t              d = md5.digest('hex');\r\n\t            }\r\n\t            validRoom(conferenceName, d, successCallback, errorCallback);\r\n\t          } else {\r\n\t            // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t            errorCallback({\r\n\t              code: ManisResponse.code_403,\r\n\t              msg: ManisResponse.out_of_source_limit\r\n\t            });\r\n\t          }\r\n\t        } else {\r\n\t          // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t          errorCallback({\r\n\t            code: ManisResponse.code_500,\r\n\t            msg: ManisResponse.join_room_failed\r\n\t          });\r\n\t        }\r\n\t      },\r\n\t      error: function (xOptions, textStatus) {\r\n\t        // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t        errorCallback({\r\n\t          code: ManisResponse.code_500,\r\n\t          msg: ManisResponse.join_room_failed\r\n\t        });\r\n\t      }\r\n\t    });\r\n\t  } catch (e) {\r\n\t    // console.error('xhr request failure with error : ', e);\r\n\t    errorCallback({\r\n\t      code: ManisResponse.code_500,\r\n\t      msg: ManisResponse.join_room_failed\r\n\t    });\r\n\t  }\r\n\t}\r\n\t\r\n\tfunction lockRoom(action, callback) {\r\n\t  var switchAction = (action && action.toString() == 'true') ? true : false;\r\n\t  // try {\r\n\t    var username = manisConfg.mUserId;\r\n\t    var roomNumber = roomName.split('@')[0];\r\n\t    var _header = ManisFunctions.authoredHeader();\r\n\t    $.ajax({\r\n\t      url: window.serverPath + \"/conference/lock?i=\" + username + \"&r=\" + roomNumber + \"&l=\" + switchAction,\r\n\t      dataType: 'json',\r\n\t      headers: _header,\r\n\t      processData: false,\r\n\t      type: 'GET',\r\n\t      success: function (rs) {\r\n\t        if (rs.code == 200) {\r\n\t          window.lock = switchAction;\r\n\t          ManisFunctions.broadcastRoomLockStatus(switchAction);\r\n\t          // console.log('oooooooooooooooosssssssssssooooooooooo');\r\n\t          callback({\r\n\t              code: ManisResponse.code_200,\r\n\t              msg: ManisResponse.lock_or_unlock_room_completed,\r\n\t              response: switchAction,\r\n\t              errorCode: ErrorCode.no_error\r\n\t          })\r\n\t        }\r\n\t      },\r\n\t      error: function (err) {\r\n\t          console.error(err)\r\n\t      }\r\n\t    });\r\n\t  // } catch (e) {\r\n\t  //   callback({\r\n\t  //     code: ManisResponse.code_500,\r\n\t  //     msg: ManisResponse.lock_or_unlock_room_failed,\r\n\t  //     errorCode: ErrorCode.api_fetch_failed\r\n\t  //   })\r\n\t  // }\r\n\t}\r\n\t\r\n\t/**\r\n\t * 校验会议室资源\r\n\t * @param params\r\n\t * @param successCallback\r\n\t * @param errorCallback\r\n\t */\r\n\tfunction joinCheck(params, successCallback, errorCallback) {\r\n\t  var _header = ManisFunctions.authoredHeader();\r\n\t  $.ajax({\r\n\t    url: window.serverPath + \"/user/join?j=\" + connection.jid + \"&r=\" + params.r,\r\n\t    // dataType: 'jsonp',\r\n\t    dataType: 'json',\r\n\t    headers: _header,\r\n\t    processData: false,\r\n\t    type: 'GET',\r\n\t    async: false,\r\n\t    success: function (rs) {\r\n\t      if (rs.code == 200) {\r\n\t        joinRoom(params, successCallback, errorCallback);\r\n\t      } else {\r\n\t        errorCallback({\r\n\t          code: ManisResponse.code_403,\r\n\t          msg: ManisResponse.out_of_source_limit\r\n\t        });\r\n\t      }\r\n\t    },\r\n\t    error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n\t      errorCallback({\r\n\t        code: ManisResponse.code_500,\r\n\t        msg: ManisResponse.out_of_source_limit\r\n\t      });\r\n\t    }\r\n\t  });\r\n\t}\r\n\t\r\n\tfunction roomValidCheck(params, successCallback, errorCallback) {\r\n\t  var _header = ManisFunctions.authoredHeader();\r\n\t  $.ajax({\r\n\t    url: window.serverPath + \"/user/valid?i=\" + connection.username + \"&r=\" + params.r + \"&j=\" + connection.jid,\r\n\t    // dataType: 'jsonp',\r\n\t    dataType: 'json',\r\n\t    headers: _header,\r\n\t    processData: false,\r\n\t    type: 'get',\r\n\t    success: function (rs) {\r\n\t      if (rs.code == 200) {\r\n\t        joinCheck(params, successCallback, errorCallback);\r\n\t      } else if (rs.code == 401 || rs.code == 403) {\r\n\t        errorCallback({\r\n\t          code: ManisResponse.code_400,\r\n\t          msg: ManisResponse.join_room_failed\r\n\t        });\r\n\t        window.location.href = rs.msg;\r\n\t      } else if (rs.code == 4030) {\r\n\t        errorCallback({\r\n\t          code: ManisResponse.code_400,\r\n\t          msg: ManisResponse.room_locked\r\n\t        });\r\n\t        window.location.href = rs.msg;\r\n\t      } else {\r\n\t        errorCallback({\r\n\t          code: ManisResponse.code_400,\r\n\t          msg: ManisResponse.join_room_failed\r\n\t        });\r\n\t      }\r\n\t    }\r\n\t  });\r\n\t}\r\n\t\r\n\tfunction createOrJoinRoom(roomNumber, roomPassword, operatorPassword, successCallback, errorCallback, isAudioOnly, localMediaStream, withoutStream) {\r\n\t  var activeLanguage = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n\t  var _header = ManisFunctions.authoredHeader();\r\n\t  $.ajax({\r\n\t    url: window.serverPath + CREATE_OR_JOIN_CONFERENCE,\r\n\t    dataType: 'json',\r\n\t    // jsonpCallback: 'createOrJoinConferenceCallBack',\r\n\t    data: {\r\n\t      r: roomNumber,\r\n\t      j: connection.jid,\r\n\t      u: manisConfg.mUserId,\r\n\t      p: roomPassword,\r\n\t      op: operatorPassword,\r\n\t      lang: activeLanguage\r\n\t    },\r\n\t    headers: _header,\r\n\t    type: 'GET',\r\n\t    // async: true,\r\n\t    timeout: 2000,\r\n\t    success: function (response) {\r\n\t      // if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n\t      console.info('create or join room in room controller result : ', response);\r\n\t      switch (response.code) {\r\n\t        case 200:\r\n\t          // success\r\n\t          window.roomName = response.obj.r + '@conference.' + manisConfg.messageServer;\r\n\t          config.gw = response.obj.gw;\r\n\t          config = Object.assign(config, response.obj);\r\n\t          config.roomPassword = roomPassword;\r\n\t          // store origin config resolution, restore while device change\r\n\t          config.storeResolution = config.resolution;\r\n\t          window.localSSRCS = [];\r\n\t          joinRoom(response.obj, successCallback, errorCallback, isAudioOnly, localMediaStream, withoutStream);\r\n\t          break;\r\n\t        case 401:\r\n\t          // auth failed\r\n\t          errorCallback({\r\n\t            code: ManisResponse.code_401,\r\n\t            msg: ManisResponse.room_password_expect,\r\n\t            errorCode: ErrorCode.conference_room_password_error\r\n\t          });\r\n\t          break;\r\n\t        case 403:\r\n\t          // room locked\r\n\t          errorCallback({\r\n\t            code: ManisResponse.code_403,\r\n\t            msg: ManisResponse.room_locked,\r\n\t            errorCode: ErrorCode.conference_room_locked\r\n\t          });\r\n\t          break;\r\n\t        case 404:\r\n\t          // focus except\r\n\t          errorCallback({\r\n\t            code: ManisResponse.code_404,\r\n\t            msg: ManisResponse.conference_focus_except,\r\n\t            errorCode: ErrorCode.conference_room_focus_except\r\n\t          });\r\n\t          break;\r\n\t        case 405:\r\n\t          // vb except\r\n\t          errorCallback({\r\n\t            code: ManisResponse.code_405,\r\n\t            msg: ManisResponse.conference_vb_except,\r\n\t            errorCode: ErrorCode.conference_room_vb_except\r\n\t          });\r\n\t          break;\r\n\t        case 4031:\r\n\t          // out of source limit\r\n\t          errorCallback({\r\n\t            code: ManisResponse.code_403,\r\n\t            msg: ManisResponse.out_of_source_limit,\r\n\t            errorCode: ErrorCode.conference_room_source_limit\r\n\t          });\r\n\t          break;\r\n\t        case 4032:\r\n\t          errorCallback({\r\n\t            code: ManisResponse.code_408,\r\n\t            msg: ManisResponse.conference_participant_time_error,\r\n\t            errorCode: ErrorCode.conference_room_participant_out_time\r\n\t          });\r\n\t          break;\r\n\t        default:\r\n\t          // create or join failed\r\n\t          errorCallback({\r\n\t            code: ManisResponse.code_500,\r\n\t            msg: ManisResponse.join_room_failed,\r\n\t            errorCode: response.code\r\n\t          });\r\n\t      }\r\n\t      // return true;\r\n\t      // } else {\r\n\t      //   console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t      //   errorCallback({\r\n\t      //     code: ManisResponse.code_500,\r\n\t      //     msg: ManisResponse.join_room_failed\r\n\t      //   });\r\n\t      // }\r\n\t    },\r\n\t    error: function (xOptions, textStatus) {\r\n\t      console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t      errorCallback({\r\n\t        code: ManisResponse.code_500,\r\n\t        msg: ManisResponse.join_room_failed,\r\n\t        errorCode: ErrorCode.api_fetch_failed\r\n\t      });\r\n\t    }\r\n\t  });\r\n\t}\r\n\t\r\n\tfunction joinConferenceWithMedia(room, password, mediaStream, callback) {\r\n\t  try {\r\n\t    var activeLanguage = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n\t    var _header = ManisFunctions.authoredHeader();\r\n\t    $.ajax({\r\n\t      url: window.serverPath + CREATE_OR_JOIN_CONFERENCE,\r\n\t      // dataType: 'jsonp',\r\n\t      // jsonpCallback: 'createOrJoinConferenceCallBack',\r\n\t      dataType: 'json',\r\n\t      data: {r: room, j: connection.jid, u: manisConfg.mUserId, p: password, op: null, lang: activeLanguage},\r\n\t      headers: _header,\r\n\t      type: 'GET',\r\n\t      async: true,\r\n\t      timeout: 2000,\r\n\t      success: function (response, textStatus, xOptions) {\r\n\t        console.info('create or join room in room controller result : ', response);\r\n\t        switch (response.code) {\r\n\t          case 200:\r\n\t            // success\r\n\t            window.roomName = response.obj.r + '@conference.' + manisConfg.messageServer;\r\n\t            config.gw = response.obj.gw;\r\n\t            config = Object.assign(config, response.obj);\r\n\t            config.roomPassword = password;\r\n\t            var isModerator = (connection.jid == config.moderatorJid);\r\n\t            ManisFunctions.setAdmin(isModerator);\r\n\t            connection.emuc.addConfigRoleToPresence(config.role);\r\n\t            connection.emuc.addIsModeratorToPresence(isModerator);\r\n\t\r\n\t            doJoinRoom(response.obj, callback, callback, mediaStream, {});\r\n\t            break;\r\n\t          case 401:\r\n\t            // auth failed\r\n\t            callback({\r\n\t              code: ManisResponse.code_401,\r\n\t              msg: ManisResponse.room_password_expect,\r\n\t              errorCode: ErrorCode.conference_room_not_exist\r\n\t            });\r\n\t            break;\r\n\t          case 403:\r\n\t            // room locked\r\n\t            callback({\r\n\t              code: ManisResponse.code_403,\r\n\t              msg: ManisResponse.room_locked,\r\n\t              errorCode: ErrorCode.conference_room_locked\r\n\t            });\r\n\t            break;\r\n\t          case 404:\r\n\t            // focus except\r\n\t            callback({\r\n\t              code: ManisResponse.code_404,\r\n\t              msg: ManisResponse.conference_focus_except,\r\n\t              errorCode: ErrorCode.conference_room_focus_except\r\n\t            });\r\n\t            break;\r\n\t          case 405:\r\n\t            // vb except\r\n\t            callback({\r\n\t              code: ManisResponse.code_405,\r\n\t              msg: ManisResponse.conference_vb_except,\r\n\t              errorCode: ErrorCode.conference_room_vb_except\r\n\t            });\r\n\t            break;\r\n\t          case 4031:\r\n\t            // out of source limit\r\n\t            callback({\r\n\t              code: ManisResponse.code_403,\r\n\t              msg: ManisResponse.out_of_source_limit,\r\n\t              errorCode: ErrorCode.conference_room_source_limit\r\n\t            });\r\n\t            break;\r\n\t          case 4032:\r\n\t            callback({\r\n\t              code: ManisResponse.code_408,\r\n\t              msg: ManisResponse.conference_participant_time_error,\r\n\t              errorCode: ErrorCode.conference_room_participant_out_time\r\n\t            });\r\n\t            break;\r\n\t          default:\r\n\t            // join failed\r\n\t            callback({\r\n\t              code: ManisResponse.code_500,\r\n\t              msg: ManisResponse.join_room_failed,\r\n\t              errorCode: ErrorCode.conference_room_participant_failed_unknown_response_code\r\n\t            });\r\n\t        }\r\n\t      },\r\n\t      error: function (xOptions, textStatus) {\r\n\t        console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n\t        callback({\r\n\t          code: ManisResponse.code_500,\r\n\t          msg: ManisResponse.join_room_failed,\r\n\t          errorCode: ErrorCode.api_fetch_failed\r\n\t        });\r\n\t      }\r\n\t    });\r\n\t  } catch (e) {\r\n\t    console.error('xhr request failure with error : ', e);\r\n\t    callback({\r\n\t      code: ManisResponse.code_500,\r\n\t      msg: ManisResponse.join_room_failed,\r\n\t      errorCode: ErrorCode.unknown_error\r\n\t    });\r\n\t  }\r\n\t}\r\n\t\r\n\t\r\n\tfunction isSupportShareScreen() {\r\n\t  if(RTC.isChrome()) {\r\n\t      return true;\r\n\t  }\r\n\t  return false;\r\n\t}\r\n\tfunction isSupportRecord() {\r\n\t  if(RTC.isSafari()) {\r\n\t    return false;\r\n\t  }\r\n\t  return true;\r\n\t}\r\n\t\r\n\tfunction roomDelay(time, callback) {\r\n\t  var _header = ManisFunctions.authoredHeader();\r\n\t  $.ajax({\r\n\t    url: window.serverPath + DELAY_ROOM_PATH + config.r,\r\n\t    data: {userId: config.mUserId, lengthTime: time},\r\n\t    dataType: 'json',\r\n\t    headers: _header,\r\n\t    type: 'GET',\r\n\t    timeout: 2000,\r\n\t    success: function (response) {\r\n\t      if (config.debug == true) {\r\n\t        console.log('delay room success', response);\r\n\t      }\r\n\t      callback({\r\n\t        code: ManisResponse.code_200,\r\n\t        msg: ManisResponse.room_extend_time_success,\r\n\t        errorCode: ErrorCode.no_error\r\n\t      })\r\n\t    },\r\n\t    error: function (xOptions, textStatus) {\r\n\t      if (config.debug == true) {\r\n\t        console.error('delay room failed: ', xOptions, textStatus);\r\n\t      }\r\n\t      callback({\r\n\t        code: ManisResponse.code_403,\r\n\t        msg: ManisResponse.room_extend_time_failed,\r\n\t        errorCode: ErrorCode.conference_delay_failed\r\n\t      })\r\n\t    }\r\n\t  })\r\n\t}\r\n\t\r\n\t/**\r\n\t * 呼叫录播之前获取最近的gw配置\r\n\t * @param callback\r\n\t */\r\n\tfunction updateGWConfig(callback){\r\n\t  var _header = ManisFunctions.authoredHeader();\r\n\t  $.ajax({\r\n\t    url: window.serverPath + CONFIG_RESOURCE_UPDATE,\r\n\t    data: {roomNumber: config.r, userJid: connection.jid},\r\n\t    dataType: 'json',\r\n\t    headers: _header,\r\n\t    type: 'GET',\r\n\t    timeout: 2000,\r\n\t    success: function (response) {\r\n\t      console.log('update gw config resource', response);\r\n\t      if(response.code == 200){\r\n\t        var newGW = response.obj.gw ? response.obj.gw : config.gw;\r\n\t        callback({\r\n\t          code: response.mcode,\r\n\t          response: newGW\r\n\t        });\r\n\t      }else {\r\n\t        console.error('update gw config resource failed: ', response);\r\n\t        callback({\r\n\t          code: response.mcode,\r\n\t          response: config.gw\r\n\t        });\r\n\t      }\r\n\t    },\r\n\t    error: function (xOptions, textStatus) {\r\n\t      if (config.debug == true) {\r\n\t        console.error('update gw config resource failed: ', xOptions, textStatus);\r\n\t        callback({\r\n\t          code: 500,\r\n\t          response: config.gw\r\n\t        });\r\n\t      }\r\n\t    }\r\n\t  })\r\n\t}\r\n\t\r\n\tmodule.exports = {\r\n\t  createOrJoinRoom: createOrJoinRoom,\r\n\t  // createRoom: createRoom,\r\n\t  fetchAdmin: fetchAdmin,\r\n\t  grantAdmin: grantAdmin,\r\n\t  setAudioMute: setAudioMute,\r\n\t  setVideoMute: setVideoMute,\r\n\t  eject: eject,\r\n\t  // joinConferenceRoom: joinConferenceRoom,\r\n\t  lockRoom: lockRoom,\r\n\t  // roomValidCheck: roomValidCheck,\r\n\t  // joinRoom: joinRoom,\r\n\t  leaveConferenceRoom: leaveConferenceRoom,\r\n\t  initDefaultInputDevices: initDefaultInputDevices,\r\n\t  joinConferenceWithMedia: joinConferenceWithMedia,\r\n\t  roomDelay: roomDelay,\r\n\t  updateGWConfig: updateGWConfig,\r\n\t};\r\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar SDPUtil = __webpack_require__(30);\r\n\tvar MediaStream = __webpack_require__(58);\r\n\tvar DataChannel = __webpack_require__(59);\r\n\tvar simulcast = __webpack_require__(38);\r\n\tvar Status = __webpack_require__(6);\r\n\tvar ManisFunctions = __webpack_require__(27);\r\n\tvar ConnectionQuality = __webpack_require__(7);\r\n\t\r\n\t$(document).bind('moderatored.muc', function (event, jid, isModerator) {\r\n\t  var withModerator = false;\r\n\t  for (var i = 0; i < window.participants.length; i++) {\r\n\t    var participant = window.participants[i];\r\n\t    if (participant.resource == Strophe.getResourceFromJid(jid)) {\r\n\t      participant.is_moderator = isModerator;\r\n\t    }\r\n\t    if (participant.is_moderator) {\r\n\t      withModerator = true;\r\n\t    }\r\n\t  }\r\n\t  // console.log('XXXXXXXXXXXXXX with moderator status : ', withModerator, window.config.withModerator);\r\n\t  // if (withModerator != window.config.withModerator) {\r\n\t  //   $(document).trigger('manis.on.with.moderator.changed', [withModerator]);\r\n\t  // }\r\n\t});\r\n\t\r\n\t$(document).bind('manis.been.stop.screen.share', function (event) {\r\n\t  window.removeScreenInprogress = true;\r\n\t  window.isUsingScreenStream = false;\r\n\t  Status.removeScreenSourceFromConnection(function (result) {\r\n\t    console.info('someone share screen replaced my share');\r\n\t    $(document).trigger('mains.on.screen.share.end');\r\n\t  })\r\n\t});\r\n\t\r\n\t$(document).bind('entered.muc', function (event, jid, info, pres) {\r\n\t  console.log('entered', jid, info);\r\n\t\r\n\t  // ignore recorder\r\n\t  if(jid.indexOf('recorder') > -1){\r\n\t    // console.log('recorder entered ');\r\n\t    // $(document).trigger('manis.recorder.status.change', [true, jid]);\r\n\t    return false;\r\n\t  }\r\n\t\r\n\t  // 判斷將新加入的用戶添加到用戶列表中，如果jid是focus，則添加自己進去，參會用戶participant對象為：\r\n\t  // var participant = {\r\n\t  //   nickname: 'nickname',\r\n\t  //   jid: 'uniqueId@conference/resource',\r\n\t  //   resource: 'resource',  截取jid後面的resource\r\n\t  // }\r\n\t  if (jid.indexOf('focus') === -1) {\r\n\t    // remote participant\r\n\t    var participant = {\r\n\t      nickname: info.displayName,\r\n\t      jid: info.jid,\r\n\t      resource: Strophe.getResourceFromJid(info.jid),\r\n\t      audio_muted: false,\r\n\t      video_muted: false,\r\n\t      is_moderator: (connection.jid == config.moderatorJid),\r\n\t    }\r\n\t  } else {\r\n\t    // self\r\n\t    var participant = {\r\n\t      nickname: config.nickname ? config.nickname : manisConfg.mUserName,\r\n\t      jid: connection.jid,\r\n\t      resource: Strophe.getResourceFromJid(connection.jid),\r\n\t      audio_muted: false,\r\n\t      video_muted: false,\r\n\t      is_moderator: (connection.jid == config.moderatorJid),\r\n\t    }\r\n\t  }\r\n\t  // 去重\r\n\t  if (window.participants.length > 0) {\r\n\t    var participantExist = false;\r\n\t    for (var k = 0; k < window.participants.length; k++) {\r\n\t      var p = window.participants[k];\r\n\t      if (p.resource === participant.resource) {\r\n\t        participantExist = true;\r\n\t      }\r\n\t    }\r\n\t    if (!participantExist) {\r\n\t      window.participants.push(participant);\r\n\t    }\r\n\t  } else {\r\n\t    // insert\r\n\t    window.participants.push(participant);\r\n\t  }\r\n\t  if (info.isFocus) {\r\n\t    window.focusJid = jid;\r\n\t    console.info(\"Ignore focus: \" + jid + \", real JID: \" + info.jid);\r\n\t    return;\r\n\t  }\r\n\t  $(document).trigger('manis.on.muc.change', ['entered', participant])\r\n\t});\r\n\t\r\n\t$(document).bind('left.muc', function (event, jid) {\r\n\t  console.info(\"=========left==========:\", event , \" jid : \", jid);\r\n\t  delete jid2Ssrc[jid];\r\n\t  if (connection.jingle != undefined) {\r\n\t    connection.jingle.terminateByJid(jid);\r\n\t  }\r\n\t  var leftFromRoom = false;\r\n\t  // 從participants中刪除對應的participant對象\r\n\t  if (window.participants.length > 0) {\r\n\t    for (var k = 0; k <= window.participants.length; k++) {\r\n\t      var p = window.participants[k];\r\n\t      if (p && p.resource === Strophe.getResourceFromJid(jid)) {\r\n\t        window.participants.splice(k, 1);\r\n\t        leftFromRoom = true;\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t  if(leftFromRoom){\r\n\t    console.log(\"=======================left======================\",jid);\r\n\t    $(document).trigger('manis.room.someone.left', {resource: Strophe.getResourceFromJid(jid)});\r\n\t    $(document).trigger('app.share.endpoint.left', [Strophe.getResourceFromJid(jid)]);\r\n\t    $(document).trigger('manis.on.muc.change', ['left', jid])\r\n\t  }else {\r\n\t    console.log('some one sign out:', Strophe.getResourceFromJid(jid));\r\n\t  }\r\n\t  //\r\n\t  if(jid.indexOf('recorder') > -1){\r\n\t    $(document).trigger('manis.recorder.status.change', [false, jid]);\r\n\t  }\r\n\t});\r\n\t\r\n\t$(document).bind('presence.status', function (event, pres) {\r\n\t  try{\r\n\t    var resources = {}, status = {};\r\n\t    var presNode = $(pres);\r\n\t    var from = presNode.attr('from');\r\n\t    var configRole = presNode.find('configRole').text() || 'NONE';\r\n\t    var nickName = presNode.find('nick').text() || '';\r\n\t    var audioMuted = presNode.find('audiomuted').text() || false;\r\n\t    var videoMuted = presNode.find('videomuted').text() || false;\r\n\t    var statusNode = presNode.find('stats[xmlns=\"http://jitsi.org/jitmeet/stats\"]');\r\n\t    var mediaNode = presNode.find('media[xmlns=\"http://estos.de/ns/mjs\"]');\r\n\t    $.each(statusNode.find('stat'), function (index, statNode) {\r\n\t      if($(statNode).attr('name') == 'bitrate_download'){\r\n\t        var downloadBitrate = $(statNode).attr('value') || '0';\r\n\t        status.downloadBitrate = downloadBitrate;\r\n\t      }else if($(statNode).attr('name') == 'bitrate_upload'){\r\n\t        var uploadBitrate = $(statNode).attr('value') || '0';\r\n\t        status.uploadBitrate = uploadBitrate;\r\n\t      }else if($(statNode).attr('name') == 'packetLoss_download'){\r\n\t        var packageDownloadLost = $(statNode).attr('value') || '0';\r\n\t        status.packageDownloadLost = packageDownloadLost;\r\n\t      }else if($(statNode).attr('name') == 'packetLoss_upload'){\r\n\t        var packageUploadLost = $(statNode).attr('value') || '0';\r\n\t        status.packageUploadLost = packageUploadLost;\r\n\t      }\r\n\t    });\r\n\t    $.each(mediaNode.find('source'), function (index, sourceNode) {\r\n\t      var sourceSSRC = $(sourceNode).attr('ssrc');\r\n\t      if($(sourceNode).attr('type') == 'audio'){\r\n\t        resources.audio = {ssrc: sourceSSRC, resolution: (sourceSSRC ? ssrc2resolution[sourceSSRC]: 'NaN')};\r\n\t      }else if($(sourceNode).attr('type') == 'video'){\r\n\t        resources.video ={ssrc: sourceSSRC, resolution: (sourceSSRC ? ssrc2resolution[sourceSSRC]: 'NaN')};\r\n\t      }else if($(sourceNode).attr('type') == 'screen'){\r\n\t        resources.screen = {ssrc: sourceSSRC, resolution: (sourceSSRC ? ssrc2resolution[sourceSSRC]: 'NaN')};\r\n\t      }\r\n\t    });\r\n\t    var participantPresence = {\r\n\t      from: from,\r\n\t      nickName: nickName,\r\n\t      configRole: configRole,\r\n\t      audioMuted: audioMuted,\r\n\t      videoMuted: videoMuted,\r\n\t      status: status,\r\n\t      mediaSources: resources,\r\n\t    };\r\n\t    $(document).trigger('manis.participant.status.update', [participantPresence]);\r\n\t    updateSSRC2Jid(pres, from);\r\n\t  }catch (e){\r\n\t    console.error('on presence.status error',e);\r\n\t  }\r\n\t\r\n\t});\r\n\t\r\n\tfunction updateSSRC2Jid(pres, jid) {\r\n\t  //  update\r\n\t  $(pres).find('media[xmlns=\"http://estos.de/ns/mjs\"]>source').each(function (idx, ssrc) {\r\n\t    var ssrcV = ssrc.getAttribute('ssrc');\r\n\t    ssrc2jid[ssrcV] = jid;\r\n\t    var type = ssrc.getAttribute('type');\r\n\t    ssrc2videoType[ssrcV] = type;\r\n\t    // console.log('======= ssrcV :', ssrcV, ' ========= ssrc2jid : ', ssrc2jid, ' ==== type : ', type, ' ==== ssrc2videoType: ', ssrc2videoType);\r\n\t  });\r\n\t  updateConnectQuality(pres, jid)\r\n\t}\r\n\t\r\n\tfunction updateConnectQuality(pres, from) {\r\n\t\r\n\t  var stats = $(pres).find('stats');\r\n\t  if (stats.length) {\r\n\t    var statsObj = {};\r\n\t    Strophe.forEachChild(stats[0], \"stat\", function (el) {\r\n\t      statsObj[el.getAttribute(\"name\")] = el.getAttribute(\"value\");\r\n\t    });\r\n\t    var videoSsrc = null;\r\n\t    var media = $(pres).find('media');\r\n\t    if (media.length) {\r\n\t      Strophe.forEachChild(media[0], \"source\", function (sel) {\r\n\t        var type = sel.getAttribute(\"type\");\r\n\t        if (type == 'video') {\r\n\t          videoSsrc = sel.getAttribute(\"ssrc\");\r\n\t        }\r\n\t      });\r\n\t    }\r\n\t    ConnectionQuality.updateRemoteStats(from, statsObj, videoSsrc);\r\n\t  }\r\n\t}\r\n\t\r\n\t$(document).bind('presence.muc', function (event, jid, info, pres) {\r\n\t\r\n\t  // Remove old ssrcs coming from the jid\r\n\t  Object.keys(ssrc2jid).forEach(function (ssrc) {\r\n\t    if (ssrc2jid[ssrc] == jid) {\r\n\t      delete ssrc2jid[ssrc];\r\n\t    }\r\n\t  });\r\n\t  updateSSRC2Jid(pres, jid);\r\n\t\r\n\t  if (window.participants.length > 0) {\r\n\t    for (var k = 0; k <= window.participants.length; k++) {\r\n\t      var p = window.participants[k];\r\n\t      if (p && p.resource === Strophe.getResourceFromJid(jid)) {\r\n\t        window.participants[k].nickname = info.displayName;\r\n\t        window.participants[k].jid = jid;\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t});\r\n\t\r\n\t$(document).bind('remotestreamadded.jingle', function (event,stream,ssrcObj) {\r\n\t    console.log(\"=============remotestreamadded.jingle=======222==========\",stream,ssrcObj);\r\n\t    var isVideo = stream.getVideoTracks().length > 0;\r\n\t    var isAudio = stream.getAudioTracks().length > 0;\r\n\t    if (isVideo) {\r\n\t        var videoStream = stream.clone();\r\n\t        videoStream.ssrc = ssrcObj.video.ssrc;\r\n\t        onRemoteVideoAdded(videoStream, ssrcObj.jid);\r\n\t    }\r\n\t    if(isAudio){\r\n\t        var audioStream = stream.clone();\r\n\t        audioStream.ssrc = ssrcObj.audio.ssrc;\r\n\t        onRemoteAudioAdded(audioStream, ssrcObj.jid);\r\n\t    }\r\n\t\r\n\t  // waitForPresence(data, sid, 0);\r\n\t\r\n\t  // onRemoteStreamAdded(data, sid);\r\n\t  // console.info('wait for pressnce ; data : ', data, ' sid : ', sid);\r\n\t  if(window.sendOnly == true){\r\n\t    $(document).trigger('sendonlydatachannelmsg.on.sourceadd');\r\n\t  }\r\n\t});\r\n\t\r\n\t/*function onRemoteStreamAdded(data, sid){\r\n\t  console.log('handle remote stream added : ', data, sid);\r\n\t  var stream = data.stream || null;\r\n\t  var streamSSRC = parseInt(stream.ssrc);\r\n\t  if(stream){\r\n\t    if(stream.id.indexOf('mixedmslabel') == -1){\r\n\t      console.warn('handle remote stream added mixedmslabel, ignore', stream, sid);\r\n\t    }else {\r\n\t      data = mapSSRC2Jid(data, sid);\r\n\t      var peerJid = data.peerjid || ssrc2jid[streamSSRC];\r\n\t      if(!peerJid){\r\n\t        console.warn('handle remote stream added without peerjid :', data, sid);\r\n\t        return true;\r\n\t      }\r\n\t      var mediaStream = new MediaStream(data, sid, streamSSRC);\r\n\t      if(mediaStream.type == 'Video'){\r\n\t        if(checkStreamTrackAlive(stream)){\r\n\t          var participant = {\r\n\t            info: ManisFunctions.getUserInfoByJid(peerJid),\r\n\t            stream: stream,\r\n\t            status: ManisFunctions.generateStatusNode(Strophe.getResourceFromJid(peerJid)),\r\n\t            hands_up: false\r\n\t          };\r\n\t          console.log(' video source added : ', data, sid, new Date().getTime());\r\n\t          $(document).trigger('manis.room.someone.joined', [participant]);\r\n\t        }else {\r\n\t          console.warn('remote video track not alive, try again after 500 ms');\r\n\t          setTimeout(function () {\r\n\t            onRemoteStreamAdded(data, sid);\r\n\t          }, 500);\r\n\t        }\r\n\t      }else if(mediaStream.type == 'Audio'){\r\n\t        if(checkStreamTrackAlive(stream)){\r\n\t          $(document).trigger('manis.room.someone.audio.added', [{\r\n\t            info: ManisFunctions.getUserInfoByJid(peerJid),\r\n\t            status: ManisFunctions.generateStatusNode(Strophe.getResourceFromJid(peerJid)),\r\n\t            stream: data.stream,\r\n\t            video_muted: true,\r\n\t            type: 'audio'\r\n\t          }]);\r\n\t        }else {\r\n\t          console.warn('remote audio track not alive, try again after 500 ms');\r\n\t          setTimeout(function () {\r\n\t            onRemoteStreamAdded(data, sid);\r\n\t          }, 500);\r\n\t        }\r\n\t      }else {\r\n\t        // unknown type stream\r\n\t        console.warn('handle unknown type stream: ', mediaStream);\r\n\t      }\r\n\t\r\n\t    }\r\n\t  }else {\r\n\t    console.warn('handle remote stream added, but without stream : ', data, sid);\r\n\t  }\r\n\t};\r\n\t\r\n\tfunction mapSSRC2Jid(data, sid) {\r\n\t  var sess = connection.jingle.sessions[sid];\r\n\t\r\n\t  var thessrc;\r\n\t  // look only at a=ssrc: and _not_ at a=ssrc-group: lines\r\n\t  var ssrclines\r\n\t    = SDPUtil.find_lines(sess.peerconnection.remoteDescription.sdp, 'a=ssrc:');\r\n\t  console.log('ssrclines: ', ssrclines);\r\n\t  ssrclines = ssrclines.filter(function (line) {\r\n\t    // console.info(\"============='msid:' + data.stream.id==========\"+'msid:' + data.stream.id);\r\n\t    return ((line.indexOf('msid:' + data.stream.id) !== -1));\r\n\t  });\r\n\t  if (ssrclines.length) {\r\n\t    console.log(' new ssrclines: ', ssrclines);\r\n\t    for(var i = 0; i < ssrclines.length; i++){\r\n\t      thessrc = ssrclines[i].substring(7).split(' ')[0];\r\n\t      console.log('associated jid', ssrc2jid[thessrc], data.peerjid);\r\n\t      if (ssrc2jid[thessrc]) {\r\n\t        data.peerjid = ssrc2jid[thessrc];\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t  return data;\r\n\t}*/\r\n\t\r\n\tfunction checkStreamTrackAlive(stream){\r\n\t  // var track = stream.getTracks() ? stream.getTracks()[0] : null;\r\n\t  // if(track && track.readyState == 'live'){\r\n\t  //   return true;\r\n\t  // }\r\n\t  // console.warn('handle remote stream but track not alive', stream);\r\n\t  // return false;\r\n\t    return true;\r\n\t}\r\n\t\r\n\t$(document).bind('sendonlydatachannelmsg.on.sourceadd', function (event) {\r\n\t  sendOnly();\r\n\t});\r\n\t\r\n\tfunction sendOnly() {\r\n\t  if(window.sendOnly == true){\r\n\t    Status.sendOnlyChannelMsg(function (result) {\r\n\t      if(result.code != 200){\r\n\t        console.log('resent sendonly msg again after 1 second, mabay channel not ok');\r\n\t        setTimeout(sendOnly, 1000);\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t}\r\n\t\r\n\t$(document).bind('callincoming.jingle', function (event, sid) {\r\n\t  var sess = connection.jingle.sessions[sid];\r\n\t\r\n\t  activecall = sess;\r\n\t\r\n\t  Status.startRtpStatsCollector();\r\n\t  //*****************timing send presence to keep in conference.*****************\r\n\t  // ConnectionQuality.startSendingStats();\r\n\t\r\n\t  if (config.openSctp) {\r\n\t    DataChannel.bindDataChannelListener(sess.peerconnection);\r\n\t  }\r\n\t\r\n\t  // TODO: check affiliation and/or role\r\n\t  console.log('emuc data for', sess.peerjid, connection.emuc.members[sess.peerjid]);\r\n\t  sess.usedrip = true; // not-so-naive trickle ice\r\n\t  sess.sendAnswer();\r\n\t  // sess.accept();\r\n\t\r\n\t});\r\n\t\r\n\t$(document).bind('setLocalDescription.jingle', function (event, sid) {\r\n\t  // put our ssrcs into presence so other clients can identify our stream\r\n\t  var sess = connection.jingle.sessions[sid];\r\n\t  var newssrcs = [];\r\n\t  var media = simulcast.parseMedia(sess.peerconnection.localDescription);\r\n\t  media.forEach(function (media) {\r\n\t\r\n\t    if (Object.keys(media.sources).length > 0) {\r\n\t      // TODO(gp) maybe exclude FID streams?\r\n\t      Object.keys(media.sources).forEach(function (ssrc) {\r\n\t        newssrcs.push({\r\n\t          'ssrc': ssrc,\r\n\t          'type': media.type,\r\n\t          'direction': media.direction\r\n\t        });\r\n\t      });\r\n\t    }\r\n\t    else if (sess.localStreamsSSRC && sess.localStreamsSSRC[media.type]) {\r\n\t      newssrcs.push({\r\n\t        'ssrc': sess.localStreamsSSRC[media.type],\r\n\t        'type': media.type,\r\n\t        'direction': media.direction\r\n\t      });\r\n\t    }\r\n\t\r\n\t  });\r\n\t\r\n\t  console.log('new ssrcs : ', newssrcs);\r\n\t\r\n\t  // Have to clear presence map to get rid of removed streams\r\n\t  connection.emuc.clearPresenceMedia();\r\n\t\r\n\t  if (newssrcs.length > 0) {\r\n\t    if(window.localSSRCS.length <= 0){\r\n\t      window.localSSRCS = newssrcs;\r\n\t    }\r\n\t    for (var i = 1; i <= newssrcs.length; i++) {\r\n\t      // Change video type to screen\r\n\t      // if (newssrcs[i - 1].type === 'video') {\r\n\t      //   window.localStreamSSRC = newssrcs[i - 1].ssrc;\r\n\t      //   $(document).trigger('manis.local.stream.ssrc.update', [newssrcs[i - 1].ssrc, newssrcs[i - 1].type]);\r\n\t      // }\r\n\t      // if (newssrcs[i - 1].type === 'video' && isUsingScreenStream && i > 2) {\r\n\t      //   newssrcs[i - 1].type = 'screen';\r\n\t      // }\r\n\t\r\n\t      var newSSRC = newssrcs[i-1];\r\n\t      newSSRC.isOriginalExist = false;\r\n\t      if(window.localSSRCS.length){\r\n\t        for(var j = 0 ; j < window.localSSRCS.length; j++){\r\n\t          var perSSRC = window.localSSRCS[j];\r\n\t          if(perSSRC.ssrc == newSSRC.ssrc){\r\n\t            newSSRC.isOriginalExist = true;\r\n\t            newSSRC.type = perSSRC.type;\r\n\t            if(newSSRC.type == 'video'){\r\n\t              window.localStreamSSRC = newSSRC.ssrc;\r\n\t              $(document).trigger('manis.local.stream.ssrc.update', [newSSRC.ssrc, newSSRC.type]);\r\n\t            }\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t      if(newSSRC.isOriginalExist == false && isUsingScreenStream){\r\n\t        newSSRC.type = 'screen';\r\n\t      }\r\n\t      connection.emuc.addMediaToPresence(i,\r\n\t        newSSRC.type, newSSRC.ssrc, newSSRC.direction);\r\n\t    }\r\n\t\r\n\t    connection.emuc.sendPresence();\r\n\t  }\r\n\t  state = false;\r\n\t});\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param stream\r\n\t * @param jid\r\n\t */\r\n\tfunction onRemoteVideoAdded(stream, jid) {\r\n\t  var that = this;\r\n\t  var type = checkStreamIsScreen(stream,stream.ssrc);\r\n\t  stream.streamType = type;\r\n\t  if(checkStreamTrackAlive(stream)){\r\n\t    var participant = {\r\n\t      info: ManisFunctions.getUserInfoByJid(jid),\r\n\t      stream: stream,\r\n\t      status: ManisFunctions.generateStatusNode(Strophe.getResourceFromJid(jid)),\r\n\t      hands_up: false\r\n\t    };\r\n\t    console.log(' video source added : ',that, stream, new Date());\r\n\t    $(document).trigger('manis.room.someone.joined', [participant]);\r\n\t  }else {\r\n\t    setTimeout(function () {\r\n\t      onRemoteVideoAdded(stream, jid)\r\n\t    }, 500);\r\n\t  }\r\n\t\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param stream\r\n\t * @returns {string}\r\n\t */\r\n\tfunction checkStreamIsScreen(stream,ssrc) {\r\n\t  if(stream){\r\n\t    var ssrc = stream.ssrc || null;\r\n\t    if(ssrc == window.screenSSRC){\r\n\t      return 'screen';\r\n\t    }\r\n\t    return 'video';\r\n\t  }\r\n\t  return 'video';\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t * @param stream\r\n\t * @param jid\r\n\t */\r\n\tfunction onRemoteAudioAdded(stream, jid) {\r\n\t  if(checkStreamTrackAlive(stream)){\r\n\t    console.log(' audio source added : ', stream, new Date());\r\n\t    $(document).trigger('manis.room.someone.audio.added', [{\r\n\t      info: ManisFunctions.getUserInfoByJid(jid),\r\n\t      status: ManisFunctions.generateStatusNode(Strophe.getResourceFromJid(jid)),\r\n\t      stream: stream,\r\n\t      video_muted: true,\r\n\t      type: 'audio'\r\n\t    }]);\r\n\t  }else {\r\n\t    setTimeout(function () {\r\n\t      onRemoteAudioAdded(stream, jid);\r\n\t    }, 500)\r\n\t  }\r\n\t}\r\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports) {\n\n\t/**\r\n\t * Provides a wrapper class for the MediaStream.\r\n\t *\r\n\t * TODO : Add here the src from the video element and other related properties\r\n\t * and get rid of some of the mappings that we use throughout the UI.\r\n\t */\r\n\tvar MediaStream = (function () {\r\n\t  /**\r\n\t   * Creates a MediaStream object for the given data, session id and ssrc.\r\n\t   *\r\n\t   * @param data the data object from which we obtain the stream,\r\n\t   * the peerjid, etc.\r\n\t   * @param sid the session id\r\n\t   * @param ssrc the ssrc corresponding to this MediaStream\r\n\t   *\r\n\t   * @constructor\r\n\t   */\r\n\t  function MediaStreamProto(data, sid, ssrc) {\r\n\t    this.stream = data.stream;\r\n\t    this.peerjid = data.peerjid;\r\n\t    this.ssrc = ssrc;\r\n\t    this.session = connection.jingle.sessions[sid];\r\n\t    this.type = (this.stream.getVideoTracks().length > 0)\r\n\t      ? MediaStream.VIDEO_TYPE : (this.stream.getAudioTracks().length > 0 ? MediaStream.AUDIO_TYPE : MediaStream.UNKNOWN_TYPE);\r\n\t    this.muted = false;\r\n\t  }\r\n\t\r\n\t  return MediaStreamProto;\r\n\t})();\r\n\t\r\n\tMediaStream.VIDEO_TYPE = 'Video';\r\n\tMediaStream.AUDIO_TYPE = 'Audio';\r\n\tMediaStream.UNKNOWN_TYPE = 'Unknown';\r\n\t\r\n\texports = module.exports = MediaStream;\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports) {\n\n\t/* global connection, Strophe, updateLargeVideo, focusedVideoSrc*/\r\n\t\r\n\t// cache datachannels to avoid garbage collection\r\n\t// https://code.google.com/p/chromium/issues/detail?id=405545\r\n\t\r\n\t\r\n\t/**\r\n\t * Callback triggered by PeerConnection when new data channel is opened\r\n\t * on the bridge.\r\n\t * @param event the event info object.\r\n\t */\r\n\tfunction onSelectedEndpointChanged(userJid) {\r\n\t  console.log('selected endpoint changed: ', userJid);\r\n\t\r\n\t  if (_dataChannels && _dataChannels.length != 0) {\r\n\t    _dataChannels.some(function (dataChannel) {\r\n\t      if (dataChannel.readyState == 'open') {\r\n\t        dataChannel.send(JSON.stringify({\r\n\t          'colibriClass': 'SelectedEndpointChangedEvent',\r\n\t          'selectedEndpoint': (!userJid || userJid == null)\r\n\t            ? null : userJid\r\n\t        }));\r\n\t\r\n\t        return true;\r\n\t      }\r\n\t    });\r\n\t  }\r\n\t}\r\n\t\r\n\t\r\n\tfunction onDataChannel(event) {\r\n\t  var dataChannel = event.channel;\r\n\t\r\n\t  //* dataChannel.onopen = function ()\r\n\t  //* {\r\n\t  //     console.info(\"Data channel opened by the Videobridge!\", dataChannel);\r\n\t\r\n\t  // Code sample for sending string and/or binary data\r\n\t  // Sends String message to the bridge\r\n\t  //dataChannel.send(\"Hello bridge!\");\r\n\t  // Sends 12 bytes binary message to the bridge\r\n\t  //dataChannel.send(new ArrayBuffer(12));\r\n\t\r\n\t  // when the data channel becomes available, tell the bridge about video\r\n\t  // selections so that it can do adaptive simulcast,\r\n\t  //* var userJid = VideoLayout.getLargeVideoState().userJid;\r\n\t  // we want the notification to trigger even if userJid is undefined,\r\n\t  // or null.\r\n\t  //* onSelectedEndpointChanged(userJid);\r\n\t  //* };\r\n\t\r\n\t  dataChannel.onerror = function (error) {\r\n\t    console.error(\"Data Channel Error:\", error, dataChannel);\r\n\t  };\r\n\t\r\n\t  dataChannel.onmessage = function (event) {\r\n\t    if (config.onStage) {\r\n\t      return;\r\n\t    }\r\n\t    var data = event.data;\r\n\t    // JSON\r\n\t    var obj;\r\n\t\r\n\t    try {\r\n\t      obj = JSON.parse(data);\r\n\t    }\r\n\t    catch (e) {\r\n\t      console.error(\r\n\t        \"Failed to parse data channel message as JSON: \",\r\n\t        data,\r\n\t        dataChannel);\r\n\t    }\r\n\t    if (('undefined' !== typeof(obj)) && (null !== obj)) {\r\n\t      var colibriClass = obj.colibriClass;\r\n\t\r\n\t      if (\"DominantSpeakerEndpointChangeEvent\" === colibriClass) {\r\n\t        // Endpoint ID from the Videobridge.\r\n\t        var dominantSpeakerEndpoint = obj.dominantSpeakerEndpoint;\r\n\t\r\n\t        console.info(\r\n\t          \"Data channel new dominant speaker event: \",\r\n\t          dominantSpeakerEndpoint);\r\n\t        //* if(!selectedSplitScrean){\r\n\t        //* $(document).trigger(\r\n\t        //*     'dominantspeakerchanged',\r\n\t        //*     [dominantSpeakerEndpoint]);\r\n\t        //* }\r\n\t      }\r\n\t      else if (\"InLastNChangeEvent\" === colibriClass) {\r\n\t        var oldValue = obj.oldValue;\r\n\t        var newValue = obj.newValue;\r\n\t        // Make sure that oldValue and newValue are of type boolean.\r\n\t        var type;\r\n\t\r\n\t        if ((type = typeof oldValue) !== 'boolean') {\r\n\t          if (type === 'string') {\r\n\t            oldValue = (oldValue == \"true\");\r\n\t          } else {\r\n\t            oldValue = new Boolean(oldValue).valueOf();\r\n\t          }\r\n\t        }\r\n\t        if ((type = typeof newValue) !== 'boolean') {\r\n\t          if (type === 'string') {\r\n\t            newValue = (newValue == \"true\");\r\n\t          } else {\r\n\t            newValue = new Boolean(newValue).valueOf();\r\n\t          }\r\n\t        }\r\n\t        $(document).trigger('inlastnchanged', [oldValue, newValue]);\r\n\t      }\r\n\t      else if (\"LastNEndpointsChangeEvent\" === colibriClass) {\r\n\t        // The new/latest list of last-n endpoint IDs.\r\n\t        var lastNEndpoints = obj.lastNEndpoints;\r\n\t        // The list of endpoint IDs which are entering the list of\r\n\t        // last-n at this time i.e. were not in the old list of last-n\r\n\t        // endpoint IDs.\r\n\t        var endpointsEnteringLastN = obj.endpointsEnteringLastN;\r\n\t        var stream = obj.stream;\r\n\t\r\n\t        console.log(\r\n\t          \"Data channel new last-n event: \",\r\n\t          lastNEndpoints, endpointsEnteringLastN, obj);\r\n\t        $(document).trigger(\r\n\t          'lastnchanged',\r\n\t          [lastNEndpoints, endpointsEnteringLastN, stream]);\r\n\t      }\r\n\t      else if (\"SimulcastLayersChangedEvent\" === colibriClass) {\r\n\t        $(document).trigger(\r\n\t          'simulcastlayerschanged',\r\n\t          [obj.endpointSimulcastLayers]);\r\n\t      }\r\n\t      else if (\"SimulcastLayersChangingEvent\" === colibriClass) {\r\n\t        $(document).trigger(\r\n\t          'simulcastlayerschanging',\r\n\t          [obj.endpointSimulcastLayers]);\r\n\t      }\r\n\t      else if (\"StartSimulcastLayerEvent\" === colibriClass) {\r\n\t        $(document).trigger('startsimulcastlayer', obj.simulcastLayer);\r\n\t      }\r\n\t      else if (\"StopSimulcastLayerEvent\" === colibriClass) {\r\n\t        $(document).trigger('stopsimulcastlayer', obj.simulcastLayer);\r\n\t      }\r\n\t      else {\r\n\t        console.debug(\"Data channel JSON-formatted message: \", obj);\r\n\t      }\r\n\t    }\r\n\t  };\r\n\t\r\n\t  dataChannel.onclose = function () {\r\n\t    console.info(\"The Data Channel closed\", dataChannel);\r\n\t    var idx = _dataChannels.indexOf(dataChannel);\r\n\t    if (idx > -1)\r\n\t      _dataChannels = _dataChannels.splice(idx, 1);\r\n\t  };\r\n\t  _dataChannels.push(dataChannel);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Binds \"ondatachannel\" event listener to given PeerConnection instance.\r\n\t * @param peerConnection WebRTC peer connection instance.\r\n\t */\r\n\texports.bindDataChannelListener = function (peerConnection) {\r\n\t  peerConnection.ondatachannel = onDataChannel;\r\n\t\r\n\t  // Sample code for opening new data channel from Jitsi Meet to the bridge.\r\n\t  // Although it's not a requirement to open separate channels from both bridge\r\n\t  // and peer as single channel can be used for sending and receiving data.\r\n\t  // So either channel opened by the bridge or the one opened here is enough\r\n\t  // for communication with the bridge.\r\n\t  /*\r\n\t   var dataChannelOptions = { reliable: true };\r\n\t   var dataChannel\r\n\t   = peerConnection.createDataChannel(\"myChannel\", dataChannelOptions);\r\n\t\r\n\t   // Can be used only when is in open state\r\n\t   dataChannel.onopen = function ()\r\n\t   {\r\n\t   dataChannel.send(\"My channel !!!\");\r\n\t   };\r\n\t   dataChannel.onmessage = function (event)\r\n\t   {\r\n\t   var msgData = event.data;\r\n\t   console.info(\"Got My Data Channel Message:\", msgData, dataChannel);\r\n\t   };\r\n\t   */\r\n\t}\r\n\t\r\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var rng = __webpack_require__(65)\n\t\n\tfunction error () {\n\t  var m = [].slice.call(arguments).join(' ')\n\t  throw new Error([\n\t    m,\n\t    'we accept pull requests',\n\t    'http://github.com/dominictarr/crypto-browserify'\n\t    ].join('\\n'))\n\t}\n\t\n\texports.createHash = __webpack_require__(67)\n\t\n\texports.createHmac = __webpack_require__(80)\n\t\n\texports.randomBytes = function(size, callback) {\n\t  if (callback && callback.call) {\n\t    try {\n\t      callback.call(this, undefined, new Buffer(rng(size)))\n\t    } catch (err) { callback(err) }\n\t  } else {\n\t    return new Buffer(rng(size))\n\t  }\n\t}\n\t\n\tfunction each(a, f) {\n\t  for(var i in a)\n\t    f(a[i], i)\n\t}\n\t\n\texports.getHashes = function () {\n\t  return ['sha1', 'sha256', 'sha512', 'md5', 'rmd160']\n\t}\n\t\n\tvar p = __webpack_require__(81)(exports)\n\texports.pbkdf2 = p.pbkdf2\n\texports.pbkdf2Sync = p.pbkdf2Sync\n\t__webpack_require__(83)(exports, module.exports);\n\t\n\t// the least I can do is make error messages for the rest of the node.js/crypto api.\n\teach(['createCredentials'\n\t, 'createSign'\n\t, 'createVerify'\n\t, 'createDiffieHellman'\n\t], function (name) {\n\t  exports[name] = function () {\n\t    error('sorry,', name, 'is not implemented yet')\n\t  }\n\t})\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/*!\n\t * The buffer module from node.js, for the browser.\n\t *\n\t * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * @license  MIT\n\t */\n\t/* eslint-disable no-proto */\n\t\n\t'use strict'\n\t\n\tvar base64 = __webpack_require__(62)\n\tvar ieee754 = __webpack_require__(63)\n\tvar isArray = __webpack_require__(64)\n\t\n\texports.Buffer = Buffer\n\texports.SlowBuffer = SlowBuffer\n\texports.INSPECT_MAX_BYTES = 50\n\t\n\t/**\n\t * If `Buffer.TYPED_ARRAY_SUPPORT`:\n\t *   === true    Use Uint8Array implementation (fastest)\n\t *   === false   Use Object implementation (most compatible, even IE6)\n\t *\n\t * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n\t * Opera 11.6+, iOS 4.2+.\n\t *\n\t * Due to various browser bugs, sometimes the Object implementation will be used even\n\t * when the browser supports typed arrays.\n\t *\n\t * Note:\n\t *\n\t *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n\t *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n\t *\n\t *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n\t *\n\t *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n\t *     incorrect length in some situations.\n\t\n\t * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n\t * get the Object implementation, which is slower but behaves correctly.\n\t */\n\tBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n\t  ? global.TYPED_ARRAY_SUPPORT\n\t  : typedArraySupport()\n\t\n\t/*\n\t * Export kMaxLength after typed array support is determined.\n\t */\n\texports.kMaxLength = kMaxLength()\n\t\n\tfunction typedArraySupport () {\n\t  try {\n\t    var arr = new Uint8Array(1)\n\t    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n\t    return arr.foo() === 42 && // typed array instances can be augmented\n\t        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n\t        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n\t  } catch (e) {\n\t    return false\n\t  }\n\t}\n\t\n\tfunction kMaxLength () {\n\t  return Buffer.TYPED_ARRAY_SUPPORT\n\t    ? 0x7fffffff\n\t    : 0x3fffffff\n\t}\n\t\n\tfunction createBuffer (that, length) {\n\t  if (kMaxLength() < length) {\n\t    throw new RangeError('Invalid typed array length')\n\t  }\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(length)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    if (that === null) {\n\t      that = new Buffer(length)\n\t    }\n\t    that.length = length\n\t  }\n\t\n\t  return that\n\t}\n\t\n\t/**\n\t * The Buffer constructor returns instances of `Uint8Array` that have their\n\t * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n\t * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n\t * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n\t * returns a single octet.\n\t *\n\t * The `Uint8Array` prototype remains unmodified.\n\t */\n\t\n\tfunction Buffer (arg, encodingOrOffset, length) {\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n\t    return new Buffer(arg, encodingOrOffset, length)\n\t  }\n\t\n\t  // Common case.\n\t  if (typeof arg === 'number') {\n\t    if (typeof encodingOrOffset === 'string') {\n\t      throw new Error(\n\t        'If encoding is specified then the first argument must be a string'\n\t      )\n\t    }\n\t    return allocUnsafe(this, arg)\n\t  }\n\t  return from(this, arg, encodingOrOffset, length)\n\t}\n\t\n\tBuffer.poolSize = 8192 // not used by this implementation\n\t\n\t// TODO: Legacy, not needed anymore. Remove in next major version.\n\tBuffer._augment = function (arr) {\n\t  arr.__proto__ = Buffer.prototype\n\t  return arr\n\t}\n\t\n\tfunction from (that, value, encodingOrOffset, length) {\n\t  if (typeof value === 'number') {\n\t    throw new TypeError('\"value\" argument must not be a number')\n\t  }\n\t\n\t  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n\t    return fromArrayBuffer(that, value, encodingOrOffset, length)\n\t  }\n\t\n\t  if (typeof value === 'string') {\n\t    return fromString(that, value, encodingOrOffset)\n\t  }\n\t\n\t  return fromObject(that, value)\n\t}\n\t\n\t/**\n\t * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n\t * if value is a number.\n\t * Buffer.from(str[, encoding])\n\t * Buffer.from(array)\n\t * Buffer.from(buffer)\n\t * Buffer.from(arrayBuffer[, byteOffset[, length]])\n\t **/\n\tBuffer.from = function (value, encodingOrOffset, length) {\n\t  return from(null, value, encodingOrOffset, length)\n\t}\n\t\n\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t  Buffer.prototype.__proto__ = Uint8Array.prototype\n\t  Buffer.__proto__ = Uint8Array\n\t  if (typeof Symbol !== 'undefined' && Symbol.species &&\n\t      Buffer[Symbol.species] === Buffer) {\n\t    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n\t    Object.defineProperty(Buffer, Symbol.species, {\n\t      value: null,\n\t      configurable: true\n\t    })\n\t  }\n\t}\n\t\n\tfunction assertSize (size) {\n\t  if (typeof size !== 'number') {\n\t    throw new TypeError('\"size\" argument must be a number')\n\t  } else if (size < 0) {\n\t    throw new RangeError('\"size\" argument must not be negative')\n\t  }\n\t}\n\t\n\tfunction alloc (that, size, fill, encoding) {\n\t  assertSize(size)\n\t  if (size <= 0) {\n\t    return createBuffer(that, size)\n\t  }\n\t  if (fill !== undefined) {\n\t    // Only pay attention to encoding if it's a string. This\n\t    // prevents accidentally sending in a number that would\n\t    // be interpretted as a start offset.\n\t    return typeof encoding === 'string'\n\t      ? createBuffer(that, size).fill(fill, encoding)\n\t      : createBuffer(that, size).fill(fill)\n\t  }\n\t  return createBuffer(that, size)\n\t}\n\t\n\t/**\n\t * Creates a new filled Buffer instance.\n\t * alloc(size[, fill[, encoding]])\n\t **/\n\tBuffer.alloc = function (size, fill, encoding) {\n\t  return alloc(null, size, fill, encoding)\n\t}\n\t\n\tfunction allocUnsafe (that, size) {\n\t  assertSize(size)\n\t  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    for (var i = 0; i < size; ++i) {\n\t      that[i] = 0\n\t    }\n\t  }\n\t  return that\n\t}\n\t\n\t/**\n\t * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n\t * */\n\tBuffer.allocUnsafe = function (size) {\n\t  return allocUnsafe(null, size)\n\t}\n\t/**\n\t * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n\t */\n\tBuffer.allocUnsafeSlow = function (size) {\n\t  return allocUnsafe(null, size)\n\t}\n\t\n\tfunction fromString (that, string, encoding) {\n\t  if (typeof encoding !== 'string' || encoding === '') {\n\t    encoding = 'utf8'\n\t  }\n\t\n\t  if (!Buffer.isEncoding(encoding)) {\n\t    throw new TypeError('\"encoding\" must be a valid string encoding')\n\t  }\n\t\n\t  var length = byteLength(string, encoding) | 0\n\t  that = createBuffer(that, length)\n\t\n\t  var actual = that.write(string, encoding)\n\t\n\t  if (actual !== length) {\n\t    // Writing a hex string, for example, that contains invalid characters will\n\t    // cause everything after the first invalid character to be ignored. (e.g.\n\t    // 'abxxcd' will be treated as 'ab')\n\t    that = that.slice(0, actual)\n\t  }\n\t\n\t  return that\n\t}\n\t\n\tfunction fromArrayLike (that, array) {\n\t  var length = array.length < 0 ? 0 : checked(array.length) | 0\n\t  that = createBuffer(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n\t}\n\t\n\tfunction fromArrayBuffer (that, array, byteOffset, length) {\n\t  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\t\n\t  if (byteOffset < 0 || array.byteLength < byteOffset) {\n\t    throw new RangeError('\\'offset\\' is out of bounds')\n\t  }\n\t\n\t  if (array.byteLength < byteOffset + (length || 0)) {\n\t    throw new RangeError('\\'length\\' is out of bounds')\n\t  }\n\t\n\t  if (byteOffset === undefined && length === undefined) {\n\t    array = new Uint8Array(array)\n\t  } else if (length === undefined) {\n\t    array = new Uint8Array(array, byteOffset)\n\t  } else {\n\t    array = new Uint8Array(array, byteOffset, length)\n\t  }\n\t\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = array\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that = fromArrayLike(that, array)\n\t  }\n\t  return that\n\t}\n\t\n\tfunction fromObject (that, obj) {\n\t  if (Buffer.isBuffer(obj)) {\n\t    var len = checked(obj.length) | 0\n\t    that = createBuffer(that, len)\n\t\n\t    if (that.length === 0) {\n\t      return that\n\t    }\n\t\n\t    obj.copy(that, 0, 0, len)\n\t    return that\n\t  }\n\t\n\t  if (obj) {\n\t    if ((typeof ArrayBuffer !== 'undefined' &&\n\t        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n\t      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n\t        return createBuffer(that, 0)\n\t      }\n\t      return fromArrayLike(that, obj)\n\t    }\n\t\n\t    if (obj.type === 'Buffer' && isArray(obj.data)) {\n\t      return fromArrayLike(that, obj.data)\n\t    }\n\t  }\n\t\n\t  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n\t}\n\t\n\tfunction checked (length) {\n\t  // Note: cannot use `length < kMaxLength()` here because that fails when\n\t  // length is NaN (which is otherwise coerced to zero.)\n\t  if (length >= kMaxLength()) {\n\t    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n\t                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n\t  }\n\t  return length | 0\n\t}\n\t\n\tfunction SlowBuffer (length) {\n\t  if (+length != length) { // eslint-disable-line eqeqeq\n\t    length = 0\n\t  }\n\t  return Buffer.alloc(+length)\n\t}\n\t\n\tBuffer.isBuffer = function isBuffer (b) {\n\t  return !!(b != null && b._isBuffer)\n\t}\n\t\n\tBuffer.compare = function compare (a, b) {\n\t  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n\t    throw new TypeError('Arguments must be Buffers')\n\t  }\n\t\n\t  if (a === b) return 0\n\t\n\t  var x = a.length\n\t  var y = b.length\n\t\n\t  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n\t    if (a[i] !== b[i]) {\n\t      x = a[i]\n\t      y = b[i]\n\t      break\n\t    }\n\t  }\n\t\n\t  if (x < y) return -1\n\t  if (y < x) return 1\n\t  return 0\n\t}\n\t\n\tBuffer.isEncoding = function isEncoding (encoding) {\n\t  switch (String(encoding).toLowerCase()) {\n\t    case 'hex':\n\t    case 'utf8':\n\t    case 'utf-8':\n\t    case 'ascii':\n\t    case 'latin1':\n\t    case 'binary':\n\t    case 'base64':\n\t    case 'ucs2':\n\t    case 'ucs-2':\n\t    case 'utf16le':\n\t    case 'utf-16le':\n\t      return true\n\t    default:\n\t      return false\n\t  }\n\t}\n\t\n\tBuffer.concat = function concat (list, length) {\n\t  if (!isArray(list)) {\n\t    throw new TypeError('\"list\" argument must be an Array of Buffers')\n\t  }\n\t\n\t  if (list.length === 0) {\n\t    return Buffer.alloc(0)\n\t  }\n\t\n\t  var i\n\t  if (length === undefined) {\n\t    length = 0\n\t    for (i = 0; i < list.length; ++i) {\n\t      length += list[i].length\n\t    }\n\t  }\n\t\n\t  var buffer = Buffer.allocUnsafe(length)\n\t  var pos = 0\n\t  for (i = 0; i < list.length; ++i) {\n\t    var buf = list[i]\n\t    if (!Buffer.isBuffer(buf)) {\n\t      throw new TypeError('\"list\" argument must be an Array of Buffers')\n\t    }\n\t    buf.copy(buffer, pos)\n\t    pos += buf.length\n\t  }\n\t  return buffer\n\t}\n\t\n\tfunction byteLength (string, encoding) {\n\t  if (Buffer.isBuffer(string)) {\n\t    return string.length\n\t  }\n\t  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n\t      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n\t    return string.byteLength\n\t  }\n\t  if (typeof string !== 'string') {\n\t    string = '' + string\n\t  }\n\t\n\t  var len = string.length\n\t  if (len === 0) return 0\n\t\n\t  // Use a for loop to avoid recursion\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'ascii':\n\t      case 'latin1':\n\t      case 'binary':\n\t        return len\n\t      case 'utf8':\n\t      case 'utf-8':\n\t      case undefined:\n\t        return utf8ToBytes(string).length\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return len * 2\n\t      case 'hex':\n\t        return len >>> 1\n\t      case 'base64':\n\t        return base64ToBytes(string).length\n\t      default:\n\t        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n\t}\n\tBuffer.byteLength = byteLength\n\t\n\tfunction slowToString (encoding, start, end) {\n\t  var loweredCase = false\n\t\n\t  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n\t  // property of a typed array.\n\t\n\t  // This behaves neither like String nor Uint8Array in that we set start/end\n\t  // to their upper/lower bounds if the value passed is out of range.\n\t  // undefined is handled specially as per ECMA-262 6th Edition,\n\t  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\t  if (start === undefined || start < 0) {\n\t    start = 0\n\t  }\n\t  // Return early if start > this.length. Done here to prevent potential uint32\n\t  // coercion fail below.\n\t  if (start > this.length) {\n\t    return ''\n\t  }\n\t\n\t  if (end === undefined || end > this.length) {\n\t    end = this.length\n\t  }\n\t\n\t  if (end <= 0) {\n\t    return ''\n\t  }\n\t\n\t  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n\t  end >>>= 0\n\t  start >>>= 0\n\t\n\t  if (end <= start) {\n\t    return ''\n\t  }\n\t\n\t  if (!encoding) encoding = 'utf8'\n\t\n\t  while (true) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexSlice(this, start, end)\n\t\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Slice(this, start, end)\n\t\n\t      case 'ascii':\n\t        return asciiSlice(this, start, end)\n\t\n\t      case 'latin1':\n\t      case 'binary':\n\t        return latin1Slice(this, start, end)\n\t\n\t      case 'base64':\n\t        return base64Slice(this, start, end)\n\t\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return utf16leSlice(this, start, end)\n\t\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = (encoding + '').toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n\t}\n\t\n\t// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n\t// Buffer instances.\n\tBuffer.prototype._isBuffer = true\n\t\n\tfunction swap (b, n, m) {\n\t  var i = b[n]\n\t  b[n] = b[m]\n\t  b[m] = i\n\t}\n\t\n\tBuffer.prototype.swap16 = function swap16 () {\n\t  var len = this.length\n\t  if (len % 2 !== 0) {\n\t    throw new RangeError('Buffer size must be a multiple of 16-bits')\n\t  }\n\t  for (var i = 0; i < len; i += 2) {\n\t    swap(this, i, i + 1)\n\t  }\n\t  return this\n\t}\n\t\n\tBuffer.prototype.swap32 = function swap32 () {\n\t  var len = this.length\n\t  if (len % 4 !== 0) {\n\t    throw new RangeError('Buffer size must be a multiple of 32-bits')\n\t  }\n\t  for (var i = 0; i < len; i += 4) {\n\t    swap(this, i, i + 3)\n\t    swap(this, i + 1, i + 2)\n\t  }\n\t  return this\n\t}\n\t\n\tBuffer.prototype.swap64 = function swap64 () {\n\t  var len = this.length\n\t  if (len % 8 !== 0) {\n\t    throw new RangeError('Buffer size must be a multiple of 64-bits')\n\t  }\n\t  for (var i = 0; i < len; i += 8) {\n\t    swap(this, i, i + 7)\n\t    swap(this, i + 1, i + 6)\n\t    swap(this, i + 2, i + 5)\n\t    swap(this, i + 3, i + 4)\n\t  }\n\t  return this\n\t}\n\t\n\tBuffer.prototype.toString = function toString () {\n\t  var length = this.length | 0\n\t  if (length === 0) return ''\n\t  if (arguments.length === 0) return utf8Slice(this, 0, length)\n\t  return slowToString.apply(this, arguments)\n\t}\n\t\n\tBuffer.prototype.equals = function equals (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return true\n\t  return Buffer.compare(this, b) === 0\n\t}\n\t\n\tBuffer.prototype.inspect = function inspect () {\n\t  var str = ''\n\t  var max = exports.INSPECT_MAX_BYTES\n\t  if (this.length > 0) {\n\t    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n\t    if (this.length > max) str += ' ... '\n\t  }\n\t  return '<Buffer ' + str + '>'\n\t}\n\t\n\tBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n\t  if (!Buffer.isBuffer(target)) {\n\t    throw new TypeError('Argument must be a Buffer')\n\t  }\n\t\n\t  if (start === undefined) {\n\t    start = 0\n\t  }\n\t  if (end === undefined) {\n\t    end = target ? target.length : 0\n\t  }\n\t  if (thisStart === undefined) {\n\t    thisStart = 0\n\t  }\n\t  if (thisEnd === undefined) {\n\t    thisEnd = this.length\n\t  }\n\t\n\t  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n\t    throw new RangeError('out of range index')\n\t  }\n\t\n\t  if (thisStart >= thisEnd && start >= end) {\n\t    return 0\n\t  }\n\t  if (thisStart >= thisEnd) {\n\t    return -1\n\t  }\n\t  if (start >= end) {\n\t    return 1\n\t  }\n\t\n\t  start >>>= 0\n\t  end >>>= 0\n\t  thisStart >>>= 0\n\t  thisEnd >>>= 0\n\t\n\t  if (this === target) return 0\n\t\n\t  var x = thisEnd - thisStart\n\t  var y = end - start\n\t  var len = Math.min(x, y)\n\t\n\t  var thisCopy = this.slice(thisStart, thisEnd)\n\t  var targetCopy = target.slice(start, end)\n\t\n\t  for (var i = 0; i < len; ++i) {\n\t    if (thisCopy[i] !== targetCopy[i]) {\n\t      x = thisCopy[i]\n\t      y = targetCopy[i]\n\t      break\n\t    }\n\t  }\n\t\n\t  if (x < y) return -1\n\t  if (y < x) return 1\n\t  return 0\n\t}\n\t\n\t// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n\t// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n\t//\n\t// Arguments:\n\t// - buffer - a Buffer to search\n\t// - val - a string, Buffer, or number\n\t// - byteOffset - an index into `buffer`; will be clamped to an int32\n\t// - encoding - an optional encoding, relevant is val is a string\n\t// - dir - true for indexOf, false for lastIndexOf\n\tfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n\t  // Empty buffer means no match\n\t  if (buffer.length === 0) return -1\n\t\n\t  // Normalize byteOffset\n\t  if (typeof byteOffset === 'string') {\n\t    encoding = byteOffset\n\t    byteOffset = 0\n\t  } else if (byteOffset > 0x7fffffff) {\n\t    byteOffset = 0x7fffffff\n\t  } else if (byteOffset < -0x80000000) {\n\t    byteOffset = -0x80000000\n\t  }\n\t  byteOffset = +byteOffset  // Coerce to Number.\n\t  if (isNaN(byteOffset)) {\n\t    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n\t    byteOffset = dir ? 0 : (buffer.length - 1)\n\t  }\n\t\n\t  // Normalize byteOffset: negative offsets start from the end of the buffer\n\t  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n\t  if (byteOffset >= buffer.length) {\n\t    if (dir) return -1\n\t    else byteOffset = buffer.length - 1\n\t  } else if (byteOffset < 0) {\n\t    if (dir) byteOffset = 0\n\t    else return -1\n\t  }\n\t\n\t  // Normalize val\n\t  if (typeof val === 'string') {\n\t    val = Buffer.from(val, encoding)\n\t  }\n\t\n\t  // Finally, search either indexOf (if dir is true) or lastIndexOf\n\t  if (Buffer.isBuffer(val)) {\n\t    // Special case: looking for empty string/buffer always fails\n\t    if (val.length === 0) {\n\t      return -1\n\t    }\n\t    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n\t  } else if (typeof val === 'number') {\n\t    val = val & 0xFF // Search for a byte value [0-255]\n\t    if (Buffer.TYPED_ARRAY_SUPPORT &&\n\t        typeof Uint8Array.prototype.indexOf === 'function') {\n\t      if (dir) {\n\t        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n\t      } else {\n\t        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n\t      }\n\t    }\n\t    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n\t  }\n\t\n\t  throw new TypeError('val must be string, number or Buffer')\n\t}\n\t\n\tfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n\t  var indexSize = 1\n\t  var arrLength = arr.length\n\t  var valLength = val.length\n\t\n\t  if (encoding !== undefined) {\n\t    encoding = String(encoding).toLowerCase()\n\t    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n\t        encoding === 'utf16le' || encoding === 'utf-16le') {\n\t      if (arr.length < 2 || val.length < 2) {\n\t        return -1\n\t      }\n\t      indexSize = 2\n\t      arrLength /= 2\n\t      valLength /= 2\n\t      byteOffset /= 2\n\t    }\n\t  }\n\t\n\t  function read (buf, i) {\n\t    if (indexSize === 1) {\n\t      return buf[i]\n\t    } else {\n\t      return buf.readUInt16BE(i * indexSize)\n\t    }\n\t  }\n\t\n\t  var i\n\t  if (dir) {\n\t    var foundIndex = -1\n\t    for (i = byteOffset; i < arrLength; i++) {\n\t      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n\t        if (foundIndex === -1) foundIndex = i\n\t        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n\t      } else {\n\t        if (foundIndex !== -1) i -= i - foundIndex\n\t        foundIndex = -1\n\t      }\n\t    }\n\t  } else {\n\t    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n\t    for (i = byteOffset; i >= 0; i--) {\n\t      var found = true\n\t      for (var j = 0; j < valLength; j++) {\n\t        if (read(arr, i + j) !== read(val, j)) {\n\t          found = false\n\t          break\n\t        }\n\t      }\n\t      if (found) return i\n\t    }\n\t  }\n\t\n\t  return -1\n\t}\n\t\n\tBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n\t  return this.indexOf(val, byteOffset, encoding) !== -1\n\t}\n\t\n\tBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n\t  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n\t}\n\t\n\tBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n\t  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n\t}\n\t\n\tfunction hexWrite (buf, string, offset, length) {\n\t  offset = Number(offset) || 0\n\t  var remaining = buf.length - offset\n\t  if (!length) {\n\t    length = remaining\n\t  } else {\n\t    length = Number(length)\n\t    if (length > remaining) {\n\t      length = remaining\n\t    }\n\t  }\n\t\n\t  // must be an even number of digits\n\t  var strLen = string.length\n\t  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\t\n\t  if (length > strLen / 2) {\n\t    length = strLen / 2\n\t  }\n\t  for (var i = 0; i < length; ++i) {\n\t    var parsed = parseInt(string.substr(i * 2, 2), 16)\n\t    if (isNaN(parsed)) return i\n\t    buf[offset + i] = parsed\n\t  }\n\t  return i\n\t}\n\t\n\tfunction utf8Write (buf, string, offset, length) {\n\t  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n\t}\n\t\n\tfunction asciiWrite (buf, string, offset, length) {\n\t  return blitBuffer(asciiToBytes(string), buf, offset, length)\n\t}\n\t\n\tfunction latin1Write (buf, string, offset, length) {\n\t  return asciiWrite(buf, string, offset, length)\n\t}\n\t\n\tfunction base64Write (buf, string, offset, length) {\n\t  return blitBuffer(base64ToBytes(string), buf, offset, length)\n\t}\n\t\n\tfunction ucs2Write (buf, string, offset, length) {\n\t  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n\t}\n\t\n\tBuffer.prototype.write = function write (string, offset, length, encoding) {\n\t  // Buffer#write(string)\n\t  if (offset === undefined) {\n\t    encoding = 'utf8'\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, encoding)\n\t  } else if (length === undefined && typeof offset === 'string') {\n\t    encoding = offset\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, offset[, length][, encoding])\n\t  } else if (isFinite(offset)) {\n\t    offset = offset | 0\n\t    if (isFinite(length)) {\n\t      length = length | 0\n\t      if (encoding === undefined) encoding = 'utf8'\n\t    } else {\n\t      encoding = length\n\t      length = undefined\n\t    }\n\t  // legacy write(string, encoding, offset, length) - remove in v0.13\n\t  } else {\n\t    throw new Error(\n\t      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n\t    )\n\t  }\n\t\n\t  var remaining = this.length - offset\n\t  if (length === undefined || length > remaining) length = remaining\n\t\n\t  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n\t    throw new RangeError('Attempt to write outside buffer bounds')\n\t  }\n\t\n\t  if (!encoding) encoding = 'utf8'\n\t\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexWrite(this, string, offset, length)\n\t\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Write(this, string, offset, length)\n\t\n\t      case 'ascii':\n\t        return asciiWrite(this, string, offset, length)\n\t\n\t      case 'latin1':\n\t      case 'binary':\n\t        return latin1Write(this, string, offset, length)\n\t\n\t      case 'base64':\n\t        // Warning: maxLength not taken into account in base64Write\n\t        return base64Write(this, string, offset, length)\n\t\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return ucs2Write(this, string, offset, length)\n\t\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n\t}\n\t\n\tBuffer.prototype.toJSON = function toJSON () {\n\t  return {\n\t    type: 'Buffer',\n\t    data: Array.prototype.slice.call(this._arr || this, 0)\n\t  }\n\t}\n\t\n\tfunction base64Slice (buf, start, end) {\n\t  if (start === 0 && end === buf.length) {\n\t    return base64.fromByteArray(buf)\n\t  } else {\n\t    return base64.fromByteArray(buf.slice(start, end))\n\t  }\n\t}\n\t\n\tfunction utf8Slice (buf, start, end) {\n\t  end = Math.min(buf.length, end)\n\t  var res = []\n\t\n\t  var i = start\n\t  while (i < end) {\n\t    var firstByte = buf[i]\n\t    var codePoint = null\n\t    var bytesPerSequence = (firstByte > 0xEF) ? 4\n\t      : (firstByte > 0xDF) ? 3\n\t      : (firstByte > 0xBF) ? 2\n\t      : 1\n\t\n\t    if (i + bytesPerSequence <= end) {\n\t      var secondByte, thirdByte, fourthByte, tempCodePoint\n\t\n\t      switch (bytesPerSequence) {\n\t        case 1:\n\t          if (firstByte < 0x80) {\n\t            codePoint = firstByte\n\t          }\n\t          break\n\t        case 2:\n\t          secondByte = buf[i + 1]\n\t          if ((secondByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n\t            if (tempCodePoint > 0x7F) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 3:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n\t            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 4:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          fourthByte = buf[i + 3]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n\t            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t      }\n\t    }\n\t\n\t    if (codePoint === null) {\n\t      // we did not generate a valid codePoint so insert a\n\t      // replacement char (U+FFFD) and advance only 1 byte\n\t      codePoint = 0xFFFD\n\t      bytesPerSequence = 1\n\t    } else if (codePoint > 0xFFFF) {\n\t      // encode to utf16 (surrogate pair dance)\n\t      codePoint -= 0x10000\n\t      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n\t      codePoint = 0xDC00 | codePoint & 0x3FF\n\t    }\n\t\n\t    res.push(codePoint)\n\t    i += bytesPerSequence\n\t  }\n\t\n\t  return decodeCodePointsArray(res)\n\t}\n\t\n\t// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n\t// the lowest limit is Chrome, with 0x10000 args.\n\t// We go 1 magnitude less, for safety\n\tvar MAX_ARGUMENTS_LENGTH = 0x1000\n\t\n\tfunction decodeCodePointsArray (codePoints) {\n\t  var len = codePoints.length\n\t  if (len <= MAX_ARGUMENTS_LENGTH) {\n\t    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n\t  }\n\t\n\t  // Decode in chunks to avoid \"call stack size exceeded\".\n\t  var res = ''\n\t  var i = 0\n\t  while (i < len) {\n\t    res += String.fromCharCode.apply(\n\t      String,\n\t      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n\t    )\n\t  }\n\t  return res\n\t}\n\t\n\tfunction asciiSlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\t\n\t  for (var i = start; i < end; ++i) {\n\t    ret += String.fromCharCode(buf[i] & 0x7F)\n\t  }\n\t  return ret\n\t}\n\t\n\tfunction latin1Slice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\t\n\t  for (var i = start; i < end; ++i) {\n\t    ret += String.fromCharCode(buf[i])\n\t  }\n\t  return ret\n\t}\n\t\n\tfunction hexSlice (buf, start, end) {\n\t  var len = buf.length\n\t\n\t  if (!start || start < 0) start = 0\n\t  if (!end || end < 0 || end > len) end = len\n\t\n\t  var out = ''\n\t  for (var i = start; i < end; ++i) {\n\t    out += toHex(buf[i])\n\t  }\n\t  return out\n\t}\n\t\n\tfunction utf16leSlice (buf, start, end) {\n\t  var bytes = buf.slice(start, end)\n\t  var res = ''\n\t  for (var i = 0; i < bytes.length; i += 2) {\n\t    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n\t  }\n\t  return res\n\t}\n\t\n\tBuffer.prototype.slice = function slice (start, end) {\n\t  var len = this.length\n\t  start = ~~start\n\t  end = end === undefined ? len : ~~end\n\t\n\t  if (start < 0) {\n\t    start += len\n\t    if (start < 0) start = 0\n\t  } else if (start > len) {\n\t    start = len\n\t  }\n\t\n\t  if (end < 0) {\n\t    end += len\n\t    if (end < 0) end = 0\n\t  } else if (end > len) {\n\t    end = len\n\t  }\n\t\n\t  if (end < start) end = start\n\t\n\t  var newBuf\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    newBuf = this.subarray(start, end)\n\t    newBuf.__proto__ = Buffer.prototype\n\t  } else {\n\t    var sliceLen = end - start\n\t    newBuf = new Buffer(sliceLen, undefined)\n\t    for (var i = 0; i < sliceLen; ++i) {\n\t      newBuf[i] = this[i + start]\n\t    }\n\t  }\n\t\n\t  return newBuf\n\t}\n\t\n\t/*\n\t * Need to make sure that buffer isn't trying to write out of bounds.\n\t */\n\tfunction checkOffset (offset, ext, length) {\n\t  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n\t  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n\t}\n\t\n\tBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\t\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\t\n\t  return val\n\t}\n\t\n\tBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) {\n\t    checkOffset(offset, byteLength, this.length)\n\t  }\n\t\n\t  var val = this[offset + --byteLength]\n\t  var mul = 1\n\t  while (byteLength > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --byteLength] * mul\n\t  }\n\t\n\t  return val\n\t}\n\t\n\tBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  return this[offset]\n\t}\n\t\n\tBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return this[offset] | (this[offset + 1] << 8)\n\t}\n\t\n\tBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return (this[offset] << 8) | this[offset + 1]\n\t}\n\t\n\tBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t\n\t  return ((this[offset]) |\n\t      (this[offset + 1] << 8) |\n\t      (this[offset + 2] << 16)) +\n\t      (this[offset + 3] * 0x1000000)\n\t}\n\t\n\tBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t\n\t  return (this[offset] * 0x1000000) +\n\t    ((this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    this[offset + 3])\n\t}\n\t\n\tBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\t\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\t  mul *= 0x80\n\t\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\t\n\t  return val\n\t}\n\t\n\tBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\t\n\t  var i = byteLength\n\t  var mul = 1\n\t  var val = this[offset + --i]\n\t  while (i > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --i] * mul\n\t  }\n\t  mul *= 0x80\n\t\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\t\n\t  return val\n\t}\n\t\n\tBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  if (!(this[offset] & 0x80)) return (this[offset])\n\t  return ((0xff - this[offset] + 1) * -1)\n\t}\n\t\n\tBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset] | (this[offset + 1] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n\t}\n\t\n\tBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset + 1] | (this[offset] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n\t}\n\t\n\tBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t\n\t  return (this[offset]) |\n\t    (this[offset + 1] << 8) |\n\t    (this[offset + 2] << 16) |\n\t    (this[offset + 3] << 24)\n\t}\n\t\n\tBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t\n\t  return (this[offset] << 24) |\n\t    (this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    (this[offset + 3])\n\t}\n\t\n\tBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, true, 23, 4)\n\t}\n\t\n\tBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, false, 23, 4)\n\t}\n\t\n\tBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, true, 52, 8)\n\t}\n\t\n\tBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, false, 52, 8)\n\t}\n\t\n\tfunction checkInt (buf, value, offset, ext, max, min) {\n\t  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n\t  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n\t}\n\t\n\tBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) {\n\t    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n\t    checkInt(this, value, offset, byteLength, maxBytes, 0)\n\t  }\n\t\n\t  var mul = 1\n\t  var i = 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\t\n\t  return offset + byteLength\n\t}\n\t\n\tBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) {\n\t    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n\t    checkInt(this, value, offset, byteLength, maxBytes, 0)\n\t  }\n\t\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\t\n\t  return offset + byteLength\n\t}\n\t\n\tBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n\t}\n\t\n\tfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n\t    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n\t      (littleEndian ? i : 1 - i) * 8\n\t  }\n\t}\n\t\n\tBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n\t}\n\t\n\tBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n\t}\n\t\n\tfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n\t    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n\t  }\n\t}\n\t\n\tBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset + 3] = (value >>> 24)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n\t}\n\t\n\tBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n\t}\n\t\n\tBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\t\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\t\n\t  var i = 0\n\t  var mul = 1\n\t  var sub = 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n\t      sub = 1\n\t    }\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\t\n\t  return offset + byteLength\n\t}\n\t\n\tBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\t\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\t\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  var sub = 0\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n\t      sub = 1\n\t    }\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\t\n\t  return offset + byteLength\n\t}\n\t\n\tBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  if (value < 0) value = 0xff + value + 1\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n\t}\n\t\n\tBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n\t}\n\t\n\tBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n\t}\n\t\n\tBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 3] = (value >>> 24)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n\t}\n\t\n\tBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n\t}\n\t\n\tfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n\t  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n\t  if (offset < 0) throw new RangeError('Index out of range')\n\t}\n\t\n\tfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n\t  return offset + 4\n\t}\n\t\n\tBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, true, noAssert)\n\t}\n\t\n\tBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, false, noAssert)\n\t}\n\t\n\tfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n\t  return offset + 8\n\t}\n\t\n\tBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, true, noAssert)\n\t}\n\t\n\tBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, false, noAssert)\n\t}\n\t\n\t// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\tBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n\t  if (!start) start = 0\n\t  if (!end && end !== 0) end = this.length\n\t  if (targetStart >= target.length) targetStart = target.length\n\t  if (!targetStart) targetStart = 0\n\t  if (end > 0 && end < start) end = start\n\t\n\t  // Copy 0 bytes; we're done\n\t  if (end === start) return 0\n\t  if (target.length === 0 || this.length === 0) return 0\n\t\n\t  // Fatal error conditions\n\t  if (targetStart < 0) {\n\t    throw new RangeError('targetStart out of bounds')\n\t  }\n\t  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n\t  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\t\n\t  // Are we oob?\n\t  if (end > this.length) end = this.length\n\t  if (target.length - targetStart < end - start) {\n\t    end = target.length - targetStart + start\n\t  }\n\t\n\t  var len = end - start\n\t  var i\n\t\n\t  if (this === target && start < targetStart && targetStart < end) {\n\t    // descending copy from end\n\t    for (i = len - 1; i >= 0; --i) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // ascending copy from start\n\t    for (i = 0; i < len; ++i) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else {\n\t    Uint8Array.prototype.set.call(\n\t      target,\n\t      this.subarray(start, start + len),\n\t      targetStart\n\t    )\n\t  }\n\t\n\t  return len\n\t}\n\t\n\t// Usage:\n\t//    buffer.fill(number[, offset[, end]])\n\t//    buffer.fill(buffer[, offset[, end]])\n\t//    buffer.fill(string[, offset[, end]][, encoding])\n\tBuffer.prototype.fill = function fill (val, start, end, encoding) {\n\t  // Handle string cases:\n\t  if (typeof val === 'string') {\n\t    if (typeof start === 'string') {\n\t      encoding = start\n\t      start = 0\n\t      end = this.length\n\t    } else if (typeof end === 'string') {\n\t      encoding = end\n\t      end = this.length\n\t    }\n\t    if (val.length === 1) {\n\t      var code = val.charCodeAt(0)\n\t      if (code < 256) {\n\t        val = code\n\t      }\n\t    }\n\t    if (encoding !== undefined && typeof encoding !== 'string') {\n\t      throw new TypeError('encoding must be a string')\n\t    }\n\t    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n\t      throw new TypeError('Unknown encoding: ' + encoding)\n\t    }\n\t  } else if (typeof val === 'number') {\n\t    val = val & 255\n\t  }\n\t\n\t  // Invalid ranges are not set to a default, so can range check early.\n\t  if (start < 0 || this.length < start || this.length < end) {\n\t    throw new RangeError('Out of range index')\n\t  }\n\t\n\t  if (end <= start) {\n\t    return this\n\t  }\n\t\n\t  start = start >>> 0\n\t  end = end === undefined ? this.length : end >>> 0\n\t\n\t  if (!val) val = 0\n\t\n\t  var i\n\t  if (typeof val === 'number') {\n\t    for (i = start; i < end; ++i) {\n\t      this[i] = val\n\t    }\n\t  } else {\n\t    var bytes = Buffer.isBuffer(val)\n\t      ? val\n\t      : utf8ToBytes(new Buffer(val, encoding).toString())\n\t    var len = bytes.length\n\t    for (i = 0; i < end - start; ++i) {\n\t      this[i + start] = bytes[i % len]\n\t    }\n\t  }\n\t\n\t  return this\n\t}\n\t\n\t// HELPER FUNCTIONS\n\t// ================\n\t\n\tvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\t\n\tfunction base64clean (str) {\n\t  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n\t  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n\t  // Node converts strings with length < 2 to ''\n\t  if (str.length < 2) return ''\n\t  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\t  while (str.length % 4 !== 0) {\n\t    str = str + '='\n\t  }\n\t  return str\n\t}\n\t\n\tfunction stringtrim (str) {\n\t  if (str.trim) return str.trim()\n\t  return str.replace(/^\\s+|\\s+$/g, '')\n\t}\n\t\n\tfunction toHex (n) {\n\t  if (n < 16) return '0' + n.toString(16)\n\t  return n.toString(16)\n\t}\n\t\n\tfunction utf8ToBytes (string, units) {\n\t  units = units || Infinity\n\t  var codePoint\n\t  var length = string.length\n\t  var leadSurrogate = null\n\t  var bytes = []\n\t\n\t  for (var i = 0; i < length; ++i) {\n\t    codePoint = string.charCodeAt(i)\n\t\n\t    // is surrogate component\n\t    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n\t      // last char was a lead\n\t      if (!leadSurrogate) {\n\t        // no lead yet\n\t        if (codePoint > 0xDBFF) {\n\t          // unexpected trail\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        } else if (i + 1 === length) {\n\t          // unpaired lead\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        }\n\t\n\t        // valid lead\n\t        leadSurrogate = codePoint\n\t\n\t        continue\n\t      }\n\t\n\t      // 2 leads in a row\n\t      if (codePoint < 0xDC00) {\n\t        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t        leadSurrogate = codePoint\n\t        continue\n\t      }\n\t\n\t      // valid surrogate pair\n\t      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n\t    } else if (leadSurrogate) {\n\t      // valid bmp char, but last char was a lead\n\t      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t    }\n\t\n\t    leadSurrogate = null\n\t\n\t    // encode utf8\n\t    if (codePoint < 0x80) {\n\t      if ((units -= 1) < 0) break\n\t      bytes.push(codePoint)\n\t    } else if (codePoint < 0x800) {\n\t      if ((units -= 2) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x6 | 0xC0,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x10000) {\n\t      if ((units -= 3) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0xC | 0xE0,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x110000) {\n\t      if ((units -= 4) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x12 | 0xF0,\n\t        codePoint >> 0xC & 0x3F | 0x80,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else {\n\t      throw new Error('Invalid code point')\n\t    }\n\t  }\n\t\n\t  return bytes\n\t}\n\t\n\tfunction asciiToBytes (str) {\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; ++i) {\n\t    // Node's code seems to be doing this and not & 0x7F..\n\t    byteArray.push(str.charCodeAt(i) & 0xFF)\n\t  }\n\t  return byteArray\n\t}\n\t\n\tfunction utf16leToBytes (str, units) {\n\t  var c, hi, lo\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; ++i) {\n\t    if ((units -= 2) < 0) break\n\t\n\t    c = str.charCodeAt(i)\n\t    hi = c >> 8\n\t    lo = c % 256\n\t    byteArray.push(lo)\n\t    byteArray.push(hi)\n\t  }\n\t\n\t  return byteArray\n\t}\n\t\n\tfunction base64ToBytes (str) {\n\t  return base64.toByteArray(base64clean(str))\n\t}\n\t\n\tfunction blitBuffer (src, dst, offset, length) {\n\t  for (var i = 0; i < length; ++i) {\n\t    if ((i + offset >= dst.length) || (i >= src.length)) break\n\t    dst[i + offset] = src[i]\n\t  }\n\t  return i\n\t}\n\t\n\tfunction isnan (val) {\n\t  return val !== val // eslint-disable-line no-self-compare\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports) {\n\n\t'use strict'\n\t\n\texports.byteLength = byteLength\n\texports.toByteArray = toByteArray\n\texports.fromByteArray = fromByteArray\n\t\n\tvar lookup = []\n\tvar revLookup = []\n\tvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\t\n\tvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n\tfor (var i = 0, len = code.length; i < len; ++i) {\n\t  lookup[i] = code[i]\n\t  revLookup[code.charCodeAt(i)] = i\n\t}\n\t\n\t// Support decoding URL-safe base64 strings, as Node.js does.\n\t// See: https://en.wikipedia.org/wiki/Base64#URL_applications\n\trevLookup['-'.charCodeAt(0)] = 62\n\trevLookup['_'.charCodeAt(0)] = 63\n\t\n\tfunction getLens (b64) {\n\t  var len = b64.length\n\t\n\t  if (len % 4 > 0) {\n\t    throw new Error('Invalid string. Length must be a multiple of 4')\n\t  }\n\t\n\t  // Trim off extra bytes after placeholder bytes are found\n\t  // See: https://github.com/beatgammit/base64-js/issues/42\n\t  var validLen = b64.indexOf('=')\n\t  if (validLen === -1) validLen = len\n\t\n\t  var placeHoldersLen = validLen === len\n\t    ? 0\n\t    : 4 - (validLen % 4)\n\t\n\t  return [validLen, placeHoldersLen]\n\t}\n\t\n\t// base64 is 4/3 + up to two characters of the original data\n\tfunction byteLength (b64) {\n\t  var lens = getLens(b64)\n\t  var validLen = lens[0]\n\t  var placeHoldersLen = lens[1]\n\t  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n\t}\n\t\n\tfunction _byteLength (b64, validLen, placeHoldersLen) {\n\t  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n\t}\n\t\n\tfunction toByteArray (b64) {\n\t  var tmp\n\t  var lens = getLens(b64)\n\t  var validLen = lens[0]\n\t  var placeHoldersLen = lens[1]\n\t\n\t  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\t\n\t  var curByte = 0\n\t\n\t  // if there are placeholders, only get up to the last complete 4 chars\n\t  var len = placeHoldersLen > 0\n\t    ? validLen - 4\n\t    : validLen\n\t\n\t  for (var i = 0; i < len; i += 4) {\n\t    tmp =\n\t      (revLookup[b64.charCodeAt(i)] << 18) |\n\t      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n\t      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n\t      revLookup[b64.charCodeAt(i + 3)]\n\t    arr[curByte++] = (tmp >> 16) & 0xFF\n\t    arr[curByte++] = (tmp >> 8) & 0xFF\n\t    arr[curByte++] = tmp & 0xFF\n\t  }\n\t\n\t  if (placeHoldersLen === 2) {\n\t    tmp =\n\t      (revLookup[b64.charCodeAt(i)] << 2) |\n\t      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n\t    arr[curByte++] = tmp & 0xFF\n\t  }\n\t\n\t  if (placeHoldersLen === 1) {\n\t    tmp =\n\t      (revLookup[b64.charCodeAt(i)] << 10) |\n\t      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n\t      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n\t    arr[curByte++] = (tmp >> 8) & 0xFF\n\t    arr[curByte++] = tmp & 0xFF\n\t  }\n\t\n\t  return arr\n\t}\n\t\n\tfunction tripletToBase64 (num) {\n\t  return lookup[num >> 18 & 0x3F] +\n\t    lookup[num >> 12 & 0x3F] +\n\t    lookup[num >> 6 & 0x3F] +\n\t    lookup[num & 0x3F]\n\t}\n\t\n\tfunction encodeChunk (uint8, start, end) {\n\t  var tmp\n\t  var output = []\n\t  for (var i = start; i < end; i += 3) {\n\t    tmp =\n\t      ((uint8[i] << 16) & 0xFF0000) +\n\t      ((uint8[i + 1] << 8) & 0xFF00) +\n\t      (uint8[i + 2] & 0xFF)\n\t    output.push(tripletToBase64(tmp))\n\t  }\n\t  return output.join('')\n\t}\n\t\n\tfunction fromByteArray (uint8) {\n\t  var tmp\n\t  var len = uint8.length\n\t  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n\t  var parts = []\n\t  var maxChunkLength = 16383 // must be multiple of 3\n\t\n\t  // go through the array every three bytes, we'll deal with trailing stuff later\n\t  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n\t    parts.push(encodeChunk(\n\t      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n\t    ))\n\t  }\n\t\n\t  // pad the end with zeros, but make sure to not forget the extra bytes\n\t  if (extraBytes === 1) {\n\t    tmp = uint8[len - 1]\n\t    parts.push(\n\t      lookup[tmp >> 2] +\n\t      lookup[(tmp << 4) & 0x3F] +\n\t      '=='\n\t    )\n\t  } else if (extraBytes === 2) {\n\t    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n\t    parts.push(\n\t      lookup[tmp >> 10] +\n\t      lookup[(tmp >> 4) & 0x3F] +\n\t      lookup[(tmp << 2) & 0x3F] +\n\t      '='\n\t    )\n\t  }\n\t\n\t  return parts.join('')\n\t}\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports) {\n\n\texports.read = function (buffer, offset, isLE, mLen, nBytes) {\n\t  var e, m\n\t  var eLen = (nBytes * 8) - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var nBits = -7\n\t  var i = isLE ? (nBytes - 1) : 0\n\t  var d = isLE ? -1 : 1\n\t  var s = buffer[offset + i]\n\t\n\t  i += d\n\t\n\t  e = s & ((1 << (-nBits)) - 1)\n\t  s >>= (-nBits)\n\t  nBits += eLen\n\t  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\t\n\t  m = e & ((1 << (-nBits)) - 1)\n\t  e >>= (-nBits)\n\t  nBits += mLen\n\t  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\t\n\t  if (e === 0) {\n\t    e = 1 - eBias\n\t  } else if (e === eMax) {\n\t    return m ? NaN : ((s ? -1 : 1) * Infinity)\n\t  } else {\n\t    m = m + Math.pow(2, mLen)\n\t    e = e - eBias\n\t  }\n\t  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n\t}\n\t\n\texports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n\t  var e, m, c\n\t  var eLen = (nBytes * 8) - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n\t  var i = isLE ? 0 : (nBytes - 1)\n\t  var d = isLE ? 1 : -1\n\t  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\t\n\t  value = Math.abs(value)\n\t\n\t  if (isNaN(value) || value === Infinity) {\n\t    m = isNaN(value) ? 1 : 0\n\t    e = eMax\n\t  } else {\n\t    e = Math.floor(Math.log(value) / Math.LN2)\n\t    if (value * (c = Math.pow(2, -e)) < 1) {\n\t      e--\n\t      c *= 2\n\t    }\n\t    if (e + eBias >= 1) {\n\t      value += rt / c\n\t    } else {\n\t      value += rt * Math.pow(2, 1 - eBias)\n\t    }\n\t    if (value * c >= 2) {\n\t      e++\n\t      c /= 2\n\t    }\n\t\n\t    if (e + eBias >= eMax) {\n\t      m = 0\n\t      e = eMax\n\t    } else if (e + eBias >= 1) {\n\t      m = ((value * c) - 1) * Math.pow(2, mLen)\n\t      e = e + eBias\n\t    } else {\n\t      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n\t      e = 0\n\t    }\n\t  }\n\t\n\t  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\t\n\t  e = (e << mLen) | m\n\t  eLen += mLen\n\t  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\t\n\t  buffer[offset + i - d] |= s * 128\n\t}\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports) {\n\n\tvar toString = {}.toString;\n\t\n\tmodule.exports = Array.isArray || function (arr) {\n\t  return toString.call(arr) == '[object Array]';\n\t};\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global, Buffer) {(function() {\n\t  var g = ('undefined' === typeof window ? global : window) || {}\n\t  _crypto = (\n\t    g.crypto || g.msCrypto || __webpack_require__(66)\n\t  )\n\t  module.exports = function(size) {\n\t    // Modern Browsers\n\t    if(_crypto.getRandomValues) {\n\t      var bytes = new Buffer(size); //in browserify, this is an extended Uint8Array\n\t      /* This will not work in older browsers.\n\t       * See https://developer.mozilla.org/en-US/docs/Web/API/window.crypto.getRandomValues\n\t       */\n\t    \n\t      _crypto.getRandomValues(bytes);\n\t      return bytes;\n\t    }\n\t    else if (_crypto.randomBytes) {\n\t      return _crypto.randomBytes(size)\n\t    }\n\t    else\n\t      throw new Error(\n\t        'secure random number generation not supported by this browser\\n'+\n\t        'use chrome, FireFox or Internet Explorer 11'\n\t      )\n\t  }\n\t}())\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }()), __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var createHash = __webpack_require__(68)\n\t\n\tvar md5 = toConstructor(__webpack_require__(77))\n\tvar rmd160 = toConstructor(__webpack_require__(79))\n\t\n\tfunction toConstructor (fn) {\n\t  return function () {\n\t    var buffers = []\n\t    var m= {\n\t      update: function (data, enc) {\n\t        if(!Buffer.isBuffer(data)) data = new Buffer(data, enc)\n\t        buffers.push(data)\n\t        return this\n\t      },\n\t      digest: function (enc) {\n\t        var buf = Buffer.concat(buffers)\n\t        var r = fn(buf)\n\t        buffers = null\n\t        return enc ? r.toString(enc) : r\n\t      }\n\t    }\n\t    return m\n\t  }\n\t}\n\t\n\tmodule.exports = function (alg) {\n\t  if('md5' === alg) return new md5()\n\t  if('rmd160' === alg) return new rmd160()\n\t  return createHash(alg)\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar exports = module.exports = function (alg) {\n\t  var Alg = exports[alg]\n\t  if(!Alg) throw new Error(alg + ' is not supported (we accept pull requests)')\n\t  return new Alg()\n\t}\n\t\n\tvar Buffer = __webpack_require__(61).Buffer\n\tvar Hash   = __webpack_require__(69)(Buffer)\n\t\n\texports.sha1 = __webpack_require__(70)(Buffer, Hash)\n\texports.sha256 = __webpack_require__(75)(Buffer, Hash)\n\texports.sha512 = __webpack_require__(76)(Buffer, Hash)\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = function (Buffer) {\n\t\n\t  //prototype class for hash functions\n\t  function Hash (blockSize, finalSize) {\n\t    this._block = new Buffer(blockSize) //new Uint32Array(blockSize/4)\n\t    this._finalSize = finalSize\n\t    this._blockSize = blockSize\n\t    this._len = 0\n\t    this._s = 0\n\t  }\n\t\n\t  Hash.prototype.init = function () {\n\t    this._s = 0\n\t    this._len = 0\n\t  }\n\t\n\t  Hash.prototype.update = function (data, enc) {\n\t    if (\"string\" === typeof data) {\n\t      enc = enc || \"utf8\"\n\t      data = new Buffer(data, enc)\n\t    }\n\t\n\t    var l = this._len += data.length\n\t    var s = this._s = (this._s || 0)\n\t    var f = 0\n\t    var buffer = this._block\n\t\n\t    while (s < l) {\n\t      var t = Math.min(data.length, f + this._blockSize - (s % this._blockSize))\n\t      var ch = (t - f)\n\t\n\t      for (var i = 0; i < ch; i++) {\n\t        buffer[(s % this._blockSize) + i] = data[i + f]\n\t      }\n\t\n\t      s += ch\n\t      f += ch\n\t\n\t      if ((s % this._blockSize) === 0) {\n\t        this._update(buffer)\n\t      }\n\t    }\n\t    this._s = s\n\t\n\t    return this\n\t  }\n\t\n\t  Hash.prototype.digest = function (enc) {\n\t    // Suppose the length of the message M, in bits, is l\n\t    var l = this._len * 8\n\t\n\t    // Append the bit 1 to the end of the message\n\t    this._block[this._len % this._blockSize] = 0x80\n\t\n\t    // and then k zero bits, where k is the smallest non-negative solution to the equation (l + 1 + k) === finalSize mod blockSize\n\t    this._block.fill(0, this._len % this._blockSize + 1)\n\t\n\t    if (l % (this._blockSize * 8) >= this._finalSize * 8) {\n\t      this._update(this._block)\n\t      this._block.fill(0)\n\t    }\n\t\n\t    // to this append the block which is equal to the number l written in binary\n\t    // TODO: handle case where l is > Math.pow(2, 29)\n\t    this._block.writeInt32BE(l, this._blockSize - 4)\n\t\n\t    var hash = this._update(this._block) || this._hash()\n\t\n\t    return enc ? hash.toString(enc) : hash\n\t  }\n\t\n\t  Hash.prototype._update = function () {\n\t    throw new Error('_update must be implemented by subclass')\n\t  }\n\t\n\t  return Hash\n\t}\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n\t * in FIPS PUB 180-1\n\t * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n\t * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n\t * Distributed under the BSD License\n\t * See http://pajhome.org.uk/crypt/md5 for details.\n\t */\n\t\n\tvar inherits = __webpack_require__(71).inherits\n\t\n\tmodule.exports = function (Buffer, Hash) {\n\t\n\t  var A = 0|0\n\t  var B = 4|0\n\t  var C = 8|0\n\t  var D = 12|0\n\t  var E = 16|0\n\t\n\t  var W = new (typeof Int32Array === 'undefined' ? Array : Int32Array)(80)\n\t\n\t  var POOL = []\n\t\n\t  function Sha1 () {\n\t    if(POOL.length)\n\t      return POOL.pop().init()\n\t\n\t    if(!(this instanceof Sha1)) return new Sha1()\n\t    this._w = W\n\t    Hash.call(this, 16*4, 14*4)\n\t\n\t    this._h = null\n\t    this.init()\n\t  }\n\t\n\t  inherits(Sha1, Hash)\n\t\n\t  Sha1.prototype.init = function () {\n\t    this._a = 0x67452301\n\t    this._b = 0xefcdab89\n\t    this._c = 0x98badcfe\n\t    this._d = 0x10325476\n\t    this._e = 0xc3d2e1f0\n\t\n\t    Hash.prototype.init.call(this)\n\t    return this\n\t  }\n\t\n\t  Sha1.prototype._POOL = POOL\n\t  Sha1.prototype._update = function (X) {\n\t\n\t    var a, b, c, d, e, _a, _b, _c, _d, _e\n\t\n\t    a = _a = this._a\n\t    b = _b = this._b\n\t    c = _c = this._c\n\t    d = _d = this._d\n\t    e = _e = this._e\n\t\n\t    var w = this._w\n\t\n\t    for(var j = 0; j < 80; j++) {\n\t      var W = w[j] = j < 16 ? X.readInt32BE(j*4)\n\t        : rol(w[j - 3] ^ w[j -  8] ^ w[j - 14] ^ w[j - 16], 1)\n\t\n\t      var t = add(\n\t        add(rol(a, 5), sha1_ft(j, b, c, d)),\n\t        add(add(e, W), sha1_kt(j))\n\t      )\n\t\n\t      e = d\n\t      d = c\n\t      c = rol(b, 30)\n\t      b = a\n\t      a = t\n\t    }\n\t\n\t    this._a = add(a, _a)\n\t    this._b = add(b, _b)\n\t    this._c = add(c, _c)\n\t    this._d = add(d, _d)\n\t    this._e = add(e, _e)\n\t  }\n\t\n\t  Sha1.prototype._hash = function () {\n\t    if(POOL.length < 100) POOL.push(this)\n\t    var H = new Buffer(20)\n\t    //console.log(this._a|0, this._b|0, this._c|0, this._d|0, this._e|0)\n\t    H.writeInt32BE(this._a|0, A)\n\t    H.writeInt32BE(this._b|0, B)\n\t    H.writeInt32BE(this._c|0, C)\n\t    H.writeInt32BE(this._d|0, D)\n\t    H.writeInt32BE(this._e|0, E)\n\t    return H\n\t  }\n\t\n\t  /*\n\t   * Perform the appropriate triplet combination function for the current\n\t   * iteration\n\t   */\n\t  function sha1_ft(t, b, c, d) {\n\t    if(t < 20) return (b & c) | ((~b) & d);\n\t    if(t < 40) return b ^ c ^ d;\n\t    if(t < 60) return (b & c) | (b & d) | (c & d);\n\t    return b ^ c ^ d;\n\t  }\n\t\n\t  /*\n\t   * Determine the appropriate additive constant for the current iteration\n\t   */\n\t  function sha1_kt(t) {\n\t    return (t < 20) ?  1518500249 : (t < 40) ?  1859775393 :\n\t           (t < 60) ? -1894007588 : -899497514;\n\t  }\n\t\n\t  /*\n\t   * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n\t   * to work around bugs in some JS interpreters.\n\t   * //dominictarr: this is 10 years old, so maybe this can be dropped?)\n\t   *\n\t   */\n\t  function add(x, y) {\n\t    return (x + y ) | 0\n\t  //lets see how this goes on testling.\n\t  //  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n\t  //  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\t  //  return (msw << 16) | (lsw & 0xFFFF);\n\t  }\n\t\n\t  /*\n\t   * Bitwise rotate a 32-bit number to the left.\n\t   */\n\t  function rol(num, cnt) {\n\t    return (num << cnt) | (num >>> (32 - cnt));\n\t  }\n\t\n\t  return Sha1\n\t}\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\tvar formatRegExp = /%[sdj%]/g;\n\texports.format = function(f) {\n\t  if (!isString(f)) {\n\t    var objects = [];\n\t    for (var i = 0; i < arguments.length; i++) {\n\t      objects.push(inspect(arguments[i]));\n\t    }\n\t    return objects.join(' ');\n\t  }\n\t\n\t  var i = 1;\n\t  var args = arguments;\n\t  var len = args.length;\n\t  var str = String(f).replace(formatRegExp, function(x) {\n\t    if (x === '%%') return '%';\n\t    if (i >= len) return x;\n\t    switch (x) {\n\t      case '%s': return String(args[i++]);\n\t      case '%d': return Number(args[i++]);\n\t      case '%j':\n\t        try {\n\t          return JSON.stringify(args[i++]);\n\t        } catch (_) {\n\t          return '[Circular]';\n\t        }\n\t      default:\n\t        return x;\n\t    }\n\t  });\n\t  for (var x = args[i]; i < len; x = args[++i]) {\n\t    if (isNull(x) || !isObject(x)) {\n\t      str += ' ' + x;\n\t    } else {\n\t      str += ' ' + inspect(x);\n\t    }\n\t  }\n\t  return str;\n\t};\n\t\n\t\n\t// Mark that a method should not be used.\n\t// Returns a modified function which warns once by default.\n\t// If --no-deprecation is set, then it is a no-op.\n\texports.deprecate = function(fn, msg) {\n\t  // Allow for deprecating things in the process of starting up.\n\t  if (isUndefined(global.process)) {\n\t    return function() {\n\t      return exports.deprecate(fn, msg).apply(this, arguments);\n\t    };\n\t  }\n\t\n\t  if (process.noDeprecation === true) {\n\t    return fn;\n\t  }\n\t\n\t  var warned = false;\n\t  function deprecated() {\n\t    if (!warned) {\n\t      if (process.throwDeprecation) {\n\t        throw new Error(msg);\n\t      } else if (process.traceDeprecation) {\n\t        console.trace(msg);\n\t      } else {\n\t        console.error(msg);\n\t      }\n\t      warned = true;\n\t    }\n\t    return fn.apply(this, arguments);\n\t  }\n\t\n\t  return deprecated;\n\t};\n\t\n\t\n\tvar debugs = {};\n\tvar debugEnviron;\n\texports.debuglog = function(set) {\n\t  if (isUndefined(debugEnviron))\n\t    debugEnviron = process.env.NODE_DEBUG || '';\n\t  set = set.toUpperCase();\n\t  if (!debugs[set]) {\n\t    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n\t      var pid = process.pid;\n\t      debugs[set] = function() {\n\t        var msg = exports.format.apply(exports, arguments);\n\t        console.error('%s %d: %s', set, pid, msg);\n\t      };\n\t    } else {\n\t      debugs[set] = function() {};\n\t    }\n\t  }\n\t  return debugs[set];\n\t};\n\t\n\t\n\t/**\n\t * Echos the value of a value. Trys to print the value out\n\t * in the best way possible given the different types.\n\t *\n\t * @param {Object} obj The object to print out.\n\t * @param {Object} opts Optional options object that alters the output.\n\t */\n\t/* legacy: obj, showHidden, depth, colors*/\n\tfunction inspect(obj, opts) {\n\t  // default options\n\t  var ctx = {\n\t    seen: [],\n\t    stylize: stylizeNoColor\n\t  };\n\t  // legacy...\n\t  if (arguments.length >= 3) ctx.depth = arguments[2];\n\t  if (arguments.length >= 4) ctx.colors = arguments[3];\n\t  if (isBoolean(opts)) {\n\t    // legacy...\n\t    ctx.showHidden = opts;\n\t  } else if (opts) {\n\t    // got an \"options\" object\n\t    exports._extend(ctx, opts);\n\t  }\n\t  // set default options\n\t  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n\t  if (isUndefined(ctx.depth)) ctx.depth = 2;\n\t  if (isUndefined(ctx.colors)) ctx.colors = false;\n\t  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n\t  if (ctx.colors) ctx.stylize = stylizeWithColor;\n\t  return formatValue(ctx, obj, ctx.depth);\n\t}\n\texports.inspect = inspect;\n\t\n\t\n\t// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\n\tinspect.colors = {\n\t  'bold' : [1, 22],\n\t  'italic' : [3, 23],\n\t  'underline' : [4, 24],\n\t  'inverse' : [7, 27],\n\t  'white' : [37, 39],\n\t  'grey' : [90, 39],\n\t  'black' : [30, 39],\n\t  'blue' : [34, 39],\n\t  'cyan' : [36, 39],\n\t  'green' : [32, 39],\n\t  'magenta' : [35, 39],\n\t  'red' : [31, 39],\n\t  'yellow' : [33, 39]\n\t};\n\t\n\t// Don't use 'blue' not visible on cmd.exe\n\tinspect.styles = {\n\t  'special': 'cyan',\n\t  'number': 'yellow',\n\t  'boolean': 'yellow',\n\t  'undefined': 'grey',\n\t  'null': 'bold',\n\t  'string': 'green',\n\t  'date': 'magenta',\n\t  // \"name\": intentionally not styling\n\t  'regexp': 'red'\n\t};\n\t\n\t\n\tfunction stylizeWithColor(str, styleType) {\n\t  var style = inspect.styles[styleType];\n\t\n\t  if (style) {\n\t    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n\t           '\\u001b[' + inspect.colors[style][1] + 'm';\n\t  } else {\n\t    return str;\n\t  }\n\t}\n\t\n\t\n\tfunction stylizeNoColor(str, styleType) {\n\t  return str;\n\t}\n\t\n\t\n\tfunction arrayToHash(array) {\n\t  var hash = {};\n\t\n\t  array.forEach(function(val, idx) {\n\t    hash[val] = true;\n\t  });\n\t\n\t  return hash;\n\t}\n\t\n\t\n\tfunction formatValue(ctx, value, recurseTimes) {\n\t  // Provide a hook for user-specified inspect functions.\n\t  // Check that value is an object with an inspect function on it\n\t  if (ctx.customInspect &&\n\t      value &&\n\t      isFunction(value.inspect) &&\n\t      // Filter out the util module, it's inspect function is special\n\t      value.inspect !== exports.inspect &&\n\t      // Also filter out any prototype objects using the circular check.\n\t      !(value.constructor && value.constructor.prototype === value)) {\n\t    var ret = value.inspect(recurseTimes, ctx);\n\t    if (!isString(ret)) {\n\t      ret = formatValue(ctx, ret, recurseTimes);\n\t    }\n\t    return ret;\n\t  }\n\t\n\t  // Primitive types cannot have properties\n\t  var primitive = formatPrimitive(ctx, value);\n\t  if (primitive) {\n\t    return primitive;\n\t  }\n\t\n\t  // Look up the keys of the object.\n\t  var keys = Object.keys(value);\n\t  var visibleKeys = arrayToHash(keys);\n\t\n\t  if (ctx.showHidden) {\n\t    keys = Object.getOwnPropertyNames(value);\n\t  }\n\t\n\t  // IE doesn't make error fields non-enumerable\n\t  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n\t  if (isError(value)\n\t      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n\t    return formatError(value);\n\t  }\n\t\n\t  // Some type of object without properties can be shortcutted.\n\t  if (keys.length === 0) {\n\t    if (isFunction(value)) {\n\t      var name = value.name ? ': ' + value.name : '';\n\t      return ctx.stylize('[Function' + name + ']', 'special');\n\t    }\n\t    if (isRegExp(value)) {\n\t      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n\t    }\n\t    if (isDate(value)) {\n\t      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n\t    }\n\t    if (isError(value)) {\n\t      return formatError(value);\n\t    }\n\t  }\n\t\n\t  var base = '', array = false, braces = ['{', '}'];\n\t\n\t  // Make Array say that they are Array\n\t  if (isArray(value)) {\n\t    array = true;\n\t    braces = ['[', ']'];\n\t  }\n\t\n\t  // Make functions say that they are functions\n\t  if (isFunction(value)) {\n\t    var n = value.name ? ': ' + value.name : '';\n\t    base = ' [Function' + n + ']';\n\t  }\n\t\n\t  // Make RegExps say that they are RegExps\n\t  if (isRegExp(value)) {\n\t    base = ' ' + RegExp.prototype.toString.call(value);\n\t  }\n\t\n\t  // Make dates with properties first say the date\n\t  if (isDate(value)) {\n\t    base = ' ' + Date.prototype.toUTCString.call(value);\n\t  }\n\t\n\t  // Make error with message first say the error\n\t  if (isError(value)) {\n\t    base = ' ' + formatError(value);\n\t  }\n\t\n\t  if (keys.length === 0 && (!array || value.length == 0)) {\n\t    return braces[0] + base + braces[1];\n\t  }\n\t\n\t  if (recurseTimes < 0) {\n\t    if (isRegExp(value)) {\n\t      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n\t    } else {\n\t      return ctx.stylize('[Object]', 'special');\n\t    }\n\t  }\n\t\n\t  ctx.seen.push(value);\n\t\n\t  var output;\n\t  if (array) {\n\t    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n\t  } else {\n\t    output = keys.map(function(key) {\n\t      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n\t    });\n\t  }\n\t\n\t  ctx.seen.pop();\n\t\n\t  return reduceToSingleString(output, base, braces);\n\t}\n\t\n\t\n\tfunction formatPrimitive(ctx, value) {\n\t  if (isUndefined(value))\n\t    return ctx.stylize('undefined', 'undefined');\n\t  if (isString(value)) {\n\t    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n\t                                             .replace(/'/g, \"\\\\'\")\n\t                                             .replace(/\\\\\"/g, '\"') + '\\'';\n\t    return ctx.stylize(simple, 'string');\n\t  }\n\t  if (isNumber(value))\n\t    return ctx.stylize('' + value, 'number');\n\t  if (isBoolean(value))\n\t    return ctx.stylize('' + value, 'boolean');\n\t  // For some reason typeof null is \"object\", so special case here.\n\t  if (isNull(value))\n\t    return ctx.stylize('null', 'null');\n\t}\n\t\n\t\n\tfunction formatError(value) {\n\t  return '[' + Error.prototype.toString.call(value) + ']';\n\t}\n\t\n\t\n\tfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n\t  var output = [];\n\t  for (var i = 0, l = value.length; i < l; ++i) {\n\t    if (hasOwnProperty(value, String(i))) {\n\t      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n\t          String(i), true));\n\t    } else {\n\t      output.push('');\n\t    }\n\t  }\n\t  keys.forEach(function(key) {\n\t    if (!key.match(/^\\d+$/)) {\n\t      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n\t          key, true));\n\t    }\n\t  });\n\t  return output;\n\t}\n\t\n\t\n\tfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n\t  var name, str, desc;\n\t  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n\t  if (desc.get) {\n\t    if (desc.set) {\n\t      str = ctx.stylize('[Getter/Setter]', 'special');\n\t    } else {\n\t      str = ctx.stylize('[Getter]', 'special');\n\t    }\n\t  } else {\n\t    if (desc.set) {\n\t      str = ctx.stylize('[Setter]', 'special');\n\t    }\n\t  }\n\t  if (!hasOwnProperty(visibleKeys, key)) {\n\t    name = '[' + key + ']';\n\t  }\n\t  if (!str) {\n\t    if (ctx.seen.indexOf(desc.value) < 0) {\n\t      if (isNull(recurseTimes)) {\n\t        str = formatValue(ctx, desc.value, null);\n\t      } else {\n\t        str = formatValue(ctx, desc.value, recurseTimes - 1);\n\t      }\n\t      if (str.indexOf('\\n') > -1) {\n\t        if (array) {\n\t          str = str.split('\\n').map(function(line) {\n\t            return '  ' + line;\n\t          }).join('\\n').substr(2);\n\t        } else {\n\t          str = '\\n' + str.split('\\n').map(function(line) {\n\t            return '   ' + line;\n\t          }).join('\\n');\n\t        }\n\t      }\n\t    } else {\n\t      str = ctx.stylize('[Circular]', 'special');\n\t    }\n\t  }\n\t  if (isUndefined(name)) {\n\t    if (array && key.match(/^\\d+$/)) {\n\t      return str;\n\t    }\n\t    name = JSON.stringify('' + key);\n\t    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n\t      name = name.substr(1, name.length - 2);\n\t      name = ctx.stylize(name, 'name');\n\t    } else {\n\t      name = name.replace(/'/g, \"\\\\'\")\n\t                 .replace(/\\\\\"/g, '\"')\n\t                 .replace(/(^\"|\"$)/g, \"'\");\n\t      name = ctx.stylize(name, 'string');\n\t    }\n\t  }\n\t\n\t  return name + ': ' + str;\n\t}\n\t\n\t\n\tfunction reduceToSingleString(output, base, braces) {\n\t  var numLinesEst = 0;\n\t  var length = output.reduce(function(prev, cur) {\n\t    numLinesEst++;\n\t    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n\t    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n\t  }, 0);\n\t\n\t  if (length > 60) {\n\t    return braces[0] +\n\t           (base === '' ? '' : base + '\\n ') +\n\t           ' ' +\n\t           output.join(',\\n  ') +\n\t           ' ' +\n\t           braces[1];\n\t  }\n\t\n\t  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n\t}\n\t\n\t\n\t// NOTE: These type checking functions intentionally don't use `instanceof`\n\t// because it is fragile and can be easily faked with `Object.create()`.\n\tfunction isArray(ar) {\n\t  return Array.isArray(ar);\n\t}\n\texports.isArray = isArray;\n\t\n\tfunction isBoolean(arg) {\n\t  return typeof arg === 'boolean';\n\t}\n\texports.isBoolean = isBoolean;\n\t\n\tfunction isNull(arg) {\n\t  return arg === null;\n\t}\n\texports.isNull = isNull;\n\t\n\tfunction isNullOrUndefined(arg) {\n\t  return arg == null;\n\t}\n\texports.isNullOrUndefined = isNullOrUndefined;\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\texports.isNumber = isNumber;\n\t\n\tfunction isString(arg) {\n\t  return typeof arg === 'string';\n\t}\n\texports.isString = isString;\n\t\n\tfunction isSymbol(arg) {\n\t  return typeof arg === 'symbol';\n\t}\n\texports.isSymbol = isSymbol;\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\texports.isUndefined = isUndefined;\n\t\n\tfunction isRegExp(re) {\n\t  return isObject(re) && objectToString(re) === '[object RegExp]';\n\t}\n\texports.isRegExp = isRegExp;\n\t\n\tfunction isObject(arg) {\n\t  return typeof arg === 'object' && arg !== null;\n\t}\n\texports.isObject = isObject;\n\t\n\tfunction isDate(d) {\n\t  return isObject(d) && objectToString(d) === '[object Date]';\n\t}\n\texports.isDate = isDate;\n\t\n\tfunction isError(e) {\n\t  return isObject(e) &&\n\t      (objectToString(e) === '[object Error]' || e instanceof Error);\n\t}\n\texports.isError = isError;\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\texports.isFunction = isFunction;\n\t\n\tfunction isPrimitive(arg) {\n\t  return arg === null ||\n\t         typeof arg === 'boolean' ||\n\t         typeof arg === 'number' ||\n\t         typeof arg === 'string' ||\n\t         typeof arg === 'symbol' ||  // ES6 symbol\n\t         typeof arg === 'undefined';\n\t}\n\texports.isPrimitive = isPrimitive;\n\t\n\texports.isBuffer = __webpack_require__(73);\n\t\n\tfunction objectToString(o) {\n\t  return Object.prototype.toString.call(o);\n\t}\n\t\n\t\n\tfunction pad(n) {\n\t  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n\t}\n\t\n\t\n\tvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n\t              'Oct', 'Nov', 'Dec'];\n\t\n\t// 26 Feb 16:19:34\n\tfunction timestamp() {\n\t  var d = new Date();\n\t  var time = [pad(d.getHours()),\n\t              pad(d.getMinutes()),\n\t              pad(d.getSeconds())].join(':');\n\t  return [d.getDate(), months[d.getMonth()], time].join(' ');\n\t}\n\t\n\t\n\t// log is just a thin wrapper to console.log that prepends a timestamp\n\texports.log = function() {\n\t  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n\t};\n\t\n\t\n\t/**\n\t * Inherit the prototype methods from one constructor into another.\n\t *\n\t * The Function.prototype.inherits from lang.js rewritten as a standalone\n\t * function (not on Function.prototype). NOTE: If this file is to be loaded\n\t * during bootstrapping this function needs to be rewritten using some native\n\t * functions as prototype setup using normal JavaScript does not work as\n\t * expected during bootstrapping (see mirror.js in r114903).\n\t *\n\t * @param {function} ctor Constructor function which needs to inherit the\n\t *     prototype.\n\t * @param {function} superCtor Constructor function to inherit prototype from.\n\t */\n\texports.inherits = __webpack_require__(74);\n\t\n\texports._extend = function(origin, add) {\n\t  // Don't do anything if add isn't an object\n\t  if (!add || !isObject(add)) return origin;\n\t\n\t  var keys = Object.keys(add);\n\t  var i = keys.length;\n\t  while (i--) {\n\t    origin[keys[i]] = add[keys[i]];\n\t  }\n\t  return origin;\n\t};\n\t\n\tfunction hasOwnProperty(obj, prop) {\n\t  return Object.prototype.hasOwnProperty.call(obj, prop);\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }()), __webpack_require__(72)))\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\tprocess.prependListener = noop;\n\tprocess.prependOnceListener = noop;\n\t\n\tprocess.listeners = function (name) { return [] }\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = function isBuffer(arg) {\n\t  return arg && typeof arg === 'object'\n\t    && typeof arg.copy === 'function'\n\t    && typeof arg.fill === 'function'\n\t    && typeof arg.readUInt8 === 'function';\n\t}\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports) {\n\n\tif (typeof Object.create === 'function') {\n\t  // implementation from standard node.js 'util' module\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    ctor.prototype = Object.create(superCtor.prototype, {\n\t      constructor: {\n\t        value: ctor,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    });\n\t  };\n\t} else {\n\t  // old school shim for old browsers\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    var TempCtor = function () {}\n\t    TempCtor.prototype = superCtor.prototype\n\t    ctor.prototype = new TempCtor()\n\t    ctor.prototype.constructor = ctor\n\t  }\n\t}\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\n\t/**\n\t * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined\n\t * in FIPS 180-2\n\t * Version 2.2-beta Copyright Angel Marin, Paul Johnston 2000 - 2009.\n\t * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n\t *\n\t */\n\t\n\tvar inherits = __webpack_require__(71).inherits\n\t\n\tmodule.exports = function (Buffer, Hash) {\n\t\n\t  var K = [\n\t      0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5,\n\t      0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5,\n\t      0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,\n\t      0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174,\n\t      0xE49B69C1, 0xEFBE4786, 0x0FC19DC6, 0x240CA1CC,\n\t      0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,\n\t      0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7,\n\t      0xC6E00BF3, 0xD5A79147, 0x06CA6351, 0x14292967,\n\t      0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,\n\t      0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85,\n\t      0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3,\n\t      0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,\n\t      0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5,\n\t      0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3,\n\t      0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,\n\t      0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2\n\t    ]\n\t\n\t  var W = new Array(64)\n\t\n\t  function Sha256() {\n\t    this.init()\n\t\n\t    this._w = W //new Array(64)\n\t\n\t    Hash.call(this, 16*4, 14*4)\n\t  }\n\t\n\t  inherits(Sha256, Hash)\n\t\n\t  Sha256.prototype.init = function () {\n\t\n\t    this._a = 0x6a09e667|0\n\t    this._b = 0xbb67ae85|0\n\t    this._c = 0x3c6ef372|0\n\t    this._d = 0xa54ff53a|0\n\t    this._e = 0x510e527f|0\n\t    this._f = 0x9b05688c|0\n\t    this._g = 0x1f83d9ab|0\n\t    this._h = 0x5be0cd19|0\n\t\n\t    this._len = this._s = 0\n\t\n\t    return this\n\t  }\n\t\n\t  function S (X, n) {\n\t    return (X >>> n) | (X << (32 - n));\n\t  }\n\t\n\t  function R (X, n) {\n\t    return (X >>> n);\n\t  }\n\t\n\t  function Ch (x, y, z) {\n\t    return ((x & y) ^ ((~x) & z));\n\t  }\n\t\n\t  function Maj (x, y, z) {\n\t    return ((x & y) ^ (x & z) ^ (y & z));\n\t  }\n\t\n\t  function Sigma0256 (x) {\n\t    return (S(x, 2) ^ S(x, 13) ^ S(x, 22));\n\t  }\n\t\n\t  function Sigma1256 (x) {\n\t    return (S(x, 6) ^ S(x, 11) ^ S(x, 25));\n\t  }\n\t\n\t  function Gamma0256 (x) {\n\t    return (S(x, 7) ^ S(x, 18) ^ R(x, 3));\n\t  }\n\t\n\t  function Gamma1256 (x) {\n\t    return (S(x, 17) ^ S(x, 19) ^ R(x, 10));\n\t  }\n\t\n\t  Sha256.prototype._update = function(M) {\n\t\n\t    var W = this._w\n\t    var a, b, c, d, e, f, g, h\n\t    var T1, T2\n\t\n\t    a = this._a | 0\n\t    b = this._b | 0\n\t    c = this._c | 0\n\t    d = this._d | 0\n\t    e = this._e | 0\n\t    f = this._f | 0\n\t    g = this._g | 0\n\t    h = this._h | 0\n\t\n\t    for (var j = 0; j < 64; j++) {\n\t      var w = W[j] = j < 16\n\t        ? M.readInt32BE(j * 4)\n\t        : Gamma1256(W[j - 2]) + W[j - 7] + Gamma0256(W[j - 15]) + W[j - 16]\n\t\n\t      T1 = h + Sigma1256(e) + Ch(e, f, g) + K[j] + w\n\t\n\t      T2 = Sigma0256(a) + Maj(a, b, c);\n\t      h = g; g = f; f = e; e = d + T1; d = c; c = b; b = a; a = T1 + T2;\n\t    }\n\t\n\t    this._a = (a + this._a) | 0\n\t    this._b = (b + this._b) | 0\n\t    this._c = (c + this._c) | 0\n\t    this._d = (d + this._d) | 0\n\t    this._e = (e + this._e) | 0\n\t    this._f = (f + this._f) | 0\n\t    this._g = (g + this._g) | 0\n\t    this._h = (h + this._h) | 0\n\t\n\t  };\n\t\n\t  Sha256.prototype._hash = function () {\n\t    var H = new Buffer(32)\n\t\n\t    H.writeInt32BE(this._a,  0)\n\t    H.writeInt32BE(this._b,  4)\n\t    H.writeInt32BE(this._c,  8)\n\t    H.writeInt32BE(this._d, 12)\n\t    H.writeInt32BE(this._e, 16)\n\t    H.writeInt32BE(this._f, 20)\n\t    H.writeInt32BE(this._g, 24)\n\t    H.writeInt32BE(this._h, 28)\n\t\n\t    return H\n\t  }\n\t\n\t  return Sha256\n\t\n\t}\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar inherits = __webpack_require__(71).inherits\n\t\n\tmodule.exports = function (Buffer, Hash) {\n\t  var K = [\n\t    0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n\t    0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n\t    0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n\t    0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n\t    0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n\t    0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n\t    0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n\t    0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n\t    0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n\t    0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n\t    0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n\t    0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n\t    0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n\t    0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n\t    0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n\t    0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n\t    0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n\t    0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n\t    0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n\t    0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n\t    0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n\t    0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n\t    0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n\t    0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n\t    0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n\t    0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n\t    0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n\t    0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n\t    0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n\t    0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n\t    0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n\t    0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n\t    0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n\t    0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n\t    0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n\t    0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n\t    0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n\t    0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n\t    0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n\t    0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n\t  ]\n\t\n\t  var W = new Array(160)\n\t\n\t  function Sha512() {\n\t    this.init()\n\t    this._w = W\n\t\n\t    Hash.call(this, 128, 112)\n\t  }\n\t\n\t  inherits(Sha512, Hash)\n\t\n\t  Sha512.prototype.init = function () {\n\t\n\t    this._a = 0x6a09e667|0\n\t    this._b = 0xbb67ae85|0\n\t    this._c = 0x3c6ef372|0\n\t    this._d = 0xa54ff53a|0\n\t    this._e = 0x510e527f|0\n\t    this._f = 0x9b05688c|0\n\t    this._g = 0x1f83d9ab|0\n\t    this._h = 0x5be0cd19|0\n\t\n\t    this._al = 0xf3bcc908|0\n\t    this._bl = 0x84caa73b|0\n\t    this._cl = 0xfe94f82b|0\n\t    this._dl = 0x5f1d36f1|0\n\t    this._el = 0xade682d1|0\n\t    this._fl = 0x2b3e6c1f|0\n\t    this._gl = 0xfb41bd6b|0\n\t    this._hl = 0x137e2179|0\n\t\n\t    this._len = this._s = 0\n\t\n\t    return this\n\t  }\n\t\n\t  function S (X, Xl, n) {\n\t    return (X >>> n) | (Xl << (32 - n))\n\t  }\n\t\n\t  function Ch (x, y, z) {\n\t    return ((x & y) ^ ((~x) & z));\n\t  }\n\t\n\t  function Maj (x, y, z) {\n\t    return ((x & y) ^ (x & z) ^ (y & z));\n\t  }\n\t\n\t  Sha512.prototype._update = function(M) {\n\t\n\t    var W = this._w\n\t    var a, b, c, d, e, f, g, h\n\t    var al, bl, cl, dl, el, fl, gl, hl\n\t\n\t    a = this._a | 0\n\t    b = this._b | 0\n\t    c = this._c | 0\n\t    d = this._d | 0\n\t    e = this._e | 0\n\t    f = this._f | 0\n\t    g = this._g | 0\n\t    h = this._h | 0\n\t\n\t    al = this._al | 0\n\t    bl = this._bl | 0\n\t    cl = this._cl | 0\n\t    dl = this._dl | 0\n\t    el = this._el | 0\n\t    fl = this._fl | 0\n\t    gl = this._gl | 0\n\t    hl = this._hl | 0\n\t\n\t    for (var i = 0; i < 80; i++) {\n\t      var j = i * 2\n\t\n\t      var Wi, Wil\n\t\n\t      if (i < 16) {\n\t        Wi = W[j] = M.readInt32BE(j * 4)\n\t        Wil = W[j + 1] = M.readInt32BE(j * 4 + 4)\n\t\n\t      } else {\n\t        var x  = W[j - 15*2]\n\t        var xl = W[j - 15*2 + 1]\n\t        var gamma0  = S(x, xl, 1) ^ S(x, xl, 8) ^ (x >>> 7)\n\t        var gamma0l = S(xl, x, 1) ^ S(xl, x, 8) ^ S(xl, x, 7)\n\t\n\t        x  = W[j - 2*2]\n\t        xl = W[j - 2*2 + 1]\n\t        var gamma1  = S(x, xl, 19) ^ S(xl, x, 29) ^ (x >>> 6)\n\t        var gamma1l = S(xl, x, 19) ^ S(x, xl, 29) ^ S(xl, x, 6)\n\t\n\t        // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\n\t        var Wi7  = W[j - 7*2]\n\t        var Wi7l = W[j - 7*2 + 1]\n\t\n\t        var Wi16  = W[j - 16*2]\n\t        var Wi16l = W[j - 16*2 + 1]\n\t\n\t        Wil = gamma0l + Wi7l\n\t        Wi  = gamma0  + Wi7 + ((Wil >>> 0) < (gamma0l >>> 0) ? 1 : 0)\n\t        Wil = Wil + gamma1l\n\t        Wi  = Wi  + gamma1  + ((Wil >>> 0) < (gamma1l >>> 0) ? 1 : 0)\n\t        Wil = Wil + Wi16l\n\t        Wi  = Wi  + Wi16 + ((Wil >>> 0) < (Wi16l >>> 0) ? 1 : 0)\n\t\n\t        W[j] = Wi\n\t        W[j + 1] = Wil\n\t      }\n\t\n\t      var maj = Maj(a, b, c)\n\t      var majl = Maj(al, bl, cl)\n\t\n\t      var sigma0h = S(a, al, 28) ^ S(al, a, 2) ^ S(al, a, 7)\n\t      var sigma0l = S(al, a, 28) ^ S(a, al, 2) ^ S(a, al, 7)\n\t      var sigma1h = S(e, el, 14) ^ S(e, el, 18) ^ S(el, e, 9)\n\t      var sigma1l = S(el, e, 14) ^ S(el, e, 18) ^ S(e, el, 9)\n\t\n\t      // t1 = h + sigma1 + ch + K[i] + W[i]\n\t      var Ki = K[j]\n\t      var Kil = K[j + 1]\n\t\n\t      var ch = Ch(e, f, g)\n\t      var chl = Ch(el, fl, gl)\n\t\n\t      var t1l = hl + sigma1l\n\t      var t1 = h + sigma1h + ((t1l >>> 0) < (hl >>> 0) ? 1 : 0)\n\t      t1l = t1l + chl\n\t      t1 = t1 + ch + ((t1l >>> 0) < (chl >>> 0) ? 1 : 0)\n\t      t1l = t1l + Kil\n\t      t1 = t1 + Ki + ((t1l >>> 0) < (Kil >>> 0) ? 1 : 0)\n\t      t1l = t1l + Wil\n\t      t1 = t1 + Wi + ((t1l >>> 0) < (Wil >>> 0) ? 1 : 0)\n\t\n\t      // t2 = sigma0 + maj\n\t      var t2l = sigma0l + majl\n\t      var t2 = sigma0h + maj + ((t2l >>> 0) < (sigma0l >>> 0) ? 1 : 0)\n\t\n\t      h  = g\n\t      hl = gl\n\t      g  = f\n\t      gl = fl\n\t      f  = e\n\t      fl = el\n\t      el = (dl + t1l) | 0\n\t      e  = (d + t1 + ((el >>> 0) < (dl >>> 0) ? 1 : 0)) | 0\n\t      d  = c\n\t      dl = cl\n\t      c  = b\n\t      cl = bl\n\t      b  = a\n\t      bl = al\n\t      al = (t1l + t2l) | 0\n\t      a  = (t1 + t2 + ((al >>> 0) < (t1l >>> 0) ? 1 : 0)) | 0\n\t    }\n\t\n\t    this._al = (this._al + al) | 0\n\t    this._bl = (this._bl + bl) | 0\n\t    this._cl = (this._cl + cl) | 0\n\t    this._dl = (this._dl + dl) | 0\n\t    this._el = (this._el + el) | 0\n\t    this._fl = (this._fl + fl) | 0\n\t    this._gl = (this._gl + gl) | 0\n\t    this._hl = (this._hl + hl) | 0\n\t\n\t    this._a = (this._a + a + ((this._al >>> 0) < (al >>> 0) ? 1 : 0)) | 0\n\t    this._b = (this._b + b + ((this._bl >>> 0) < (bl >>> 0) ? 1 : 0)) | 0\n\t    this._c = (this._c + c + ((this._cl >>> 0) < (cl >>> 0) ? 1 : 0)) | 0\n\t    this._d = (this._d + d + ((this._dl >>> 0) < (dl >>> 0) ? 1 : 0)) | 0\n\t    this._e = (this._e + e + ((this._el >>> 0) < (el >>> 0) ? 1 : 0)) | 0\n\t    this._f = (this._f + f + ((this._fl >>> 0) < (fl >>> 0) ? 1 : 0)) | 0\n\t    this._g = (this._g + g + ((this._gl >>> 0) < (gl >>> 0) ? 1 : 0)) | 0\n\t    this._h = (this._h + h + ((this._hl >>> 0) < (hl >>> 0) ? 1 : 0)) | 0\n\t  }\n\t\n\t  Sha512.prototype._hash = function () {\n\t    var H = new Buffer(64)\n\t\n\t    function writeInt64BE(h, l, offset) {\n\t      H.writeInt32BE(h, offset)\n\t      H.writeInt32BE(l, offset + 4)\n\t    }\n\t\n\t    writeInt64BE(this._a, this._al, 0)\n\t    writeInt64BE(this._b, this._bl, 8)\n\t    writeInt64BE(this._c, this._cl, 16)\n\t    writeInt64BE(this._d, this._dl, 24)\n\t    writeInt64BE(this._e, this._el, 32)\n\t    writeInt64BE(this._f, this._fl, 40)\n\t    writeInt64BE(this._g, this._gl, 48)\n\t    writeInt64BE(this._h, this._hl, 56)\n\t\n\t    return H\n\t  }\n\t\n\t  return Sha512\n\t\n\t}\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\t * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n\t * Digest Algorithm, as defined in RFC 1321.\n\t * Version 2.1 Copyright (C) Paul Johnston 1999 - 2002.\n\t * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n\t * Distributed under the BSD License\n\t * See http://pajhome.org.uk/crypt/md5 for more info.\n\t */\n\t\n\tvar helpers = __webpack_require__(78);\n\t\n\t/*\n\t * Calculate the MD5 of an array of little-endian words, and a bit length\n\t */\n\tfunction core_md5(x, len)\n\t{\n\t  /* append padding */\n\t  x[len >> 5] |= 0x80 << ((len) % 32);\n\t  x[(((len + 64) >>> 9) << 4) + 14] = len;\n\t\n\t  var a =  1732584193;\n\t  var b = -271733879;\n\t  var c = -1732584194;\n\t  var d =  271733878;\n\t\n\t  for(var i = 0; i < x.length; i += 16)\n\t  {\n\t    var olda = a;\n\t    var oldb = b;\n\t    var oldc = c;\n\t    var oldd = d;\n\t\n\t    a = md5_ff(a, b, c, d, x[i+ 0], 7 , -680876936);\n\t    d = md5_ff(d, a, b, c, x[i+ 1], 12, -389564586);\n\t    c = md5_ff(c, d, a, b, x[i+ 2], 17,  606105819);\n\t    b = md5_ff(b, c, d, a, x[i+ 3], 22, -1044525330);\n\t    a = md5_ff(a, b, c, d, x[i+ 4], 7 , -176418897);\n\t    d = md5_ff(d, a, b, c, x[i+ 5], 12,  1200080426);\n\t    c = md5_ff(c, d, a, b, x[i+ 6], 17, -1473231341);\n\t    b = md5_ff(b, c, d, a, x[i+ 7], 22, -45705983);\n\t    a = md5_ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);\n\t    d = md5_ff(d, a, b, c, x[i+ 9], 12, -1958414417);\n\t    c = md5_ff(c, d, a, b, x[i+10], 17, -42063);\n\t    b = md5_ff(b, c, d, a, x[i+11], 22, -1990404162);\n\t    a = md5_ff(a, b, c, d, x[i+12], 7 ,  1804603682);\n\t    d = md5_ff(d, a, b, c, x[i+13], 12, -40341101);\n\t    c = md5_ff(c, d, a, b, x[i+14], 17, -1502002290);\n\t    b = md5_ff(b, c, d, a, x[i+15], 22,  1236535329);\n\t\n\t    a = md5_gg(a, b, c, d, x[i+ 1], 5 , -165796510);\n\t    d = md5_gg(d, a, b, c, x[i+ 6], 9 , -1069501632);\n\t    c = md5_gg(c, d, a, b, x[i+11], 14,  643717713);\n\t    b = md5_gg(b, c, d, a, x[i+ 0], 20, -373897302);\n\t    a = md5_gg(a, b, c, d, x[i+ 5], 5 , -701558691);\n\t    d = md5_gg(d, a, b, c, x[i+10], 9 ,  38016083);\n\t    c = md5_gg(c, d, a, b, x[i+15], 14, -660478335);\n\t    b = md5_gg(b, c, d, a, x[i+ 4], 20, -405537848);\n\t    a = md5_gg(a, b, c, d, x[i+ 9], 5 ,  568446438);\n\t    d = md5_gg(d, a, b, c, x[i+14], 9 , -1019803690);\n\t    c = md5_gg(c, d, a, b, x[i+ 3], 14, -187363961);\n\t    b = md5_gg(b, c, d, a, x[i+ 8], 20,  1163531501);\n\t    a = md5_gg(a, b, c, d, x[i+13], 5 , -1444681467);\n\t    d = md5_gg(d, a, b, c, x[i+ 2], 9 , -51403784);\n\t    c = md5_gg(c, d, a, b, x[i+ 7], 14,  1735328473);\n\t    b = md5_gg(b, c, d, a, x[i+12], 20, -1926607734);\n\t\n\t    a = md5_hh(a, b, c, d, x[i+ 5], 4 , -378558);\n\t    d = md5_hh(d, a, b, c, x[i+ 8], 11, -2022574463);\n\t    c = md5_hh(c, d, a, b, x[i+11], 16,  1839030562);\n\t    b = md5_hh(b, c, d, a, x[i+14], 23, -35309556);\n\t    a = md5_hh(a, b, c, d, x[i+ 1], 4 , -1530992060);\n\t    d = md5_hh(d, a, b, c, x[i+ 4], 11,  1272893353);\n\t    c = md5_hh(c, d, a, b, x[i+ 7], 16, -155497632);\n\t    b = md5_hh(b, c, d, a, x[i+10], 23, -1094730640);\n\t    a = md5_hh(a, b, c, d, x[i+13], 4 ,  681279174);\n\t    d = md5_hh(d, a, b, c, x[i+ 0], 11, -358537222);\n\t    c = md5_hh(c, d, a, b, x[i+ 3], 16, -722521979);\n\t    b = md5_hh(b, c, d, a, x[i+ 6], 23,  76029189);\n\t    a = md5_hh(a, b, c, d, x[i+ 9], 4 , -640364487);\n\t    d = md5_hh(d, a, b, c, x[i+12], 11, -421815835);\n\t    c = md5_hh(c, d, a, b, x[i+15], 16,  530742520);\n\t    b = md5_hh(b, c, d, a, x[i+ 2], 23, -995338651);\n\t\n\t    a = md5_ii(a, b, c, d, x[i+ 0], 6 , -198630844);\n\t    d = md5_ii(d, a, b, c, x[i+ 7], 10,  1126891415);\n\t    c = md5_ii(c, d, a, b, x[i+14], 15, -1416354905);\n\t    b = md5_ii(b, c, d, a, x[i+ 5], 21, -57434055);\n\t    a = md5_ii(a, b, c, d, x[i+12], 6 ,  1700485571);\n\t    d = md5_ii(d, a, b, c, x[i+ 3], 10, -1894986606);\n\t    c = md5_ii(c, d, a, b, x[i+10], 15, -1051523);\n\t    b = md5_ii(b, c, d, a, x[i+ 1], 21, -2054922799);\n\t    a = md5_ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);\n\t    d = md5_ii(d, a, b, c, x[i+15], 10, -30611744);\n\t    c = md5_ii(c, d, a, b, x[i+ 6], 15, -1560198380);\n\t    b = md5_ii(b, c, d, a, x[i+13], 21,  1309151649);\n\t    a = md5_ii(a, b, c, d, x[i+ 4], 6 , -145523070);\n\t    d = md5_ii(d, a, b, c, x[i+11], 10, -1120210379);\n\t    c = md5_ii(c, d, a, b, x[i+ 2], 15,  718787259);\n\t    b = md5_ii(b, c, d, a, x[i+ 9], 21, -343485551);\n\t\n\t    a = safe_add(a, olda);\n\t    b = safe_add(b, oldb);\n\t    c = safe_add(c, oldc);\n\t    d = safe_add(d, oldd);\n\t  }\n\t  return Array(a, b, c, d);\n\t\n\t}\n\t\n\t/*\n\t * These functions implement the four basic operations the algorithm uses.\n\t */\n\tfunction md5_cmn(q, a, b, x, s, t)\n\t{\n\t  return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s),b);\n\t}\n\tfunction md5_ff(a, b, c, d, x, s, t)\n\t{\n\t  return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n\t}\n\tfunction md5_gg(a, b, c, d, x, s, t)\n\t{\n\t  return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n\t}\n\tfunction md5_hh(a, b, c, d, x, s, t)\n\t{\n\t  return md5_cmn(b ^ c ^ d, a, b, x, s, t);\n\t}\n\tfunction md5_ii(a, b, c, d, x, s, t)\n\t{\n\t  return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n\t}\n\t\n\t/*\n\t * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n\t * to work around bugs in some JS interpreters.\n\t */\n\tfunction safe_add(x, y)\n\t{\n\t  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n\t  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\t  return (msw << 16) | (lsw & 0xFFFF);\n\t}\n\t\n\t/*\n\t * Bitwise rotate a 32-bit number to the left.\n\t */\n\tfunction bit_rol(num, cnt)\n\t{\n\t  return (num << cnt) | (num >>> (32 - cnt));\n\t}\n\t\n\tmodule.exports = function md5(buf) {\n\t  return helpers.hash(buf, core_md5, 16);\n\t};\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var intSize = 4;\n\tvar zeroBuffer = new Buffer(intSize); zeroBuffer.fill(0);\n\tvar chrsz = 8;\n\t\n\tfunction toArray(buf, bigEndian) {\n\t  if ((buf.length % intSize) !== 0) {\n\t    var len = buf.length + (intSize - (buf.length % intSize));\n\t    buf = Buffer.concat([buf, zeroBuffer], len);\n\t  }\n\t\n\t  var arr = [];\n\t  var fn = bigEndian ? buf.readInt32BE : buf.readInt32LE;\n\t  for (var i = 0; i < buf.length; i += intSize) {\n\t    arr.push(fn.call(buf, i));\n\t  }\n\t  return arr;\n\t}\n\t\n\tfunction toBuffer(arr, size, bigEndian) {\n\t  var buf = new Buffer(size);\n\t  var fn = bigEndian ? buf.writeInt32BE : buf.writeInt32LE;\n\t  for (var i = 0; i < arr.length; i++) {\n\t    fn.call(buf, arr[i], i * 4, true);\n\t  }\n\t  return buf;\n\t}\n\t\n\tfunction hash(buf, fn, hashSize, bigEndian) {\n\t  if (!Buffer.isBuffer(buf)) buf = new Buffer(buf);\n\t  var arr = fn(toArray(buf, bigEndian), buf.length * chrsz);\n\t  return toBuffer(arr, hashSize, bigEndian);\n\t}\n\t\n\tmodule.exports = { hash: hash };\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {\n\tmodule.exports = ripemd160\n\t\n\t\n\t\n\t/*\n\tCryptoJS v3.1.2\n\tcode.google.com/p/crypto-js\n\t(c) 2009-2013 by Jeff Mott. All rights reserved.\n\tcode.google.com/p/crypto-js/wiki/License\n\t*/\n\t/** @preserve\n\t(c) 2012 by Cédric Mesnil. All rights reserved.\n\t\n\tRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\t\n\t    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n\t    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n\t\n\tTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t*/\n\t\n\t// Constants table\n\tvar zl = [\n\t    0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,\n\t    7,  4, 13,  1, 10,  6, 15,  3, 12,  0,  9,  5,  2, 14, 11,  8,\n\t    3, 10, 14,  4,  9, 15,  8,  1,  2,  7,  0,  6, 13, 11,  5, 12,\n\t    1,  9, 11, 10,  0,  8, 12,  4, 13,  3,  7, 15, 14,  5,  6,  2,\n\t    4,  0,  5,  9,  7, 12,  2, 10, 14,  1,  3,  8, 11,  6, 15, 13];\n\tvar zr = [\n\t    5, 14,  7,  0,  9,  2, 11,  4, 13,  6, 15,  8,  1, 10,  3, 12,\n\t    6, 11,  3,  7,  0, 13,  5, 10, 14, 15,  8, 12,  4,  9,  1,  2,\n\t    15,  5,  1,  3,  7, 14,  6,  9, 11,  8, 12,  2, 10,  0,  4, 13,\n\t    8,  6,  4,  1,  3, 11, 15,  0,  5, 12,  2, 13,  9,  7, 10, 14,\n\t    12, 15, 10,  4,  1,  5,  8,  7,  6,  2, 13, 14,  0,  3,  9, 11];\n\tvar sl = [\n\t     11, 14, 15, 12,  5,  8,  7,  9, 11, 13, 14, 15,  6,  7,  9,  8,\n\t    7, 6,   8, 13, 11,  9,  7, 15,  7, 12, 15,  9, 11,  7, 13, 12,\n\t    11, 13,  6,  7, 14,  9, 13, 15, 14,  8, 13,  6,  5, 12,  7,  5,\n\t      11, 12, 14, 15, 14, 15,  9,  8,  9, 14,  5,  6,  8,  6,  5, 12,\n\t    9, 15,  5, 11,  6,  8, 13, 12,  5, 12, 13, 14, 11,  8,  5,  6 ];\n\tvar sr = [\n\t    8,  9,  9, 11, 13, 15, 15,  5,  7,  7,  8, 11, 14, 14, 12,  6,\n\t    9, 13, 15,  7, 12,  8,  9, 11,  7,  7, 12,  7,  6, 15, 13, 11,\n\t    9,  7, 15, 11,  8,  6,  6, 14, 12, 13,  5, 14, 13, 13,  7,  5,\n\t    15,  5,  8, 11, 14, 14,  6, 14,  6,  9, 12,  9, 12,  5, 15,  8,\n\t    8,  5, 12,  9, 12,  5, 14,  6,  8, 13,  6,  5, 15, 13, 11, 11 ];\n\t\n\tvar hl =  [ 0x00000000, 0x5A827999, 0x6ED9EBA1, 0x8F1BBCDC, 0xA953FD4E];\n\tvar hr =  [ 0x50A28BE6, 0x5C4DD124, 0x6D703EF3, 0x7A6D76E9, 0x00000000];\n\t\n\tvar bytesToWords = function (bytes) {\n\t  var words = [];\n\t  for (var i = 0, b = 0; i < bytes.length; i++, b += 8) {\n\t    words[b >>> 5] |= bytes[i] << (24 - b % 32);\n\t  }\n\t  return words;\n\t};\n\t\n\tvar wordsToBytes = function (words) {\n\t  var bytes = [];\n\t  for (var b = 0; b < words.length * 32; b += 8) {\n\t    bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n\t  }\n\t  return bytes;\n\t};\n\t\n\tvar processBlock = function (H, M, offset) {\n\t\n\t  // Swap endian\n\t  for (var i = 0; i < 16; i++) {\n\t    var offset_i = offset + i;\n\t    var M_offset_i = M[offset_i];\n\t\n\t    // Swap\n\t    M[offset_i] = (\n\t        (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t        (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t    );\n\t  }\n\t\n\t  // Working variables\n\t  var al, bl, cl, dl, el;\n\t  var ar, br, cr, dr, er;\n\t\n\t  ar = al = H[0];\n\t  br = bl = H[1];\n\t  cr = cl = H[2];\n\t  dr = dl = H[3];\n\t  er = el = H[4];\n\t  // Computation\n\t  var t;\n\t  for (var i = 0; i < 80; i += 1) {\n\t    t = (al +  M[offset+zl[i]])|0;\n\t    if (i<16){\n\t        t +=  f1(bl,cl,dl) + hl[0];\n\t    } else if (i<32) {\n\t        t +=  f2(bl,cl,dl) + hl[1];\n\t    } else if (i<48) {\n\t        t +=  f3(bl,cl,dl) + hl[2];\n\t    } else if (i<64) {\n\t        t +=  f4(bl,cl,dl) + hl[3];\n\t    } else {// if (i<80) {\n\t        t +=  f5(bl,cl,dl) + hl[4];\n\t    }\n\t    t = t|0;\n\t    t =  rotl(t,sl[i]);\n\t    t = (t+el)|0;\n\t    al = el;\n\t    el = dl;\n\t    dl = rotl(cl, 10);\n\t    cl = bl;\n\t    bl = t;\n\t\n\t    t = (ar + M[offset+zr[i]])|0;\n\t    if (i<16){\n\t        t +=  f5(br,cr,dr) + hr[0];\n\t    } else if (i<32) {\n\t        t +=  f4(br,cr,dr) + hr[1];\n\t    } else if (i<48) {\n\t        t +=  f3(br,cr,dr) + hr[2];\n\t    } else if (i<64) {\n\t        t +=  f2(br,cr,dr) + hr[3];\n\t    } else {// if (i<80) {\n\t        t +=  f1(br,cr,dr) + hr[4];\n\t    }\n\t    t = t|0;\n\t    t =  rotl(t,sr[i]) ;\n\t    t = (t+er)|0;\n\t    ar = er;\n\t    er = dr;\n\t    dr = rotl(cr, 10);\n\t    cr = br;\n\t    br = t;\n\t  }\n\t  // Intermediate hash value\n\t  t    = (H[1] + cl + dr)|0;\n\t  H[1] = (H[2] + dl + er)|0;\n\t  H[2] = (H[3] + el + ar)|0;\n\t  H[3] = (H[4] + al + br)|0;\n\t  H[4] = (H[0] + bl + cr)|0;\n\t  H[0] =  t;\n\t};\n\t\n\tfunction f1(x, y, z) {\n\t  return ((x) ^ (y) ^ (z));\n\t}\n\t\n\tfunction f2(x, y, z) {\n\t  return (((x)&(y)) | ((~x)&(z)));\n\t}\n\t\n\tfunction f3(x, y, z) {\n\t  return (((x) | (~(y))) ^ (z));\n\t}\n\t\n\tfunction f4(x, y, z) {\n\t  return (((x) & (z)) | ((y)&(~(z))));\n\t}\n\t\n\tfunction f5(x, y, z) {\n\t  return ((x) ^ ((y) |(~(z))));\n\t}\n\t\n\tfunction rotl(x,n) {\n\t  return (x<<n) | (x>>>(32-n));\n\t}\n\t\n\tfunction ripemd160(message) {\n\t  var H = [0x67452301, 0xEFCDAB89, 0x98BADCFE, 0x10325476, 0xC3D2E1F0];\n\t\n\t  if (typeof message == 'string')\n\t    message = new Buffer(message, 'utf8');\n\t\n\t  var m = bytesToWords(message);\n\t\n\t  var nBitsLeft = message.length * 8;\n\t  var nBitsTotal = message.length * 8;\n\t\n\t  // Add padding\n\t  m[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t  m[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t      (((nBitsTotal << 8)  | (nBitsTotal >>> 24)) & 0x00ff00ff) |\n\t      (((nBitsTotal << 24) | (nBitsTotal >>> 8))  & 0xff00ff00)\n\t  );\n\t\n\t  for (var i=0 ; i<m.length; i += 16) {\n\t    processBlock(H, m, i);\n\t  }\n\t\n\t  // Swap endian\n\t  for (var i = 0; i < 5; i++) {\n\t      // Shortcut\n\t    var H_i = H[i];\n\t\n\t    // Swap\n\t    H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t          (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t  }\n\t\n\t  var digestbytes = wordsToBytes(H);\n\t  return new Buffer(digestbytes);\n\t}\n\t\n\t\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var createHash = __webpack_require__(67)\n\t\n\tvar zeroBuffer = new Buffer(128)\n\tzeroBuffer.fill(0)\n\t\n\tmodule.exports = Hmac\n\t\n\tfunction Hmac (alg, key) {\n\t  if(!(this instanceof Hmac)) return new Hmac(alg, key)\n\t  this._opad = opad\n\t  this._alg = alg\n\t\n\t  var blocksize = (alg === 'sha512') ? 128 : 64\n\t\n\t  key = this._key = !Buffer.isBuffer(key) ? new Buffer(key) : key\n\t\n\t  if(key.length > blocksize) {\n\t    key = createHash(alg).update(key).digest()\n\t  } else if(key.length < blocksize) {\n\t    key = Buffer.concat([key, zeroBuffer], blocksize)\n\t  }\n\t\n\t  var ipad = this._ipad = new Buffer(blocksize)\n\t  var opad = this._opad = new Buffer(blocksize)\n\t\n\t  for(var i = 0; i < blocksize; i++) {\n\t    ipad[i] = key[i] ^ 0x36\n\t    opad[i] = key[i] ^ 0x5C\n\t  }\n\t\n\t  this._hash = createHash(alg).update(ipad)\n\t}\n\t\n\tHmac.prototype.update = function (data, enc) {\n\t  this._hash.update(data, enc)\n\t  return this\n\t}\n\t\n\tHmac.prototype.digest = function (enc) {\n\t  var h = this._hash.digest()\n\t  return createHash(this._alg).update(this._opad).update(h).digest(enc)\n\t}\n\t\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar pbkdf2Export = __webpack_require__(82)\n\t\n\tmodule.exports = function (crypto, exports) {\n\t  exports = exports || {}\n\t\n\t  var exported = pbkdf2Export(crypto)\n\t\n\t  exports.pbkdf2 = exported.pbkdf2\n\t  exports.pbkdf2Sync = exported.pbkdf2Sync\n\t\n\t  return exports\n\t}\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {module.exports = function(crypto) {\n\t  function pbkdf2(password, salt, iterations, keylen, digest, callback) {\n\t    if ('function' === typeof digest) {\n\t      callback = digest\n\t      digest = undefined\n\t    }\n\t\n\t    if ('function' !== typeof callback)\n\t      throw new Error('No callback provided to pbkdf2')\n\t\n\t    setTimeout(function() {\n\t      var result\n\t\n\t      try {\n\t        result = pbkdf2Sync(password, salt, iterations, keylen, digest)\n\t      } catch (e) {\n\t        return callback(e)\n\t      }\n\t\n\t      callback(undefined, result)\n\t    })\n\t  }\n\t\n\t  function pbkdf2Sync(password, salt, iterations, keylen, digest) {\n\t    if ('number' !== typeof iterations)\n\t      throw new TypeError('Iterations not a number')\n\t\n\t    if (iterations < 0)\n\t      throw new TypeError('Bad iterations')\n\t\n\t    if ('number' !== typeof keylen)\n\t      throw new TypeError('Key length not a number')\n\t\n\t    if (keylen < 0)\n\t      throw new TypeError('Bad key length')\n\t\n\t    digest = digest || 'sha1'\n\t\n\t    if (!Buffer.isBuffer(password)) password = new Buffer(password)\n\t    if (!Buffer.isBuffer(salt)) salt = new Buffer(salt)\n\t\n\t    var hLen, l = 1, r, T\n\t    var DK = new Buffer(keylen)\n\t    var block1 = new Buffer(salt.length + 4)\n\t    salt.copy(block1, 0, 0, salt.length)\n\t\n\t    for (var i = 1; i <= l; i++) {\n\t      block1.writeUInt32BE(i, salt.length)\n\t\n\t      var U = crypto.createHmac(digest, password).update(block1).digest()\n\t\n\t      if (!hLen) {\n\t        hLen = U.length\n\t        T = new Buffer(hLen)\n\t        l = Math.ceil(keylen / hLen)\n\t        r = keylen - (l - 1) * hLen\n\t\n\t        if (keylen > (Math.pow(2, 32) - 1) * hLen)\n\t          throw new TypeError('keylen exceeds maximum length')\n\t      }\n\t\n\t      U.copy(T, 0, 0, hLen)\n\t\n\t      for (var j = 1; j < iterations; j++) {\n\t        U = crypto.createHmac(digest, password).update(U).digest()\n\t\n\t        for (var k = 0; k < hLen; k++) {\n\t          T[k] ^= U[k]\n\t        }\n\t      }\n\t\n\t      var destPos = (i - 1) * hLen\n\t      var len = (i == l ? r : hLen)\n\t      T.copy(DK, destPos, 0, len)\n\t    }\n\t\n\t    return DK\n\t  }\n\t\n\t  return {\n\t    pbkdf2: pbkdf2,\n\t    pbkdf2Sync: pbkdf2Sync\n\t  }\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = function (crypto, exports) {\n\t  exports = exports || {};\n\t  var ciphers = __webpack_require__(84)(crypto);\n\t  exports.createCipher = ciphers.createCipher;\n\t  exports.createCipheriv = ciphers.createCipheriv;\n\t  var deciphers = __webpack_require__(122)(crypto);\n\t  exports.createDecipher = deciphers.createDecipher;\n\t  exports.createDecipheriv = deciphers.createDecipheriv;\n\t  var modes = __webpack_require__(113);\n\t  function listCiphers () {\n\t    return Object.keys(modes);\n\t  }\n\t  exports.listCiphers = listCiphers;\n\t};\n\t\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var aes = __webpack_require__(85);\n\tvar Transform = __webpack_require__(86);\n\tvar inherits = __webpack_require__(89);\n\tvar modes = __webpack_require__(113);\n\tvar ebtk = __webpack_require__(114);\n\tvar StreamCipher = __webpack_require__(115);\n\tinherits(Cipher, Transform);\n\tfunction Cipher(mode, key, iv) {\n\t  if (!(this instanceof Cipher)) {\n\t    return new Cipher(mode, key, iv);\n\t  }\n\t  Transform.call(this);\n\t  this._cache = new Splitter();\n\t  this._cipher = new aes.AES(key);\n\t  this._prev = new Buffer(iv.length);\n\t  iv.copy(this._prev);\n\t  this._mode = mode;\n\t}\n\tCipher.prototype._transform = function (data, _, next) {\n\t  this._cache.add(data);\n\t  var chunk;\n\t  var thing;\n\t  while ((chunk = this._cache.get())) {\n\t    thing = this._mode.encrypt(this, chunk);\n\t    this.push(thing);\n\t  }\n\t  next();\n\t};\n\tCipher.prototype._flush = function (next) {\n\t  var chunk = this._cache.flush();\n\t  this.push(this._mode.encrypt(this, chunk));\n\t  this._cipher.scrub();\n\t  next();\n\t};\n\t\n\t\n\tfunction Splitter() {\n\t   if (!(this instanceof Splitter)) {\n\t    return new Splitter();\n\t  }\n\t  this.cache = new Buffer('');\n\t}\n\tSplitter.prototype.add = function (data) {\n\t  this.cache = Buffer.concat([this.cache, data]);\n\t};\n\t\n\tSplitter.prototype.get = function () {\n\t  if (this.cache.length > 15) {\n\t    var out = this.cache.slice(0, 16);\n\t    this.cache = this.cache.slice(16);\n\t    return out;\n\t  }\n\t  return null;\n\t};\n\tSplitter.prototype.flush = function () {\n\t  var len = 16 - this.cache.length;\n\t  var padBuff = new Buffer(len);\n\t\n\t  var i = -1;\n\t  while (++i < len) {\n\t    padBuff.writeUInt8(len, i);\n\t  }\n\t  var out = Buffer.concat([this.cache, padBuff]);\n\t  return out;\n\t};\n\tvar modelist = {\n\t  ECB: __webpack_require__(116),\n\t  CBC: __webpack_require__(117),\n\t  CFB: __webpack_require__(119),\n\t  OFB: __webpack_require__(120),\n\t  CTR: __webpack_require__(121)\n\t};\n\tmodule.exports = function (crypto) {\n\t  function createCipheriv(suite, password, iv) {\n\t    var config = modes[suite];\n\t    if (!config) {\n\t      throw new TypeError('invalid suite type');\n\t    }\n\t    if (typeof iv === 'string') {\n\t      iv = new Buffer(iv);\n\t    }\n\t    if (typeof password === 'string') {\n\t      password = new Buffer(password);\n\t    }\n\t    if (password.length !== config.key/8) {\n\t      throw new TypeError('invalid key length ' + password.length);\n\t    }\n\t    if (iv.length !== config.iv) {\n\t      throw new TypeError('invalid iv length ' + iv.length);\n\t    }\n\t    if (config.type === 'stream') {\n\t      return new StreamCipher(modelist[config.mode], password, iv);\n\t    }\n\t    return new Cipher(modelist[config.mode], password, iv);\n\t  }\n\t  function createCipher (suite, password) {\n\t    var config = modes[suite];\n\t    if (!config) {\n\t      throw new TypeError('invalid suite type');\n\t    }\n\t    var keys = ebtk(crypto, password, config.key, config.iv);\n\t    return createCipheriv(suite, keys.key, keys.iv);\n\t  }\n\t  return {\n\t    createCipher: createCipher,\n\t    createCipheriv: createCipheriv\n\t  };\n\t};\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var uint_max = Math.pow(2, 32);\n\tfunction fixup_uint32(x) {\n\t    var ret, x_pos;\n\t    ret = x > uint_max || x < 0 ? (x_pos = Math.abs(x) % uint_max, x < 0 ? uint_max - x_pos : x_pos) : x;\n\t    return ret;\n\t}\n\tfunction scrub_vec(v) {\n\t  var i, _i, _ref;\n\t  for (i = _i = 0, _ref = v.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n\t    v[i] = 0;\n\t  }\n\t  return false;\n\t}\n\t\n\tfunction Global() {\n\t  var i;\n\t  this.SBOX = [];\n\t  this.INV_SBOX = [];\n\t  this.SUB_MIX = (function() {\n\t    var _i, _results;\n\t    _results = [];\n\t    for (i = _i = 0; _i < 4; i = ++_i) {\n\t      _results.push([]);\n\t    }\n\t    return _results;\n\t  })();\n\t  this.INV_SUB_MIX = (function() {\n\t    var _i, _results;\n\t    _results = [];\n\t    for (i = _i = 0; _i < 4; i = ++_i) {\n\t      _results.push([]);\n\t    }\n\t    return _results;\n\t  })();\n\t  this.init();\n\t  this.RCON = [0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36];\n\t}\n\t\n\tGlobal.prototype.init = function() {\n\t  var d, i, sx, t, x, x2, x4, x8, xi, _i;\n\t  d = (function() {\n\t    var _i, _results;\n\t    _results = [];\n\t    for (i = _i = 0; _i < 256; i = ++_i) {\n\t      if (i < 128) {\n\t        _results.push(i << 1);\n\t      } else {\n\t        _results.push((i << 1) ^ 0x11b);\n\t      }\n\t    }\n\t    return _results;\n\t  })();\n\t  x = 0;\n\t  xi = 0;\n\t  for (i = _i = 0; _i < 256; i = ++_i) {\n\t    sx = xi ^ (xi << 1) ^ (xi << 2) ^ (xi << 3) ^ (xi << 4);\n\t    sx = (sx >>> 8) ^ (sx & 0xff) ^ 0x63;\n\t    this.SBOX[x] = sx;\n\t    this.INV_SBOX[sx] = x;\n\t    x2 = d[x];\n\t    x4 = d[x2];\n\t    x8 = d[x4];\n\t    t = (d[sx] * 0x101) ^ (sx * 0x1010100);\n\t    this.SUB_MIX[0][x] = (t << 24) | (t >>> 8);\n\t    this.SUB_MIX[1][x] = (t << 16) | (t >>> 16);\n\t    this.SUB_MIX[2][x] = (t << 8) | (t >>> 24);\n\t    this.SUB_MIX[3][x] = t;\n\t    t = (x8 * 0x1010101) ^ (x4 * 0x10001) ^ (x2 * 0x101) ^ (x * 0x1010100);\n\t    this.INV_SUB_MIX[0][sx] = (t << 24) | (t >>> 8);\n\t    this.INV_SUB_MIX[1][sx] = (t << 16) | (t >>> 16);\n\t    this.INV_SUB_MIX[2][sx] = (t << 8) | (t >>> 24);\n\t    this.INV_SUB_MIX[3][sx] = t;\n\t    if (x === 0) {\n\t      x = xi = 1;\n\t    } else {\n\t      x = x2 ^ d[d[d[x8 ^ x2]]];\n\t      xi ^= d[d[xi]];\n\t    }\n\t  }\n\t  return true;\n\t};\n\t\n\tvar G = new Global();\n\t\n\t\n\tAES.blockSize = 4 * 4;\n\t\n\tAES.prototype.blockSize = AES.blockSize;\n\t\n\tAES.keySize = 256 / 8;\n\t\n\tAES.prototype.keySize = AES.keySize;\n\t\n\tAES.ivSize = AES.blockSize;\n\t\n\tAES.prototype.ivSize = AES.ivSize;\n\t\n\t function bufferToArray(buf) {\n\t  var len = buf.length/4;\n\t  var out = new Array(len);\n\t  var i = -1;\n\t  while (++i < len) {\n\t    out[i] = buf.readUInt32BE(i * 4);\n\t  }\n\t  return out;\n\t }\n\tfunction AES(key) {\n\t  this._key = bufferToArray(key);\n\t  this._doReset();\n\t}\n\t\n\tAES.prototype._doReset = function() {\n\t  var invKsRow, keySize, keyWords, ksRow, ksRows, t, _i, _j;\n\t  keyWords = this._key;\n\t  keySize = keyWords.length;\n\t  this._nRounds = keySize + 6;\n\t  ksRows = (this._nRounds + 1) * 4;\n\t  this._keySchedule = [];\n\t  for (ksRow = _i = 0; 0 <= ksRows ? _i < ksRows : _i > ksRows; ksRow = 0 <= ksRows ? ++_i : --_i) {\n\t    this._keySchedule[ksRow] = ksRow < keySize ? keyWords[ksRow] : (t = this._keySchedule[ksRow - 1], (ksRow % keySize) === 0 ? (t = (t << 8) | (t >>> 24), t = (G.SBOX[t >>> 24] << 24) | (G.SBOX[(t >>> 16) & 0xff] << 16) | (G.SBOX[(t >>> 8) & 0xff] << 8) | G.SBOX[t & 0xff], t ^= G.RCON[(ksRow / keySize) | 0] << 24) : keySize > 6 && ksRow % keySize === 4 ? t = (G.SBOX[t >>> 24] << 24) | (G.SBOX[(t >>> 16) & 0xff] << 16) | (G.SBOX[(t >>> 8) & 0xff] << 8) | G.SBOX[t & 0xff] : void 0, this._keySchedule[ksRow - keySize] ^ t);\n\t  }\n\t  this._invKeySchedule = [];\n\t  for (invKsRow = _j = 0; 0 <= ksRows ? _j < ksRows : _j > ksRows; invKsRow = 0 <= ksRows ? ++_j : --_j) {\n\t    ksRow = ksRows - invKsRow;\n\t    t = this._keySchedule[ksRow - (invKsRow % 4 ? 0 : 4)];\n\t    this._invKeySchedule[invKsRow] = invKsRow < 4 || ksRow <= 4 ? t : G.INV_SUB_MIX[0][G.SBOX[t >>> 24]] ^ G.INV_SUB_MIX[1][G.SBOX[(t >>> 16) & 0xff]] ^ G.INV_SUB_MIX[2][G.SBOX[(t >>> 8) & 0xff]] ^ G.INV_SUB_MIX[3][G.SBOX[t & 0xff]];\n\t  }\n\t  return true;\n\t};\n\t\n\tAES.prototype.encryptBlock = function(M) {\n\t  M = bufferToArray(new Buffer(M));\n\t  var out = this._doCryptBlock(M, this._keySchedule, G.SUB_MIX, G.SBOX);\n\t  var buf = new Buffer(16);\n\t  buf.writeUInt32BE(out[0], 0);\n\t  buf.writeUInt32BE(out[1], 4);\n\t  buf.writeUInt32BE(out[2], 8);\n\t  buf.writeUInt32BE(out[3], 12);\n\t  return buf;\n\t};\n\t\n\tAES.prototype.decryptBlock = function(M) {\n\t  M = bufferToArray(new Buffer(M));\n\t  var temp = [M[3], M[1]];\n\t  M[1] = temp[0];\n\t  M[3] = temp[1];\n\t  var out = this._doCryptBlock(M, this._invKeySchedule, G.INV_SUB_MIX, G.INV_SBOX);\n\t  var buf = new Buffer(16);\n\t  buf.writeUInt32BE(out[0], 0);\n\t  buf.writeUInt32BE(out[3], 4);\n\t  buf.writeUInt32BE(out[2], 8);\n\t  buf.writeUInt32BE(out[1], 12);\n\t  return buf;\n\t};\n\t\n\tAES.prototype.scrub = function() {\n\t  scrub_vec(this._keySchedule);\n\t  scrub_vec(this._invKeySchedule);\n\t  scrub_vec(this._key);\n\t};\n\t\n\tAES.prototype._doCryptBlock = function(M, keySchedule, SUB_MIX, SBOX) {\n\t  var ksRow, round, s0, s1, s2, s3, t0, t1, t2, t3, _i, _ref;\n\t\n\t  s0 = M[0] ^ keySchedule[0];\n\t  s1 = M[1] ^ keySchedule[1];\n\t  s2 = M[2] ^ keySchedule[2];\n\t  s3 = M[3] ^ keySchedule[3];\n\t  ksRow = 4;\n\t  for (round = _i = 1, _ref = this._nRounds; 1 <= _ref ? _i < _ref : _i > _ref; round = 1 <= _ref ? ++_i : --_i) {\n\t    t0 = SUB_MIX[0][s0 >>> 24] ^ SUB_MIX[1][(s1 >>> 16) & 0xff] ^ SUB_MIX[2][(s2 >>> 8) & 0xff] ^ SUB_MIX[3][s3 & 0xff] ^ keySchedule[ksRow++];\n\t    t1 = SUB_MIX[0][s1 >>> 24] ^ SUB_MIX[1][(s2 >>> 16) & 0xff] ^ SUB_MIX[2][(s3 >>> 8) & 0xff] ^ SUB_MIX[3][s0 & 0xff] ^ keySchedule[ksRow++];\n\t    t2 = SUB_MIX[0][s2 >>> 24] ^ SUB_MIX[1][(s3 >>> 16) & 0xff] ^ SUB_MIX[2][(s0 >>> 8) & 0xff] ^ SUB_MIX[3][s1 & 0xff] ^ keySchedule[ksRow++];\n\t    t3 = SUB_MIX[0][s3 >>> 24] ^ SUB_MIX[1][(s0 >>> 16) & 0xff] ^ SUB_MIX[2][(s1 >>> 8) & 0xff] ^ SUB_MIX[3][s2 & 0xff] ^ keySchedule[ksRow++];\n\t    s0 = t0;\n\t    s1 = t1;\n\t    s2 = t2;\n\t    s3 = t3;\n\t  }\n\t  t0 = ((SBOX[s0 >>> 24] << 24) | (SBOX[(s1 >>> 16) & 0xff] << 16) | (SBOX[(s2 >>> 8) & 0xff] << 8) | SBOX[s3 & 0xff]) ^ keySchedule[ksRow++];\n\t  t1 = ((SBOX[s1 >>> 24] << 24) | (SBOX[(s2 >>> 16) & 0xff] << 16) | (SBOX[(s3 >>> 8) & 0xff] << 8) | SBOX[s0 & 0xff]) ^ keySchedule[ksRow++];\n\t  t2 = ((SBOX[s2 >>> 24] << 24) | (SBOX[(s3 >>> 16) & 0xff] << 16) | (SBOX[(s0 >>> 8) & 0xff] << 8) | SBOX[s1 & 0xff]) ^ keySchedule[ksRow++];\n\t  t3 = ((SBOX[s3 >>> 24] << 24) | (SBOX[(s0 >>> 16) & 0xff] << 16) | (SBOX[(s1 >>> 8) & 0xff] << 8) | SBOX[s2 & 0xff]) ^ keySchedule[ksRow++];\n\t  return [\n\t    fixup_uint32(t0),\n\t    fixup_uint32(t1),\n\t    fixup_uint32(t2),\n\t    fixup_uint32(t3)\n\t  ];\n\t\n\t};\n\t\n\t\n\t\n\t\n\t  exports.AES = AES;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var Transform = __webpack_require__(87).Transform;\n\tvar inherits = __webpack_require__(89);\n\t\n\tmodule.exports = CipherBase;\n\tinherits(CipherBase, Transform);\n\tfunction CipherBase() {\n\t  Transform.call(this);\n\t}\n\tCipherBase.prototype.update = function (data, inputEnd, outputEnc) {\n\t  this.write(data, inputEnd);\n\t  var outData = new Buffer('');\n\t  var chunk;\n\t  while ((chunk = this.read())) {\n\t    outData = Buffer.concat([outData, chunk]);\n\t  }\n\t  if (outputEnc) {\n\t    outData = outData.toString(outputEnc);\n\t  }\n\t  return outData;\n\t};\n\tCipherBase.prototype.final = function (outputEnc) {\n\t  this.end();\n\t  var outData = new Buffer('');\n\t  var chunk;\n\t  while ((chunk = this.read())) {\n\t    outData = Buffer.concat([outData, chunk]);\n\t  }\n\t  if (outputEnc) {\n\t    outData = outData.toString(outputEnc);\n\t  }\n\t  return outData;\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\tmodule.exports = Stream;\n\t\n\tvar EE = __webpack_require__(88).EventEmitter;\n\tvar inherits = __webpack_require__(89);\n\t\n\tinherits(Stream, EE);\n\tStream.Readable = __webpack_require__(90);\n\tStream.Writable = __webpack_require__(109);\n\tStream.Duplex = __webpack_require__(110);\n\tStream.Transform = __webpack_require__(111);\n\tStream.PassThrough = __webpack_require__(112);\n\t\n\t// Backwards-compat with node 0.4.x\n\tStream.Stream = Stream;\n\t\n\t\n\t\n\t// old-style streams.  Note that the pipe method (the only relevant\n\t// part of this class) is overridden in the Readable class.\n\t\n\tfunction Stream() {\n\t  EE.call(this);\n\t}\n\t\n\tStream.prototype.pipe = function(dest, options) {\n\t  var source = this;\n\t\n\t  function ondata(chunk) {\n\t    if (dest.writable) {\n\t      if (false === dest.write(chunk) && source.pause) {\n\t        source.pause();\n\t      }\n\t    }\n\t  }\n\t\n\t  source.on('data', ondata);\n\t\n\t  function ondrain() {\n\t    if (source.readable && source.resume) {\n\t      source.resume();\n\t    }\n\t  }\n\t\n\t  dest.on('drain', ondrain);\n\t\n\t  // If the 'end' option is not supplied, dest.end() will be called when\n\t  // source gets the 'end' or 'close' events.  Only dest.end() once.\n\t  if (!dest._isStdio && (!options || options.end !== false)) {\n\t    source.on('end', onend);\n\t    source.on('close', onclose);\n\t  }\n\t\n\t  var didOnEnd = false;\n\t  function onend() {\n\t    if (didOnEnd) return;\n\t    didOnEnd = true;\n\t\n\t    dest.end();\n\t  }\n\t\n\t\n\t  function onclose() {\n\t    if (didOnEnd) return;\n\t    didOnEnd = true;\n\t\n\t    if (typeof dest.destroy === 'function') dest.destroy();\n\t  }\n\t\n\t  // don't leave dangling pipes when there are errors.\n\t  function onerror(er) {\n\t    cleanup();\n\t    if (EE.listenerCount(this, 'error') === 0) {\n\t      throw er; // Unhandled stream error in pipe.\n\t    }\n\t  }\n\t\n\t  source.on('error', onerror);\n\t  dest.on('error', onerror);\n\t\n\t  // remove all the event listeners that were added.\n\t  function cleanup() {\n\t    source.removeListener('data', ondata);\n\t    dest.removeListener('drain', ondrain);\n\t\n\t    source.removeListener('end', onend);\n\t    source.removeListener('close', onclose);\n\t\n\t    source.removeListener('error', onerror);\n\t    dest.removeListener('error', onerror);\n\t\n\t    source.removeListener('end', cleanup);\n\t    source.removeListener('close', cleanup);\n\t\n\t    dest.removeListener('close', cleanup);\n\t  }\n\t\n\t  source.on('end', cleanup);\n\t  source.on('close', cleanup);\n\t\n\t  dest.on('close', cleanup);\n\t\n\t  dest.emit('pipe', source);\n\t\n\t  // Allow for unix-like usage: A.pipe(B).pipe(C)\n\t  return dest;\n\t};\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\tfunction EventEmitter() {\n\t  this._events = this._events || {};\n\t  this._maxListeners = this._maxListeners || undefined;\n\t}\n\tmodule.exports = EventEmitter;\n\t\n\t// Backwards-compat with node 0.10.x\n\tEventEmitter.EventEmitter = EventEmitter;\n\t\n\tEventEmitter.prototype._events = undefined;\n\tEventEmitter.prototype._maxListeners = undefined;\n\t\n\t// By default EventEmitters will print a warning if more than 10 listeners are\n\t// added to it. This is a useful default which helps finding memory leaks.\n\tEventEmitter.defaultMaxListeners = 10;\n\t\n\t// Obviously not all Emitters should be limited to 10. This function allows\n\t// that to be increased. Set to zero for unlimited.\n\tEventEmitter.prototype.setMaxListeners = function(n) {\n\t  if (!isNumber(n) || n < 0 || isNaN(n))\n\t    throw TypeError('n must be a positive number');\n\t  this._maxListeners = n;\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.emit = function(type) {\n\t  var er, handler, len, args, i, listeners;\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // If there is no 'error' event listener then throw.\n\t  if (type === 'error') {\n\t    if (!this._events.error ||\n\t        (isObject(this._events.error) && !this._events.error.length)) {\n\t      er = arguments[1];\n\t      if (er instanceof Error) {\n\t        throw er; // Unhandled 'error' event\n\t      } else {\n\t        // At least give some kind of context to the user\n\t        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n\t        err.context = er;\n\t        throw err;\n\t      }\n\t    }\n\t  }\n\t\n\t  handler = this._events[type];\n\t\n\t  if (isUndefined(handler))\n\t    return false;\n\t\n\t  if (isFunction(handler)) {\n\t    switch (arguments.length) {\n\t      // fast cases\n\t      case 1:\n\t        handler.call(this);\n\t        break;\n\t      case 2:\n\t        handler.call(this, arguments[1]);\n\t        break;\n\t      case 3:\n\t        handler.call(this, arguments[1], arguments[2]);\n\t        break;\n\t      // slower\n\t      default:\n\t        args = Array.prototype.slice.call(arguments, 1);\n\t        handler.apply(this, args);\n\t    }\n\t  } else if (isObject(handler)) {\n\t    args = Array.prototype.slice.call(arguments, 1);\n\t    listeners = handler.slice();\n\t    len = listeners.length;\n\t    for (i = 0; i < len; i++)\n\t      listeners[i].apply(this, args);\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\tEventEmitter.prototype.addListener = function(type, listener) {\n\t  var m;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // To avoid recursion in the case that type === \"newListener\"! Before\n\t  // adding it to the listeners, first emit \"newListener\".\n\t  if (this._events.newListener)\n\t    this.emit('newListener', type,\n\t              isFunction(listener.listener) ?\n\t              listener.listener : listener);\n\t\n\t  if (!this._events[type])\n\t    // Optimize the case of one listener. Don't need the extra array object.\n\t    this._events[type] = listener;\n\t  else if (isObject(this._events[type]))\n\t    // If we've already got an array, just append.\n\t    this._events[type].push(listener);\n\t  else\n\t    // Adding the second element, need to change to array.\n\t    this._events[type] = [this._events[type], listener];\n\t\n\t  // Check for listener leak\n\t  if (isObject(this._events[type]) && !this._events[type].warned) {\n\t    if (!isUndefined(this._maxListeners)) {\n\t      m = this._maxListeners;\n\t    } else {\n\t      m = EventEmitter.defaultMaxListeners;\n\t    }\n\t\n\t    if (m && m > 0 && this._events[type].length > m) {\n\t      this._events[type].warned = true;\n\t      console.error('(node) warning: possible EventEmitter memory ' +\n\t                    'leak detected. %d listeners added. ' +\n\t                    'Use emitter.setMaxListeners() to increase limit.',\n\t                    this._events[type].length);\n\t      if (typeof console.trace === 'function') {\n\t        // not supported in IE 10\n\t        console.trace();\n\t      }\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\t\n\tEventEmitter.prototype.once = function(type, listener) {\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  var fired = false;\n\t\n\t  function g() {\n\t    this.removeListener(type, g);\n\t\n\t    if (!fired) {\n\t      fired = true;\n\t      listener.apply(this, arguments);\n\t    }\n\t  }\n\t\n\t  g.listener = listener;\n\t  this.on(type, g);\n\t\n\t  return this;\n\t};\n\t\n\t// emits a 'removeListener' event iff the listener was removed\n\tEventEmitter.prototype.removeListener = function(type, listener) {\n\t  var list, position, length, i;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events || !this._events[type])\n\t    return this;\n\t\n\t  list = this._events[type];\n\t  length = list.length;\n\t  position = -1;\n\t\n\t  if (list === listener ||\n\t      (isFunction(list.listener) && list.listener === listener)) {\n\t    delete this._events[type];\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t\n\t  } else if (isObject(list)) {\n\t    for (i = length; i-- > 0;) {\n\t      if (list[i] === listener ||\n\t          (list[i].listener && list[i].listener === listener)) {\n\t        position = i;\n\t        break;\n\t      }\n\t    }\n\t\n\t    if (position < 0)\n\t      return this;\n\t\n\t    if (list.length === 1) {\n\t      list.length = 0;\n\t      delete this._events[type];\n\t    } else {\n\t      list.splice(position, 1);\n\t    }\n\t\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.removeAllListeners = function(type) {\n\t  var key, listeners;\n\t\n\t  if (!this._events)\n\t    return this;\n\t\n\t  // not listening for removeListener, no need to emit\n\t  if (!this._events.removeListener) {\n\t    if (arguments.length === 0)\n\t      this._events = {};\n\t    else if (this._events[type])\n\t      delete this._events[type];\n\t    return this;\n\t  }\n\t\n\t  // emit removeListener for all listeners on all events\n\t  if (arguments.length === 0) {\n\t    for (key in this._events) {\n\t      if (key === 'removeListener') continue;\n\t      this.removeAllListeners(key);\n\t    }\n\t    this.removeAllListeners('removeListener');\n\t    this._events = {};\n\t    return this;\n\t  }\n\t\n\t  listeners = this._events[type];\n\t\n\t  if (isFunction(listeners)) {\n\t    this.removeListener(type, listeners);\n\t  } else if (listeners) {\n\t    // LIFO order\n\t    while (listeners.length)\n\t      this.removeListener(type, listeners[listeners.length - 1]);\n\t  }\n\t  delete this._events[type];\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.listeners = function(type) {\n\t  var ret;\n\t  if (!this._events || !this._events[type])\n\t    ret = [];\n\t  else if (isFunction(this._events[type]))\n\t    ret = [this._events[type]];\n\t  else\n\t    ret = this._events[type].slice();\n\t  return ret;\n\t};\n\t\n\tEventEmitter.prototype.listenerCount = function(type) {\n\t  if (this._events) {\n\t    var evlistener = this._events[type];\n\t\n\t    if (isFunction(evlistener))\n\t      return 1;\n\t    else if (evlistener)\n\t      return evlistener.length;\n\t  }\n\t  return 0;\n\t};\n\t\n\tEventEmitter.listenerCount = function(emitter, type) {\n\t  return emitter.listenerCount(type);\n\t};\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\t\n\tfunction isObject(arg) {\n\t  return typeof arg === 'object' && arg !== null;\n\t}\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports) {\n\n\tif (typeof Object.create === 'function') {\n\t  // implementation from standard node.js 'util' module\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    ctor.prototype = Object.create(superCtor.prototype, {\n\t      constructor: {\n\t        value: ctor,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    });\n\t  };\n\t} else {\n\t  // old school shim for old browsers\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    var TempCtor = function () {}\n\t    TempCtor.prototype = superCtor.prototype\n\t    ctor.prototype = new TempCtor()\n\t    ctor.prototype.constructor = ctor\n\t  }\n\t}\n\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(91);\n\texports.Stream = exports;\n\texports.Readable = exports;\n\texports.Writable = __webpack_require__(102);\n\texports.Duplex = __webpack_require__(101);\n\texports.Transform = __webpack_require__(107);\n\texports.PassThrough = __webpack_require__(108);\n\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\t'use strict';\n\t\n\t/*<replacement>*/\n\t\n\tvar pna = __webpack_require__(92);\n\t/*</replacement>*/\n\t\n\tmodule.exports = Readable;\n\t\n\t/*<replacement>*/\n\tvar isArray = __webpack_require__(93);\n\t/*</replacement>*/\n\t\n\t/*<replacement>*/\n\tvar Duplex;\n\t/*</replacement>*/\n\t\n\tReadable.ReadableState = ReadableState;\n\t\n\t/*<replacement>*/\n\tvar EE = __webpack_require__(88).EventEmitter;\n\t\n\tvar EElistenerCount = function (emitter, type) {\n\t  return emitter.listeners(type).length;\n\t};\n\t/*</replacement>*/\n\t\n\t/*<replacement>*/\n\tvar Stream = __webpack_require__(94);\n\t/*</replacement>*/\n\t\n\t/*<replacement>*/\n\t\n\tvar Buffer = __webpack_require__(95).Buffer;\n\tvar OurUint8Array = global.Uint8Array || function () {};\n\tfunction _uint8ArrayToBuffer(chunk) {\n\t  return Buffer.from(chunk);\n\t}\n\tfunction _isUint8Array(obj) {\n\t  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n\t}\n\t\n\t/*</replacement>*/\n\t\n\t/*<replacement>*/\n\tvar util = __webpack_require__(96);\n\tutil.inherits = __webpack_require__(89);\n\t/*</replacement>*/\n\t\n\t/*<replacement>*/\n\tvar debugUtil = __webpack_require__(97);\n\tvar debug = void 0;\n\tif (debugUtil && debugUtil.debuglog) {\n\t  debug = debugUtil.debuglog('stream');\n\t} else {\n\t  debug = function () {};\n\t}\n\t/*</replacement>*/\n\t\n\tvar BufferList = __webpack_require__(98);\n\tvar destroyImpl = __webpack_require__(100);\n\tvar StringDecoder;\n\t\n\tutil.inherits(Readable, Stream);\n\t\n\tvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\t\n\tfunction prependListener(emitter, event, fn) {\n\t  // Sadly this is not cacheable as some libraries bundle their own\n\t  // event emitter implementation with them.\n\t  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\t\n\t  // This is a hack to make sure that our error handler is attached before any\n\t  // userland ones.  NEVER DO THIS. This is here only because this code needs\n\t  // to continue to work with older versions of Node.js that do not include\n\t  // the prependListener() method. The goal is to eventually remove this hack.\n\t  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n\t}\n\t\n\tfunction ReadableState(options, stream) {\n\t  Duplex = Duplex || __webpack_require__(101);\n\t\n\t  options = options || {};\n\t\n\t  // Duplex streams are both readable and writable, but share\n\t  // the same options object.\n\t  // However, some cases require setting options to different\n\t  // values for the readable and the writable sides of the duplex stream.\n\t  // These options can be provided separately as readableXXX and writableXXX.\n\t  var isDuplex = stream instanceof Duplex;\n\t\n\t  // object stream flag. Used to make read(n) ignore n and to\n\t  // make all the buffer merging and length checks go away\n\t  this.objectMode = !!options.objectMode;\n\t\n\t  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\t\n\t  // the point at which it stops calling _read() to fill the buffer\n\t  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n\t  var hwm = options.highWaterMark;\n\t  var readableHwm = options.readableHighWaterMark;\n\t  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\t\n\t  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\t\n\t  // cast to ints.\n\t  this.highWaterMark = Math.floor(this.highWaterMark);\n\t\n\t  // A linked list is used to store data chunks instead of an array because the\n\t  // linked list can remove elements from the beginning faster than\n\t  // array.shift()\n\t  this.buffer = new BufferList();\n\t  this.length = 0;\n\t  this.pipes = null;\n\t  this.pipesCount = 0;\n\t  this.flowing = null;\n\t  this.ended = false;\n\t  this.endEmitted = false;\n\t  this.reading = false;\n\t\n\t  // a flag to be able to tell if the event 'readable'/'data' is emitted\n\t  // immediately, or on a later tick.  We set this to true at first, because\n\t  // any actions that shouldn't happen until \"later\" should generally also\n\t  // not happen before the first read call.\n\t  this.sync = true;\n\t\n\t  // whenever we return null, then we set a flag to say\n\t  // that we're awaiting a 'readable' event emission.\n\t  this.needReadable = false;\n\t  this.emittedReadable = false;\n\t  this.readableListening = false;\n\t  this.resumeScheduled = false;\n\t\n\t  // has it been destroyed\n\t  this.destroyed = false;\n\t\n\t  // Crypto is kind of old and crusty.  Historically, its default string\n\t  // encoding is 'binary' so we have to make this configurable.\n\t  // Everything else in the universe uses 'utf8', though.\n\t  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\t\n\t  // the number of writers that are awaiting a drain event in .pipe()s\n\t  this.awaitDrain = 0;\n\t\n\t  // if true, a maybeReadMore has been scheduled\n\t  this.readingMore = false;\n\t\n\t  this.decoder = null;\n\t  this.encoding = null;\n\t  if (options.encoding) {\n\t    if (!StringDecoder) StringDecoder = __webpack_require__(106).StringDecoder;\n\t    this.decoder = new StringDecoder(options.encoding);\n\t    this.encoding = options.encoding;\n\t  }\n\t}\n\t\n\tfunction Readable(options) {\n\t  Duplex = Duplex || __webpack_require__(101);\n\t\n\t  if (!(this instanceof Readable)) return new Readable(options);\n\t\n\t  this._readableState = new ReadableState(options, this);\n\t\n\t  // legacy\n\t  this.readable = true;\n\t\n\t  if (options) {\n\t    if (typeof options.read === 'function') this._read = options.read;\n\t\n\t    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\t  }\n\t\n\t  Stream.call(this);\n\t}\n\t\n\tObject.defineProperty(Readable.prototype, 'destroyed', {\n\t  get: function () {\n\t    if (this._readableState === undefined) {\n\t      return false;\n\t    }\n\t    return this._readableState.destroyed;\n\t  },\n\t  set: function (value) {\n\t    // we ignore the value if the stream\n\t    // has not been initialized yet\n\t    if (!this._readableState) {\n\t      return;\n\t    }\n\t\n\t    // backward compatibility, the user is explicitly\n\t    // managing destroyed\n\t    this._readableState.destroyed = value;\n\t  }\n\t});\n\t\n\tReadable.prototype.destroy = destroyImpl.destroy;\n\tReadable.prototype._undestroy = destroyImpl.undestroy;\n\tReadable.prototype._destroy = function (err, cb) {\n\t  this.push(null);\n\t  cb(err);\n\t};\n\t\n\t// Manually shove something into the read() buffer.\n\t// This returns true if the highWaterMark has not been hit yet,\n\t// similar to how Writable.write() returns true if you should\n\t// write() some more.\n\tReadable.prototype.push = function (chunk, encoding) {\n\t  var state = this._readableState;\n\t  var skipChunkCheck;\n\t\n\t  if (!state.objectMode) {\n\t    if (typeof chunk === 'string') {\n\t      encoding = encoding || state.defaultEncoding;\n\t      if (encoding !== state.encoding) {\n\t        chunk = Buffer.from(chunk, encoding);\n\t        encoding = '';\n\t      }\n\t      skipChunkCheck = true;\n\t    }\n\t  } else {\n\t    skipChunkCheck = true;\n\t  }\n\t\n\t  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n\t};\n\t\n\t// Unshift should *always* be something directly out of read()\n\tReadable.prototype.unshift = function (chunk) {\n\t  return readableAddChunk(this, chunk, null, true, false);\n\t};\n\t\n\tfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n\t  var state = stream._readableState;\n\t  if (chunk === null) {\n\t    state.reading = false;\n\t    onEofChunk(stream, state);\n\t  } else {\n\t    var er;\n\t    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n\t    if (er) {\n\t      stream.emit('error', er);\n\t    } else if (state.objectMode || chunk && chunk.length > 0) {\n\t      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n\t        chunk = _uint8ArrayToBuffer(chunk);\n\t      }\n\t\n\t      if (addToFront) {\n\t        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n\t      } else if (state.ended) {\n\t        stream.emit('error', new Error('stream.push() after EOF'));\n\t      } else {\n\t        state.reading = false;\n\t        if (state.decoder && !encoding) {\n\t          chunk = state.decoder.write(chunk);\n\t          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n\t        } else {\n\t          addChunk(stream, state, chunk, false);\n\t        }\n\t      }\n\t    } else if (!addToFront) {\n\t      state.reading = false;\n\t    }\n\t  }\n\t\n\t  return needMoreData(state);\n\t}\n\t\n\tfunction addChunk(stream, state, chunk, addToFront) {\n\t  if (state.flowing && state.length === 0 && !state.sync) {\n\t    stream.emit('data', chunk);\n\t    stream.read(0);\n\t  } else {\n\t    // update the buffer info.\n\t    state.length += state.objectMode ? 1 : chunk.length;\n\t    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\t\n\t    if (state.needReadable) emitReadable(stream);\n\t  }\n\t  maybeReadMore(stream, state);\n\t}\n\t\n\tfunction chunkInvalid(state, chunk) {\n\t  var er;\n\t  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n\t    er = new TypeError('Invalid non-string/buffer chunk');\n\t  }\n\t  return er;\n\t}\n\t\n\t// if it's past the high water mark, we can push in some more.\n\t// Also, if we have no data yet, we can stand some\n\t// more bytes.  This is to work around cases where hwm=0,\n\t// such as the repl.  Also, if the push() triggered a\n\t// readable event, and the user called read(largeNumber) such that\n\t// needReadable was set, then we ought to push more, so that another\n\t// 'readable' event will be triggered.\n\tfunction needMoreData(state) {\n\t  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n\t}\n\t\n\tReadable.prototype.isPaused = function () {\n\t  return this._readableState.flowing === false;\n\t};\n\t\n\t// backwards compatibility.\n\tReadable.prototype.setEncoding = function (enc) {\n\t  if (!StringDecoder) StringDecoder = __webpack_require__(106).StringDecoder;\n\t  this._readableState.decoder = new StringDecoder(enc);\n\t  this._readableState.encoding = enc;\n\t  return this;\n\t};\n\t\n\t// Don't raise the hwm > 8MB\n\tvar MAX_HWM = 0x800000;\n\tfunction computeNewHighWaterMark(n) {\n\t  if (n >= MAX_HWM) {\n\t    n = MAX_HWM;\n\t  } else {\n\t    // Get the next highest power of 2 to prevent increasing hwm excessively in\n\t    // tiny amounts\n\t    n--;\n\t    n |= n >>> 1;\n\t    n |= n >>> 2;\n\t    n |= n >>> 4;\n\t    n |= n >>> 8;\n\t    n |= n >>> 16;\n\t    n++;\n\t  }\n\t  return n;\n\t}\n\t\n\t// This function is designed to be inlinable, so please take care when making\n\t// changes to the function body.\n\tfunction howMuchToRead(n, state) {\n\t  if (n <= 0 || state.length === 0 && state.ended) return 0;\n\t  if (state.objectMode) return 1;\n\t  if (n !== n) {\n\t    // Only flow one buffer at a time\n\t    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n\t  }\n\t  // If we're asking for more than the current hwm, then raise the hwm.\n\t  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n\t  if (n <= state.length) return n;\n\t  // Don't have enough\n\t  if (!state.ended) {\n\t    state.needReadable = true;\n\t    return 0;\n\t  }\n\t  return state.length;\n\t}\n\t\n\t// you can override either this method, or the async _read(n) below.\n\tReadable.prototype.read = function (n) {\n\t  debug('read', n);\n\t  n = parseInt(n, 10);\n\t  var state = this._readableState;\n\t  var nOrig = n;\n\t\n\t  if (n !== 0) state.emittedReadable = false;\n\t\n\t  // if we're doing read(0) to trigger a readable event, but we\n\t  // already have a bunch of data in the buffer, then just trigger\n\t  // the 'readable' event and move on.\n\t  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n\t    debug('read: emitReadable', state.length, state.ended);\n\t    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n\t    return null;\n\t  }\n\t\n\t  n = howMuchToRead(n, state);\n\t\n\t  // if we've ended, and we're now clear, then finish it up.\n\t  if (n === 0 && state.ended) {\n\t    if (state.length === 0) endReadable(this);\n\t    return null;\n\t  }\n\t\n\t  // All the actual chunk generation logic needs to be\n\t  // *below* the call to _read.  The reason is that in certain\n\t  // synthetic stream cases, such as passthrough streams, _read\n\t  // may be a completely synchronous operation which may change\n\t  // the state of the read buffer, providing enough data when\n\t  // before there was *not* enough.\n\t  //\n\t  // So, the steps are:\n\t  // 1. Figure out what the state of things will be after we do\n\t  // a read from the buffer.\n\t  //\n\t  // 2. If that resulting state will trigger a _read, then call _read.\n\t  // Note that this may be asynchronous, or synchronous.  Yes, it is\n\t  // deeply ugly to write APIs this way, but that still doesn't mean\n\t  // that the Readable class should behave improperly, as streams are\n\t  // designed to be sync/async agnostic.\n\t  // Take note if the _read call is sync or async (ie, if the read call\n\t  // has returned yet), so that we know whether or not it's safe to emit\n\t  // 'readable' etc.\n\t  //\n\t  // 3. Actually pull the requested chunks out of the buffer and return.\n\t\n\t  // if we need a readable event, then we need to do some reading.\n\t  var doRead = state.needReadable;\n\t  debug('need readable', doRead);\n\t\n\t  // if we currently have less than the highWaterMark, then also read some\n\t  if (state.length === 0 || state.length - n < state.highWaterMark) {\n\t    doRead = true;\n\t    debug('length less than watermark', doRead);\n\t  }\n\t\n\t  // however, if we've ended, then there's no point, and if we're already\n\t  // reading, then it's unnecessary.\n\t  if (state.ended || state.reading) {\n\t    doRead = false;\n\t    debug('reading or ended', doRead);\n\t  } else if (doRead) {\n\t    debug('do read');\n\t    state.reading = true;\n\t    state.sync = true;\n\t    // if the length is currently zero, then we *need* a readable event.\n\t    if (state.length === 0) state.needReadable = true;\n\t    // call internal read method\n\t    this._read(state.highWaterMark);\n\t    state.sync = false;\n\t    // If _read pushed data synchronously, then `reading` will be false,\n\t    // and we need to re-evaluate how much data we can return to the user.\n\t    if (!state.reading) n = howMuchToRead(nOrig, state);\n\t  }\n\t\n\t  var ret;\n\t  if (n > 0) ret = fromList(n, state);else ret = null;\n\t\n\t  if (ret === null) {\n\t    state.needReadable = true;\n\t    n = 0;\n\t  } else {\n\t    state.length -= n;\n\t  }\n\t\n\t  if (state.length === 0) {\n\t    // If we have nothing in the buffer, then we want to know\n\t    // as soon as we *do* get something into the buffer.\n\t    if (!state.ended) state.needReadable = true;\n\t\n\t    // If we tried to read() past the EOF, then emit end on the next tick.\n\t    if (nOrig !== n && state.ended) endReadable(this);\n\t  }\n\t\n\t  if (ret !== null) this.emit('data', ret);\n\t\n\t  return ret;\n\t};\n\t\n\tfunction onEofChunk(stream, state) {\n\t  if (state.ended) return;\n\t  if (state.decoder) {\n\t    var chunk = state.decoder.end();\n\t    if (chunk && chunk.length) {\n\t      state.buffer.push(chunk);\n\t      state.length += state.objectMode ? 1 : chunk.length;\n\t    }\n\t  }\n\t  state.ended = true;\n\t\n\t  // emit 'readable' now to make sure it gets picked up.\n\t  emitReadable(stream);\n\t}\n\t\n\t// Don't emit readable right away in sync mode, because this can trigger\n\t// another read() call => stack overflow.  This way, it might trigger\n\t// a nextTick recursion warning, but that's not so bad.\n\tfunction emitReadable(stream) {\n\t  var state = stream._readableState;\n\t  state.needReadable = false;\n\t  if (!state.emittedReadable) {\n\t    debug('emitReadable', state.flowing);\n\t    state.emittedReadable = true;\n\t    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n\t  }\n\t}\n\t\n\tfunction emitReadable_(stream) {\n\t  debug('emit readable');\n\t  stream.emit('readable');\n\t  flow(stream);\n\t}\n\t\n\t// at this point, the user has presumably seen the 'readable' event,\n\t// and called read() to consume some data.  that may have triggered\n\t// in turn another _read(n) call, in which case reading = true if\n\t// it's in progress.\n\t// However, if we're not ended, or reading, and the length < hwm,\n\t// then go ahead and try to read some more preemptively.\n\tfunction maybeReadMore(stream, state) {\n\t  if (!state.readingMore) {\n\t    state.readingMore = true;\n\t    pna.nextTick(maybeReadMore_, stream, state);\n\t  }\n\t}\n\t\n\tfunction maybeReadMore_(stream, state) {\n\t  var len = state.length;\n\t  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n\t    debug('maybeReadMore read 0');\n\t    stream.read(0);\n\t    if (len === state.length)\n\t      // didn't get any data, stop spinning.\n\t      break;else len = state.length;\n\t  }\n\t  state.readingMore = false;\n\t}\n\t\n\t// abstract method.  to be overridden in specific implementation classes.\n\t// call cb(er, data) where data is <= n in length.\n\t// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n\t// arbitrary, and perhaps not very meaningful.\n\tReadable.prototype._read = function (n) {\n\t  this.emit('error', new Error('_read() is not implemented'));\n\t};\n\t\n\tReadable.prototype.pipe = function (dest, pipeOpts) {\n\t  var src = this;\n\t  var state = this._readableState;\n\t\n\t  switch (state.pipesCount) {\n\t    case 0:\n\t      state.pipes = dest;\n\t      break;\n\t    case 1:\n\t      state.pipes = [state.pipes, dest];\n\t      break;\n\t    default:\n\t      state.pipes.push(dest);\n\t      break;\n\t  }\n\t  state.pipesCount += 1;\n\t  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\t\n\t  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\t\n\t  var endFn = doEnd ? onend : unpipe;\n\t  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\t\n\t  dest.on('unpipe', onunpipe);\n\t  function onunpipe(readable, unpipeInfo) {\n\t    debug('onunpipe');\n\t    if (readable === src) {\n\t      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n\t        unpipeInfo.hasUnpiped = true;\n\t        cleanup();\n\t      }\n\t    }\n\t  }\n\t\n\t  function onend() {\n\t    debug('onend');\n\t    dest.end();\n\t  }\n\t\n\t  // when the dest drains, it reduces the awaitDrain counter\n\t  // on the source.  This would be more elegant with a .once()\n\t  // handler in flow(), but adding and removing repeatedly is\n\t  // too slow.\n\t  var ondrain = pipeOnDrain(src);\n\t  dest.on('drain', ondrain);\n\t\n\t  var cleanedUp = false;\n\t  function cleanup() {\n\t    debug('cleanup');\n\t    // cleanup event handlers once the pipe is broken\n\t    dest.removeListener('close', onclose);\n\t    dest.removeListener('finish', onfinish);\n\t    dest.removeListener('drain', ondrain);\n\t    dest.removeListener('error', onerror);\n\t    dest.removeListener('unpipe', onunpipe);\n\t    src.removeListener('end', onend);\n\t    src.removeListener('end', unpipe);\n\t    src.removeListener('data', ondata);\n\t\n\t    cleanedUp = true;\n\t\n\t    // if the reader is waiting for a drain event from this\n\t    // specific writer, then it would cause it to never start\n\t    // flowing again.\n\t    // So, if this is awaiting a drain, then we just call it now.\n\t    // If we don't know, then assume that we are waiting for one.\n\t    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n\t  }\n\t\n\t  // If the user pushes more data while we're writing to dest then we'll end up\n\t  // in ondata again. However, we only want to increase awaitDrain once because\n\t  // dest will only emit one 'drain' event for the multiple writes.\n\t  // => Introduce a guard on increasing awaitDrain.\n\t  var increasedAwaitDrain = false;\n\t  src.on('data', ondata);\n\t  function ondata(chunk) {\n\t    debug('ondata');\n\t    increasedAwaitDrain = false;\n\t    var ret = dest.write(chunk);\n\t    if (false === ret && !increasedAwaitDrain) {\n\t      // If the user unpiped during `dest.write()`, it is possible\n\t      // to get stuck in a permanently paused state if that write\n\t      // also returned false.\n\t      // => Check whether `dest` is still a piping destination.\n\t      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n\t        debug('false write response, pause', src._readableState.awaitDrain);\n\t        src._readableState.awaitDrain++;\n\t        increasedAwaitDrain = true;\n\t      }\n\t      src.pause();\n\t    }\n\t  }\n\t\n\t  // if the dest has an error, then stop piping into it.\n\t  // however, don't suppress the throwing behavior for this.\n\t  function onerror(er) {\n\t    debug('onerror', er);\n\t    unpipe();\n\t    dest.removeListener('error', onerror);\n\t    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n\t  }\n\t\n\t  // Make sure our error handler is attached before userland ones.\n\t  prependListener(dest, 'error', onerror);\n\t\n\t  // Both close and finish should trigger unpipe, but only once.\n\t  function onclose() {\n\t    dest.removeListener('finish', onfinish);\n\t    unpipe();\n\t  }\n\t  dest.once('close', onclose);\n\t  function onfinish() {\n\t    debug('onfinish');\n\t    dest.removeListener('close', onclose);\n\t    unpipe();\n\t  }\n\t  dest.once('finish', onfinish);\n\t\n\t  function unpipe() {\n\t    debug('unpipe');\n\t    src.unpipe(dest);\n\t  }\n\t\n\t  // tell the dest that it's being piped to\n\t  dest.emit('pipe', src);\n\t\n\t  // start the flow if it hasn't been started already.\n\t  if (!state.flowing) {\n\t    debug('pipe resume');\n\t    src.resume();\n\t  }\n\t\n\t  return dest;\n\t};\n\t\n\tfunction pipeOnDrain(src) {\n\t  return function () {\n\t    var state = src._readableState;\n\t    debug('pipeOnDrain', state.awaitDrain);\n\t    if (state.awaitDrain) state.awaitDrain--;\n\t    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n\t      state.flowing = true;\n\t      flow(src);\n\t    }\n\t  };\n\t}\n\t\n\tReadable.prototype.unpipe = function (dest) {\n\t  var state = this._readableState;\n\t  var unpipeInfo = { hasUnpiped: false };\n\t\n\t  // if we're not piping anywhere, then do nothing.\n\t  if (state.pipesCount === 0) return this;\n\t\n\t  // just one destination.  most common case.\n\t  if (state.pipesCount === 1) {\n\t    // passed in one, but it's not the right one.\n\t    if (dest && dest !== state.pipes) return this;\n\t\n\t    if (!dest) dest = state.pipes;\n\t\n\t    // got a match.\n\t    state.pipes = null;\n\t    state.pipesCount = 0;\n\t    state.flowing = false;\n\t    if (dest) dest.emit('unpipe', this, unpipeInfo);\n\t    return this;\n\t  }\n\t\n\t  // slow case. multiple pipe destinations.\n\t\n\t  if (!dest) {\n\t    // remove all.\n\t    var dests = state.pipes;\n\t    var len = state.pipesCount;\n\t    state.pipes = null;\n\t    state.pipesCount = 0;\n\t    state.flowing = false;\n\t\n\t    for (var i = 0; i < len; i++) {\n\t      dests[i].emit('unpipe', this, unpipeInfo);\n\t    }return this;\n\t  }\n\t\n\t  // try to find the right one.\n\t  var index = indexOf(state.pipes, dest);\n\t  if (index === -1) return this;\n\t\n\t  state.pipes.splice(index, 1);\n\t  state.pipesCount -= 1;\n\t  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\t\n\t  dest.emit('unpipe', this, unpipeInfo);\n\t\n\t  return this;\n\t};\n\t\n\t// set up data events if they are asked for\n\t// Ensure readable listeners eventually get something\n\tReadable.prototype.on = function (ev, fn) {\n\t  var res = Stream.prototype.on.call(this, ev, fn);\n\t\n\t  if (ev === 'data') {\n\t    // Start flowing on next tick if stream isn't explicitly paused\n\t    if (this._readableState.flowing !== false) this.resume();\n\t  } else if (ev === 'readable') {\n\t    var state = this._readableState;\n\t    if (!state.endEmitted && !state.readableListening) {\n\t      state.readableListening = state.needReadable = true;\n\t      state.emittedReadable = false;\n\t      if (!state.reading) {\n\t        pna.nextTick(nReadingNextTick, this);\n\t      } else if (state.length) {\n\t        emitReadable(this);\n\t      }\n\t    }\n\t  }\n\t\n\t  return res;\n\t};\n\tReadable.prototype.addListener = Readable.prototype.on;\n\t\n\tfunction nReadingNextTick(self) {\n\t  debug('readable nexttick read 0');\n\t  self.read(0);\n\t}\n\t\n\t// pause() and resume() are remnants of the legacy readable stream API\n\t// If the user uses them, then switch into old mode.\n\tReadable.prototype.resume = function () {\n\t  var state = this._readableState;\n\t  if (!state.flowing) {\n\t    debug('resume');\n\t    state.flowing = true;\n\t    resume(this, state);\n\t  }\n\t  return this;\n\t};\n\t\n\tfunction resume(stream, state) {\n\t  if (!state.resumeScheduled) {\n\t    state.resumeScheduled = true;\n\t    pna.nextTick(resume_, stream, state);\n\t  }\n\t}\n\t\n\tfunction resume_(stream, state) {\n\t  if (!state.reading) {\n\t    debug('resume read 0');\n\t    stream.read(0);\n\t  }\n\t\n\t  state.resumeScheduled = false;\n\t  state.awaitDrain = 0;\n\t  stream.emit('resume');\n\t  flow(stream);\n\t  if (state.flowing && !state.reading) stream.read(0);\n\t}\n\t\n\tReadable.prototype.pause = function () {\n\t  debug('call pause flowing=%j', this._readableState.flowing);\n\t  if (false !== this._readableState.flowing) {\n\t    debug('pause');\n\t    this._readableState.flowing = false;\n\t    this.emit('pause');\n\t  }\n\t  return this;\n\t};\n\t\n\tfunction flow(stream) {\n\t  var state = stream._readableState;\n\t  debug('flow', state.flowing);\n\t  while (state.flowing && stream.read() !== null) {}\n\t}\n\t\n\t// wrap an old-style stream as the async data source.\n\t// This is *not* part of the readable stream interface.\n\t// It is an ugly unfortunate mess of history.\n\tReadable.prototype.wrap = function (stream) {\n\t  var _this = this;\n\t\n\t  var state = this._readableState;\n\t  var paused = false;\n\t\n\t  stream.on('end', function () {\n\t    debug('wrapped end');\n\t    if (state.decoder && !state.ended) {\n\t      var chunk = state.decoder.end();\n\t      if (chunk && chunk.length) _this.push(chunk);\n\t    }\n\t\n\t    _this.push(null);\n\t  });\n\t\n\t  stream.on('data', function (chunk) {\n\t    debug('wrapped data');\n\t    if (state.decoder) chunk = state.decoder.write(chunk);\n\t\n\t    // don't skip over falsy values in objectMode\n\t    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\t\n\t    var ret = _this.push(chunk);\n\t    if (!ret) {\n\t      paused = true;\n\t      stream.pause();\n\t    }\n\t  });\n\t\n\t  // proxy all the other methods.\n\t  // important when wrapping filters and duplexes.\n\t  for (var i in stream) {\n\t    if (this[i] === undefined && typeof stream[i] === 'function') {\n\t      this[i] = function (method) {\n\t        return function () {\n\t          return stream[method].apply(stream, arguments);\n\t        };\n\t      }(i);\n\t    }\n\t  }\n\t\n\t  // proxy certain important events.\n\t  for (var n = 0; n < kProxyEvents.length; n++) {\n\t    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n\t  }\n\t\n\t  // when we try to consume some more bytes, simply unpause the\n\t  // underlying stream.\n\t  this._read = function (n) {\n\t    debug('wrapped _read', n);\n\t    if (paused) {\n\t      paused = false;\n\t      stream.resume();\n\t    }\n\t  };\n\t\n\t  return this;\n\t};\n\t\n\tObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n\t  // making it explicit this property is not enumerable\n\t  // because otherwise some prototype manipulation in\n\t  // userland will fail\n\t  enumerable: false,\n\t  get: function () {\n\t    return this._readableState.highWaterMark;\n\t  }\n\t});\n\t\n\t// exposed for testing purposes only.\n\tReadable._fromList = fromList;\n\t\n\t// Pluck off n bytes from an array of buffers.\n\t// Length is the combined lengths of all the buffers in the list.\n\t// This function is designed to be inlinable, so please take care when making\n\t// changes to the function body.\n\tfunction fromList(n, state) {\n\t  // nothing buffered\n\t  if (state.length === 0) return null;\n\t\n\t  var ret;\n\t  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n\t    // read it all, truncate the list\n\t    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n\t    state.buffer.clear();\n\t  } else {\n\t    // read part of list\n\t    ret = fromListPartial(n, state.buffer, state.decoder);\n\t  }\n\t\n\t  return ret;\n\t}\n\t\n\t// Extracts only enough buffered data to satisfy the amount requested.\n\t// This function is designed to be inlinable, so please take care when making\n\t// changes to the function body.\n\tfunction fromListPartial(n, list, hasStrings) {\n\t  var ret;\n\t  if (n < list.head.data.length) {\n\t    // slice is the same for buffers and strings\n\t    ret = list.head.data.slice(0, n);\n\t    list.head.data = list.head.data.slice(n);\n\t  } else if (n === list.head.data.length) {\n\t    // first chunk is a perfect match\n\t    ret = list.shift();\n\t  } else {\n\t    // result spans more than one buffer\n\t    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n\t  }\n\t  return ret;\n\t}\n\t\n\t// Copies a specified amount of characters from the list of buffered data\n\t// chunks.\n\t// This function is designed to be inlinable, so please take care when making\n\t// changes to the function body.\n\tfunction copyFromBufferString(n, list) {\n\t  var p = list.head;\n\t  var c = 1;\n\t  var ret = p.data;\n\t  n -= ret.length;\n\t  while (p = p.next) {\n\t    var str = p.data;\n\t    var nb = n > str.length ? str.length : n;\n\t    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n\t    n -= nb;\n\t    if (n === 0) {\n\t      if (nb === str.length) {\n\t        ++c;\n\t        if (p.next) list.head = p.next;else list.head = list.tail = null;\n\t      } else {\n\t        list.head = p;\n\t        p.data = str.slice(nb);\n\t      }\n\t      break;\n\t    }\n\t    ++c;\n\t  }\n\t  list.length -= c;\n\t  return ret;\n\t}\n\t\n\t// Copies a specified amount of bytes from the list of buffered data chunks.\n\t// This function is designed to be inlinable, so please take care when making\n\t// changes to the function body.\n\tfunction copyFromBuffer(n, list) {\n\t  var ret = Buffer.allocUnsafe(n);\n\t  var p = list.head;\n\t  var c = 1;\n\t  p.data.copy(ret);\n\t  n -= p.data.length;\n\t  while (p = p.next) {\n\t    var buf = p.data;\n\t    var nb = n > buf.length ? buf.length : n;\n\t    buf.copy(ret, ret.length - n, 0, nb);\n\t    n -= nb;\n\t    if (n === 0) {\n\t      if (nb === buf.length) {\n\t        ++c;\n\t        if (p.next) list.head = p.next;else list.head = list.tail = null;\n\t      } else {\n\t        list.head = p;\n\t        p.data = buf.slice(nb);\n\t      }\n\t      break;\n\t    }\n\t    ++c;\n\t  }\n\t  list.length -= c;\n\t  return ret;\n\t}\n\t\n\tfunction endReadable(stream) {\n\t  var state = stream._readableState;\n\t\n\t  // If we get here before consuming all the bytes, then that is a\n\t  // bug in node.  Should never happen.\n\t  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\t\n\t  if (!state.endEmitted) {\n\t    state.ended = true;\n\t    pna.nextTick(endReadableNT, state, stream);\n\t  }\n\t}\n\t\n\tfunction endReadableNT(state, stream) {\n\t  // Check that we didn't get one last unshift.\n\t  if (!state.endEmitted && state.length === 0) {\n\t    state.endEmitted = true;\n\t    stream.readable = false;\n\t    stream.emit('end');\n\t  }\n\t}\n\t\n\tfunction indexOf(xs, x) {\n\t  for (var i = 0, l = xs.length; i < l; i++) {\n\t    if (xs[i] === x) return i;\n\t  }\n\t  return -1;\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }()), __webpack_require__(72)))\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {'use strict';\n\t\n\tif (!process.version ||\n\t    process.version.indexOf('v0.') === 0 ||\n\t    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n\t  module.exports = { nextTick: nextTick };\n\t} else {\n\t  module.exports = process\n\t}\n\t\n\tfunction nextTick(fn, arg1, arg2, arg3) {\n\t  if (typeof fn !== 'function') {\n\t    throw new TypeError('\"callback\" argument must be a function');\n\t  }\n\t  var len = arguments.length;\n\t  var args, i;\n\t  switch (len) {\n\t  case 0:\n\t  case 1:\n\t    return process.nextTick(fn);\n\t  case 2:\n\t    return process.nextTick(function afterTickOne() {\n\t      fn.call(null, arg1);\n\t    });\n\t  case 3:\n\t    return process.nextTick(function afterTickTwo() {\n\t      fn.call(null, arg1, arg2);\n\t    });\n\t  case 4:\n\t    return process.nextTick(function afterTickThree() {\n\t      fn.call(null, arg1, arg2, arg3);\n\t    });\n\t  default:\n\t    args = new Array(len - 1);\n\t    i = 0;\n\t    while (i < args.length) {\n\t      args[i++] = arguments[i];\n\t    }\n\t    return process.nextTick(function afterTick() {\n\t      fn.apply(null, args);\n\t    });\n\t  }\n\t}\n\t\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(72)))\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports) {\n\n\tvar toString = {}.toString;\n\t\n\tmodule.exports = Array.isArray || function (arr) {\n\t  return toString.call(arr) == '[object Array]';\n\t};\n\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(88).EventEmitter;\n\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* eslint-disable node/no-deprecated-api */\n\tvar buffer = __webpack_require__(61)\n\tvar Buffer = buffer.Buffer\n\t\n\t// alternative to using Object.keys for old browsers\n\tfunction copyProps (src, dst) {\n\t  for (var key in src) {\n\t    dst[key] = src[key]\n\t  }\n\t}\n\tif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n\t  module.exports = buffer\n\t} else {\n\t  // Copy properties from require('buffer')\n\t  copyProps(buffer, exports)\n\t  exports.Buffer = SafeBuffer\n\t}\n\t\n\tfunction SafeBuffer (arg, encodingOrOffset, length) {\n\t  return Buffer(arg, encodingOrOffset, length)\n\t}\n\t\n\t// Copy static methods from Buffer\n\tcopyProps(Buffer, SafeBuffer)\n\t\n\tSafeBuffer.from = function (arg, encodingOrOffset, length) {\n\t  if (typeof arg === 'number') {\n\t    throw new TypeError('Argument must not be a number')\n\t  }\n\t  return Buffer(arg, encodingOrOffset, length)\n\t}\n\t\n\tSafeBuffer.alloc = function (size, fill, encoding) {\n\t  if (typeof size !== 'number') {\n\t    throw new TypeError('Argument must be a number')\n\t  }\n\t  var buf = Buffer(size)\n\t  if (fill !== undefined) {\n\t    if (typeof encoding === 'string') {\n\t      buf.fill(fill, encoding)\n\t    } else {\n\t      buf.fill(fill)\n\t    }\n\t  } else {\n\t    buf.fill(0)\n\t  }\n\t  return buf\n\t}\n\t\n\tSafeBuffer.allocUnsafe = function (size) {\n\t  if (typeof size !== 'number') {\n\t    throw new TypeError('Argument must be a number')\n\t  }\n\t  return Buffer(size)\n\t}\n\t\n\tSafeBuffer.allocUnsafeSlow = function (size) {\n\t  if (typeof size !== 'number') {\n\t    throw new TypeError('Argument must be a number')\n\t  }\n\t  return buffer.SlowBuffer(size)\n\t}\n\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\t// NOTE: These type checking functions intentionally don't use `instanceof`\n\t// because it is fragile and can be easily faked with `Object.create()`.\n\t\n\tfunction isArray(arg) {\n\t  if (Array.isArray) {\n\t    return Array.isArray(arg);\n\t  }\n\t  return objectToString(arg) === '[object Array]';\n\t}\n\texports.isArray = isArray;\n\t\n\tfunction isBoolean(arg) {\n\t  return typeof arg === 'boolean';\n\t}\n\texports.isBoolean = isBoolean;\n\t\n\tfunction isNull(arg) {\n\t  return arg === null;\n\t}\n\texports.isNull = isNull;\n\t\n\tfunction isNullOrUndefined(arg) {\n\t  return arg == null;\n\t}\n\texports.isNullOrUndefined = isNullOrUndefined;\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\texports.isNumber = isNumber;\n\t\n\tfunction isString(arg) {\n\t  return typeof arg === 'string';\n\t}\n\texports.isString = isString;\n\t\n\tfunction isSymbol(arg) {\n\t  return typeof arg === 'symbol';\n\t}\n\texports.isSymbol = isSymbol;\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\texports.isUndefined = isUndefined;\n\t\n\tfunction isRegExp(re) {\n\t  return objectToString(re) === '[object RegExp]';\n\t}\n\texports.isRegExp = isRegExp;\n\t\n\tfunction isObject(arg) {\n\t  return typeof arg === 'object' && arg !== null;\n\t}\n\texports.isObject = isObject;\n\t\n\tfunction isDate(d) {\n\t  return objectToString(d) === '[object Date]';\n\t}\n\texports.isDate = isDate;\n\t\n\tfunction isError(e) {\n\t  return (objectToString(e) === '[object Error]' || e instanceof Error);\n\t}\n\texports.isError = isError;\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\texports.isFunction = isFunction;\n\t\n\tfunction isPrimitive(arg) {\n\t  return arg === null ||\n\t         typeof arg === 'boolean' ||\n\t         typeof arg === 'number' ||\n\t         typeof arg === 'string' ||\n\t         typeof arg === 'symbol' ||  // ES6 symbol\n\t         typeof arg === 'undefined';\n\t}\n\texports.isPrimitive = isPrimitive;\n\t\n\texports.isBuffer = Buffer.isBuffer;\n\t\n\tfunction objectToString(o) {\n\t  return Object.prototype.toString.call(o);\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Buffer = __webpack_require__(95).Buffer;\n\tvar util = __webpack_require__(99);\n\t\n\tfunction copyBuffer(src, target, offset) {\n\t  src.copy(target, offset);\n\t}\n\t\n\tmodule.exports = function () {\n\t  function BufferList() {\n\t    _classCallCheck(this, BufferList);\n\t\n\t    this.head = null;\n\t    this.tail = null;\n\t    this.length = 0;\n\t  }\n\t\n\t  BufferList.prototype.push = function push(v) {\n\t    var entry = { data: v, next: null };\n\t    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n\t    this.tail = entry;\n\t    ++this.length;\n\t  };\n\t\n\t  BufferList.prototype.unshift = function unshift(v) {\n\t    var entry = { data: v, next: this.head };\n\t    if (this.length === 0) this.tail = entry;\n\t    this.head = entry;\n\t    ++this.length;\n\t  };\n\t\n\t  BufferList.prototype.shift = function shift() {\n\t    if (this.length === 0) return;\n\t    var ret = this.head.data;\n\t    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n\t    --this.length;\n\t    return ret;\n\t  };\n\t\n\t  BufferList.prototype.clear = function clear() {\n\t    this.head = this.tail = null;\n\t    this.length = 0;\n\t  };\n\t\n\t  BufferList.prototype.join = function join(s) {\n\t    if (this.length === 0) return '';\n\t    var p = this.head;\n\t    var ret = '' + p.data;\n\t    while (p = p.next) {\n\t      ret += s + p.data;\n\t    }return ret;\n\t  };\n\t\n\t  BufferList.prototype.concat = function concat(n) {\n\t    if (this.length === 0) return Buffer.alloc(0);\n\t    if (this.length === 1) return this.head.data;\n\t    var ret = Buffer.allocUnsafe(n >>> 0);\n\t    var p = this.head;\n\t    var i = 0;\n\t    while (p) {\n\t      copyBuffer(p.data, ret, i);\n\t      i += p.data.length;\n\t      p = p.next;\n\t    }\n\t    return ret;\n\t  };\n\t\n\t  return BufferList;\n\t}();\n\t\n\tif (util && util.inspect && util.inspect.custom) {\n\t  module.exports.prototype[util.inspect.custom] = function () {\n\t    var obj = util.inspect({ length: this.length });\n\t    return this.constructor.name + ' ' + obj;\n\t  };\n\t}\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/*<replacement>*/\n\t\n\tvar pna = __webpack_require__(92);\n\t/*</replacement>*/\n\t\n\t// undocumented cb() API, needed for core, not for public API\n\tfunction destroy(err, cb) {\n\t  var _this = this;\n\t\n\t  var readableDestroyed = this._readableState && this._readableState.destroyed;\n\t  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\t\n\t  if (readableDestroyed || writableDestroyed) {\n\t    if (cb) {\n\t      cb(err);\n\t    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n\t      pna.nextTick(emitErrorNT, this, err);\n\t    }\n\t    return this;\n\t  }\n\t\n\t  // we set destroyed to true before firing error callbacks in order\n\t  // to make it re-entrance safe in case destroy() is called within callbacks\n\t\n\t  if (this._readableState) {\n\t    this._readableState.destroyed = true;\n\t  }\n\t\n\t  // if this is a duplex stream mark the writable part as destroyed as well\n\t  if (this._writableState) {\n\t    this._writableState.destroyed = true;\n\t  }\n\t\n\t  this._destroy(err || null, function (err) {\n\t    if (!cb && err) {\n\t      pna.nextTick(emitErrorNT, _this, err);\n\t      if (_this._writableState) {\n\t        _this._writableState.errorEmitted = true;\n\t      }\n\t    } else if (cb) {\n\t      cb(err);\n\t    }\n\t  });\n\t\n\t  return this;\n\t}\n\t\n\tfunction undestroy() {\n\t  if (this._readableState) {\n\t    this._readableState.destroyed = false;\n\t    this._readableState.reading = false;\n\t    this._readableState.ended = false;\n\t    this._readableState.endEmitted = false;\n\t  }\n\t\n\t  if (this._writableState) {\n\t    this._writableState.destroyed = false;\n\t    this._writableState.ended = false;\n\t    this._writableState.ending = false;\n\t    this._writableState.finished = false;\n\t    this._writableState.errorEmitted = false;\n\t  }\n\t}\n\t\n\tfunction emitErrorNT(self, err) {\n\t  self.emit('error', err);\n\t}\n\t\n\tmodule.exports = {\n\t  destroy: destroy,\n\t  undestroy: undestroy\n\t};\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\t// a duplex stream is just a stream that is both readable and writable.\n\t// Since JS doesn't have multiple prototypal inheritance, this class\n\t// prototypally inherits from Readable, and then parasitically from\n\t// Writable.\n\t\n\t'use strict';\n\t\n\t/*<replacement>*/\n\t\n\tvar pna = __webpack_require__(92);\n\t/*</replacement>*/\n\t\n\t/*<replacement>*/\n\tvar objectKeys = Object.keys || function (obj) {\n\t  var keys = [];\n\t  for (var key in obj) {\n\t    keys.push(key);\n\t  }return keys;\n\t};\n\t/*</replacement>*/\n\t\n\tmodule.exports = Duplex;\n\t\n\t/*<replacement>*/\n\tvar util = __webpack_require__(96);\n\tutil.inherits = __webpack_require__(89);\n\t/*</replacement>*/\n\t\n\tvar Readable = __webpack_require__(91);\n\tvar Writable = __webpack_require__(102);\n\t\n\tutil.inherits(Duplex, Readable);\n\t\n\t{\n\t  // avoid scope creep, the keys array can then be collected\n\t  var keys = objectKeys(Writable.prototype);\n\t  for (var v = 0; v < keys.length; v++) {\n\t    var method = keys[v];\n\t    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n\t  }\n\t}\n\t\n\tfunction Duplex(options) {\n\t  if (!(this instanceof Duplex)) return new Duplex(options);\n\t\n\t  Readable.call(this, options);\n\t  Writable.call(this, options);\n\t\n\t  if (options && options.readable === false) this.readable = false;\n\t\n\t  if (options && options.writable === false) this.writable = false;\n\t\n\t  this.allowHalfOpen = true;\n\t  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\t\n\t  this.once('end', onend);\n\t}\n\t\n\tObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n\t  // making it explicit this property is not enumerable\n\t  // because otherwise some prototype manipulation in\n\t  // userland will fail\n\t  enumerable: false,\n\t  get: function () {\n\t    return this._writableState.highWaterMark;\n\t  }\n\t});\n\t\n\t// the no-half-open enforcer\n\tfunction onend() {\n\t  // if we allow half-open state, or if the writable side ended,\n\t  // then we're ok.\n\t  if (this.allowHalfOpen || this._writableState.ended) return;\n\t\n\t  // no more data can be written.\n\t  // But allow more writes to happen in this tick.\n\t  pna.nextTick(onEndNT, this);\n\t}\n\t\n\tfunction onEndNT(self) {\n\t  self.end();\n\t}\n\t\n\tObject.defineProperty(Duplex.prototype, 'destroyed', {\n\t  get: function () {\n\t    if (this._readableState === undefined || this._writableState === undefined) {\n\t      return false;\n\t    }\n\t    return this._readableState.destroyed && this._writableState.destroyed;\n\t  },\n\t  set: function (value) {\n\t    // we ignore the value if the stream\n\t    // has not been initialized yet\n\t    if (this._readableState === undefined || this._writableState === undefined) {\n\t      return;\n\t    }\n\t\n\t    // backward compatibility, the user is explicitly\n\t    // managing destroyed\n\t    this._readableState.destroyed = value;\n\t    this._writableState.destroyed = value;\n\t  }\n\t});\n\t\n\tDuplex.prototype._destroy = function (err, cb) {\n\t  this.push(null);\n\t  this.end();\n\t\n\t  pna.nextTick(cb, err);\n\t};\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process, setImmediate, global) {// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\t// A bit simpler than readable streams.\n\t// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n\t// the drain event emission and buffering.\n\t\n\t'use strict';\n\t\n\t/*<replacement>*/\n\t\n\tvar pna = __webpack_require__(92);\n\t/*</replacement>*/\n\t\n\tmodule.exports = Writable;\n\t\n\t/* <replacement> */\n\tfunction WriteReq(chunk, encoding, cb) {\n\t  this.chunk = chunk;\n\t  this.encoding = encoding;\n\t  this.callback = cb;\n\t  this.next = null;\n\t}\n\t\n\t// It seems a linked list but it is not\n\t// there will be only 2 of these for each stream\n\tfunction CorkedRequest(state) {\n\t  var _this = this;\n\t\n\t  this.next = null;\n\t  this.entry = null;\n\t  this.finish = function () {\n\t    onCorkedFinish(_this, state);\n\t  };\n\t}\n\t/* </replacement> */\n\t\n\t/*<replacement>*/\n\tvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n\t/*</replacement>*/\n\t\n\t/*<replacement>*/\n\tvar Duplex;\n\t/*</replacement>*/\n\t\n\tWritable.WritableState = WritableState;\n\t\n\t/*<replacement>*/\n\tvar util = __webpack_require__(96);\n\tutil.inherits = __webpack_require__(89);\n\t/*</replacement>*/\n\t\n\t/*<replacement>*/\n\tvar internalUtil = {\n\t  deprecate: __webpack_require__(105)\n\t};\n\t/*</replacement>*/\n\t\n\t/*<replacement>*/\n\tvar Stream = __webpack_require__(94);\n\t/*</replacement>*/\n\t\n\t/*<replacement>*/\n\t\n\tvar Buffer = __webpack_require__(95).Buffer;\n\tvar OurUint8Array = global.Uint8Array || function () {};\n\tfunction _uint8ArrayToBuffer(chunk) {\n\t  return Buffer.from(chunk);\n\t}\n\tfunction _isUint8Array(obj) {\n\t  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n\t}\n\t\n\t/*</replacement>*/\n\t\n\tvar destroyImpl = __webpack_require__(100);\n\t\n\tutil.inherits(Writable, Stream);\n\t\n\tfunction nop() {}\n\t\n\tfunction WritableState(options, stream) {\n\t  Duplex = Duplex || __webpack_require__(101);\n\t\n\t  options = options || {};\n\t\n\t  // Duplex streams are both readable and writable, but share\n\t  // the same options object.\n\t  // However, some cases require setting options to different\n\t  // values for the readable and the writable sides of the duplex stream.\n\t  // These options can be provided separately as readableXXX and writableXXX.\n\t  var isDuplex = stream instanceof Duplex;\n\t\n\t  // object stream flag to indicate whether or not this stream\n\t  // contains buffers or objects.\n\t  this.objectMode = !!options.objectMode;\n\t\n\t  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\t\n\t  // the point at which write() starts returning false\n\t  // Note: 0 is a valid value, means that we always return false if\n\t  // the entire buffer is not flushed immediately on write()\n\t  var hwm = options.highWaterMark;\n\t  var writableHwm = options.writableHighWaterMark;\n\t  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\t\n\t  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\t\n\t  // cast to ints.\n\t  this.highWaterMark = Math.floor(this.highWaterMark);\n\t\n\t  // if _final has been called\n\t  this.finalCalled = false;\n\t\n\t  // drain event flag.\n\t  this.needDrain = false;\n\t  // at the start of calling end()\n\t  this.ending = false;\n\t  // when end() has been called, and returned\n\t  this.ended = false;\n\t  // when 'finish' is emitted\n\t  this.finished = false;\n\t\n\t  // has it been destroyed\n\t  this.destroyed = false;\n\t\n\t  // should we decode strings into buffers before passing to _write?\n\t  // this is here so that some node-core streams can optimize string\n\t  // handling at a lower level.\n\t  var noDecode = options.decodeStrings === false;\n\t  this.decodeStrings = !noDecode;\n\t\n\t  // Crypto is kind of old and crusty.  Historically, its default string\n\t  // encoding is 'binary' so we have to make this configurable.\n\t  // Everything else in the universe uses 'utf8', though.\n\t  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\t\n\t  // not an actual buffer we keep track of, but a measurement\n\t  // of how much we're waiting to get pushed to some underlying\n\t  // socket or file.\n\t  this.length = 0;\n\t\n\t  // a flag to see when we're in the middle of a write.\n\t  this.writing = false;\n\t\n\t  // when true all writes will be buffered until .uncork() call\n\t  this.corked = 0;\n\t\n\t  // a flag to be able to tell if the onwrite cb is called immediately,\n\t  // or on a later tick.  We set this to true at first, because any\n\t  // actions that shouldn't happen until \"later\" should generally also\n\t  // not happen before the first write call.\n\t  this.sync = true;\n\t\n\t  // a flag to know if we're processing previously buffered items, which\n\t  // may call the _write() callback in the same tick, so that we don't\n\t  // end up in an overlapped onwrite situation.\n\t  this.bufferProcessing = false;\n\t\n\t  // the callback that's passed to _write(chunk,cb)\n\t  this.onwrite = function (er) {\n\t    onwrite(stream, er);\n\t  };\n\t\n\t  // the callback that the user supplies to write(chunk,encoding,cb)\n\t  this.writecb = null;\n\t\n\t  // the amount that is being written when _write is called.\n\t  this.writelen = 0;\n\t\n\t  this.bufferedRequest = null;\n\t  this.lastBufferedRequest = null;\n\t\n\t  // number of pending user-supplied write callbacks\n\t  // this must be 0 before 'finish' can be emitted\n\t  this.pendingcb = 0;\n\t\n\t  // emit prefinish if the only thing we're waiting for is _write cbs\n\t  // This is relevant for synchronous Transform streams\n\t  this.prefinished = false;\n\t\n\t  // True if the error was already emitted and should not be thrown again\n\t  this.errorEmitted = false;\n\t\n\t  // count buffered requests\n\t  this.bufferedRequestCount = 0;\n\t\n\t  // allocate the first CorkedRequest, there is always\n\t  // one allocated and free to use, and we maintain at most two\n\t  this.corkedRequestsFree = new CorkedRequest(this);\n\t}\n\t\n\tWritableState.prototype.getBuffer = function getBuffer() {\n\t  var current = this.bufferedRequest;\n\t  var out = [];\n\t  while (current) {\n\t    out.push(current);\n\t    current = current.next;\n\t  }\n\t  return out;\n\t};\n\t\n\t(function () {\n\t  try {\n\t    Object.defineProperty(WritableState.prototype, 'buffer', {\n\t      get: internalUtil.deprecate(function () {\n\t        return this.getBuffer();\n\t      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n\t    });\n\t  } catch (_) {}\n\t})();\n\t\n\t// Test _writableState for inheritance to account for Duplex streams,\n\t// whose prototype chain only points to Readable.\n\tvar realHasInstance;\n\tif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n\t  realHasInstance = Function.prototype[Symbol.hasInstance];\n\t  Object.defineProperty(Writable, Symbol.hasInstance, {\n\t    value: function (object) {\n\t      if (realHasInstance.call(this, object)) return true;\n\t      if (this !== Writable) return false;\n\t\n\t      return object && object._writableState instanceof WritableState;\n\t    }\n\t  });\n\t} else {\n\t  realHasInstance = function (object) {\n\t    return object instanceof this;\n\t  };\n\t}\n\t\n\tfunction Writable(options) {\n\t  Duplex = Duplex || __webpack_require__(101);\n\t\n\t  // Writable ctor is applied to Duplexes, too.\n\t  // `realHasInstance` is necessary because using plain `instanceof`\n\t  // would return false, as no `_writableState` property is attached.\n\t\n\t  // Trying to use the custom `instanceof` for Writable here will also break the\n\t  // Node.js LazyTransform implementation, which has a non-trivial getter for\n\t  // `_writableState` that would lead to infinite recursion.\n\t  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n\t    return new Writable(options);\n\t  }\n\t\n\t  this._writableState = new WritableState(options, this);\n\t\n\t  // legacy.\n\t  this.writable = true;\n\t\n\t  if (options) {\n\t    if (typeof options.write === 'function') this._write = options.write;\n\t\n\t    if (typeof options.writev === 'function') this._writev = options.writev;\n\t\n\t    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\t\n\t    if (typeof options.final === 'function') this._final = options.final;\n\t  }\n\t\n\t  Stream.call(this);\n\t}\n\t\n\t// Otherwise people can pipe Writable streams, which is just wrong.\n\tWritable.prototype.pipe = function () {\n\t  this.emit('error', new Error('Cannot pipe, not readable'));\n\t};\n\t\n\tfunction writeAfterEnd(stream, cb) {\n\t  var er = new Error('write after end');\n\t  // TODO: defer error events consistently everywhere, not just the cb\n\t  stream.emit('error', er);\n\t  pna.nextTick(cb, er);\n\t}\n\t\n\t// Checks that a user-supplied chunk is valid, especially for the particular\n\t// mode the stream is in. Currently this means that `null` is never accepted\n\t// and undefined/non-string values are only allowed in object mode.\n\tfunction validChunk(stream, state, chunk, cb) {\n\t  var valid = true;\n\t  var er = false;\n\t\n\t  if (chunk === null) {\n\t    er = new TypeError('May not write null values to stream');\n\t  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n\t    er = new TypeError('Invalid non-string/buffer chunk');\n\t  }\n\t  if (er) {\n\t    stream.emit('error', er);\n\t    pna.nextTick(cb, er);\n\t    valid = false;\n\t  }\n\t  return valid;\n\t}\n\t\n\tWritable.prototype.write = function (chunk, encoding, cb) {\n\t  var state = this._writableState;\n\t  var ret = false;\n\t  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\t\n\t  if (isBuf && !Buffer.isBuffer(chunk)) {\n\t    chunk = _uint8ArrayToBuffer(chunk);\n\t  }\n\t\n\t  if (typeof encoding === 'function') {\n\t    cb = encoding;\n\t    encoding = null;\n\t  }\n\t\n\t  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\t\n\t  if (typeof cb !== 'function') cb = nop;\n\t\n\t  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n\t    state.pendingcb++;\n\t    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n\t  }\n\t\n\t  return ret;\n\t};\n\t\n\tWritable.prototype.cork = function () {\n\t  var state = this._writableState;\n\t\n\t  state.corked++;\n\t};\n\t\n\tWritable.prototype.uncork = function () {\n\t  var state = this._writableState;\n\t\n\t  if (state.corked) {\n\t    state.corked--;\n\t\n\t    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n\t  }\n\t};\n\t\n\tWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n\t  // node::ParseEncoding() requires lower case.\n\t  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n\t  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n\t  this._writableState.defaultEncoding = encoding;\n\t  return this;\n\t};\n\t\n\tfunction decodeChunk(state, chunk, encoding) {\n\t  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n\t    chunk = Buffer.from(chunk, encoding);\n\t  }\n\t  return chunk;\n\t}\n\t\n\tObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n\t  // making it explicit this property is not enumerable\n\t  // because otherwise some prototype manipulation in\n\t  // userland will fail\n\t  enumerable: false,\n\t  get: function () {\n\t    return this._writableState.highWaterMark;\n\t  }\n\t});\n\t\n\t// if we're already writing something, then just put this\n\t// in the queue, and wait our turn.  Otherwise, call _write\n\t// If we return false, then we need a drain event, so set that flag.\n\tfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n\t  if (!isBuf) {\n\t    var newChunk = decodeChunk(state, chunk, encoding);\n\t    if (chunk !== newChunk) {\n\t      isBuf = true;\n\t      encoding = 'buffer';\n\t      chunk = newChunk;\n\t    }\n\t  }\n\t  var len = state.objectMode ? 1 : chunk.length;\n\t\n\t  state.length += len;\n\t\n\t  var ret = state.length < state.highWaterMark;\n\t  // we must ensure that previous needDrain will not be reset to false.\n\t  if (!ret) state.needDrain = true;\n\t\n\t  if (state.writing || state.corked) {\n\t    var last = state.lastBufferedRequest;\n\t    state.lastBufferedRequest = {\n\t      chunk: chunk,\n\t      encoding: encoding,\n\t      isBuf: isBuf,\n\t      callback: cb,\n\t      next: null\n\t    };\n\t    if (last) {\n\t      last.next = state.lastBufferedRequest;\n\t    } else {\n\t      state.bufferedRequest = state.lastBufferedRequest;\n\t    }\n\t    state.bufferedRequestCount += 1;\n\t  } else {\n\t    doWrite(stream, state, false, len, chunk, encoding, cb);\n\t  }\n\t\n\t  return ret;\n\t}\n\t\n\tfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n\t  state.writelen = len;\n\t  state.writecb = cb;\n\t  state.writing = true;\n\t  state.sync = true;\n\t  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n\t  state.sync = false;\n\t}\n\t\n\tfunction onwriteError(stream, state, sync, er, cb) {\n\t  --state.pendingcb;\n\t\n\t  if (sync) {\n\t    // defer the callback if we are being called synchronously\n\t    // to avoid piling up things on the stack\n\t    pna.nextTick(cb, er);\n\t    // this can emit finish, and it will always happen\n\t    // after error\n\t    pna.nextTick(finishMaybe, stream, state);\n\t    stream._writableState.errorEmitted = true;\n\t    stream.emit('error', er);\n\t  } else {\n\t    // the caller expect this to happen before if\n\t    // it is async\n\t    cb(er);\n\t    stream._writableState.errorEmitted = true;\n\t    stream.emit('error', er);\n\t    // this can emit finish, but finish must\n\t    // always follow error\n\t    finishMaybe(stream, state);\n\t  }\n\t}\n\t\n\tfunction onwriteStateUpdate(state) {\n\t  state.writing = false;\n\t  state.writecb = null;\n\t  state.length -= state.writelen;\n\t  state.writelen = 0;\n\t}\n\t\n\tfunction onwrite(stream, er) {\n\t  var state = stream._writableState;\n\t  var sync = state.sync;\n\t  var cb = state.writecb;\n\t\n\t  onwriteStateUpdate(state);\n\t\n\t  if (er) onwriteError(stream, state, sync, er, cb);else {\n\t    // Check if we're actually ready to finish, but don't emit yet\n\t    var finished = needFinish(state);\n\t\n\t    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n\t      clearBuffer(stream, state);\n\t    }\n\t\n\t    if (sync) {\n\t      /*<replacement>*/\n\t      asyncWrite(afterWrite, stream, state, finished, cb);\n\t      /*</replacement>*/\n\t    } else {\n\t      afterWrite(stream, state, finished, cb);\n\t    }\n\t  }\n\t}\n\t\n\tfunction afterWrite(stream, state, finished, cb) {\n\t  if (!finished) onwriteDrain(stream, state);\n\t  state.pendingcb--;\n\t  cb();\n\t  finishMaybe(stream, state);\n\t}\n\t\n\t// Must force callback to be called on nextTick, so that we don't\n\t// emit 'drain' before the write() consumer gets the 'false' return\n\t// value, and has a chance to attach a 'drain' listener.\n\tfunction onwriteDrain(stream, state) {\n\t  if (state.length === 0 && state.needDrain) {\n\t    state.needDrain = false;\n\t    stream.emit('drain');\n\t  }\n\t}\n\t\n\t// if there's something in the buffer waiting, then process it\n\tfunction clearBuffer(stream, state) {\n\t  state.bufferProcessing = true;\n\t  var entry = state.bufferedRequest;\n\t\n\t  if (stream._writev && entry && entry.next) {\n\t    // Fast case, write everything using _writev()\n\t    var l = state.bufferedRequestCount;\n\t    var buffer = new Array(l);\n\t    var holder = state.corkedRequestsFree;\n\t    holder.entry = entry;\n\t\n\t    var count = 0;\n\t    var allBuffers = true;\n\t    while (entry) {\n\t      buffer[count] = entry;\n\t      if (!entry.isBuf) allBuffers = false;\n\t      entry = entry.next;\n\t      count += 1;\n\t    }\n\t    buffer.allBuffers = allBuffers;\n\t\n\t    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\t\n\t    // doWrite is almost always async, defer these to save a bit of time\n\t    // as the hot path ends with doWrite\n\t    state.pendingcb++;\n\t    state.lastBufferedRequest = null;\n\t    if (holder.next) {\n\t      state.corkedRequestsFree = holder.next;\n\t      holder.next = null;\n\t    } else {\n\t      state.corkedRequestsFree = new CorkedRequest(state);\n\t    }\n\t    state.bufferedRequestCount = 0;\n\t  } else {\n\t    // Slow case, write chunks one-by-one\n\t    while (entry) {\n\t      var chunk = entry.chunk;\n\t      var encoding = entry.encoding;\n\t      var cb = entry.callback;\n\t      var len = state.objectMode ? 1 : chunk.length;\n\t\n\t      doWrite(stream, state, false, len, chunk, encoding, cb);\n\t      entry = entry.next;\n\t      state.bufferedRequestCount--;\n\t      // if we didn't call the onwrite immediately, then\n\t      // it means that we need to wait until it does.\n\t      // also, that means that the chunk and cb are currently\n\t      // being processed, so move the buffer counter past them.\n\t      if (state.writing) {\n\t        break;\n\t      }\n\t    }\n\t\n\t    if (entry === null) state.lastBufferedRequest = null;\n\t  }\n\t\n\t  state.bufferedRequest = entry;\n\t  state.bufferProcessing = false;\n\t}\n\t\n\tWritable.prototype._write = function (chunk, encoding, cb) {\n\t  cb(new Error('_write() is not implemented'));\n\t};\n\t\n\tWritable.prototype._writev = null;\n\t\n\tWritable.prototype.end = function (chunk, encoding, cb) {\n\t  var state = this._writableState;\n\t\n\t  if (typeof chunk === 'function') {\n\t    cb = chunk;\n\t    chunk = null;\n\t    encoding = null;\n\t  } else if (typeof encoding === 'function') {\n\t    cb = encoding;\n\t    encoding = null;\n\t  }\n\t\n\t  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\t\n\t  // .end() fully uncorks\n\t  if (state.corked) {\n\t    state.corked = 1;\n\t    this.uncork();\n\t  }\n\t\n\t  // ignore unnecessary end() calls.\n\t  if (!state.ending && !state.finished) endWritable(this, state, cb);\n\t};\n\t\n\tfunction needFinish(state) {\n\t  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n\t}\n\tfunction callFinal(stream, state) {\n\t  stream._final(function (err) {\n\t    state.pendingcb--;\n\t    if (err) {\n\t      stream.emit('error', err);\n\t    }\n\t    state.prefinished = true;\n\t    stream.emit('prefinish');\n\t    finishMaybe(stream, state);\n\t  });\n\t}\n\tfunction prefinish(stream, state) {\n\t  if (!state.prefinished && !state.finalCalled) {\n\t    if (typeof stream._final === 'function') {\n\t      state.pendingcb++;\n\t      state.finalCalled = true;\n\t      pna.nextTick(callFinal, stream, state);\n\t    } else {\n\t      state.prefinished = true;\n\t      stream.emit('prefinish');\n\t    }\n\t  }\n\t}\n\t\n\tfunction finishMaybe(stream, state) {\n\t  var need = needFinish(state);\n\t  if (need) {\n\t    prefinish(stream, state);\n\t    if (state.pendingcb === 0) {\n\t      state.finished = true;\n\t      stream.emit('finish');\n\t    }\n\t  }\n\t  return need;\n\t}\n\t\n\tfunction endWritable(stream, state, cb) {\n\t  state.ending = true;\n\t  finishMaybe(stream, state);\n\t  if (cb) {\n\t    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n\t  }\n\t  state.ended = true;\n\t  stream.writable = false;\n\t}\n\t\n\tfunction onCorkedFinish(corkReq, state, err) {\n\t  var entry = corkReq.entry;\n\t  corkReq.entry = null;\n\t  while (entry) {\n\t    var cb = entry.callback;\n\t    state.pendingcb--;\n\t    cb(err);\n\t    entry = entry.next;\n\t  }\n\t  if (state.corkedRequestsFree) {\n\t    state.corkedRequestsFree.next = corkReq;\n\t  } else {\n\t    state.corkedRequestsFree = corkReq;\n\t  }\n\t}\n\t\n\tObject.defineProperty(Writable.prototype, 'destroyed', {\n\t  get: function () {\n\t    if (this._writableState === undefined) {\n\t      return false;\n\t    }\n\t    return this._writableState.destroyed;\n\t  },\n\t  set: function (value) {\n\t    // we ignore the value if the stream\n\t    // has not been initialized yet\n\t    if (!this._writableState) {\n\t      return;\n\t    }\n\t\n\t    // backward compatibility, the user is explicitly\n\t    // managing destroyed\n\t    this._writableState.destroyed = value;\n\t  }\n\t});\n\t\n\tWritable.prototype.destroy = destroyImpl.destroy;\n\tWritable.prototype._undestroy = destroyImpl.undestroy;\n\tWritable.prototype._destroy = function (err, cb) {\n\t  this.end();\n\t  cb(err);\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(72), __webpack_require__(103).setImmediate, (function() { return this; }())))\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== \"undefined\" && global) ||\n\t            (typeof self !== \"undefined\" && self) ||\n\t            window;\n\tvar apply = Function.prototype.apply;\n\t\n\t// DOM APIs, for completeness\n\t\n\texports.setTimeout = function() {\n\t  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n\t};\n\texports.setInterval = function() {\n\t  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n\t};\n\texports.clearTimeout =\n\texports.clearInterval = function(timeout) {\n\t  if (timeout) {\n\t    timeout.close();\n\t  }\n\t};\n\t\n\tfunction Timeout(id, clearFn) {\n\t  this._id = id;\n\t  this._clearFn = clearFn;\n\t}\n\tTimeout.prototype.unref = Timeout.prototype.ref = function() {};\n\tTimeout.prototype.close = function() {\n\t  this._clearFn.call(scope, this._id);\n\t};\n\t\n\t// Does not start the time, just sets up the members needed.\n\texports.enroll = function(item, msecs) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = msecs;\n\t};\n\t\n\texports.unenroll = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = -1;\n\t};\n\t\n\texports._unrefActive = exports.active = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t\n\t  var msecs = item._idleTimeout;\n\t  if (msecs >= 0) {\n\t    item._idleTimeoutId = setTimeout(function onTimeout() {\n\t      if (item._onTimeout)\n\t        item._onTimeout();\n\t    }, msecs);\n\t  }\n\t};\n\t\n\t// setimmediate attaches itself to the global object\n\t__webpack_require__(104);\n\t// On some exotic environments, it's not clear which object `setimmediate` was\n\t// able to install onto.  Search each possibility in the same order as the\n\t// `setimmediate` library.\n\texports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n\t                       (typeof global !== \"undefined\" && global.setImmediate) ||\n\t                       (this && this.setImmediate);\n\texports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n\t                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n\t                         (this && this.clearImmediate);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {\n\t    \"use strict\";\n\t\n\t    if (global.setImmediate) {\n\t        return;\n\t    }\n\t\n\t    var nextHandle = 1; // Spec says greater than zero\n\t    var tasksByHandle = {};\n\t    var currentlyRunningATask = false;\n\t    var doc = global.document;\n\t    var registerImmediate;\n\t\n\t    function setImmediate(callback) {\n\t      // Callback can either be a function or a string\n\t      if (typeof callback !== \"function\") {\n\t        callback = new Function(\"\" + callback);\n\t      }\n\t      // Copy function arguments\n\t      var args = new Array(arguments.length - 1);\n\t      for (var i = 0; i < args.length; i++) {\n\t          args[i] = arguments[i + 1];\n\t      }\n\t      // Store and register the task\n\t      var task = { callback: callback, args: args };\n\t      tasksByHandle[nextHandle] = task;\n\t      registerImmediate(nextHandle);\n\t      return nextHandle++;\n\t    }\n\t\n\t    function clearImmediate(handle) {\n\t        delete tasksByHandle[handle];\n\t    }\n\t\n\t    function run(task) {\n\t        var callback = task.callback;\n\t        var args = task.args;\n\t        switch (args.length) {\n\t        case 0:\n\t            callback();\n\t            break;\n\t        case 1:\n\t            callback(args[0]);\n\t            break;\n\t        case 2:\n\t            callback(args[0], args[1]);\n\t            break;\n\t        case 3:\n\t            callback(args[0], args[1], args[2]);\n\t            break;\n\t        default:\n\t            callback.apply(undefined, args);\n\t            break;\n\t        }\n\t    }\n\t\n\t    function runIfPresent(handle) {\n\t        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n\t        // So if we're currently running a task, we'll need to delay this invocation.\n\t        if (currentlyRunningATask) {\n\t            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n\t            // \"too much recursion\" error.\n\t            setTimeout(runIfPresent, 0, handle);\n\t        } else {\n\t            var task = tasksByHandle[handle];\n\t            if (task) {\n\t                currentlyRunningATask = true;\n\t                try {\n\t                    run(task);\n\t                } finally {\n\t                    clearImmediate(handle);\n\t                    currentlyRunningATask = false;\n\t                }\n\t            }\n\t        }\n\t    }\n\t\n\t    function installNextTickImplementation() {\n\t        registerImmediate = function(handle) {\n\t            process.nextTick(function () { runIfPresent(handle); });\n\t        };\n\t    }\n\t\n\t    function canUsePostMessage() {\n\t        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n\t        // where `global.postMessage` means something completely different and can't be used for this purpose.\n\t        if (global.postMessage && !global.importScripts) {\n\t            var postMessageIsAsynchronous = true;\n\t            var oldOnMessage = global.onmessage;\n\t            global.onmessage = function() {\n\t                postMessageIsAsynchronous = false;\n\t            };\n\t            global.postMessage(\"\", \"*\");\n\t            global.onmessage = oldOnMessage;\n\t            return postMessageIsAsynchronous;\n\t        }\n\t    }\n\t\n\t    function installPostMessageImplementation() {\n\t        // Installs an event handler on `global` for the `message` event: see\n\t        // * https://developer.mozilla.org/en/DOM/window.postMessage\n\t        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\t\n\t        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n\t        var onGlobalMessage = function(event) {\n\t            if (event.source === global &&\n\t                typeof event.data === \"string\" &&\n\t                event.data.indexOf(messagePrefix) === 0) {\n\t                runIfPresent(+event.data.slice(messagePrefix.length));\n\t            }\n\t        };\n\t\n\t        if (global.addEventListener) {\n\t            global.addEventListener(\"message\", onGlobalMessage, false);\n\t        } else {\n\t            global.attachEvent(\"onmessage\", onGlobalMessage);\n\t        }\n\t\n\t        registerImmediate = function(handle) {\n\t            global.postMessage(messagePrefix + handle, \"*\");\n\t        };\n\t    }\n\t\n\t    function installMessageChannelImplementation() {\n\t        var channel = new MessageChannel();\n\t        channel.port1.onmessage = function(event) {\n\t            var handle = event.data;\n\t            runIfPresent(handle);\n\t        };\n\t\n\t        registerImmediate = function(handle) {\n\t            channel.port2.postMessage(handle);\n\t        };\n\t    }\n\t\n\t    function installReadyStateChangeImplementation() {\n\t        var html = doc.documentElement;\n\t        registerImmediate = function(handle) {\n\t            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n\t            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n\t            var script = doc.createElement(\"script\");\n\t            script.onreadystatechange = function () {\n\t                runIfPresent(handle);\n\t                script.onreadystatechange = null;\n\t                html.removeChild(script);\n\t                script = null;\n\t            };\n\t            html.appendChild(script);\n\t        };\n\t    }\n\t\n\t    function installSetTimeoutImplementation() {\n\t        registerImmediate = function(handle) {\n\t            setTimeout(runIfPresent, 0, handle);\n\t        };\n\t    }\n\t\n\t    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n\t    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n\t    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\t\n\t    // Don't get fooled by e.g. browserify environments.\n\t    if ({}.toString.call(global.process) === \"[object process]\") {\n\t        // For Node.js before 0.9\n\t        installNextTickImplementation();\n\t\n\t    } else if (canUsePostMessage()) {\n\t        // For non-IE10 modern browsers\n\t        installPostMessageImplementation();\n\t\n\t    } else if (global.MessageChannel) {\n\t        // For web workers, where supported\n\t        installMessageChannelImplementation();\n\t\n\t    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n\t        // For IE 6–8\n\t        installReadyStateChangeImplementation();\n\t\n\t    } else {\n\t        // For older browsers\n\t        installSetTimeoutImplementation();\n\t    }\n\t\n\t    attachTo.setImmediate = setImmediate;\n\t    attachTo.clearImmediate = clearImmediate;\n\t}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }()), __webpack_require__(72)))\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {\n\t/**\n\t * Module exports.\n\t */\n\t\n\tmodule.exports = deprecate;\n\t\n\t/**\n\t * Mark that a method should not be used.\n\t * Returns a modified function which warns once by default.\n\t *\n\t * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n\t *\n\t * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n\t * will throw an Error when invoked.\n\t *\n\t * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n\t * will invoke `console.trace()` instead of `console.error()`.\n\t *\n\t * @param {Function} fn - the function to deprecate\n\t * @param {String} msg - the string to print to the console when `fn` is invoked\n\t * @returns {Function} a new \"deprecated\" version of `fn`\n\t * @api public\n\t */\n\t\n\tfunction deprecate (fn, msg) {\n\t  if (config('noDeprecation')) {\n\t    return fn;\n\t  }\n\t\n\t  var warned = false;\n\t  function deprecated() {\n\t    if (!warned) {\n\t      if (config('throwDeprecation')) {\n\t        throw new Error(msg);\n\t      } else if (config('traceDeprecation')) {\n\t        console.trace(msg);\n\t      } else {\n\t        console.warn(msg);\n\t      }\n\t      warned = true;\n\t    }\n\t    return fn.apply(this, arguments);\n\t  }\n\t\n\t  return deprecated;\n\t}\n\t\n\t/**\n\t * Checks `localStorage` for boolean values for the given `name`.\n\t *\n\t * @param {String} name\n\t * @returns {Boolean}\n\t * @api private\n\t */\n\t\n\tfunction config (name) {\n\t  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n\t  try {\n\t    if (!global.localStorage) return false;\n\t  } catch (_) {\n\t    return false;\n\t  }\n\t  var val = global.localStorage[name];\n\t  if (null == val) return false;\n\t  return String(val).toLowerCase() === 'true';\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\t'use strict';\n\t\n\t/*<replacement>*/\n\t\n\tvar Buffer = __webpack_require__(95).Buffer;\n\t/*</replacement>*/\n\t\n\tvar isEncoding = Buffer.isEncoding || function (encoding) {\n\t  encoding = '' + encoding;\n\t  switch (encoding && encoding.toLowerCase()) {\n\t    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n\t      return true;\n\t    default:\n\t      return false;\n\t  }\n\t};\n\t\n\tfunction _normalizeEncoding(enc) {\n\t  if (!enc) return 'utf8';\n\t  var retried;\n\t  while (true) {\n\t    switch (enc) {\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return 'utf8';\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return 'utf16le';\n\t      case 'latin1':\n\t      case 'binary':\n\t        return 'latin1';\n\t      case 'base64':\n\t      case 'ascii':\n\t      case 'hex':\n\t        return enc;\n\t      default:\n\t        if (retried) return; // undefined\n\t        enc = ('' + enc).toLowerCase();\n\t        retried = true;\n\t    }\n\t  }\n\t};\n\t\n\t// Do not cache `Buffer.isEncoding` when checking encoding names as some\n\t// modules monkey-patch it to support additional encodings\n\tfunction normalizeEncoding(enc) {\n\t  var nenc = _normalizeEncoding(enc);\n\t  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n\t  return nenc || enc;\n\t}\n\t\n\t// StringDecoder provides an interface for efficiently splitting a series of\n\t// buffers into a series of JS strings without breaking apart multi-byte\n\t// characters.\n\texports.StringDecoder = StringDecoder;\n\tfunction StringDecoder(encoding) {\n\t  this.encoding = normalizeEncoding(encoding);\n\t  var nb;\n\t  switch (this.encoding) {\n\t    case 'utf16le':\n\t      this.text = utf16Text;\n\t      this.end = utf16End;\n\t      nb = 4;\n\t      break;\n\t    case 'utf8':\n\t      this.fillLast = utf8FillLast;\n\t      nb = 4;\n\t      break;\n\t    case 'base64':\n\t      this.text = base64Text;\n\t      this.end = base64End;\n\t      nb = 3;\n\t      break;\n\t    default:\n\t      this.write = simpleWrite;\n\t      this.end = simpleEnd;\n\t      return;\n\t  }\n\t  this.lastNeed = 0;\n\t  this.lastTotal = 0;\n\t  this.lastChar = Buffer.allocUnsafe(nb);\n\t}\n\t\n\tStringDecoder.prototype.write = function (buf) {\n\t  if (buf.length === 0) return '';\n\t  var r;\n\t  var i;\n\t  if (this.lastNeed) {\n\t    r = this.fillLast(buf);\n\t    if (r === undefined) return '';\n\t    i = this.lastNeed;\n\t    this.lastNeed = 0;\n\t  } else {\n\t    i = 0;\n\t  }\n\t  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n\t  return r || '';\n\t};\n\t\n\tStringDecoder.prototype.end = utf8End;\n\t\n\t// Returns only complete characters in a Buffer\n\tStringDecoder.prototype.text = utf8Text;\n\t\n\t// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\n\tStringDecoder.prototype.fillLast = function (buf) {\n\t  if (this.lastNeed <= buf.length) {\n\t    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n\t    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n\t  }\n\t  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n\t  this.lastNeed -= buf.length;\n\t};\n\t\n\t// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n\t// continuation byte. If an invalid byte is detected, -2 is returned.\n\tfunction utf8CheckByte(byte) {\n\t  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n\t  return byte >> 6 === 0x02 ? -1 : -2;\n\t}\n\t\n\t// Checks at most 3 bytes at the end of a Buffer in order to detect an\n\t// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n\t// needed to complete the UTF-8 character (if applicable) are returned.\n\tfunction utf8CheckIncomplete(self, buf, i) {\n\t  var j = buf.length - 1;\n\t  if (j < i) return 0;\n\t  var nb = utf8CheckByte(buf[j]);\n\t  if (nb >= 0) {\n\t    if (nb > 0) self.lastNeed = nb - 1;\n\t    return nb;\n\t  }\n\t  if (--j < i || nb === -2) return 0;\n\t  nb = utf8CheckByte(buf[j]);\n\t  if (nb >= 0) {\n\t    if (nb > 0) self.lastNeed = nb - 2;\n\t    return nb;\n\t  }\n\t  if (--j < i || nb === -2) return 0;\n\t  nb = utf8CheckByte(buf[j]);\n\t  if (nb >= 0) {\n\t    if (nb > 0) {\n\t      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n\t    }\n\t    return nb;\n\t  }\n\t  return 0;\n\t}\n\t\n\t// Validates as many continuation bytes for a multi-byte UTF-8 character as\n\t// needed or are available. If we see a non-continuation byte where we expect\n\t// one, we \"replace\" the validated continuation bytes we've seen so far with\n\t// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n\t// behavior. The continuation byte check is included three times in the case\n\t// where all of the continuation bytes for a character exist in the same buffer.\n\t// It is also done this way as a slight performance increase instead of using a\n\t// loop.\n\tfunction utf8CheckExtraBytes(self, buf, p) {\n\t  if ((buf[0] & 0xC0) !== 0x80) {\n\t    self.lastNeed = 0;\n\t    return '\\ufffd';\n\t  }\n\t  if (self.lastNeed > 1 && buf.length > 1) {\n\t    if ((buf[1] & 0xC0) !== 0x80) {\n\t      self.lastNeed = 1;\n\t      return '\\ufffd';\n\t    }\n\t    if (self.lastNeed > 2 && buf.length > 2) {\n\t      if ((buf[2] & 0xC0) !== 0x80) {\n\t        self.lastNeed = 2;\n\t        return '\\ufffd';\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\t// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\n\tfunction utf8FillLast(buf) {\n\t  var p = this.lastTotal - this.lastNeed;\n\t  var r = utf8CheckExtraBytes(this, buf, p);\n\t  if (r !== undefined) return r;\n\t  if (this.lastNeed <= buf.length) {\n\t    buf.copy(this.lastChar, p, 0, this.lastNeed);\n\t    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n\t  }\n\t  buf.copy(this.lastChar, p, 0, buf.length);\n\t  this.lastNeed -= buf.length;\n\t}\n\t\n\t// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n\t// partial character, the character's bytes are buffered until the required\n\t// number of bytes are available.\n\tfunction utf8Text(buf, i) {\n\t  var total = utf8CheckIncomplete(this, buf, i);\n\t  if (!this.lastNeed) return buf.toString('utf8', i);\n\t  this.lastTotal = total;\n\t  var end = buf.length - (total - this.lastNeed);\n\t  buf.copy(this.lastChar, 0, end);\n\t  return buf.toString('utf8', i, end);\n\t}\n\t\n\t// For UTF-8, a replacement character is added when ending on a partial\n\t// character.\n\tfunction utf8End(buf) {\n\t  var r = buf && buf.length ? this.write(buf) : '';\n\t  if (this.lastNeed) return r + '\\ufffd';\n\t  return r;\n\t}\n\t\n\t// UTF-16LE typically needs two bytes per character, but even if we have an even\n\t// number of bytes available, we need to check if we end on a leading/high\n\t// surrogate. In that case, we need to wait for the next two bytes in order to\n\t// decode the last character properly.\n\tfunction utf16Text(buf, i) {\n\t  if ((buf.length - i) % 2 === 0) {\n\t    var r = buf.toString('utf16le', i);\n\t    if (r) {\n\t      var c = r.charCodeAt(r.length - 1);\n\t      if (c >= 0xD800 && c <= 0xDBFF) {\n\t        this.lastNeed = 2;\n\t        this.lastTotal = 4;\n\t        this.lastChar[0] = buf[buf.length - 2];\n\t        this.lastChar[1] = buf[buf.length - 1];\n\t        return r.slice(0, -1);\n\t      }\n\t    }\n\t    return r;\n\t  }\n\t  this.lastNeed = 1;\n\t  this.lastTotal = 2;\n\t  this.lastChar[0] = buf[buf.length - 1];\n\t  return buf.toString('utf16le', i, buf.length - 1);\n\t}\n\t\n\t// For UTF-16LE we do not explicitly append special replacement characters if we\n\t// end on a partial character, we simply let v8 handle that.\n\tfunction utf16End(buf) {\n\t  var r = buf && buf.length ? this.write(buf) : '';\n\t  if (this.lastNeed) {\n\t    var end = this.lastTotal - this.lastNeed;\n\t    return r + this.lastChar.toString('utf16le', 0, end);\n\t  }\n\t  return r;\n\t}\n\t\n\tfunction base64Text(buf, i) {\n\t  var n = (buf.length - i) % 3;\n\t  if (n === 0) return buf.toString('base64', i);\n\t  this.lastNeed = 3 - n;\n\t  this.lastTotal = 3;\n\t  if (n === 1) {\n\t    this.lastChar[0] = buf[buf.length - 1];\n\t  } else {\n\t    this.lastChar[0] = buf[buf.length - 2];\n\t    this.lastChar[1] = buf[buf.length - 1];\n\t  }\n\t  return buf.toString('base64', i, buf.length - n);\n\t}\n\t\n\tfunction base64End(buf) {\n\t  var r = buf && buf.length ? this.write(buf) : '';\n\t  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n\t  return r;\n\t}\n\t\n\t// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\n\tfunction simpleWrite(buf) {\n\t  return buf.toString(this.encoding);\n\t}\n\t\n\tfunction simpleEnd(buf) {\n\t  return buf && buf.length ? this.write(buf) : '';\n\t}\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\t// a transform stream is a readable/writable stream where you do\n\t// something with the data.  Sometimes it's called a \"filter\",\n\t// but that's not a great name for it, since that implies a thing where\n\t// some bits pass through, and others are simply ignored.  (That would\n\t// be a valid example of a transform, of course.)\n\t//\n\t// While the output is causally related to the input, it's not a\n\t// necessarily symmetric or synchronous transformation.  For example,\n\t// a zlib stream might take multiple plain-text writes(), and then\n\t// emit a single compressed chunk some time in the future.\n\t//\n\t// Here's how this works:\n\t//\n\t// The Transform stream has all the aspects of the readable and writable\n\t// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n\t// internally, and returns false if there's a lot of pending writes\n\t// buffered up.  When you call read(), that calls _read(n) until\n\t// there's enough pending readable data buffered up.\n\t//\n\t// In a transform stream, the written data is placed in a buffer.  When\n\t// _read(n) is called, it transforms the queued up data, calling the\n\t// buffered _write cb's as it consumes chunks.  If consuming a single\n\t// written chunk would result in multiple output chunks, then the first\n\t// outputted bit calls the readcb, and subsequent chunks just go into\n\t// the read buffer, and will cause it to emit 'readable' if necessary.\n\t//\n\t// This way, back-pressure is actually determined by the reading side,\n\t// since _read has to be called to start processing a new chunk.  However,\n\t// a pathological inflate type of transform can cause excessive buffering\n\t// here.  For example, imagine a stream where every byte of input is\n\t// interpreted as an integer from 0-255, and then results in that many\n\t// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n\t// 1kb of data being output.  In this case, you could write a very small\n\t// amount of input, and end up with a very large amount of output.  In\n\t// such a pathological inflating mechanism, there'd be no way to tell\n\t// the system to stop doing the transform.  A single 4MB write could\n\t// cause the system to run out of memory.\n\t//\n\t// However, even in such a pathological case, only a single written chunk\n\t// would be consumed, and then the rest would wait (un-transformed) until\n\t// the results of the previous transformed chunk were consumed.\n\t\n\t'use strict';\n\t\n\tmodule.exports = Transform;\n\t\n\tvar Duplex = __webpack_require__(101);\n\t\n\t/*<replacement>*/\n\tvar util = __webpack_require__(96);\n\tutil.inherits = __webpack_require__(89);\n\t/*</replacement>*/\n\t\n\tutil.inherits(Transform, Duplex);\n\t\n\tfunction afterTransform(er, data) {\n\t  var ts = this._transformState;\n\t  ts.transforming = false;\n\t\n\t  var cb = ts.writecb;\n\t\n\t  if (!cb) {\n\t    return this.emit('error', new Error('write callback called multiple times'));\n\t  }\n\t\n\t  ts.writechunk = null;\n\t  ts.writecb = null;\n\t\n\t  if (data != null) // single equals check for both `null` and `undefined`\n\t    this.push(data);\n\t\n\t  cb(er);\n\t\n\t  var rs = this._readableState;\n\t  rs.reading = false;\n\t  if (rs.needReadable || rs.length < rs.highWaterMark) {\n\t    this._read(rs.highWaterMark);\n\t  }\n\t}\n\t\n\tfunction Transform(options) {\n\t  if (!(this instanceof Transform)) return new Transform(options);\n\t\n\t  Duplex.call(this, options);\n\t\n\t  this._transformState = {\n\t    afterTransform: afterTransform.bind(this),\n\t    needTransform: false,\n\t    transforming: false,\n\t    writecb: null,\n\t    writechunk: null,\n\t    writeencoding: null\n\t  };\n\t\n\t  // start out asking for a readable event once data is transformed.\n\t  this._readableState.needReadable = true;\n\t\n\t  // we have implemented the _read method, and done the other things\n\t  // that Readable wants before the first _read call, so unset the\n\t  // sync guard flag.\n\t  this._readableState.sync = false;\n\t\n\t  if (options) {\n\t    if (typeof options.transform === 'function') this._transform = options.transform;\n\t\n\t    if (typeof options.flush === 'function') this._flush = options.flush;\n\t  }\n\t\n\t  // When the writable side finishes, then flush out anything remaining.\n\t  this.on('prefinish', prefinish);\n\t}\n\t\n\tfunction prefinish() {\n\t  var _this = this;\n\t\n\t  if (typeof this._flush === 'function') {\n\t    this._flush(function (er, data) {\n\t      done(_this, er, data);\n\t    });\n\t  } else {\n\t    done(this, null, null);\n\t  }\n\t}\n\t\n\tTransform.prototype.push = function (chunk, encoding) {\n\t  this._transformState.needTransform = false;\n\t  return Duplex.prototype.push.call(this, chunk, encoding);\n\t};\n\t\n\t// This is the part where you do stuff!\n\t// override this function in implementation classes.\n\t// 'chunk' is an input chunk.\n\t//\n\t// Call `push(newChunk)` to pass along transformed output\n\t// to the readable side.  You may call 'push' zero or more times.\n\t//\n\t// Call `cb(err)` when you are done with this chunk.  If you pass\n\t// an error, then that'll put the hurt on the whole operation.  If you\n\t// never call cb(), then you'll never get another chunk.\n\tTransform.prototype._transform = function (chunk, encoding, cb) {\n\t  throw new Error('_transform() is not implemented');\n\t};\n\t\n\tTransform.prototype._write = function (chunk, encoding, cb) {\n\t  var ts = this._transformState;\n\t  ts.writecb = cb;\n\t  ts.writechunk = chunk;\n\t  ts.writeencoding = encoding;\n\t  if (!ts.transforming) {\n\t    var rs = this._readableState;\n\t    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n\t  }\n\t};\n\t\n\t// Doesn't matter what the args are here.\n\t// _transform does all the work.\n\t// That we got here means that the readable side wants more data.\n\tTransform.prototype._read = function (n) {\n\t  var ts = this._transformState;\n\t\n\t  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n\t    ts.transforming = true;\n\t    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n\t  } else {\n\t    // mark that we need a transform, so that any data that comes in\n\t    // will get processed, now that we've asked for it.\n\t    ts.needTransform = true;\n\t  }\n\t};\n\t\n\tTransform.prototype._destroy = function (err, cb) {\n\t  var _this2 = this;\n\t\n\t  Duplex.prototype._destroy.call(this, err, function (err2) {\n\t    cb(err2);\n\t    _this2.emit('close');\n\t  });\n\t};\n\t\n\tfunction done(stream, er, data) {\n\t  if (er) return stream.emit('error', er);\n\t\n\t  if (data != null) // single equals check for both `null` and `undefined`\n\t    stream.push(data);\n\t\n\t  // if there's nothing in the write buffer, then that means\n\t  // that nothing more will ever be provided\n\t  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\t\n\t  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\t\n\t  return stream.push(null);\n\t}\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\t// a passthrough stream.\n\t// basically just the most minimal sort of Transform stream.\n\t// Every written chunk gets output as-is.\n\t\n\t'use strict';\n\t\n\tmodule.exports = PassThrough;\n\t\n\tvar Transform = __webpack_require__(107);\n\t\n\t/*<replacement>*/\n\tvar util = __webpack_require__(96);\n\tutil.inherits = __webpack_require__(89);\n\t/*</replacement>*/\n\t\n\tutil.inherits(PassThrough, Transform);\n\t\n\tfunction PassThrough(options) {\n\t  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\t\n\t  Transform.call(this, options);\n\t}\n\t\n\tPassThrough.prototype._transform = function (chunk, encoding, cb) {\n\t  cb(null, chunk);\n\t};\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(102);\n\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(101);\n\n\n/***/ }),\n/* 111 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(90).Transform\n\n\n/***/ }),\n/* 112 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(90).PassThrough\n\n\n/***/ }),\n/* 113 */\n/***/ (function(module, exports) {\n\n\texports['aes-128-ecb'] = {\n\t  cipher: 'AES',\n\t  key: 128,\n\t  iv: 0,\n\t  mode: 'ECB',\n\t  type: 'block'\n\t};\n\texports['aes-192-ecb'] = {\n\t  cipher: 'AES',\n\t  key: 192,\n\t  iv: 0,\n\t  mode: 'ECB',\n\t  type: 'block'\n\t};\n\texports['aes-256-ecb'] = {\n\t  cipher: 'AES',\n\t  key: 256,\n\t  iv: 0,\n\t  mode: 'ECB',\n\t  type: 'block'\n\t};\n\texports['aes-128-cbc'] = {\n\t  cipher: 'AES',\n\t  key: 128,\n\t  iv: 16,\n\t  mode: 'CBC',\n\t  type: 'block'\n\t};\n\texports['aes-192-cbc'] = {\n\t  cipher: 'AES',\n\t  key: 192,\n\t  iv: 16,\n\t  mode: 'CBC',\n\t  type: 'block'\n\t};\n\texports['aes-256-cbc'] = {\n\t  cipher: 'AES',\n\t  key: 256,\n\t  iv: 16,\n\t  mode: 'CBC',\n\t  type: 'block'\n\t};\n\texports['aes128'] = exports['aes-128-cbc'];\n\texports['aes192'] = exports['aes-192-cbc'];\n\texports['aes256'] = exports['aes-256-cbc'];\n\texports['aes-128-cfb'] = {\n\t  cipher: 'AES',\n\t  key: 128,\n\t  iv: 16,\n\t  mode: 'CFB',\n\t  type: 'stream'\n\t};\n\texports['aes-192-cfb'] = {\n\t  cipher: 'AES',\n\t  key: 192,\n\t  iv: 16,\n\t  mode: 'CFB',\n\t  type: 'stream'\n\t};\n\texports['aes-256-cfb'] = {\n\t  cipher: 'AES',\n\t  key: 256,\n\t  iv: 16,\n\t  mode: 'CFB',\n\t  type: 'stream'\n\t};\n\texports['aes-128-ofb'] = {\n\t  cipher: 'AES',\n\t  key: 128,\n\t  iv: 16,\n\t  mode: 'OFB',\n\t  type: 'stream'\n\t};\n\texports['aes-192-ofb'] = {\n\t  cipher: 'AES',\n\t  key: 192,\n\t  iv: 16,\n\t  mode: 'OFB',\n\t  type: 'stream'\n\t};\n\texports['aes-256-ofb'] = {\n\t  cipher: 'AES',\n\t  key: 256,\n\t  iv: 16,\n\t  mode: 'OFB',\n\t  type: 'stream'\n\t};\n\texports['aes-128-ctr'] = {\n\t  cipher: 'AES',\n\t  key: 128,\n\t  iv: 16,\n\t  mode: 'CTR',\n\t  type: 'stream'\n\t};\n\texports['aes-192-ctr'] = {\n\t  cipher: 'AES',\n\t  key: 192,\n\t  iv: 16,\n\t  mode: 'CTR',\n\t  type: 'stream'\n\t};\n\texports['aes-256-ctr'] = {\n\t  cipher: 'AES',\n\t  key: 256,\n\t  iv: 16,\n\t  mode: 'CTR',\n\t  type: 'stream'\n\t};\n\n/***/ }),\n/* 114 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {\n\tmodule.exports = function (crypto, password, keyLen, ivLen) {\n\t  keyLen = keyLen/8;\n\t  ivLen = ivLen || 0;\n\t  var ki = 0;\n\t  var ii = 0;\n\t  var key = new Buffer(keyLen);\n\t  var iv = new Buffer(ivLen);\n\t  var addmd = 0;\n\t  var md, md_buf;\n\t  var i;\n\t  while (true) {\n\t    md = crypto.createHash('md5');\n\t    if(addmd++ > 0) {\n\t       md.update(md_buf);\n\t    }\n\t    md.update(password);\n\t    md_buf = md.digest();\n\t    i = 0;\n\t    if(keyLen > 0) {\n\t      while(true) {\n\t        if(keyLen === 0) {\n\t          break;\n\t        }\n\t        if(i === md_buf.length) {\n\t          break;\n\t        }\n\t        key[ki++] = md_buf[i];\n\t        keyLen--;\n\t        i++;\n\t       }\n\t    }\n\t    if(ivLen > 0 && i !== md_buf.length) {\n\t      while(true) {\n\t        if(ivLen === 0) {\n\t          break;\n\t        }\n\t        if(i === md_buf.length) {\n\t          break;\n\t        }\n\t       iv[ii++] = md_buf[i];\n\t       ivLen--;\n\t       i++;\n\t     }\n\t   }\n\t   if(keyLen === 0 && ivLen === 0) {\n\t      break;\n\t    }\n\t  }\n\t  for(i=0;i<md_buf.length;i++) {\n\t    md_buf[i] = 0;\n\t  }\n\t  return {\n\t    key: key,\n\t    iv: iv\n\t  };\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 115 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var aes = __webpack_require__(85);\n\tvar Transform = __webpack_require__(86);\n\tvar inherits = __webpack_require__(89);\n\t\n\tinherits(StreamCipher, Transform);\n\tmodule.exports = StreamCipher;\n\tfunction StreamCipher(mode, key, iv, decrypt) {\n\t  if (!(this instanceof StreamCipher)) {\n\t    return new StreamCipher(mode, key, iv);\n\t  }\n\t  Transform.call(this);\n\t  this._cipher = new aes.AES(key);\n\t  this._prev = new Buffer(iv.length);\n\t  this._cache = new Buffer('');\n\t  this._secCache = new Buffer('');\n\t  this._decrypt = decrypt;\n\t  iv.copy(this._prev);\n\t  this._mode = mode;\n\t}\n\tStreamCipher.prototype._transform = function (chunk, _, next) {\n\t  next(null, this._mode.encrypt(this, chunk, this._decrypt));\n\t};\n\tStreamCipher.prototype._flush = function (next) {\n\t  this._cipher.scrub();\n\t  next();\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 116 */\n/***/ (function(module, exports) {\n\n\texports.encrypt = function (self, block) {\n\t  return self._cipher.encryptBlock(block);\n\t};\n\texports.decrypt = function (self, block) {\n\t  return self._cipher.decryptBlock(block);\n\t};\n\n/***/ }),\n/* 117 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar xor = __webpack_require__(118);\n\texports.encrypt = function (self, block) {\n\t  var data = xor(block, self._prev);\n\t  self._prev = self._cipher.encryptBlock(data);\n\t  return self._prev;\n\t};\n\texports.decrypt = function (self, block) {\n\t  var pad = self._prev;\n\t  self._prev = block;\n\t  var out = self._cipher.decryptBlock(block);\n\t  return xor(out, pad);\n\t};\n\n/***/ }),\n/* 118 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {module.exports = xor;\n\tfunction xor(a, b) {\n\t  var len = Math.min(a.length, b.length);\n\t  var out = new Buffer(len);\n\t  var i = -1;\n\t  while (++i < len) {\n\t    out.writeUInt8(a[i] ^ b[i], i);\n\t  }\n\t  return out;\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 119 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var xor = __webpack_require__(118);\n\texports.encrypt = function (self, data, decrypt) {\n\t  var out = new Buffer('');\n\t  var len;\n\t  while (data.length) {\n\t    if (self._cache.length === 0) {\n\t      self._cache = self._cipher.encryptBlock(self._prev);\n\t      self._prev = new Buffer('');\n\t    }\n\t    if (self._cache.length <= data.length) {\n\t      len = self._cache.length;\n\t      out = Buffer.concat([out, encryptStart(self, data.slice(0, len), decrypt)]);\n\t      data = data.slice(len);\n\t    } else {\n\t      out = Buffer.concat([out, encryptStart(self, data, decrypt)]);\n\t      break;\n\t    }\n\t  }\n\t  return out;\n\t};\n\tfunction encryptStart(self, data, decrypt) {\n\t  var len = data.length;\n\t  var out = xor(data, self._cache);\n\t  self._cache = self._cache.slice(len);\n\t  self._prev = Buffer.concat([self._prev, decrypt?data:out]);\n\t  return out;\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 120 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var xor = __webpack_require__(118);\n\tfunction getBlock(self) {\n\t  self._prev = self._cipher.encryptBlock(self._prev);\n\t  return self._prev;\n\t}\n\texports.encrypt = function (self, chunk) {\n\t  while (self._cache.length < chunk.length) {\n\t    self._cache = Buffer.concat([self._cache, getBlock(self)]);\n\t  }\n\t  var pad = self._cache.slice(0, chunk.length);\n\t  self._cache = self._cache.slice(chunk.length);\n\t  return xor(chunk, pad);\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 121 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var xor = __webpack_require__(118);\n\tfunction getBlock(self) {\n\t  var out = self._cipher.encryptBlock(self._prev);\n\t  incr32(self._prev);\n\t  return out;\n\t}\n\texports.encrypt = function (self, chunk) {\n\t  while (self._cache.length < chunk.length) {\n\t    self._cache = Buffer.concat([self._cache, getBlock(self)]);\n\t  }\n\t  var pad = self._cache.slice(0, chunk.length);\n\t  self._cache = self._cache.slice(chunk.length);\n\t  return xor(chunk, pad);\n\t};\n\tfunction incr32(iv) {\n\t  var len = iv.length;\n\t  var item;\n\t  while (len--) {\n\t    item = iv.readUInt8(len);\n\t    if (item === 255) {\n\t      iv.writeUInt8(0, len);\n\t    } else {\n\t      item++;\n\t      iv.writeUInt8(item, len);\n\t      break;\n\t    }\n\t  }\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 122 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Buffer) {var aes = __webpack_require__(85);\n\tvar Transform = __webpack_require__(86);\n\tvar inherits = __webpack_require__(89);\n\tvar modes = __webpack_require__(113);\n\tvar StreamCipher = __webpack_require__(115);\n\tvar ebtk = __webpack_require__(114);\n\t\n\tinherits(Decipher, Transform);\n\tfunction Decipher(mode, key, iv) {\n\t  if (!(this instanceof Decipher)) {\n\t    return new Decipher(mode, key, iv);\n\t  }\n\t  Transform.call(this);\n\t  this._cache = new Splitter();\n\t  this._last = void 0;\n\t  this._cipher = new aes.AES(key);\n\t  this._prev = new Buffer(iv.length);\n\t  iv.copy(this._prev);\n\t  this._mode = mode;\n\t}\n\tDecipher.prototype._transform = function (data, _, next) {\n\t  this._cache.add(data);\n\t  var chunk;\n\t  var thing;\n\t  while ((chunk = this._cache.get())) {\n\t    thing = this._mode.decrypt(this, chunk);\n\t    this.push(thing);\n\t  }\n\t  next();\n\t};\n\tDecipher.prototype._flush = function (next) {\n\t  var chunk = this._cache.flush();\n\t  if (!chunk) {\n\t    return next;\n\t  }\n\t\n\t  this.push(unpad(this._mode.decrypt(this, chunk)));\n\t\n\t  next();\n\t};\n\t\n\tfunction Splitter() {\n\t   if (!(this instanceof Splitter)) {\n\t    return new Splitter();\n\t  }\n\t  this.cache = new Buffer('');\n\t}\n\tSplitter.prototype.add = function (data) {\n\t  this.cache = Buffer.concat([this.cache, data]);\n\t};\n\t\n\tSplitter.prototype.get = function () {\n\t  if (this.cache.length > 16) {\n\t    var out = this.cache.slice(0, 16);\n\t    this.cache = this.cache.slice(16);\n\t    return out;\n\t  }\n\t  return null;\n\t};\n\tSplitter.prototype.flush = function () {\n\t  if (this.cache.length) {\n\t    return this.cache;\n\t  }\n\t};\n\tfunction unpad(last) {\n\t  var padded = last[15];\n\t  if (padded === 16) {\n\t    return;\n\t  }\n\t  return last.slice(0, 16 - padded);\n\t}\n\t\n\tvar modelist = {\n\t  ECB: __webpack_require__(116),\n\t  CBC: __webpack_require__(117),\n\t  CFB: __webpack_require__(119),\n\t  OFB: __webpack_require__(120),\n\t  CTR: __webpack_require__(121)\n\t};\n\t\n\tmodule.exports = function (crypto) {\n\t  function createDecipheriv(suite, password, iv) {\n\t    var config = modes[suite];\n\t    if (!config) {\n\t      throw new TypeError('invalid suite type');\n\t    }\n\t    if (typeof iv === 'string') {\n\t      iv = new Buffer(iv);\n\t    }\n\t    if (typeof password === 'string') {\n\t      password = new Buffer(password);\n\t    }\n\t    if (password.length !== config.key/8) {\n\t      throw new TypeError('invalid key length ' + password.length);\n\t    }\n\t    if (iv.length !== config.iv) {\n\t      throw new TypeError('invalid iv length ' + iv.length);\n\t    }\n\t    if (config.type === 'stream') {\n\t      return new StreamCipher(modelist[config.mode], password, iv, true);\n\t    }\n\t    return new Decipher(modelist[config.mode], password, iv);\n\t  }\n\t\n\t  function createDecipher (suite, password) {\n\t    var config = modes[suite];\n\t    if (!config) {\n\t      throw new TypeError('invalid suite type');\n\t    }\n\t    var keys = ebtk(crypto, password, config.key, config.iv);\n\t    return createDecipheriv(suite, keys.key, keys.iv);\n\t  }\n\t  return {\n\t    createDecipher: createDecipher,\n\t    createDecipheriv: createDecipheriv\n\t  };\n\t};\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(61).Buffer))\n\n/***/ }),\n/* 123 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar ManisStream = __webpack_require__(11);\r\n\tvar ManisFunctions = __webpack_require__(27);\r\n\tvar Status = __webpack_require__(6);\r\n\tvar ManisResponse = __webpack_require__(26);\r\n\tvar ErrorCode = __webpack_require__(28);\r\n\t\r\n\t/* global $, config, connection, chrome, alert, getUserMediaWithConstraints, changeLocalVideo, getConferenceHandler */\r\n\t/**\r\n\t * Indicates that desktop stream is currently in use(for toggle purpose).\r\n\t * @type {boolean}\r\n\t */\r\n\tvar isUsingScreenStream = false;\r\n\t/**\r\n\t * Indicates that switch stream operation is in progress and prevent from triggering new events.\r\n\t * @type {boolean}\r\n\t */\r\n\tvar switchInProgress = false;\r\n\t\r\n\t/**\r\n\t * Method used to get screen sharing stream.\r\n\t *\r\n\t * @type {function (stream_callback, failure_callback}\r\n\t */\r\n\tvar obtainDesktopStream = null;\r\n\t\r\n\t/**\r\n\t * Flag used to cache desktop sharing enabled state. Do not use directly as it can be <tt>null</tt>.\r\n\t * @type {null|boolean}\r\n\t */\r\n\tvar _desktopSharingEnabled = null;\r\n\t\r\n\t/**\r\n\t * Method obtains desktop stream from WebRTC 'screen' source.\r\n\t * Flag 'chrome://flags/#enable-usermedia-screen-capture' must be enabled.\r\n\t */\r\n\tfunction obtainWebRTCScreen(streamCallback, failCallback) {\r\n\t  getUserMediaWithConstraints(\r\n\t    ['screen'],\r\n\t    streamCallback,\r\n\t    failCallback\r\n\t  );\r\n\t}\r\n\t\r\n\t/**\r\n\t * Constructs inline install URL for Chrome desktop streaming extension.\r\n\t * The 'chromeExtensionId' must be defined in config.js.\r\n\t * @returns {string}\r\n\t */\r\n\tfunction getWebStoreInstallUrl() {\r\n\t  return config.chromeExtensionUrl;\r\n\t}\r\n\t\r\n\tfunction checkExtInstalled(isInstalledCallback) {\r\n\t  isInstalledCallback($('#ofmeet-extension-installed').length > 0);\r\n\t}\r\n\t\r\n\tfunction doGetStreamFromExtension(streamCallback, failCallback) {\r\n\t  var pending = window.setTimeout(\r\n\t    function () {\r\n\t      // console.error(\"AAAAA 3  try get the stream by Extension \");\r\n\t    }, 1000);\r\n\t\r\n\t  window.postMessage({\r\n\t    type: 'ofmeetGetScreen',\r\n\t    id: pending,\r\n\t    server: config.messageServer + ': ' + config.messageServerPort,\r\n\t    resource: Strophe.getResourceFromJid(connection.jid),\r\n\t    // options: ['screen']\r\n\t  }, '*');\r\n\t\r\n\t  window.addEventListener('message', function (event) {\r\n\t    if (event.origin != window.location.origin)\r\n\t      return;\r\n\t\r\n\t    if (event.data.type == 'ofmeetGotScreen') {\r\n\t      if (event.data.sourceId === '') {\r\n\t        // user canceled\r\n\t        switchInProgress = false;\r\n\t        // failCallback(\"Extension failed to get the stream\");\r\n\t\r\n\t      } else {\r\n\t        getUserMediaWithConstraints(['desktop'],\r\n\t          function (stream) {\r\n\t            streamCallback(stream);\r\n\t          },\r\n\t          failCallback,\r\n\t          null, null, null,\r\n\t          event.data.sourceId);\r\n\t      }\r\n\t    } else if (event.data.type == 'ofmeetGetScreenPending') {\r\n\t      window.clearTimeout(event.data.id);\r\n\t    }\r\n\t  });\r\n\t}\r\n\t/**\r\n\t * Asks Chrome extension to call chooseDesktopMedia and gets chrome 'desktop' stream for returned stream token.\r\n\t */\r\n\tfunction obtainScreenFromExtension(streamCallback, failCallback) {\r\n\t  checkExtInstalled(\r\n\t    function (isInstalled) {\r\n\t      if (isInstalled) {\r\n\t        doGetStreamFromExtension(streamCallback, failCallback);\r\n\t      } else {\r\n\t        window.open(getWebStoreInstallUrl(), \"_blank\");\r\n\t        console.error('Error', 'Install manually and reload webpage');\r\n\t        failCallback({\r\n\t          errorCode: ErrorCode.share_screen_extended_plugin_except\r\n\t        })\r\n\t      }\r\n\t    }\r\n\t  );\r\n\t}\r\n\t\r\n\t\r\n\tfunction getUserMediaWithConstraints(um, success_callback, failure_callback, resolution, bandwidth, fps, desktopStream) {\r\n\t  var constraints = {audio: false, video: false};\r\n\t  // if (um.indexOf('desktop') >= 0) {\r\n\t    constraints.video = {\r\n\t      mandatory: {\r\n\t        chromeMediaSource: \"desktop\",\r\n\t        chromeMediaSourceId: desktopStream,\r\n\t        // googLeakyBucket: true,\r\n\t        maxWidth: window.screen.width,\r\n\t        maxHeight: window.screen.height,\r\n\t        maxFrameRate: 15,\r\n\t        minFrameRate: 5\r\n\t      },\r\n\t      // optional: []\r\n\t    }\r\n\t    // constraints.video.optional.push({bandwidth: bandwidth ? bandwidth : 2048});\r\n\t  // }\r\n\t\r\n\t\r\n\t  var isFF = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\r\n\t\r\n\t  try {\r\n\t    if (config.enableSimulcast\r\n\t      && constraints.video\r\n\t      && constraints.video.chromeMediaSource !== 'screen'\r\n\t      && constraints.video.chromeMediaSource !== 'desktop'\r\n\t      && !isAndroid\r\n\t\r\n\t      // We currently do not support FF, as it doesn't have multistream support.\r\n\t      && !isFF) {\r\n\t      simulcast.getUserMedia(constraints, function (stream) {\r\n\t          console.log('onUserMediaSuccess', constraints);\r\n\t          success_callback(stream);\r\n\t        },\r\n\t        function (error) {\r\n\t          console.warn('Failed to get access to local media. Error ', error);\r\n\t          if (failure_callback) {\r\n\t            failure_callback(error, resolution, um, success_callback);\r\n\t          }\r\n\t        });\r\n\t    } else {\r\n\t      ManisStream.getMedia(constraints,\r\n\t        function (stream) {\r\n\t          console.log('onUserMediaSuccess', constraints);\r\n\t          success_callback(stream);\r\n\t        },\r\n\t        function (error) {\r\n\t          console.warn('Failed to get access to local media. Error ', error);\r\n\t          // if (failure_callback) {\r\n\t          //   failure_callback(error, resolution, um, success_callback);\r\n\t          // }\r\n\t        });\r\n\t\r\n\t    }\r\n\t  } catch (e) {\r\n\t    console.error('GUM failed: ', e);\r\n\t    if (failure_callback) {\r\n\t      failure_callback(e, resolution, um, success_callback);\r\n\t    }\r\n\t  }\r\n\t}\r\n\t/**\r\n\t * @returns {boolean} <tt>true</tt> if desktop sharing feature is available and enabled.\r\n\t */\r\n\tfunction isDesktopSharingEnabled() {\r\n\t  if (_desktopSharingEnabled === null) {\r\n\t    if (obtainDesktopStream === obtainScreenFromExtension) {\r\n\t      // Parse chrome version\r\n\t      var userAgent = navigator.userAgent.toLowerCase();\r\n\t      // We can assume that user agent is chrome, because it's enforced when 'ext' streaming method is set\r\n\t      var ver = parseInt(userAgent.match(/chrome\\/(\\d+)\\./)[1], 10);\r\n\t      console.log(\"Chrome version\" + userAgent, ver);\r\n\t      _desktopSharingEnabled = ver >= 34;\r\n\t    } else {\r\n\t      _desktopSharingEnabled = obtainDesktopStream === obtainWebRTCScreen;\r\n\t    }\r\n\t  }\r\n\t  return _desktopSharingEnabled;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Call this method to toggle desktop sharing feature.\r\n\t * @param method pass \"ext\" to use chrome extension for desktop capture(chrome extension required),\r\n\t *        pass \"webrtc\" to use WebRTC \"screen\" desktop source('chrome://flags/#enable-usermedia-screen-capture'\r\n\t *        must be enabled), pass any other string or nothing in order to disable this feature completely.\r\n\t */\r\n\tfunction setDesktopSharing(method) {\r\n\t  // Check if we are running chrome\r\n\t  if (!navigator.webkitGetUserMedia) {\r\n\t    obtainDesktopStream = null;\r\n\t    console.info(\"Desktop sharing disabled\");\r\n\t  } else if (method == \"ext\") {\r\n\t    obtainDesktopStream = obtainScreenFromExtension;\r\n\t    console.info(\"Using Chrome extension for desktop sharing\");\r\n\t  } else if (method == \"webrtc\") {\r\n\t    obtainDesktopStream = obtainWebRTCScreen;\r\n\t    console.info(\"Using Chrome WebRTC for desktop sharing\");\r\n\t  }\r\n\t\r\n\t  // Reset enabled cache\r\n\t  _desktopSharingEnabled = null;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Initializes <link rel=chrome-webstore-item /> with extension id set in config.js to support inline installs.\r\n\t * Host site must be selected as main website of published extension.\r\n\t */\r\n\tfunction initInlineInstalls() {\r\n\t  $(\"link[rel=chrome-webstore-item]\").attr(\"href\", getWebStoreInstallUrl());\r\n\t};\r\n\t\r\n\tfunction getSwitchStreamFailed(error) {\r\n\t  console.error(\"Failed to obtain the stream to switch to\", error);\r\n\t  switchInProgress = false;\r\n\t}\r\n\t\r\n\tfunction streamSwitchDone() {\r\n\t  switchInProgress = false;\r\n\t};\r\n\t\r\n\t/*\r\n\t * Toggles screen sharing.\r\n\t */\r\n\tfunction toggleScreenSharing(successCallback, errorCallback) {\r\n\t  if (switchInProgress || !obtainDesktopStream) {\r\n\t    console.warn(\"Switch in progress or no method defined\");\r\n\t    return;\r\n\t  }\r\n\t  switchInProgress = true;\r\n\t\r\n\t  // Only the focus is able to set a shared key.\r\n\t  if (!isUsingScreenStream) {\r\n\t    obtainDesktopStream(\r\n\t      function (stream) {\r\n\t        // We now use screen stream\r\n\t        // window.isUsingScreenStream = true;\r\n\t        // Hook 'oninactive' event to restore camera when screen stream stops\r\n\t        if (typeof stream.active !== \"undefined\") {\r\n\t          stream.oninactive = function () {\r\n\t            // console.log('++++++++++++++++++++++++ screen stream ended 11111111111');\r\n\t            window.isUsingScreenStream = false;\r\n\t            switchInProgress = false;\r\n\t            if(!window.removeScreenInprogress){\r\n\t              Status.removeScreenSourceFromConnection(function () {\r\n\t                $(document).trigger('mains.on.screen.share.end');\r\n\t              })\r\n\t            }else {\r\n\t              window.removeScreenInprogress = false;\r\n\t            }\r\n\t          };\r\n\t        }\r\n\t        //todo Firefox need implement\r\n\t        successCallback({\r\n\t          code: ManisResponse.code_200,\r\n\t          msg: ManisResponse.share_screen_success,\r\n\t          response: createResult(stream),\r\n\t          errorCode: ErrorCode.no_error\r\n\t        });\r\n\t      },\r\n\t      function (error) {\r\n\t        switchInProgress = false;\r\n\t        errorCallback({\r\n\t          code: ManisResponse.code_400,\r\n\t          msg: ManisResponse.share_screen_failed,\r\n\t          errorCode: error.errorCode ? error.errorCode :ErrorCode.share_screen_fetch_stream_failed\r\n\t        })\r\n\t      });\r\n\t  }\r\n\t};\r\n\t\r\n\tfunction createResult(stream) {\r\n\t  // stream.src = URL.createObjectURL(stream);\r\n\t  var _resource = Strophe.getResourceFromJid(connection.jid);\r\n\t  var myself = {\r\n\t    info: {\r\n\t      nickname: config.nickname ? config.nickname : manisConfg.mUsername,\r\n\t      resource: _resource\r\n\t    },\r\n\t    stream: stream,\r\n\t    status: ManisFunctions.generateStatusNode(_resource)\r\n\t  };\r\n\t  return myself;\r\n\t}\r\n\t\r\n\tmodule.exports = {\r\n\t  toggleScreenSharing: toggleScreenSharing,\r\n\t  streamSwitchDone: streamSwitchDone,\r\n\t  initInlineInstalls: initInlineInstalls,\r\n\t  setDesktopSharing: setDesktopSharing,\r\n\t  isDesktopSharingEnabled: isDesktopSharingEnabled,\r\n\t};\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// main_product_37b186f3fa268262b1f0.bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 37b186f3fa268262b1f0","// var $ = require('jquery');\r\n// window.$ = $;\r\nvar ManisSignIn = require('../modules/manis.sign');\r\nvar ManisConference = require('../modules/manis.conference');\r\nvar Status = require('../modules/manis.status');\r\nvar ManisFunctions = require('../modules/manis.functions');\r\nvar ManisResponse = require('../modules/manis.response');\r\nvar ManisScreenShare = require('../modules/manis.screenshare');\r\nvar ManisStream = require('../modules/manis.stream');\r\nvar P2P = require('../modules/manis.p2p');\r\nvar ms =  require('../modules/strophe/plugins/manis.utils.js');\r\n\r\nvar ErrorCode = require( '../modules/errorCode');\r\n\r\nconst LICENSE_ERROR = 'License except !';\r\n\r\nconst DEFAULT_PROTOCOL = 'https://';\r\n\r\n\r\nconst SIGN_CTL_PATH = '/clientApi/loginClient'; // 登录会控接口\r\n\r\nconst CREATE_ROOM_PATH = '/user/createConferenceClient'; // 会控创建会议室接口\r\n\r\nconst JOIN_BY_ANONYMOUS_URL = \"/clientApi/loginClientAnonymous\";  // 匿名登录会控接口\r\n\r\nconst AUDIO_INPUT_DEVICES_TYPE = 'audioinput';\r\n\r\nconst AUDIO_OUTPUT_DEVICES_TYPE = 'audiooutput';\r\n\r\nconst VIDEO_INPUT_DEVICES_TYPE = 'videoinput';\r\n\r\nconst AcceptResolutions = ['1080', '720', '768', '540', '480', '240', '180'];\r\n\r\nconst AcceptHandsUpResponse = ['agree', 'refuse'];\r\n\r\nfunction checkResourcesCallBack(response) {\r\n  console.log('check resources response:', response);\r\n}\r\nwindow.checkResourcesCallBack = checkResourcesCallBack;\r\n\r\nwindow.participants = [];\r\n\r\nwindow.myself = null;\r\n\r\nwindow.clientTypeCode = '0101';\r\n\r\nwindow.stream = null;\r\n\r\nwindow.isRemoteControl = false;\r\n\r\nwindow.focusJid = null;\r\n\r\nwindow.incomingCall = false;\r\n\r\nwindow.lock = false;\r\n\r\nwindow.removeScreenInprogress = false;\r\n\r\nwindow.manisConfg = {};\r\n\r\nwindow.sendOnly = false;\r\n\r\nwindow.exitCode = 1000;\r\n\r\nwindow.config = {\r\n  channelLastN: -1,\r\n  adaptiveLastN: false,\r\n  adaptiveSimulcast: false,\r\n  openSctp: true,\r\n  enableFirefoxHacks: false,\r\n  nat: 'stun:124.202.164.3',\r\n  focuser: null,\r\n  enableSimulcast: false,\r\n  focusUserJid: 'focus@60.206.107.181',\r\n  audioBandwidth: 64,\r\n  videoBandwidth: 1024,\r\n  enableRtpStats: true,\r\n  role: 'NONE',\r\n  nickname: null,\r\n  chromeExtensionUrl: 'static/dist/Manis-Meetings-Chrome-Extension_v0.0.9.crx',\r\n  chromeExtensionId: 'lmmbdcmikgbfpgegokhgedahimdimcnh',\r\n  desktopSharing: 'ext',\r\n  gw: null,\r\n  withModerator: false,\r\n  // debug: true,\r\n};\r\n\r\nwindow.RTC = {\r\n  getLocalSSRC: function (session, callback) {\r\n    callback(null);\r\n  },\r\n  browser: ms.getBrowserName(),\r\n  isSafari: function() {return ms.isSafari();},\r\n  isChrome: function() {return ms.isChrome();},\r\n  isFirefox : function() {return ms.isFirefox()},\r\n  plan: ms.getSemantics(),\r\n};\r\n\r\nwindow.isUsingScreenStream = false;\r\nwindow.roomName = null;\r\nwindow.mediaStreams = {};\r\nwindow._dataChannels = [];\r\nwindow.ssrc2jid = {};\r\nwindow.jid2Ssrc = {};\r\nwindow.ssrc2videoType = {};\r\nwindow.ssrc2resolution = {};\r\nwindow.activecall = null;\r\nwindow.statsCollector = null;\r\nwindow.mutedAudios = {};\r\nwindow.mutedVideos = {};\r\nwindow.forceMuted = false;\r\nwindow.forceSetVideo = false;\r\nwindow.currentVideoInputDeviceId = null;\r\nwindow.currentAudioInputDeviceId = null;\r\nwindow.currentAudioOutputDeviceId = null;\r\nwindow.connectType = null;\r\nwindow.localSSRCS = [];\r\n\r\n\r\nvar Manis = {\r\n\r\n  keepAliveTimer: null,\r\n\r\n  browserSupportCheck: function () {\r\n    var browserInfo = ms.getBrowserInfo();\r\n    console.log('get browser info: ', browserInfo);\r\n    if(browserInfo.name.indexOf('chrome') > -1 && browserInfo.version >= 53){\r\n      return browserInfo;\r\n    } else if(browserInfo.name.indexOf('safari') > -1 && browserInfo.version >= 11){\r\n      return  browserInfo;\r\n    } else if(browserInfo.name.indexOf('firefox') > -1 && browserInfo.version >= 60){\r\n      return false;\r\n    } else {\r\n      return browserInfo;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 初始化配置\r\n   * @param params\r\n   */\r\n  initial: function (params, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if(!this.browserSupportCheck()){\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.no_test_browser_type_or_version,\r\n        errorCode: ErrorCode.no_test_browser_type_or_version\r\n      });\r\n      return;\r\n    }\r\n    if (typeof(params) != 'object' || !params.server) {\r\n      callback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.params_error,\r\n        errorCode: ErrorCode.init_params_error,\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      this.manisParams = params;\r\n      window.manisParams = params;\r\n      window.clientTypeCode = params.clientCode ? params.clientCode : '0101';\r\n      window.serverPath = DEFAULT_PROTOCOL + params.server;\r\n      if (params.type == 'p2p') {\r\n        window.connectType = 'p2p';\r\n      } else {\r\n        ManisScreenShare.setDesktopSharing(config.desktopSharing);\r\n        ManisConference.initDefaultInputDevices(params.audioInput, params.videoInput, params.audioOutput);\r\n        if (config.chromeExtensionId) {\r\n          ManisScreenShare.initInlineInstalls();\r\n        }\r\n      }\r\n      ManisFunctions.getClientConfig(params.server, function () {\r\n          callback({\r\n              code: ManisResponse.code_200,\r\n              msg: ManisResponse.init_success,\r\n              errorCode: ErrorCode.no_error\r\n          })\r\n      })\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  },\r\n  /**\r\n   * 登录\r\n   * @param username\r\n   * @param password\r\n   * @param nickName\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   * @param connectServer\r\n   */\r\n  signIn: function (username, password, nickName, successCallback, errorCallback, connectServer) {\r\n    var _this = this;\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except,\r\n      });\r\n      return;\r\n    }\r\n    if (!username) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.username_password_except,\r\n        errorCode: ErrorCode.username_except,\r\n      });\r\n      return;\r\n    }\r\n    if (!password) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.username_password_except,\r\n        errorCode: ErrorCode.user_password_except,\r\n      });\r\n      return;\r\n    }\r\n    var server = DEFAULT_PROTOCOL + this.manisParams.server + SIGN_CTL_PATH;\r\n    ManisSignIn.signInMeetingCtl(username, password, nickName, function (res) {\r\n        if(connectServer){\r\n          _this.keepAlive();\r\n        }\r\n        successCallback(res)\r\n    }, errorCallback, server, this.manisParams.domain, connectServer);\r\n  },\r\n  /**\r\n   * 退出登录\r\n   * @param callback\r\n   */\r\n  signOut: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except,\r\n      });\r\n      return;\r\n    }\r\n    if(window.connection){\r\n      window.connection.disconnect();\r\n      window.connection = null;\r\n    }\r\n    if(this.keepAliveTimer){\r\n      window.clearInterval(this.keepAliveTimer);\r\n      this.keepAliveTimer = null;\r\n    }\r\n    callback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.sign_out_success,\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 登录Message server\r\n   * @param nickname\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  signInMessageServer: function (nickname, successCallback, errorCallback) {\r\n    var _this = this;\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    ManisSignIn.signInXMPP(function(result){\r\n      _this.keepAlive();\r\n      successCallback(result);\r\n    }, errorCallback, nickname);\r\n  },\r\n\r\n  /**\r\n   * 会话保持\r\n   */\r\n  keepAlive: function () {\r\n    if(config.mUserId && config.endpoint && config.currentTimeMillis && connection){\r\n      if(this.keepAliveTimer){\r\n        window.clearInterval(this.keepAliveTimer);\r\n        this.keepAliveTimer = null;\r\n      }\r\n      var timer = window.setInterval(function () {\r\n        ManisFunctions.keepAlive(config.mUserId, config.endpoint,config.currentTimeMillis);\r\n      }, 1000*60*10);\r\n      this.keepAliveTimer = timer;\r\n    }\r\n  },\r\n  /**\r\n   *  创建会议\r\n   * @param conferencePassword\r\n   * @param comperePassword\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   * @param audioOnly\r\n   * @param localMediaStream\r\n   * @param withoutStream\r\n   */\r\n  createConference: function (conferencePassword, comperePassword, successCallback, errorCallback, audioOnly = false, localMediaStream = null, withoutStream = false) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    var server = DEFAULT_PROTOCOL + this.manisParams.server + CREATE_ROOM_PATH;\r\n    ManisConference.createOrJoinRoom(\r\n      null,\r\n      conferencePassword,\r\n      comperePassword,\r\n      successCallback,\r\n      errorCallback,\r\n      audioOnly,\r\n      localMediaStream,\r\n      withoutStream\r\n    );\r\n  },\r\n  /**\r\n   *  加入到会议室\r\n   * @param conferenceNumber\r\n   * @param conferencePassword\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   * @param audioOnly\r\n   * @param localMediaStream\r\n   * @param withoutStream\r\n   */\r\n  joinConference: function (conferenceNumber, conferencePassword, successCallback, errorCallback, audioOnly = false, localMediaStream = null, withoutStream = false) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!conferenceNumber || conferenceNumber.length <= 0) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.room_number_except,\r\n        errorCode: ErrorCode.conference_room_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    // try {\r\n    ManisConference.createOrJoinRoom(\r\n      conferenceNumber,\r\n      conferencePassword,\r\n      null,\r\n      successCallback,\r\n      errorCallback,\r\n      audioOnly,\r\n      localMediaStream,\r\n      withoutStream\r\n    );\r\n    // }\r\n    // catch (e) {\r\n    //   errorCallback(LICENSE_ERROR);\r\n    // }\r\n  },\r\n  /**\r\n   *  匿名加入会议室\r\n   * @param conferenceNumber\r\n   * @param nickname\r\n   * @param conferencePassword\r\n   * @param isAudioOnly\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   * @param localMediaStream\r\n   * @param withoutStream\r\n   */\r\n  joinByAnonymous: function (conferenceNumber, nickname, conferencePassword, isAudioOnly = false, successCallback, errorCallback, localMediaStream = null, withoutStream=false) {\r\n    var _this = this;\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!conferenceNumber) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.room_number_and_nickname_except,\r\n        errorCode: ErrorCode.conference_room_except\r\n      });\r\n      return;\r\n    }\r\n    if (!nickname) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.room_number_and_nickname_except,\r\n        errorCode: ErrorCode.conference_room_nickname_except\r\n      });\r\n      return;\r\n    }\r\n\r\n    // try {\r\n    var server = DEFAULT_PROTOCOL + this.manisParams.server + JOIN_BY_ANONYMOUS_URL;\r\n    ManisSignIn.signInMeetingCtlByAnonymous(server, nickname, function () {\r\n      _this.keepAlive();\r\n      Manis.joinConference(conferenceNumber, conferencePassword, successCallback, errorCallback, isAudioOnly, localMediaStream, withoutStream);\r\n    }, function () {\r\n      Manis.joinByAnonymous(conferenceNumber, nickname, conferencePassword, isAudioOnly, successCallback, errorCallback, localMediaStream, withoutStream);\r\n    });\r\n    // } catch (e) {\r\n    //   errorCallback(LICENSE_ERROR);\r\n    // }\r\n  },\r\n\r\n  /**\r\n   * 离开会议室\r\n   * @param callback\r\n   */\r\n  leaveConference: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    // try {\r\n      Status.disposeConference();\r\n      // connection.emuc.doLeave();\r\n      ManisConference.leaveConferenceRoom();\r\n      window.participants = [];\r\n      window.mutedAudios = {};\r\n      window.localSSRCS = [];\r\n      Status.currentTargetResolution = null;\r\n      Status.currentTargetVideoInput = null;\r\n      window.currentVideoInputDeviceId = null;\r\n      window.currentAudioInputDeviceId = null;\r\n      window.currentAudioOutputDeviceId = null;\r\n      var localAudio = connection.jingle.localAudio;\r\n      var localVideo = connection.jingle.localVideo;\r\n      var localScreen = connection.jingle.localScreen;\r\n      if (localAudio && localAudio.getTracks().length) {\r\n        localAudio.getTracks().forEach(function (track) {\r\n          track.stop();\r\n        });\r\n      }\r\n      if (localVideo && localVideo.getTracks().length) {\r\n        localVideo.getTracks().forEach(function (track) {\r\n          track.stop();\r\n        });\r\n      }\r\n      if (localScreen && localScreen.getTracks().length) {\r\n        localScreen.getTracks().forEach(function (track) {\r\n          track.stop();\r\n        });\r\n      }\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.leave_room,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    // } catch (e) {\r\n    //   callback(LICENSE_ERROR);\r\n    // }\r\n  },\r\n  /**\r\n   * 有人加入会议室\r\n   * @param callback\r\n   */\r\n  onJoinConference: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.room.someone.joined');\r\n    $(document).bind('manis.room.someone.joined', function (event, participant) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.on_participant_joined,\r\n        response: participant,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    });\r\n  },\r\n  /**\r\n   * 有人离开会议室\r\n   * @param callback\r\n   */\r\n  onLeaveConference: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.room.someone.left');\r\n    $(document).bind('manis.room.someone.left', function (event, participant) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.on_participant_left,\r\n        response: participant,\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    })\r\n  },\r\n  /**\r\n   * 獲取參會人員列表\r\n   * @param callback\r\n   */\r\n  memberList: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (window.participants.length) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.got_participants,\r\n        response: window.participants,\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    } else {\r\n      callback({\r\n        code: ManisResponse.code_404,\r\n        msg: ManisResponse.room_unopend,\r\n        errorCode: ErrorCode.conference_room_un_open\r\n      })\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 开关音频\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   * @param audioSwitch\r\n   */\r\n  audioToggleMute: function (successCallback, errorCallback, audioSwitch) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (window.connectType == 'p2p') {\r\n      P2P.muteAudio(successCallback, errorCallback);\r\n      return;\r\n    }\r\n    var mute = (audioSwitch != undefined) ? audioSwitch :(!ManisFunctions.isAudioMuted());\r\n    ManisFunctions.setAudioMute(mute, function () {\r\n      successCallback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.set_audio_toggle_complete,\r\n        response: mute,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    }, function () {\r\n      errorCallback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.set_audio_toggle_failed,\r\n        response: !mute,\r\n        errorCode: ErrorCode.audio_switch_mute_failed\r\n      });\r\n    });\r\n\r\n    /*try {\r\n      var mute = (audioSwitch != undefined) ? audioSwitch :(!ManisFunctions.isAudioMuted());\r\n\r\n      var localAudioTracks = connection.jingle.localAudio.getAudioTracks();\r\n      if (localAudioTracks.length > 0) {\r\n        for (var idx = 0; idx < localAudioTracks.length; idx++) {\r\n          localAudioTracks[idx].enabled = !mute;\r\n        }\r\n      }\r\n      var resource = connection.jid.split('/')[1];\r\n      var iqToFocus = $iq({to: window.focusJid, type: 'set', from: connection.jid}).c('mute', {\r\n        xmlns: 'http://jitsi.org/jitmeet/audio',\r\n        jid: connection.jid,\r\n        userjid: connection.jid\r\n      }).t(mute.toString()).up();\r\n      connection.sendIQ(iqToFocus, function (success) {\r\n        connection.emuc.addAudioInfoToPresence(mute);\r\n        connection.emuc.sendPresence();\r\n        $(document).trigger('audiomuted.muc',[connection.jid, mute.toString()]);\r\n        successCallback({\r\n          code: ManisResponse.code_200,\r\n          msg: ManisResponse.set_audio_toggle_complete,\r\n          response: mute,\r\n          errorCode: ErrorCode.no_error\r\n        });\r\n      }, function (error) {\r\n        errorCallback({\r\n          code: ManisResponse.code_400,\r\n          msg: ManisResponse.set_audio_toggle_failed,\r\n          response: !mute,\r\n          errorCode: ErrorCode.audio_switch_mute_failed\r\n        });\r\n      });\r\n    } catch (e) {\r\n      errorCallback(LICENSE_ERROR);\r\n    }*/\r\n  },\r\n  /**\r\n   *  捕获音频开关变更\r\n   * @param callback\r\n   */\r\n  onAudioToggleMute: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('audiomuted.muc');\r\n    $(document).bind('audiomuted.muc', function (event, jid, isMuted) {\r\n      isMuted = (isMuted == 'true');\r\n      for (var i = 0; i < window.participants.length; i++) {\r\n        var participant = window.participants[i];\r\n        if (participant.resource == Strophe.getResourceFromJid(jid)) {\r\n          participant.audio_muted = isMuted;\r\n          window.participants[i] = participant;\r\n        }\r\n      }\r\n      if (mutedAudios[jid] !== isMuted) {\r\n        mutedAudios[jid] = isMuted;\r\n        callback({\r\n          user: ManisFunctions.getUserInfoByJid(jid),\r\n          mute: isMuted,\r\n          errorCode: ErrorCode.no_error\r\n        });\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * 开关视频\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   * @param videoSwitch\r\n   */\r\n  videoToggleMute: function (successCallback, errorCallback, videoSwitch) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (window.connectType == 'p2p') {\r\n      P2P.muteVideo(successCallback, errorCallback);\r\n      return;\r\n    }\r\n\r\n    var mute = (videoSwitch != undefined) ? videoSwitch :(!ManisFunctions.isVideoMuted());\r\n\r\n    ManisFunctions.setVideoMute(mute, function () {\r\n      successCallback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.set_video_toggle_complete,\r\n        response: mute,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    }, function () {\r\n      successCallback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.set_video_toggle_failed,\r\n        response: !mute,\r\n        errorCode: ErrorCode.video_switch_mute_failed\r\n      });\r\n    });\r\n\r\n/*    try {\r\n      var session = window.activecall;\r\n      var targetMute = (videoSwitch != undefined) ? videoSwitch : (!session.isVideoMute());\r\n      if (session) {\r\n        ManisFunctions.setVideoMute(targetMute, function () {\r\n          successCallback({\r\n            code: ManisResponse.code_200,\r\n            msg: ManisResponse.set_video_toggle_complete,\r\n            response: targetMute,\r\n            errorCode: ErrorCode.no_error\r\n          })\r\n        }, function (error) {\r\n          successCallback({\r\n            code: ManisResponse.code_400,\r\n            msg: ManisResponse.set_video_toggle_failed,\r\n            response: !targetMute,\r\n            errorCode: ErrorCode.video_switch_mute_failed\r\n          });\r\n        });\r\n      } else {\r\n        errorCallback({\r\n          code: ManisResponse.code_400,\r\n          msg: ManisResponse.set_video_toggle_failed,\r\n          errorCode: ErrorCode.conference_room_wait_others\r\n        })\r\n      }\r\n    } catch (e) {\r\n      errorCallback(LICENSE_ERROR);\r\n    }*/\r\n  },\r\n  /**\r\n   * 捕获视频开关变化\r\n   * @param callback\r\n   */\r\n  onVideoToggleMute: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('videomuted.muc');\r\n    $(document).bind('videomuted.muc', function (event, jid, isMuted) {\r\n      isMuted = (isMuted.toString() == 'true');\r\n      for (var i = 0; i < window.participants.length; i++) {\r\n        var participant = window.participants[i];\r\n        if (participant.resource == Strophe.getResourceFromJid(jid)) {\r\n          participant.video_muted = isMuted;\r\n        }\r\n      }\r\n      if (mutedVideos[jid] !== isMuted) {\r\n        mutedVideos[jid] = isMuted;\r\n        callback({\r\n          user: ManisFunctions.getUserInfoByJid(jid),\r\n          mute: isMuted,\r\n          errorCode: ErrorCode.no_error\r\n        });\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 判断是否拥有主持人权限\r\n   * @returns {boolean}\r\n   */\r\n  isAdmin: function () {\r\n    return ManisFunctions.isAdmin();\r\n  },\r\n  /**\r\n   *  移交主持人。\r\n   * @param resource\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  grantAdmin: function (resource, successCallback, errorCallback) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (!resource) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.resource_except,\r\n        errorCode: ErrorCode.grant_admin_participant_except\r\n      });\r\n      return;\r\n    }\r\n    var participant = ManisFunctions.getUserByResource(resource);\r\n    if (!participant) {\r\n      errorCallback({\r\n        code: ManisResponse.code_404,\r\n        msg: ManisResponse.participant_not_in_room,\r\n        errorCode: ErrorCode.grant_admin_participant_not_exist\r\n      });\r\n      return;\r\n    }\r\n    var roomNumber = roomName ? roomName.split('@')[0] : null;\r\n    if (!roomNumber) {\r\n      errorCallback({\r\n        code: ManisResponse.code_404,\r\n        msg: ManisResponse.room_unopend,\r\n        errorCode: ErrorCode.conference_room_un_open\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isAdmin()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.out_of_authority,\r\n        errorCode: ErrorCode.without_permission_for_the_operation\r\n      });\r\n      return;\r\n    }\r\n    ManisConference.grantAdmin(participant, roomNumber, successCallback, errorCallback);\r\n  },\r\n\r\n  /**\r\n   * 注册被授权主持人权限的回调\r\n   * @param callback\r\n   */\r\n  onGrantAdmin: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.on.grant.admin');\r\n    $(document).bind('manis.on.grant.admin', function (event) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.on_grant_admin_completed,\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 主持人权限被收回\r\n   * @param callback\r\n   */\r\n  onRemoveAdmin: function(callback){\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.on.remove.admin');\r\n    $(document).bind('manis.on.remove.admin', function (event) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.on_remove_admin_completed,\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取主持人权限\r\n   * @param password\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  fetchAdmin: function (password, successCallback, errorCallback) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!password) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.compere_password_except,\r\n        errorCode: ErrorCode.fetch_admin_password_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    var participant = ManisFunctions.getUserByResource(Strophe.getResourceFromJid(connection.jid));\r\n    var roomNumber = roomName ? roomName.split('@')[0] : null;\r\n    if (!participant || !roomNumber) {\r\n      errorCallback({\r\n        code: ManisResponse.code_404,\r\n        msg: ManisResponse.room_unopend,\r\n        errorCode: ErrorCode.conference_room_un_open\r\n      });\r\n      return;\r\n    }\r\n    if (ManisFunctions.isAdmin()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.compere_authority_own,\r\n        errorCode: ErrorCode.fetch_admin_failed_owen_it\r\n      });\r\n      return;\r\n    }\r\n    ManisConference.fetchAdmin(participant, roomNumber, password, successCallback, errorCallback);\r\n  },\r\n  /**\r\n   * 发送文字消息\r\n   * @param message\r\n   * @param resource\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  sendTextMessage: function (message, resource, successCallback, errorCallback) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!message) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.message_content_null,\r\n        errorCode: ErrorCode.text_message_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    // try {\r\n    if (resource) {\r\n      var participant = ManisFunctions.getUserByResource(resource);\r\n      if (!participant) {\r\n        errorCallback({\r\n          code: ManisResponse.code_404,\r\n          msg: ManisResponse.participant_not_in_room,\r\n          errorCode: ErrorCode.private_text_message_receiver_not_exist\r\n        });\r\n        return;\r\n      }\r\n      ManisSignIn.sendPrivateMessage(message, participant, window.self.nickname, successCallback);\r\n      $(document).trigger('onmessage.muc', [window.connection.jid, window.self.nickname, message, true, participant.nickname]);\r\n    } else {\r\n      window.connection.emuc.sendMessage(message, window.self.nickname);\r\n      $(document).trigger('onmessage.muc', [window.connection.jid, window.self.nickname, message, false, '']);\r\n      successCallback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.message_send_complete,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    }\r\n    // } catch (e) {\r\n    //   errorCallback(LICENSE_ERROR);\r\n    // }\r\n  },\r\n\r\n  /**\r\n   * 收到文字消息\r\n   * @param callback\r\n   */\r\n  onTextMessage: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('onmessage.muc');\r\n    $(document).bind('onmessage.muc', function (event, from, nickname, text, privateMsg, receiver) {\r\n      if (Strophe.getResourceFromJid(from) == Strophe.getResourceFromJid(connection.jid)) {\r\n        var sendFromMe = true;\r\n      } else {\r\n        var sendFromMe = false;\r\n      }\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.receive_text_message_complete,\r\n        response: {\r\n          from: nickname,\r\n          content: text,\r\n          isPrivateMsg: (privateMsg === true) ? true : false,\r\n          to: (receiver === undefined && privateMsg === true) ? 'all' : receiver,\r\n          sendFromMe: sendFromMe\r\n        },\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 主持人设置静音/取消\r\n   * @param resource\r\n   * @param mute\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  setSomeoneAudioMute: function (resource, mute, successCallback, errorCallback) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!resource) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.becontrol_user_resource_except,\r\n        errorCode: ErrorCode.operate_someone_audio_participant_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isAdmin()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.out_of_authority,\r\n        errorCode: ErrorCode.without_permission_for_the_operation\r\n      });\r\n      return;\r\n    }\r\n    ManisConference.setAudioMute(resource, mute, successCallback, errorCallback);\r\n  },\r\n\r\n  /**\r\n   * 收到主持人修改音频状态的信息\r\n   * @param callback\r\n   */\r\n  onAudioMuteBeSet: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('onmute.audio.muc');\r\n    $(document).bind('onmute.audio.muc', function (event, mute) {\r\n      window.forceMuted = mute;\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.be_set_mute_complete,\r\n        response: mute,\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 主持人开关参会成员视频\r\n   * @param resource\r\n   * @param mute\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  setSomeoneVideoMute: function (resource, mute, successCallback, errorCallback) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n      return;\r\n    }\r\n    if (!resource) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.becontrol_user_resource_except,\r\n        errorCode: ErrorCode.operate_someone_video_participant_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isAdmin()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.out_of_authority,\r\n        errorCode: ErrorCode.without_permission_for_the_operation\r\n      });\r\n      return;\r\n    }\r\n    ManisConference.setVideoMute(resource, mute, successCallback, errorCallback);\r\n  },\r\n\r\n  /**\r\n   * 被主持人开关视频\r\n   * @param callback\r\n   */\r\n  onVideoMuteBeSet: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('onmute.video.muc');\r\n    $(document).bind('onmute.video.muc', function (event, mute) {\r\n      window.forceSetVideo = mute;\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.be_set_video_complete,\r\n        response: mute,\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 从会议室踢出\r\n   * @param resource\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  eject: function (resource, successCallback, errorCallback) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!resource) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.becontrol_user_resource_except,\r\n        errorCode: ErrorCode.eject_participant_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isAdmin()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.out_of_authority,\r\n        errorCode: ErrorCode.without_permission_for_the_operation\r\n      });\r\n      return;\r\n    }\r\n    var participant = ManisFunctions.getUserByResource(resource);\r\n    if (!participant) {\r\n      errorCallback({\r\n        code: ManisResponse.code_404,\r\n        msg: ManisResponse.participant_not_in_room,\r\n        errorCode: ErrorCode.eject_participant_not_exist\r\n      });\r\n      return;\r\n    }\r\n    ManisConference.eject(participant, successCallback, errorCallback);\r\n  },\r\n\r\n  /**\r\n   * 被踢出了房间\r\n   * @param callback\r\n   */\r\n  onEject: function (callback) {\r\n    var _this = this;\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('oneject.muc');\r\n    $(document).bind('oneject.muc', function (event, from) {\r\n      if(from.indexOf('admin') > -1) {\r\n        window.exitCode = 1007\r\n      }else {\r\n        window.exitCode = 1008\r\n      }\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.you_have_been_eject,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n      _this.leaveConference(function(result){\r\n        console.log(result);\r\n      });\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取视频输入设备列表\r\n   * @param callback\r\n   */\r\n  getVideoInputDevices: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    Status.getDevices(VIDEO_INPUT_DEVICES_TYPE, callback);\r\n  },\r\n\r\n  /**\r\n   * 改变视频输入列表\r\n   * @param inputDeviceId\r\n   * @param callback\r\n   * @param videoResolution\r\n   */\r\n  changeVideoInputDevice: function (inputDeviceId, callback, videoResolution) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    var targetResolution = videoResolution ? videoResolution : config.currentResolution;\r\n    if (!inputDeviceId && !targetResolution) {\r\n      callback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.video_device_id_except,\r\n        errorCode: ErrorCode.change_video_input_device_except\r\n      });\r\n    }\r\n    window.currentVideoInputDeviceId = inputDeviceId;\r\n    config.resolution = config.storeResolution;\r\n    Status.modifyLocalVideoStream(targetResolution, inputDeviceId, callback);\r\n  },\r\n\r\n  /**\r\n   * 修改分辨率\r\n   * @param resolution\r\n   * @param callback\r\n   */\r\n  changeResolution: function (resolution, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (!resolution || (AcceptResolutions.indexOf(resolution) < 0)) {\r\n      callback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.resolution_params_error,\r\n        error: resolution,\r\n        errorCode: ErrorCode.change_resolution_not_match\r\n      });\r\n      return;\r\n    }\r\n    try{\r\n      Status.changeResolutionByApplyConstraints(resolution, window.currentVideoInputDeviceId, callback);\r\n    }catch (e){\r\n      // console.error(e);\r\n      Status.modifyLocalVideoStream(resolution, window.currentVideoInputDeviceId, callback);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 音频输入设备列表\r\n   * @param callback\r\n   */\r\n  audioInputDevices: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    Status.getDevices(AUDIO_INPUT_DEVICES_TYPE, callback);\r\n  },\r\n\r\n  /**\r\n   * 更改音频输入设备\r\n   * @param audioInputDevice\r\n   * @param callback\r\n   */\r\n  audioInputChange: function (audioInputDevice, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!audioInputDevice) {\r\n      callback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.video_device_id_except,\r\n        errorCode: ErrorCode.change_audio_input_device_except\r\n      });\r\n      return;\r\n    }\r\n    window.currentAudioInputDeviceId = audioInputDevice;\r\n    Status.modifyLocalAudioStream(audioInputDevice, callback);\r\n  },\r\n\r\n  /**\r\n   * 音频输出设备列表\r\n   * @param callback\r\n   */\r\n  audioOutputDevices: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    Status.getDevices(AUDIO_OUTPUT_DEVICES_TYPE, callback);\r\n  },\r\n\r\n  /**\r\n   * 更改音频输出设备\r\n   * @param audioOutputDevice\r\n   * @param callback\r\n   */\r\n  audioOutputDeviceChange: function (audioOutputDevice, callback) {\r\n    var _this = this;\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if(!audioOutputDevice){\r\n      callback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.audio_output_except,\r\n        errorCode: ErrorCode.change_audio_output_device_except\r\n      });\r\n      return;\r\n    }\r\n    document.querySelectorAll('audio').forEach(function(element, index){\r\n      _this.attachSinkId(element, audioOutputDevice);\r\n    });\r\n    callback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.audio_output_change_completed,\r\n      errorCode: ErrorCode.no_error\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 绑定音频播放设备ID\r\n   * @param element\r\n   * @param sinkId\r\n   */\r\n  attachSinkId: function(element, sinkId) {\r\n    if (typeof element.sinkId !== 'undefined') {\r\n      element.setSinkId(sinkId)\r\n        .then(function() {\r\n          console.log('Success, audio output device attached: ' + sinkId);\r\n        })\r\n        .catch(function(error) {\r\n          var errorMessage = error;\r\n          if (error.name === 'SecurityError' || error.constructor.name === 'SecurityError') {\r\n            errorMessage = 'You need to use HTTPS for selecting audio output ' +\r\n              'device: ' + error;\r\n          }\r\n          console.error(errorMessage);\r\n        });\r\n    } else {\r\n      console.warn('Browser does not support output device selection.');\r\n    }\r\n  },\r\n\r\n\r\n  /**\r\n   * 取消呼叫SIP终端\r\n   * @param sip\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  cancelSipCall: function(sip, successCallback, errorCallback){\r\n    this.callSip(sip, successCallback, errorCallback, '', '', true);\r\n  },\r\n\r\n\r\n  /**\r\n   * 呼叫SIP终端\r\n   * @param sip\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   * @param sipRecordRule\r\n   * @param recorderUserId\r\n   * @param cancelCall\r\n   */\r\n  callSip: function (sip, successCallback, errorCallback, sipRecordRule, recorderUserId, cancelCall = false) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!sip) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.sip_number_except,\r\n        errorCode: ErrorCode.sip_client_except\r\n      });\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isAdmin()) {\r\n      errorCallback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.out_of_authority,\r\n        errorCode: ErrorCode.without_permission_for_the_operation\r\n      });\r\n      return;\r\n    }\r\n    // try to get new gw if it exists\r\n\r\n    ManisConference.updateGWConfig(function(result){\r\n      if(result.code == 200){\r\n        config.gw = result.response;\r\n      }\r\n      if (config.gw == null) {\r\n        errorCallback({\r\n          code: ManisResponse.code_421,\r\n          msg: ManisResponse.sip_gateway_except,\r\n          errorCode: ErrorCode.sip_gateway_except\r\n        });\r\n      }\r\n      if(cancelCall){\r\n        ManisSignIn.cancelCallSip(config.gw, sip, successCallback, errorCallback);\r\n        return;\r\n      }\r\n      ManisSignIn.callSip(config.gw, sip, successCallback, errorCallback, sipRecordRule, recorderUserId, config.roomPassword);\r\n    });\r\n  },\r\n  /**\r\n   * 拨号\r\n   * @param receiver\r\n   * @param roomNumber // 房间号\r\n   * @param roomPassword // 房间密码\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  ringUp: function (receiver, roomNumber, roomPassword, successCallback, errorCallback) {\r\n    if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!receiver) {\r\n      errorCallback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.be_inviste_user_except,\r\n        errorCode: ErrorCode.invoke_receiver_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      errorCallback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    ManisSignIn.ringUp(receiver, roomNumber, function (result) {\r\n      window.withReply = false;\r\n      window.incomingCall = true;\r\n      setTimeout(function () {\r\n        if (window.withReply === false) {\r\n          window.incomingCall = false;\r\n          $(document).trigger('manis.onringup.reply', [null, null, null, 'timeout', ManisResponse.code_406, ManisResponse.invite_time_out]);\r\n        }\r\n      }, ManisResponse.time_out_seconds);\r\n      successCallback(result);\r\n    }, errorCallback, 0, roomPassword);\r\n  },\r\n  /**\r\n   * 被叫\r\n   * @param callback\r\n   */\r\n  onRingUp: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('oninvite.muc');\r\n    $(document).bind('oninvite.muc', function (event, from, nick, room, password, callType) {\r\n      if (window.incomingCall != false || ManisFunctions.isInRoom()) {\r\n        // 正在处理第一个被叫或者参会中,自动应答第二个被叫忙.\r\n        ManisSignIn.sendInviteBusy(from, room, self.nickname);\r\n        return;\r\n      }\r\n      window.incomingCall = true;\r\n      window.ringCallStartAt = (new Date()).valueOf();\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.on_ring_up,\r\n        response: {\r\n          uuid: from,\r\n          nickname: nick,\r\n          password: password,\r\n          roomName: room,\r\n          callType: callType\r\n        },\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    });\r\n  },\r\n  /**\r\n   * 答复响铃\r\n   * @param roomNumber\r\n   * @param roomPassword\r\n   * @param reply\r\n   * @param requester\r\n   * @param callback\r\n   */\r\n  responseRingUp: function (roomNumber, roomPassword, reply, requester, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    window.incomingCall = false;\r\n    if (window.ringCallStartAt) {\r\n      var currentTime = (new Date()).valueOf();\r\n      if (currentTime - window.ringCallStartAt > ManisResponse.time_out_seconds) {\r\n        callback({\r\n          code: ManisResponse.code_406,\r\n          msg: ManisResponse.reply_invite_time_out,\r\n          errorCode: ErrorCode.called_expired\r\n        });\r\n        return;\r\n      }\r\n    }\r\n    if (reply == true) {\r\n      var _response = ManisSignIn.sendInviteAccept(requester, roomNumber, self.nickname);\r\n    } else {\r\n      var _response = ManisSignIn.sendInviteReject(requester, roomNumber, self.nickname);\r\n    }\r\n    callback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.response_invite_msg_complete,\r\n      response: _response,\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n  },\r\n  /**\r\n   * 收到拨号响应\r\n   * @param callback\r\n   */\r\n  onRingUpResponse: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.onringup.reply');\r\n    $(document).bind('manis.onringup.reply', function (event, from, nick, room, reply, code, msg) {\r\n      window.withReply = true;\r\n      window.incomingCall = false;\r\n      callback({\r\n        code: code ? code : ManisResponse.code_200,\r\n        msg: msg ? msg : ManisResponse.on_ring_up_reply,\r\n        response: {\r\n          uuid: from,\r\n          nickname: nick,\r\n          roomName: room,\r\n          answer: reply\r\n        },\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    });\r\n  },\r\n  /**\r\n   * 当拨号呼叫对方接听后,创建\r\n   * 会议室并发送Join消息给被叫\r\n   * 者,被叫收到Join消息加入\r\n   * 对应会议室\r\n   * @param receiver\r\n   * @param roomNumber\r\n   * @param roomPassword\r\n   * @param callback\r\n   */\r\n  sendRoomComplete: function (receiver, roomNumber, roomPassword, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!receiver) {\r\n      callback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.be_inviste_user_except,\r\n        errorCode: ErrorCode.invoke_room_ready_receiver_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      ManisSignIn.sendJoinAfterRingCallAccept(receiver, roomNumber, roomPassword, config.nickname || '');\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.send_inviste_success,\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    }catch (e){\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.send_inviste_failed,\r\n        errorCode: ErrorCode.send_room_ready_msg_failed\r\n      })\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 接听后收到房间已经准备好的消\r\n   * 息,收到此消息后进入到对应房间\r\n   * @param callback\r\n   */\r\n  onRoomComplete: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('oninvite.room.complete.after.accept.request');\r\n    $(document).bind('oninvite.room.complete.after.accept.request', function (event, room, password) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.room_opened,\r\n        response: {\r\n          roomNumber: room,\r\n          roomPassword: password\r\n        },\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 发送被叫消息已被处理的广播\r\n   * 消息,其他终端收到消息则关闭\r\n   * 被叫响铃通知\r\n   * @param callback\r\n   */\r\n  sendRingCallProcessed: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      var receiver = connection.jid ? (connection.jid.split('/')[0]) :(config.mUserId + '@conference.' + manisConfg.messageServer);\r\n      ManisSignIn.sendRingCallProcessedMsg(receiver);\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.ring_call_request_in_processed_sent_success,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    }catch (e){\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.ring_call_request_in_processed_sent_failed,\r\n        errorCode: ErrorCode.called_request_in_processed_sent_failed\r\n      });\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 收到被叫消息已经被别的终端处理\r\n   * @param callback\r\n   */\r\n  onRingCallProcessed: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('oninvite.room.processed');\r\n    $(document).bind('oninvite.room.processed', function (event) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.ring_call_request_in_processed,\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    });\r\n  },\r\n\r\n\r\n  /**\r\n   * 房间是否存在\r\n   * @param roomNumber\r\n   * @param callback\r\n   */\r\n  isRoomExist: function (roomNumber, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    var _to = roomNumber + '@conference.' + config.focusUserJid.replace('focus@', '');\r\n    var _iq = $iq({\r\n      type: \"get\",\r\n      to: _to,\r\n      id: connection.getUniqueId()\r\n    }).c(\"query\", {xmlns: \"http://jabber.org/protocol/disco#info\"}).tree();\r\n    // console.log('check iq : ', _iq);\r\n    connection.sendIQ(_iq, function (success) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.room_opened,\r\n        errorCode: ErrorCode.conference_room_opened\r\n      })\r\n    }, function (error) {\r\n      callback({\r\n        code: ManisResponse.code_404,\r\n        msg: ManisResponse.room_unopend,\r\n        errorCode: ErrorCode.conference_room_un_open\r\n      })\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 白板共享\r\n   * @param callback\r\n   */\r\n  whiteboardShare: function (callback, appDir) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isAdmin()) {\r\n      callback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.out_of_authority,\r\n        errorCode: ErrorCode.without_permission_for_the_operation\r\n      });\r\n      return;\r\n    }\r\n    connection.ofmuc.openAppsDialog(false, appDir ? appDir :'apps/drawing/index.html', callback);\r\n  },\r\n\r\n  /**\r\n   * 屏幕分享(双流模式)\r\n   * @param callback\r\n   */\r\n  addScreenSourceToConnection: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isAdmin()) {\r\n      callback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.out_of_authority,\r\n        errorCode: ErrorCode.without_permission_for_the_operation\r\n      });\r\n      return;\r\n    }\r\n    var session = window.activecall;\r\n    if (!session) {\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.share_screen_failed,\r\n        errorCode: ErrorCode.conference_room_wait_others\r\n      });\r\n      return;\r\n    }\r\n    if(!ManisScreenShare.isDesktopSharingEnabled()){\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.share_screen_failed,\r\n        errorCode: ErrorCode.share_screen_nonsupport\r\n      });\r\n      return ;\r\n    }\r\n    ManisScreenShare.toggleScreenSharing(function (result) {\r\n      console.log('BBBBBBBBBBBBBBBB', result);\r\n      if (result.response.stream) {\r\n        // get screen stream success\r\n        window.isUsingScreenStream = true;\r\n        Status.addScreenSourceToConnection(result.response.stream, callback);\r\n      } else {\r\n        // get screen stream failed\r\n        callback({\r\n          code: ManisResponse.code_400,\r\n          msg: ManisResponse.share_screen_failed,\r\n          errorCode: result.errorCode\r\n        })\r\n      }\r\n    }, function (error) {\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.share_screen_failed,\r\n        errorCode: error.errorCode\r\n       })\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 从连接中移除屏幕分享流\r\n   * @param callback\r\n   */\r\n  removeScreenSourceFromConnection: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      // console.log('++++++++++++++++++++++++ screen stream ended 0000000000');\r\n      window.removeScreenInprogress = true;\r\n      window.isUsingScreenStream = false;\r\n      Status.removeScreenSourceFromConnection(function (res) {\r\n          ManisScreenShare.streamSwitchDone();\r\n          callback(res)\r\n      });\r\n    } catch (e) {\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.share_screen_error,\r\n        errorCode: ErrorCode.share_screen_stop_failed\r\n      })\r\n    }\r\n  },\r\n\r\n  onShareScreenStart: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('mains.on.screen.share.start');\r\n    $(document).bind('mains.on.screen.share.start', function (event) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.share_screen_success,\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    });\r\n  },\r\n\r\n\r\n  /**\r\n   * 屏幕分享结束事件\r\n   * @param callback\r\n   */\r\n  onShareScreenEnd: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('mains.on.screen.share.end');\r\n    $(document).bind('mains.on.screen.share.end', function (event) {\r\n      window.removeScreenInprogress = false;\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.share_screen_ended,\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    });\r\n  },\r\n  /**\r\n   * 注册有流从连接中被删除事件\r\n   * @param callback\r\n   */\r\n  onStreamSourceRemoved: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('mains.on.stream.removed');\r\n    $(document).bind('mains.on.stream.removed', function (event, _type, _ssrc, _hardRemove) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        errorCode: ErrorCode.no_error,\r\n        msg: ManisResponse.on_stream_removed,\r\n        response: {\r\n          type: _type,\r\n          ssrc: _ssrc,\r\n          hardRemove: _hardRemove\r\n        }\r\n      })\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 注册有新流加入到连接中\r\n   * @param callback\r\n   */\r\n  onStreamSourceAdded: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).bind('mains.on.stream.added');\r\n    $(document).bind('mains.on.stream.added', function (event, resource) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        errorCode: ErrorCode.no_error,\r\n        msg: ManisResponse.on_stream_added,\r\n        response: resource\r\n      })\r\n    });\r\n  },\r\n  /**\r\n   * 获取我的好友列表\r\n   * @param callback\r\n   */\r\n  getFriends: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    ManisSignIn.myFriends(callback);\r\n  },\r\n\r\n  /**\r\n   * 锁定/解锁房间\r\n   * @param switchAction\r\n   * @param callback\r\n   */\r\n  lockRoom: function (switchAction, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isAdmin()) {\r\n      callback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.out_of_authority,\r\n        errorCode: ErrorCode.without_permission_for_the_operation\r\n      });\r\n      return;\r\n    }\r\n    ManisConference.lockRoom(switchAction, callback);\r\n  },\r\n\r\n  /**\r\n   * 初始化主持人权限\r\n   * @param callback\r\n   */\r\n  initModerator: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    ManisFunctions.initModerator(callback);\r\n  },\r\n\r\n  /**\r\n   * 主持人存在状态事件监听\r\n   * @param callback\r\n   */\r\n  onWithModeratorChanged: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.on.with.moderator.changed');\r\n    $(document).bind('manis.on.with.moderator.changed', function (event, withModerator, timeLeft) {\r\n      window.config.withModerator = withModerator;\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        errorCode: ErrorCode.no_error,\r\n        msg: ManisResponse.with_moderator_status_changed,\r\n        response: {\r\n          moderator: withModerator,\r\n          time: timeLeft\r\n        }\r\n      })\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 捕获未知错误\r\n   * @param callback\r\n   */\r\n  systemError: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.on.unknown.error');\r\n    $(document).bind('manis.on.unknown.error', function (event, error) {\r\n      callback({\r\n        code: ManisResponse.code_500,\r\n        errorCode: ErrorCode.unknown_error,\r\n        msg: ManisResponse.network_error,\r\n        error: error\r\n      })\r\n    })\r\n  },\r\n\r\n\r\n  /**\r\n   * 增加第二路流到连接中(可能非屏幕分享)\r\n   * @param stream\r\n   * @param callback\r\n   */\r\n  addSecondStreamToConnection(stream, callback){\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isAdmin()) {\r\n      callback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.out_of_authority,\r\n        errorCode: ErrorCode.without_permission_for_the_operation\r\n      });\r\n      return;\r\n    }\r\n    var session = window.activecall;\r\n    if (!session) {\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.connection_lost,\r\n        errorCode: ErrorCode.conference_room_wait_others\r\n      });\r\n      return;\r\n    }\r\n    if(!stream){\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.second_stream_except,\r\n        errorCode: ErrorCode.second_stream_except\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      window.isUsingScreenStream = true;\r\n      Status.addScreenSourceToConnection(stream, callback);\r\n    }catch (e){\r\n      callback({\r\n        errorCode: ErrorCode.second_stream_share_failed\r\n      });\r\n    }\r\n  },\r\n\r\n\r\n  /**\r\n   * 收到参会者音频流\r\n   * @param callback\r\n   */\r\n  participantAudioConnected(callback){\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.room.someone.audio.added');\r\n    $(document).bind('manis.room.someone.audio.added', function (event, participant) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.on_participant_audio_joined,\r\n        response: participant,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 会控结束会议\r\n   * @param callback\r\n   */\r\n  killedByManager(callback){\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.management.kill');\r\n    $(document).bind('manis.management.kill', function (event, kill) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        errorCode: ErrorCode.no_error,\r\n        msg: ManisResponse.room_kill_by_manager,\r\n        response: kill\r\n      });\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 锁定状态发生改变\r\n   * @param callback\r\n   */\r\n  lockStatusChanged(callback){\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.room.lock.status.change');\r\n    $(document).bind('manis.room.lock.status.change', function (event, lockStatus) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        errorCode: ErrorCode.no_error,\r\n        msg: ManisResponse.room_lock_status_change+(lockStatus ? '锁定': '解锁'),\r\n        response: (lockStatus.toString() == 'true') ? true : false\r\n      });\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 用户状态变化\r\n   * @param callback\r\n   */\r\n  onParticipantStatusUpdate(callback){\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.participant.status.update');\r\n    $(document).bind('manis.participant.status.update', function (event, participant) {\r\n      for(var i = 0; i < window.participants.length; i++){\r\n        var p = window.participants[i];\r\n        if(p.resource == Strophe.getResourceFromJid(participant.from)){\r\n          p.nickname = participant.nickName;\r\n          p.audio_muted = (participant.audioMuted == 'true') ? true : false;\r\n          p.video_muted = (participant.videoMuted == 'true') ? true : false;\r\n          p.is_moderator = (participant.configRole == 'CRUO' || participant.configRole == 'CRUA') ? true : false;\r\n          p.status = participant.status;\r\n          p.media_sources = participant.mediaSources;\r\n          window.participants.splice(i, 1, p);\r\n          callback({\r\n            code: ManisResponse.code_200,\r\n            errorCode: ErrorCode.no_error,\r\n            msg: ManisResponse.participant_status_update,\r\n            response: p\r\n          })\r\n        }\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n  /**\r\n   * send hands up msg\r\n   * @param nickname\r\n   * @param action\r\n   * @param callback\r\n   */\r\n  handsUp: function (nickname, action, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n\r\n    var requestAction = action ? action : 'apply';\r\n    ManisFunctions.sendHandsUpMsg(nickname, requestAction, function () {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.hands_up_send_success,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    }, function (e) {\r\n      callback({\r\n        code: e.code,\r\n        msg: ManisResponse.hands_up_send_failed,\r\n        errorCode: ErrorCode.hand_up_send_failed\r\n      })\r\n    })\r\n  },\r\n\r\n  /**\r\n   * on hands up msg\r\n   * @param callback\r\n   */\r\n  onHandsUp: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.on.hands.up.msg');\r\n    $(document).bind('manis.on.hands.up.msg', function (event, _from, _nickname, _action) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        errorCode: ErrorCode.no_error,\r\n        msg: ManisResponse.on_hands_up_msg,\r\n        response: {\r\n          from: _from,\r\n          nickname: _nickname,\r\n          action: _action,\r\n        }\r\n      })\r\n    });\r\n  },\r\n\r\n  /**\r\n   *\r\n   * @param receiver\r\n   * @param action\r\n   * @param content\r\n   * @param callback\r\n   */\r\n  responseHandsUp: function (receiver, action, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if(!receiver){\r\n      callback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.params_error,\r\n        errorCode: ErrorCode.hand_up_receiver_except\r\n      });\r\n      return;\r\n    }\r\n    if(!action || (AcceptHandsUpResponse.indexOf(action) < 0)){\r\n      callback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.response_hands_up_action_error,\r\n        errorCode: ErrorCode.hand_up_response_action_illegality\r\n      });\r\n      return;\r\n    }\r\n    ManisFunctions.responseHandsUpMsg(receiver, action, function () {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.response_hands_up_msg_success,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    }, function (e) {\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.response_hands_up_msg_failed,\r\n        errorCode: ErrorCode.response_hands_up_msg_failed\r\n      });\r\n    });\r\n  },\r\n\r\n  /**\r\n   *\r\n   * @param callback\r\n   */\r\n  onHandsUpResponse: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.on.hands.up.response');\r\n    $(document).bind('manis.on.hands.up.response', function (event, from, action) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        errorCode: ErrorCode.no_error,\r\n        msg: ManisResponse.on_hands_up_response,\r\n        response: action\r\n      })\r\n    })\r\n  },\r\n\r\n\r\n  /**\r\n   * 会议房间倒计时.\r\n   * @param callback\r\n   */\r\n  onRoomCountdown: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.on.room.countdown');\r\n    $(document).bind('manis.on.room.countdown', function (event, timeLeft) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        errorCode: ErrorCode.no_error,\r\n        msg: ManisResponse.room_countdown,\r\n        response: {\r\n          countdown: timeLeft\r\n        }\r\n      })\r\n    });\r\n\r\n  },\r\n\r\n  /**\r\n   * 会议延时.\r\n   * @param delayTime\r\n   * @param callback\r\n   */\r\n  delayRoom: function (delayTime, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if(parseInt(delayTime) < 0){\r\n      callback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.room_extend_time_require,\r\n        errorCode: ErrorCode.conference_delay_time_require\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isAdmin()) {\r\n      callback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.out_of_authority,\r\n        errorCode: ErrorCode.without_permission_for_the_operation\r\n      });\r\n      return;\r\n    }\r\n    ManisConference.roomDelay(delayTime, callback);\r\n\r\n  },\r\n\r\n\r\n  /**\r\n   * Recorder status changed\r\n   * @param callback\r\n   */\r\n  onRecordStatusChanged(callback){\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      $(document).unbind('manis.recorder.status.change');\r\n      $(document).bind('manis.recorder.status.change', function (event, recordStatus, jid) {\r\n          callback({\r\n              code: ManisResponse.code_200,\r\n              errorCode: ErrorCode.no_error,\r\n              msg: ManisResponse.manis_recorder_status_changed,\r\n              response: {\r\n                  status: recordStatus,\r\n                  resource: jid\r\n              }\r\n          })\r\n      });\r\n  },\r\n\r\n  /**\r\n   *\r\n   * @param callback\r\n   */\r\n  handleChangeModelNotice: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n          code: ManisResponse.code_421,\r\n          msg: ManisResponse.callback_function_except,\r\n          errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n      $(document).unbind('manis.on.switch.to.audio.model');\r\n      $(document).bind('manis.on.switch.to.audio.model', function (event, audioModel) {\r\n        callback({\r\n         code: ManisResponse.code_200,\r\n         errorCode: ErrorCode.no_error,\r\n         msg: ManisResponse.on_room_model_change_to_audio_only\r\n        });\r\n      });\r\n  },\r\n\r\n  /**\r\n   * 获取呼叫电话的正确号码\r\n   * @param phoneNumber\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  getRrightPhoneNumber: function (phoneNumber, successCallback, errorCallback) {\r\n      if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      if(!phoneNumber) {\r\n          errorCallback({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.get_phone_number_except,\r\n              errorCode: ErrorCode.will_ring_phone_number_except\r\n          });\r\n          return;\r\n      }\r\n      ManisFunctions.getPhoneNumber(phoneNumber, successCallback, errorCallback);\r\n  },\r\n\r\n  /**\r\n   * 获取流媒体资源\r\n   * @param constraints\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  getUserMediaByConstraints(constraints, successCallback, errorCallback){\r\n      if (typeof(successCallback) != 'function' || typeof(errorCallback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      if(!constraints){\r\n          errorCallback({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.order_change_resolution_resulotion_except,\r\n              errorCode: ErrorCode.get_user_media_constraints_except\r\n          });\r\n          return;\r\n      }\r\n      ManisStream.getMedia(constraints, function(stream){\r\n          successCallback({\r\n              code: ManisResponse.code_200,\r\n              msg: ManisResponse.get_user_media_success,\r\n              response: stream,\r\n              errorCode: ErrorCode.no_error\r\n          })\r\n      }, function (error) {\r\n          errorCallback({\r\n              code: ManisResponse.code_400,\r\n              msg: ManisResponse.get_user_media_failed,\r\n              errorCode: ErrorCode.media_device_get_local_media_failed,\r\n              error: error\r\n          })\r\n      });\r\n  },\r\n\r\n  //  --------------un comment into doc--------------\r\n  /**\r\n    * 接入本地音视频流\r\n    * @param localStream\r\n    * @param callback\r\n    */\r\n  addLocalStream: function (localStream, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!localStream) {\r\n      callback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.local_stream_except,\r\n        errorCode: ErrorCode.local_stream_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    // var session = window.activecall;\r\n    // if (!session) {\r\n    //   callback({\r\n    //     code: ManisResponse.code_400,\r\n    //     msg: ManisResponse.other_participant_except,\r\n    //     errorCode: ErrorCode.conference_room_wait_others\r\n    //   });\r\n    //   return;\r\n    // }\r\n    Status.addLocalStreamToConnection(localStream, callback);\r\n  },\r\n\r\n  /**\r\n   * 移出本端音视频流\r\n   * @param callback\r\n   */\r\n  removeLocalStream: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n        code: ManisResponse.code_401,\r\n        msg: ManisResponse.connection_except,\r\n        errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n        code: ManisResponse.code_407,\r\n        msg: ManisResponse.you_are_not_in_room,\r\n        errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      Status.removeLocalStreamFromConnection(callback);\r\n    } catch (e) {\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.remove_local_stream_failed,\r\n        errorCode: ErrorCode.remove_local_stream_failed\r\n      })\r\n    };\r\n  },\r\n\r\n  /**\r\n   * 仅发送方式加入到房间(无线投屏)\r\n   * @param room 房间号\r\n   * @param password 房间密码\r\n   * @param nickname 参会昵称\r\n   * @param mediaStream 发送的流媒体(音视频)\r\n   * @param callback 回调函数\r\n   */\r\n  sendOnlyParticipant: function (room, password, nickname, mediaStream, callback) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except,\r\n          });\r\n          return;\r\n      }\r\n      if(!room){\r\n          callback({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.room_number_except,\r\n              errorCode: ErrorCode.conference_room_except\r\n          });\r\n          return;\r\n      }\r\n      if(!mediaStream){\r\n          callback({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.media_stream_except,\r\n              errorCode: ErrorCode.send_only_stream_except\r\n          });\r\n          return;\r\n      }\r\n      var _this = this;\r\n      window.sendOnly = true;\r\n      var server = DEFAULT_PROTOCOL + this.manisParams.server + JOIN_BY_ANONYMOUS_URL;\r\n      ManisSignIn.signInMeetingCtlByAnonymous(server, nickname, function () {\r\n          _this.keepAlive();\r\n          if (window.webkitMediaStream) {\r\n              var audioStream = new webkitMediaStream();\r\n              var videoStream = new webkitMediaStream();\r\n              var audioTracks = mediaStream.getAudioTracks();\r\n              var videoTracks = mediaStream.getVideoTracks();\r\n              for (var i = 0; i < audioTracks.length; i++) {\r\n                  audioStream.addTrack(audioTracks[i]);\r\n              }\r\n              for (i = 0; i < videoTracks.length; i++) {\r\n                  videoStream.addTrack(videoTracks[i]);\r\n              }\r\n              connection.jingle.localAudio = audioStream;\r\n              connection.jingle.localVideo = videoStream;\r\n          } else {\r\n              connection.jingle.localAudio = mediaStream;\r\n              connection.jingle.localVideo = mediaStream;\r\n          }\r\n          ManisConference.joinConferenceWithMedia(room, password, mediaStream, callback);\r\n      }, function () {\r\n          _this.sendOnlyParticipant(room, password, nickname, mediaStream, callback);\r\n      });\r\n  },\r\n\r\n  /**\r\n   * 重新设置带宽\r\n   * @param resolution\r\n   * @param callback\r\n   */\r\n  setVideoBandwidth: function (resolution, callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!resolution || (AcceptResolutions.indexOf(resolution.toString()) < 0)) {\r\n      callback({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.resolution_params_error,\r\n        error: resolution,\r\n        errorCode: ErrorCode.change_resolution_not_match\r\n      });\r\n      return;\r\n    }\r\n    var videoBandwidth = ManisFunctions.getVideoBandwidthByResolution(resolution);\r\n    ManisFunctions.setVideoBandwidth(videoBandwidth, function () {\r\n      console.log('Change bandwidth on the fly complete 1');\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.change_video_resolution_complete,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 更新本地流SSRC,以备上主屏使用\r\n   * @param callback\r\n   */\r\n  updateLocalStreamSSRC: function (callback) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      $(document).unbind('manis.local.stream.ssrc.update');\r\n      $(document).bind('manis.local.stream.ssrc.update', function (event, objectSSRC, objectType) {\r\n          callback({\r\n              code: ManisResponse.code_200,\r\n              errorCode: ErrorCode.no_error,\r\n              msg: ManisResponse.local_stream_ssrc_updated,\r\n              response: {\r\n                  type: objectType,\r\n                  ssrc: objectSSRC,\r\n                  resource: Strophe.getResourceFromJid(connection.jid)\r\n              }\r\n          })\r\n      });\r\n  },\r\n\r\n  /**\r\n   * 修改显示模式\r\n   * @param mode\r\n   * @param callback\r\n   * @param mainJid\r\n   */\r\n  changeDisplayMode: function (mode, callback, mainJid) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      if (mode === undefined || mode === null || mode === '') {\r\n          callback({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.display_mode_execpet,\r\n              errorCode: ErrorCode.display_model_except\r\n          });\r\n          return;\r\n      }\r\n      if (window.connection == undefined) {\r\n          callback({\r\n              code: ManisResponse.code_401,\r\n              msg: ManisResponse.connection_except,\r\n              errorCode: ErrorCode.mss_connection_except\r\n          });\r\n          return;\r\n      }\r\n      if (!ManisFunctions.isInRoom()) {\r\n          callback({\r\n              code: ManisResponse.code_407,\r\n              msg: ManisResponse.you_are_not_in_room,\r\n              errorCode: ErrorCode.conference_room_not_participate\r\n          });\r\n          return;\r\n      }\r\n      if (!ManisFunctions.isAdmin()) {\r\n          callback({\r\n              code: ManisResponse.code_403,\r\n              msg: ManisResponse.out_of_authority,\r\n              errorCode: ErrorCode.without_permission_for_the_operation\r\n          });\r\n          return;\r\n      }\r\n      // ManisFunctions.sendChangeDisplayModeMsg(mode, callback, mainJid);\r\n      ManisFunctions.updateDisplayMode(mode, callback);\r\n  },\r\n\r\n  /**\r\n   * 注册接收显示模式改变方法\r\n   * @param callback\r\n   */\r\n  onDisplayModeChange: function (callback) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      $(document).unbind('manis.display.mode.changed');\r\n      $(document).bind('manis.display.mode.changed', function (event, mode) {\r\n          callback({\r\n              code: ManisResponse.code_200,\r\n              msg: ManisResponse.display_mode_change_complete,\r\n              response: mode,\r\n              errorCode: ErrorCode.no_error\r\n          })\r\n      })\r\n  },\r\n\r\n  /**\r\n   * 切换主屏显示\r\n   * @param objectiveSource\r\n   * @param callback\r\n   * @param ObjectSSRC\r\n   * @param isScreen\r\n   */\r\n  changeMainDisplayBlock: function (objectiveSource, isScreen, callback) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      if (!objectiveSource) {\r\n          callback({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.dispaly_block_source_except,\r\n              errorCode: ErrorCode.main_display_source_except\r\n          });\r\n          return;\r\n      }\r\n      // ManisFunctions.sendChangeMainBlockSourceMsg(objectiveSource, ObjectSSRC, callback, isScreen);\r\n      ManisFunctions.updateMainBlockSource(objectiveSource, isScreen, callback); // 新版主屏不再广播消息,只请求后台,由后台选择视频流下发和排序\r\n  },\r\n\r\n  /**\r\n   * 注册主屏更改通知\r\n   * @param callback\r\n   */\r\n  onMainDisplayChange: function (callback) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      $(document).unbind('manis.main.display.changed');\r\n      $(document).bind('manis.main.display.changed', function (event, objectiveSource, streamSSRC) {\r\n          callback({\r\n              code: ManisResponse.code_200,\r\n              errorCode: ErrorCode.no_error,\r\n              msg: ManisResponse.main_display_block_changed,\r\n              response: {\r\n                  resource: objectiveSource,\r\n                  ssrc: streamSSRC\r\n              }\r\n          })\r\n      })\r\n  },\r\n\r\n  /**\r\n   * 选人排序\r\n   * @param participants\r\n   * @param callback\r\n   */\r\n  selectParticipantsDisplay: function (participants, callback) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      if(!participants){\r\n          callback({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.participants_sort_except,\r\n              errorCode: ErrorCode.participants_sort_except\r\n          });\r\n          return;\r\n      }\r\n      ManisFunctions.requestDisplayParticipants(participants, callback);\r\n  },\r\n\r\n  /**\r\n   *  监听显示排序\r\n   * @param callback\r\n   */\r\n  onParticipantsSortChange: function (callback) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      $(document).unbind('manis.on.participants.sort.change');\r\n      $(document).bind('manis.on.participants.sort.change', function (event, sortObject, displayMode) {\r\n          callback({\r\n              code: ManisResponse.code_200,\r\n              errorCode: ErrorCode.no_error,\r\n              msg: ManisResponse.on_participants_sort_change,\r\n              response: {\r\n                  sort: sortObject,\r\n                  mode: displayMode\r\n              },\r\n          });\r\n      });\r\n  },\r\n\r\n  /**\r\n   * 系统升级\r\n   * @param callback\r\n   */\r\n  onSystemUpgrade: function (callback) {\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n        code: ManisResponse.code_421,\r\n        msg: ManisResponse.callback_function_except,\r\n        errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    $(document).unbind('manis.on.system.upgrade');\r\n    $(document).bind('manis.on.system.upgrade', function (event, section) {\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        errorCode: ErrorCode.no_error,\r\n        msg: ManisResponse.system_upgrade_notice,\r\n        response: section,\r\n      });\r\n    });\r\n  },\r\n\r\n  /**\r\n   * send annotation\r\n   * @param action\r\n   * @param data\r\n   * @param receiver\r\n   * @param callback\r\n   */\r\n  sendAnnotation: function (action, data, receiver, callback){\r\n    if (typeof(callback) != 'function') {\r\n      console.error({\r\n          code: ManisResponse.code_421,\r\n          msg: ManisResponse.callback_function_except,\r\n          errorCode: ErrorCode.callback_except\r\n      });\r\n      return;\r\n    }\r\n    if (!action) {\r\n      callback({\r\n         code: ManisResponse.code_421,\r\n         msg: ManisResponse.annotation_action_except,\r\n         errorCode: ErrorCode.annotation_action_except\r\n      });\r\n      return;\r\n    }\r\n    if (window.connection == undefined) {\r\n      callback({\r\n          code: ManisResponse.code_401,\r\n          msg: ManisResponse.connection_except,\r\n          errorCode: ErrorCode.mss_connection_except\r\n      });\r\n      return;\r\n    }\r\n    if (!ManisFunctions.isInRoom()) {\r\n      callback({\r\n          code: ManisResponse.code_407,\r\n          msg: ManisResponse.you_are_not_in_room,\r\n          errorCode: ErrorCode.conference_room_not_participate\r\n      });\r\n      return;\r\n    }\r\n    ManisSignIn.sendAnnotationMsg(action, data, receiver, callback)\r\n  },\r\n\r\n  /**\r\n   *  handle annotation msg\r\n    * @param callback\r\n   */\r\n  onAnnotation: function (callback) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      $(document).unbind('manis.on.annotation');\r\n      $(document).bind('manis.on.annotation', function (event, data) {\r\n          callback({\r\n              code: ManisResponse.code_200,\r\n              errorCode: ErrorCode.no_error,\r\n              msg: 'Handle annotation msg',\r\n              response: data,\r\n          });\r\n      });\r\n  },\r\n\r\n  /**\r\n   *  handle someone attend get delay drawing tracks\r\n   * @param callback\r\n   */\r\n  onAnnotationGetInit: function (callback) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      $(document).unbind('manis.on.annotation.get.init');\r\n      $(document).bind('manis.on.annotation.get.init', function (event, res) {\r\n          callback({\r\n              code: ManisResponse.code_200,\r\n              errorCode: ErrorCode.no_error,\r\n              msg: 'Handle annotation get init msg',\r\n              response: res,\r\n          });\r\n      });\r\n  },\r\n\r\n  /**\r\n   *  response annotation\r\n    * @param receiver\r\n   * @param callback\r\n   * @param urlAction\r\n   */\r\n  responseAnnotation: function (receiver, callback, urlAction) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      if(!receiver){\r\n          callback({\r\n              code: ManisResponse.code_421,\r\n              msg: 'Receiver except',\r\n              errorCode: ErrorCode.username_except\r\n          });\r\n          return;\r\n      }\r\n      if(!urlAction){\r\n          urlAction = 'getInit';\r\n      }\r\n      ManisSignIn.sendGetInitAnnotationMsg(receiver, {type: urlAction}, callback)\r\n  },\r\n\r\n  /**\r\n   * set room audio mute status\r\n    * @param mute\r\n   * @param callback\r\n   */\r\n  setRoomAudioMute: function (mute, callback) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      ManisFunctions.setRoomAudioMuteStatus(mute, callback)\r\n  },\r\n\r\n  /**\r\n   * handle muc entered or left\r\n   * @param callback\r\n   */\r\n  onMucParticipantsChange: function (callback) {\r\n      if (typeof(callback) != 'function') {\r\n          console.error({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.callback_function_except,\r\n              errorCode: ErrorCode.callback_except\r\n          });\r\n          return;\r\n      }\r\n      $(document).unbind('manis.on.muc.change');\r\n      $(document).bind('manis.on.muc.change', function (event, _action, _data) {\r\n          callback({\r\n              code: ManisResponse.code_200,\r\n              errorCode: ErrorCode.no_error,\r\n              msg: 'Handle muc change',\r\n              response: {action: _action, data: _data},\r\n          });\r\n      });\r\n  },\r\n\r\n  encryptString: function (str) {\r\n      if (!str) {\r\n          callback({\r\n              code: ManisResponse.code_421,\r\n              msg: ManisResponse.encrypt_string_except,\r\n              errorCode: ErrorCode.annotation_action_except\r\n          });\r\n          return;\r\n      }\r\n      return ManisFunctions.encryptStr(str)\r\n  }\r\n}\r\n\r\n\r\nmodule.exports = Manis;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","var strophe = require('strophe');\r\n// var disco = require('./strophe/plugins/strophe.disco');\r\nvar muc = require('./strophe/plugins/strophe.emuc');\r\nvar jingle = require('./strophe/plugins/strophe.jingle');\r\n// var roster = require('./strophe/plugins/strophe.roster');\r\nvar ofmuc = require('./strophe/plugins/strophe.ofmuc');\r\nvar ManisFunctions = require('./manis.functions');\r\nvar Status = require('./manis.status');\r\nvar ManisResponse = require('../modules/manis.response');\r\nvar ErrorCode = require('../modules/errorCode');\r\nvar P2P = require('./manis.p2p');\r\n\r\n\r\nvar Openfire = require('./libs/strophe.openfire.js');\r\n\r\n\r\nvar sessionTerminated = false;\r\n\r\nvar getFriendsPath = '/clientApi/friends/';\r\n\r\n/**\r\n * 跨域登录会控系统成功回调(optional)\r\n *\r\n * @param response\r\n */\r\nfunction signInMeetingCtlCallback(response) {\r\n    console.log('get sign in meeting result : ', response);\r\n};\r\n\r\n/**\r\n * 登录到XMPP服务器\r\n *\r\n * @param _successCallback\r\n * @param _errorCallback\r\n * @param _nickname\r\n */\r\nfunction signInXMPP(_successCallback, _errorCallback, _nickname) {\r\n    var openfireHost = 'https://' + window.manisConfg.messageServer + '/http-bind/';\r\n    var connection = new Openfire.Connection(openfireHost, window.manisConfg.endpoint);\r\n    if (!manisConfg.messageServer) {\r\n        _errorCallback({\r\n            code: ManisResponse.code_421,\r\n            msg: ManisResponse.sign_failed,\r\n            errorCode: ErrorCode.message_server_except\r\n        });\r\n        return false;\r\n    }\r\n    if (!manisConfg.mUserId) {\r\n        _errorCallback({\r\n            code: ManisResponse.code_421,\r\n            msg: ManisResponse.sign_failed,\r\n            errorCode: ErrorCode.message_server_user_except\r\n        });\r\n        return false;\r\n    }\r\n    var xmppUser = manisConfg.mUserId.toLowerCase() + '@' + manisConfg.messageServer;\r\n    var xmppPassword = manisConfg.token || \"\";\r\n    connection.connect(\r\n        xmppUser,\r\n        xmppPassword,\r\n        function (status) {\r\n            // console.info('get sign XMPP server result with status :', status);\r\n            if (status == Strophe.Status.CONNECTED) {\r\n                window.connection = connection;\r\n                if (_nickname) {\r\n                    config.nickname = _nickname;\r\n                    connection.emuc.addDisplayNameToPresence(_nickname);\r\n                }\r\n                connection.emuc.addUserIdToPresence(generateUniqueIdForUser());\r\n                connection.emuc.addConfigRoleToPresence(config.role);\r\n                connection.addHandler(_onmessage, null, 'message', null, null, null);\r\n                connection.addHandler(_onMute, 'http://jitsi.org/jitmeet/audio', 'iq', 'set', null, null);\r\n                connection.addHandler(_onVideoBeSet, 'http://jitsi.org/jitmeet/video', 'iq', 'set', null, null);\r\n                // add feature list\r\n                initFeaturesList();\r\n                var pres = $pres();\r\n                // console.info('send pres : ', pres.tree());\r\n                // connection.send(pres);\r\n                window.self = {\r\n                    nickname: config.nickname ? config.nickname : manisConfg.mUserName,\r\n                    jid: connection.jid,\r\n                    resource: Strophe.getResourceFromJid(connection.jid),\r\n                };\r\n                _successCallback({\r\n                    code: ManisResponse.code_200,\r\n                    msg: ManisResponse.connect_server_success,\r\n                    response: {call_id: connection.jid},\r\n                    errorCode: ErrorCode.no_error\r\n                });\r\n            }\r\n        },\r\n        function (error) {\r\n            _errorCallback({\r\n                code: ManisResponse.code_500,\r\n                msg: ManisResponse.sign_failed,\r\n                errorCode: ErrorCode.message_server_connect_failed\r\n            });\r\n        }\r\n    );\r\n}\r\n\r\n\r\nfunction sendPrivateMessage(message, participant, nickname, successCallback, msgType, xms, childNodeType) {\r\n    if (msgType == undefined) {\r\n        msgType = 'chat';\r\n    }\r\n    if (xms == undefined) {\r\n        xms = 'http://jabber.org/protocol/nick';\r\n    }\r\n    if (childNodeType == undefined) {\r\n        childNodeType = 'nick';\r\n    }\r\n    var msg = $msg({to: participant.jid, type: msgType});\r\n    msg.c('body', message).up();\r\n    if (nickname) {\r\n        msg.c(childNodeType, {xmlns: xms}).t(nickname).up();\r\n    }\r\n    // msg.up();\r\n    console.warn('private msg ', msg.tree());\r\n    window.connection.send(msg);\r\n    successCallback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.message_send_complete\r\n    });\r\n};\r\n\r\nfunction sendGetInitAnnotationMsg(receiver, urlData, callback) {\r\n    this.sendAnnotationMsg(\"message\", JSON.stringify(urlData), receiver, callback)\r\n}\r\n\r\nfunction sendAnnotationMsg(msgAction, msgData, msgReceiver, callback) {\r\n    var msg = $msg({to: msgReceiver, type: \"groupchat\"});\r\n    var xms = \"http://igniterealtime.org/protocol/annotate\";\r\n    msg.c(\"annotate\", {xmlns: xms, action: msgAction, url: msgData}).up();\r\n    window.connection.send(msg);\r\n    callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.message_send_complete,\r\n        errorCode: ErrorCode.no_error\r\n    });\r\n}\r\n\r\n\r\nfunction ringUp(participant, roomNumber, successCallback, errorCallback, type, password) {\r\n    try {\r\n        var timestamp = (new Date()).valueOf();\r\n        var receiver = (participant.indexOf('@') > -1) ? participant : (participant + '@' + manisConfg.messageServer);\r\n        var msg = $msg({to: receiver, type: 'chat', from: window.connection.jid});\r\n        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n        msg.c('call', {\r\n            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n            type: 'invite',\r\n            roomID: roomNumber,\r\n            resource: roomNumber + '@conference.' + manisConfg.messageServer,\r\n            nickname: self.nickname,\r\n            callType: type,\r\n            meetPassword: password,\r\n            createTime: timestamp\r\n        }).up();\r\n        console.info('1111111111111111111 send ring up', msg.tree());\r\n        window.connection.send(msg);\r\n        successCallback({\r\n            code: ManisResponse.code_200,\r\n            msg: ManisResponse.send_inviste_success,\r\n            errorCode: ErrorCode.no_error\r\n        });\r\n    } catch (e) {\r\n        errorCallback({\r\n            code: ManisResponse.code_400,\r\n            msg: ManisResponse.send_inviste_failed,\r\n            errorCode: ErrorCode.invoke_send_failed\r\n        });\r\n    }\r\n};\r\n\r\nfunction sendInviteAccept(jid, roomNumber, nickname) {\r\n    try {\r\n        var msg = $msg({to: jid, type: 'chat', from: window.connection.jid});\r\n        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n        msg.c('call', {\r\n            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n            type: 'accept',\r\n            roomID: roomNumber,\r\n            resource: roomNumber + '@conference.' + manisConfg.messageServer,\r\n            nickname: nickname\r\n        }).up();\r\n        console.info('33333333333333333333333 accept ring up ', msg.tree());\r\n        window.connection.send(msg);\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n};\r\n\r\nfunction sendInviteReject(jid, roomNumber, nickname) {\r\n    try {\r\n        var msg = $msg({to: jid, type: 'chat', from: window.connection.jid});\r\n        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n        msg.c('call', {\r\n            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n            type: 'reject',\r\n            roomID: roomNumber,\r\n            resource: roomNumber + '@conference.' + manisConfg.messageServer,\r\n            nickname: nickname,\r\n            isCaller: '0',\r\n        }).up();\r\n        console.info('4444444444444444444444 reject ring up ', msg.tree());\r\n        window.connection.send(msg);\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n};\r\n\r\nfunction sendInviteBusy(jid, roomNumber, nickname) {\r\n    try {\r\n        var msg = $msg({to: jid, type: 'chat', from: window.connection.jid});\r\n        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n        msg.c('call', {\r\n            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n            type: 'busy',\r\n            roomID: roomNumber,\r\n            resource: roomNumber + '@conference.' + manisConfg.messageServer,\r\n            nickname: nickname\r\n        }).up();\r\n        console.info('77777777777777777 replay ring up busy ', msg.tree());\r\n        window.connection.send(msg);\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @param receiver\r\n * @param roomNumber\r\n * @param roomPassword\r\n * @param nickname\r\n * @returns {boolean}\r\n */\r\nfunction sendJoinAfterRingCallAccept(receiver, roomNumber, roomPassword, nickname) {\r\n    try {\r\n        var msg = $msg({to: receiver, type: 'chat', from: window.connection.jid});\r\n        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n        msg.c('call', {\r\n            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n            type: 'join',\r\n            roomID: roomNumber,\r\n            resource: roomNumber + '@conference.' + manisConfg.messageServer,\r\n            nickname: nickname,\r\n            meetPassword: roomPassword,\r\n        }).up();\r\n        console.info('8888888888888888888 send join after create room ', msg.tree());\r\n        window.connection.send(msg);\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n};\r\n\r\n/**\r\n *\r\n * @param receiver\r\n * @returns {boolean}\r\n */\r\nfunction sendRingCallProcessedMsg(receiver) {\r\n    try {\r\n        var msg = $msg({to: receiver, type: 'chat', from: window.connection.jid});\r\n        msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/ringing'}).up();\r\n        msg.c('call', {\r\n            xmlns: 'http://igniterealtime.org/protocol/ringing',\r\n            type: 'processed',\r\n        }).up();\r\n        console.info('yyyyyyyyyyyyyyyyyyyyyyyy send ring call has been processed ', msg.tree());\r\n        window.connection.send(msg);\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n};\r\n\r\n/**\r\n * 发送呼叫视频终端的消息\r\n * @param gateway\r\n * @param sip\r\n * @param successCallback\r\n * @param errorCallback\r\n * @param sipRecordRule\r\n * @param recorderUserId\r\n * @param roomPassword\r\n */\r\nfunction callSip(gateway, sip, successCallback, errorCallback, sipRecordRule, recorderUserId, roomPassword) {\r\n    // try {\r\n    var iq = $iq({to: gateway, from: window.connection.jid, type: 'set'});\r\n    var dial = iq.c('dial', {xmlns: 'urn:xmpp:rayo:1', to: sip, from: connection.emuc.roomjid});\r\n    dial.c('header', {\r\n        name: 'JvbRoomName',\r\n        value: window.connection.emuc.roomjid\r\n    }).up().c('header', {\r\n        name: 'JvbRoomPassword',\r\n        value: roomPassword\r\n    }).up().c('header', {\r\n        name: 'JvbRoomInfo',\r\n        value: window.config.title\r\n    }).up();\r\n    if (sipRecordRule) {\r\n        dial.c('header', {\r\n            name: 'JvbRoomRecorder',\r\n            value: sipRecordRule\r\n        }).up();\r\n        dial.c('header', {\r\n            name: 'JvbUserNum',\r\n            value: recorderUserId\r\n        }).up();\r\n    }\r\n    dial = dial.up();\r\n    console.log('send call sip iq : ', iq.tree());\r\n    window.connection.sendIQ(iq, function (success) {\r\n        var ref = $(success).find('ref[xmlns=\"urn:xmpp:rayo:1\"]').attr('uri');\r\n        if (ref == 200) {\r\n            successCallback({\r\n                code: ManisResponse.code_200,\r\n                msg: ManisResponse.call_sip_success,\r\n                errorCode: ErrorCode.no_error\r\n            });\r\n        } else if (ref == 201) {\r\n            var recorder = $(success).find('header[name=\"recordResult\"]') || null;\r\n            if (recorder) {\r\n                var recorderValue = recorder.attr('value') || null;\r\n                if (recorderValue) {\r\n                    successCallback({\r\n                        code: ManisResponse.code_200,\r\n                        msg: ManisResponse.call_sip_success,\r\n                        errorCode: ErrorCode.no_error\r\n                    })\r\n                }\r\n            }\r\n        } else if (ref == 400) {\r\n            errorCallback({\r\n                code: ManisResponse.code_422,\r\n                msg: ManisResponse.call_sip_aready_in,\r\n                errorCode: ErrorCode.sip_call_in_progress\r\n            });\r\n        } else if (ref == 401) {\r\n            errorCallback({\r\n                code: ManisResponse.code_400,\r\n                msg: ManisResponse.call_sip_failed,\r\n                errorCode: ErrorCode.sip_call_failed_error_password\r\n            });\r\n        } else if (ref == 413) {\r\n            errorCallback({\r\n                code: ManisResponse.code_400,\r\n                msg: ManisResponse.call_sip_failed,\r\n                errorCode: ErrorCode.sip_call_signalling_error\r\n            });\r\n        } else if (ref == 488) {\r\n            errorCallback({\r\n                code: ManisResponse.code_400,\r\n                msg: ManisResponse.call_sip_failed,\r\n                errorCode: ErrorCode.sip_call_hang_up\r\n            });\r\n        } else {\r\n            errorCallback({\r\n                code: ManisResponse.code_400,\r\n                msg: ManisResponse.call_sip_failed,\r\n                errorCode: ErrorCode.sip_call_unknown_error\r\n            });\r\n        }\r\n    }, function (error) {\r\n        errorCallback({\r\n            code: ManisResponse.code_400,\r\n            msg: ManisResponse.call_sip_failed,\r\n            errorCode: ErrorCode.sip_call_send_failed\r\n        });\r\n    });\r\n    // } catch (e) {\r\n    //   errorCallback({\r\n    //     code: ManisResponse.code_400,\r\n    //     msg: ManisResponse.call_sip_failed\r\n    //   });\r\n    // }\r\n};\r\n\r\n\r\nfunction cancelCallSip(gateway, sip, successCallback, errorCallback) {\r\n    var iq = $iq({to: gateway, from: window.connection.jid, type: 'set'});\r\n    var hungUp = iq.c('hangup', {xmlns: 'urn:xmpp:rayo:1'});\r\n    hungUp.c('header', {\r\n        name: 'JvbRoomName',\r\n        value: window.connection.emuc.roomjid\r\n    }).up().c('header', {\r\n        name: 'JvbHandUpName',\r\n        value: sip\r\n    }).up();\r\n    // hungUp.up();\r\n    console.log('send cancel sip call iq : ', iq.tree());\r\n    window.connection.sendIQ(iq, function (res) {\r\n        console.log('cancel sip call success: ', res);\r\n        successCallback({\r\n            code: ManisResponse.code_200,\r\n            msg: ManisResponse.cancel_call_sip_success,\r\n            errorCode: ErrorCode.no_error\r\n        })\r\n    }, function (err) {\r\n        console.error('cancel sip  call failed: ', err);\r\n        errorCallback({\r\n            code: ManisResponse.code_400,\r\n            msg: ManisResponse.cancel_call_sip_failed,\r\n            errorCode: ErrorCode.sip_call_send_failed\r\n        })\r\n    });\r\n}\r\n\r\nfunction _onmessage(msg) {\r\n    // console.log('------------------------------------'+msg.outerHTML);\r\n    var from = msg.getAttribute('from');\r\n    var call = $(msg).find('>call[xmlns=\"http://igniterealtime.org/protocol/ringing\"]');\r\n\r\n    var screen = $(msg).find('>screen[xmlns=\"http://jitsi.org/protocol/screen\"]');\r\n    if (screen.length) {\r\n        var screenStatus = $(msg).find('property').attr('value');\r\n        console.log('sssssssssssssssssssssss1111111111111', screenStatus);\r\n        // $(document).trigger('manis.been.stop.screen.share');\r\n        return true;\r\n    }\r\n\r\n    var handsUp = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/handsUp\"]');\r\n    if (handsUp.length) {\r\n        console.log(' handle hands up msg : ', msg, handsUp);\r\n        var handsUpType = handsUp[0].getAttribute('type') || '';\r\n        var handsUpNickname = handsUp[0].getAttribute('nickname') || '';\r\n        var handsUpFrom = handsUp.text() || '';\r\n        if (handsUpType == 'apply') {\r\n            $(document).trigger('manis.on.hands.up.msg', [handsUpFrom, handsUpNickname, handsUpType]);\r\n        } else if (handsUpType == 'agree' || handsUpType == 'refuse') {\r\n            $(document).trigger('manis.on.hands.up.response', [handsUpFrom, handsUpType]);\r\n        } else {\r\n            console.error('unknown hands up msg', handsUpFrom, handsUpType, handsUpNickname);\r\n        }\r\n        return true;\r\n    }\r\n\r\n    var changeNickname = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/changeNickname\"]');\r\n    if (changeNickname.length) {\r\n        var newNickname = changeNickname.text();\r\n        console.log('moderator order me change my nickname to : ', newNickname);\r\n        connection.emuc.addDisplayNameToPresence(newNickname);\r\n        connection.emuc.sendPresence();\r\n        return true;\r\n    }\r\n\r\n    if (call != undefined && call.length > 0) {\r\n        var type = call[0].getAttribute('type');\r\n        if (type == 'invite') {\r\n            var room = call[0].getAttribute('roomID');\r\n            var nick = call[0].getAttribute('nickname');\r\n            var password = call[0].getAttribute('meetPassword');\r\n            var delay = $(msg).find('>delay[xmlns=\"urn:xmpp:delay\"]');\r\n            var callType = call[0].getAttribute('callType') || '0';\r\n            console.info('22222222222222222222222 on ring up', msg);\r\n            if (delay.length) {\r\n                return;\r\n            } else {\r\n                $(document).trigger('oninvite.muc', [from, nick, room, password, callType]);\r\n            }\r\n        } else if (type == 'accept') {\r\n            var room = call[0].getAttribute('roomID');\r\n            var nick = call[0].getAttribute('nickname');\r\n            console.info('5555555555555555555555 on ring up accept ', msg);\r\n            $(document).trigger('manis.onringup.reply', [from, nick, room, 'accept']);\r\n        } else if (type == 'reject') {\r\n            var room = call[0].getAttribute('roomID');\r\n            var nick = call[0].getAttribute('nickname');\r\n            console.info('666666666666666666666 on ring up reject ', msg);\r\n            var isCaller = call[0].getAttribute('isCaller') || '0';\r\n            if (isCaller == '1') {\r\n                // call cancel by caller\r\n                window.incomingCall = false;\r\n                $(document).trigger('manis.onringup.reply', [from, nick, room, 'cancel']);\r\n            } else {\r\n                // call reject by receiver\r\n                $(document).trigger('manis.onringup.reply', [from, nick, room, 'reject']);\r\n            }\r\n        } else if (type == 'busy') {\r\n            var room = call[0].getAttribute('roomID');\r\n            var nick = call[0].getAttribute('nickname');\r\n            console.info('999999999999999999999 on ring up busy ', msg);\r\n            $(document).trigger('manis.onringup.reply', [from, nick, room, 'busy']);\r\n        } else if (type == 'join') {\r\n            var room = call[0].getAttribute('roomID');\r\n            var password = call[0].getAttribute('meetPassword');\r\n            console.log('zzzzzzzzzzzzzzzzzzzz on room complete ', msg);\r\n            $(document).trigger('oninvite.room.complete.after.accept.request', [room, password]);\r\n        } else if (type == 'processed') {\r\n            console.log('xxxxxxxxxxxxxxxxxxxxxx on ring call was processed ', msg);\r\n            $(document).trigger('oninvite.room.processed');\r\n        }\r\n    }\r\n    var msgType = msg.getAttribute('type');\r\n    if (msgType && msgType.length && msgType == 'chat') {\r\n        var txt = $(msg).find('>body').text();\r\n        var resolutionMsg = $(msg).find('>resolution[xmlns=\"http://jabber.org/protocol/resolution\"]');\r\n        if (resolutionMsg.length) {\r\n            var resolutionOperate = resolutionMsg.text();\r\n            var targetResolution = txt;\r\n            // console.log(from, 'order me ', resolutionOperate, 'to ', targetResolution);\r\n            if (resolutionOperate == 'orderChangeResolution') {\r\n                $(document).trigger('manis.on.change.resolution.request', [from, targetResolution]);\r\n                return true;\r\n            }\r\n            return true;\r\n        }\r\n        var nick = $(msg).find('>nick[xmlns=\"http://jabber.org/protocol/nick\"]').text();\r\n        var privateMsg = true;\r\n        if (txt && nick) {\r\n            $(document).trigger('onmessage.muc', [from, nick, txt, privateMsg, 'yourself']);\r\n        }\r\n    }\r\n    var grantAdmin = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/grantAdmin\"]');\r\n    if (grantAdmin.length) {\r\n        onGrantAdmin(msg);\r\n    }\r\n    var ejectUser = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/eject\"]');\r\n    if (ejectUser.length) {\r\n        onEject(msg);\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction _onMute(iq) {\r\n    // console.log('=============== on audio set iq', iq);\r\n    var from = iq.getAttribute('from');\r\n    // if (from !== window.focusJid) {\r\n    //   // console.warn(\"Ignored mute from non focus peer\");\r\n    //   return false;\r\n    // }\r\n    var mute = $(iq).find('mute');\r\n    if (mute.length) {\r\n        var doMuteAudio = mute.text() === \"true\";\r\n        ManisFunctions.setAudioMute(doMuteAudio);\r\n        window.forceMuted = doMuteAudio;\r\n        $(document).trigger('onmute.audio.muc', doMuteAudio);\r\n    }\r\n    return true;\r\n}\r\n\r\n\r\nfunction _onVideoBeSet(iq) {\r\n    // console.log('=============== on video set iq', iq);\r\n    var from = iq.getAttribute('from');\r\n    // if (from !== window.focusJid) {\r\n    //   // console.warn(\"Ignored mute from non focus peer\");\r\n    //   return false;\r\n    // }\r\n    var to = iq.getAttribute('to');\r\n    var mute = $(iq).find('mute');\r\n    if (mute.length) {\r\n        var doMuteVideo = mute.text() === \"true\";\r\n\r\n        ManisFunctions.setVideoMute(doMuteVideo);\r\n        window.forceSetVideo = doMuteVideo;\r\n        $(document).trigger('onmute.video.muc', doMuteVideo);\r\n    }\r\n    return true;\r\n}\r\n\r\n\r\nfunction onEject(msg) {\r\n    var to = msg.getAttribute('to');\r\n    var from = msg.getAttribute('from')\r\n    var local = Strophe.getResourceFromJid(connection.jid);\r\n    var obj = $(msg).find('body');\r\n    if (Strophe.getResourceFromJid(obj.attr('jid')) == local) {\r\n        if (obj.text() == \"true\") {\r\n            sessionTerminated = true;\r\n            // if share screen, stop it first\r\n            if (window.isUsingScreenStream == true) {\r\n                $(document).trigger('manis.been.stop.screen.share');\r\n            }\r\n            Status.disposeConference(false);\r\n            // console.log('11111111111133333333333=======handleEjectFrom============', from)\r\n            if(from.indexOf('admin') > -1) {\r\n                window.exitCode = 1007\r\n            }else {\r\n                window.exitCode = 1008\r\n            }\r\n            connection.emuc.doLeave();\r\n            $(document).trigger('oneject.muc', [from]);\r\n        }\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction onGrantAdmin(msg) {\r\n    var to = msg.getAttribute('to');\r\n    var local = Strophe.getResourceFromJid(connection.emuc.connection.jid);\r\n    var obj = $(msg).find('body');\r\n    if (Strophe.getResourceFromJid(obj.attr('jid')) == local) {\r\n        if (obj.text() == \"true\") {\r\n            ManisFunctions.setAdmin(true);\r\n            connection.emuc.addConfigRoleToPresence(config.role);\r\n            connection.emuc.addIsModeratorToPresence(ManisFunctions.isAdmin());\r\n            connection.emuc.sendPresence();\r\n            // trigger on grant admin event\r\n            // update myself 'is_moderator' status\r\n            for (var i = 0; i < window.participants.length; i++) {\r\n                var pt = window.participants[i];\r\n                if (pt.jid == connection.jid) {\r\n                    pt.is_moderator = ManisFunctions.isAdmin();\r\n                    window.participants[i] = pt;\r\n                }\r\n            }\r\n            // @NOTICE trigger will trig on management msg\r\n            // $(document).trigger('manis.on.grant.admin');\r\n        }\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * 生成用户唯一标识\r\n * @returns {*}\r\n */\r\nfunction generateUniqueIdForUser() {\r\n    if (ManisFunctions.supportsLocalStorage()) {\r\n        if (!window.localStorage.getItem('manisMeetId')) {\r\n            var userUniqueId = ManisFunctions.generateUniqueId();\r\n            window.localStorage.setItem('manisMeetId', userUniqueId);\r\n            return userUniqueId;\r\n        }\r\n        return window.localStorage.getItem('manisMeetId');\r\n    } else {\r\n        return ManisFunctions.generateUniqueId();\r\n    }\r\n}\r\n\r\n/**\r\n * 告诉服务器应用程序支持音视频能力\r\n */\r\nfunction initFeaturesList() {\r\n    const disco = this.connection.disco;\r\n    if (!disco) {\r\n        return;\r\n    }\r\n    disco.addFeature('urn:xmpp:jingle:1');\r\n    disco.addFeature('urn:xmpp:jingle:apps:rtp:1');\r\n    disco.addFeature('urn:xmpp:jingle:transports:ice-udp:1');\r\n    disco.addFeature('urn:xmpp:jingle:apps:rtp:audio');\r\n    disco.addFeature('urn:xmpp:jingle:apps:rtp:video');\r\n\r\n    disco.addFeature('urn:ietf:rfc:5761');\r\n    disco.addFeature('urn:ietf:rfc:5888');\r\n}\r\n\r\n\r\n/**\r\n * 登录系统\r\n *\r\n * @param _username\r\n * @param _password\r\n * @param nickname\r\n * @param _successCallback\r\n * @param _errorCallback\r\n * @param _server\r\n * @param _domain\r\n * @param _connectSocket\r\n */\r\nfunction signInMeetingCtl(_username, _password, nickname, _successCallback, _errorCallback, _server, _domain, _connectSocket) {\r\n    // try {\r\n    $.ajax({\r\n        url: _server,\r\n        dataType: 'json',\r\n        data: {\r\n            username: _username,\r\n            password: ManisFunctions.encryptStr(_password),\r\n            domain: _domain,\r\n            clientType: window.clientTypeCode,\r\n            remark: navigator.userAgent,\r\n            ticket: window.config.ticket,\r\n            verifyCode: window.config.verifyCode\r\n        },\r\n        type: 'GET',\r\n        timeout: 2000,\r\n        success: function (res) {\r\n            if (res.code == 200) {\r\n                console.info('sign in manis meeting system control center success: ', res);\r\n                window.manisConfg = res.obj;\r\n                if (!manisConfg.messageServer) {\r\n                    _errorCallback({\r\n                        code: ManisResponse.code_401,\r\n                        msg: ManisResponse.mesage_server_except,\r\n                        errorCode: ErrorCode.message_server_except\r\n                    });\r\n                    return false;\r\n                }\r\n                if (manisConfg.turn && manisConfg.turn.iceServers[0].url) {\r\n                    config.nat = manisConfg.turn.iceServers[0].url\r\n                }\r\n                if (manisConfg.messageServer) {\r\n                    config.focusUserJid = 'focus@' + manisConfg.messageServer;\r\n                }\r\n                if (window.connectType == 'p2p') {\r\n                    var username = manisConfg.mUserId.toLowerCase() + '@' + manisConfg.messageServer;\r\n                    var password = manisConfg.token;\r\n                    var nickname = nickname ? nickname : manisConfg.mUserName;\r\n                    P2P.connect(username, password, nickname, _successCallback, _errorCallback)\r\n                } else {\r\n                    var _config = Object.assign(window.config, window.manisConfg);\r\n                    window.config = _config;\r\n                    if (_connectSocket) {\r\n                        signInXMPP(_successCallback, _errorCallback, nickname ? nickname : manisConfg.mUserName);\r\n                    } else {\r\n                        _successCallback({\r\n                            code: ManisResponse.code_200,\r\n                            msg: ManisResponse.sign_success,\r\n                            response: window.config,\r\n                            errorCode: ErrorCode.no_error\r\n                        });\r\n                    }\r\n                }\r\n            } else if (res.mcode == 601) {\r\n                _errorCallback({\r\n                    code: ManisResponse.code_401,\r\n                    msg: ManisResponse.sign_username_password_error,\r\n                    errorCode: ErrorCode.user_client_auth_failed\r\n                });\r\n            } else if (res.mcode == 602 || res.mcode == 603) {\r\n                _errorCallback({\r\n                    code: res.mcode,\r\n                    msg: ManisResponse.sign_failed,\r\n                    errorCode: ErrorCode.user_has_been_block_up\r\n                });\r\n            } else if (res.mcode == 801) {\r\n                _errorCallback({\r\n                    code: res.mcode,\r\n                    msg: ManisResponse.sign_failed,\r\n                    errorCode: ErrorCode.user_out_of_service\r\n                });\r\n            }else {\r\n                _errorCallback({\r\n                    code: ManisResponse.code_500,\r\n                    msg: ManisResponse.sign_failed,\r\n                    errorCode: res.code\r\n                });\r\n            }\r\n        },\r\n        error: function (xOptions, textStatus) {\r\n            console.error('xOptions : ', xOptions, 'textStatus : ', textStatus, 'error status : ', xOptions.status);\r\n            _errorCallback({\r\n                code: ManisResponse.code_500,\r\n                msg: ManisResponse.sign_failed,\r\n                errorCode: ErrorCode.api_fetch_failed\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\n\r\nfunction signInMeetingCtlByAnonymous(_server, _nickName, _successCallback, _errorCallback) {\r\n    var connection = window.connection || undefined;\r\n    if(connection && connection._ws.readyState == 1){\r\n        if (_nickName) {\r\n            config.nickname = _nickName;\r\n            connection.emuc.addDisplayNameToPresence(_nickName);\r\n        }\r\n        _successCallback({\r\n            code: ManisResponse.code_200,\r\n            msg: ManisResponse.connect_server_success,\r\n            response: {call_id: connection.jid},\r\n            errorCode: ErrorCode.no_error\r\n        });\r\n        return;\r\n    }\r\n    // try {\r\n    $.ajax({\r\n        url: _server,\r\n        dataType: 'json',\r\n        data: {\r\n            nickname: _nickName,\r\n            clientType: window.clientTypeCode,\r\n            remark: navigator.userAgent\r\n        },\r\n        // type: 'GET',\r\n        // async: true,\r\n        timeout: 2000,\r\n        success: function (response) {\r\n            // if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n            if (response.code == 200) {\r\n                // console.log('login client anonymous success.', response.obj);\r\n                window.manisConfg = response.obj;\r\n                if (manisConfg.turn && manisConfg.turn.iceServers[0].url) {\r\n                    config.nat = manisConfg.turn.iceServers[0].url\r\n                }\r\n                if (manisConfg.messageServer) {\r\n                    config.focusUserJid = 'focus@' + manisConfg.messageServer;\r\n                }\r\n                var _config = Object.assign(window.config, window.manisConfg);\r\n                window.config = _config;\r\n                signInXMPP(_successCallback, _errorCallback, _nickName);\r\n            } else {\r\n                // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n                _errorCallback({\r\n                    code: ManisResponse.code_403,\r\n                    msg: ManisResponse.out_of_source_limit,\r\n                    errorCode: ErrorCode.anonymous_login_failed\r\n                });\r\n            }\r\n            // } else {\r\n            //   // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n            //   _errorCallback({\r\n            //     code: ManisResponse.code_500,\r\n            //     msg: ManisResponse.join_room_failed\r\n            //   });\r\n            // }\r\n        },\r\n        error: function (xOptions, textStatus) {\r\n            // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n            _errorCallback({\r\n                code: ManisResponse.code_500,\r\n                msg: ManisResponse.join_room_failed,\r\n                errorCode: ErrorCode.api_fetch_failed\r\n            });\r\n        }\r\n    });\r\n    // } catch (e) {\r\n    //   // console.error('xhr request failure with error : ', e);\r\n    //   _errorCallback({\r\n    //     code: ManisResponse.code_500,\r\n    //     msg: ManisResponse.join_room_failed\r\n    //   });\r\n    // }\r\n};\r\n\r\n\r\nfunction getMyFriends(callback) {\r\n    var _header = ManisFunctions.authoredHeader();\r\n    $.ajax({\r\n        url: window.serverPath + getFriendsPath + manisConfg.mUserId,\r\n        headers: _header,\r\n        // dataType: 'jsonp',\r\n        dataType: 'json',\r\n        timeout: 2000,\r\n        success: function (result) {\r\n            // console.log('get my friends result : ', result);\r\n            callback({\r\n                code: ManisResponse.code_200,\r\n                msg: ManisResponse.get_my_friends_list,\r\n                response: result.obj,\r\n                errorCode: ErrorCode.no_error\r\n            })\r\n        },\r\n        error: function (xOptions, textStatus) {\r\n            callback({\r\n                code: textStatus,\r\n                msg: ManisResponse.network_error,\r\n                errorCode: ErrorCode.user_friends_fetch_failed\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\n\r\nmodule.exports = {\r\n    signInMeetingCtlByAnonymous: signInMeetingCtlByAnonymous,\r\n    signInMeetingCtl: signInMeetingCtl,\r\n    callSip: callSip,\r\n    cancelCallSip: cancelCallSip,\r\n    sendInviteReject: sendInviteReject,\r\n    sendInviteAccept: sendInviteAccept,\r\n    sendInviteBusy: sendInviteBusy,\r\n    ringUp: ringUp,\r\n    sendJoinAfterRingCallAccept: sendJoinAfterRingCallAccept,\r\n    sendRingCallProcessedMsg: sendRingCallProcessedMsg,\r\n    sendPrivateMessage: sendPrivateMessage,\r\n    myFriends: getMyFriends,\r\n    sendGetInitAnnotationMsg: sendGetInitAnnotationMsg,\r\n    sendAnnotationMsg: sendAnnotationMsg,\r\n    signInXMPP: signInXMPP\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/manis.sign.js\n// module id = 2\n// module chunks = 0","/** File: strophe.js\n *  A JavaScript library for XMPP BOSH/XMPP over Websocket.\n *\n *  This is the JavaScript version of the Strophe library.  Since JavaScript\n *  had no facilities for persistent TCP connections, this library uses\n *  Bidirectional-streams Over Synchronous HTTP (BOSH) to emulate\n *  a persistent, stateful, two-way connection to an XMPP server.  More\n *  information on BOSH can be found in XEP 124.\n *\n *  This version of Strophe also works with WebSockets.\n *  For more information on XMPP-over WebSocket see this RFC:\n *  http://tools.ietf.org/html/rfc7395\n */\n\n/* All of the Strophe globals are defined in this special function below so\n * that references to the globals become closures.  This will ensure that\n * on page reload, these references will still be available to callbacks\n * that are still executing.\n */\n\n/* jshint ignore:start */\n(function (callback) {\n/* jshint ignore:end */\n\n// This code was written by Tyler Akins and has been placed in the\n// public domain.  It would be nice if you left this header intact.\n// Base64 code from Tyler Akins -- http://rumkin.com\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-base64', function () {\n            return factory();\n        });\n    } else {\n        // Browser globals\n        root.Base64 = factory();\n    }\n}(this, function () {\n    var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n    var obj = {\n        /**\n         * Encodes a string in base64\n         * @param {String} input The string to encode in base64.\n         */\n        encode: function (input) {\n            var output = \"\";\n            var chr1, chr2, chr3;\n            var enc1, enc2, enc3, enc4;\n            var i = 0;\n\n            do {\n                chr1 = input.charCodeAt(i++);\n                chr2 = input.charCodeAt(i++);\n                chr3 = input.charCodeAt(i++);\n\n                enc1 = chr1 >> 2;\n                enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n                enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n                enc4 = chr3 & 63;\n\n                if (isNaN(chr2)) {\n                    enc2 = ((chr1 & 3) << 4);\n                    enc3 = enc4 = 64;\n                } else if (isNaN(chr3)) {\n                    enc4 = 64;\n                }\n\n                output = output + keyStr.charAt(enc1) + keyStr.charAt(enc2) +\n                    keyStr.charAt(enc3) + keyStr.charAt(enc4);\n            } while (i < input.length);\n\n            return output;\n        },\n\n        /**\n         * Decodes a base64 string.\n         * @param {String} input The string to decode.\n         */\n        decode: function (input) {\n            var output = \"\";\n            var chr1, chr2, chr3;\n            var enc1, enc2, enc3, enc4;\n            var i = 0;\n\n            // remove all characters that are not A-Z, a-z, 0-9, +, /, or =\n            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n            do {\n                enc1 = keyStr.indexOf(input.charAt(i++));\n                enc2 = keyStr.indexOf(input.charAt(i++));\n                enc3 = keyStr.indexOf(input.charAt(i++));\n                enc4 = keyStr.indexOf(input.charAt(i++));\n\n                chr1 = (enc1 << 2) | (enc2 >> 4);\n                chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n                chr3 = ((enc3 & 3) << 6) | enc4;\n\n                output = output + String.fromCharCode(chr1);\n\n                if (enc3 != 64) {\n                    output = output + String.fromCharCode(chr2);\n                }\n                if (enc4 != 64) {\n                    output = output + String.fromCharCode(chr3);\n                }\n            } while (i < input.length);\n\n            return output;\n        }\n    };\n    return obj;\n}));\n\n/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/* global define */\n\n/* Some functions and variables have been stripped for use with Strophe */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-sha1', function () {\n            return factory();\n        });\n    } else {\n        // Browser globals\n        root.SHA1 = factory();\n    }\n}(this, function () {\n\n/*\n * Calculate the SHA-1 of an array of big-endian words, and a bit length\n */\nfunction core_sha1(x, len)\n{\n  /* append padding */\n  x[len >> 5] |= 0x80 << (24 - len % 32);\n  x[((len + 64 >> 9) << 4) + 15] = len;\n\n  var w = new Array(80);\n  var a =  1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d =  271733878;\n  var e = -1009589776;\n\n  var i, j, t, olda, oldb, oldc, oldd, olde;\n  for (i = 0; i < x.length; i += 16)\n  {\n    olda = a;\n    oldb = b;\n    oldc = c;\n    oldd = d;\n    olde = e;\n\n    for (j = 0; j < 80; j++)\n    {\n      if (j < 16) { w[j] = x[i + j]; }\n      else { w[j] = rol(w[j-3] ^ w[j-8] ^ w[j-14] ^ w[j-16], 1); }\n      t = safe_add(safe_add(rol(a, 5), sha1_ft(j, b, c, d)),\n                       safe_add(safe_add(e, w[j]), sha1_kt(j)));\n      e = d;\n      d = c;\n      c = rol(b, 30);\n      b = a;\n      a = t;\n    }\n\n    a = safe_add(a, olda);\n    b = safe_add(b, oldb);\n    c = safe_add(c, oldc);\n    d = safe_add(d, oldd);\n    e = safe_add(e, olde);\n  }\n  return [a, b, c, d, e];\n}\n\n/*\n * Perform the appropriate triplet combination function for the current\n * iteration\n */\nfunction sha1_ft(t, b, c, d)\n{\n  if (t < 20) { return (b & c) | ((~b) & d); }\n  if (t < 40) { return b ^ c ^ d; }\n  if (t < 60) { return (b & c) | (b & d) | (c & d); }\n  return b ^ c ^ d;\n}\n\n/*\n * Determine the appropriate additive constant for the current iteration\n */\nfunction sha1_kt(t)\n{\n  return (t < 20) ?  1518500249 : (t < 40) ?  1859775393 :\n         (t < 60) ? -1894007588 : -899497514;\n}\n\n/*\n * Calculate the HMAC-SHA1 of a key and some data\n */\nfunction core_hmac_sha1(key, data)\n{\n  var bkey = str2binb(key);\n  if (bkey.length > 16) { bkey = core_sha1(bkey, key.length * 8); }\n\n  var ipad = new Array(16), opad = new Array(16);\n  for (var i = 0; i < 16; i++)\n  {\n    ipad[i] = bkey[i] ^ 0x36363636;\n    opad[i] = bkey[i] ^ 0x5C5C5C5C;\n  }\n\n  var hash = core_sha1(ipad.concat(str2binb(data)), 512 + data.length * 8);\n  return core_sha1(opad.concat(hash), 512 + 160);\n}\n\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\nfunction safe_add(x, y)\n{\n  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return (msw << 16) | (lsw & 0xFFFF);\n}\n\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\nfunction rol(num, cnt)\n{\n  return (num << cnt) | (num >>> (32 - cnt));\n}\n\n/*\n * Convert an 8-bit or 16-bit string to an array of big-endian words\n * In 8-bit function, characters >255 have their hi-byte silently ignored.\n */\nfunction str2binb(str)\n{\n  var bin = [];\n  var mask = 255;\n  for (var i = 0; i < str.length * 8; i += 8)\n  {\n    bin[i>>5] |= (str.charCodeAt(i / 8) & mask) << (24 - i%32);\n  }\n  return bin;\n}\n\n/*\n * Convert an array of big-endian words to a string\n */\nfunction binb2str(bin)\n{\n  var str = \"\";\n  var mask = 255;\n  for (var i = 0; i < bin.length * 32; i += 8)\n  {\n    str += String.fromCharCode((bin[i>>5] >>> (24 - i%32)) & mask);\n  }\n  return str;\n}\n\n/*\n * Convert an array of big-endian words to a base-64 string\n */\nfunction binb2b64(binarray)\n{\n  var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  var str = \"\";\n  var triplet, j;\n  for (var i = 0; i < binarray.length * 4; i += 3)\n  {\n    triplet = (((binarray[i   >> 2] >> 8 * (3 -  i   %4)) & 0xFF) << 16) |\n              (((binarray[i+1 >> 2] >> 8 * (3 - (i+1)%4)) & 0xFF) << 8 ) |\n               ((binarray[i+2 >> 2] >> 8 * (3 - (i+2)%4)) & 0xFF);\n    for (j = 0; j < 4; j++)\n    {\n      if (i * 8 + j * 6 > binarray.length * 32) { str += \"=\"; }\n      else { str += tab.charAt((triplet >> 6*(3-j)) & 0x3F); }\n    }\n  }\n  return str;\n}\n\n/*\n * These are the functions you'll usually want to call\n * They take string arguments and return either hex or base-64 encoded strings\n */\nreturn {\n    b64_hmac_sha1:  function (key, data){ return binb2b64(core_hmac_sha1(key, data)); },\n    b64_sha1:       function (s) { return binb2b64(core_sha1(str2binb(s),s.length * 8)); },\n    binb2str:       binb2str,\n    core_hmac_sha1: core_hmac_sha1,\n    str_hmac_sha1:  function (key, data){ return binb2str(core_hmac_sha1(key, data)); },\n    str_sha1:       function (s) { return binb2str(core_sha1(str2binb(s),s.length * 8)); },\n};\n}));\n\n/*\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.1 Copyright (C) Paul Johnston 1999 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\n/*\n * Everything that isn't used by Strophe has been stripped here!\n */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-md5', function () {\n            return factory();\n        });\n    } else {\n        // Browser globals\n        root.MD5 = factory();\n    }\n}(this, function (b) {\n    /*\n     * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n     * to work around bugs in some JS interpreters.\n     */\n    var safe_add = function (x, y) {\n        var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n        var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n        return (msw << 16) | (lsw & 0xFFFF);\n    };\n\n    /*\n     * Bitwise rotate a 32-bit number to the left.\n     */\n    var bit_rol = function (num, cnt) {\n        return (num << cnt) | (num >>> (32 - cnt));\n    };\n\n    /*\n     * Convert a string to an array of little-endian words\n     */\n    var str2binl = function (str) {\n        var bin = [];\n        for(var i = 0; i < str.length * 8; i += 8)\n        {\n            bin[i>>5] |= (str.charCodeAt(i / 8) & 255) << (i%32);\n        }\n        return bin;\n    };\n\n    /*\n     * Convert an array of little-endian words to a string\n     */\n    var binl2str = function (bin) {\n        var str = \"\";\n        for(var i = 0; i < bin.length * 32; i += 8)\n        {\n            str += String.fromCharCode((bin[i>>5] >>> (i % 32)) & 255);\n        }\n        return str;\n    };\n\n    /*\n     * Convert an array of little-endian words to a hex string.\n     */\n    var binl2hex = function (binarray) {\n        var hex_tab = \"0123456789abcdef\";\n        var str = \"\";\n        for(var i = 0; i < binarray.length * 4; i++)\n        {\n            str += hex_tab.charAt((binarray[i>>2] >> ((i%4)*8+4)) & 0xF) +\n                hex_tab.charAt((binarray[i>>2] >> ((i%4)*8  )) & 0xF);\n        }\n        return str;\n    };\n\n    /*\n     * These functions implement the four basic operations the algorithm uses.\n     */\n    var md5_cmn = function (q, a, b, x, s, t) {\n        return safe_add(bit_rol(safe_add(safe_add(a, q),safe_add(x, t)), s),b);\n    };\n\n    var md5_ff = function (a, b, c, d, x, s, t) {\n        return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n    };\n\n    var md5_gg = function (a, b, c, d, x, s, t) {\n        return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n    };\n\n    var md5_hh = function (a, b, c, d, x, s, t) {\n        return md5_cmn(b ^ c ^ d, a, b, x, s, t);\n    };\n\n    var md5_ii = function (a, b, c, d, x, s, t) {\n        return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n    };\n\n    /*\n     * Calculate the MD5 of an array of little-endian words, and a bit length\n     */\n    var core_md5 = function (x, len) {\n        /* append padding */\n        x[len >> 5] |= 0x80 << ((len) % 32);\n        x[(((len + 64) >>> 9) << 4) + 14] = len;\n\n        var a =  1732584193;\n        var b = -271733879;\n        var c = -1732584194;\n        var d =  271733878;\n\n        var olda, oldb, oldc, oldd;\n        for (var i = 0; i < x.length; i += 16)\n        {\n            olda = a;\n            oldb = b;\n            oldc = c;\n            oldd = d;\n\n            a = md5_ff(a, b, c, d, x[i+ 0], 7 , -680876936);\n            d = md5_ff(d, a, b, c, x[i+ 1], 12, -389564586);\n            c = md5_ff(c, d, a, b, x[i+ 2], 17,  606105819);\n            b = md5_ff(b, c, d, a, x[i+ 3], 22, -1044525330);\n            a = md5_ff(a, b, c, d, x[i+ 4], 7 , -176418897);\n            d = md5_ff(d, a, b, c, x[i+ 5], 12,  1200080426);\n            c = md5_ff(c, d, a, b, x[i+ 6], 17, -1473231341);\n            b = md5_ff(b, c, d, a, x[i+ 7], 22, -45705983);\n            a = md5_ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);\n            d = md5_ff(d, a, b, c, x[i+ 9], 12, -1958414417);\n            c = md5_ff(c, d, a, b, x[i+10], 17, -42063);\n            b = md5_ff(b, c, d, a, x[i+11], 22, -1990404162);\n            a = md5_ff(a, b, c, d, x[i+12], 7 ,  1804603682);\n            d = md5_ff(d, a, b, c, x[i+13], 12, -40341101);\n            c = md5_ff(c, d, a, b, x[i+14], 17, -1502002290);\n            b = md5_ff(b, c, d, a, x[i+15], 22,  1236535329);\n\n            a = md5_gg(a, b, c, d, x[i+ 1], 5 , -165796510);\n            d = md5_gg(d, a, b, c, x[i+ 6], 9 , -1069501632);\n            c = md5_gg(c, d, a, b, x[i+11], 14,  643717713);\n            b = md5_gg(b, c, d, a, x[i+ 0], 20, -373897302);\n            a = md5_gg(a, b, c, d, x[i+ 5], 5 , -701558691);\n            d = md5_gg(d, a, b, c, x[i+10], 9 ,  38016083);\n            c = md5_gg(c, d, a, b, x[i+15], 14, -660478335);\n            b = md5_gg(b, c, d, a, x[i+ 4], 20, -405537848);\n            a = md5_gg(a, b, c, d, x[i+ 9], 5 ,  568446438);\n            d = md5_gg(d, a, b, c, x[i+14], 9 , -1019803690);\n            c = md5_gg(c, d, a, b, x[i+ 3], 14, -187363961);\n            b = md5_gg(b, c, d, a, x[i+ 8], 20,  1163531501);\n            a = md5_gg(a, b, c, d, x[i+13], 5 , -1444681467);\n            d = md5_gg(d, a, b, c, x[i+ 2], 9 , -51403784);\n            c = md5_gg(c, d, a, b, x[i+ 7], 14,  1735328473);\n            b = md5_gg(b, c, d, a, x[i+12], 20, -1926607734);\n\n            a = md5_hh(a, b, c, d, x[i+ 5], 4 , -378558);\n            d = md5_hh(d, a, b, c, x[i+ 8], 11, -2022574463);\n            c = md5_hh(c, d, a, b, x[i+11], 16,  1839030562);\n            b = md5_hh(b, c, d, a, x[i+14], 23, -35309556);\n            a = md5_hh(a, b, c, d, x[i+ 1], 4 , -1530992060);\n            d = md5_hh(d, a, b, c, x[i+ 4], 11,  1272893353);\n            c = md5_hh(c, d, a, b, x[i+ 7], 16, -155497632);\n            b = md5_hh(b, c, d, a, x[i+10], 23, -1094730640);\n            a = md5_hh(a, b, c, d, x[i+13], 4 ,  681279174);\n            d = md5_hh(d, a, b, c, x[i+ 0], 11, -358537222);\n            c = md5_hh(c, d, a, b, x[i+ 3], 16, -722521979);\n            b = md5_hh(b, c, d, a, x[i+ 6], 23,  76029189);\n            a = md5_hh(a, b, c, d, x[i+ 9], 4 , -640364487);\n            d = md5_hh(d, a, b, c, x[i+12], 11, -421815835);\n            c = md5_hh(c, d, a, b, x[i+15], 16,  530742520);\n            b = md5_hh(b, c, d, a, x[i+ 2], 23, -995338651);\n\n            a = md5_ii(a, b, c, d, x[i+ 0], 6 , -198630844);\n            d = md5_ii(d, a, b, c, x[i+ 7], 10,  1126891415);\n            c = md5_ii(c, d, a, b, x[i+14], 15, -1416354905);\n            b = md5_ii(b, c, d, a, x[i+ 5], 21, -57434055);\n            a = md5_ii(a, b, c, d, x[i+12], 6 ,  1700485571);\n            d = md5_ii(d, a, b, c, x[i+ 3], 10, -1894986606);\n            c = md5_ii(c, d, a, b, x[i+10], 15, -1051523);\n            b = md5_ii(b, c, d, a, x[i+ 1], 21, -2054922799);\n            a = md5_ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);\n            d = md5_ii(d, a, b, c, x[i+15], 10, -30611744);\n            c = md5_ii(c, d, a, b, x[i+ 6], 15, -1560198380);\n            b = md5_ii(b, c, d, a, x[i+13], 21,  1309151649);\n            a = md5_ii(a, b, c, d, x[i+ 4], 6 , -145523070);\n            d = md5_ii(d, a, b, c, x[i+11], 10, -1120210379);\n            c = md5_ii(c, d, a, b, x[i+ 2], 15,  718787259);\n            b = md5_ii(b, c, d, a, x[i+ 9], 21, -343485551);\n\n            a = safe_add(a, olda);\n            b = safe_add(b, oldb);\n            c = safe_add(c, oldc);\n            d = safe_add(d, oldd);\n        }\n        return [a, b, c, d];\n    };\n\n    var obj = {\n        /*\n         * These are the functions you'll usually want to call.\n         * They take string arguments and return either hex or base-64 encoded\n         * strings.\n         */\n        hexdigest: function (s) {\n            return binl2hex(core_md5(str2binl(s), s.length * 8));\n        },\n\n        hash: function (s) {\n            return binl2str(core_md5(str2binl(s), s.length * 8));\n        }\n    };\n    return obj;\n}));\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-utils', function () {\n            return factory();\n        });\n    } else {\n        // Browser globals\n        root.stropheUtils = factory();\n    }\n}(this, function () {\n\n    var utils = {\n\n        utf16to8: function (str) {\n            var i, c;\n            var out = \"\";\n            var len = str.length;\n            for (i = 0; i < len; i++) {\n                c = str.charCodeAt(i);\n                if ((c >= 0x0000) && (c <= 0x007F)) {\n                    out += str.charAt(i);\n                } else if (c > 0x07FF) {\n                    out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));\n                    out += String.fromCharCode(0x80 | ((c >>  6) & 0x3F));\n                    out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));\n                } else {\n                    out += String.fromCharCode(0xC0 | ((c >>  6) & 0x1F));\n                    out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));\n                }\n            }\n            return out;\n        }\n\n    };\n    return utils;\n}));\n\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/* global define */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-polyfill', [], function () {\n            return factory();\n        });\n    } else {\n        // Browser globals\n        return factory();\n    }\n}(this, function () {\n\n/** PrivateFunction: Function.prototype.bind\n *  Bind a function to an instance.\n *\n *  This Function object extension method creates a bound method similar\n *  to those in Python.  This means that the 'this' object will point\n *  to the instance you want.  See\n *  <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind'>MDC's bind() documentation</a> and\n *  <a href='http://benjamin.smedbergs.us/blog/2007-01-03/bound-functions-and-function-imports-in-javascript/'>Bound Functions and Function Imports in JavaScript</a>\n *  for a complete explanation.\n *\n *  This extension already exists in some browsers (namely, Firefox 3), but\n *  we provide it to support those that don't.\n *\n *  Parameters:\n *    (Object) obj - The object that will become 'this' in the bound function.\n *    (Object) argN - An option argument that will be prepended to the\n *      arguments given for the function call\n *\n *  Returns:\n *    The bound function.\n */\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function (obj /*, arg1, arg2, ... */)\n    {\n        var func = this;\n        var _slice = Array.prototype.slice;\n        var _concat = Array.prototype.concat;\n        var _args = _slice.call(arguments, 1);\n\n        return function () {\n            return func.apply(obj ? obj : this,\n                              _concat.call(_args,\n                                           _slice.call(arguments, 0)));\n        };\n    };\n}\n\n/** PrivateFunction: Array.isArray\n *  This is a polyfill for the ES5 Array.isArray method.\n */\nif (!Array.isArray) {\n    Array.isArray = function(arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n}\n\n/** PrivateFunction: Array.prototype.indexOf\n *  Return the index of an object in an array.\n *\n *  This function is not supplied by some JavaScript implementations, so\n *  we provide it if it is missing.  This code is from:\n *  http://developer.mozilla.org/En/Core_JavaScript_1.5_Reference:Objects:Array:indexOf\n *\n *  Parameters:\n *    (Object) elt - The object to look for.\n *    (Integer) from - The index from which to start looking. (optional).\n *\n *  Returns:\n *    The index of elt in the array or -1 if not found.\n */\nif (!Array.prototype.indexOf)\n    {\n        Array.prototype.indexOf = function(elt /*, from*/)\n        {\n            var len = this.length;\n\n            var from = Number(arguments[1]) || 0;\n            from = (from < 0) ? Math.ceil(from) : Math.floor(from);\n            if (from < 0) {\n                from += len;\n            }\n\n            for (; from < len; from++) {\n                if (from in this && this[from] === elt) {\n                    return from;\n                }\n            }\n\n            return -1;\n        };\n    }\n}));\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/*global define, document, window, setTimeout, clearTimeout, console, ActiveXObject, DOMParser */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-core', [\n            'strophe-sha1',\n            'strophe-base64',\n            'strophe-md5',\n            'strophe-utils',\n            \"strophe-polyfill\"\n        ], function () {\n            return factory.apply(this, arguments);\n        });\n    } else {\n        // Browser globals\n        var o = factory(root.SHA1, root.Base64, root.MD5, root.stropheUtils);\n        window.Strophe =        o.Strophe;\n        window.$build =         o.$build;\n        window.$iq =            o.$iq;\n        window.$msg =           o.$msg;\n        window.$pres =          o.$pres;\n        window.SHA1 =           o.SHA1;\n        window.Base64 =         o.Base64;\n        window.MD5 =            o.MD5;\n        window.b64_hmac_sha1 =  o.SHA1.b64_hmac_sha1;\n        window.b64_sha1 =       o.SHA1.b64_sha1;\n        window.str_hmac_sha1 =  o.SHA1.str_hmac_sha1;\n        window.str_sha1 =       o.SHA1.str_sha1;\n    }\n}(this, function (SHA1, Base64, MD5, utils) {\n\nvar Strophe;\n\n/** Function: $build\n *  Create a Strophe.Builder.\n *  This is an alias for 'new Strophe.Builder(name, attrs)'.\n *\n *  Parameters:\n *    (String) name - The root element name.\n *    (Object) attrs - The attributes for the root element in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $build(name, attrs) { return new Strophe.Builder(name, attrs); }\n\n/** Function: $msg\n *  Create a Strophe.Builder with a <message/> element as the root.\n *\n *  Parameters:\n *    (Object) attrs - The <message/> element attributes in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $msg(attrs) { return new Strophe.Builder(\"message\", attrs); }\n\n/** Function: $iq\n *  Create a Strophe.Builder with an <iq/> element as the root.\n *\n *  Parameters:\n *    (Object) attrs - The <iq/> element attributes in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $iq(attrs) { return new Strophe.Builder(\"iq\", attrs); }\n\n/** Function: $pres\n *  Create a Strophe.Builder with a <presence/> element as the root.\n *\n *  Parameters:\n *    (Object) attrs - The <presence/> element attributes in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder object.\n */\nfunction $pres(attrs) { return new Strophe.Builder(\"presence\", attrs); }\n\n/** Class: Strophe\n *  An object container for all Strophe library functions.\n *\n *  This class is just a container for all the objects and constants\n *  used in the library.  It is not meant to be instantiated, but to\n *  provide a namespace for library objects, constants, and functions.\n */\nStrophe = {\n    /** Constant: VERSION\n     *  The version of the Strophe library. Unreleased builds will have\n     *  a version of head-HASH where HASH is a partial revision.\n     */\n    VERSION: \"1.2.4\",\n\n    /** Constants: XMPP Namespace Constants\n     *  Common namespace constants from the XMPP RFCs and XEPs.\n     *\n     *  NS.HTTPBIND - HTTP BIND namespace from XEP 124.\n     *  NS.BOSH - BOSH namespace from XEP 206.\n     *  NS.CLIENT - Main XMPP client namespace.\n     *  NS.AUTH - Legacy authentication namespace.\n     *  NS.ROSTER - Roster operations namespace.\n     *  NS.PROFILE - Profile namespace.\n     *  NS.DISCO_INFO - Service discovery info namespace from XEP 30.\n     *  NS.DISCO_ITEMS - Service discovery items namespace from XEP 30.\n     *  NS.MUC - Multi-User Chat namespace from XEP 45.\n     *  NS.SASL - XMPP SASL namespace from RFC 3920.\n     *  NS.STREAM - XMPP Streams namespace from RFC 3920.\n     *  NS.BIND - XMPP Binding namespace from RFC 3920.\n     *  NS.SESSION - XMPP Session namespace from RFC 3920.\n     *  NS.XHTML_IM - XHTML-IM namespace from XEP 71.\n     *  NS.XHTML - XHTML body namespace from XEP 71.\n     */\n    NS: {\n        HTTPBIND: \"http://jabber.org/protocol/httpbind\",\n        BOSH: \"urn:xmpp:xbosh\",\n        CLIENT: \"jabber:client\",\n        AUTH: \"jabber:iq:auth\",\n        ROSTER: \"jabber:iq:roster\",\n        PROFILE: \"jabber:iq:profile\",\n        DISCO_INFO: \"http://jabber.org/protocol/disco#info\",\n        DISCO_ITEMS: \"http://jabber.org/protocol/disco#items\",\n        MUC: \"http://jabber.org/protocol/muc\",\n        SASL: \"urn:ietf:params:xml:ns:xmpp-sasl\",\n        STREAM: \"http://etherx.jabber.org/streams\",\n        FRAMING: \"urn:ietf:params:xml:ns:xmpp-framing\",\n        BIND: \"urn:ietf:params:xml:ns:xmpp-bind\",\n        SESSION: \"urn:ietf:params:xml:ns:xmpp-session\",\n        VERSION: \"jabber:iq:version\",\n        STANZAS: \"urn:ietf:params:xml:ns:xmpp-stanzas\",\n        XHTML_IM: \"http://jabber.org/protocol/xhtml-im\",\n        XHTML: \"http://www.w3.org/1999/xhtml\"\n    },\n\n\n    /** Constants: XHTML_IM Namespace\n     *  contains allowed tags, tag attributes, and css properties.\n     *  Used in the createHtml function to filter incoming html into the allowed XHTML-IM subset.\n     *  See http://xmpp.org/extensions/xep-0071.html#profile-summary for the list of recommended\n     *  allowed tags and their attributes.\n     */\n    XHTML: {\n                tags: ['a','blockquote','br','cite','em','img','li','ol','p','span','strong','ul','body'],\n                attributes: {\n                        'a':          ['href'],\n                        'blockquote': ['style'],\n                        'br':         [],\n                        'cite':       ['style'],\n                        'em':         [],\n                        'img':        ['src', 'alt', 'style', 'height', 'width'],\n                        'li':         ['style'],\n                        'ol':         ['style'],\n                        'p':          ['style'],\n                        'span':       ['style'],\n                        'strong':     [],\n                        'ul':         ['style'],\n                        'body':       []\n                },\n                css: ['background-color','color','font-family','font-size','font-style','font-weight','margin-left','margin-right','text-align','text-decoration'],\n                /** Function: XHTML.validTag\n                 *\n                 * Utility method to determine whether a tag is allowed\n                 * in the XHTML_IM namespace.\n                 *\n                 * XHTML tag names are case sensitive and must be lower case.\n                 */\n                validTag: function(tag) {\n                        for (var i = 0; i < Strophe.XHTML.tags.length; i++) {\n                                if (tag == Strophe.XHTML.tags[i]) {\n                                        return true;\n                                }\n                        }\n                        return false;\n                },\n                /** Function: XHTML.validAttribute\n                 *\n                 * Utility method to determine whether an attribute is allowed\n                 * as recommended per XEP-0071\n                 *\n                 * XHTML attribute names are case sensitive and must be lower case.\n                 */\n                validAttribute: function(tag, attribute) {\n                        if(typeof Strophe.XHTML.attributes[tag] !== 'undefined' && Strophe.XHTML.attributes[tag].length > 0) {\n                                for(var i = 0; i < Strophe.XHTML.attributes[tag].length; i++) {\n                                        if(attribute == Strophe.XHTML.attributes[tag][i]) {\n                                                return true;\n                                        }\n                                }\n                        }\n                        return false;\n                },\n                validCSS: function(style)\n                {\n                        for(var i = 0; i < Strophe.XHTML.css.length; i++) {\n                                if(style == Strophe.XHTML.css[i]) {\n                                        return true;\n                                }\n                        }\n                        return false;\n                }\n    },\n\n    /** Constants: Connection Status Constants\n     *  Connection status constants for use by the connection handler\n     *  callback.\n     *\n     *  Status.ERROR - An error has occurred\n     *  Status.CONNECTING - The connection is currently being made\n     *  Status.CONNFAIL - The connection attempt failed\n     *  Status.AUTHENTICATING - The connection is authenticating\n     *  Status.AUTHFAIL - The authentication attempt failed\n     *  Status.CONNECTED - The connection has succeeded\n     *  Status.DISCONNECTED - The connection has been terminated\n     *  Status.DISCONNECTING - The connection is currently being terminated\n     *  Status.ATTACHED - The connection has been attached\n     */\n    Status: {\n        ERROR: 0,\n        CONNECTING: 1,\n        CONNFAIL: 2,\n        AUTHENTICATING: 3,\n        AUTHFAIL: 4,\n        CONNECTED: 5,\n        DISCONNECTED: 6,\n        DISCONNECTING: 7,\n        ATTACHED: 8,\n        REDIRECT: 9\n    },\n\n    /** Constants: Log Level Constants\n     *  Logging level indicators.\n     *\n     *  LogLevel.DEBUG - Debug output\n     *  LogLevel.INFO - Informational output\n     *  LogLevel.WARN - Warnings\n     *  LogLevel.ERROR - Errors\n     *  LogLevel.FATAL - Fatal errors\n     */\n    LogLevel: {\n        DEBUG: 0,\n        INFO: 1,\n        WARN: 2,\n        ERROR: 3,\n        FATAL: 4\n    },\n\n    /** PrivateConstants: DOM Element Type Constants\n     *  DOM element types.\n     *\n     *  ElementType.NORMAL - Normal element.\n     *  ElementType.TEXT - Text data element.\n     *  ElementType.FRAGMENT - XHTML fragment element.\n     */\n    ElementType: {\n        NORMAL: 1,\n        TEXT: 3,\n        CDATA: 4,\n        FRAGMENT: 11\n    },\n\n    /** PrivateConstants: Timeout Values\n     *  Timeout values for error states.  These values are in seconds.\n     *  These should not be changed unless you know exactly what you are\n     *  doing.\n     *\n     *  TIMEOUT - Timeout multiplier. A waiting request will be considered\n     *      failed after Math.floor(TIMEOUT * wait) seconds have elapsed.\n     *      This defaults to 1.1, and with default wait, 66 seconds.\n     *  SECONDARY_TIMEOUT - Secondary timeout multiplier. In cases where\n     *      Strophe can detect early failure, it will consider the request\n     *      failed if it doesn't return after\n     *      Math.floor(SECONDARY_TIMEOUT * wait) seconds have elapsed.\n     *      This defaults to 0.1, and with default wait, 6 seconds.\n     */\n    TIMEOUT: 1.1,\n    SECONDARY_TIMEOUT: 0.1,\n\n    /** Function: addNamespace\n     *  This function is used to extend the current namespaces in\n     *  Strophe.NS.  It takes a key and a value with the key being the\n     *  name of the new namespace, with its actual value.\n     *  For example:\n     *  Strophe.addNamespace('PUBSUB', \"http://jabber.org/protocol/pubsub\");\n     *\n     *  Parameters:\n     *    (String) name - The name under which the namespace will be\n     *      referenced under Strophe.NS\n     *    (String) value - The actual namespace.\n     */\n    addNamespace: function (name, value)\n    {\n      Strophe.NS[name] = value;\n    },\n\n    /** Function: forEachChild\n     *  Map a function over some or all child elements of a given element.\n     *\n     *  This is a small convenience function for mapping a function over\n     *  some or all of the children of an element.  If elemName is null, all\n     *  children will be passed to the function, otherwise only children\n     *  whose tag names match elemName will be passed.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The element to operate on.\n     *    (String) elemName - The child element tag name filter.\n     *    (Function) func - The function to apply to each child.  This\n     *      function should take a single argument, a DOM element.\n     */\n    forEachChild: function (elem, elemName, func)\n    {\n        var i, childNode;\n\n        for (i = 0; i < elem.childNodes.length; i++) {\n            childNode = elem.childNodes[i];\n            if (childNode.nodeType == Strophe.ElementType.NORMAL &&\n                (!elemName || this.isTagEqual(childNode, elemName))) {\n                func(childNode);\n            }\n        }\n    },\n\n    /** Function: isTagEqual\n     *  Compare an element's tag name with a string.\n     *\n     *  This function is case sensitive.\n     *\n     *  Parameters:\n     *    (XMLElement) el - A DOM element.\n     *    (String) name - The element name.\n     *\n     *  Returns:\n     *    true if the element's tag name matches _el_, and false\n     *    otherwise.\n     */\n    isTagEqual: function (el, name)\n    {\n        return el.tagName == name;\n    },\n\n    /** PrivateVariable: _xmlGenerator\n     *  _Private_ variable that caches a DOM document to\n     *  generate elements.\n     */\n    _xmlGenerator: null,\n\n    /** PrivateFunction: _makeGenerator\n     *  _Private_ function that creates a dummy XML DOM document to serve as\n     *  an element and text node generator.\n     */\n    _makeGenerator: function () {\n        var doc;\n\n        // IE9 does implement createDocument(); however, using it will cause the browser to leak memory on page unload.\n        // Here, we test for presence of createDocument() plus IE's proprietary documentMode attribute, which would be\n                // less than 10 in the case of IE9 and below.\n        if (document.implementation.createDocument === undefined ||\n                        document.implementation.createDocument && document.documentMode && document.documentMode < 10) {\n            doc = this._getIEXmlDom();\n            doc.appendChild(doc.createElement('strophe'));\n        } else {\n            doc = document.implementation\n                .createDocument('jabber:client', 'strophe', null);\n        }\n\n        return doc;\n    },\n\n    /** Function: xmlGenerator\n     *  Get the DOM document to generate elements.\n     *\n     *  Returns:\n     *    The currently used DOM document.\n     */\n    xmlGenerator: function () {\n        if (!Strophe._xmlGenerator) {\n            Strophe._xmlGenerator = Strophe._makeGenerator();\n        }\n        return Strophe._xmlGenerator;\n    },\n\n    /** PrivateFunction: _getIEXmlDom\n     *  Gets IE xml doc object\n     *\n     *  Returns:\n     *    A Microsoft XML DOM Object\n     *  See Also:\n     *    http://msdn.microsoft.com/en-us/library/ms757837%28VS.85%29.aspx\n     */\n    _getIEXmlDom : function() {\n        var doc = null;\n        var docStrings = [\n            \"Msxml2.DOMDocument.6.0\",\n            \"Msxml2.DOMDocument.5.0\",\n            \"Msxml2.DOMDocument.4.0\",\n            \"MSXML2.DOMDocument.3.0\",\n            \"MSXML2.DOMDocument\",\n            \"MSXML.DOMDocument\",\n            \"Microsoft.XMLDOM\"\n        ];\n\n        for (var d = 0; d < docStrings.length; d++) {\n            if (doc === null) {\n                try {\n                    doc = new ActiveXObject(docStrings[d]);\n                } catch (e) {\n                    doc = null;\n                }\n            } else {\n                break;\n            }\n        }\n\n        return doc;\n    },\n\n    /** Function: xmlElement\n     *  Create an XML DOM element.\n     *\n     *  This function creates an XML DOM element correctly across all\n     *  implementations. Note that these are not HTML DOM elements, which\n     *  aren't appropriate for XMPP stanzas.\n     *\n     *  Parameters:\n     *    (String) name - The name for the element.\n     *    (Array|Object) attrs - An optional array or object containing\n     *      key/value pairs to use as element attributes. The object should\n     *      be in the format {'key': 'value'} or {key: 'value'}. The array\n     *      should have the format [['key1', 'value1'], ['key2', 'value2']].\n     *    (String) text - The text child data for the element.\n     *\n     *  Returns:\n     *    A new XML DOM element.\n     */\n    xmlElement: function (name)\n    {\n        if (!name) { return null; }\n\n        var node = Strophe.xmlGenerator().createElement(name);\n\n        // FIXME: this should throw errors if args are the wrong type or\n        // there are more than two optional args\n        var a, i, k;\n        for (a = 1; a < arguments.length; a++) {\n            var arg = arguments[a];\n            if (!arg) { continue; }\n            if (typeof(arg) == \"string\" ||\n                typeof(arg) == \"number\") {\n                node.appendChild(Strophe.xmlTextNode(arg));\n            } else if (typeof(arg) == \"object\" &&\n                       typeof(arg.sort) == \"function\") {\n                for (i = 0; i < arg.length; i++) {\n                    var attr = arg[i];\n                    if (typeof(attr) == \"object\" &&\n                        typeof(attr.sort) == \"function\" &&\n                        attr[1] !== undefined &&\n                        attr[1] !== null) {\n                        node.setAttribute(attr[0], attr[1]);\n                    }\n                }\n            } else if (typeof(arg) == \"object\") {\n                for (k in arg) {\n                    if (arg.hasOwnProperty(k)) {\n                        if (arg[k] !== undefined &&\n                            arg[k] !== null) {\n                            node.setAttribute(k, arg[k]);\n                        }\n                    }\n                }\n            }\n        }\n\n        return node;\n    },\n\n    /*  Function: xmlescape\n     *  Excapes invalid xml characters.\n     *\n     *  Parameters:\n     *     (String) text - text to escape.\n     *\n     *  Returns:\n     *      Escaped text.\n     */\n    xmlescape: function(text)\n    {\n        text = text.replace(/\\&/g, \"&amp;\");\n        text = text.replace(/</g,  \"&lt;\");\n        text = text.replace(/>/g,  \"&gt;\");\n        text = text.replace(/'/g,  \"&apos;\");\n        text = text.replace(/\"/g,  \"&quot;\");\n        return text;\n    },\n\n    /*  Function: xmlunescape\n    *  Unexcapes invalid xml characters.\n    *\n    *  Parameters:\n    *     (String) text - text to unescape.\n    *\n    *  Returns:\n    *      Unescaped text.\n    */\n    xmlunescape: function(text)\n    {\n        text = text.replace(/\\&amp;/g, \"&\");\n        text = text.replace(/&lt;/g,  \"<\");\n        text = text.replace(/&gt;/g,  \">\");\n        text = text.replace(/&apos;/g,  \"'\");\n        text = text.replace(/&quot;/g,  \"\\\"\");\n        return text;\n    },\n\n    /** Function: xmlTextNode\n     *  Creates an XML DOM text node.\n     *\n     *  Provides a cross implementation version of document.createTextNode.\n     *\n     *  Parameters:\n     *    (String) text - The content of the text node.\n     *\n     *  Returns:\n     *    A new XML DOM text node.\n     */\n    xmlTextNode: function (text)\n    {\n        return Strophe.xmlGenerator().createTextNode(text);\n    },\n\n    /** Function: xmlHtmlNode\n     *  Creates an XML DOM html node.\n     *\n     *  Parameters:\n     *    (String) html - The content of the html node.\n     *\n     *  Returns:\n     *    A new XML DOM text node.\n     */\n    xmlHtmlNode: function (html)\n    {\n        var node;\n        //ensure text is escaped\n        if (window.DOMParser) {\n            var parser = new DOMParser();\n            node = parser.parseFromString(html, \"text/xml\");\n        } else {\n            node = new ActiveXObject(\"Microsoft.XMLDOM\");\n            node.async=\"false\";\n            node.loadXML(html);\n        }\n        return node;\n    },\n\n    /** Function: getText\n     *  Get the concatenation of all text children of an element.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    A String with the concatenated text of all text element children.\n     */\n    getText: function (elem)\n    {\n        if (!elem) { return null; }\n\n        var str = \"\";\n        if (elem.childNodes.length === 0 && elem.nodeType ==\n            Strophe.ElementType.TEXT) {\n            str += elem.nodeValue;\n        }\n\n        for (var i = 0; i < elem.childNodes.length; i++) {\n            if (elem.childNodes[i].nodeType == Strophe.ElementType.TEXT) {\n                str += elem.childNodes[i].nodeValue;\n            }\n        }\n\n        return Strophe.xmlescape(str);\n    },\n\n    /** Function: copyElement\n     *  Copy an XML DOM element.\n     *\n     *  This function copies a DOM element and all its descendants and returns\n     *  the new copy.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    A new, copied DOM element tree.\n     */\n    copyElement: function (elem)\n    {\n        var i, el;\n        if (elem.nodeType == Strophe.ElementType.NORMAL) {\n            el = Strophe.xmlElement(elem.tagName);\n\n            for (i = 0; i < elem.attributes.length; i++) {\n                el.setAttribute(elem.attributes[i].nodeName,\n                                elem.attributes[i].value);\n            }\n\n            for (i = 0; i < elem.childNodes.length; i++) {\n                el.appendChild(Strophe.copyElement(elem.childNodes[i]));\n            }\n        } else if (elem.nodeType == Strophe.ElementType.TEXT) {\n            el = Strophe.xmlGenerator().createTextNode(elem.nodeValue);\n        }\n\n        return el;\n    },\n\n\n    /** Function: createHtml\n     *  Copy an HTML DOM element into an XML DOM.\n     *\n     *  This function copies a DOM element and all its descendants and returns\n     *  the new copy.\n     *\n     *  Parameters:\n     *    (HTMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    A new, copied DOM element tree.\n     */\n    createHtml: function (elem)\n    {\n        var i, el, j, tag, attribute, value, css, cssAttrs, attr, cssName, cssValue;\n        if (elem.nodeType == Strophe.ElementType.NORMAL) {\n            tag = elem.nodeName.toLowerCase(); // XHTML tags must be lower case.\n            if(Strophe.XHTML.validTag(tag)) {\n                try {\n                    el = Strophe.xmlElement(tag);\n                    for(i = 0; i < Strophe.XHTML.attributes[tag].length; i++) {\n                        attribute = Strophe.XHTML.attributes[tag][i];\n                        value = elem.getAttribute(attribute);\n                        if(typeof value == 'undefined' || value === null || value === '' || value === false || value === 0) {\n                            continue;\n                        }\n                        if(attribute == 'style' && typeof value == 'object') {\n                            if(typeof value.cssText != 'undefined') {\n                                value = value.cssText; // we're dealing with IE, need to get CSS out\n                            }\n                        }\n                        // filter out invalid css styles\n                        if(attribute == 'style') {\n                            css = [];\n                            cssAttrs = value.split(';');\n                            for(j = 0; j < cssAttrs.length; j++) {\n                                attr = cssAttrs[j].split(':');\n                                cssName = attr[0].replace(/^\\s*/, \"\").replace(/\\s*$/, \"\").toLowerCase();\n                                if(Strophe.XHTML.validCSS(cssName)) {\n                                    cssValue = attr[1].replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\n                                    css.push(cssName + ': ' + cssValue);\n                                }\n                            }\n                            if(css.length > 0) {\n                                value = css.join('; ');\n                                el.setAttribute(attribute, value);\n                            }\n                        } else {\n                            el.setAttribute(attribute, value);\n                        }\n                    }\n\n                    for (i = 0; i < elem.childNodes.length; i++) {\n                        el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n                    }\n                } catch(e) { // invalid elements\n                  el = Strophe.xmlTextNode('');\n                }\n            } else {\n                el = Strophe.xmlGenerator().createDocumentFragment();\n                for (i = 0; i < elem.childNodes.length; i++) {\n                    el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n                }\n            }\n        } else if (elem.nodeType == Strophe.ElementType.FRAGMENT) {\n            el = Strophe.xmlGenerator().createDocumentFragment();\n            for (i = 0; i < elem.childNodes.length; i++) {\n                el.appendChild(Strophe.createHtml(elem.childNodes[i]));\n            }\n        } else if (elem.nodeType == Strophe.ElementType.TEXT) {\n            el = Strophe.xmlTextNode(elem.nodeValue);\n        }\n\n        return el;\n    },\n\n    /** Function: escapeNode\n     *  Escape the node part (also called local part) of a JID.\n     *\n     *  Parameters:\n     *    (String) node - A node (or local part).\n     *\n     *  Returns:\n     *    An escaped node (or local part).\n     */\n    escapeNode: function (node)\n    {\n        if (typeof node !== \"string\") { return node; }\n        return node.replace(/^\\s+|\\s+$/g, '')\n            .replace(/\\\\/g,  \"\\\\5c\")\n            .replace(/ /g,   \"\\\\20\")\n            .replace(/\\\"/g,  \"\\\\22\")\n            .replace(/\\&/g,  \"\\\\26\")\n            .replace(/\\'/g,  \"\\\\27\")\n            .replace(/\\//g,  \"\\\\2f\")\n            .replace(/:/g,   \"\\\\3a\")\n            .replace(/</g,   \"\\\\3c\")\n            .replace(/>/g,   \"\\\\3e\")\n            .replace(/@/g,   \"\\\\40\");\n    },\n\n    /** Function: unescapeNode\n     *  Unescape a node part (also called local part) of a JID.\n     *\n     *  Parameters:\n     *    (String) node - A node (or local part).\n     *\n     *  Returns:\n     *    An unescaped node (or local part).\n     */\n    unescapeNode: function (node)\n    {\n        if (typeof node !== \"string\") { return node; }\n        return node.replace(/\\\\20/g, \" \")\n            .replace(/\\\\22/g, '\"')\n            .replace(/\\\\26/g, \"&\")\n            .replace(/\\\\27/g, \"'\")\n            .replace(/\\\\2f/g, \"/\")\n            .replace(/\\\\3a/g, \":\")\n            .replace(/\\\\3c/g, \"<\")\n            .replace(/\\\\3e/g, \">\")\n            .replace(/\\\\40/g, \"@\")\n            .replace(/\\\\5c/g, \"\\\\\");\n    },\n\n    /** Function: getNodeFromJid\n     *  Get the node portion of a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the node.\n     */\n    getNodeFromJid: function (jid)\n    {\n        if (jid.indexOf(\"@\") < 0) { return null; }\n        return jid.split(\"@\")[0];\n    },\n\n    /** Function: getDomainFromJid\n     *  Get the domain portion of a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the domain.\n     */\n    getDomainFromJid: function (jid)\n    {\n        var bare = Strophe.getBareJidFromJid(jid);\n        if (bare.indexOf(\"@\") < 0) {\n            return bare;\n        } else {\n            var parts = bare.split(\"@\");\n            parts.splice(0, 1);\n            return parts.join('@');\n        }\n    },\n\n    /** Function: getResourceFromJid\n     *  Get the resource portion of a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the resource.\n     */\n    getResourceFromJid: function (jid)\n    {\n        var s = jid.split(\"/\");\n        if (s.length < 2) { return null; }\n        s.splice(0, 1);\n        return s.join('/');\n    },\n\n    /** Function: getBareJidFromJid\n     *  Get the bare JID from a JID String.\n     *\n     *  Parameters:\n     *    (String) jid - A JID.\n     *\n     *  Returns:\n     *    A String containing the bare JID.\n     */\n    getBareJidFromJid: function (jid)\n    {\n        return jid ? jid.split(\"/\")[0] : null;\n    },\n\n    /** Function: log\n     *  User overrideable logging function.\n     *\n     *  This function is called whenever the Strophe library calls any\n     *  of the logging functions.  The default implementation of this\n     *  function does nothing.  If client code wishes to handle the logging\n     *  messages, it should override this with\n     *  > Strophe.log = function (level, msg) {\n     *  >   (user code here)\n     *  > };\n     *\n     *  Please note that data sent and received over the wire is logged\n     *  via Strophe.Connection.rawInput() and Strophe.Connection.rawOutput().\n     *\n     *  The different levels and their meanings are\n     *\n     *    DEBUG - Messages useful for debugging purposes.\n     *    INFO - Informational messages.  This is mostly information like\n     *      'disconnect was called' or 'SASL auth succeeded'.\n     *    WARN - Warnings about potential problems.  This is mostly used\n     *      to report transient connection errors like request timeouts.\n     *    ERROR - Some error occurred.\n     *    FATAL - A non-recoverable fatal error occurred.\n     *\n     *  Parameters:\n     *    (Integer) level - The log level of the log message.  This will\n     *      be one of the values in Strophe.LogLevel.\n     *    (String) msg - The log message.\n     */\n    /* jshint ignore:start */\n    log: function (level, msg)\n    {\n        return;\n    },\n    /* jshint ignore:end */\n\n    /** Function: debug\n     *  Log a message at the Strophe.LogLevel.DEBUG level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    debug: function(msg)\n    {\n        this.log(this.LogLevel.DEBUG, msg);\n    },\n\n    /** Function: info\n     *  Log a message at the Strophe.LogLevel.INFO level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    info: function (msg)\n    {\n        this.log(this.LogLevel.INFO, msg);\n    },\n\n    /** Function: warn\n     *  Log a message at the Strophe.LogLevel.WARN level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    warn: function (msg)\n    {\n        this.log(this.LogLevel.WARN, msg);\n    },\n\n    /** Function: error\n     *  Log a message at the Strophe.LogLevel.ERROR level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    error: function (msg)\n    {\n        this.log(this.LogLevel.ERROR, msg);\n    },\n\n    /** Function: fatal\n     *  Log a message at the Strophe.LogLevel.FATAL level.\n     *\n     *  Parameters:\n     *    (String) msg - The log message.\n     */\n    fatal: function (msg)\n    {\n        this.log(this.LogLevel.FATAL, msg);\n    },\n\n    /** Function: serialize\n     *  Render a DOM element and all descendants to a String.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    The serialized element tree as a String.\n     */\n    serialize: function (elem)\n    {\n        var result;\n\n        if (!elem) { return null; }\n\n        if (typeof(elem.tree) === \"function\") {\n            elem = elem.tree();\n        }\n\n        var nodeName = elem.nodeName;\n        var i, child;\n\n        if (elem.getAttribute(\"_realname\")) {\n            nodeName = elem.getAttribute(\"_realname\");\n        }\n\n        result = \"<\" + nodeName;\n        for (i = 0; i < elem.attributes.length; i++) {\n               if(elem.attributes[i].nodeName != \"_realname\") {\n                 result += \" \" + elem.attributes[i].nodeName +\n                \"='\" + elem.attributes[i].value\n                    .replace(/&/g, \"&amp;\")\n                       .replace(/\\'/g, \"&apos;\")\n                       .replace(/>/g, \"&gt;\")\n                       .replace(/</g, \"&lt;\") + \"'\";\n               }\n        }\n\n        if (elem.childNodes.length > 0) {\n            result += \">\";\n            for (i = 0; i < elem.childNodes.length; i++) {\n                child = elem.childNodes[i];\n                switch( child.nodeType ){\n                  case Strophe.ElementType.NORMAL:\n                    // normal element, so recurse\n                    result += Strophe.serialize(child);\n                    break;\n                  case Strophe.ElementType.TEXT:\n                    // text element to escape values\n                    result += Strophe.xmlescape(child.nodeValue);\n                    break;\n                  case Strophe.ElementType.CDATA:\n                    // cdata section so don't escape values\n                    result += \"<![CDATA[\"+child.nodeValue+\"]]>\";\n                }\n            }\n            result += \"</\" + nodeName + \">\";\n        } else {\n            result += \"/>\";\n        }\n\n        return result;\n    },\n\n    /** PrivateVariable: _requestId\n     *  _Private_ variable that keeps track of the request ids for\n     *  connections.\n     */\n    _requestId: 0,\n\n    /** PrivateVariable: Strophe.connectionPlugins\n     *  _Private_ variable Used to store plugin names that need\n     *  initialization on Strophe.Connection construction.\n     */\n    _connectionPlugins: {},\n\n    /** Function: addConnectionPlugin\n     *  Extends the Strophe.Connection object with the given plugin.\n     *\n     *  Parameters:\n     *    (String) name - The name of the extension.\n     *    (Object) ptype - The plugin's prototype.\n     */\n    addConnectionPlugin: function (name, ptype)\n    {\n        Strophe._connectionPlugins[name] = ptype;\n    }\n};\n\n/** Class: Strophe.Builder\n *  XML DOM builder.\n *\n *  This object provides an interface similar to JQuery but for building\n *  DOM elements easily and rapidly.  All the functions except for toString()\n *  and tree() return the object, so calls can be chained.  Here's an\n *  example using the $iq() builder helper.\n *  > $iq({to: 'you', from: 'me', type: 'get', id: '1'})\n *  >     .c('query', {xmlns: 'strophe:example'})\n *  >     .c('example')\n *  >     .toString()\n *  The above generates this XML fragment\n *  > <iq to='you' from='me' type='get' id='1'>\n *  >   <query xmlns='strophe:example'>\n *  >     <example/>\n *  >   </query>\n *  > </iq>\n *  The corresponding DOM manipulations to get a similar fragment would be\n *  a lot more tedious and probably involve several helper variables.\n *\n *  Since adding children makes new operations operate on the child, up()\n *  is provided to traverse up the tree.  To add two children, do\n *  > builder.c('child1', ...).up().c('child2', ...)\n *  The next operation on the Builder will be relative to the second child.\n */\n\n/** Constructor: Strophe.Builder\n *  Create a Strophe.Builder object.\n *\n *  The attributes should be passed in object notation.  For example\n *  > var b = new Builder('message', {to: 'you', from: 'me'});\n *  or\n *  > var b = new Builder('messsage', {'xml:lang': 'en'});\n *\n *  Parameters:\n *    (String) name - The name of the root element.\n *    (Object) attrs - The attributes for the root element in object notation.\n *\n *  Returns:\n *    A new Strophe.Builder.\n */\nStrophe.Builder = function (name, attrs)\n{\n    // Set correct namespace for jabber:client elements\n    if (name == \"presence\" || name == \"message\" || name == \"iq\") {\n        if (attrs && !attrs.xmlns) {\n            attrs.xmlns = Strophe.NS.CLIENT;\n        } else if (!attrs) {\n            attrs = {xmlns: Strophe.NS.CLIENT};\n        }\n    }\n\n    // Holds the tree being built.\n    this.nodeTree = Strophe.xmlElement(name, attrs);\n\n    // Points to the current operation node.\n    this.node = this.nodeTree;\n};\n\nStrophe.Builder.prototype = {\n    /** Function: tree\n     *  Return the DOM tree.\n     *\n     *  This function returns the current DOM tree as an element object.  This\n     *  is suitable for passing to functions like Strophe.Connection.send().\n     *\n     *  Returns:\n     *    The DOM tree as a element object.\n     */\n    tree: function ()\n    {\n        return this.nodeTree;\n    },\n\n    /** Function: toString\n     *  Serialize the DOM tree to a String.\n     *\n     *  This function returns a string serialization of the current DOM\n     *  tree.  It is often used internally to pass data to a\n     *  Strophe.Request object.\n     *\n     *  Returns:\n     *    The serialized DOM tree in a String.\n     */\n    toString: function ()\n    {\n        return Strophe.serialize(this.nodeTree);\n    },\n\n    /** Function: up\n     *  Make the current parent element the new current element.\n     *\n     *  This function is often used after c() to traverse back up the tree.\n     *  For example, to add two children to the same element\n     *  > builder.c('child1', {}).up().c('child2', {});\n     *\n     *  Returns:\n     *    The Stophe.Builder object.\n     */\n    up: function ()\n    {\n        this.node = this.node.parentNode;\n        return this;\n    },\n\n    /** Function: attrs\n     *  Add or modify attributes of the current element.\n     *\n     *  The attributes should be passed in object notation.  This function\n     *  does not move the current element pointer.\n     *\n     *  Parameters:\n     *    (Object) moreattrs - The attributes to add/modify in object notation.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    attrs: function (moreattrs)\n    {\n        for (var k in moreattrs) {\n            if (moreattrs.hasOwnProperty(k)) {\n                if (moreattrs[k] === undefined) {\n                    this.node.removeAttribute(k);\n                } else {\n                    this.node.setAttribute(k, moreattrs[k]);\n                }\n            }\n        }\n        return this;\n    },\n\n    /** Function: c\n     *  Add a child to the current element and make it the new current\n     *  element.\n     *\n     *  This function moves the current element pointer to the child,\n     *  unless text is provided.  If you need to add another child, it\n     *  is necessary to use up() to go back to the parent in the tree.\n     *\n     *  Parameters:\n     *    (String) name - The name of the child.\n     *    (Object) attrs - The attributes of the child in object notation.\n     *    (String) text - The text to add to the child.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    c: function (name, attrs, text)\n    {\n        var child = Strophe.xmlElement(name, attrs, text);\n        this.node.appendChild(child);\n        if (typeof text !== \"string\") {\n            this.node = child;\n        }\n        return this;\n    },\n\n    /** Function: cnode\n     *  Add a child to the current element and make it the new current\n     *  element.\n     *\n     *  This function is the same as c() except that instead of using a\n     *  name and an attributes object to create the child it uses an\n     *  existing DOM element object.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - A DOM element.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    cnode: function (elem)\n    {\n        var impNode;\n        var xmlGen = Strophe.xmlGenerator();\n        try {\n            impNode = (xmlGen.importNode !== undefined);\n        }\n        catch (e) {\n            impNode = false;\n        }\n        var newElem = impNode ?\n                      xmlGen.importNode(elem, true) :\n                      Strophe.copyElement(elem);\n        this.node.appendChild(newElem);\n        this.node = newElem;\n        return this;\n    },\n\n    /** Function: t\n     *  Add a child text element.\n     *\n     *  This *does not* make the child the new current element since there\n     *  are no children of text elements.\n     *\n     *  Parameters:\n     *    (String) text - The text data to append to the current element.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    t: function (text)\n    {\n        var child = Strophe.xmlTextNode(text);\n        this.node.appendChild(child);\n        return this;\n    },\n\n    /** Function: h\n     *  Replace current element contents with the HTML passed in.\n     *\n     *  This *does not* make the child the new current element\n     *\n     *  Parameters:\n     *    (String) html - The html to insert as contents of current element.\n     *\n     *  Returns:\n     *    The Strophe.Builder object.\n     */\n    h: function (html)\n    {\n        var fragment = document.createElement('body');\n\n        // force the browser to try and fix any invalid HTML tags\n        fragment.innerHTML = html;\n\n        // copy cleaned html into an xml dom\n        var xhtml = Strophe.createHtml(fragment);\n\n        while(xhtml.childNodes.length > 0) {\n            this.node.appendChild(xhtml.childNodes[0]);\n        }\n        return this;\n    }\n};\n\n/** PrivateClass: Strophe.Handler\n *  _Private_ helper class for managing stanza handlers.\n *\n *  A Strophe.Handler encapsulates a user provided callback function to be\n *  executed when matching stanzas are received by the connection.\n *  Handlers can be either one-off or persistant depending on their\n *  return value. Returning true will cause a Handler to remain active, and\n *  returning false will remove the Handler.\n *\n *  Users will not use Strophe.Handler objects directly, but instead they\n *  will use Strophe.Connection.addHandler() and\n *  Strophe.Connection.deleteHandler().\n */\n\n/** PrivateConstructor: Strophe.Handler\n *  Create and initialize a new Strophe.Handler.\n *\n *  Parameters:\n *    (Function) handler - A function to be executed when the handler is run.\n *    (String) ns - The namespace to match.\n *    (String) name - The element name to match.\n *    (String) type - The element type to match.\n *    (String) id - The element id attribute to match.\n *    (String) from - The element from attribute to match.\n *    (Object) options - Handler options\n *\n *  Returns:\n *    A new Strophe.Handler object.\n */\nStrophe.Handler = function (handler, ns, name, type, id, from, options)\n{\n    this.handler = handler;\n    this.ns = ns;\n    this.name = name;\n    this.type = type;\n    this.id = id;\n    this.options = options || {matchBare: false};\n\n    // default matchBare to false if undefined\n    if (!this.options.matchBare) {\n        this.options.matchBare = false;\n    }\n\n    if (this.options.matchBare) {\n        this.from = from ? Strophe.getBareJidFromJid(from) : null;\n    } else {\n        this.from = from;\n    }\n\n    // whether the handler is a user handler or a system handler\n    this.user = true;\n};\n\nStrophe.Handler.prototype = {\n    /** PrivateFunction: isMatch\n     *  Tests if a stanza matches the Strophe.Handler.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XML element to test.\n     *\n     *  Returns:\n     *    true if the stanza matches and false otherwise.\n     */\n    isMatch: function (elem)\n    {\n        var nsMatch;\n        var from = null;\n\n        if (this.options.matchBare) {\n            from = Strophe.getBareJidFromJid(elem.getAttribute('from'));\n        } else {\n            from = elem.getAttribute('from');\n        }\n\n        nsMatch = false;\n        if (!this.ns) {\n            nsMatch = true;\n        } else {\n            var that = this;\n            Strophe.forEachChild(elem, null, function (elem) {\n                if (elem.getAttribute(\"xmlns\") == that.ns) {\n                    nsMatch = true;\n                }\n            });\n\n            nsMatch = nsMatch || elem.getAttribute(\"xmlns\") == this.ns;\n        }\n\n        var elem_type = elem.getAttribute(\"type\");\n        if (nsMatch &&\n            (!this.name || Strophe.isTagEqual(elem, this.name)) &&\n            (!this.type || (Array.isArray(this.type) ? this.type.indexOf(elem_type) != -1 : elem_type == this.type)) &&\n            (!this.id || elem.getAttribute(\"id\") == this.id) &&\n            (!this.from || from == this.from)) {\n                return true;\n        }\n\n        return false;\n    },\n\n    /** PrivateFunction: run\n     *  Run the callback on a matching stanza.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The DOM element that triggered the\n     *      Strophe.Handler.\n     *\n     *  Returns:\n     *    A boolean indicating if the handler should remain active.\n     */\n    run: function (elem)\n    {\n        var result = null;\n        try {\n            result = this.handler(elem);\n        } catch (e) {\n            if (e.sourceURL) {\n                Strophe.fatal(\"error: \" + this.handler +\n                              \" \" + e.sourceURL + \":\" +\n                              e.line + \" - \" + e.name + \": \" + e.message);\n            } else if (e.fileName) {\n                if (typeof(console) != \"undefined\") {\n                    console.trace();\n                    console.error(this.handler, \" - error - \", e, e.message);\n                }\n                Strophe.fatal(\"error: \" + this.handler + \" \" +\n                              e.fileName + \":\" + e.lineNumber + \" - \" +\n                              e.name + \": \" + e.message);\n            } else {\n                Strophe.fatal(\"error: \" + e.message + \"\\n\" + e.stack);\n            }\n\n            throw e;\n        }\n\n        return result;\n    },\n\n    /** PrivateFunction: toString\n     *  Get a String representation of the Strophe.Handler object.\n     *\n     *  Returns:\n     *    A String.\n     */\n    toString: function ()\n    {\n        return \"{Handler: \" + this.handler + \"(\" + this.name + \",\" +\n            this.id + \",\" + this.ns + \")}\";\n    }\n};\n\n/** PrivateClass: Strophe.TimedHandler\n *  _Private_ helper class for managing timed handlers.\n *\n *  A Strophe.TimedHandler encapsulates a user provided callback that\n *  should be called after a certain period of time or at regular\n *  intervals.  The return value of the callback determines whether the\n *  Strophe.TimedHandler will continue to fire.\n *\n *  Users will not use Strophe.TimedHandler objects directly, but instead\n *  they will use Strophe.Connection.addTimedHandler() and\n *  Strophe.Connection.deleteTimedHandler().\n */\n\n/** PrivateConstructor: Strophe.TimedHandler\n *  Create and initialize a new Strophe.TimedHandler object.\n *\n *  Parameters:\n *    (Integer) period - The number of milliseconds to wait before the\n *      handler is called.\n *    (Function) handler - The callback to run when the handler fires.  This\n *      function should take no arguments.\n *\n *  Returns:\n *    A new Strophe.TimedHandler object.\n */\nStrophe.TimedHandler = function (period, handler)\n{\n    this.period = period;\n    this.handler = handler;\n\n    this.lastCalled = new Date().getTime();\n    this.user = true;\n};\n\nStrophe.TimedHandler.prototype = {\n    /** PrivateFunction: run\n     *  Run the callback for the Strophe.TimedHandler.\n     *\n     *  Returns:\n     *    true if the Strophe.TimedHandler should be called again, and false\n     *      otherwise.\n     */\n    run: function ()\n    {\n        this.lastCalled = new Date().getTime();\n        return this.handler();\n    },\n\n    /** PrivateFunction: reset\n     *  Reset the last called time for the Strophe.TimedHandler.\n     */\n    reset: function ()\n    {\n        this.lastCalled = new Date().getTime();\n    },\n\n    /** PrivateFunction: toString\n     *  Get a string representation of the Strophe.TimedHandler object.\n     *\n     *  Returns:\n     *    The string representation.\n     */\n    toString: function ()\n    {\n        return \"{TimedHandler: \" + this.handler + \"(\" + this.period +\")}\";\n    }\n};\n\n/** Class: Strophe.Connection\n *  XMPP Connection manager.\n *\n *  This class is the main part of Strophe.  It manages a BOSH or websocket\n *  connection to an XMPP server and dispatches events to the user callbacks\n *  as data arrives. It supports SASL PLAIN, SASL DIGEST-MD5, SASL SCRAM-SHA1\n *  and legacy authentication.\n *\n *  After creating a Strophe.Connection object, the user will typically\n *  call connect() with a user supplied callback to handle connection level\n *  events like authentication failure, disconnection, or connection\n *  complete.\n *\n *  The user will also have several event handlers defined by using\n *  addHandler() and addTimedHandler().  These will allow the user code to\n *  respond to interesting stanzas or do something periodically with the\n *  connection. These handlers will be active once authentication is\n *  finished.\n *\n *  To send data to the connection, use send().\n */\n\n/** Constructor: Strophe.Connection\n *  Create and initialize a Strophe.Connection object.\n *\n *  The transport-protocol for this connection will be chosen automatically\n *  based on the given service parameter. URLs starting with \"ws://\" or\n *  \"wss://\" will use WebSockets, URLs starting with \"http://\", \"https://\"\n *  or without a protocol will use BOSH.\n *\n *  To make Strophe connect to the current host you can leave out the protocol\n *  and host part and just pass the path, e.g.\n *\n *  > var conn = new Strophe.Connection(\"/http-bind/\");\n *\n *  WebSocket options:\n *\n *  If you want to connect to the current host with a WebSocket connection you\n *  can tell Strophe to use WebSockets through a \"protocol\" attribute in the\n *  optional options parameter. Valid values are \"ws\" for WebSocket and \"wss\"\n *  for Secure WebSocket.\n *  So to connect to \"wss://CURRENT_HOSTNAME/xmpp-websocket\" you would call\n *\n *  > var conn = new Strophe.Connection(\"/xmpp-websocket/\", {protocol: \"wss\"});\n *\n *  Note that relative URLs _NOT_ starting with a \"/\" will also include the path\n *  of the current site.\n *\n *  Also because downgrading security is not permitted by browsers, when using\n *  relative URLs both BOSH and WebSocket connections will use their secure\n *  variants if the current connection to the site is also secure (https).\n *\n *  BOSH options:\n *\n *  By adding \"sync\" to the options, you can control if requests will\n *  be made synchronously or not. The default behaviour is asynchronous.\n *  If you want to make requests synchronous, make \"sync\" evaluate to true:\n *  > var conn = new Strophe.Connection(\"/http-bind/\", {sync: true});\n *\n *  You can also toggle this on an already established connection:\n *  > conn.options.sync = true;\n *\n *  The \"customHeaders\" option can be used to provide custom HTTP headers to be\n *  included in the XMLHttpRequests made.\n *\n *  The \"keepalive\" option can be used to instruct Strophe to maintain the\n *  current BOSH session across interruptions such as webpage reloads.\n *\n *  It will do this by caching the sessions tokens in sessionStorage, and when\n *  \"restore\" is called it will check whether there are cached tokens with\n *  which it can resume an existing session.\n *\n *  Parameters:\n *    (String) service - The BOSH or WebSocket service URL.\n *    (Object) options - A hash of configuration options\n *\n *  Returns:\n *    A new Strophe.Connection object.\n */\nStrophe.Connection = function (service, options)\n{\n    // The service URL\n    this.service = service;\n\n    // Configuration options\n    this.options = options || {};\n    var proto = this.options.protocol || \"\";\n\n    // Select protocal based on service or options\n    if (service.indexOf(\"ws:\") === 0 || service.indexOf(\"wss:\") === 0 ||\n            proto.indexOf(\"ws\") === 0) {\n        this._proto = new Strophe.Websocket(this);\n    } else {\n        this._proto = new Strophe.Bosh(this);\n    }\n\n    /* The connected JID. */\n    this.jid = \"\";\n    /* the JIDs domain */\n    this.domain = null;\n    /* stream:features */\n    this.features = null;\n\n    // SASL\n    this._sasl_data = {};\n    this.do_session = false;\n    this.do_bind = false;\n\n    // handler lists\n    this.timedHandlers = [];\n    this.handlers = [];\n    this.removeTimeds = [];\n    this.removeHandlers = [];\n    this.addTimeds = [];\n    this.addHandlers = [];\n\n    this._authentication = {};\n    this._idleTimeout = null;\n    this._disconnectTimeout = null;\n\n    this.authenticated = false;\n    this.connected = false;\n    this.disconnecting = false;\n    this.do_authentication = true;\n    this.paused = false;\n    this.restored = false;\n\n    this._data = [];\n    this._uniqueId = 0;\n\n    this._sasl_success_handler = null;\n    this._sasl_failure_handler = null;\n    this._sasl_challenge_handler = null;\n\n    // Max retries before disconnecting\n    this.maxRetries = 5;\n\n    // setup onIdle callback every 1/10th of a second\n    this._idleTimeout = setTimeout(this._onIdle.bind(this), 100);\n\n    // initialize plugins\n    for (var k in Strophe._connectionPlugins) {\n        if (Strophe._connectionPlugins.hasOwnProperty(k)) {\n            var ptype = Strophe._connectionPlugins[k];\n            // jslint complaints about the below line, but this is fine\n            var F = function () {}; // jshint ignore:line\n            F.prototype = ptype;\n            this[k] = new F();\n            this[k].init(this);\n        }\n    }\n};\n\nStrophe.Connection.prototype = {\n    /** Function: reset\n     *  Reset the connection.\n     *\n     *  This function should be called after a connection is disconnected\n     *  before that connection is reused.\n     */\n    reset: function ()\n    {\n        this._proto._reset();\n\n        // SASL\n        this.do_session = false;\n        this.do_bind = false;\n\n        // handler lists\n        this.timedHandlers = [];\n        this.handlers = [];\n        this.removeTimeds = [];\n        this.removeHandlers = [];\n        this.addTimeds = [];\n        this.addHandlers = [];\n        this._authentication = {};\n\n        this.authenticated = false;\n        this.connected = false;\n        this.disconnecting = false;\n        this.restored = false;\n\n        this._data = [];\n        this._requests = [];\n        this._uniqueId = 0;\n    },\n\n    /** Function: pause\n     *  Pause the request manager.\n     *\n     *  This will prevent Strophe from sending any more requests to the\n     *  server.  This is very useful for temporarily pausing\n     *  BOSH-Connections while a lot of send() calls are happening quickly.\n     *  This causes Strophe to send the data in a single request, saving\n     *  many request trips.\n     */\n    pause: function ()\n    {\n        this.paused = true;\n    },\n\n    /** Function: resume\n     *  Resume the request manager.\n     *\n     *  This resumes after pause() has been called.\n     */\n    resume: function ()\n    {\n        this.paused = false;\n    },\n\n    /** Function: getUniqueId\n     *  Generate a unique ID for use in <iq/> elements.\n     *\n     *  All <iq/> stanzas are required to have unique id attributes.  This\n     *  function makes creating these easy.  Each connection instance has\n     *  a counter which starts from zero, and the value of this counter\n     *  plus a colon followed by the suffix becomes the unique id. If no\n     *  suffix is supplied, the counter is used as the unique id.\n     *\n     *  Suffixes are used to make debugging easier when reading the stream\n     *  data, and their use is recommended.  The counter resets to 0 for\n     *  every new connection for the same reason.  For connections to the\n     *  same server that authenticate the same way, all the ids should be\n     *  the same, which makes it easy to see changes.  This is useful for\n     *  automated testing as well.\n     *\n     *  Parameters:\n     *    (String) suffix - A optional suffix to append to the id.\n     *\n     *  Returns:\n     *    A unique string to be used for the id attribute.\n     */\n    getUniqueId: function(suffix) {\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random() * 16 | 0,\n                v = c == 'x' ? r : r & 0x3 | 0x8;\n            return v.toString(16);\n        });\n        if (typeof(suffix) == \"string\" || typeof(suffix) == \"number\") {\n            return uuid + \":\" + suffix;\n        } else {\n            return uuid + \"\";\n        }\n    },\n\n    /** Function: connect\n     *  Starts the connection process.\n     *\n     *  As the connection process proceeds, the user supplied callback will\n     *  be triggered multiple times with status updates.  The callback\n     *  should take two arguments - the status code and the error condition.\n     *\n     *  The status code will be one of the values in the Strophe.Status\n     *  constants.  The error condition will be one of the conditions\n     *  defined in RFC 3920 or the condition 'strophe-parsererror'.\n     *\n     *  The Parameters _wait_, _hold_ and _route_ are optional and only relevant\n     *  for BOSH connections. Please see XEP 124 for a more detailed explanation\n     *  of the optional parameters.\n     *\n     *  Parameters:\n     *    (String) jid - The user's JID.  This may be a bare JID,\n     *      or a full JID.  If a node is not supplied, SASL ANONYMOUS\n     *      authentication will be attempted.\n     *    (String) pass - The user's password.\n     *    (Function) callback - The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (String) route - The optional route value.\n     *    (String) authcid - The optional alternative authentication identity\n     *      (username) if intending to impersonate another user.\n     */\n    connect: function (jid, pass, callback, wait, hold, route, authcid)\n    {\n        this.jid = jid;\n        /** Variable: authzid\n         *  Authorization identity.\n         */\n        this.authzid = Strophe.getBareJidFromJid(this.jid);\n        /** Variable: authcid\n         *  Authentication identity (User name).\n         */\n        this.authcid = authcid || Strophe.getNodeFromJid(this.jid);\n        /** Variable: pass\n         *  Authentication identity (User password).\n         */\n        this.pass = pass;\n        /** Variable: servtype\n         *  Digest MD5 compatibility.\n         */\n        this.servtype = \"xmpp\";\n        this.connect_callback = callback;\n        this.disconnecting = false;\n        this.connected = false;\n        this.authenticated = false;\n        this.restored = false;\n\n        // parse jid for domain\n        this.domain = Strophe.getDomainFromJid(this.jid);\n\n        this._changeConnectStatus(Strophe.Status.CONNECTING, null);\n\n        this._proto._connect(wait, hold, route);\n    },\n\n    /** Function: attach\n     *  Attach to an already created and authenticated BOSH session.\n     *\n     *  This function is provided to allow Strophe to attach to BOSH\n     *  sessions which have been created externally, perhaps by a Web\n     *  application.  This is often used to support auto-login type features\n     *  without putting user credentials into the page.\n     *\n     *  Parameters:\n     *    (String) jid - The full JID that is bound by the session.\n     *    (String) sid - The SID of the BOSH session.\n     *    (String) rid - The current RID of the BOSH session.  This RID\n     *      will be used by the next request.\n     *    (Function) callback The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    attach: function (jid, sid, rid, callback, wait, hold, wind)\n    {\n        if (this._proto instanceof Strophe.Bosh) {\n            this._proto._attach(jid, sid, rid, callback, wait, hold, wind);\n        } else {\n            throw {\n                name: 'StropheSessionError',\n                message: 'The \"attach\" method can only be used with a BOSH connection.'\n            };\n        }\n    },\n\n    /** Function: restore\n     *  Attempt to restore a cached BOSH session.\n     *\n     *  This function is only useful in conjunction with providing the\n     *  \"keepalive\":true option when instantiating a new Strophe.Connection.\n     *\n     *  When \"keepalive\" is set to true, Strophe will cache the BOSH tokens\n     *  RID (Request ID) and SID (Session ID) and then when this function is\n     *  called, it will attempt to restore the session from those cached\n     *  tokens.\n     *\n     *  This function must therefore be called instead of connect or attach.\n     *\n     *  For an example on how to use it, please see examples/restore.js\n     *\n     *  Parameters:\n     *    (String) jid - The user's JID.  This may be a bare JID or a full JID.\n     *    (Function) callback - The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    restore: function (jid, callback, wait, hold, wind)\n    {\n        if (this._sessionCachingSupported()) {\n            this._proto._restore(jid, callback, wait, hold, wind);\n        } else {\n            throw {\n                name: 'StropheSessionError',\n                message: 'The \"restore\" method can only be used with a BOSH connection.'\n            };\n        }\n    },\n\n    /** PrivateFunction: _sessionCachingSupported\n     * Checks whether sessionStorage and JSON are supported and whether we're\n     * using BOSH.\n     */\n    _sessionCachingSupported: function ()\n    {\n        if (this._proto instanceof Strophe.Bosh) {\n            if (!JSON) { return false; }\n            try {\n                window.sessionStorage.setItem('_strophe_', '_strophe_');\n                window.sessionStorage.removeItem('_strophe_');\n            } catch (e) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    },\n\n    /** Function: xmlInput\n     *  User overrideable function that receives XML data coming into the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.xmlInput = function (elem) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Due to limitations of current Browsers' XML-Parsers the opening and closing\n     *  <stream> tag for WebSocket-Connoctions will be passed as selfclosing here.\n     *\n     *  BOSH-Connections will have all stanzas wrapped in a <body> tag. See\n     *  <Strophe.Bosh.strip> if you want to strip this tag.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XML data received by the connection.\n     */\n    /* jshint unused:false */\n    xmlInput: function (elem)\n    {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: xmlOutput\n     *  User overrideable function that receives XML data sent to the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.xmlOutput = function (elem) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Due to limitations of current Browsers' XML-Parsers the opening and closing\n     *  <stream> tag for WebSocket-Connoctions will be passed as selfclosing here.\n     *\n     *  BOSH-Connections will have all stanzas wrapped in a <body> tag. See\n     *  <Strophe.Bosh.strip> if you want to strip this tag.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The XMLdata sent by the connection.\n     */\n    /* jshint unused:false */\n    xmlOutput: function (elem)\n    {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: rawInput\n     *  User overrideable function that receives raw data coming into the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.rawInput = function (data) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Parameters:\n     *    (String) data - The data received by the connection.\n     */\n    /* jshint unused:false */\n    rawInput: function (data)\n    {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: rawOutput\n     *  User overrideable function that receives raw data sent to the\n     *  connection.\n     *\n     *  The default function does nothing.  User code can override this with\n     *  > Strophe.Connection.rawOutput = function (data) {\n     *  >   (user code)\n     *  > };\n     *\n     *  Parameters:\n     *    (String) data - The data sent by the connection.\n     */\n    /* jshint unused:false */\n    rawOutput: function (data)\n    {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: nextValidRid\n     *  User overrideable function that receives the new valid rid.\n     *\n     *  The default function does nothing. User code can override this with\n     *  > Strophe.Connection.nextValidRid = function (rid) {\n     *  >    (user code)\n     *  > };\n     *\n     *  Parameters:\n     *    (Number) rid - The next valid rid\n     */\n    /* jshint unused:false */\n    nextValidRid: function (rid)\n    {\n        return;\n    },\n    /* jshint unused:true */\n\n    /** Function: send\n     *  Send a stanza.\n     *\n     *  This function is called to push data onto the send queue to\n     *  go out over the wire.  Whenever a request is sent to the BOSH\n     *  server, all pending data is sent and the queue is flushed.\n     *\n     *  Parameters:\n     *    (XMLElement |\n     *     [XMLElement] |\n     *     Strophe.Builder) elem - The stanza to send.\n     */\n    send: function (elem)\n    {\n        if (elem === null) { return ; }\n        if (typeof(elem.sort) === \"function\") {\n            for (var i = 0; i < elem.length; i++) {\n                this._queueData(elem[i]);\n            }\n        } else if (typeof(elem.tree) === \"function\") {\n            this._queueData(elem.tree());\n        } else {\n            this._queueData(elem);\n        }\n\n        this._proto._send();\n    },\n\n    /** Function: flush\n     *  Immediately send any pending outgoing data.\n     *\n     *  Normally send() queues outgoing data until the next idle period\n     *  (100ms), which optimizes network use in the common cases when\n     *  several send()s are called in succession. flush() can be used to\n     *  immediately send all pending data.\n     */\n    flush: function ()\n    {\n        // cancel the pending idle period and run the idle function\n        // immediately\n        clearTimeout(this._idleTimeout);\n        this._onIdle();\n    },\n\n    /** Function: sendIQ\n     *  Helper function to send IQ stanzas.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The stanza to send.\n     *    (Function) callback - The callback function for a successful request.\n     *    (Function) errback - The callback function for a failed or timed\n     *      out request.  On timeout, the stanza will be null.\n     *    (Integer) timeout - The time specified in milliseconds for a\n     *      timeout to occur.\n     *\n     *  Returns:\n     *    The id used to send the IQ.\n    */\n    sendIQ: function(elem, callback, errback, timeout) {\n        var timeoutHandler = null;\n        var that = this;\n\n        if (typeof(elem.tree) === \"function\") {\n            elem = elem.tree();\n        }\n        var id = elem.getAttribute('id');\n\n        // inject id if not found\n        if (!id) {\n            id = this.getUniqueId(\"sendIQ\");\n            elem.setAttribute(\"id\", id);\n        }\n\n        var expectedFrom = elem.getAttribute(\"to\");\n        var fulljid = this.jid;\n\n        var handler = this.addHandler(function (stanza) {\n            // remove timeout handler if there is one\n            if (timeoutHandler) {\n                that.deleteTimedHandler(timeoutHandler);\n            }\n\n            var acceptable = false;\n            var from = stanza.getAttribute(\"from\");\n            if (from === expectedFrom ||\n               (!expectedFrom &&\n                   (from === Strophe.getBareJidFromJid(fulljid) ||\n                    from === Strophe.getDomainFromJid(fulljid) ||\n                    from === fulljid))) {\n                acceptable = true;\n            }\n\n            if (!acceptable) {\n                throw {\n                    name: \"StropheError\",\n                    message: \"Got answer to IQ from wrong jid:\" + from +\n                             \"\\nExpected jid: \" + expectedFrom\n                };\n            }\n\n            var iqtype = stanza.getAttribute('type');\n            if (iqtype == 'result') {\n                if (callback) {\n                    callback(stanza);\n                }\n            } else if (iqtype == 'error') {\n                if (errback) {\n                    errback(stanza);\n                }\n            } else {\n                throw {\n                    name: \"StropheError\",\n                    message: \"Got bad IQ type of \" + iqtype\n                };\n            }\n        }, null, 'iq', ['error', 'result'], id);\n\n        // if timeout specified, setup timeout handler.\n        if (timeout) {\n            timeoutHandler = this.addTimedHandler(timeout, function () {\n                // get rid of normal handler\n                that.deleteHandler(handler);\n                // call errback on timeout with null stanza\n                if (errback) {\n                    errback(null);\n                }\n                return false;\n            });\n        }\n        this.send(elem);\n        return id;\n    },\n\n    /** PrivateFunction: _queueData\n     *  Queue outgoing data for later sending.  Also ensures that the data\n     *  is a DOMElement.\n     */\n    _queueData: function (element) {\n        if (element === null ||\n            !element.tagName ||\n            !element.childNodes) {\n            throw {\n                name: \"StropheError\",\n                message: \"Cannot queue non-DOMElement.\"\n            };\n        }\n\n        this._data.push(element);\n    },\n\n    /** PrivateFunction: _sendRestart\n     *  Send an xmpp:restart stanza.\n     */\n    _sendRestart: function ()\n    {\n        this._data.push(\"restart\");\n\n        this._proto._sendRestart();\n\n        this._idleTimeout = setTimeout(this._onIdle.bind(this), 100);\n    },\n\n    /** Function: addTimedHandler\n     *  Add a timed handler to the connection.\n     *\n     *  This function adds a timed handler.  The provided handler will\n     *  be called every period milliseconds until it returns false,\n     *  the connection is terminated, or the handler is removed.  Handlers\n     *  that wish to continue being invoked should return true.\n     *\n     *  Because of method binding it is necessary to save the result of\n     *  this function if you wish to remove a handler with\n     *  deleteTimedHandler().\n     *\n     *  Note that user handlers are not active until authentication is\n     *  successful.\n     *\n     *  Parameters:\n     *    (Integer) period - The period of the handler.\n     *    (Function) handler - The callback function.\n     *\n     *  Returns:\n     *    A reference to the handler that can be used to remove it.\n     */\n    addTimedHandler: function (period, handler)\n    {\n        var thand = new Strophe.TimedHandler(period, handler);\n        this.addTimeds.push(thand);\n        return thand;\n    },\n\n    /** Function: deleteTimedHandler\n     *  Delete a timed handler for a connection.\n     *\n     *  This function removes a timed handler from the connection.  The\n     *  handRef parameter is *not* the function passed to addTimedHandler(),\n     *  but is the reference returned from addTimedHandler().\n     *\n     *  Parameters:\n     *    (Strophe.TimedHandler) handRef - The handler reference.\n     */\n    deleteTimedHandler: function (handRef)\n    {\n        // this must be done in the Idle loop so that we don't change\n        // the handlers during iteration\n        this.removeTimeds.push(handRef);\n    },\n\n    /** Function: addHandler\n     *  Add a stanza handler for the connection.\n     *\n     *  This function adds a stanza handler to the connection.  The\n     *  handler callback will be called for any stanza that matches\n     *  the parameters.  Note that if multiple parameters are supplied,\n     *  they must all match for the handler to be invoked.\n     *\n     *  The handler will receive the stanza that triggered it as its argument.\n     *  *The handler should return true if it is to be invoked again;\n     *  returning false will remove the handler after it returns.*\n     *\n     *  As a convenience, the ns parameters applies to the top level element\n     *  and also any of its immediate children.  This is primarily to make\n     *  matching /iq/query elements easy.\n     *\n     *  The options argument contains handler matching flags that affect how\n     *  matches are determined. Currently the only flag is matchBare (a\n     *  boolean). When matchBare is true, the from parameter and the from\n     *  attribute on the stanza will be matched as bare JIDs instead of\n     *  full JIDs. To use this, pass {matchBare: true} as the value of\n     *  options. The default value for matchBare is false.\n     *\n     *  The return value should be saved if you wish to remove the handler\n     *  with deleteHandler().\n     *\n     *  Parameters:\n     *    (Function) handler - The user callback.\n     *    (String) ns - The namespace to match.\n     *    (String) name - The stanza name to match.\n     *    (String) type - The stanza type attribute to match.\n     *    (String) id - The stanza id attribute to match.\n     *    (String) from - The stanza from attribute to match.\n     *    (String) options - The handler options\n     *\n     *  Returns:\n     *    A reference to the handler that can be used to remove it.\n     */\n    addHandler: function (handler, ns, name, type, id, from, options)\n    {\n        var hand = new Strophe.Handler(handler, ns, name, type, id, from, options);\n        this.addHandlers.push(hand);\n        return hand;\n    },\n\n    /** Function: deleteHandler\n     *  Delete a stanza handler for a connection.\n     *\n     *  This function removes a stanza handler from the connection.  The\n     *  handRef parameter is *not* the function passed to addHandler(),\n     *  but is the reference returned from addHandler().\n     *\n     *  Parameters:\n     *    (Strophe.Handler) handRef - The handler reference.\n     */\n    deleteHandler: function (handRef)\n    {\n        // this must be done in the Idle loop so that we don't change\n        // the handlers during iteration\n        this.removeHandlers.push(handRef);\n        // If a handler is being deleted while it is being added,\n        // prevent it from getting added\n        var i = this.addHandlers.indexOf(handRef);\n        if (i >= 0) {\n            this.addHandlers.splice(i, 1);\n        }\n    },\n\n    /** Function: disconnect\n     *  Start the graceful disconnection process.\n     *\n     *  This function starts the disconnection process.  This process starts\n     *  by sending unavailable presence and sending BOSH body of type\n     *  terminate.  A timeout handler makes sure that disconnection happens\n     *  even if the BOSH server does not respond.\n     *  If the Connection object isn't connected, at least tries to abort all pending requests\n     *  so the connection object won't generate successful requests (which were already opened).\n     *\n     *  The user supplied connection callback will be notified of the\n     *  progress as this process happens.\n     *\n     *  Parameters:\n     *    (String) reason - The reason the disconnect is occuring.\n     */\n    disconnect: function (reason)\n    {\n        this._changeConnectStatus(Strophe.Status.DISCONNECTING, reason);\n\n        Strophe.info(\"Disconnect was called because: \" + reason);\n        if (this.connected) {\n            var pres = false;\n            this.disconnecting = true;\n            if (this.authenticated) {\n                pres = $pres({\n                    xmlns: Strophe.NS.CLIENT,\n                    type: 'unavailable'\n                });\n            }\n            // setup timeout handler\n            this._disconnectTimeout = this._addSysTimedHandler(\n                3000, this._onDisconnectTimeout.bind(this));\n            this._proto._disconnect(pres);\n        } else {\n            Strophe.info(\"Disconnect was called before Strophe connected to the server\");\n            this._proto._abortAllRequests();\n        }\n    },\n\n    /** PrivateFunction: _changeConnectStatus\n     *  _Private_ helper function that makes sure plugins and the user's\n     *  callback are notified of connection status changes.\n     *\n     *  Parameters:\n     *    (Integer) status - the new connection status, one of the values\n     *      in Strophe.Status\n     *    (String) condition - the error condition or null\n     */\n    _changeConnectStatus: function (status, condition)\n    {\n        // notify all plugins listening for status changes\n        for (var k in Strophe._connectionPlugins) {\n            if (Strophe._connectionPlugins.hasOwnProperty(k)) {\n                var plugin = this[k];\n                if (plugin.statusChanged) {\n                    try {\n                        plugin.statusChanged(status, condition);\n                    } catch (err) {\n                        Strophe.error(\"\" + k + \" plugin caused an exception \" +\n                                      \"changing status: \" + err);\n                    }\n                }\n            }\n        }\n\n        // notify the user's callback\n        if (this.connect_callback) {\n            try {\n                this.connect_callback(status, condition);\n            } catch (e) {\n                Strophe.error(\"User connection callback caused an \" +\n                              \"exception: \" + e);\n            }\n        }\n    },\n\n    /** PrivateFunction: _doDisconnect\n     *  _Private_ function to disconnect.\n     *\n     *  This is the last piece of the disconnection logic.  This resets the\n     *  connection and alerts the user's connection callback.\n     */\n    _doDisconnect: function (condition)\n    {\n        if (typeof this._idleTimeout == \"number\") {\n            clearTimeout(this._idleTimeout);\n        }\n\n        // Cancel Disconnect Timeout\n        if (this._disconnectTimeout !== null) {\n            this.deleteTimedHandler(this._disconnectTimeout);\n            this._disconnectTimeout = null;\n        }\n\n        Strophe.info(\"_doDisconnect was called\");\n        this._proto._doDisconnect();\n\n        this.authenticated = false;\n        this.disconnecting = false;\n        this.restored = false;\n\n        // delete handlers\n        this.handlers = [];\n        this.timedHandlers = [];\n        this.removeTimeds = [];\n        this.removeHandlers = [];\n        this.addTimeds = [];\n        this.addHandlers = [];\n\n        // tell the parent we disconnected\n        this._changeConnectStatus(Strophe.Status.DISCONNECTED, condition);\n        this.connected = false;\n    },\n\n    /** PrivateFunction: _dataRecv\n     *  _Private_ handler to processes incoming data from the the connection.\n     *\n     *  Except for _connect_cb handling the initial connection request,\n     *  this function handles the incoming data for all requests.  This\n     *  function also fires stanza handlers that match each incoming\n     *  stanza.\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The request that has data ready.\n     *    (string) req - The stanza a raw string (optiona).\n     */\n    _dataRecv: function (req, raw)\n    {\n        Strophe.info(\"_dataRecv called\");\n        var elem = this._proto._reqToData(req);\n        if (elem === null) { return; }\n\n        if (this.xmlInput !== Strophe.Connection.prototype.xmlInput) {\n            if (elem.nodeName === this._proto.strip && elem.childNodes.length) {\n                this.xmlInput(elem.childNodes[0]);\n            } else {\n                this.xmlInput(elem);\n            }\n        }\n        if (this.rawInput !== Strophe.Connection.prototype.rawInput) {\n            if (raw) {\n                this.rawInput(raw);\n            } else {\n                this.rawInput(Strophe.serialize(elem));\n            }\n        }\n\n        // remove handlers scheduled for deletion\n        var i, hand;\n        while (this.removeHandlers.length > 0) {\n            hand = this.removeHandlers.pop();\n            i = this.handlers.indexOf(hand);\n            if (i >= 0) {\n                this.handlers.splice(i, 1);\n            }\n        }\n\n        // add handlers scheduled for addition\n        while (this.addHandlers.length > 0) {\n            this.handlers.push(this.addHandlers.pop());\n        }\n\n        // handle graceful disconnect\n        if (this.disconnecting && this._proto._emptyQueue()) {\n            this._doDisconnect();\n            return;\n        }\n\n        var type = elem.getAttribute(\"type\");\n        var cond, conflict;\n        if (type !== null && type == \"terminate\") {\n            // Don't process stanzas that come in after disconnect\n            if (this.disconnecting) {\n                return;\n            }\n\n            // an error occurred\n            cond = elem.getAttribute(\"condition\");\n            conflict = elem.getElementsByTagName(\"conflict\");\n            if (cond !== null) {\n                if (cond == \"remote-stream-error\" && conflict.length > 0) {\n                    cond = \"conflict\";\n                }\n                this._changeConnectStatus(Strophe.Status.CONNFAIL, cond);\n            } else {\n                this._changeConnectStatus(Strophe.Status.CONNFAIL, \"unknown\");\n            }\n            this._doDisconnect(cond);\n            return;\n        }\n\n        // send each incoming stanza through the handler chain\n        var that = this;\n        Strophe.forEachChild(elem, null, function (child) {\n            var i, newList;\n            // process handlers\n            newList = that.handlers;\n            that.handlers = [];\n            for (i = 0; i < newList.length; i++) {\n                var hand = newList[i];\n                // encapsulate 'handler.run' not to lose the whole handler list if\n                // one of the handlers throws an exception\n                try {\n                    if (hand.isMatch(child) &&\n                        (that.authenticated || !hand.user)) {\n                        if (hand.run(child)) {\n                            that.handlers.push(hand);\n                        }\n                    } else {\n                        that.handlers.push(hand);\n                    }\n                } catch(e) {\n                    // if the handler throws an exception, we consider it as false\n                    Strophe.warn('Removing Strophe handlers due to uncaught exception: ' + e.message);\n                }\n            }\n        });\n    },\n\n\n    /** Attribute: mechanisms\n     *  SASL Mechanisms available for Conncection.\n     */\n    mechanisms: {},\n\n    /** PrivateFunction: _connect_cb\n     *  _Private_ handler for initial connection request.\n     *\n     *  This handler is used to process the initial connection request\n     *  response from the BOSH server. It is used to set up authentication\n     *  handlers and start the authentication process.\n     *\n     *  SASL authentication will be attempted if available, otherwise\n     *  the code will fall back to legacy authentication.\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The current request.\n     *    (Function) _callback - low level (xmpp) connect callback function.\n     *      Useful for plugins with their own xmpp connect callback (when their)\n     *      want to do something special).\n     */\n    _connect_cb: function (req, _callback, raw)\n    {\n        Strophe.info(\"_connect_cb was called\");\n\n        this.connected = true;\n\n        var bodyWrap;\n        try {\n            bodyWrap = this._proto._reqToData(req);\n        } catch (e) {\n            if (e != \"badformat\") { throw e; }\n            this._changeConnectStatus(Strophe.Status.CONNFAIL, 'bad-format');\n            this._doDisconnect('bad-format');\n        }\n        if (!bodyWrap) { return; }\n\n        if (this.xmlInput !== Strophe.Connection.prototype.xmlInput) {\n            if (bodyWrap.nodeName === this._proto.strip && bodyWrap.childNodes.length) {\n                this.xmlInput(bodyWrap.childNodes[0]);\n            } else {\n                this.xmlInput(bodyWrap);\n            }\n        }\n        if (this.rawInput !== Strophe.Connection.prototype.rawInput) {\n            if (raw) {\n                this.rawInput(raw);\n            } else {\n                this.rawInput(Strophe.serialize(bodyWrap));\n            }\n        }\n\n        var conncheck = this._proto._connect_cb(bodyWrap);\n        if (conncheck === Strophe.Status.CONNFAIL) {\n            return;\n        }\n\n        this._authentication.sasl_scram_sha1 = false;\n        this._authentication.sasl_plain = false;\n        this._authentication.sasl_digest_md5 = false;\n        this._authentication.sasl_anonymous = false;\n\n        this._authentication.legacy_auth = false;\n\n        // Check for the stream:features tag\n        var hasFeatures;\n        if (bodyWrap.getElementsByTagNameNS) {\n            hasFeatures = bodyWrap.getElementsByTagNameNS(Strophe.NS.STREAM, \"features\").length > 0;\n        } else {\n            hasFeatures = bodyWrap.getElementsByTagName(\"stream:features\").length > 0 || bodyWrap.getElementsByTagName(\"features\").length > 0;\n        }\n        var mechanisms = bodyWrap.getElementsByTagName(\"mechanism\");\n        var matched = [];\n        var i, mech, found_authentication = false;\n        if (!hasFeatures) {\n            this._proto._no_auth_received(_callback);\n            return;\n        }\n        if (mechanisms.length > 0) {\n            for (i = 0; i < mechanisms.length; i++) {\n                mech = Strophe.getText(mechanisms[i]);\n                if (this.mechanisms[mech]) matched.push(this.mechanisms[mech]);\n            }\n        }\n        this._authentication.legacy_auth =\n            bodyWrap.getElementsByTagName(\"auth\").length > 0;\n        found_authentication = this._authentication.legacy_auth ||\n            matched.length > 0;\n        if (!found_authentication) {\n            this._proto._no_auth_received(_callback);\n            return;\n        }\n        if (this.do_authentication !== false)\n            this.authenticate(matched);\n    },\n\n    /** Function: authenticate\n     * Set up authentication\n     *\n     *  Contiunues the initial connection request by setting up authentication\n     *  handlers and start the authentication process.\n     *\n     *  SASL authentication will be attempted if available, otherwise\n     *  the code will fall back to legacy authentication.\n     *\n     */\n    authenticate: function (matched)\n    {\n      var i;\n      // Sorting matched mechanisms according to priority.\n      for (i = 0; i < matched.length - 1; ++i) {\n        var higher = i;\n        for (var j = i + 1; j < matched.length; ++j) {\n          if (matched[j].prototype.priority > matched[higher].prototype.priority) {\n            higher = j;\n          }\n        }\n        if (higher != i) {\n          var swap = matched[i];\n          matched[i] = matched[higher];\n          matched[higher] = swap;\n        }\n      }\n\n      // run each mechanism\n      var mechanism_found = false;\n      for (i = 0; i < matched.length; ++i) {\n        if (!matched[i].test(this)) continue;\n\n        this._sasl_success_handler = this._addSysHandler(\n          this._sasl_success_cb.bind(this), null,\n          \"success\", null, null);\n        this._sasl_failure_handler = this._addSysHandler(\n          this._sasl_failure_cb.bind(this), null,\n          \"failure\", null, null);\n        this._sasl_challenge_handler = this._addSysHandler(\n          this._sasl_challenge_cb.bind(this), null,\n          \"challenge\", null, null);\n\n        this._sasl_mechanism = new matched[i]();\n        this._sasl_mechanism.onStart(this);\n\n        var request_auth_exchange = $build(\"auth\", {\n          xmlns: Strophe.NS.SASL,\n          mechanism: this._sasl_mechanism.name\n        });\n\n        if (this._sasl_mechanism.isClientFirst) {\n          var response = this._sasl_mechanism.onChallenge(this, null);\n          request_auth_exchange.t(Base64.encode(response));\n        }\n\n        this.send(request_auth_exchange.tree());\n\n        mechanism_found = true;\n        break;\n      }\n\n      if (!mechanism_found) {\n        // if none of the mechanism worked\n        if (Strophe.getNodeFromJid(this.jid) === null) {\n            // we don't have a node, which is required for non-anonymous\n            // client connections\n            this._changeConnectStatus(Strophe.Status.CONNFAIL,\n                                      'x-strophe-bad-non-anon-jid');\n            this.disconnect('x-strophe-bad-non-anon-jid');\n        } else {\n          // fall back to legacy authentication\n          this._changeConnectStatus(Strophe.Status.AUTHENTICATING, null);\n          this._addSysHandler(this._auth1_cb.bind(this), null, null,\n                              null, \"_auth_1\");\n\n          this.send($iq({\n            type: \"get\",\n            to: this.domain,\n            id: \"_auth_1\"\n          }).c(\"query\", {\n            xmlns: Strophe.NS.AUTH\n          }).c(\"username\", {}).t(Strophe.getNodeFromJid(this.jid)).tree());\n        }\n      }\n\n    },\n\n    _sasl_challenge_cb: function(elem) {\n      var challenge = Base64.decode(Strophe.getText(elem));\n      var response = this._sasl_mechanism.onChallenge(this, challenge);\n\n      var stanza = $build('response', {\n          xmlns: Strophe.NS.SASL\n      });\n      if (response !== \"\") {\n        stanza.t(Base64.encode(response));\n      }\n      this.send(stanza.tree());\n      return true;\n    },\n\n    /** PrivateFunction: _auth1_cb\n     *  _Private_ handler for legacy authentication.\n     *\n     *  This handler is called in response to the initial <iq type='get'/>\n     *  for legacy authentication.  It builds an authentication <iq/> and\n     *  sends it, creating a handler (calling back to _auth2_cb()) to\n     *  handle the result\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The stanza that triggered the callback.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    /* jshint unused:false */\n    _auth1_cb: function (elem)\n    {\n        // build plaintext auth iq\n        var iq = $iq({type: \"set\", id: \"_auth_2\"})\n            .c('query', {xmlns: Strophe.NS.AUTH})\n            .c('username', {}).t(Strophe.getNodeFromJid(this.jid))\n            .up()\n            .c('password').t(this.pass);\n\n        if (!Strophe.getResourceFromJid(this.jid)) {\n            // since the user has not supplied a resource, we pick\n            // a default one here.  unlike other auth methods, the server\n            // cannot do this for us.\n            this.jid = Strophe.getBareJidFromJid(this.jid) + '/strophe';\n        }\n        iq.up().c('resource', {}).t(Strophe.getResourceFromJid(this.jid));\n\n        this._addSysHandler(this._auth2_cb.bind(this), null,\n                            null, null, \"_auth_2\");\n\n        this.send(iq.tree());\n\n        return false;\n    },\n    /* jshint unused:true */\n\n    /** PrivateFunction: _sasl_success_cb\n     *  _Private_ handler for succesful SASL authentication.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_success_cb: function (elem)\n    {\n        if (this._sasl_data[\"server-signature\"]) {\n            var serverSignature;\n            var success = Base64.decode(Strophe.getText(elem));\n            var attribMatch = /([a-z]+)=([^,]+)(,|$)/;\n            var matches = success.match(attribMatch);\n            if (matches[1] == \"v\") {\n                serverSignature = matches[2];\n            }\n\n            if (serverSignature != this._sasl_data[\"server-signature\"]) {\n              // remove old handlers\n              this.deleteHandler(this._sasl_failure_handler);\n              this._sasl_failure_handler = null;\n              if (this._sasl_challenge_handler) {\n                this.deleteHandler(this._sasl_challenge_handler);\n                this._sasl_challenge_handler = null;\n              }\n\n              this._sasl_data = {};\n              return this._sasl_failure_cb(null);\n            }\n        }\n\n        Strophe.info(\"SASL authentication succeeded.\");\n\n        if(this._sasl_mechanism)\n          this._sasl_mechanism.onSuccess();\n\n        // remove old handlers\n        this.deleteHandler(this._sasl_failure_handler);\n        this._sasl_failure_handler = null;\n        if (this._sasl_challenge_handler) {\n            this.deleteHandler(this._sasl_challenge_handler);\n            this._sasl_challenge_handler = null;\n        }\n\n        var streamfeature_handlers = [];\n        var wrapper = function(handlers, elem) {\n            while (handlers.length) {\n                this.deleteHandler(handlers.pop());\n            }\n            this._sasl_auth1_cb.bind(this)(elem);\n            return false;\n        };\n        streamfeature_handlers.push(this._addSysHandler(function(elem) {\n            wrapper.bind(this)(streamfeature_handlers, elem);\n        }.bind(this), null, \"stream:features\", null, null));\n        streamfeature_handlers.push(this._addSysHandler(function(elem) {\n            wrapper.bind(this)(streamfeature_handlers, elem);\n        }.bind(this), Strophe.NS.STREAM, \"features\", null, null));\n\n        // we must send an xmpp:restart now\n        this._sendRestart();\n\n        return false;\n    },\n\n    /** PrivateFunction: _sasl_auth1_cb\n     *  _Private_ handler to start stream binding.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_auth1_cb: function (elem)\n    {\n        // save stream:features for future usage\n        this.features = elem;\n\n        var i, child;\n\n        for (i = 0; i < elem.childNodes.length; i++) {\n            child = elem.childNodes[i];\n            if (child.nodeName == 'bind') {\n                this.do_bind = true;\n            }\n\n            if (child.nodeName == 'session') {\n                this.do_session = true;\n            }\n        }\n\n        if (!this.do_bind) {\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n            return false;\n        } else {\n            this._addSysHandler(this._sasl_bind_cb.bind(this), null, null,\n                                null, \"_bind_auth_2\");\n\n            var resource = Strophe.getResourceFromJid(this.jid);\n            if (resource) {\n                this.send($iq({type: \"set\", id: \"_bind_auth_2\"})\n                          .c('bind', {xmlns: Strophe.NS.BIND})\n                          .c('resource', {}).t(resource).tree());\n            } else {\n                this.send($iq({type: \"set\", id: \"_bind_auth_2\"})\n                          .c('bind', {xmlns: Strophe.NS.BIND})\n                          .tree());\n            }\n        }\n\n        return false;\n    },\n\n    /** PrivateFunction: _sasl_bind_cb\n     *  _Private_ handler for binding result and session start.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_bind_cb: function (elem)\n    {\n        if (elem.getAttribute(\"type\") == \"error\") {\n            Strophe.info(\"SASL binding failed.\");\n            var conflict = elem.getElementsByTagName(\"conflict\"), condition;\n            if (conflict.length > 0) {\n                condition = 'conflict';\n            }\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, condition);\n            return false;\n        }\n\n        // TODO - need to grab errors\n        var bind = elem.getElementsByTagName(\"bind\");\n        var jidNode;\n        if (bind.length > 0) {\n            // Grab jid\n            jidNode = bind[0].getElementsByTagName(\"jid\");\n            if (jidNode.length > 0) {\n                this.jid = Strophe.getText(jidNode[0]);\n\n                if (this.do_session) {\n                    this._addSysHandler(this._sasl_session_cb.bind(this),\n                                        null, null, null, \"_session_auth_2\");\n\n                    this.send($iq({type: \"set\", id: \"_session_auth_2\"})\n                                  .c('session', {xmlns: Strophe.NS.SESSION})\n                                  .tree());\n                } else {\n                    this.authenticated = true;\n                    this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n                }\n            }\n        } else {\n            Strophe.info(\"SASL binding failed.\");\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n            return false;\n        }\n    },\n\n    /** PrivateFunction: _sasl_session_cb\n     *  _Private_ handler to finish successful SASL connection.\n     *\n     *  This sets Connection.authenticated to true on success, which\n     *  starts the processing of user handlers.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _sasl_session_cb: function (elem)\n    {\n        if (elem.getAttribute(\"type\") == \"result\") {\n            this.authenticated = true;\n            this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n        } else if (elem.getAttribute(\"type\") == \"error\") {\n            Strophe.info(\"Session creation failed.\");\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n            return false;\n        }\n\n        return false;\n    },\n\n    /** PrivateFunction: _sasl_failure_cb\n     *  _Private_ handler for SASL authentication failure.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The matching stanza.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    /* jshint unused:false */\n    _sasl_failure_cb: function (elem)\n    {\n        // delete unneeded handlers\n        if (this._sasl_success_handler) {\n            this.deleteHandler(this._sasl_success_handler);\n            this._sasl_success_handler = null;\n        }\n        if (this._sasl_challenge_handler) {\n            this.deleteHandler(this._sasl_challenge_handler);\n            this._sasl_challenge_handler = null;\n        }\n\n        if(this._sasl_mechanism)\n          this._sasl_mechanism.onFailure();\n        this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n        return false;\n    },\n    /* jshint unused:true */\n\n    /** PrivateFunction: _auth2_cb\n     *  _Private_ handler to finish legacy authentication.\n     *\n     *  This handler is called when the result from the jabber:iq:auth\n     *  <iq/> stanza is returned.\n     *\n     *  Parameters:\n     *    (XMLElement) elem - The stanza that triggered the callback.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _auth2_cb: function (elem)\n    {\n        if (elem.getAttribute(\"type\") == \"result\") {\n            this.authenticated = true;\n            this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n        } else if (elem.getAttribute(\"type\") == \"error\") {\n            this._changeConnectStatus(Strophe.Status.AUTHFAIL, null);\n            this.disconnect('authentication failed');\n        }\n\n        return false;\n    },\n\n    /** PrivateFunction: _addSysTimedHandler\n     *  _Private_ function to add a system level timed handler.\n     *\n     *  This function is used to add a Strophe.TimedHandler for the\n     *  library code.  System timed handlers are allowed to run before\n     *  authentication is complete.\n     *\n     *  Parameters:\n     *    (Integer) period - The period of the handler.\n     *    (Function) handler - The callback function.\n     */\n    _addSysTimedHandler: function (period, handler)\n    {\n        var thand = new Strophe.TimedHandler(period, handler);\n        thand.user = false;\n        this.addTimeds.push(thand);\n        return thand;\n    },\n\n    /** PrivateFunction: _addSysHandler\n     *  _Private_ function to add a system level stanza handler.\n     *\n     *  This function is used to add a Strophe.Handler for the\n     *  library code.  System stanza handlers are allowed to run before\n     *  authentication is complete.\n     *\n     *  Parameters:\n     *    (Function) handler - The callback function.\n     *    (String) ns - The namespace to match.\n     *    (String) name - The stanza name to match.\n     *    (String) type - The stanza type attribute to match.\n     *    (String) id - The stanza id attribute to match.\n     */\n    _addSysHandler: function (handler, ns, name, type, id)\n    {\n        var hand = new Strophe.Handler(handler, ns, name, type, id);\n        hand.user = false;\n        this.addHandlers.push(hand);\n        return hand;\n    },\n\n    /** PrivateFunction: _onDisconnectTimeout\n     *  _Private_ timeout handler for handling non-graceful disconnection.\n     *\n     *  If the graceful disconnect process does not complete within the\n     *  time allotted, this handler finishes the disconnect anyway.\n     *\n     *  Returns:\n     *    false to remove the handler.\n     */\n    _onDisconnectTimeout: function ()\n    {\n        Strophe.info(\"_onDisconnectTimeout was called\");\n\n        this._proto._onDisconnectTimeout();\n\n        // actually disconnect\n        this._doDisconnect();\n\n        return false;\n    },\n\n    /** PrivateFunction: _onIdle\n     *  _Private_ handler to process events during idle cycle.\n     *\n     *  This handler is called every 100ms to fire timed handlers that\n     *  are ready and keep poll requests going.\n     */\n    _onIdle: function ()\n    {\n        var i, thand, since, newList;\n\n        // add timed handlers scheduled for addition\n        // NOTE: we add before remove in the case a timed handler is\n        // added and then deleted before the next _onIdle() call.\n        while (this.addTimeds.length > 0) {\n            this.timedHandlers.push(this.addTimeds.pop());\n        }\n\n        // remove timed handlers that have been scheduled for deletion\n        while (this.removeTimeds.length > 0) {\n            thand = this.removeTimeds.pop();\n            i = this.timedHandlers.indexOf(thand);\n            if (i >= 0) {\n                this.timedHandlers.splice(i, 1);\n            }\n        }\n\n        // call ready timed handlers\n        var now = new Date().getTime();\n        newList = [];\n        for (i = 0; i < this.timedHandlers.length; i++) {\n            thand = this.timedHandlers[i];\n            if (this.authenticated || !thand.user) {\n                since = thand.lastCalled + thand.period;\n                if (since - now <= 0) {\n                    if (thand.run()) {\n                        newList.push(thand);\n                    }\n                } else {\n                    newList.push(thand);\n                }\n            }\n        }\n        this.timedHandlers = newList;\n\n        clearTimeout(this._idleTimeout);\n\n        this._proto._onIdle();\n\n        // reactivate the timer only if connected\n        if (this.connected) {\n            this._idleTimeout = setTimeout(this._onIdle.bind(this), 100);\n        }\n    }\n};\n\n/** Class: Strophe.SASLMechanism\n *\n *  encapsulates SASL authentication mechanisms.\n *\n *  User code may override the priority for each mechanism or disable it completely.\n *  See <priority> for information about changing priority and <test> for informatian on\n *  how to disable a mechanism.\n *\n *  By default, all mechanisms are enabled and the priorities are\n *\n *  SCRAM-SHA1 - 40\n *  DIGEST-MD5 - 30\n *  Plain - 20\n */\n\n/**\n * PrivateConstructor: Strophe.SASLMechanism\n * SASL auth mechanism abstraction.\n *\n *  Parameters:\n *    (String) name - SASL Mechanism name.\n *    (Boolean) isClientFirst - If client should send response first without challenge.\n *    (Number) priority - Priority.\n *\n *  Returns:\n *    A new Strophe.SASLMechanism object.\n */\nStrophe.SASLMechanism = function(name, isClientFirst, priority) {\n  /** PrivateVariable: name\n   *  Mechanism name.\n   */\n  this.name = name;\n  /** PrivateVariable: isClientFirst\n   *  If client sends response without initial server challenge.\n   */\n  this.isClientFirst = isClientFirst;\n  /** Variable: priority\n   *  Determines which <SASLMechanism> is chosen for authentication (Higher is better).\n   *  Users may override this to prioritize mechanisms differently.\n   *\n   *  In the default configuration the priorities are\n   *\n   *  SCRAM-SHA1 - 40\n   *  DIGEST-MD5 - 30\n   *  Plain - 20\n   *\n   *  Example: (This will cause Strophe to choose the mechanism that the server sent first)\n   *\n   *  > Strophe.SASLMD5.priority = Strophe.SASLSHA1.priority;\n   *\n   *  See <SASL mechanisms> for a list of available mechanisms.\n   *\n   */\n  this.priority = priority;\n};\n\nStrophe.SASLMechanism.prototype = {\n  /**\n   *  Function: test\n   *  Checks if mechanism able to run.\n   *  To disable a mechanism, make this return false;\n   *\n   *  To disable plain authentication run\n   *  > Strophe.SASLPlain.test = function() {\n   *  >   return false;\n   *  > }\n   *\n   *  See <SASL mechanisms> for a list of available mechanisms.\n   *\n   *  Parameters:\n   *    (Strophe.Connection) connection - Target Connection.\n   *\n   *  Returns:\n   *    (Boolean) If mechanism was able to run.\n   */\n  /* jshint unused:false */\n  test: function(connection) {\n    return true;\n  },\n  /* jshint unused:true */\n\n  /** PrivateFunction: onStart\n   *  Called before starting mechanism on some connection.\n   *\n   *  Parameters:\n   *    (Strophe.Connection) connection - Target Connection.\n   */\n  onStart: function(connection)\n  {\n    this._connection = connection;\n  },\n\n  /** PrivateFunction: onChallenge\n   *  Called by protocol implementation on incoming challenge. If client is\n   *  first (isClientFirst == true) challenge will be null on the first call.\n   *\n   *  Parameters:\n   *    (Strophe.Connection) connection - Target Connection.\n   *    (String) challenge - current challenge to handle.\n   *\n   *  Returns:\n   *    (String) Mechanism response.\n   */\n  /* jshint unused:false */\n  onChallenge: function(connection, challenge) {\n    throw new Error(\"You should implement challenge handling!\");\n  },\n  /* jshint unused:true */\n\n  /** PrivateFunction: onFailure\n   *  Protocol informs mechanism implementation about SASL failure.\n   */\n  onFailure: function() {\n    this._connection = null;\n  },\n\n  /** PrivateFunction: onSuccess\n   *  Protocol informs mechanism implementation about SASL success.\n   */\n  onSuccess: function() {\n    this._connection = null;\n  }\n};\n\n  /** Constants: SASL mechanisms\n   *  Available authentication mechanisms\n   *\n   *  Strophe.SASLAnonymous - SASL Anonymous authentication.\n   *  Strophe.SASLPlain - SASL Plain authentication.\n   *  Strophe.SASLMD5 - SASL Digest-MD5 authentication\n   *  Strophe.SASLSHA1 - SASL SCRAM-SHA1 authentication\n   */\n\n// Building SASL callbacks\n\n/** PrivateConstructor: SASLAnonymous\n *  SASL Anonymous authentication.\n */\nStrophe.SASLAnonymous = function() {};\n\nStrophe.SASLAnonymous.prototype = new Strophe.SASLMechanism(\"ANONYMOUS\", false, 10);\n\nStrophe.SASLAnonymous.test = function(connection) {\n  return connection.authcid === null;\n};\n\nStrophe.Connection.prototype.mechanisms[Strophe.SASLAnonymous.prototype.name] = Strophe.SASLAnonymous;\n\n/** PrivateConstructor: SASLPlain\n *  SASL Plain authentication.\n */\nStrophe.SASLPlain = function() {};\n\nStrophe.SASLPlain.prototype = new Strophe.SASLMechanism(\"PLAIN\", true, 20);\n\nStrophe.SASLPlain.test = function(connection) {\n  return connection.authcid !== null;\n};\n\nStrophe.SASLPlain.prototype.onChallenge = function(connection) {\n  var auth_str = connection.authzid;\n  auth_str = auth_str + \"\\u0000\";\n  auth_str = auth_str + connection.authcid;\n  auth_str = auth_str + \"\\u0000\";\n  auth_str = auth_str + connection.pass;\n  return utils.utf16to8(auth_str);\n};\n\nStrophe.Connection.prototype.mechanisms[Strophe.SASLPlain.prototype.name] = Strophe.SASLPlain;\n\n/** PrivateConstructor: SASLSHA1\n *  SASL SCRAM SHA 1 authentication.\n */\nStrophe.SASLSHA1 = function() {};\n\nStrophe.SASLSHA1.prototype = new Strophe.SASLMechanism(\"SCRAM-SHA-1\", true, 40);\n\nStrophe.SASLSHA1.test = function(connection) {\n    return connection.authcid !== null;\n};\n\nStrophe.SASLSHA1.prototype.onChallenge = function(connection, challenge, test_cnonce) {\n  var cnonce = test_cnonce || MD5.hexdigest(Math.random() * 1234567890);\n  var auth_str = \"n=\" + utils.utf16to8(connection.authcid);\n  auth_str += \",r=\";\n  auth_str += cnonce;\n\n  connection._sasl_data.cnonce = cnonce;\n  connection._sasl_data[\"client-first-message-bare\"] = auth_str;\n\n  auth_str = \"n,,\" + auth_str;\n\n  this.onChallenge = function (connection, challenge) {\n    var nonce, salt, iter, Hi, U, U_old, i, k, pass;\n    var clientKey, serverKey, clientSignature;\n    var responseText = \"c=biws,\";\n    var authMessage = connection._sasl_data[\"client-first-message-bare\"] + \",\" +\n      challenge + \",\";\n    var cnonce = connection._sasl_data.cnonce;\n    var attribMatch = /([a-z]+)=([^,]+)(,|$)/;\n\n    while (challenge.match(attribMatch)) {\n      var matches = challenge.match(attribMatch);\n      challenge = challenge.replace(matches[0], \"\");\n      switch (matches[1]) {\n      case \"r\":\n        nonce = matches[2];\n        break;\n      case \"s\":\n        salt = matches[2];\n        break;\n      case \"i\":\n        iter = matches[2];\n        break;\n      }\n    }\n\n    if (nonce.substr(0, cnonce.length) !== cnonce) {\n      connection._sasl_data = {};\n      return connection._sasl_failure_cb();\n    }\n\n    responseText += \"r=\" + nonce;\n    authMessage += responseText;\n\n    salt = Base64.decode(salt);\n    salt += \"\\x00\\x00\\x00\\x01\";\n\n    pass = utils.utf16to8(connection.pass);\n    Hi = U_old = SHA1.core_hmac_sha1(pass, salt);\n    for (i = 1; i < iter; i++) {\n      U = SHA1.core_hmac_sha1(pass, SHA1.binb2str(U_old));\n      for (k = 0; k < 5; k++) {\n        Hi[k] ^= U[k];\n      }\n      U_old = U;\n    }\n    Hi = SHA1.binb2str(Hi);\n\n    clientKey = SHA1.core_hmac_sha1(Hi, \"Client Key\");\n    serverKey = SHA1.str_hmac_sha1(Hi, \"Server Key\");\n    clientSignature = SHA1.core_hmac_sha1(SHA1.str_sha1(SHA1.binb2str(clientKey)), authMessage);\n    connection._sasl_data[\"server-signature\"] = SHA1.b64_hmac_sha1(serverKey, authMessage);\n\n    for (k = 0; k < 5; k++) {\n      clientKey[k] ^= clientSignature[k];\n    }\n\n    responseText += \",p=\" + Base64.encode(SHA1.binb2str(clientKey));\n    return responseText;\n  }.bind(this);\n\n  return auth_str;\n};\n\nStrophe.Connection.prototype.mechanisms[Strophe.SASLSHA1.prototype.name] = Strophe.SASLSHA1;\n\n/** PrivateConstructor: SASLMD5\n *  SASL DIGEST MD5 authentication.\n */\nStrophe.SASLMD5 = function() {};\n\nStrophe.SASLMD5.prototype = new Strophe.SASLMechanism(\"DIGEST-MD5\", false, 30);\n\nStrophe.SASLMD5.test = function(connection) {\n  return connection.authcid !== null;\n};\n\n/** PrivateFunction: _quote\n *  _Private_ utility function to backslash escape and quote strings.\n *\n *  Parameters:\n *    (String) str - The string to be quoted.\n *\n *  Returns:\n *    quoted string\n */\nStrophe.SASLMD5.prototype._quote = function (str)\n  {\n    return '\"' + str.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"') + '\"';\n    //\" end string workaround for emacs\n  };\n\n\nStrophe.SASLMD5.prototype.onChallenge = function(connection, challenge, test_cnonce) {\n  var attribMatch = /([a-z]+)=(\"[^\"]+\"|[^,\"]+)(?:,|$)/;\n  var cnonce = test_cnonce || MD5.hexdigest(\"\" + (Math.random() * 1234567890));\n  var realm = \"\";\n  var host = null;\n  var nonce = \"\";\n  var qop = \"\";\n  var matches;\n\n  while (challenge.match(attribMatch)) {\n    matches = challenge.match(attribMatch);\n    challenge = challenge.replace(matches[0], \"\");\n    matches[2] = matches[2].replace(/^\"(.+)\"$/, \"$1\");\n    switch (matches[1]) {\n    case \"realm\":\n      realm = matches[2];\n      break;\n    case \"nonce\":\n      nonce = matches[2];\n      break;\n    case \"qop\":\n      qop = matches[2];\n      break;\n    case \"host\":\n      host = matches[2];\n      break;\n    }\n  }\n\n  var digest_uri = connection.servtype + \"/\" + connection.domain;\n  if (host !== null) {\n    digest_uri = digest_uri + \"/\" + host;\n  }\n\n  var cred = utils.utf16to8(connection.authcid + \":\" + realm + \":\" + this._connection.pass);\n  var A1 = MD5.hash(cred) + \":\" + nonce + \":\" + cnonce;\n  var A2 = 'AUTHENTICATE:' + digest_uri;\n\n  var responseText = \"\";\n  responseText += 'charset=utf-8,';\n  responseText += 'username=' + this._quote(utils.utf16to8(connection.authcid)) + ',';\n  responseText += 'realm=' + this._quote(realm) + ',';\n  responseText += 'nonce=' + this._quote(nonce) + ',';\n  responseText += 'nc=00000001,';\n  responseText += 'cnonce=' + this._quote(cnonce) + ',';\n  responseText += 'digest-uri=' + this._quote(digest_uri) + ',';\n  responseText += 'response=' + MD5.hexdigest(MD5.hexdigest(A1) + \":\" +\n                                              nonce + \":00000001:\" +\n                                              cnonce + \":auth:\" +\n                                              MD5.hexdigest(A2)) + \",\";\n  responseText += 'qop=auth';\n\n  this.onChallenge = function () {\n      return \"\";\n  }.bind(this);\n\n  return responseText;\n};\n\nStrophe.Connection.prototype.mechanisms[Strophe.SASLMD5.prototype.name] = Strophe.SASLMD5;\n\nreturn {\n    Strophe:        Strophe,\n    $build:         $build,\n    $msg:           $msg,\n    $iq:            $iq,\n    $pres:          $pres,\n    SHA1:           SHA1,\n    Base64:         Base64,\n    MD5:            MD5,\n};\n}));\n\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/* global define, window, setTimeout, clearTimeout, XMLHttpRequest, ActiveXObject, Strophe, $build */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-bosh', ['strophe-core'], function (core) {\n            return factory(\n                core.Strophe,\n                core.$build\n            );\n        });\n    } else {\n        // Browser globals\n        return factory(Strophe, $build);\n    }\n}(this, function (Strophe, $build) {\n\n/** PrivateClass: Strophe.Request\n *  _Private_ helper class that provides a cross implementation abstraction\n *  for a BOSH related XMLHttpRequest.\n *\n *  The Strophe.Request class is used internally to encapsulate BOSH request\n *  information.  It is not meant to be used from user's code.\n */\n\n/** PrivateConstructor: Strophe.Request\n *  Create and initialize a new Strophe.Request object.\n *\n *  Parameters:\n *    (XMLElement) elem - The XML data to be sent in the request.\n *    (Function) func - The function that will be called when the\n *      XMLHttpRequest readyState changes.\n *    (Integer) rid - The BOSH rid attribute associated with this request.\n *    (Integer) sends - The number of times this same request has been\n *      sent.\n */\nStrophe.Request = function (elem, func, rid, sends)\n{\n    this.id = ++Strophe._requestId;\n    this.xmlData = elem;\n    this.data = Strophe.serialize(elem);\n    // save original function in case we need to make a new request\n    // from this one.\n    this.origFunc = func;\n    this.func = func;\n    this.rid = rid;\n    this.date = NaN;\n    this.sends = sends || 0;\n    this.abort = false;\n    this.dead = null;\n\n    this.age = function () {\n        if (!this.date) { return 0; }\n        var now = new Date();\n        return (now - this.date) / 1000;\n    };\n    this.timeDead = function () {\n        if (!this.dead) { return 0; }\n        var now = new Date();\n        return (now - this.dead) / 1000;\n    };\n    this.xhr = this._newXHR();\n};\n\nStrophe.Request.prototype = {\n    /** PrivateFunction: getResponse\n     *  Get a response from the underlying XMLHttpRequest.\n     *\n     *  This function attempts to get a response from the request and checks\n     *  for errors.\n     *\n     *  Throws:\n     *    \"parsererror\" - A parser error occured.\n     *    \"badformat\" - The entity has sent XML that cannot be processed.\n     *\n     *  Returns:\n     *    The DOM element tree of the response.\n     */\n    getResponse: function ()\n    {\n        var node = null;\n        if (this.xhr.responseXML && this.xhr.responseXML.documentElement) {\n            node = this.xhr.responseXML.documentElement;\n            if (node.tagName == \"parsererror\") {\n                Strophe.error(\"invalid response received\");\n                Strophe.error(\"responseText: \" + this.xhr.responseText);\n                Strophe.error(\"responseXML: \" +\n                              Strophe.serialize(this.xhr.responseXML));\n                throw \"parsererror\";\n            }\n        } else if (this.xhr.responseText) {\n            Strophe.error(\"invalid response received\");\n            Strophe.error(\"responseText: \" + this.xhr.responseText);\n            throw \"badformat\";\n        }\n\n        return node;\n    },\n\n    /** PrivateFunction: _newXHR\n     *  _Private_ helper function to create XMLHttpRequests.\n     *\n     *  This function creates XMLHttpRequests across all implementations.\n     *\n     *  Returns:\n     *    A new XMLHttpRequest.\n     */\n    _newXHR: function ()\n    {\n        var xhr = null;\n        if (window.XMLHttpRequest) {\n            xhr = new XMLHttpRequest();\n            if (xhr.overrideMimeType) {\n                xhr.overrideMimeType(\"text/xml; charset=utf-8\");\n            }\n        } else if (window.ActiveXObject) {\n            xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n        }\n\n        // use Function.bind() to prepend ourselves as an argument\n        xhr.onreadystatechange = this.func.bind(null, this);\n\n        return xhr;\n    }\n};\n\n/** Class: Strophe.Bosh\n *  _Private_ helper class that handles BOSH Connections\n *\n *  The Strophe.Bosh class is used internally by Strophe.Connection\n *  to encapsulate BOSH sessions. It is not meant to be used from user's code.\n */\n\n/** File: bosh.js\n *  A JavaScript library to enable BOSH in Strophejs.\n *\n *  this library uses Bidirectional-streams Over Synchronous HTTP (BOSH)\n *  to emulate a persistent, stateful, two-way connection to an XMPP server.\n *  More information on BOSH can be found in XEP 124.\n */\n\n/** PrivateConstructor: Strophe.Bosh\n *  Create and initialize a Strophe.Bosh object.\n *\n *  Parameters:\n *    (Strophe.Connection) connection - The Strophe.Connection that will use BOSH.\n *\n *  Returns:\n *    A new Strophe.Bosh object.\n */\nStrophe.Bosh = function(connection) {\n    this._conn = connection;\n    /* request id for body tags */\n    this.rid = Math.floor(Math.random() * 4294967295);\n    /* The current session ID. */\n    this.sid = null;\n\n    // default BOSH values\n    this.hold = 1;\n    this.wait = 60;\n    this.window = 5;\n    this.errors = 0;\n\n    this._requests = [];\n};\n\nStrophe.Bosh.prototype = {\n    /** Variable: strip\n     *\n     *  BOSH-Connections will have all stanzas wrapped in a <body> tag when\n     *  passed to <Strophe.Connection.xmlInput> or <Strophe.Connection.xmlOutput>.\n     *  To strip this tag, User code can set <Strophe.Bosh.strip> to \"body\":\n     *\n     *  > Strophe.Bosh.prototype.strip = \"body\";\n     *\n     *  This will enable stripping of the body tag in both\n     *  <Strophe.Connection.xmlInput> and <Strophe.Connection.xmlOutput>.\n     */\n    strip: null,\n\n    /** PrivateFunction: _buildBody\n     *  _Private_ helper function to generate the <body/> wrapper for BOSH.\n     *\n     *  Returns:\n     *    A Strophe.Builder with a <body/> element.\n     */\n    _buildBody: function ()\n    {\n        var bodyWrap = $build('body', {\n            rid: this.rid++,\n            xmlns: Strophe.NS.HTTPBIND\n        });\n        if (this.sid !== null) {\n            bodyWrap.attrs({sid: this.sid});\n        }\n        if (this._conn.options.keepalive) {\n            this._cacheSession();\n        }\n        return bodyWrap;\n    },\n\n    /** PrivateFunction: _reset\n     *  Reset the connection.\n     *\n     *  This function is called by the reset function of the Strophe Connection\n     */\n    _reset: function ()\n    {\n        this.rid = Math.floor(Math.random() * 4294967295);\n        this.sid = null;\n        this.errors = 0;\n        window.sessionStorage.removeItem('strophe-bosh-session');\n\n        this._conn.nextValidRid(this.rid);\n    },\n\n    /** PrivateFunction: _connect\n     *  _Private_ function that initializes the BOSH connection.\n     *\n     *  Creates and sends the Request that initializes the BOSH connection.\n     */\n    _connect: function (wait, hold, route)\n    {\n        this.wait = wait || this.wait;\n        this.hold = hold || this.hold;\n        this.errors = 0;\n\n        // build the body tag\n        var body = this._buildBody().attrs({\n            to: this._conn.domain,\n            \"xml:lang\": \"en\",\n            wait: this.wait,\n            hold: this.hold,\n            content: \"text/xml; charset=utf-8\",\n            ver: \"1.6\",\n            \"xmpp:version\": \"1.0\",\n            \"xmlns:xmpp\": Strophe.NS.BOSH\n        });\n\n        if(route){\n            body.attrs({\n                route: route\n            });\n        }\n\n        var _connect_cb = this._conn._connect_cb;\n\n        this._requests.push(\n            new Strophe.Request(body.tree(),\n                                this._onRequestStateChange.bind(\n                                    this, _connect_cb.bind(this._conn)),\n                                body.tree().getAttribute(\"rid\")));\n        this._throttledRequestHandler();\n    },\n\n    /** PrivateFunction: _attach\n     *  Attach to an already created and authenticated BOSH session.\n     *\n     *  This function is provided to allow Strophe to attach to BOSH\n     *  sessions which have been created externally, perhaps by a Web\n     *  application.  This is often used to support auto-login type features\n     *  without putting user credentials into the page.\n     *\n     *  Parameters:\n     *    (String) jid - The full JID that is bound by the session.\n     *    (String) sid - The SID of the BOSH session.\n     *    (String) rid - The current RID of the BOSH session.  This RID\n     *      will be used by the next request.\n     *    (Function) callback The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    _attach: function (jid, sid, rid, callback, wait, hold, wind)\n    {\n        this._conn.jid = jid;\n        this.sid = sid;\n        this.rid = rid;\n\n        this._conn.connect_callback = callback;\n\n        this._conn.domain = Strophe.getDomainFromJid(this._conn.jid);\n\n        this._conn.authenticated = true;\n        this._conn.connected = true;\n\n        this.wait = wait || this.wait;\n        this.hold = hold || this.hold;\n        this.window = wind || this.window;\n\n        this._conn._changeConnectStatus(Strophe.Status.ATTACHED, null);\n    },\n\n    /** PrivateFunction: _restore\n     *  Attempt to restore a cached BOSH session\n     *\n     *  Parameters:\n     *    (String) jid - The full JID that is bound by the session.\n     *      This parameter is optional but recommended, specifically in cases\n     *      where prebinded BOSH sessions are used where it's important to know\n     *      that the right session is being restored.\n     *    (Function) callback The connect callback function.\n     *    (Integer) wait - The optional HTTPBIND wait value.  This is the\n     *      time the server will wait before returning an empty result for\n     *      a request.  The default setting of 60 seconds is recommended.\n     *      Other settings will require tweaks to the Strophe.TIMEOUT value.\n     *    (Integer) hold - The optional HTTPBIND hold value.  This is the\n     *      number of connections the server will hold at one time.  This\n     *      should almost always be set to 1 (the default).\n     *    (Integer) wind - The optional HTTBIND window value.  This is the\n     *      allowed range of request ids that are valid.  The default is 5.\n     */\n    _restore: function (jid, callback, wait, hold, wind)\n    {\n        var session = JSON.parse(window.sessionStorage.getItem('strophe-bosh-session'));\n        if (typeof session !== \"undefined\" &&\n                   session !== null &&\n                   session.rid &&\n                   session.sid &&\n                   session.jid &&\n                   (typeof jid === \"undefined\" || jid === \"null\" || Strophe.getBareJidFromJid(session.jid) == Strophe.getBareJidFromJid(jid)))\n        {\n            this._conn.restored = true;\n            this._attach(session.jid, session.sid, session.rid, callback, wait, hold, wind);\n        } else {\n            throw { name: \"StropheSessionError\", message: \"_restore: no restoreable session.\" };\n        }\n    },\n\n    /** PrivateFunction: _cacheSession\n     *  _Private_ handler for the beforeunload event.\n     *\n     *  This handler is used to process the Bosh-part of the initial request.\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     */\n    _cacheSession: function ()\n    {\n        if (this._conn.authenticated) {\n            if (this._conn.jid && this.rid && this.sid) {\n                window.sessionStorage.setItem('strophe-bosh-session', JSON.stringify({\n                    'jid': this._conn.jid,\n                    'rid': this.rid,\n                    'sid': this.sid\n                }));\n            }\n        } else {\n            window.sessionStorage.removeItem('strophe-bosh-session');\n        }\n    },\n\n    /** PrivateFunction: _connect_cb\n     *  _Private_ handler for initial connection request.\n     *\n     *  This handler is used to process the Bosh-part of the initial request.\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     */\n    _connect_cb: function (bodyWrap)\n    {\n        var typ = bodyWrap.getAttribute(\"type\");\n        var cond, conflict;\n        if (typ !== null && typ == \"terminate\") {\n            // an error occurred\n            cond = bodyWrap.getAttribute(\"condition\");\n            Strophe.error(\"BOSH-Connection failed: \" + cond);\n            conflict = bodyWrap.getElementsByTagName(\"conflict\");\n            if (cond !== null) {\n                if (cond == \"remote-stream-error\" && conflict.length > 0) {\n                    cond = \"conflict\";\n                }\n                this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, cond);\n            } else {\n                this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"unknown\");\n            }\n            this._conn._doDisconnect(cond);\n            return Strophe.Status.CONNFAIL;\n        }\n\n        // check to make sure we don't overwrite these if _connect_cb is\n        // called multiple times in the case of missing stream:features\n        if (!this.sid) {\n            this.sid = bodyWrap.getAttribute(\"sid\");\n        }\n        var wind = bodyWrap.getAttribute('requests');\n        if (wind) { this.window = parseInt(wind, 10); }\n        var hold = bodyWrap.getAttribute('hold');\n        if (hold) { this.hold = parseInt(hold, 10); }\n        var wait = bodyWrap.getAttribute('wait');\n        if (wait) { this.wait = parseInt(wait, 10); }\n    },\n\n    /** PrivateFunction: _disconnect\n     *  _Private_ part of Connection.disconnect for Bosh\n     *\n     *  Parameters:\n     *    (Request) pres - This stanza will be sent before disconnecting.\n     */\n    _disconnect: function (pres)\n    {\n        this._sendTerminate(pres);\n    },\n\n    /** PrivateFunction: _doDisconnect\n     *  _Private_ function to disconnect.\n     *\n     *  Resets the SID and RID.\n     */\n    _doDisconnect: function ()\n    {\n        this.sid = null;\n        this.rid = Math.floor(Math.random() * 4294967295);\n        window.sessionStorage.removeItem('strophe-bosh-session');\n\n        this._conn.nextValidRid(this.rid);\n    },\n\n    /** PrivateFunction: _emptyQueue\n     * _Private_ function to check if the Request queue is empty.\n     *\n     *  Returns:\n     *    True, if there are no Requests queued, False otherwise.\n     */\n    _emptyQueue: function ()\n    {\n        return this._requests.length === 0;\n    },\n\n    /** PrivateFunction: _hitError\n     *  _Private_ function to handle the error count.\n     *\n     *  Requests are resent automatically until their error count reaches\n     *  5.  Each time an error is encountered, this function is called to\n     *  increment the count and disconnect if the count is too high.\n     *\n     *  Parameters:\n     *    (Integer) reqStatus - The request status.\n     */\n    _hitError: function (reqStatus)\n    {\n        this.errors++;\n        Strophe.warn(\"request errored, status: \" + reqStatus +\n                     \", number of errors: \" + this.errors);\n        if (this.errors > 4) {\n            this._conn._onDisconnectTimeout();\n        }\n    },\n\n    /** PrivateFunction: _no_auth_received\n     *\n     * Called on stream start/restart when no stream:features\n     * has been received and sends a blank poll request.\n     */\n    _no_auth_received: function (_callback)\n    {\n        if (_callback) {\n            _callback = _callback.bind(this._conn);\n        } else {\n            _callback = this._conn._connect_cb.bind(this._conn);\n        }\n        var body = this._buildBody();\n        this._requests.push(\n                new Strophe.Request(body.tree(),\n                    this._onRequestStateChange.bind(\n                        this, _callback.bind(this._conn)),\n                    body.tree().getAttribute(\"rid\")));\n        this._throttledRequestHandler();\n    },\n\n    /** PrivateFunction: _onDisconnectTimeout\n     *  _Private_ timeout handler for handling non-graceful disconnection.\n     *\n     *  Cancels all remaining Requests and clears the queue.\n     */\n    _onDisconnectTimeout: function () {\n        this._abortAllRequests();\n    },\n\n    /** PrivateFunction: _abortAllRequests\n     *  _Private_ helper function that makes sure all pending requests are aborted.\n     */\n    _abortAllRequests: function _abortAllRequests() {\n        var req;\n        while (this._requests.length > 0) {\n            req = this._requests.pop();\n            req.abort = true;\n            req.xhr.abort();\n            // jslint complains, but this is fine. setting to empty func\n            // is necessary for IE6\n            req.xhr.onreadystatechange = function () {}; // jshint ignore:line\n        }\n    },\n\n    /** PrivateFunction: _onIdle\n     *  _Private_ handler called by Strophe.Connection._onIdle\n     *\n     *  Sends all queued Requests or polls with empty Request if there are none.\n     */\n    _onIdle: function () {\n        var data = this._conn._data;\n\n        // if no requests are in progress, poll\n        if (this._conn.authenticated && this._requests.length === 0 &&\n            data.length === 0 && !this._conn.disconnecting) {\n            Strophe.info(\"no requests during idle cycle, sending \" +\n                         \"blank request\");\n            data.push(null);\n        }\n\n        if (this._conn.paused) {\n            return;\n        }\n\n        if (this._requests.length < 2 && data.length > 0) {\n            var body = this._buildBody();\n            for (var i = 0; i < data.length; i++) {\n                if (data[i] !== null) {\n                    if (data[i] === \"restart\") {\n                        body.attrs({\n                            to: this._conn.domain,\n                            \"xml:lang\": \"en\",\n                            \"xmpp:restart\": \"true\",\n                            \"xmlns:xmpp\": Strophe.NS.BOSH\n                        });\n                    } else {\n                        body.cnode(data[i]).up();\n                    }\n                }\n            }\n            delete this._conn._data;\n            this._conn._data = [];\n            this._requests.push(\n                new Strophe.Request(body.tree(),\n                                    this._onRequestStateChange.bind(\n                                        this, this._conn._dataRecv.bind(this._conn)),\n                                    body.tree().getAttribute(\"rid\")));\n            this._throttledRequestHandler();\n        }\n\n        if (this._requests.length > 0) {\n            var time_elapsed = this._requests[0].age();\n            if (this._requests[0].dead !== null) {\n                if (this._requests[0].timeDead() >\n                    Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait)) {\n                    this._throttledRequestHandler();\n                }\n            }\n\n            if (time_elapsed > Math.floor(Strophe.TIMEOUT * this.wait)) {\n                Strophe.warn(\"Request \" +\n                             this._requests[0].id +\n                             \" timed out, over \" + Math.floor(Strophe.TIMEOUT * this.wait) +\n                             \" seconds since last activity\");\n                this._throttledRequestHandler();\n            }\n        }\n    },\n\n    /** PrivateFunction: _onRequestStateChange\n     *  _Private_ handler for Strophe.Request state changes.\n     *\n     *  This function is called when the XMLHttpRequest readyState changes.\n     *  It contains a lot of error handling logic for the many ways that\n     *  requests can fail, and calls the request callback when requests\n     *  succeed.\n     *\n     *  Parameters:\n     *    (Function) func - The handler for the request.\n     *    (Strophe.Request) req - The request that is changing readyState.\n     */\n    _onRequestStateChange: function (func, req)\n    {\n        Strophe.debug(\"request id \" + req.id +\n                      \".\" + req.sends + \" state changed to \" +\n                      req.xhr.readyState);\n\n        if (req.abort) {\n            req.abort = false;\n            return;\n        }\n\n        // request complete\n        var reqStatus;\n        if (req.xhr.readyState == 4) {\n            reqStatus = 0;\n            try {\n                reqStatus = req.xhr.status;\n            } catch (e) {\n                // ignore errors from undefined status attribute.  works\n                // around a browser bug\n            }\n\n            if (typeof(reqStatus) == \"undefined\") {\n                reqStatus = 0;\n            }\n\n            if (this.disconnecting) {\n                if (reqStatus >= 400) {\n                    this._hitError(reqStatus);\n                    return;\n                }\n            }\n\n            var reqIs0 = (this._requests[0] == req);\n            var reqIs1 = (this._requests[1] == req);\n\n            if ((reqStatus > 0 && reqStatus < 500) || req.sends > 5) {\n                // remove from internal queue\n                this._removeRequest(req);\n                Strophe.debug(\"request id \" +\n                              req.id +\n                              \" should now be removed\");\n            }\n\n            // request succeeded\n            if (reqStatus == 200) {\n                // if request 1 finished, or request 0 finished and request\n                // 1 is over Strophe.SECONDARY_TIMEOUT seconds old, we need to\n                // restart the other - both will be in the first spot, as the\n                // completed request has been removed from the queue already\n                if (reqIs1 ||\n                    (reqIs0 && this._requests.length > 0 &&\n                     this._requests[0].age() > Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait))) {\n                    this._restartRequest(0);\n                }\n\n                this._conn.nextValidRid(Number(req.rid) + 1);\n\n                // call handler\n                Strophe.debug(\"request id \" +\n                              req.id + \".\" +\n                              req.sends + \" got 200\");\n                func(req);\n                this.errors = 0;\n            } else {\n                Strophe.error(\"request id \" +\n                              req.id + \".\" +\n                              req.sends + \" error \" + reqStatus +\n                              \" happened\");\n                if (reqStatus === 0 ||\n                    (reqStatus >= 400 && reqStatus < 600) ||\n                    reqStatus >= 12000) {\n                    this._hitError(reqStatus);\n                    if (reqStatus >= 400 && reqStatus < 500) {\n                        this._conn._changeConnectStatus(Strophe.Status.DISCONNECTING, null);\n                        this._conn._doDisconnect();\n                    }\n                }\n            }\n\n            if (!((reqStatus > 0 && reqStatus < 500) ||\n                  req.sends > 5)) {\n                this._throttledRequestHandler();\n            }\n        }\n    },\n\n    /** PrivateFunction: _processRequest\n     *  _Private_ function to process a request in the queue.\n     *\n     *  This function takes requests off the queue and sends them and\n     *  restarts dead requests.\n     *\n     *  Parameters:\n     *    (Integer) i - The index of the request in the queue.\n     */\n    _processRequest: function (i)\n    {\n        var self = this;\n        var req = this._requests[i];\n        var reqStatus = -1;\n\n        try {\n            if (req.xhr.readyState == 4) {\n                reqStatus = req.xhr.status;\n            }\n        } catch (e) {\n            Strophe.error(\"caught an error in _requests[\" + i +\n                          \"], reqStatus: \" + reqStatus);\n        }\n\n        if (typeof(reqStatus) == \"undefined\") {\n            reqStatus = -1;\n        }\n\n        // make sure we limit the number of retries\n        if (req.sends > this._conn.maxRetries) {\n            this._conn._onDisconnectTimeout();\n            return;\n        }\n\n        var time_elapsed = req.age();\n        var primaryTimeout = (!isNaN(time_elapsed) &&\n                              time_elapsed > Math.floor(Strophe.TIMEOUT * this.wait));\n        var secondaryTimeout = (req.dead !== null &&\n                                req.timeDead() > Math.floor(Strophe.SECONDARY_TIMEOUT * this.wait));\n        var requestCompletedWithServerError = (req.xhr.readyState == 4 &&\n                                               (reqStatus < 1 ||\n                                                reqStatus >= 500));\n        if (primaryTimeout || secondaryTimeout ||\n            requestCompletedWithServerError) {\n            if (secondaryTimeout) {\n                Strophe.error(\"Request \" +\n                              this._requests[i].id +\n                              \" timed out (secondary), restarting\");\n            }\n            req.abort = true;\n            req.xhr.abort();\n            // setting to null fails on IE6, so set to empty function\n            req.xhr.onreadystatechange = function () {};\n            this._requests[i] = new Strophe.Request(req.xmlData,\n                                                    req.origFunc,\n                                                    req.rid,\n                                                    req.sends);\n            req = this._requests[i];\n        }\n\n        if (req.xhr.readyState === 0) {\n            Strophe.debug(\"request id \" + req.id +\n                          \".\" + req.sends + \" posting\");\n\n            try {\n                req.xhr.open(\"POST\", this._conn.service, this._conn.options.sync ? false : true);\n                req.xhr.setRequestHeader(\"Content-Type\", \"text/xml; charset=utf-8\");\n            } catch (e2) {\n                Strophe.error(\"XHR open failed.\");\n                if (!this._conn.connected) {\n                    this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,\n                                              \"bad-service\");\n                }\n                this._conn.disconnect();\n                return;\n            }\n\n            // Fires the XHR request -- may be invoked immediately\n            // or on a gradually expanding retry window for reconnects\n            var sendFunc = function () {\n                req.date = new Date();\n                if (self._conn.options.customHeaders){\n                    var headers = self._conn.options.customHeaders;\n                    for (var header in headers) {\n                        if (headers.hasOwnProperty(header)) {\n                            req.xhr.setRequestHeader(header, headers[header]);\n                        }\n                    }\n                }\n                req.xhr.send(req.data);\n            };\n\n            // Implement progressive backoff for reconnects --\n            // First retry (send == 1) should also be instantaneous\n            if (req.sends > 1) {\n                // Using a cube of the retry number creates a nicely\n                // expanding retry window\n                var backoff = Math.min(Math.floor(Strophe.TIMEOUT * this.wait),\n                                       Math.pow(req.sends, 3)) * 1000;\n                setTimeout(sendFunc, backoff);\n            } else {\n                sendFunc();\n            }\n\n            req.sends++;\n\n            if (this._conn.xmlOutput !== Strophe.Connection.prototype.xmlOutput) {\n                if (req.xmlData.nodeName === this.strip && req.xmlData.childNodes.length) {\n                    this._conn.xmlOutput(req.xmlData.childNodes[0]);\n                } else {\n                    this._conn.xmlOutput(req.xmlData);\n                }\n            }\n            if (this._conn.rawOutput !== Strophe.Connection.prototype.rawOutput) {\n                this._conn.rawOutput(req.data);\n            }\n        } else {\n            Strophe.debug(\"_processRequest: \" +\n                          (i === 0 ? \"first\" : \"second\") +\n                          \" request has readyState of \" +\n                          req.xhr.readyState);\n        }\n    },\n\n    /** PrivateFunction: _removeRequest\n     *  _Private_ function to remove a request from the queue.\n     *\n     *  Parameters:\n     *    (Strophe.Request) req - The request to remove.\n     */\n    _removeRequest: function (req)\n    {\n        Strophe.debug(\"removing request\");\n\n        var i;\n        for (i = this._requests.length - 1; i >= 0; i--) {\n            if (req == this._requests[i]) {\n                this._requests.splice(i, 1);\n            }\n        }\n\n        // IE6 fails on setting to null, so set to empty function\n        req.xhr.onreadystatechange = function () {};\n\n        this._throttledRequestHandler();\n    },\n\n    /** PrivateFunction: _restartRequest\n     *  _Private_ function to restart a request that is presumed dead.\n     *\n     *  Parameters:\n     *    (Integer) i - The index of the request in the queue.\n     */\n    _restartRequest: function (i)\n    {\n        var req = this._requests[i];\n        if (req.dead === null) {\n            req.dead = new Date();\n        }\n\n        this._processRequest(i);\n    },\n\n    /** PrivateFunction: _reqToData\n     * _Private_ function to get a stanza out of a request.\n     *\n     * Tries to extract a stanza out of a Request Object.\n     * When this fails the current connection will be disconnected.\n     *\n     *  Parameters:\n     *    (Object) req - The Request.\n     *\n     *  Returns:\n     *    The stanza that was passed.\n     */\n    _reqToData: function (req)\n    {\n        try {\n            return req.getResponse();\n        } catch (e) {\n            if (e != \"parsererror\") { throw e; }\n            this._conn.disconnect(\"strophe-parsererror\");\n        }\n    },\n\n    /** PrivateFunction: _sendTerminate\n     *  _Private_ function to send initial disconnect sequence.\n     *\n     *  This is the first step in a graceful disconnect.  It sends\n     *  the BOSH server a terminate body and includes an unavailable\n     *  presence if authentication has completed.\n     */\n    _sendTerminate: function (pres)\n    {\n        Strophe.info(\"_sendTerminate was called\");\n        var body = this._buildBody().attrs({type: \"terminate\"});\n\n        if (pres) {\n            body.cnode(pres.tree());\n        }\n\n        var req = new Strophe.Request(body.tree(),\n                                      this._onRequestStateChange.bind(\n                                          this, this._conn._dataRecv.bind(this._conn)),\n                                      body.tree().getAttribute(\"rid\"));\n\n        this._requests.push(req);\n        this._throttledRequestHandler();\n    },\n\n    /** PrivateFunction: _send\n     *  _Private_ part of the Connection.send function for BOSH\n     *\n     * Just triggers the RequestHandler to send the messages that are in the queue\n     */\n    _send: function () {\n        clearTimeout(this._conn._idleTimeout);\n        this._throttledRequestHandler();\n        this._conn._idleTimeout = setTimeout(this._conn._onIdle.bind(this._conn), 100);\n    },\n\n    /** PrivateFunction: _sendRestart\n     *\n     *  Send an xmpp:restart stanza.\n     */\n    _sendRestart: function ()\n    {\n        this._throttledRequestHandler();\n        clearTimeout(this._conn._idleTimeout);\n    },\n\n    /** PrivateFunction: _throttledRequestHandler\n     *  _Private_ function to throttle requests to the connection window.\n     *\n     *  This function makes sure we don't send requests so fast that the\n     *  request ids overflow the connection window in the case that one\n     *  request died.\n     */\n    _throttledRequestHandler: function ()\n    {\n        if (!this._requests) {\n            Strophe.debug(\"_throttledRequestHandler called with \" +\n                          \"undefined requests\");\n        } else {\n            Strophe.debug(\"_throttledRequestHandler called with \" +\n                          this._requests.length + \" requests\");\n        }\n\n        if (!this._requests || this._requests.length === 0) {\n            return;\n        }\n\n        if (this._requests.length > 0) {\n            this._processRequest(0);\n        }\n\n        if (this._requests.length > 1 &&\n            Math.abs(this._requests[0].rid -\n                     this._requests[1].rid) < this.window) {\n            this._processRequest(1);\n        }\n    }\n};\nreturn Strophe;\n}));\n\n/*\n    This program is distributed under the terms of the MIT license.\n    Please see the LICENSE file for details.\n\n    Copyright 2006-2008, OGG, LLC\n*/\n\n/* jshint undef: true, unused: true:, noarg: true, latedef: true */\n/* global define, window, clearTimeout, WebSocket, DOMParser, Strophe, $build */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('strophe-websocket', ['strophe-core'], function (core) {\n            return factory(\n                core.Strophe,\n                core.$build\n            );\n        });\n    } else {\n        // Browser globals\n        return factory(Strophe, $build);\n    }\n}(this, function (Strophe, $build) {\n\n/** Class: Strophe.WebSocket\n *  _Private_ helper class that handles WebSocket Connections\n *\n *  The Strophe.WebSocket class is used internally by Strophe.Connection\n *  to encapsulate WebSocket sessions. It is not meant to be used from user's code.\n */\n\n/** File: websocket.js\n *  A JavaScript library to enable XMPP over Websocket in Strophejs.\n *\n *  This file implements XMPP over WebSockets for Strophejs.\n *  If a Connection is established with a Websocket url (ws://...)\n *  Strophe will use WebSockets.\n *  For more information on XMPP-over-WebSocket see RFC 7395:\n *  http://tools.ietf.org/html/rfc7395\n *\n *  WebSocket support implemented by Andreas Guth (andreas.guth@rwth-aachen.de)\n */\n\n/** PrivateConstructor: Strophe.Websocket\n *  Create and initialize a Strophe.WebSocket object.\n *  Currently only sets the connection Object.\n *\n *  Parameters:\n *    (Strophe.Connection) connection - The Strophe.Connection that will use WebSockets.\n *\n *  Returns:\n *    A new Strophe.WebSocket object.\n */\nStrophe.Websocket = function(connection) {\n    this._conn = connection;\n    this.strip = \"wrapper\";\n\n    var service = connection.service;\n    if (service.indexOf(\"ws:\") !== 0 && service.indexOf(\"wss:\") !== 0) {\n        // If the service is not an absolute URL, assume it is a path and put the absolute\n        // URL together from options, current URL and the path.\n        var new_service = \"\";\n\n        if (connection.options.protocol === \"ws\" && window.location.protocol !== \"https:\") {\n            new_service += \"ws\";\n        } else {\n            new_service += \"wss\";\n        }\n\n        new_service += \"://\" + window.location.host;\n\n        if (service.indexOf(\"/\") !== 0) {\n            new_service += window.location.pathname + service;\n        } else {\n            new_service += service;\n        }\n\n        connection.service = new_service;\n    }\n};\n\nStrophe.Websocket.prototype = {\n    /** PrivateFunction: _buildStream\n     *  _Private_ helper function to generate the <stream> start tag for WebSockets\n     *\n     *  Returns:\n     *    A Strophe.Builder with a <stream> element.\n     */\n    _buildStream: function ()\n    {\n        return $build(\"open\", {\n            \"xmlns\": Strophe.NS.FRAMING,\n            \"to\": this._conn.domain,\n            \"version\": '1.0'\n        });\n    },\n\n    /** PrivateFunction: _check_streamerror\n     * _Private_ checks a message for stream:error\n     *\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     *    connectstatus - The ConnectStatus that will be set on error.\n     *  Returns:\n     *     true if there was a streamerror, false otherwise.\n     */\n    _check_streamerror: function (bodyWrap, connectstatus) {\n        var errors;\n        if (bodyWrap.getElementsByTagNameNS) {\n            errors = bodyWrap.getElementsByTagNameNS(Strophe.NS.STREAM, \"error\");\n        } else {\n            errors = bodyWrap.getElementsByTagName(\"stream:error\");\n        }\n        if (errors.length === 0) {\n            return false;\n        }\n        var error = errors[0];\n\n        var condition = \"\";\n        var text = \"\";\n\n        var ns = \"urn:ietf:params:xml:ns:xmpp-streams\";\n        for (var i = 0; i < error.childNodes.length; i++) {\n            var e = error.childNodes[i];\n            if (e.getAttribute(\"xmlns\") !== ns) {\n                break;\n            } if (e.nodeName === \"text\") {\n                text = e.textContent;\n            } else {\n                condition = e.nodeName;\n            }\n        }\n\n        var errorString = \"WebSocket stream error: \";\n\n        if (condition) {\n            errorString += condition;\n        } else {\n            errorString += \"unknown\";\n        }\n\n        if (text) {\n            errorString += \" - \" + condition;\n        }\n\n        Strophe.error(errorString);\n\n        // close the connection on stream_error\n        this._conn._changeConnectStatus(connectstatus, condition);\n        this._conn._doDisconnect();\n        return true;\n    },\n\n    /** PrivateFunction: _reset\n     *  Reset the connection.\n     *\n     *  This function is called by the reset function of the Strophe Connection.\n     *  Is not needed by WebSockets.\n     */\n    _reset: function ()\n    {\n        return;\n    },\n\n    /** PrivateFunction: _connect\n     *  _Private_ function called by Strophe.Connection.connect\n     *\n     *  Creates a WebSocket for a connection and assigns Callbacks to it.\n     *  Does nothing if there already is a WebSocket.\n     */\n    _connect: function () {\n        // Ensure that there is no open WebSocket from a previous Connection.\n        this._closeSocket();\n\n        // Create the new WobSocket\n        this.socket = new WebSocket(this._conn.service, \"xmpp\");\n        this.socket.onopen = this._onOpen.bind(this);\n        this.socket.onerror = this._onError.bind(this);\n        this.socket.onclose = this._onClose.bind(this);\n        this.socket.onmessage = this._connect_cb_wrapper.bind(this);\n    },\n\n    /** PrivateFunction: _connect_cb\n     *  _Private_ function called by Strophe.Connection._connect_cb\n     *\n     * checks for stream:error\n     *\n     *  Parameters:\n     *    (Strophe.Request) bodyWrap - The received stanza.\n     */\n    _connect_cb: function(bodyWrap) {\n        var error = this._check_streamerror(bodyWrap, Strophe.Status.CONNFAIL);\n        if (error) {\n            return Strophe.Status.CONNFAIL;\n        }\n    },\n\n    /** PrivateFunction: _handleStreamStart\n     * _Private_ function that checks the opening <open /> tag for errors.\n     *\n     * Disconnects if there is an error and returns false, true otherwise.\n     *\n     *  Parameters:\n     *    (Node) message - Stanza containing the <open /> tag.\n     */\n    _handleStreamStart: function(message) {\n        var error = false;\n\n        // Check for errors in the <open /> tag\n        var ns = message.getAttribute(\"xmlns\");\n        if (typeof ns !== \"string\") {\n            error = \"Missing xmlns in <open />\";\n        } else if (ns !== Strophe.NS.FRAMING) {\n            error = \"Wrong xmlns in <open />: \" + ns;\n        }\n\n        var ver = message.getAttribute(\"version\");\n        if (typeof ver !== \"string\") {\n            error = \"Missing version in <open />\";\n        } else if (ver !== \"1.0\") {\n            error = \"Wrong version in <open />: \" + ver;\n        }\n\n        if (error) {\n            this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, error);\n            this._conn._doDisconnect();\n            return false;\n        }\n\n        return true;\n    },\n\n    /** PrivateFunction: _connect_cb_wrapper\n     * _Private_ function that handles the first connection messages.\n     *\n     * On receiving an opening stream tag this callback replaces itself with the real\n     * message handler. On receiving a stream error the connection is terminated.\n     */\n    _connect_cb_wrapper: function(message) {\n        if (message.data.indexOf(\"<open \") === 0 || message.data.indexOf(\"<?xml\") === 0) {\n            // Strip the XML Declaration, if there is one\n            var data = message.data.replace(/^(<\\?.*?\\?>\\s*)*/, \"\");\n            if (data === '') return;\n\n            var streamStart = new DOMParser().parseFromString(data, \"text/xml\").documentElement;\n            this._conn.xmlInput(streamStart);\n            this._conn.rawInput(message.data);\n\n            //_handleStreamSteart will check for XML errors and disconnect on error\n            if (this._handleStreamStart(streamStart)) {\n                //_connect_cb will check for stream:error and disconnect on error\n                this._connect_cb(streamStart);\n            }\n        } else if (message.data.indexOf(\"<close \") === 0) { //'<close xmlns=\"urn:ietf:params:xml:ns:xmpp-framing />') {\n            this._conn.rawInput(message.data);\n            this._conn.xmlInput(message);\n            var see_uri = message.getAttribute(\"see-other-uri\");\n            if (see_uri) {\n                this._conn._changeConnectStatus(Strophe.Status.REDIRECT, \"Received see-other-uri, resetting connection\");\n                this._conn.reset();\n                this._conn.service = see_uri;\n                this._connect();\n            } else {\n                this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"Received closing stream\");\n                this._conn._doDisconnect();\n            }\n        } else {\n            var string = this._streamWrap(message.data);\n            var elem = new DOMParser().parseFromString(string, \"text/xml\").documentElement;\n            this.socket.onmessage = this._onMessage.bind(this);\n            this._conn._connect_cb(elem, null, message.data);\n        }\n    },\n\n    /** PrivateFunction: _disconnect\n     *  _Private_ function called by Strophe.Connection.disconnect\n     *\n     *  Disconnects and sends a last stanza if one is given\n     *\n     *  Parameters:\n     *    (Request) pres - This stanza will be sent before disconnecting.\n     */\n    _disconnect: function (pres)\n    {\n        if (this.socket && this.socket.readyState !== WebSocket.CLOSED) {\n            if (pres) {\n                this._conn.send(pres);\n            }\n            var close = $build(\"close\", { \"xmlns\": Strophe.NS.FRAMING });\n            this._conn.xmlOutput(close);\n            var closeString = Strophe.serialize(close);\n            this._conn.rawOutput(closeString);\n            try {\n                this.socket.send(closeString);\n            } catch (e) {\n                Strophe.info(\"Couldn't send <close /> tag.\");\n            }\n        }\n        this._conn._doDisconnect();\n    },\n\n    /** PrivateFunction: _doDisconnect\n     *  _Private_ function to disconnect.\n     *\n     *  Just closes the Socket for WebSockets\n     */\n    _doDisconnect: function ()\n    {\n        Strophe.info(\"WebSockets _doDisconnect was called\");\n        this._closeSocket();\n    },\n\n    /** PrivateFunction _streamWrap\n     *  _Private_ helper function to wrap a stanza in a <stream> tag.\n     *  This is used so Strophe can process stanzas from WebSockets like BOSH\n     */\n    _streamWrap: function (stanza)\n    {\n        return \"<wrapper>\" + stanza + '</wrapper>';\n    },\n\n\n    /** PrivateFunction: _closeSocket\n     *  _Private_ function to close the WebSocket.\n     *\n     *  Closes the socket if it is still open and deletes it\n     */\n    _closeSocket: function ()\n    {\n        if (this.socket) { try {\n            this.socket.close();\n        } catch (e) {} }\n        this.socket = null;\n    },\n\n    /** PrivateFunction: _emptyQueue\n     * _Private_ function to check if the message queue is empty.\n     *\n     *  Returns:\n     *    True, because WebSocket messages are send immediately after queueing.\n     */\n    _emptyQueue: function ()\n    {\n        return true;\n    },\n\n    /** PrivateFunction: _onClose\n     * _Private_ function to handle websockets closing.\n     *\n     * Nothing to do here for WebSockets\n     */\n    _onClose: function() {\n        if(this._conn.connected && !this._conn.disconnecting) {\n            Strophe.error(\"Websocket closed unexcectedly\");\n            this._conn._doDisconnect();\n        } else {\n            Strophe.info(\"Websocket closed\");\n        }\n    },\n\n    /** PrivateFunction: _no_auth_received\n     *\n     * Called on stream start/restart when no stream:features\n     * has been received.\n     */\n    _no_auth_received: function (_callback)\n    {\n        Strophe.error(\"Server did not send any auth methods\");\n        this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"Server did not send any auth methods\");\n        if (_callback) {\n            _callback = _callback.bind(this._conn);\n            _callback();\n        }\n        this._conn._doDisconnect();\n    },\n\n    /** PrivateFunction: _onDisconnectTimeout\n     *  _Private_ timeout handler for handling non-graceful disconnection.\n     *\n     *  This does nothing for WebSockets\n     */\n    _onDisconnectTimeout: function () {},\n\n    /** PrivateFunction: _abortAllRequests\n     *  _Private_ helper function that makes sure all pending requests are aborted.\n     */\n    _abortAllRequests: function () {},\n\n    /** PrivateFunction: _onError\n     * _Private_ function to handle websockets errors.\n     *\n     * Parameters:\n     * (Object) error - The websocket error.\n     */\n    _onError: function(error) {\n        Strophe.error(\"Websocket error \" + error);\n        this._conn._changeConnectStatus(Strophe.Status.CONNFAIL, \"The WebSocket connection could not be established was disconnected.\");\n        this._disconnect();\n    },\n\n    /** PrivateFunction: _onIdle\n     *  _Private_ function called by Strophe.Connection._onIdle\n     *\n     *  sends all queued stanzas\n     */\n    _onIdle: function () {\n        var data = this._conn._data;\n        if (data.length > 0 && !this._conn.paused) {\n            for (var i = 0; i < data.length; i++) {\n                if (data[i] !== null) {\n                    var stanza, rawStanza;\n                    if (data[i] === \"restart\") {\n                        stanza = this._buildStream().tree();\n                    } else {\n                        stanza = data[i];\n                    }\n                    rawStanza = Strophe.serialize(stanza);\n                    this._conn.xmlOutput(stanza);\n                    this._conn.rawOutput(rawStanza);\n                    this.socket.send(rawStanza);\n                }\n            }\n            this._conn._data = [];\n        }\n    },\n\n    /** PrivateFunction: _onMessage\n     * _Private_ function to handle websockets messages.\n     *\n     * This function parses each of the messages as if they are full documents. [TODO : We may actually want to use a SAX Push parser].\n     *\n     * Since all XMPP traffic starts with \"<stream:stream version='1.0' xml:lang='en' xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' id='3697395463' from='SERVER'>\"\n     * The first stanza will always fail to be parsed...\n     * Addtionnaly, the seconds stanza will always be a <stream:features> with the stream NS defined in the previous stanza... so we need to 'force' the inclusion of the NS in this stanza!\n     *\n     * Parameters:\n     * (string) message - The websocket message.\n     */\n    _onMessage: function(message) {\n        var elem, data;\n        // check for closing stream\n        var close = '<close xmlns=\"urn:ietf:params:xml:ns:xmpp-framing\" />';\n        if (message.data === close) {\n            this._conn.rawInput(close);\n            this._conn.xmlInput(message);\n            if (!this._conn.disconnecting) {\n                this._conn._doDisconnect();\n            }\n            return;\n        } else if (message.data.search(\"<open \") === 0) {\n            // This handles stream restarts\n            elem = new DOMParser().parseFromString(message.data, \"text/xml\").documentElement;\n\n            if (!this._handleStreamStart(elem)) {\n                return;\n            }\n        } else {\n            data = this._streamWrap(message.data);\n            elem = new DOMParser().parseFromString(data, \"text/xml\").documentElement;\n        }\n\n        if (this._check_streamerror(elem, Strophe.Status.ERROR)) {\n            return;\n        }\n\n        //handle unavailable presence stanza before disconnecting\n        if (this._conn.disconnecting &&\n                elem.firstChild.nodeName === \"presence\" &&\n                elem.firstChild.getAttribute(\"type\") === \"unavailable\") {\n            this._conn.xmlInput(elem);\n            this._conn.rawInput(Strophe.serialize(elem));\n            // if we are already disconnecting we will ignore the unavailable stanza and\n            // wait for the </stream:stream> tag before we close the connection\n            return;\n        }\n        this._conn._dataRecv(elem, message.data);\n    },\n\n    /** PrivateFunction: _onOpen\n     * _Private_ function to handle websockets connection setup.\n     *\n     * The opening stream tag is sent here.\n     */\n    _onOpen: function() {\n        Strophe.info(\"Websocket open\");\n        var start = this._buildStream();\n        this._conn.xmlOutput(start.tree());\n\n        var startString = Strophe.serialize(start);\n        this._conn.rawOutput(startString);\n        this.socket.send(startString);\n    },\n\n    /** PrivateFunction: _reqToData\n     * _Private_ function to get a stanza out of a request.\n     *\n     * WebSockets don't use requests, so the passed argument is just returned.\n     *\n     *  Parameters:\n     *    (Object) stanza - The stanza.\n     *\n     *  Returns:\n     *    The stanza that was passed.\n     */\n    _reqToData: function (stanza)\n    {\n        return stanza;\n    },\n\n    /** PrivateFunction: _send\n     *  _Private_ part of the Connection.send function for WebSocket\n     *\n     * Just flushes the messages that are in the queue\n     */\n    _send: function () {\n        this._conn.flush();\n    },\n\n    /** PrivateFunction: _sendRestart\n     *\n     *  Send an xmpp:restart stanza.\n     */\n    _sendRestart: function ()\n    {\n        clearTimeout(this._conn._idleTimeout);\n        this._conn._onIdle.bind(this._conn)();\n    }\n};\nreturn Strophe;\n}));\n\n(function(root){\n    if(typeof define === 'function' && define.amd){\n        define(\"strophe\", [\n            \"strophe-core\",\n            \"strophe-bosh\",\n            \"strophe-websocket\"\n        ], function (wrapper) {\n            return wrapper;\n        });\n    }\n})(this);\n\n/* jshint ignore:start */\nif (callback) {\n    if(typeof define === 'function' && define.amd){\n        //For backwards compatability\n        var n_callback = callback;\n        require([\"strophe\"],function(o){\n            n_callback(o.Strophe,o.$build,o.$msg,o.$iq,o.$pres);\n        });\n    }else{\n        return callback(Strophe, $build, $msg, $iq, $pres);\n    }\n}\n\n\n})(function (Strophe, build, msg, iq, pres) {\n    window.Strophe = Strophe;\n    window.$build = build;\n    window.$msg = msg;\n    window.$iq = iq;\n    window.$pres = pres;\n});\n/* jshint ignore:end */\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/strophe/strophe.js\n// module id = 3\n// module chunks = 0","// var ConnectionQuality = require('../../libs/connectionquality');\r\nvar ManisManagement = require('../../manis.management');\r\n\r\n/* jshint -W117 */\r\n/* a simple MUC connection plugin\r\n * can only handle a single MUC room\r\n */\r\nStrophe.addConnectionPlugin('emuc', {\r\n  connection: null,\r\n  roomjid: null,\r\n  myroomjid: null,\r\n  members: {},\r\n  list_members: [], // so we can elect a new focus\r\n  presMap: {},\r\n  preziMap: {},\r\n  joined: false,\r\n  isOwner: false,\r\n  role: null,\r\n  init: function (conn) {\r\n    this.connection = conn;\r\n  },\r\n  initPresenceMap: function (myroomjid) {\r\n    this.presMap['to'] = myroomjid;\r\n    this.presMap['xns'] = 'http://igniterealtime.org/protocol/ofmeet';\r\n  },\r\n  doJoin: function (jid, password) {\r\n    this.members = {};\r\n    this.list_members = [];\r\n    this.myroomjid = jid;\r\n\r\n    console.info(\"Joined MUC as \" + this.myroomjid);\r\n\r\n    this.initPresenceMap(this.myroomjid.split('/')[0]);\r\n\r\n    if (!this.roomjid) {\r\n      this.roomjid = Strophe.getBareJidFromJid(jid);\r\n      // add handlers (just once)\r\n      this.connection.addHandler(this.handleManageIq.bind(this), null, 'iq', 'set', null, null);\r\n      this.connection.addHandler(this.onPresence.bind(this), null, 'presence', null, null, null, {matchBare: true});\r\n      this.connection.addHandler(this.onPresenceUnavailable.bind(this), null, 'presence', 'unavailable', null, null, {matchBare: true});\r\n      this.connection.addHandler(this.onPresenceError.bind(this), null, 'presence', 'error', null, null, {matchBare: true});\r\n      this.connection.addHandler(this.onMessage.bind(this), null, 'message', null, null, null, {matchBare: true});\r\n      this.connection.addHandler(this.handleRecordResultIq.bind(this), null, 'iq', 'result');\r\n    }\r\n    if (password !== undefined) {\r\n      this.presMap['password'] = password;\r\n    }\r\n    this.roomjid = Strophe.getBareJidFromJid(jid);\r\n    this.sendPresence();\r\n    // add myself to member list\r\n    var participant = {\r\n      nickname: config.nickname ? config.nickname : manisConfg.mUserName,\r\n      jid: connection.jid,\r\n      resource: Strophe.getResourceFromJid(connection.jid),\r\n      audio_muted: false,\r\n      video_muted: false,\r\n      is_moderator: (connection.jid == config.moderatorJid),\r\n    };\r\n    window.participants.push(participant);\r\n  },\r\n\r\n  handleManageIq: function (iq) {\r\n    var from = iq.getAttribute('from');\r\n    if(from.indexOf('admin') > -1){\r\n      ManisManagement.handleManageMsg(iq);\r\n    }\r\n    return true;\r\n  },\r\n\r\n  doLeave: function () {\r\n    console.log(\"do leave\", this.myroomjid);\r\n    var pres = $pres({to: this.myroomjid, type: 'unavailable'});\r\n    pres.c('status').t(window.exitCode).up()\r\n    // console.log('1111111111111111111111=======willSendUnavailablePresence============', pres.tree())\r\n    this.presMap.length = 0;\r\n    this.members = {};\r\n    this.list_members = [];\r\n    this.roomjid = null;\r\n    this.connection.send(pres);\r\n  },\r\n  onPresence: function (pres) {\r\n    var from = pres.getAttribute('from');\r\n    var type = pres.getAttribute('type');\r\n    if (type != null) {\r\n      return true;\r\n    }\r\n\r\n    // Parse etherpad tag.\r\n    var etherpad = $(pres).find('etherpad');\r\n    if (etherpad.length) {\r\n      $(document).trigger('etherpadadded.muc', [from, etherpad.text()]);\r\n    }\r\n\r\n    // Parse prezi tag.\r\n    var presentation = $(pres).find('prezi');\r\n    if (presentation.length) {\r\n      var url = presentation.attr('url');\r\n      var current = presentation.find('>current').text();\r\n\r\n      //console.log('presentation info received from', from, url);\r\n\r\n      if (this.preziMap[from] == null) {\r\n        this.preziMap[from] = url;\r\n\r\n        $(document).trigger('presentationadded.muc', [from, url, current]);\r\n      }\r\n      else {\r\n        $(document).trigger('gotoslide.muc', [from, url, current]);\r\n      }\r\n    }\r\n    else if (this.preziMap[from] != null) {\r\n      var url = this.preziMap[from];\r\n      delete this.preziMap[from];\r\n      $(document).trigger('presentationremoved.muc', [from, url]);\r\n    }\r\n\r\n    // Parse audio info tag.\r\n    var audioMuted = $(pres).find('audiomuted');\r\n    if (audioMuted.length) {\r\n      $(document).trigger('audiomuted.muc', [from, audioMuted.text()]);\r\n    }\r\n\r\n    // Parse video info tag.\r\n    var videoMuted = $(pres).find('videomuted');\r\n    if (videoMuted.length) {\r\n      $(document).trigger('videomuted.muc', [from, videoMuted.text()]);\r\n    }\r\n\r\n    // is moderator\r\n    var configRole = $(pres).find('configRole').text();\r\n    if (configRole.length) {\r\n      if(configRole == 'CRUO' || configRole == 'CRUA'){\r\n        var isModerator = true;\r\n      }else {\r\n        var isModerator = false;\r\n      }\r\n      $(document).trigger('moderatored.muc', [from, isModerator]);\r\n    }\r\n\r\n    // Parse status.\r\n    if ($(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]>status[code=\"201\"]').length) {\r\n      // http://xmpp.org/extensions/xep-0045.html#createroom-instant\r\n      this.isOwner = true;\r\n      var create = $iq({type: 'set', to: this.roomjid})\r\n        .c('query', {xmlns: 'http://jabber.org/protocol/muc#owner'})\r\n        .c('x', {xmlns: 'jabber:x:data', type: 'submit'});\r\n      this.connection.sendIQ(create); // fire away\r\n    }\r\n\r\n    // Parse roles.\r\n    var member = {};\r\n    member.show = $(pres).find('>show').text();\r\n    member.status = '';\r\n    var tmp = $(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]>item');\r\n    member.affiliation = tmp.attr('affiliation');\r\n    member.role = tmp.attr('role');\r\n\r\n    // Focus recognition\r\n    member.jid = tmp.attr('jid') ? tmp.attr('jid') : from;\r\n    member.isFocus = false;\r\n    if (member.jid\r\n      && member.jid.indexOf(config.focusUserJid + \"/\") == 0) {\r\n      member.isFocus = true;\r\n    }\r\n\r\n    var nicktag = $(pres).find('nick[xmlns=\"http://jabber.org/protocol/nick\"]');\r\n    member.displayName = (nicktag.length > 0 ? nicktag.text() : null);\r\n    if(config.debug == true){\r\n      console.log('receive presence >>>>>>','\\r\\n', pres, '\\r\\n', '<<<<<<');\r\n    }\r\n\r\n    if (from && this.members[from] === undefined) {\r\n      // new participant\r\n      this.members[from] = member;\r\n      this.list_members.push(from);\r\n      $(document).trigger('entered.muc', [from, member, pres]);\r\n    }\r\n    $(document).trigger('presence.muc', [from, member, pres]);\r\n    $(document).trigger('presence.status', [pres]);\r\n    var ref = $(pres).find('>refIqStatus');\r\n    if(ref.length){\r\n      var cRef = ref.find('>refIqStatus') || null;\r\n      if(cRef && cRef.length){\r\n        var refCode = cRef.text() || null;\r\n        if(refCode == '301'){\r\n          $(document).trigger('manis.recorder.status.change', [true, from]);\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  },\r\n\r\n  onParticipantLeave: function (from) {\r\n    delete this.members[from];\r\n    this.list_members.splice(this.list_members.indexOf(from), 1);\r\n    return true;\r\n  },\r\n\r\n  onPresenceUnavailable: function (pres) {\r\n    var from = pres.getAttribute('from');\r\n    // Status code 110 indicates that this notification is \"self-presence\".\r\n    // if (!$(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]>status[code=\"110\"]').length) {\r\n    this.onParticipantLeave(from);\r\n    $(document).trigger('left.muc', [from]);\r\n    // }\r\n    // If the status code is 110 this means we're leaving and we would like\r\n    // to remove everyone else from our view, so we trigger the event.\r\n    // else if (this.list_members.length > 1) {\r\n    //   for (var i = 0; i < this.list_members.length; i++) {\r\n    //     var member = this.list_members[i];\r\n    //     delete this.members[i];\r\n    //     this.list_members.splice(i, 1);\r\n    //     $(document).trigger('left.muc', member);\r\n    //   }\r\n    // }\r\n    // if ($(pres).find('>x[xmlns=\"http://jabber.org/protocol/muc#user\"]>status[code=\"307\"]').length) {\r\n    //   $(document).trigger('kicked.muc', [from]);\r\n    // }\r\n    return true;\r\n  },\r\n  onPresenceError: function (pres) {\r\n    var from = pres.getAttribute('from');\r\n    if ($(pres).find('>error[type=\"auth\"]>not-authorized[xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"]').length) {\r\n      $(document).trigger('passwordrequired.muc', [from]);\r\n    } else if ($(pres).find(\r\n        '>error[type=\"cancel\"]>not-allowed[xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"]').length) {\r\n      var toDomain = Strophe.getDomainFromJid(pres.getAttribute('to'));\r\n      if (toDomain === config.hosts.anonymousdomain) {\r\n        // we are connected with anonymous domain and only non anonymous users can create rooms\r\n        // we must authorize the user\r\n        $(document).trigger('passwordrequired.main');\r\n      } else {\r\n        console.warn('onPresError ', pres);\r\n        //messageHandler.openReportDialog(null, 'Oops! Something went wrong and we couldn`t connect to the conference.',pres);\r\n      }\r\n    } else {\r\n      console.warn('onPresError ', pres);\r\n      //messageHandler.openReportDialog(null, 'Oops! Something went wrong and we couldn`t connect to the conference.', pres);\r\n    }\r\n    return true;\r\n  },\r\n  sendMessage: function (body, nickname) {\r\n    var msg = $msg({to: this.roomjid, type: 'groupchat'});\r\n    msg.c('body', body).up();\r\n    if (nickname) {\r\n      msg.c('nick', {xmlns: 'http://jabber.org/protocol/nick'}).t(nickname).up();\r\n    }\r\n    this.connection.send(msg);\r\n    // if (APIConnector.isEnabled() && APIConnector.isEventEnabled(\"outgoingMessage\")) {\r\n    //   APIConnector.triggerEvent(\"outgoingMessage\", {\"message\": body});\r\n    // }\r\n    console.log('send message ', body, nickname);\r\n  },\r\n  setSubject: function (subject) {\r\n    var msg = $msg({to: this.roomjid, type: 'groupchat'});\r\n    msg.c('subject', subject);\r\n    this.connection.send(msg);\r\n    //console.log(\"topic changed to \" + subject);\r\n  },\r\n  onMessage: function (msg) {\r\n    // FIXME: this is a hack. but jingle on muc makes nickchanges hard\r\n    // console.log('msg ***************** ', msg);\r\n    var from = msg.getAttribute('from');\r\n\r\n    var screen = $(msg).find('>screen[xmlns=\"http://jitsi.org/protocol/screen\"]');\r\n    if (screen.length) {\r\n      var screenStatus = $(msg).find('property').attr('value');\r\n      if(window.isUsingScreenStream == true && connection.jingle.localScreen != null){\r\n        console.log('sssssssssssssssssssssss222222222222',screenStatus);\r\n        $(document).trigger('manis.been.stop.screen.share');\r\n      }\r\n      return true;\r\n    }\r\n\r\n    var isTextMsgWithParticipant = $(msg).find('>nick[xmlns=\"http://jabber.org/protocol/nick\"]').text() || false;\r\n    var nick = $(msg).find('>nick[xmlns=\"http://jabber.org/protocol/nick\"]').text() || Strophe.getResourceFromJid(from);\r\n\r\n    var txt = $(msg).find('>body').text();\r\n    var type = msg.getAttribute(\"type\");\r\n    if (type == \"error\") {\r\n      // Chat.chatAddError($(msg).find('>text').text(), txt);\r\n      console.log(\"message error\", $(msg).find('>text').text(), txt);\r\n      return true;\r\n    }\r\n\r\n    /**\r\n    <!-- 显示消息 -->\r\n    <message id=\"zb4ey-381\" to=\"0fd1da950287c17e@61.149.55.24/webad9eef98259a3c937880d3516d4061c9\"\r\n             from=\"eccd5819a60f3fef@10.20.20.104/focusmastera892483aaae80c1cf598d163d0d6c011\" type=\"groupchat\">\r\n      <body xmlns=\"http://igniterealtime.org/protocol/stage\" xml:lang=\"\"\r\n            jid=\"fa4d25d33f3e7c62@61.149.55.24/webc5c513a667b106c7b42a389494780deb\" screen=\"false\">\r\n        webc5c513a667b106c7b42a389494780deb\r\n      </body>\r\n      <resource xmlns=\"http://igniterealtime.org/protocol/endpoint\">webc5c513a667b106c7b42a389494780deb</resource>\r\n      <ssrc xmlns=\"http://igniterealtime.org/protocol/streamssrc\">156757757</ssrc>\r\n      <splitScreen xmlns=\"http://igniterealtime.org/protocol/splitScreen\">0</splitScreen>\r\n      <display xmlns=\"http://igniterealtime.org/protocol/display\">\r\n        webc5c513a667b106c7b42a389494780deb_156757757,webad9eef98259a3c937880d3516d4061c9_3681994858\r\n      </display>\r\n    </message>\r\n    * */\r\n\r\n    var displaySort = $(msg).find('>display[xmlns=\"http://igniterealtime.org/protocol/display\"]');\r\n    if(displaySort.length){\r\n      var displayMode = $(msg).find('>splitScreen[xmlns=\"http://igniterealtime.org/protocol/splitScreen\"]').text() || '0';\r\n      var sortParticipants = $(msg).find('>display[xmlns=\"http://igniterealtime.org/protocol/display\"]').text() || '';\r\n      var sort = [];\r\n      if(sortParticipants){\r\n        var sortArr = sortParticipants.split(',');\r\n        sortArr.forEach(function(item){\r\n          var p = {};\r\n          var t = item.split('_');\r\n          p.endpoint = t[0];\r\n          p.ssrc = t[1];\r\n          sort.push(p);\r\n        });\r\n      }\r\n      // console.log('on sort participants from focus: ', sort, ' display model: ', displayMode);\r\n      $(document).trigger('manis.on.participants.sort.change', [sort, displayMode]);\r\n      return true;\r\n    }\r\n\r\n\r\n\r\n    // var displayMode = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/splitScreen\"]');\r\n    // if (displayMode.length) {\r\n    //   // console.log('on display mode change msg : ', msg, 'mode', txt);\r\n    //   var delay = $(msg).find('>delay[xmlns=\"urn:xmpp:delay\"]');\r\n    //   if (delay.length) {\r\n    //     // console.log('delay display mode change msg ');\r\n    //   } else {\r\n    //     $(document).trigger('manis.display.mode.changed', [txt]);\r\n    //   }\r\n    //   return true;\r\n    // }\r\n\r\n    var roomLock = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/roomlock\"]');\r\n    if(roomLock.length){\r\n      var lockStatus = roomLock.find('>status').text();\r\n      $(document).trigger('manis.room.lock.status.change', [lockStatus]);\r\n      return true;\r\n    }\r\n\r\n    // var mainDisplay = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/stage\"]');\r\n    // if (mainDisplay.length) {\r\n    //   var endpoint = $(msg).find('>resource[xmlns=\"http://igniterealtime.org/protocol/endpoint\"]') ? $(msg).find('>resource[xmlns=\"http://igniterealtime.org/protocol/endpoint\"]').text() : txt;\r\n    //   var streamSSRC = $(msg).find('>ssrc[xmlns=\"http://igniterealtime.org/protocol/streamssrc\"]') ? $(msg).find('>ssrc[xmlns=\"http://igniterealtime.org/protocol/streamssrc\"]').text() : null;\r\n    //   // console.log('on main display source change msg : ', msg, endpoint, streamSSRC);\r\n    //   var delay = $(msg).find('>delay[xmlns=\"urn:xmpp:delay\"]');\r\n    //   if (delay.length) {\r\n    //     // console.log('delay main display change msg ');\r\n    //   } else {\r\n    //     $(document).trigger('manis.main.display.changed', [endpoint, streamSSRC]);\r\n    //   }\r\n    //   return true;\r\n    // }\r\n\r\n    var annotation = $(msg).find('>annotate[xmlns=\"http://igniterealtime.org/protocol/annotate\"]');\r\n    if(annotation.length){\r\n        var urlData = annotation.attr('url');\r\n        if (urlData.indexOf('getInit') > -1) {\r\n          $(document).trigger('manis.on.annotation.get.init', [{\r\n              from: from,\r\n              action: annotation.attr('action'),\r\n              data: urlData\r\n          }]);\r\n          return true;\r\n        }\r\n        $(document).trigger('manis.on.annotation', [{\r\n          from: from,\r\n          action: annotation.attr('action'),\r\n          data: urlData\r\n        }]);\r\n      return true;\r\n    }\r\n\r\n    var hardRemove = $(msg).find('>body[xmlns=\"http://igniterealtime.org/protocol/hardremove\"]');\r\n    if (hardRemove.length) {\r\n      var streamSSRC = $(msg).find('>ssrc[xmlns=\"http://igniterealtime.org/protocol/streamssrc\"]') ? $(msg).find('>ssrc[xmlns=\"http://igniterealtime.org/protocol/streamssrc\"]').text() : null;\r\n      // console.log('hard remove stream msg : ', msg, endpoint, streamSSRC);\r\n      $(document).trigger('mains.on.stream.removed', ['video', streamSSRC, true]);\r\n      return true;\r\n    }\r\n\r\n    var subject = $(msg).find('>subject');\r\n    if (subject.length) {\r\n      var subjectText = subject.text();\r\n      if (subjectText || subjectText == \"\") {\r\n        // Chat.chatSetSubject(subjectText);\r\n        console.log(\"Subject is changed to \" + subjectText);\r\n      }\r\n    }\r\n    // 会控操作消息\r\n    if (from.lastIndexOf(\"admin\") != -1) {\r\n      // ManisManagement.onManagementMsg(txt, nick);\r\n      return true;\r\n    }\r\n    // 会议室成员发送的消息\r\n    if (txt && isTextMsgWithParticipant) {\r\n      $(document).trigger('onmessage.muc', [from, nick, txt]);\r\n    }\r\n    return true;\r\n  },\r\n\r\n  handleRecordResultIq: function (iq) {\r\n    var from = $(iq).attr('from');\r\n    var recordResult = $(iq).find('>ref[xmlns=\"urn:xmpp:rayo:1\"]');\r\n    if(recordResult.length){\r\n      console.log('handle recorder result iq', iq, from);\r\n      var uriCode = recordResult.attr('uri') || null;\r\n      if(uriCode == '301'){\r\n        // record start\r\n        $(document).trigger('manis.recorder.status.change', [true, from]);\r\n      }\r\n    }\r\n    return true;\r\n  },\r\n/*  lockRoom: function (key) {\r\n    //http://xmpp.org/extensions/xep-0045.html#roomconfig\r\n    var ob = this;\r\n    this.connection.sendIQ($iq({\r\n        to: this.roomjid,\r\n        type: 'get'\r\n      }).c('query', {xmlns: 'http://jabber.org/protocol/muc#owner'}),\r\n      function (res) {\r\n        if ($(res).find('>query>x[xmlns=\"jabber:x:data\"]>field[var=\"muc#roomconfig_roomsecret\"]').length) {\r\n          var formsubmit = $iq({\r\n            to: ob.roomjid,\r\n            type: 'set'\r\n          }).c('query', {xmlns: 'http://jabber.org/protocol/muc#owner'});\r\n          formsubmit.c('x', {xmlns: 'jabber:x:data', type: 'submit'});\r\n          formsubmit.c('field', {'var': 'FORM_TYPE'}).c('value').t('http://jabber.org/protocol/muc#roomconfig').up().up();\r\n          formsubmit.c('field', {'var': 'muc#roomconfig_roomsecret'}).c('value').t(key).up().up();\r\n          formsubmit.c('field', {'var': 'muc#roomconfig_passwordprotectedroom'}).c('value').t('1').up().up();\r\n\r\n          this.connection.sendIQ(formsubmit,\r\n            function (res) {\r\n              // password is required\r\n              if (sharedKey) {\r\n                //console.log('set room password');\r\n                Toolbar.lockLockButton();\r\n              }\r\n              else {\r\n                //console.log('removed room password');\r\n                Toolbar.unlockLockButton();\r\n              }\r\n            },\r\n            function (err) {\r\n              console.warn('setting password failed', err);\r\n              messageHandler.showError('Lock failed',\r\n                'Failed to lock conference.',\r\n                err);\r\n              setSharedKey('');\r\n            }\r\n          );\r\n        } else {\r\n          console.warn('room passwords not supported');\r\n          messageHandler.showError('Warning',\r\n            'Room passwords are currently not supported.');\r\n          setSharedKey('');\r\n\r\n        }\r\n      },\r\n      function (err) {\r\n        console.warn('setting password failed', err);\r\n        messageHandler.showError('Lock failed',\r\n          'Failed to lock conference.',\r\n          err);\r\n        setSharedKey('');\r\n      }\r\n    );\r\n  },*/\r\n  kick: function (jid) {\r\n    var kickIQ = $iq({to: this.roomjid, type: 'set'})\r\n      .c('query', {xmlns: 'http://jabber.org/protocol/muc#admin'})\r\n      .c('item', {nick: Strophe.getResourceFromJid(jid), role: 'none'})\r\n      .c('reason').t('You have been kicked.').up().up().up();\r\n\r\n    this.connection.sendIQ(\r\n      kickIQ,\r\n      function (result) {\r\n        //console.log('Kick participant with jid: ', jid, result);\r\n      },\r\n      function (error) {\r\n        //console.log('Kick participant error: ', error);\r\n      });\r\n  },\r\n  sendPresence: function () {\r\n    if (!this.presMap['to']) {\r\n      // Too early to send presence - not initialized\r\n      return;\r\n    }\r\n\r\n    // BAO handle jabber.org different from jitsi extensions\r\n    // OF does not pass on jitsi extensions inside <x>\r\n\r\n    if (this.presMap['password']) {\r\n      var presx = $pres({to: this.presMap['to']});\r\n      presx.c('x', {xmlns: 'http://jabber.org/protocol/muc'});\r\n      presx.c('password').t(this.presMap['password']).up();\r\n\r\n      // Send XEP-0115 'c' stanza that contains our capabilities info\r\n      if (connection.caps) {\r\n        connection.caps.node = config.clientNode;\r\n        presx.c('c', connection.caps.generateCapsAttrs()).up();\r\n      }\r\n\r\n      connection.send(presx);\r\n      this.presMap['password'] = null;\r\n      return;\r\n    }\r\n\r\n    var pres = $pres({to: this.presMap['to'], from: connection.jid});\r\n    pres.c('x', {xmlns: this.presMap['xns']});\r\n\r\n    pres.c('user-agent', {xmlns: 'http://jitsi.org/jitmeet/user-agent'})\r\n      .t(navigator.userAgent).up();\r\n\r\n    if (this.presMap['bridgeIsDown']) {\r\n      pres.c('bridgeIsDown').up();\r\n    }\r\n\r\n    if (this.presMap['configRole']) {\r\n      pres.c('configRole').t(this.presMap['configRole']).up();\r\n    }\r\n\r\n    if (this.presMap['email']) {\r\n      pres.c('email').t(this.presMap['email']).up();\r\n    }\r\n\r\n    if (this.presMap['userId']) {\r\n      pres.c('userId').t(this.presMap['userId']).up();\r\n    }\r\n\r\n    if (this.presMap['avartar']) {\r\n      pres.c('avartar', {xmlns: \"http://jabber.org/protocol/avartar\"}).t(this.presMap['avartar']).up();\r\n    }\r\n\r\n    if (this.presMap['displayName']) {\r\n      // XEP-0172\r\n      pres.c('nick', {xmlns: 'http://jabber.org/protocol/nick'})\r\n        .t(this.presMap['displayName']).up();\r\n    }\r\n\r\n    if (this.presMap['audions']) {\r\n      pres.c('audiomuted', {xmlns: this.presMap['audions']})\r\n        .t(this.presMap['audiomuted']).up();\r\n    }\r\n\r\n    if (this.presMap['videons']) {\r\n      pres.c('videomuted', {xmlns: this.presMap['videons']})\r\n        .t(this.presMap['videomuted']).up();\r\n    }\r\n\r\n    if (this.presMap['moderatorns']) {\r\n      pres.c('isModerator', {xmlns: this.presMap['moderatorns']})\r\n        .t(this.presMap['isModerator']).up();\r\n    }\r\n\r\n    if (this.presMap['masterStreamSSRC']) {\r\n      pres.c('withMasterStream', {value: this.presMap['withMasterStream']})\r\n        .t(this.presMap['masterStreamSSRC']).up();\r\n    }\r\n\r\n    if (this.presMap['statsns']) {\r\n      var stats = pres.c('stats', {xmlns: this.presMap['statsns']});\r\n      for (var stat in this.presMap[\"stats\"])\r\n        if (this.presMap[\"stats\"][stat] != null)\r\n          stats.c(\"stat\", {name: stat, value: this.presMap[\"stats\"][stat]}).up();\r\n      pres.up();\r\n    }\r\n\r\n    if (this.presMap['prezins']) {\r\n      pres.c('prezi',\r\n        {\r\n          xmlns: this.presMap['prezins'],\r\n          'url': this.presMap['preziurl']\r\n        })\r\n        .c('current').t(this.presMap['prezicurrent']).up().up();\r\n    }\r\n\r\n    if (this.presMap['etherpadns']) {\r\n      pres.c('etherpad', {xmlns: this.presMap['etherpadns']})\r\n        .t(this.presMap['etherpadname']).up();\r\n    }\r\n\r\n    if (this.presMap['medians']) {\r\n      pres.c('media', {xmlns: this.presMap['medians']});\r\n      var sourceNumber = 0;\r\n      Object.keys(this.presMap).forEach(function (key) {\r\n        if (key.indexOf('source') >= 0) {\r\n          sourceNumber++;\r\n        }\r\n      });\r\n      if (sourceNumber > 0)\r\n        for (var i = 1; i <= sourceNumber / 3; i++) {\r\n          pres.c('source',\r\n            {\r\n              type: this.presMap['source' + i + '_type'],\r\n              ssrc: this.presMap['source' + i + '_ssrc'],\r\n              direction: this.presMap['source' + i + '_direction']\r\n              || 'sendrecv'\r\n            }\r\n          ).up();\r\n        }\r\n    }\r\n\r\n    pres.up();\r\n    if(config.debug == true){\r\n      console.log('send presence <<<<<<<','\\r\\n', pres.tree(), '\\r\\n', '>>>>>>>');\r\n    }\r\n    // console.log('send presence at : ', new Date());\r\n    connection.send(pres);\r\n    $(document).trigger('presence.status', [pres.tree()]);\r\n  },\r\n  addDisplayNameToPresence: function (displayName) {\r\n    this.presMap['displayName'] = displayName;\r\n  },\r\n  addMediaToPresence: function (sourceNumber, mtype, ssrcs, direction) {\r\n    if (!this.presMap['medians'])\r\n      this.presMap['medians'] = 'http://estos.de/ns/mjs';\r\n\r\n    this.presMap['source' + sourceNumber + '_type'] = mtype;\r\n    this.presMap['source' + sourceNumber + '_ssrc'] = ssrcs;\r\n    this.presMap['source' + sourceNumber + '_direction'] = direction;\r\n  },\r\n  clearPresenceMedia: function () {\r\n    var self = this;\r\n    Object.keys(this.presMap).forEach(function (key) {\r\n      if (key.indexOf('source') != -1) {\r\n        delete self.presMap[key];\r\n      }\r\n    });\r\n  },\r\n  addPreziToPresence: function (url, currentSlide) {\r\n    this.presMap['prezins'] = 'http://jitsi.org/jitmeet/prezi';\r\n    this.presMap['preziurl'] = url;\r\n    this.presMap['prezicurrent'] = currentSlide;\r\n  },\r\n  removePreziFromPresence: function () {\r\n    delete this.presMap['prezins'];\r\n    delete this.presMap['preziurl'];\r\n    delete this.presMap['prezicurrent'];\r\n  },\r\n  addCurrentSlideToPresence: function (currentSlide) {\r\n    this.presMap['prezicurrent'] = currentSlide;\r\n  },\r\n  getPrezi: function (roomjid) {\r\n    return this.preziMap[roomjid];\r\n  },\r\n  addEtherpadToPresence: function (etherpadName) {\r\n    this.presMap['etherpadns'] = 'http://jitsi.org/jitmeet/etherpad';\r\n    this.presMap['etherpadname'] = etherpadName;\r\n  },\r\n  addAudioInfoToPresence: function (isMuted) {\r\n    this.presMap['audions'] = 'http://jitsi.org/jitmeet/audio';\r\n    this.presMap['audiomuted'] = isMuted.toString();\r\n  },\r\n  addVideoInfoToPresence: function (isMuted) {\r\n    this.presMap['videons'] = 'http://jitsi.org/jitmeet/video';\r\n    this.presMap['videomuted'] = isMuted.toString();\r\n  },\r\n  addConnectionInfoToPresence: function (stats) {\r\n    this.presMap['statsns'] = 'http://jitsi.org/jitmeet/stats';\r\n    this.presMap['stats'] = stats;\r\n  },\r\n  addConfigRoleToPresence: function (configRole) {\r\n    this.presMap['configRole'] = configRole;\r\n  },\r\n  findJidFromResource: function (resourceJid) {\r\n    if (resourceJid &&\r\n      resourceJid === Strophe.getResourceFromJid(connection.emuc.myroomjid)) {\r\n      return connection.emuc.myroomjid;\r\n    }\r\n    var peerJid = null;\r\n    Object.keys(this.members).some(function (jid) {\r\n      peerJid = jid;\r\n      return Strophe.getResourceFromJid(jid) === resourceJid;\r\n    });\r\n    return peerJid;\r\n  },\r\n  addBridgeIsDownToPresence: function () {\r\n    this.presMap['bridgeIsDown'] = true;\r\n  },\r\n  addEmailToPresence: function (email) {\r\n    this.presMap['email'] = email;\r\n  },\r\n  addIsModeratorToPresence: function (isModerator) {\r\n    this.presMap['moderatorns'] = 'http://jitsi.org/jitmeet/moderator';\r\n    this.presMap['isModerator'] = isModerator;\r\n  },\r\n  addMasterStreamToPresence: function (withMasterStream, masterStreamSSRC) {\r\n    this.presMap['withMasterStream'] = withMasterStream;\r\n    this.presMap['masterStreamSSRC'] = masterStreamSSRC;\r\n  },\r\n  addUserIdToPresence: function (userId) {\r\n    this.presMap['userId'] = userId;\r\n  },\r\n  isModerator: function () {\r\n    return this.role === 'moderator';\r\n  },\r\n\r\n  addAvartarToPresence: function (avartar) {\r\n    this.presMap['avartar'] = avartar;\r\n  },\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/strophe/plugins/strophe.emuc.js\n// module id = 4\n// module chunks = 0","/**\r\n * Created by Qiang.Deng on 2017/7/5.\r\n */\r\nvar Status = require('./manis.status');\r\nvar Functions = require('./manis.functions');\r\n\r\nvar ManisManagement = {\r\n\r\n  onMsg: null,\r\n\r\n  onMsgTime: null,\r\n\r\n  allMsg: 0,\r\n\r\n  audioRetryTimes: 10,//times, first enter try do audio mute or not\r\n\r\n  videoRetryTimes: 10,//times, first enter try do video close or not\r\n\r\n  managerSetAudioMuteTry: null,\r\n\r\n  managerSetVideoMuteTry: null,\r\n\r\n  handleManageMsg: function (msg) {\r\n\r\n    console.log('handle manage message from administrator: ', msg);\r\n\r\n    var systemUpgrade = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/upgrade\"]');\r\n    if(systemUpgrade.length){\r\n      //@Comment upcoming, inprogress, complete\r\n      var section = systemUpgrade.text() || 'upcoming';\r\n      $(document).trigger('manis.on.system.upgrade', [section]);\r\n      return true;\r\n    }\r\n\r\n    // all audio control\r\n    var allAudioControl = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/allAudio\"]');\r\n    if(allAudioControl.length){\r\n      var allAudioMute = allAudioControl.text() == 'true';\r\n      this.setAllAudioMute(allAudioMute);\r\n      return true;\r\n    }\r\n\r\n    // all video control\r\n    var allVideoControl = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/allVideo\"]');\r\n    if(allVideoControl.length){\r\n      var allVideoMute = allVideoControl.text() == 'true';\r\n      this.setAllVideoMute(allVideoMute);\r\n      return true;\r\n    }\r\n\r\n    // audio control someone\r\n    var singleAudioControl = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/audio\"]');\r\n    if(singleAudioControl.length){\r\n      var singleAudioMute = singleAudioControl.text() == 'true';\r\n      this.managerSetAudioMute(singleAudioMute);\r\n      return true;\r\n    }\r\n\r\n    // video control someone\r\n    var singleAudioControl = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/video\"]');\r\n    if(singleAudioControl.length){\r\n      var singleAudioMute = singleAudioControl.text() == 'true';\r\n      this.managerSetVideoMute(singleAudioMute);\r\n      return true;\r\n    }\r\n\r\n    // room will close\r\n    var roomWillClose = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/toClose\"]');\r\n    if(roomWillClose.length){\r\n      var timeLeft = roomWillClose.attr('time-left') || 0;\r\n      $(document).trigger('manis.on.room.countdown', [timeLeft]);\r\n      return true;\r\n    }\r\n\r\n    // room moderator lost\r\n    var moderatorLost = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/lostModerator\"]');\r\n    if(moderatorLost.length){\r\n      var moderatorLostStatus = moderatorLost.text() == 'true';\r\n      var timeLeft = moderatorLost.attr('time-left') || null;\r\n      $(document).trigger('manis.on.with.moderator.changed',[!moderatorLostStatus, timeLeft]);\r\n      return true;\r\n    }\r\n\r\n    // room lock\r\n    var roomLock = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/lock\"]');\r\n    if(roomLock.length){\r\n      var lockStatus = roomLock.text() == 'true';\r\n      if (Functions.isAdmin()) {\r\n        this.manageLockRoom(lockStatus);\r\n      }else {\r\n        $(document).trigger('manis.room.lock.status.change', [lockStatus]);\r\n      }\r\n      return true;\r\n    }\r\n\r\n    // handle text message\r\n    var groupChat = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/groupChat\"]');\r\n    if(groupChat.length){\r\n      textContent = groupChat.text() || '';\r\n      this.onManagementMsg(textContent, null);\r\n      return true;\r\n    }\r\n\r\n    var privateChat = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/privateChat\"]');\r\n    if(privateChat.length){\r\n      textContent = privateChat.text() || '';\r\n      this.onManagementMsg(textContent, null);\r\n      return true;\r\n    }\r\n\r\n    var moderatorModify = $(msg).find('>conferenceCtrl[xmlns=\"http://jitsi.org/jitmeet/moderator\"]');\r\n    if(moderatorModify.length){\r\n      var moderatorSwitch = moderatorModify.attr('moderator');\r\n      var jid = moderatorModify.text() || '';\r\n      if(jid){\r\n        if(jid == connection.jid){\r\n          console.log('manager change my role : ', moderatorSwitch, ' at : ', new Date());\r\n          var isAdmin = moderatorSwitch == 'true';\r\n          Functions.setAdmin(isAdmin);\r\n          connection.emuc.addConfigRoleToPresence(config.role);\r\n          connection.emuc.addIsModeratorToPresence(Functions.isAdmin());\r\n          connection.emuc.sendPresence();\r\n          if(isAdmin){\r\n            // on set to moderator by administrator\r\n            $(document).trigger('manis.on.grant.admin');\r\n          }else {\r\n            // on remove moderator by administrator\r\n            $(document).trigger('manis.on.remove.admin');\r\n          }\r\n        }else {\r\n          // jid != connection.jis  && I am moderator, reset config.role to 'NONE'\r\n          if(Functions.isAdmin()){\r\n            console.log('manager change moderator from: ', connection.jid, ' to :', jid, ' at: ', new Date());\r\n            Functions.setAdmin(false);\r\n            connection.emuc.addConfigRoleToPresence(config.role);\r\n            connection.emuc.addIsModeratorToPresence(Functions.isAdmin());\r\n            connection.emuc.sendPresence();\r\n            $(document).trigger('manis.on.remove.admin');\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return true;\r\n  },\r\n\r\n  // 接收到会控消息\r\n  onManagementMsg: function (msg, nick) {\r\n    this.textMsgFromManager(msg, nick);\r\n  },\r\n\r\n  /**\r\n   * 文本消息\r\n   * @param message\r\n   * @param nick\r\n   * @returns {boolean}\r\n   */\r\n  textMsgFromManager: function (message, nick) {\r\n      var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n      if(lang == 'en'){\r\n        var sender = 'Manager';\r\n      }else {\r\n        var sender = '会控管理员';\r\n      }\r\n      $(document).trigger('onmessage.muc', [config.focusUserJid, nick ? nick : sender, message]);\r\n      return true;\r\n  },\r\n\r\n  // 全员静音\r\n  setAllAudioMute: function (muteStatus) {\r\n    // ignore moderator while set all\r\n    if((config.role == 'CRUA' || config.role == 'CRUO') && muteStatus ){\r\n      return true;\r\n    }\r\n    this.managerSetAudioMute(muteStatus);\r\n  },\r\n\r\n  // 全员禁视频\r\n  setAllVideoMute: function (muteStatus) {\r\n    // ignore moderator while set all\r\n    if((config.role == 'CRUA' || config.role == 'CRUO') && muteStatus ){\r\n      return true;\r\n    }\r\n    this.managerSetVideoMute(muteStatus);\r\n  },\r\n\r\n  // 锁定会议室\r\n  manageLockRoom: function (isLockRoom) {\r\n    if (isLockRoom == window.lock) {\r\n      console.log('now room is : ', isLockRoom, 'do nothing');\r\n      $(document).trigger('manis.room.lock.status.change', [isLockRoom]);\r\n      return true;\r\n    }\r\n    try {\r\n      var username = manisConfg.mUserId;\r\n      var roomNumber = roomName.split('@')[0];\r\n      var _header = Functions.authoredHeader();\r\n      $.ajax({\r\n        url: window.serverPath + \"/conference/lock?i=\" + username + \"&r=\" + roomNumber + \"&l=\" + isLockRoom,\r\n        headers: _header,\r\n        // dataType: 'jsonp',\r\n        dataType: 'json',\r\n        processData: false,\r\n        type: 'get',\r\n        success: function (rs) {\r\n          if (rs.code == 200) {\r\n            window.lock = isLockRoom;\r\n            console.info('lock or unlock room by management success, now room lock status : ', isLockRoom);\r\n            $(document).trigger('manis.room.lock.status.change', [isLockRoom]);\r\n          }\r\n        }\r\n      });\r\n    } catch (e) {\r\n      console.error('lock or unlock room by management failed, now room lock status : ', !isLockRoom);\r\n    }\r\n  },\r\n\r\n  // 结束会议\r\n  hangup: function () {\r\n    $(document).trigger('manis.management.kill', [true]);\r\n  },\r\n\r\n  // 开关声音\r\n  managerSetAudioMute: function (mute) {\r\n      // if (window.participants.length < 2) {\r\n      //     console.warn('other participant not join yet');\r\n      //     if(this.audioRetryTimes > 0) {\r\n      //         this.managerSetAudioMuteTry = setTimeout(function () {\r\n      //             clearTimeout(ManisManagement.managerSetAudioMuteTry);\r\n      //             ManisManagement.audioRetryTimes--;\r\n      //             ManisManagement.managerSetAudioMute(mute);\r\n      //         }, 2000);\r\n      //     }\r\n      //     return true;\r\n      // }\r\n      // this.audioRetryTimes = 0;\r\n\r\n      Functions.setAudioMute(mute, function(){\r\n          window.forceMuted = mute;\r\n          $(document).trigger('onmute.audio.muc', [mute]);\r\n          // $(document).trigger('audiomuted.muc', [connection.jid, mute.toString()]);\r\n      }, function (e) {\r\n          console.error('managerSetAudioMute ', e);\r\n      });\r\n    return true;\r\n  },\r\n\r\n  // 开关视频\r\n  managerSetVideoMute: function (mute) {\r\n    // if (window.participants.length < 2) {\r\n    //   console.warn('other participant not join yet');\r\n    //     if(this.videoRetryTimes > 0) {\r\n    //         this.managerSetVideoMuteTry = setTimeout(function () {\r\n    //             clearTimeout(ManisManagement.managerSetVideoMuteTry);\r\n    //             ManisManagement.videoRetryTimes--;\r\n    //             ManisManagement.managerSetVideoMute(mute);\r\n    //         }, 2000);\r\n    //     }\r\n    //   return true;\r\n    // }\r\n    // this.videoRetryTimes = 0;\r\n\r\n    Functions.setVideoMute(mute, function () {\r\n      // $(document).trigger('videomuted.muc', [connection.jid, mute]);\r\n      $(document).trigger('onmute.video.muc', [mute]);\r\n    }, function (error) {\r\n      console.error('manage set video mute switch failed ', error);\r\n    });\r\n\r\n  },\r\n};\r\n\r\nmodule.exports = ManisManagement;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/manis.management.js\n// module id = 5\n// module chunks = 0","/**\r\n * Created by Deng.Qiang on 2016/12/13.\r\n */\r\n\r\nvar ConnectionQuality = require('./libs/connectionquality');\r\nvar StatsCollector = require('./libs/rtp_sts');\r\nvar LocalStatsCollector = require('./libs/local_sts');\r\nvar AudioLevels = require('./libs/audio_levels');\r\nvar ManisStream = require('./manis.stream');\r\nvar ManisResponse = require('../modules/manis.response');\r\nvar ManisFunctions = require('../modules/manis.functions');\r\nvar ErrorCode = require('../modules/errorCode');\r\nvar P2P = require('../modules/manis.p2p');\r\nvar adapter = require('webrtc-adapter');\r\n\r\n/**\r\n * Starts the {@link StatsCollector} if the feature is enabled in config.js.\r\n */\r\nfunction startRtpStatsCollector() {\r\n  stopRTPStatsCollector();\r\n  if (config.enableRtpStats) {\r\n    statsCollector = new StatsCollector(\r\n      getConferenceHandler().peerconnection, 200, audioLevelUpdated, 2000,\r\n        ConnectionQuality.updateLocalStats);\r\n    statsCollector.start();\r\n  }\r\n}\r\n\r\n\r\nfunction stopRTPStatsCollector() {\r\n  if (statsCollector) {\r\n    statsCollector.stop();\r\n    statsCollector = null;\r\n    ConnectionQuality.stopSendingStats();\r\n  }\r\n}\r\n\r\nfunction getConferenceHandler() {\r\n  return activecall;\r\n}\r\n\r\nfunction audioLevelUpdated(jid, audioLevel) {\r\n  var resourceJid;\r\n  if (jid === LocalStatsCollector.LOCAL_JID) {\r\n    resourceJid = AudioLevels.LOCAL_LEVEL;\r\n    if (isAudioMuted()) {\r\n      audioLevel = 0;\r\n    }\r\n  }\r\n  else {\r\n    resourceJid = Strophe.getResourceFromJid(jid);\r\n  }\r\n\r\n  AudioLevels.updateAudioLevel(resourceJid, audioLevel);\r\n}\r\n\r\n/**\r\n * Checks whether the audio is muted or not.\r\n * @returns {boolean} true if audio is muted and false if not.\r\n */\r\n\r\nfunction isAudioMuted() {\r\n  var localAudio = connection.jingle.localAudio;\r\n  for (var idx = 0; idx < localAudio.getAudioTracks().length; idx++) {\r\n    if (localAudio.getAudioTracks()[idx].enabled === true)\r\n      return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n\r\nfunction disposeConference(onUnload) {\r\n  var handler = getConferenceHandler();\r\n  if (handler && handler.peerconnection) {\r\n    // FIXME: probably removing streams is not required and close() should\r\n    // be enough\r\n    if (connection.jingle.localAudio) {\r\n      handler.peerconnection.removeStream(connection.jingle.localAudio, onUnload);\r\n    }\r\n    if (connection.jingle.localVideo) {\r\n      handler.peerconnection.removeStream(connection.jingle.localVideo, onUnload);\r\n    }\r\n    if (connection.jingle.localScreen) {\r\n      handler.peerconnection.removeStream(connection.jingle.localScreen, onUnload);\r\n      connection.jingle.localScreen = null;\r\n      window.localSSRCS = [];\r\n    }\r\n    handler.peerconnection.close();\r\n  }\r\n  stopRTPStatsCollector();\r\n  if (onUnload) {\r\n    stopLocalRtpStatsCollector();\r\n  }\r\n  connection.ofmuc.appDestory();\r\n  connection.ofmuc.appStop();\r\n  activecall = null;\r\n}\r\n\r\n/**\r\n * Stops the {@link LocalStatsCollector}.\r\n */\r\nfunction stopLocalRtpStatsCollector() {\r\n  if (localStatsCollector) {\r\n    localStatsCollector.stop();\r\n    localStatsCollector = null;\r\n  }\r\n}\r\n\r\nfunction modifyScreenStream(stream, successCallback, errorCallback, isRemove) {\r\n  var conferenceHandler = getConferenceHandler();\r\n  if (!conferenceHandler) {\r\n    errorCallback({\r\n      code: ManisResponse.code_404,\r\n      msg: ManisResponse.room_unopend,\r\n    });\r\n    return;\r\n  }\r\n  var oldStream = connection.jingle.localVideo;\r\n  conferenceHandler.switchStreams(stream, oldStream, successCallback);\r\n};\r\n\r\nfunction addScreenSourceToConnection(stream, callback) {\r\n  var conferenceHandler = getConferenceHandler();\r\n  if (!conferenceHandler) {\r\n    callback({\r\n      code: ManisResponse.code_404,\r\n      msg: ManisResponse.room_unopend,\r\n      errorCode: ErrorCode.conference_room_un_open\r\n    });\r\n    return;\r\n  }\r\n  //@TODO add share screen in new functions\r\n  conferenceHandler.sourceOperation(stream, callback, \"add\");\r\n  // conferenceHandler.addScreen(stream, callback);\r\n};\r\n\r\nfunction removeScreenSourceFromConnection(callback) {\r\n  var conferenceHandler = getConferenceHandler();\r\n  if (!conferenceHandler) {\r\n    callback({\r\n      code: ManisResponse.code_404,\r\n      msg: ManisResponse.room_unopend,\r\n      errorCode: ErrorCode.conference_room_un_open\r\n    });\r\n    return;\r\n  }\r\n  var screenStream = connection.jingle.localScreen;\r\n    conferenceHandler.sourceOperation(screenStream, function (res) {\r\n        if (screenStream.getVideoTracks().length) {\r\n            screenStream.getVideoTracks().forEach(function (track) {\r\n                track.stop();\r\n            });\r\n        }\r\n        callback(res)\r\n    }, \"remove\");\r\n  // conferenceHandler.removeScreen(screenStream, callback);\r\n  //   conferenceHandler.sourceOperation(screenStream, callback, \"remove\");\r\n};\r\n\r\n\r\nfunction addLocalStreamToConnection(mediaStream, callback) {\r\n  var conferenceHandler = getConferenceHandler();\r\n  if(mediaStream.getVideoTracks().length){\r\n    connection.emuc.addVideoInfoToPresence(false);\r\n  }\r\n  if(mediaStream.getAudioTracks().length){\r\n    connection.emuc.addAudioInfoToPresence(false);\r\n  }\r\n  if (!conferenceHandler) {\r\n    if (window.webkitMediaStream) {\r\n      var audioStream = new webkitMediaStream();\r\n      var videoStream = new webkitMediaStream();\r\n      var audioTracks = mediaStream.getAudioTracks();\r\n      var videoTracks = mediaStream.getVideoTracks();\r\n      for (var i = 0; i < audioTracks.length; i++) {\r\n        audioStream.addTrack(audioTracks[i]);\r\n      }\r\n      for (i = 0; i < videoTracks.length; i++) {\r\n        videoStream.addTrack(videoTracks[i]);\r\n      }\r\n      connection.jingle.localAudio = audioStream;\r\n      connection.jingle.localVideo = videoStream;\r\n    } else {\r\n      connection.jingle.localAudio = mediaStream;\r\n      connection.jingle.localVideo = mediaStream;\r\n    }\r\n    // 发送IQ消息到xmpp进入会议室.\r\n    // mediaStream.src = URL.createObjectURL(mediaStream);\r\n    mediaStream.ssrc = window.localStreamSSRC;\r\n    callback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.add_local_stream_without_negiration_success,\r\n      errorCode: ErrorCode.no_error,\r\n      response: mediaStream,\r\n    });\r\n    return;\r\n  }\r\n  conferenceHandler.addLocalStream(mediaStream, callback);\r\n};\r\n\r\n\r\n\r\nfunction removeLocalStreamFromConnection(callback) {\r\n  var conferenceHandler = getConferenceHandler();\r\n  if (!conferenceHandler) {\r\n    callback({\r\n      code: ManisResponse.code_404,\r\n      msg: ManisResponse.room_unopend,\r\n      errorCode: ErrorCode.conference_room_un_open\r\n    });\r\n    return;\r\n  }\r\n  var localStreams = [];\r\n  if(connection.jingle.localAudio){\r\n    localStreams.push(connection.jingle.localAudio);\r\n  }\r\n  if(connection.jingle.localVideo){\r\n    localStreams.push(connection.jingle.localVideo);\r\n  }\r\n  conferenceHandler.removeLocalStream(localStreams, callback);\r\n};\r\n\r\n\r\nfunction changeResolutionByApplyConstraints(resolution, videoInput, callback) {\r\n  var _this = this;\r\n  console.log('try to apply resolution: ', resolution, ' current resolution: ', _this.currentTargetResolution, ' current input: ', _this.currentTargetVideoInput);\r\n  var mediaStream = connection.jingle.localVideo;\r\n  if(this.currentTargetResolution == resolution && this.currentTargetVideoInput == videoInput && mediaStream.getVideoTracks().length){\r\n    // not changed, just return;\r\n    if(config.debug == true){\r\n      console.log('resolution and video input device is not changed, maybe video stop, reset again');\r\n    }\r\n    return false;\r\n  }\r\n  var newResolutionConstraints = ManisFunctions.getConstraintsByResolution(false, true, null, videoInput, resolution);\r\n  console.log('new resolution constraints : ', newResolutionConstraints,mediaStream);\r\n  const constraints = {\r\n    width: newResolutionConstraints.video.width,\r\n    height: newResolutionConstraints.video.height,\r\n  };\r\n  if(mediaStream && constraints){\r\n    const track = mediaStream.getVideoTracks()[0];\r\n    if(track.applyConstraints != undefined){\r\n      track.applyConstraints(constraints)\r\n        .then(function (result) {\r\n          var options = {\r\n            videoInput: videoInput,\r\n            resolution: resolution,\r\n            replace: false,\r\n          };\r\n          options.stream = mediaStream;\r\n          config.currentResolution = resolution;\r\n          _this.currentTargetResolution = resolution;\r\n          _this.currentTargetVideoInput = videoInput;\r\n          ManisFunctions.setVideoBandwidth(config.videoBandwidth, function () {\r\n            console.log('Change bandwidth on the fly complete 2');\r\n          });\r\n          callback({\r\n            code: ManisResponse.code_200,\r\n            msg: ManisResponse.change_video_resolution_complete,\r\n            response: options,\r\n            errorCode: ErrorCode.no_error\r\n          });\r\n          // Do something with the track such as using the Image Capture API.\r\n          console.log('mediaStream apply contraints complete', newResolutionConstraints)\r\n        }).catch(function(e){\r\n        // The constraints could not be satisfied by the available devices.\r\n        console.info('mediaStream apply contraints failed : ', e);\r\n        if(e.name.match(/OverconstrainedError/) || e.constructor.name.match(/OverconstrainedError/)){\r\n          // if height > 180 or width > 320 , try get lower resolution; else trow error\r\n          if(parseInt(resolution) > 180){\r\n            if (newResolutionConstraints.video.height.exact == 1080) {\r\n              _this.changeResolutionByApplyConstraints('720',   videoInput, callback);\r\n              return;\r\n            } else if (newResolutionConstraints.video.height.exact == 720) {\r\n              _this.changeResolutionByApplyConstraints('768',  videoInput, callback);\r\n              return;\r\n            }else if (newResolutionConstraints.video.height.exact == 768) {\r\n              _this.changeResolutionByApplyConstraints('540',  videoInput, callback);\r\n              return;\r\n            } else if (newResolutionConstraints.video.height.exact == 540) {\r\n              _this.changeResolutionByApplyConstraints('480',  videoInput, callback);\r\n              return;\r\n            }else if (newResolutionConstraints.video.height.exact == 480) {\r\n              _this.changeResolutionByApplyConstraints('240',  videoInput, callback);\r\n              return;\r\n            }else if (newResolutionConstraints.video.height.exact == 240) {\r\n              _this.changeResolutionByApplyConstraints('180',  videoInput, callback);\r\n              return;\r\n            }\r\n          }else {\r\n            console.error('Over lest constrained error', e);\r\n            throw Error('Over lest constrained error');\r\n          }\r\n        }else {\r\n          console.error('Other error : ', e);\r\n          throw Error('Other error ');\r\n        }\r\n      })\r\n    }else {\r\n      console.error('ApplyConstraints undefined error ');\r\n      throw Error('ApplyConstraints undefined error ');\r\n    }\r\n  }\r\n\r\n}\r\n\r\nfunction modifyLocalVideoStream(resolution, _videoInput, callback, loop) {\r\n\r\n  var oldStream = connection.jingle.localVideo;\r\n\r\n  if(this.currentTargetResolution == resolution && this.currentTargetVideoInput == _videoInput && oldStream.getVideoTracks().length){\r\n    // not changed, just return;\r\n    if(config.debug == true){\r\n      console.log('resolution and video input device is not changed, maybe video stop, reset again');\r\n    }\r\n    return false;\r\n  }\r\n\r\n  if(loop !== true){\r\n    this.currentTargetResolution = resolution;\r\n    this.currentTargetVideoInput = _videoInput;\r\n  }\r\n\r\n  var conferenceHandler = getConferenceHandler();\r\n\r\n  if (oldStream.getVideoTracks().length) {\r\n    oldStream.getVideoTracks().forEach(function (track) {\r\n      if(config.debug == true){\r\n        console.log('remove video track : ', track);\r\n      }\r\n      track.stop();\r\n    });\r\n  }\r\n\r\n  var newResolutionConstraints = ManisFunctions.getConstraintsByResolution(false, true, null, _videoInput, resolution);\r\n  if(config.debug == true){\r\n    console.log('will get new stream by new resolution : ', newResolutionConstraints);\r\n  }\r\n\r\n  ManisStream.getMedia(newResolutionConstraints, function (stream) {\r\n    config.currentResolution = resolution;\r\n    var options = {\r\n      videoInput: _videoInput,\r\n      resolution: resolution,\r\n      replace: true,\r\n    };\r\n    // stream.src = URL.createObjectURL(stream);\r\n    stream.ssrc = window.localStreamSSRC;\r\n    if (window.connectType == 'p2p') {\r\n      P2P.switchStream(oldStream, stream, callback, options);\r\n    } else {\r\n      connection.jingle.localVideo = stream;\r\n      options.resource = Strophe.getResourceFromJid(connection.jid);\r\n      options.stream = stream;\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.change_video_resolution_complete,\r\n        response: options,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n      if(conferenceHandler && conferenceHandler.peerconnection.negotiationInprogress == false){\r\n        conferenceHandler.replaceMediaTrack(stream, oldStream, function () {\r\n          if (options.stream.ssrc != window.localStreamSSRC) {\r\n            options.stream.ssrc = window.localStreamSSRC;\r\n          }\r\n          callback({\r\n            code: ManisResponse.code_200,\r\n            msg: ManisResponse.change_video_resolution_complete,\r\n            response: options,\r\n            errorCode: ErrorCode.no_error\r\n          })\r\n        })\r\n      }else {\r\n        setTimeout(function () {\r\n          modifyLocalVideoStream(resolution, _videoInput, callback);\r\n          return;\r\n        }, 1000);\r\n      }\r\n\r\n    }\r\n\r\n  }, function (error) {\r\n    if (error.name == 'DevicesNotFoundError' || error.constructor.name == 'DevicesNotFoundError'\r\n        ||error.name == 'NotFoundError' || error.constructor.name == 'NotFoundError') {\r\n      callback({\r\n        code: ManisResponse.code_404,\r\n        msg: ManisResponse.without_usefull_video_device,\r\n        errorCode: ErrorCode.media_device_except\r\n      });\r\n      return;\r\n    }\r\n    if (error.name == 'NotReadableError') {\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.get_user_media_failed,\r\n        error: error,\r\n        errorCode: ErrorCode.media_device_get_local_media_failed\r\n      });\r\n      return;\r\n    }\r\n    if (error.name == 'OverconstrainedError' || error.constructor.name == 'OverconstrainedError') {\r\n      if (newResolutionConstraints.video.width.exact > 320 || newResolutionConstraints.video.height.exact > 180) {\r\n        // turn down video constraint\r\n        if (newResolutionConstraints.video.height.exact == 1080) {\r\n          modifyLocalVideoStream('720',   _videoInput, callback);\r\n          return;\r\n        } else if (newResolutionConstraints.video.height.exact == 720) {\r\n          modifyLocalVideoStream('768',  _videoInput, callback);\r\n          return;\r\n        }else if (newResolutionConstraints.video.height.exact == 768) {\r\n          modifyLocalVideoStream('540',  _videoInput, callback);\r\n          return;\r\n        } else if (newResolutionConstraints.video.height.exact == 540) {\r\n          modifyLocalVideoStream('480',  _videoInput, callback);\r\n          return;\r\n        }else if (newResolutionConstraints.video.height.exact == 480) {\r\n          modifyLocalVideoStream('240',  _videoInput, callback);\r\n          return;\r\n        }else if (newResolutionConstraints.video.height.exact == 240) {\r\n          modifyLocalVideoStream('180',  _videoInput, callback);\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    console.warn(error)\r\n    callback({\r\n      code: ManisResponse.code_402,\r\n      msg: ManisResponse.unsupport_resolution,\r\n      errorCode: ErrorCode.media_device_resolution_nonsupport\r\n    });\r\n  })\r\n\r\n};\r\n\r\nfunction modifyLocalAudioStream(_audioInput, callback) {\r\n  var conferenceHandler = getConferenceHandler();\r\n  var oldStream = connection.jingle.localAudio;\r\n  if (oldStream.getAudioTracks().length) {\r\n    oldStream.getAudioTracks().forEach(function (track) {\r\n      if(config.debug == true){\r\n        console.log(' remove audio track : ', track);\r\n      }\r\n      track.stop();\r\n    });\r\n  }\r\n\r\n  var newAudioInConstraints = ManisFunctions.getConstraintsByResolution(true, false, _audioInput, null, null);\r\n  ManisStream.getMedia(newAudioInConstraints, function (stream) {\r\n    // before conference start\r\n    if(!conferenceHandler){\r\n      connection.jingle.localAudio = stream;\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.audio_input_change_completed,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n      return;\r\n    }\r\n    var options = {\r\n      activeAudioInput: _audioInput,\r\n      replace: true,\r\n    };\r\n    options.stream = stream;\r\n    if(conferenceHandler.peerconnection.negotiationInprogress == false) {\r\n      conferenceHandler.replaceMediaTrack(stream, oldStream, function () {\r\n        callback({\r\n          code: ManisResponse.code_200,\r\n          msg: ManisResponse.audio_input_change_completed,\r\n          response: options,\r\n          errorCode: ErrorCode.no_error\r\n        });\r\n      }, 'audio');\r\n    }else {\r\n      setTimeout(function () {\r\n        modifyLocalAudioStream(resolution, _videoInput, callback);\r\n        return;\r\n      }, 1000);\r\n    }\r\n  }, function (error) {\r\n    callback({\r\n      code: ManisResponse.code_400,\r\n      msg: ManisResponse.audio_input_change_failed,\r\n      error: error,\r\n      errorCode: ErrorCode.change_audio_input_device_failed\r\n    });\r\n  })\r\n}\r\n\r\nfunction generateConstraints(withAudio, withVideo, audioInput, videoInput, videoResolution){\r\n  var constraints = {\r\n    audio: withAudio ? {} : false,\r\n    video: withVideo ? {} : false\r\n  };\r\n  if(withAudio === true){\r\n    constraints.audio.deviceId =  audioInput ? {exact:  audioInput} : undefined;\r\n  }\r\n  if(withVideo === true){\r\n    constraints.video.deviceId =  videoInput ? {exact: videoInput} : undefined;\r\n  }\r\n  if(withVideo === true && videoResolution){\r\n    switch (videoResolution.toString()){\r\n      case '1080':\r\n        constraints.video.width = {exact: 1920};\r\n        constraints.video.height = {exact: 1080};\r\n        config.videoBandwidth = (config.videoBandwidth == 1024 * 2 * 2) ? config.videoBandwidth : 1024 * 2;\r\n        break;\r\n      case '720':\r\n        constraints.video.width = {exact: 1280};\r\n        constraints.video.height = {exact: 720};\r\n        config.videoBandwidth = (config.videoBandwidth == 512 * 2 * 2) ? config.videoBandwidth : 512 * 2;\r\n        break;\r\n      case '768':\r\n        constraints.video.width = {exact: 1024};\r\n        constraints.video.height = {exact: 768};\r\n        config.videoBandwidth = (config.videoBandwidth == 512 * 2 * 2) ? config.videoBandwidth : 512 * 2;\r\n        break;\r\n      case '540':\r\n        constraints.video.width = {exact: 960};\r\n        constraints.video.height = {exact: 540};\r\n        config.videoBandwidth = (config.videoBandwidth == 256 * 2 * 2) ? config.videoBandwidth : 256 * 2;\r\n        break;\r\n      case '480':\r\n        constraints.video.width = {exact: 640};\r\n        constraints.video.height = {exact: 480};\r\n        config.videoBandwidth = (config.videoBandwidth == 256 * 2 * 2) ? config.videoBandwidth : 256 * 2;\r\n        break;\r\n      case '240':\r\n        constraints.video.width = {exact: 320};\r\n        constraints.video.height = {exact: 240};\r\n        config.videoBandwidth = (config.videoBandwidth == 128 * 2 * 2) ? config.videoBandwidth : 128 * 2;\r\n        break;\r\n      case '180':\r\n        constraints.video.width = {exact: 320};\r\n        constraints.video.height = {exact: 180};\r\n        config.videoBandwidth = (config.videoBandwidth == 128 * 2 * 2) ? config.videoBandwidth : 128 * 2;\r\n        break;\r\n      default:\r\n        constraints.video.width = {exact: 320};\r\n        constraints.video.height = {exact: 180};\r\n        config.videoBandwidth = (config.videoBandwidth == 128 * 2 * 2) ? config.videoBandwidth : 128 * 2;\r\n        break;\r\n    }\r\n  }\r\n  return constraints;\r\n}\r\n\r\nfunction getDevices(type, callback) {\r\n  var audioInputDevices = [];\r\n  var audioOutputDevices = [];\r\n  var videoInputDevices = [];\r\n  var otherDevices = [];\r\n  var allDevices = [];\r\n\r\n  navigator.mediaDevices.enumerateDevices().then(function (deviceInfos) {\r\n    for (var i = 0; i !== deviceInfos.length; ++i) {\r\n      var deviceInfo = deviceInfos[i];\r\n      //console.log(\"-----deviceInfo--------\", deviceInfo);\r\n      var device = {value:deviceInfo.deviceId};\r\n      if (deviceInfo.kind === 'audioinput') {\r\n          //由于safari  deviceInfo 无法获取output 这里做一下处理\r\n          if(RTC.isSafari() || RTC.isFirefox()) {\r\n              device.label = deviceInfo.label || 'speaker ' + (audioOutputDevices.length + 1);\r\n              audioOutputDevices.push(device);\r\n          }\r\n          device.label = deviceInfo.label || 'microphone ' + (audioInputDevices.length + 1);\r\n         audioInputDevices.push(device);\r\n      } else if (deviceInfo.kind === 'audiooutput') {\r\n        device.label = deviceInfo.label || 'speaker ' + (audioOutputDevices.length + 1);\r\n        audioOutputDevices.push(device);\r\n      } else if (deviceInfo.kind === 'videoinput') {\r\n        device.label = deviceInfo.label || 'camera ' + (videoInputDevices.length + 1);\r\n        videoInputDevices.push(device);\r\n      } else {\r\n        device.label = deviceInfo.label || 'Some other kind of source/device: ';\r\n        otherDevices.push(device);\r\n      }\r\n    }\r\n    allDevices = {\r\n      audioInputDevices: audioOutputDevices,\r\n      audioOutputDevices: audioOutputDevices,\r\n      videoInputDevices: videoInputDevices,\r\n      otherDevices: otherDevices\r\n    };\r\n    if (type == 'audioinput') {\r\n      var returnData = audioInputDevices;\r\n    } else if (type == 'audiooutput') {\r\n      var returnData = audioOutputDevices;\r\n    } else if (type == 'videoinput') {\r\n      var returnData = videoInputDevices;\r\n    } else {\r\n      var returnData = allDevices;\r\n    }\r\n    callback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.find_devices,\r\n      response: returnData,\r\n      errorCode: ErrorCode.no_error\r\n    })\r\n  }).catch(\r\n    function () {\r\n      callback({\r\n        code: ManisResponse.code_404,\r\n        msg: ManisResponse.unfind_devices,\r\n        errorCode: ErrorCode.media_device_except\r\n      })\r\n    });\r\n};\r\n\r\n\r\nfunction sendOnlyChannelMsg(callback) {\r\n  if(activecall && activecall.peerconnection){\r\n    var channel = activecall.peerconnection.channel;\r\n    if(channel){\r\n      var videoSendOnly = {colibriClass: \"AttendMessageEvent\",type: \"sendonly\"};\r\n      var msg = JSON.stringify(videoSendOnly);\r\n      try{\r\n        console.log('will send sendonly channel msg: ', msg);\r\n        channel.send(msg);\r\n        callback({\r\n          code: ManisResponse.code_200,\r\n          msg: ManisResponse.message_send_complete\r\n        })\r\n      }catch (e){\r\n        console.error('send channel msg failed: ', e);\r\n        callback({\r\n          code: ManisResponse.code_400,\r\n          msg: ManisResponse.send_inviste_failed\r\n        })\r\n      }\r\n    }else {\r\n      callback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.send_inviste_failed\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n\r\nmodule.exports = {\r\n  currentTargetResolution: null,\r\n  currentTargetVideoInput: null,\r\n  getDevices: getDevices,\r\n  modifyLocalVideoStream: modifyLocalVideoStream,\r\n  modifyLocalAudioStream: modifyLocalAudioStream,\r\n  removeScreenSourceFromConnection: removeScreenSourceFromConnection,\r\n  addScreenSourceToConnection: addScreenSourceToConnection,\r\n  addLocalStreamToConnection: addLocalStreamToConnection,\r\n  removeLocalStreamFromConnection: removeLocalStreamFromConnection,\r\n  modifyScreenStream: modifyScreenStream,\r\n  disposeConference: disposeConference,\r\n  isAudioMuted: isAudioMuted,\r\n  startRtpStatsCollector: startRtpStatsCollector,\r\n  stopRTPStatsCollector: stopRTPStatsCollector,\r\n  changeResolutionByApplyConstraints: changeResolutionByApplyConstraints,\r\n  sendOnlyChannelMsg: sendOnlyChannelMsg,\r\n  getConferenceHandler: getConferenceHandler,\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/manis.status.js\n// module id = 6\n// module chunks = 0","var ConnectionQuality = (function () {\r\n\r\n  /**\r\n   * Constructs new ConnectionQuality object\r\n   * @constructor\r\n   */\r\n  function ConnectionQuality() {\r\n\r\n  }\r\n\r\n  /**\r\n   * local stats\r\n   * @type {{}}\r\n   */\r\n  var stats = {};\r\n\r\n  /**\r\n   * remote stats\r\n   * @type {{}}\r\n   */\r\n  var remoteStats = {};\r\n\r\n  /**\r\n   * Interval for sending statistics to other participants\r\n   * @type {null}\r\n   */\r\n  var sendIntervalId = null;\r\n\r\n  /**\r\n   * Updates the local statistics\r\n   * @param data new statistics\r\n   */\r\n  ConnectionQuality.updateLocalStats = function (data) {\r\n    stats = data;\r\n    //* VideoLayout.updateLocalConnectionStats(100 - stats.packetLoss.total,stats);\r\n    if (sendIntervalId == null) {\r\n      startSendingStats();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Start statistics sending.\r\n   */\r\n  // ConnectionQuality.startSendingStats = function() {\r\n  function startSendingStats()  {\r\n    sendStats();\r\n    sendIntervalId = setInterval(sendStats, 10000);\r\n  }\r\n\r\n  /**\r\n   * Sends statistics to other participants\r\n   */\r\n  function sendStats() {\r\n    connection.emuc.addConnectionInfoToPresence(convertToMUCStats(stats));\r\n    connection.emuc.sendPresence();\r\n  }\r\n\r\n    function get_object_first_attribute(data){\r\n        for (var key in data)\r\n            return data[key];\r\n    }\r\n\r\n  /**\r\n   * Converts statistics to format for sending through XMPP\r\n   * @param stats the statistics\r\n   * @returns {{bitrate_donwload: *, bitrate_uplpoad: *, packetLoss_total: *, packetLoss_download: *, packetLoss_upload: *}}\r\n   */\r\n  function convertToMUCStats(stats) {\r\n    var resolution = stats.resolution && stats.resolution[connection.jid] ? get_object_first_attribute(stats.resolution[connection.jid]) : '';\r\n    var mucStatus =  {\r\n    \"bitrate_download\": stats.bitrate&&stats.bitrate.download?stats.bitrate.download:0,\r\n    \"bitrate_upload\": stats.bitrate&&stats.bitrate.upload?stats.bitrate.upload:0,\r\n    \"packetLoss_total\": stats.packetLoss&&stats.packetLoss.total?stats.packetLoss.total:0,\r\n    \"packetLoss_download\": stats.packetLoss&&stats.packetLoss.download?stats.packetLoss.download:0,\r\n    \"packetLoss_upload\": stats.packetLoss&&stats.packetLoss.upload?stats.packetLoss.upload:0,\r\n    \"frameHeight\": resolution ? resolution.height : '',\r\n    \"frameWidth\": resolution ? resolution.width : '',\r\n    \"frameRate\": stats.frameRate ? get_object_first_attribute(stats.frameRate) : '',\r\n    \"rtt\": stats.rtt ? get_object_first_attribute(stats.rtt) : '',\r\n    };\r\n      // console.log('SSSSSSSSSSSSSSSSSSSS', stats, connection.jid, 'BBBBBBBBBBBBBBBB', mucStatus);\r\n      return mucStatus\r\n  }\r\n\r\n  /**\r\n   * Converts statitistics to format used by VideoLayout\r\n   * @param stats\r\n   * @returns {{bitrate: {download: *, upload: *}, packetLoss: {total: *, download: *, upload: *}}}\r\n   */\r\n  function parseMUCStats(stats) {\r\n    return {\r\n      bitrate: {\r\n        download: stats.bitrate_download,\r\n        upload: stats.bitrate_upload\r\n      },\r\n      packetLoss: {\r\n        total: stats.packetLoss_total,\r\n        download: stats.packetLoss_download,\r\n        upload: stats.packetLoss_upload\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Updates remote statistics\r\n   * @param jid the jid associated with the statistics\r\n   * @param data the statistics\r\n   * @param videoSSRC\r\n   */\r\n  ConnectionQuality.updateRemoteStats = function (jid, data, videoSSRC) {\r\n    if (data == null || data.packetLoss_total == null) {\r\n      return;\r\n    }\r\n    remoteStats[jid] = parseMUCStats(data);\r\n    var resource = Strophe.getResourceFromJid(jid);\r\n    // update status\r\n    var resolution = 'NaN';\r\n    // if (document.querySelector('#upload_package_lost_' + resource) != null) {\r\n    //   document.querySelector('#upload_package_lost_' + resource).innerHTML = data.packetLoss_upload + '%';\r\n    //   document.querySelector('#download_package_lost_' + resource).innerHTML = data.packetLoss_download + '%';\r\n    //   document.querySelector('#upload_bitrate_' + resource).innerHTML = data.bitrate_upload + ' Kbps';\r\n    //   document.querySelector('#download_bitrate_' + resource).innerHTML = data.bitrate_download + ' Kbps';\r\n    // }\r\n    // if (document.querySelectorAll('.upload_package_lost_' + resource).length) {\r\n    //   var elements = document.querySelectorAll('.upload_package_lost_' + resource);\r\n    //   for (var i = 0; i < elements.length; i++) {\r\n    //     elements[i].innerHTML = data.packetLoss_upload + '%';\r\n    //   }\r\n    // }\r\n    // if (document.querySelectorAll('.download_package_lost_' + resource).length) {\r\n    //   var elements = document.querySelectorAll('.download_package_lost_' + resource);\r\n    //   for (var i = 0; i < elements.length; i++) {\r\n    //     elements[i].innerHTML = data.packetLoss_download + '%';\r\n    //   }\r\n    // }\r\n    // if (document.querySelectorAll('.upload_bitrate_' + resource).length) {\r\n    //   var elements = document.querySelectorAll('.upload_bitrate_' + resource);\r\n    //   for (var i = 0; i < elements.length; i++) {\r\n    //     elements[i].innerHTML = data.bitrate_upload + ' Kbps';\r\n    //   }\r\n    // }\r\n    // if (document.querySelectorAll('.download_bitrate_' + resource).length) {\r\n    //   var elements = document.querySelectorAll('.download_bitrate_' + resource);\r\n    //   for (var i = 0; i < elements.length; i++) {\r\n    //     elements[i].innerHTML = data.bitrate_download + ' Kbps';\r\n    //   }\r\n    // }\r\n    if (videoSSRC != null) {\r\n      var resolutionObj = ssrc2resolution[videoSSRC];\r\n      if (resolutionObj != undefined) {\r\n        resolution = resolutionObj.width + ' X ' + resolutionObj.height;\r\n        // if (document.querySelector('#resolution_' + resource) != null) {\r\n        //   document.querySelector('#resolution_' + resource).innerHTML = resolution;\r\n        // }\r\n        // if (document.querySelectorAll('.resolution_' + resource).length) {\r\n        //   var elements = document.querySelectorAll('.resolution_' + resource);\r\n        //   for (var i = 0; i < elements.length; i++) {\r\n        //     elements[i].innerHTML = resolution;\r\n        //   }\r\n        // }\r\n      }\r\n    }\r\n    // for (var i = 0; i < window.participants.length; i++) {\r\n    //   var participant = window.participants[i];\r\n    //   if (participant.resource == resource) {\r\n    //     participant.resolution = resolution;\r\n    //     participant.parket_loss_upload = data.packetLoss_upload + '%';\r\n    //     participant.packet_loss_download = data.packetLoss_download + '%';\r\n    //     participant.bitrate_upload = data.bitrate_upload + ' Kbps';\r\n    //     participant.bitrate_download = data.bitrate_download + ' Kbps';\r\n    //   }\r\n    // }\r\n\r\n\r\n  };\r\n\r\n  /**\r\n   * Stops statistics sending.\r\n   */\r\n  ConnectionQuality.stopSendingStats = function () {\r\n    clearInterval(sendIntervalId);\r\n    sendIntervalId = null;\r\n    //notify UI about stopping statistics gathering\r\n    //* VideoLayout.onStatsStop();\r\n  };\r\n\r\n  /**\r\n   * Returns the local statistics.\r\n   */\r\n  ConnectionQuality.getStats = function () {\r\n    return stats;\r\n  }\r\n\r\n  return ConnectionQuality;\r\n})();\r\n\r\nexports = module.exports = ConnectionQuality;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/libs/connectionquality.js\n// module id = 7\n// module chunks = 0","/* global ssrc2jid */\r\n/* jshint -W117 */\r\n/**\r\n * Calculates packet lost percent using the number of lost packets and the\r\n * number of all packet.\r\n * @param lostPackets the number of lost packets\r\n * @param totalPackets the number of all packets.\r\n * @returns {number} packet loss percent\r\n */\r\nfunction calculatePacketLoss(lostPackets, totalPackets) {\r\n  if (!totalPackets || totalPackets <= 0 || !lostPackets || lostPackets <= 0)\r\n    return 0;\r\n  return Math.round((lostPackets / totalPackets) * 100);\r\n}\r\n\r\n/**\r\n * Peer statistics data holder.\r\n * @constructor\r\n */\r\nfunction PeerStats() {\r\n  this.ssrc2Loss = {};\r\n  this.ssrc2AudioLevel = {};\r\n  this.ssrc2bitrate = {};\r\n  this.ssrc2resolution = {};\r\n  this.ssrc2frameRate = {};\r\n  this.ssrc2rtt = {};\r\n}\r\n\r\n/**\r\n * The bandwidth\r\n * @type {{}}\r\n */\r\nPeerStats.bandwidth = {};\r\n\r\n/**\r\n * The bit rate\r\n * @type {{}}\r\n */\r\nPeerStats.bitrate = {};\r\n\r\n\r\n/**\r\n * The packet loss rate\r\n * @type {{}}\r\n */\r\nPeerStats.packetLoss = null;\r\n\r\n/**\r\n * Sets packets loss rate for given <tt>ssrc</tt> that blong to the peer\r\n * represented by this instance.\r\n * @param ssrc audio or video RTP stream SSRC.\r\n * @param lossRate new packet loss rate value to be set.\r\n */\r\nPeerStats.prototype.setSsrcLoss = function (ssrc, lossRate) {\r\n  this.ssrc2Loss[ssrc] = lossRate;\r\n};\r\n\r\n/**\r\n * Sets resolution for given <tt>ssrc</tt> that belong to the peer\r\n * represented by this instance.\r\n * @param ssrc audio or video RTP stream SSRC.\r\n * @param resolution new resolution value to be set.\r\n */\r\nPeerStats.prototype.setSsrcResolution = function (ssrc, resolution) {\r\n  if (resolution === null && this.ssrc2resolution[ssrc]) {\r\n    delete this.ssrc2resolution[ssrc];\r\n  }\r\n  else if (resolution !== null)\r\n    window.ssrc2resolution[ssrc] = this.ssrc2resolution[ssrc] = resolution;\r\n};\r\n\r\n/**\r\n *\r\n * @param ssrc\r\n * @param frameRate\r\n */\r\nPeerStats.prototype.setFrameRate = function (ssrc, frameRate) {\r\n  this.ssrc2frameRate[ssrc] = frameRate\r\n};\r\n\r\n/**\r\n *\r\n * @param ssrc\r\n * @param rtt\r\n */\r\nPeerStats.prototype.setRtt = function (ssrc, rtt) {\r\n    this.ssrc2rtt[ssrc] = rtt\r\n};\r\n\r\n/**\r\n * Sets the bit rate for given <tt>ssrc</tt> that blong to the peer\r\n * represented by this instance.\r\n * @param ssrc audio or video RTP stream SSRC.\r\n * @param bitrate new bitrate value to be set.\r\n */\r\nPeerStats.prototype.setSsrcBitrate = function (ssrc, bitrate) {\r\n  if (this.ssrc2bitrate[ssrc]) {\r\n    this.ssrc2bitrate[ssrc].download += bitrate.download;\r\n    this.ssrc2bitrate[ssrc].upload += bitrate.upload;\r\n  }\r\n  else {\r\n    this.ssrc2bitrate[ssrc] = bitrate;\r\n  }\r\n};\r\n\r\n/**\r\n * Sets new audio level(input or output) for given <tt>ssrc</tt> that identifies\r\n * the stream which belongs to the peer represented by this instance.\r\n * @param ssrc RTP stream SSRC for which current audio level value will be\r\n *        updated.\r\n * @param audioLevel the new audio level value to be set. Value is truncated to\r\n *        fit the range from 0 to 1.\r\n */\r\nPeerStats.prototype.setSsrcAudioLevel = function (ssrc, audioLevel) {\r\n  // Range limit 0 - 1\r\n  this.ssrc2AudioLevel[ssrc] = Math.min(Math.max(audioLevel, 0), 1);\r\n};\r\n\r\n/**\r\n * Array with the transport information.\r\n * @type {Array}\r\n */\r\nPeerStats.transport = [];\r\n\r\n\r\n/**\r\n * <tt>StatsCollector</tt> registers for stats updates of given\r\n * <tt>peerconnection</tt> in given <tt>interval</tt>. On each update particular\r\n * stats are extracted and put in {@link PeerStats} objects. Once the processing\r\n * is done <tt>audioLevelsUpdateCallback</tt> is called with <tt>this</tt>\r\n * instance as an event source.\r\n *\r\n * @param peerconnection webRTC peer connection object.\r\n * @param interval stats refresh interval given in ms.\r\n * @param {function(StatsCollector)} audioLevelsUpdateCallback the callback\r\n * called on stats update.\r\n * @constructor\r\n */\r\nfunction StatsCollector(peerconnection, audioLevelsInterval,\r\n                        audioLevelsUpdateCallback, statsInterval,\r\n                        statsUpdateCallback) {\r\n  this.peerconnection = peerconnection;\r\n  this.baselineAudioLevelsReport = null;\r\n  this.currentAudioLevelsReport = null;\r\n  this.currentStatsReport = null;\r\n  this.baselineStatsReport = null;\r\n  this.audioLevelsIntervalId = null;\r\n\r\n  /**\r\n   * Gather PeerConnection stats once every this many milliseconds.\r\n   */\r\n  this.GATHER_INTERVAL = 10000;\r\n\r\n  /**\r\n   * Log stats via the focus once every this many milliseconds.\r\n   */\r\n  this.LOG_INTERVAL = 60000;\r\n\r\n  /**\r\n   * Gather stats and store them in this.statsToBeLogged.\r\n   */\r\n  this.gatherStatsIntervalId = null;\r\n\r\n  /**\r\n   * Send the stats already saved in this.statsToBeLogged to be logged via\r\n   * the focus.\r\n   */\r\n  this.logStatsIntervalId = null;\r\n\r\n  /**\r\n   * Stores the statistics which will be send to the focus to be logged.\r\n   */\r\n  this.statsToBeLogged =\r\n  {\r\n    timestamps: [],\r\n    stats: {}\r\n  };\r\n\r\n  // Updates stats interval\r\n  this.audioLevelsIntervalMilis = audioLevelsInterval;\r\n\r\n  this.statsIntervalId = null;\r\n  this.statsIntervalMilis = statsInterval;\r\n  // Map of jids to PeerStats\r\n  this.jid2stats = {};\r\n\r\n  this.audioLevelsUpdateCallback = audioLevelsUpdateCallback;\r\n  this.statsUpdateCallback = statsUpdateCallback;\r\n}\r\n\r\n/**\r\n * Stops stats updates.\r\n */\r\nStatsCollector.prototype.stop = function () {\r\n  if (this.audioLevelsIntervalId) {\r\n    clearInterval(this.audioLevelsIntervalId);\r\n    this.audioLevelsIntervalId = null;\r\n    clearInterval(this.statsIntervalId);\r\n    this.statsIntervalId = null;\r\n    clearInterval(this.logStatsIntervalId);\r\n    this.logStatsIntervalId = null;\r\n    clearInterval(this.gatherStatsIntervalId);\r\n    this.gatherStatsIntervalId = null;\r\n  }\r\n};\r\n\r\n/**\r\n * Callback passed to <tt>getStats</tt> method.\r\n * @param error an error that occurred on <tt>getStats</tt> call.\r\n */\r\nStatsCollector.prototype.errorCallback = function (error) {\r\n  console.error(\"Get stats error\", error);\r\n  this.stop();\r\n};\r\n\r\n/**\r\n * Starts stats updates.\r\n */\r\nStatsCollector.prototype.start = function () {\r\n  var self = this;\r\n  this.audioLevelsIntervalId = setInterval(\r\n    function () {\r\n      // Interval updates\r\n      self.peerconnection.getStats(\r\n        function (report) {\r\n          var results = null;\r\n          if (!report || !report.result || typeof report.result != 'function') {\r\n            results = report;\r\n          }\r\n          else {\r\n            results = report.result();\r\n          }\r\n          //console.error(\"Got interval report\", results);\r\n          //console.log(\"-----audioLevelsIntervalId-------\", results);\r\n          if(RTC.isSafari() || RTC.isFirefox()) {\r\n              self.currentAudioLevelsReport = [];\r\n              results.forEach(function (value) {\r\n                  // console.log(\"-----audioLevelsIntervalId-------\", value);\r\n                  self.currentAudioLevelsReport.push(value);\r\n              });\r\n          } else {\r\n              self.currentAudioLevelsReport = results;\r\n          }\r\n          self.processAudioLevelReport();\r\n          self.baselineAudioLevelsReport = self.currentAudioLevelsReport;\r\n        },\r\n          self.errorCallback\r\n      );\r\n    },\r\n    self.audioLevelsIntervalMilis\r\n  );\r\n\r\n  this.statsIntervalId = setInterval(\r\n    function () {\r\n      // Interval updates\r\n      self.peerconnection.getStats(\r\n        function (report) {\r\n          var results = null;\r\n          if (!report || !report.result || typeof report.result != 'function') {\r\n            //firefox\r\n            results = report;\r\n          }\r\n          else {\r\n            //chrome\r\n            results = report.result();\r\n          }\r\n          //console.error(\"Got interval report\", results);\r\n          //   console.log(\"-----statsIntervalId-------\", results);\r\n          if(RTC.isSafari() || RTC.isFirefox()) {\r\n              self.currentStatsReport = [];\r\n              results.forEach(function (value) {\r\n                  // console.log(\"-----statsIntervalId-------\", value);\r\n                  self.currentStatsReport.push(value);\r\n              });\r\n          } else {\r\n              self.currentStatsReport = results;\r\n          }\r\n          try {\r\n            self.processStatsReport();\r\n          }\r\n          catch (e) {\r\n            console.error(\"Unsupported key:\" + e);\r\n          }\r\n\r\n          self.baselineStatsReport = self.currentStatsReport;\r\n        },\r\n        self.errorCallback\r\n      );\r\n    },\r\n    self.statsIntervalMilis\r\n  );\r\n\r\n  if (config.logStats) {\r\n    this.gatherStatsIntervalId = setInterval(\r\n      function () {\r\n        self.peerconnection.getStats(\r\n          function (report) {\r\n            self.addStatsToBeLogged(report.result());\r\n          },\r\n          function () {\r\n          }\r\n        );\r\n      },\r\n      this.GATHER_INTERVAL\r\n    );\r\n\r\n    this.logStatsIntervalId = setInterval(\r\n      function () {\r\n        self.logStats();\r\n      },\r\n      this.LOG_INTERVAL);\r\n  }\r\n};\r\n\r\n/**\r\n * Converts the stats to the format used for logging, and saves the data in\r\n * this.statsToBeLogged.\r\n * @param reports Reports as given by webkitRTCPerConnection.getStats.\r\n */\r\nStatsCollector.prototype.addStatsToBeLogged = function (reports) {\r\n  var self = this;\r\n  var num_records = this.statsToBeLogged.timestamps.length;\r\n  this.statsToBeLogged.timestamps.push(new Date().getTime());\r\n  reports.map(function (report) {\r\n    var stat = self.statsToBeLogged.stats[report.id];\r\n    if (!stat) {\r\n      stat = self.statsToBeLogged.stats[report.id] = {};\r\n    }\r\n    stat.type = report.type;\r\n    report.names().map(function (name) {\r\n      var values = stat[name];\r\n      if (!values) {\r\n        values = stat[name] = [];\r\n      }\r\n      while (values.length < num_records) {\r\n        values.push(null);\r\n      }\r\n      values.push(report.stat(name));\r\n    });\r\n  });\r\n};\r\n\r\nStatsCollector.prototype.logStats = function () {\r\n  if (!window.focusJid) {\r\n    return;\r\n  }\r\n\r\n  var deflate = true;\r\n\r\n  var content = JSON.stringify(this.statsToBeLogged);\r\n  if (deflate) {\r\n    content = String.fromCharCode.apply(null, Pako.deflateRaw(content));\r\n  }\r\n  content = Base64.encode(content);\r\n\r\n  // XEP-0337-ish\r\n  var message = $msg({to: window.focusJid, type: 'normal'});\r\n  message.c('log', {\r\n    xmlns: 'urn:xmpp:eventlog',\r\n    id: 'PeerConnectionStats'\r\n  });\r\n  message.c('message').t(content).up();\r\n  if (deflate) {\r\n    message.c('tag', {name: \"deflated\", value: \"true\"}).up();\r\n  }\r\n  message.up();\r\n\r\n  connection.send(message);\r\n\r\n  // Reset the stats\r\n  this.statsToBeLogged.stats = {};\r\n  this.statsToBeLogged.timestamps = [];\r\n};\r\nvar keyMap = {\r\n  \"firefox\": {\r\n    \"ssrc\": \"ssrc\",\r\n    \"packetsReceived\": \"packetsReceived\",\r\n    \"packetsLost\": \"packetsLost\",\r\n    \"packetsSent\": \"packetsSent\",\r\n    \"bytesReceived\": \"bytesReceived\",\r\n    \"bytesSent\": \"bytesSent\"\r\n  },\r\n  \"safari\": {\r\n    /*\"receiveBandwidth\": \"googAvailableReceiveBandwidth\",\r\n    \"sendBandwidth\": \"googAvailableSendBandwidth\",\r\n    \"remoteAddress\": \"googRemoteAddress\",\r\n    \"transportType\": \"googTransportType\",\r\n    \"localAddress\": \"googLocalAddress\",\r\n    \"activeConnection\": \"googActiveConnection\",*/\r\n    \"ssrc\": \"ssrc\",\r\n    \"packetsReceived\": \"packetsReceived\",\r\n    \"packetsSent\": \"packetsSent\",\r\n    \"packetsLost\": \"packetsLost\",\r\n    \"bytesReceived\": \"bytesReceived\",\r\n    \"bytesSent\": \"bytesSent\",\r\n    \"frameHeight\": \"frameHeight\",\r\n    \"frameWidth\": \"frameWidth\"/*,\r\n    \"googFrameHeightSent\": \"googFrameHeightSent\",\r\n    \"googFrameWidthSent\": \"googFrameWidthSent\",\r\n    \"audioInputLevel\": \"audioInputLevel\",\r\n    \"audioOutputLevel\": \"audioOutputLevel\"*/\r\n  },\r\n  \"chrome\": {\r\n    \"receiveBandwidth\": \"googAvailableReceiveBandwidth\",\r\n    \"sendBandwidth\": \"googAvailableSendBandwidth\",\r\n    \"remoteAddress\": \"googRemoteAddress\",\r\n    \"transportType\": \"googTransportType\",\r\n    \"localAddress\": \"googLocalAddress\",\r\n    \"activeConnection\": \"googActiveConnection\",\r\n    \"ssrc\": \"ssrc\",\r\n    \"frameRateSent\": \"googFrameRateSent\",\r\n    \"rtt\": \"googRtt\",\r\n    \"packetsReceived\": \"packetsReceived\",\r\n    \"packetsSent\": \"packetsSent\",\r\n    \"packetsLost\": \"packetsLost\",\r\n    \"bytesReceived\": \"bytesReceived\",\r\n    \"bytesSent\": \"bytesSent\",\r\n    \"googFrameHeightReceived\": \"googFrameHeightReceived\",\r\n    \"googFrameWidthReceived\": \"googFrameWidthReceived\",\r\n    \"googFrameHeightSent\": \"googFrameHeightSent\",\r\n    \"googFrameWidthSent\": \"googFrameWidthSent\",\r\n    \"audioInputLevel\": \"audioInputLevel\",\r\n    \"audioOutputLevel\": \"audioOutputLevel\"\r\n  },\r\n  \"opera\": {\r\n    \"receiveBandwidth\": \"googAvailableReceiveBandwidth\",\r\n    \"sendBandwidth\": \"googAvailableSendBandwidth\",\r\n    \"remoteAddress\": \"googRemoteAddress\",\r\n    \"transportType\": \"googTransportType\",\r\n    \"localAddress\": \"googLocalAddress\",\r\n    \"activeConnection\": \"googActiveConnection\",\r\n    \"ssrc\": \"ssrc\",\r\n    \"frameRateSent\": \"googFrameRateSent\",\r\n    \"rtt\": \"googRtt\",\r\n    \"packetsReceived\": \"packetsReceived\",\r\n    \"packetsSent\": \"packetsSent\",\r\n    \"packetsLost\": \"packetsLost\",\r\n    \"bytesReceived\": \"bytesReceived\",\r\n    \"bytesSent\": \"bytesSent\",\r\n    \"googFrameHeightReceived\": \"googFrameHeightReceived\",\r\n    \"googFrameWidthReceived\": \"googFrameWidthReceived\",\r\n    \"googFrameHeightSent\": \"googFrameHeightSent\",\r\n    \"googFrameWidthSent\": \"googFrameWidthSent\",\r\n    \"audioInputLevel\": \"audioInputLevel\",\r\n    \"audioOutputLevel\": \"audioOutputLevel\"\r\n  }\r\n};\r\n\r\n/**\r\n * Stats processing logic.\r\n */\r\nStatsCollector.prototype.processStatsReport = function () {\r\n    try {\r\n  if (!this.baselineStatsReport) {\r\n    return;\r\n  }\r\n  //if(config.debug)\r\n  //   console.log(\"------this.currentStatsReport-------\", this.currentStatsReport);\r\n  for (var idx in this.currentStatsReport) {\r\n    var now = this.currentStatsReport[idx];\r\n        try {\r\n            if (getStatValue(now, 'receiveBandwidth') ||\r\n                getStatValue(now, 'sendBandwidth')) {\r\n                PeerStats.bandwidth = {\r\n          \"download\": Math.round(\r\n            (getStatValue(now, 'receiveBandwidth')) / 1000),\r\n          \"upload\": Math.round(\r\n            (getStatValue(now, 'sendBandwidth')) / 1000)\r\n                };\r\n            }\r\n        }\r\n        catch (e) {/*not supported*/\r\n        }\r\n\r\n        if (now.type == 'googCandidatePair') {\r\n            var ip, type, localIP, active;\r\n            try {\r\n                ip = getStatValue(now, 'remoteAddress');\r\n                type = getStatValue(now, \"transportType\");\r\n                localIP = getStatValue(now, \"localAddress\");\r\n                active = getStatValue(now, \"activeConnection\");\r\n            }\r\n            catch (e) {/*not supported*/\r\n            }\r\n            if (!ip || !type || !localIP || active != \"true\")\r\n                continue;\r\n            var addressSaved = false;\r\n            for (var i = 0; i < PeerStats.transport.length; i++) {\r\n                if (PeerStats.transport[i].ip == ip &&\r\n                    PeerStats.transport[i].type == type &&\r\n                    PeerStats.transport[i].localip == localIP) {\r\n                    addressSaved = true;\r\n                }\r\n            }\r\n            if (addressSaved)\r\n                continue;\r\n            PeerStats.transport.push({localip: localIP, ip: ip, type: type});\r\n            continue;\r\n        }\r\n        //FIXME: the stats don't find the ip info. [safari]\r\n        if ((RTC.isSafari() || RTC.isFirefox()) && now.type == \"candidate-pair\") {\r\n            if (now.state == \"succeeded\")\r\n                continue;\r\n            var local = this.currentStatsReport[now.localCandidateId];\r\n            var remote = this.currentStatsReport[now.remoteCandidateId];\r\n            //if(config.debug)\r\n            //console.log(\"-----------candidate-pair-----------\", this.currentStatsReport, local, remote);\r\n            /*PeerStats.transport.push({\r\n                localip: local.ipAddress + \":\" + local.portNumber,\r\n                ip: remote.ipAddress + \":\" + remote.portNumber, type: local.transport\r\n            });*/\r\n        }\r\n\r\n        if (now.type == \"candidatepair\") {\r\n            if (now.state == \"succeeded\")\r\n                continue;\r\n\r\n            var local = this.currentStatsReport[now.localCandidateId];\r\n            var remote = this.currentStatsReport[now.remoteCandidateId];\r\n            PeerStats.transport.push({\r\n                localip: local.ipAddress + \":\" + local.portNumber,\r\n                ip: remote.ipAddress + \":\" + remote.portNumber, type: local.transport\r\n            });\r\n\r\n        }\r\n\r\n    //[safari]  now.type ==== \"track\" \"outbound-rtp\" \"inbound-rtp\"\r\n    if (now.type != 'ssrc' && now.type != \"outboundrtp\" && now.type != \"inboundrtp\"\r\n        && now.type != \"track\" && now.type != \"outbound-rtp\" && now.type != \"inbound-rtp\") {\r\n        continue;\r\n    }\r\n    //此处做一下处理获取到真正的ssrc\r\n    if((RTC.isSafari() || RTC.isFirefox()) && (now.type == \"inbound-rtp\" || now.type == \"track\")) {\r\n        // var ids = now.id.split(\"_\");\r\n        // now.ssrc = ids[ids.length - 1];\r\n        now.ssrc = now.id.match(/_([\\d.]+)$/)[1];\r\n    }\r\n\r\n\r\n    var before = this.baselineStatsReport[idx];\r\n    if (!before) {\r\n      console.warn(getStatValue(now, 'ssrc') + ' not enough data');\r\n      continue;\r\n    }\r\n\r\n    var ssrc = getStatValue(now, 'ssrc');\r\n    if (!ssrc)\r\n      continue;\r\n    var jid = ssrc2jid[ssrc];\r\n    if (!jid) {\r\n      //console.warn(\"No jid for ssrc: \" + ssrc);\r\n      continue;\r\n    }\r\n\r\n    var jidStats = this.jid2stats[jid];\r\n    if (!jidStats) {\r\n      jidStats = new PeerStats();\r\n      this.jid2stats[jid] = jidStats;\r\n    }\r\n\r\n\r\n        var isDownloadStream = true;\r\n        var key = 'packetsReceived';\r\n        if((RTC.isSafari() || RTC.isFirefox()) && now.type == \"track\") {\r\n            //safari track only get audiolevel and resolution, don't get packets info\r\n        } else {\r\n            if (!getStatValue(now, key)) {\r\n                isDownloadStream = false;\r\n                key = 'packetsSent';\r\n                if (!getStatValue(now, key)) {\r\n                    console.warn(\"No packetsReceived nor packetSent stat found\");\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n\r\n        var packetsNow = getStatValue(now, key);\r\n        if (!packetsNow || packetsNow < 0)\r\n            packetsNow = 0;\r\n\r\n        var packetsBefore = getStatValue(before, key);\r\n        if (!packetsBefore || packetsBefore < 0)\r\n            packetsBefore = 0;\r\n        var packetRate = packetsNow - packetsBefore;\r\n        if (!packetRate || packetRate < 0)\r\n            packetRate = 0;\r\n        var currentLoss = getStatValue(now, 'packetsLost');\r\n        if (!currentLoss || currentLoss < 0)\r\n            currentLoss = 0;\r\n        var previousLoss = getStatValue(before, 'packetsLost');\r\n        if (!previousLoss || previousLoss < 0)\r\n            previousLoss = 0;\r\n        var lossRate = currentLoss - previousLoss;\r\n        if (!lossRate || lossRate < 0)\r\n            lossRate = 0;\r\n        var packetsTotal = (packetRate + lossRate);\r\n\r\n        jidStats.setSsrcLoss(ssrc,\r\n            {\r\n                \"packetsTotal\": packetsTotal,\r\n                \"packetsLost\": lossRate,\r\n                \"isDownloadStream\": isDownloadStream\r\n            });\r\n\r\n\r\n        var bytesReceived = 0, bytesSent = 0;\r\n        if (getStatValue(now, \"bytesReceived\")) {\r\n      bytesReceived = getStatValue(now, \"bytesReceived\") -\r\n        getStatValue(before, \"bytesReceived\");\r\n        }\r\n\r\n        if (getStatValue(now, \"bytesSent\")) {\r\n      bytesSent = getStatValue(now, \"bytesSent\") -\r\n        getStatValue(before, \"bytesSent\");\r\n        }\r\n        //if(config.debug)\r\n        //console.log(\"---now---bytesReceived---bytesSent---\"+bytesReceived+\"---\"+bytesSent, now);\r\n        //精确算法到毫秒  否则误差太大\r\n        var time = now.timestamp - before.timestamp;\r\n        bytesReceived = (bytesReceived <= 0 || time <= 0)?0:Math.round(((bytesReceived * 8 * 1000) / time) / 1024);\r\n        bytesSent = (bytesSent <= 0 || time <= 0)?0:Math.round(((bytesSent * 8 * 1000) / time) / 1024);\r\n\r\n\r\n        jidStats.setSsrcBitrate(ssrc, {\r\n            \"download\": bytesReceived,\r\n            \"upload\": bytesSent\r\n        });\r\n\r\n        var resolution = {height: null, width: null};\r\n        try {\r\n            if(RTC.isSafari() || RTC.isFirefox()) {\r\n                resolution.height = getStatValue(now, \"frameHeight\");\r\n                resolution.width = getStatValue(now, \"frameWidth\");\r\n                //由于safari  stats中无法获取 本地视频分辨率，只能如此设置\r\n                if(!resolution.height && localStreamSSRC == ssrc) {\r\n                    resolution = {height:constraints.video.height.exact, width:constraints.video.width.exact}\r\n                }\r\n            } else {\r\n                if (getStatValue(now, \"googFrameHeightReceived\") &&\r\n                    getStatValue(now, \"googFrameWidthReceived\")) {\r\n                    resolution.height = getStatValue(now, \"googFrameHeightReceived\");\r\n                    resolution.width = getStatValue(now, \"googFrameWidthReceived\");\r\n                }\r\n                else if (getStatValue(now, \"googFrameHeightSent\") &&\r\n                    getStatValue(now, \"googFrameWidthSent\")) {\r\n                    resolution.height = getStatValue(now, \"googFrameHeightSent\");\r\n                    resolution.width = getStatValue(now, \"googFrameWidthSent\");\r\n                }\r\n            }\r\n        }\r\n        catch (e) {/*not supported*/\r\n        }\r\n    /*if(config.debug) {\r\n        console.log(\"---resolution---height---width---\" + resolution.height +\"---\"+ resolution.width, now);\r\n    }*/\r\n        if (resolution.height && resolution.width) {\r\n            jidStats.setSsrcResolution(ssrc, resolution);\r\n        }\r\n        else {\r\n            jidStats.setSsrcResolution(ssrc, null);\r\n        }\r\n\r\n        var frameRate = getStatValue(now, 'frameRateSent')\r\n        var rtt = getStatValue(now, 'rtt')\r\n        if (frameRate && rtt) {\r\n            // just store video frameRate and rtt yet\r\n            jidStats.setFrameRate(ssrc, frameRate)\r\n            jidStats.setRtt(ssrc, rtt)\r\n        }\r\n  }\r\n\r\n  var self = this;\r\n  // Jid stats\r\n  var totalPackets = {download: 0, upload: 0};\r\n  var lostPackets = {download: 0, upload: 0};\r\n  var bitrateDownload = 0;\r\n  var bitrateUpload = 0;\r\n  var resolutions = {};\r\n  var frameRateStatus = {};\r\n  var rttStatus = {};\r\n  Object.keys(this.jid2stats).forEach(\r\n    function (jid) {\r\n      Object.keys(self.jid2stats[jid].ssrc2Loss).forEach(\r\n        function (ssrc) {\r\n          var type = \"upload\";\r\n          if (self.jid2stats[jid].ssrc2Loss[ssrc].isDownloadStream)\r\n            type = \"download\";\r\n          totalPackets[type] +=\r\n            self.jid2stats[jid].ssrc2Loss[ssrc].packetsTotal;\r\n          lostPackets[type] +=\r\n            self.jid2stats[jid].ssrc2Loss[ssrc].packetsLost;\r\n        }\r\n      );\r\n      Object.keys(self.jid2stats[jid].ssrc2bitrate).forEach(\r\n        function (ssrc) {\r\n          bitrateDownload +=\r\n            self.jid2stats[jid].ssrc2bitrate[ssrc].download;\r\n          bitrateUpload +=\r\n            self.jid2stats[jid].ssrc2bitrate[ssrc].upload;\r\n\r\n          delete self.jid2stats[jid].ssrc2bitrate[ssrc];\r\n        }\r\n      );\r\n      resolutions[jid] = self.jid2stats[jid].ssrc2resolution;\r\n        Object.keys(self.jid2stats[jid].ssrc2frameRate).forEach(\r\n            function (ssrc) {\r\n                frameRateStatus[ssrc] = self.jid2stats[jid].ssrc2frameRate[ssrc]\r\n                delete self.jid2stats[jid].ssrc2frameRate[ssrc];\r\n            }\r\n        );\r\n        Object.keys(self.jid2stats[jid].ssrc2rtt).forEach(\r\n            function (ssrc) {\r\n                rttStatus[ssrc] = self.jid2stats[jid].ssrc2rtt[ssrc]\r\n                delete self.jid2stats[jid].ssrc2rtt[ssrc];\r\n            }\r\n        );\r\n    }\r\n  );\r\n\r\n  PeerStats.bitrate = {\"upload\": bitrateUpload, \"download\": bitrateDownload};\r\n    //console.log(\"-----------PeerStats.bitrate--------\", PeerStats.bitrate);\r\n  PeerStats.packetLoss = {\r\n    total: calculatePacketLoss(lostPackets.download + lostPackets.upload,\r\n      totalPackets.download + totalPackets.upload),\r\n    download: calculatePacketLoss(lostPackets.download, totalPackets.download),\r\n    upload: calculatePacketLoss(lostPackets.upload, totalPackets.upload)\r\n  };\r\n  this.statsUpdateCallback(\r\n    {\r\n      \"bitrate\": PeerStats.bitrate,\r\n      \"packetLoss\": PeerStats.packetLoss,\r\n      \"bandwidth\": PeerStats.bandwidth,\r\n      \"resolution\": resolutions,\r\n      \"frameRate\": frameRateStatus,\r\n      \"rtt\": rttStatus,\r\n      \"transport\": PeerStats.transport\r\n    });\r\n  PeerStats.transport = [];\r\n    } catch (e) {\r\n        console.error(\"=================processStatsReport:\", e);\r\n    }\r\n};\r\n\r\n/**\r\n * Stats processing logic.\r\n */\r\nStatsCollector.prototype.processAudioLevelReport = function () {\r\n  if (!this.baselineAudioLevelsReport) {\r\n    return;\r\n  }\r\n\r\n  for (var idx in this.currentAudioLevelsReport) {\r\n    var now = this.currentAudioLevelsReport[idx];\r\n\r\n    if (now.type != 'ssrc') {\r\n      continue;\r\n    }\r\n\r\n    var before = this.baselineAudioLevelsReport[idx];\r\n    if (!before) {\r\n      //console.warn(getStatValue(now, 'ssrc') + ' not enough data');\r\n      continue;\r\n    }\r\n\r\n    var ssrc = getStatValue(now, 'ssrc');\r\n    var jid = ssrc2jid[ssrc];\r\n    if (!jid) {\r\n      //console.warn(\"No jid for ssrc: \" + ssrc);\r\n      continue;\r\n    }\r\n\r\n    var jidStats = this.jid2stats[jid];\r\n    if (!jidStats) {\r\n      jidStats = new PeerStats();\r\n      this.jid2stats[jid] = jidStats;\r\n    }\r\n\r\n    // Audio level\r\n    var audioLevel = null;\r\n\r\n    try {\r\n      audioLevel = getStatValue(now, 'audioInputLevel');\r\n      if (!audioLevel)\r\n        audioLevel = getStatValue(now, 'audioOutputLevel');\r\n    }\r\n    catch (e) {/*not supported*/\r\n      console.warn(\"Audio Levels are not available in the statistics.\");\r\n      clearInterval(this.audioLevelsIntervalId);\r\n      return;\r\n    }\r\n\r\n    if (audioLevel) {\r\n      // TODO: can't find specs about what this value really is,\r\n      // but it seems to vary between 0 and around 32k.\r\n      audioLevel = audioLevel / 32767;\r\n      jidStats.setSsrcAudioLevel(ssrc, audioLevel);\r\n      if (jid != connection.emuc.myroomjid)\r\n        this.audioLevelsUpdateCallback(jid, audioLevel);\r\n    }\r\n\r\n  }\r\n\r\n\r\n};\r\n\r\nfunction getStatValue(item, name) {\r\n  if (!keyMap[RTC.browser][name]) {\r\n     return 0;\r\n  }\r\n  var key = keyMap[RTC.browser][name];\r\n  return RTC.browser == \"chrome\" ? item.stat(key) : item[key];\r\n}\r\n\r\nexports = module.exports = StatsCollector;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/libs/rtp_sts.js\n// module id = 8\n// module chunks = 0","/**\r\n * Provides statistics for the local stream.\r\n */\r\nvar LocalStatsCollector = (function () {\r\n  /**\r\n   * Size of the webaudio analizer buffer.\r\n   * @type {number}\r\n   */\r\n  var WEBAUDIO_ANALIZER_FFT_SIZE = 2048;\r\n\r\n  /**\r\n   * Value of the webaudio analizer smoothing time parameter.\r\n   * @type {number}\r\n   */\r\n  var WEBAUDIO_ANALIZER_SMOOTING_TIME = 0.8;\r\n\r\n  /**\r\n   * <tt>LocalStatsCollector</tt> calculates statistics for the local stream.\r\n   *\r\n   * @param stream the local stream\r\n   * @param interval stats refresh interval given in ms.\r\n   * @param {function(LocalStatsCollector)} updateCallback the callback called on stats\r\n   *                                   update.\r\n   * @constructor\r\n   */\r\n  function LocalStatsCollectorProto(stream, interval, updateCallback) {\r\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\r\n    this.stream = stream;\r\n    this.intervalId = null;\r\n    this.intervalMilis = interval;\r\n    this.audioLevelsUpdateCallback = updateCallback;\r\n    this.audioLevel = 0;\r\n  }\r\n\r\n  /**\r\n   * Starts the collecting the statistics.\r\n   */\r\n  LocalStatsCollectorProto.prototype.start = function () {\r\n    if (!window.AudioContext)\r\n      return;\r\n\r\n    var context = new AudioContext();\r\n    var analyser = context.createAnalyser();\r\n    analyser.smoothingTimeConstant = WEBAUDIO_ANALIZER_SMOOTING_TIME;\r\n    analyser.fftSize = WEBAUDIO_ANALIZER_FFT_SIZE;\r\n\r\n\r\n    var source = context.createMediaStreamSource(this.stream);\r\n    source.connect(analyser);\r\n\r\n\r\n    var self = this;\r\n\r\n    this.intervalId = setInterval(\r\n      function () {\r\n        var array = new Uint8Array(analyser.frequencyBinCount);\r\n        analyser.getByteTimeDomainData(array);\r\n        var audioLevel = TimeDomainDataToAudioLevel(array);\r\n        if (audioLevel != self.audioLevel) {\r\n          self.audioLevel = animateLevel(audioLevel, self.audioLevel);\r\n          self.audioLevelsUpdateCallback(LocalStatsCollectorProto.LOCAL_JID, self.audioLevel);\r\n        }\r\n      },\r\n      this.intervalMilis\r\n    );\r\n\r\n  };\r\n\r\n  /**\r\n   * Stops collecting the statistics.\r\n   */\r\n  LocalStatsCollectorProto.prototype.stop = function () {\r\n    if (this.intervalId) {\r\n      clearInterval(this.intervalId);\r\n      this.intervalId = null;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Converts time domain data array to audio level.\r\n   * @param array the time domain data array.\r\n   * @returns {number} the audio level\r\n   */\r\n  var TimeDomainDataToAudioLevel = function (samples) {\r\n\r\n    var maxVolume = 0;\r\n\r\n    var length = samples.length;\r\n\r\n    for (var i = 0; i < length; i++) {\r\n      if (maxVolume < samples[i])\r\n        maxVolume = samples[i];\r\n    }\r\n\r\n    return parseFloat(((maxVolume - 127) / 128).toFixed(3));\r\n  };\r\n\r\n  /**\r\n   * Animates audio level change\r\n   * @param newLevel the new audio level\r\n   * @param lastLevel the last audio level\r\n   * @returns {Number} the audio level to be set\r\n   */\r\n  function animateLevel(newLevel, lastLevel) {\r\n    var value = 0;\r\n    var diff = lastLevel - newLevel;\r\n    if (diff > 0.2) {\r\n      value = lastLevel - 0.2;\r\n    }\r\n    else if (diff < -0.4) {\r\n      value = lastLevel + 0.4;\r\n    }\r\n    else {\r\n      value = newLevel;\r\n    }\r\n\r\n    return parseFloat(value.toFixed(3));\r\n  }\r\n\r\n  /**\r\n   * Indicates that this audio level is for local jid.\r\n   * @type {string}\r\n   */\r\n  LocalStatsCollectorProto.LOCAL_JID = 'local';\r\n\r\n  return LocalStatsCollectorProto;\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/libs/local_sts.js\n// module id = 9\n// module chunks = 0","/**\r\n * The audio Levels plugin.\r\n */\r\nvar AudioLevels = (function (my) {\r\n  var audioLevelCanvasCache = {};\r\n\r\n  my.LOCAL_LEVEL = 'local';\r\n\r\n  /**\r\n   * Updates the audio level canvas for the given peerJid. If the canvas\r\n   * didn't exist we create it.\r\n   */\r\n  my.updateAudioLevelCanvas = function (peerJid) {\r\n    var resourceJid = null;\r\n    var videoSpanId = null;\r\n    if (!peerJid)\r\n      videoSpanId = 'localVideoContainer';\r\n    else {\r\n      resourceJid = Strophe.getResourceFromJid(peerJid);\r\n\r\n      videoSpanId = 'participant_' + resourceJid;\r\n    }\r\n\r\n    var videoSpan = document.getElementById(videoSpanId);\r\n\r\n    if (!videoSpan) {\r\n      if (resourceJid)\r\n        console.error(\"No video element for jid\", resourceJid);\r\n      else\r\n        console.error(\"No video element for local video.\");\r\n\r\n      return;\r\n    }\r\n\r\n    var audioLevelCanvas = $('#' + videoSpanId + '>canvas');\r\n\r\n    var videoSpaceWidth = $('#remoteVideos').width();\r\n    var thumbnailSize = VideoLayout.calculateThumbnailSize(videoSpaceWidth);\r\n    var thumbnailWidth = thumbnailSize[0];\r\n    var thumbnailHeight = thumbnailSize[1];\r\n\r\n    if (!audioLevelCanvas || audioLevelCanvas.length === 0) {\r\n\r\n      audioLevelCanvas = document.createElement('canvas');\r\n      audioLevelCanvas.className = \"audiolevel\";\r\n      audioLevelCanvas.style.bottom = \"-\" + interfaceConfig.CANVAS_EXTRA / 2 + \"px\";\r\n      audioLevelCanvas.style.left = \"-\" + interfaceConfig.CANVAS_EXTRA / 2 + \"px\";\r\n      resizeAudioLevelCanvas(audioLevelCanvas,\r\n        thumbnailWidth,\r\n        thumbnailHeight);\r\n\r\n      videoSpan.appendChild(audioLevelCanvas);\r\n    } else {\r\n      audioLevelCanvas = audioLevelCanvas.get(0);\r\n\r\n      resizeAudioLevelCanvas(audioLevelCanvas,\r\n        thumbnailWidth,\r\n        thumbnailHeight);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Updates the audio level UI for the given resourceJid.\r\n   *\r\n   * @param resourceJid the resource jid indicating the video element for\r\n   * which we draw the audio level\r\n   * @param audioLevel the newAudio level to render\r\n   */\r\n  my.updateAudioLevel = function (resourceJid, audioLevel) {\r\n    drawAudioLevelCanvas(resourceJid, audioLevel);\r\n\r\n    var videoSpanId = getVideoSpanId(resourceJid);\r\n\r\n    var audioLevelCanvas = $('#' + videoSpanId + '>canvas').get(0);\r\n\r\n    if (!audioLevelCanvas)\r\n      return;\r\n\r\n    var drawContext = audioLevelCanvas.getContext('2d');\r\n\r\n    var canvasCache = audioLevelCanvasCache[resourceJid];\r\n\r\n    drawContext.clearRect(0, 0,\r\n      audioLevelCanvas.width, audioLevelCanvas.height);\r\n    drawContext.drawImage(canvasCache, 0, 0);\r\n\r\n    if (resourceJid === AudioLevels.LOCAL_LEVEL) {\r\n      if (!connection.emuc.myroomjid) {\r\n        return;\r\n      }\r\n      resourceJid = Strophe.getResourceFromJid(connection.emuc.myroomjid);\r\n    }\r\n\r\n    if (resourceJid === VideoLayout.getLargeVideoState().userResourceJid) {\r\n      AudioLevels.updateActiveSpeakerAudioLevel(audioLevel);\r\n    }\r\n  };\r\n\r\n  my.updateActiveSpeakerAudioLevel = function (audioLevel) {\r\n    var drawContext = $('#activeSpeakerAudioLevel')[0].getContext('2d');\r\n    var r = interfaceConfig.ACTIVE_SPEAKER_AVATAR_SIZE / 2;\r\n    var center = (interfaceConfig.ACTIVE_SPEAKER_AVATAR_SIZE + r) / 2;\r\n\r\n    // Save the previous state of the context.\r\n    drawContext.save();\r\n\r\n    drawContext.clearRect(0, 0, 300, 300);\r\n\r\n    // Draw a circle.\r\n    drawContext.arc(center, center, r, 0, 2 * Math.PI);\r\n\r\n    // Add a shadow around the circle\r\n    drawContext.shadowColor = interfaceConfig.SHADOW_COLOR;\r\n    drawContext.shadowBlur = getShadowLevel(audioLevel);\r\n    drawContext.shadowOffsetX = 0;\r\n    drawContext.shadowOffsetY = 0;\r\n\r\n    // Fill the shape.\r\n    drawContext.fill();\r\n\r\n    drawContext.save();\r\n\r\n    drawContext.restore();\r\n\r\n\r\n    drawContext.arc(center, center, r, 0, 2 * Math.PI);\r\n\r\n    drawContext.clip();\r\n    drawContext.clearRect(0, 0, 277, 200);\r\n\r\n    // Restore the previous context state.\r\n    drawContext.restore();\r\n  };\r\n\r\n  /**\r\n   * Resizes the given audio level canvas to match the given thumbnail size.\r\n   */\r\n  function resizeAudioLevelCanvas(audioLevelCanvas,\r\n                                  thumbnailWidth,\r\n                                  thumbnailHeight) {\r\n    audioLevelCanvas.width = thumbnailWidth + interfaceConfig.CANVAS_EXTRA;\r\n    audioLevelCanvas.height = thumbnailHeight + interfaceConfig.CANVAS_EXTRA;\r\n  }\r\n\r\n  /**\r\n   * Draws the audio level canvas into the cached canvas object.\r\n   *\r\n   * @param resourceJid the resource jid indicating the video element for\r\n   * which we draw the audio level\r\n   * @param audioLevel the newAudio level to render\r\n   */\r\n  function drawAudioLevelCanvas(resourceJid, audioLevel) {\r\n    if (!audioLevelCanvasCache[resourceJid]) {\r\n\r\n      var videoSpanId = getVideoSpanId(resourceJid);\r\n\r\n      var audioLevelCanvasOrig = $('#' + videoSpanId + '>canvas').get(0);\r\n\r\n      /*\r\n       * FIXME Testing has shown that audioLevelCanvasOrig may not exist.\r\n       * In such a case, the method CanvasUtil.cloneCanvas may throw an\r\n       * error. Since audio levels are frequently updated, the errors have\r\n       * been observed to pile into the console, strain the CPU.\r\n       */\r\n      if (audioLevelCanvasOrig) {\r\n        audioLevelCanvasCache[resourceJid]\r\n          = CanvasUtil.cloneCanvas(audioLevelCanvasOrig);\r\n      }\r\n    }\r\n\r\n    var canvas = audioLevelCanvasCache[resourceJid];\r\n\r\n    if (!canvas)\r\n      return;\r\n\r\n    var drawContext = canvas.getContext('2d');\r\n\r\n    drawContext.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    var shadowLevel = getShadowLevel(audioLevel);\r\n\r\n    if (shadowLevel > 0)\r\n    // drawContext, x, y, w, h, r, shadowColor, shadowLevel\r\n      CanvasUtil.drawRoundRectGlow(drawContext,\r\n        interfaceConfig.CANVAS_EXTRA / 2, interfaceConfig.CANVAS_EXTRA / 2,\r\n        canvas.width - interfaceConfig.CANVAS_EXTRA,\r\n        canvas.height - interfaceConfig.CANVAS_EXTRA,\r\n        interfaceConfig.CANVAS_RADIUS,\r\n        interfaceConfig.SHADOW_COLOR,\r\n        shadowLevel);\r\n  }\r\n\r\n  /**\r\n   * Returns the shadow/glow level for the given audio level.\r\n   *\r\n   * @param audioLevel the audio level from which we determine the shadow\r\n   * level\r\n   */\r\n  function getShadowLevel(audioLevel) {\r\n    var shadowLevel = 0;\r\n\r\n    if (audioLevel <= 0.3) {\r\n      shadowLevel = Math.round(interfaceConfig.CANVAS_EXTRA / 2 * (audioLevel / 0.3));\r\n    }\r\n    else if (audioLevel <= 0.6) {\r\n      shadowLevel = Math.round(interfaceConfig.CANVAS_EXTRA / 2 * ((audioLevel - 0.3) / 0.3));\r\n    }\r\n    else {\r\n      shadowLevel = Math.round(interfaceConfig.CANVAS_EXTRA / 2 * ((audioLevel - 0.6) / 0.4));\r\n    }\r\n    return shadowLevel;\r\n  }\r\n\r\n  /**\r\n   * Returns the video span id corresponding to the given resourceJid or local\r\n   * user.\r\n   */\r\n  function getVideoSpanId(resourceJid) {\r\n    var videoSpanId = null;\r\n    if (resourceJid === AudioLevels.LOCAL_LEVEL\r\n      || (connection.emuc.myroomjid && resourceJid\r\n      === Strophe.getResourceFromJid(connection.emuc.myroomjid)))\r\n      videoSpanId = 'localVideoContainer';\r\n    else\r\n      videoSpanId = 'participant_' + resourceJid;\r\n\r\n    return videoSpanId;\r\n  }\r\n\r\n  /**\r\n   * Indicates that the remote video has been resized.\r\n   */\r\n  $(document).bind('remotevideo.resized', function (event, width, height) {\r\n    var resized = false;\r\n    $('#remoteVideos>span>canvas').each(function () {\r\n      var canvas = $(this).get(0);\r\n      if (canvas.width !== width + interfaceConfig.CANVAS_EXTRA) {\r\n        canvas.width = width + interfaceConfig.CANVAS_EXTRA;\r\n        resized = true;\r\n      }\r\n\r\n      if (canvas.heigh !== height + interfaceConfig.CANVAS_EXTRA) {\r\n        canvas.height = height + interfaceConfig.CANVAS_EXTRA;\r\n        resized = true;\r\n      }\r\n    });\r\n\r\n    if (resized)\r\n      Object.keys(audioLevelCanvasCache).forEach(function (resourceJid) {\r\n        audioLevelCanvasCache[resourceJid].width\r\n          = width + interfaceConfig.CANVAS_EXTRA;\r\n        audioLevelCanvasCache[resourceJid].height\r\n          = height + interfaceConfig.CANVAS_EXTRA;\r\n      });\r\n  });\r\n\r\n  return my;\r\n\r\n})(AudioLevels || {});\r\n\r\nexports = module.exports = AudioLevels;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/libs/audio_levels.js\n// module id = 10\n// module chunks = 0","var adapter = require(\"webrtc-adapter\");\r\n\r\n/**\r\n * 获取本地音视频流\r\n *\r\n * @param constraints\r\n * @param successCallback\r\n * @param errorCallback\r\n */\r\nfunction _getMedia(constraints, successCallback, errorCallback) {\r\n  if (stream) {\r\n    stream.getTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n  }\r\n  navigator.mediaDevices.getUserMedia(constraints)\r\n    .then(successCallback)\r\n    .catch(function (e) {\r\n      errorCallback(e);\r\n    });\r\n};\r\n\r\nmodule.exports = {\r\n  getMedia: _getMedia\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/manis.stream.js\n// module id = 11\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\nvar adapterFactory = require('./adapter_factory.js');\nmodule.exports = adapterFactory({window: global.window});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/adapter_core.js\n// module id = 12\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\nvar utils = require('./utils');\n// Shimming starts here.\nmodule.exports = function(dependencies, opts) {\n  var window = dependencies && dependencies.window;\n\n  var options = {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true,\n  };\n\n  for (var key in opts) {\n    if (hasOwnProperty.call(opts, key)) {\n      options[key] = opts[key];\n    }\n  }\n\n  // Utils.\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n\n  // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n  var commonShim = require('./common_shim') || null;\n\n  // Export to the adapter global object visible in the browser.\n  var adapter = {\n    browserDetails: browserDetails,\n    commonShim: commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimSourceObject(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n      commonShim.shimCreateObjectURL(window);\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimSourceObject(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n      commonShim.shimCreateObjectURL(window);\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/adapter_factory.js\n// module id = 13\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nfunction extractVersion(uastring, expr, pos) {\n  var match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var proto = window.RTCPeerConnection.prototype;\n  var nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    var wrappedCallback = function(e) {\n      var modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        cb(modifiedEvent);\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  var nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    var unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get: function() {\n      return this['_on' + eventNameToWrap];\n    },\n    set: function(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\n// Utility methods.\nmodule.exports = {\n  extractVersion: extractVersion,\n  wrapPeerConnectionEvent: wrapPeerConnectionEvent,\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  /**\n   * Disable or enable deprecation warnings\n   * @param {!boolean} bool set to true to disable warnings.\n   */\n  disableWarnings: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    deprecationWarnings_ = !bool;\n    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Shows a deprecation warning suggesting the modern and spec-compatible API.\n   */\n  deprecated: function(oldMethod, newMethod) {\n    if (!deprecationWarnings_) {\n      return;\n    }\n    console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n        ' instead.');\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  detectBrowser: function(window) {\n    var navigator = window && window.navigator;\n\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    if (navigator.mozGetUserMedia) { // Firefox.\n      result.browser = 'firefox';\n      result.version = extractVersion(navigator.userAgent,\n          /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera.\n      // Version matches Chrome/WebRTC version.\n      result.browser = 'chrome';\n      result.version = extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/(\\d+)\\./, 2);\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n      result.browser = 'edge';\n      result.version = extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n    } else if (window.RTCPeerConnection &&\n        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n      result.browser = 'safari';\n      result.version = extractVersion(navigator.userAgent,\n          /AppleWebKit\\/(\\d+)\\./, 1);\n    } else { // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/utils.js\n// module id = 14\n// module chunks = 0","\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\n/* iterates the stats graph recursively. */\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(function(name) {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(function(id) {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nfunction filterStats(result, track, outbound) {\n  var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  var filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  var trackStats = [];\n  result.forEach(function(value) {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(function(trackStat) {\n    result.forEach(function(stats) {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\nmodule.exports = {\n  shimGetUserMedia: require('./getusermedia'),\n  shimMediaStream: function(window) {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  },\n\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n          }\n          this.addEventListener('track', this._ontrack = f);\n        },\n        enumerable: true,\n        configurable: true\n      });\n      var origSetRemoteDescription =\n          window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n        var pc = this;\n        if (!pc._ontrackpoly) {\n          pc._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track && r.track.id === te.track.id;\n                });\n              } else {\n                receiver = {track: te.track};\n              }\n\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver: receiver};\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track && r.track.id === track.id;\n                });\n              } else {\n                receiver = {track: track};\n              }\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver: receiver};\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n          };\n          pc.addEventListener('addstream', pc._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n    } else {\n      // even if RTCRtpTransceiver is in window, it is only used and\n      // emitted in unified-plan. Unfortunately this means we need\n      // to unconditionally wrap the event.\n      utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n        if (!e.transceiver) {\n          Object.defineProperty(e, 'transceiver',\n            {value: {receiver: e.receiver}});\n        }\n        return e;\n      });\n    }\n  },\n\n  shimGetSendersWithDtmf: function(window) {\n    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('getSenders' in window.RTCPeerConnection.prototype) &&\n        'createDTMFSender' in window.RTCPeerConnection.prototype) {\n      var shimSenderWithDtmf = function(pc, track) {\n        return {\n          track: track,\n          get dtmf() {\n            if (this._dtmf === undefined) {\n              if (track.kind === 'audio') {\n                this._dtmf = pc.createDTMFSender(track);\n              } else {\n                this._dtmf = null;\n              }\n            }\n            return this._dtmf;\n          },\n          _pc: pc\n        };\n      };\n\n      // augment addTrack when getSenders is not available.\n      if (!window.RTCPeerConnection.prototype.getSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function() {\n          this._senders = this._senders || [];\n          return this._senders.slice(); // return a copy of the internal state.\n        };\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n          var pc = this;\n          var sender = origAddTrack.apply(pc, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(pc, track);\n            pc._senders.push(sender);\n          }\n          return sender;\n        };\n\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n          var pc = this;\n          origRemoveTrack.apply(pc, arguments);\n          var idx = pc._senders.indexOf(sender);\n          if (idx !== -1) {\n            pc._senders.splice(idx, 1);\n          }\n        };\n      }\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origAddStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          pc._senders.push(shimSenderWithDtmf(pc, track));\n        });\n      };\n\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origRemoveStream.apply(pc, [stream]);\n\n        stream.getTracks().forEach(function(track) {\n          var sender = pc._senders.find(function(s) {\n            return s.track === track;\n          });\n          if (sender) {\n            pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n          }\n        });\n      };\n    } else if (typeof window === 'object' && window.RTCPeerConnection &&\n               'getSenders' in window.RTCPeerConnection.prototype &&\n               'createDTMFSender' in window.RTCPeerConnection.prototype &&\n               window.RTCRtpSender &&\n               !('dtmf' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        var pc = this;\n        var senders = origGetSenders.apply(pc, []);\n        senders.forEach(function(sender) {\n          sender._pc = pc;\n        });\n        return senders;\n      };\n\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = this._pc.createDTMFSender(this.track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n  },\n\n  shimSenderReceiverGetStats: function(window) {\n    if (!(typeof window === 'object' && window.RTCPeerConnection &&\n        window.RTCRtpSender && window.RTCRtpReceiver)) {\n      return;\n    }\n\n    // shim sender stats.\n    if (!('getStats' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      if (origGetSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function() {\n          var pc = this;\n          var senders = origGetSenders.apply(pc, []);\n          senders.forEach(function(sender) {\n            sender._pc = pc;\n          });\n          return senders;\n        };\n      }\n\n      var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      if (origAddTrack) {\n        window.RTCPeerConnection.prototype.addTrack = function() {\n          var sender = origAddTrack.apply(this, arguments);\n          sender._pc = this;\n          return sender;\n        };\n      }\n      window.RTCRtpSender.prototype.getStats = function() {\n        var sender = this;\n        return this._pc.getStats().then(function(result) {\n          /* Note: this will include stats of all senders that\n           *   send a track with the same id as sender.track as\n           *   it is not possible to identify the RTCRtpSender.\n           */\n          return filterStats(result, sender.track, true);\n        });\n      };\n    }\n\n    // shim receiver stats.\n    if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n      var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n      if (origGetReceivers) {\n        window.RTCPeerConnection.prototype.getReceivers = function() {\n          var pc = this;\n          var receivers = origGetReceivers.apply(pc, []);\n          receivers.forEach(function(receiver) {\n            receiver._pc = pc;\n          });\n          return receivers;\n        };\n      }\n      utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n        e.receiver._pc = e.srcElement;\n        return e;\n      });\n      window.RTCRtpReceiver.prototype.getStats = function() {\n        var receiver = this;\n        return this._pc.getStats().then(function(result) {\n          return filterStats(result, receiver.track, false);\n        });\n      };\n    }\n\n    if (!('getStats' in window.RTCRtpSender.prototype &&\n        'getStats' in window.RTCRtpReceiver.prototype)) {\n      return;\n    }\n\n    // shim RTCPeerConnection.getStats(track).\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function() {\n      var pc = this;\n      if (arguments.length > 0 &&\n          arguments[0] instanceof window.MediaStreamTrack) {\n        var track = arguments[0];\n        var sender;\n        var receiver;\n        var err;\n        pc.getSenders().forEach(function(s) {\n          if (s.track === track) {\n            if (sender) {\n              err = true;\n            } else {\n              sender = s;\n            }\n          }\n        });\n        pc.getReceivers().forEach(function(r) {\n          if (r.track === track) {\n            if (receiver) {\n              err = true;\n            } else {\n              receiver = r;\n            }\n          }\n          return r.track === track;\n        });\n        if (err || (sender && receiver)) {\n          return Promise.reject(new DOMException(\n            'There are more than one sender or receiver for the track.',\n            'InvalidAccessError'));\n        } else if (sender) {\n          return sender.getStats();\n        } else if (receiver) {\n          return receiver.getStats();\n        }\n        return Promise.reject(new DOMException(\n          'There is no sender or receiver for the track.',\n          'InvalidAccessError'));\n      }\n      return origGetStats.apply(pc, arguments);\n    };\n  },\n\n  shimSourceObject: function(window) {\n    var URL = window && window.URL;\n\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return undefined;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimAddTrackRemoveTrackWithNative: function(window) {\n    // shim addTrack/removeTrack with native variants in order to make\n    // the interactions with legacy getLocalStreams behave as in other browsers.\n    // Keeps a mapping stream.id => [stream, rtpsenders...]\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n      var pc = this;\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams).map(function(streamId) {\n        return pc._shimmedLocalStreams[streamId][0];\n      });\n    };\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      var sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      var pc = this;\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      stream.getTracks().forEach(function(track) {\n        var alreadyExists = pc.getSenders().find(function(s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.',\n              'InvalidAccessError');\n        }\n      });\n      var existingSenders = pc.getSenders();\n      origAddStream.apply(this, arguments);\n      var newSenders = pc.getSenders().filter(function(newSender) {\n        return existingSenders.indexOf(newSender) === -1;\n      });\n      this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n    var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n    window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n      var pc = this;\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(function(streamId) {\n          var idx = pc._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            pc._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (pc._shimmedLocalStreams[streamId].length === 1) {\n            delete pc._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n  },\n\n  shimAddTrackRemoveTrack: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n    // shim addTrack and removeTrack.\n    if (window.RTCPeerConnection.prototype.addTrack &&\n        browserDetails.version >= 65) {\n      return this.shimAddTrackRemoveTrackWithNative(window);\n    }\n\n    // also shim pc.getLocalStreams when addTrack is shimmed\n    // to return the original streams.\n    var origGetLocalStreams = window.RTCPeerConnection.prototype\n        .getLocalStreams;\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n      var pc = this;\n      var nativeStreams = origGetLocalStreams.apply(this);\n      pc._reverseStreams = pc._reverseStreams || {};\n      return nativeStreams.map(function(stream) {\n        return pc._reverseStreams[stream.id];\n      });\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      stream.getTracks().forEach(function(track) {\n        var alreadyExists = pc.getSenders().find(function(s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.',\n              'InvalidAccessError');\n        }\n      });\n      // Add identity mapping for consistency with addTrack.\n      // Unless this is being used with a stream from addTrack.\n      if (!pc._reverseStreams[stream.id]) {\n        var newStream = new window.MediaStream(stream.getTracks());\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        stream = newStream;\n      }\n      origAddStream.apply(pc, [stream]);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n      delete pc._reverseStreams[(pc._streams[stream.id] ?\n          pc._streams[stream.id].id : stream.id)];\n      delete pc._streams[stream.id];\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      var streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(function(t) {\n            return t === track;\n          })) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      var alreadyExists = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n      var oldStream = pc._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(function() {\n          pc.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        var newStream = new window.MediaStream([track]);\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        pc.addStream(newStream);\n      }\n      return pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n    };\n\n    // replace the internal stream id with the external one and\n    // vice versa.\n    function replaceInternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n            externalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    function replaceExternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n            internalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    ['createOffer', 'createAnswer'].forEach(function(method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      window.RTCPeerConnection.prototype[method] = function() {\n        var pc = this;\n        var args = arguments;\n        var isLegacyCall = arguments.length &&\n            typeof arguments[0] === 'function';\n        if (isLegacyCall) {\n          return nativeMethod.apply(pc, [\n            function(description) {\n              var desc = replaceInternalStreamId(pc, description);\n              args[0].apply(null, [desc]);\n            },\n            function(err) {\n              if (args[1]) {\n                args[1].apply(null, err);\n              }\n            }, arguments[2]\n          ]);\n        }\n        return nativeMethod.apply(pc, arguments)\n        .then(function(description) {\n          return replaceInternalStreamId(pc, description);\n        });\n      };\n    });\n\n    var origSetLocalDescription =\n        window.RTCPeerConnection.prototype.setLocalDescription;\n    window.RTCPeerConnection.prototype.setLocalDescription = function() {\n      var pc = this;\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(pc, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(pc, arguments[0]);\n      return origSetLocalDescription.apply(pc, arguments);\n    };\n\n    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n    var origLocalDescription = Object.getOwnPropertyDescriptor(\n        window.RTCPeerConnection.prototype, 'localDescription');\n    Object.defineProperty(window.RTCPeerConnection.prototype,\n        'localDescription', {\n          get: function() {\n            var pc = this;\n            var description = origLocalDescription.get.apply(this);\n            if (description.type === '') {\n              return description;\n            }\n            return replaceInternalStreamId(pc, description);\n          }\n        });\n\n    window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      var isLocal = sender._pc === pc;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      pc._streams = pc._streams || {};\n      var stream;\n      Object.keys(pc._streams).forEach(function(streamid) {\n        var hasTrack = pc._streams[streamid].getTracks().find(function(track) {\n          return sender.track === track;\n        });\n        if (hasTrack) {\n          stream = pc._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          pc.removeStream(pc._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        pc.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        // Translate iceTransportPolicy to iceTransports,\n        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n        logging('PeerConnection');\n        if (pcConfig && pcConfig.iceTransportPolicy) {\n          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n        }\n\n        return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.webkitRTCPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      if (window.webkitRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.webkitRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n    }\n\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(selector,\n        successCallback, errorCallback) {\n      var pc = this;\n      var args = arguments;\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 ||\n          typeof arguments[0] !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function(report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function(name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function(stats) {\n        return new Map(Object.keys(stats).map(function(key) {\n          return [key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function(response) {\n          args[1](makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_,\n          arguments[0]]);\n      }\n\n      // promise-support\n      return new Promise(function(resolve, reject) {\n        origGetStats.apply(pc, [\n          function(response) {\n            resolve(makeMapStats(fixChromeStats_(response)));\n          }, reject]);\n      }).then(successCallback, errorCallback);\n    };\n\n    // add promise support -- natively available in Chrome 51\n    if (browserDetails.version < 51) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = window.RTCPeerConnection.prototype[method];\n            window.RTCPeerConnection.prototype[method] = function() {\n              var args = arguments;\n              var pc = this;\n              var promise = new Promise(function(resolve, reject) {\n                nativeMethod.apply(pc, [args[0], resolve, reject]);\n              });\n              if (args.length < 2) {\n                return promise;\n              }\n              return promise.then(function() {\n                args[1].apply(null, []);\n              },\n              function(err) {\n                if (args.length >= 3) {\n                  args[2].apply(null, [err]);\n                }\n              });\n            };\n          });\n    }\n\n    // promise support for createOffer and createAnswer. Available (without\n    // bugs) since M52: crbug/619289\n    if (browserDetails.version < 52) {\n      ['createOffer', 'createAnswer'].forEach(function(method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          var pc = this;\n          if (arguments.length < 1 || (arguments.length === 1 &&\n              typeof arguments[0] === 'object')) {\n            var opts = arguments.length === 1 ? arguments[0] : undefined;\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(pc, [resolve, reject, opts]);\n            });\n          }\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  },\n\n  fixNegotiationNeeded: function(window) {\n    utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function(e) {\n      var pc = e.target;\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n      return e;\n    });\n  },\n\n  shimGetDisplayMedia: function(window, getSourceId) {\n    if ('getDisplayMedia' in window.navigator) {\n      return;\n    }\n    // getSourceId is a function that returns a promise resolving with\n    // the sourceId of the screen/window/tab to be shared.\n    if (typeof getSourceId !== 'function') {\n      console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n          'a function');\n      return;\n    }\n    navigator.getDisplayMedia = function(constraints) {\n      return getSourceId(constraints)\n        .then(function(sourceId) {\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: constraints.video.frameRate || 3\n            }\n          };\n          return navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/chrome/chrome_shim.js\n// module id = 15\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      var remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      var getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(function(devices) {\n            devices = devices.filter(function(d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function(d) {\n              return matches.some(function(match) {\n                return d.label.toLowerCase().indexOf(match) !== -1;\n              });\n            });\n            if (!dev && devices.length && matches.indexOf('back') !== -1) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function(c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return window.MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                kind: kinds[device.kind],\n                deviceId: device.id,\n                groupId: ''};\n            }));\n          });\n        });\n      },\n      getSupportedConstraints: function() {\n        return {\n          deviceId: true, echoCancellation: true, facingMode: true,\n          frameRate: true, height: true, width: true\n        };\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, function(c) {\n        return origGetUserMedia(c).then(function(stream) {\n          if (c.audio && !stream.getAudioTracks().length ||\n              c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function(track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function(e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/chrome/getusermedia.js\n// module id = 16\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar filterIceServers = require('./filtericeservers');\nvar shimRTCPeerConnection = require('rtcpeerconnection-shim');\n\nmodule.exports = {\n  shimGetUserMedia: require('./getusermedia'),\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (window.RTCIceGatherer) {\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n      // this adds an additional event listener to MediaStrackTrack that signals\n      // when a tracks enabled property was changed. Workaround for a bug in\n      // addStream, see below. No longer required in 15025+\n      if (browserDetails.version < 15025) {\n        var origMSTEnabled = Object.getOwnPropertyDescriptor(\n            window.MediaStreamTrack.prototype, 'enabled');\n        Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n          set: function(value) {\n            origMSTEnabled.set.call(this, value);\n            var ev = new Event('enabled');\n            ev.enabled = value;\n            this.dispatchEvent(ev);\n          }\n        });\n      }\n    }\n\n    // ORTC defines the DTMF sender a bit different.\n    // https://github.com/w3c/ortc/issues/714\n    if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = new window.RTCDtmfSender(this);\n            } else if (this.track.kind === 'video') {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n    // Edge currently only implements the RTCDtmfSender, not the\n    // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n    if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n      window.RTCDTMFSender = window.RTCDtmfSender;\n    }\n\n    var RTCPeerConnectionShim = shimRTCPeerConnection(window,\n        browserDetails.version);\n    window.RTCPeerConnection = function(config) {\n      if (config && config.iceServers) {\n        config.iceServers = filterIceServers(config.iceServers);\n      }\n      return new RTCPeerConnectionShim(config);\n    };\n    window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n  },\n  shimReplaceTrack: function(window) {\n    // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n    if (window.RTCRtpSender &&\n        !('replaceTrack' in window.RTCRtpSender.prototype)) {\n      window.RTCRtpSender.prototype.replaceTrack =\n          window.RTCRtpSender.prototype.setTrack;\n    }\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/edge/edge_shim.js\n// module id = 17\n// module chunks = 0","/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nmodule.exports = function(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/edge/filtericeservers.js\n// module id = 18\n// module chunks = 0","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all fieldѕ are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete‥\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      states[transceiver.iceTransport.state]++;\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      states[transceiver.iceTransport.state]++;\n      states[transceiver.dtlsTransport.state]++;\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rtcpeerconnection-shim/rtcpeerconnection.js\n// module id = 19\n// module chunks = 0"," /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.substr(17).split(' ');\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(msidParts) {\n    return msidParts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp/sdp.js\n// module id = 20\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var navigator = window && window.navigator;\n\n  var shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(function(e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/edge/getusermedia.js\n// module id = 21\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = {\n  shimGetUserMedia: require('./getusermedia'),\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.transceiver = {receiver: event.receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        },\n        enumerable: true,\n        configurable: true\n      });\n    }\n    if (typeof window === 'object' && window.RTCTrackEvent &&\n        ('receiver' in window.RTCTrackEvent.prototype) &&\n        !('transceiver' in window.RTCTrackEvent.prototype)) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function() {\n          return {receiver: this.receiver};\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n        window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (window.mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = window.mozRTCSessionDescription;\n      window.RTCIceCandidate = window.mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function(stats) {\n      var map = new Map();\n      Object.keys(stats).forEach(function(key) {\n        map.set(key, stats[key]);\n        map[key] = stats[key];\n      });\n      return map;\n    };\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(\n      selector,\n      onSucc,\n      onErr\n    ) {\n      return nativeGetStats.apply(this, [selector || null])\n        .then(function(stats) {\n          if (browserDetails.version < 48) {\n            stats = makeMapStats(stats);\n          }\n          if (browserDetails.version < 53 && !onSucc) {\n            // Shim only promise getStats with spec-hyphens in type names\n            // Leave callback version alone; misc old uses of forEach before Map\n            try {\n              stats.forEach(function(stat) {\n                stat.type = modernStatsTypes[stat.type] || stat.type;\n              });\n            } catch (e) {\n              if (e.name !== 'TypeError') {\n                throw e;\n              }\n              // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n              stats.forEach(function(stat, i) {\n                stats.set(i, Object.assign({}, stat, {\n                  type: modernStatsTypes[stat.type] || stat.type\n                }));\n              });\n            }\n          }\n          return stats;\n        })\n        .then(onSucc, onErr);\n    };\n  },\n\n  shimSenderGetStats: function(window) {\n    if (!(typeof window === 'object' && window.RTCPeerConnection &&\n        window.RTCRtpSender)) {\n      return;\n    }\n    if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n      return;\n    }\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        var pc = this;\n        var senders = origGetSenders.apply(pc, []);\n        senders.forEach(function(sender) {\n          sender._pc = pc;\n        });\n        return senders;\n      };\n    }\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function() {\n        var sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function() {\n      return this.track ? this._pc.getStats(this.track) :\n          Promise.resolve(new Map());\n    };\n  },\n\n  shimReceiverGetStats: function(window) {\n    if (!(typeof window === 'object' && window.RTCPeerConnection &&\n        window.RTCRtpSender)) {\n      return;\n    }\n    if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n      return;\n    }\n    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function() {\n        var pc = this;\n        var receivers = origGetReceivers.apply(pc, []);\n        receivers.forEach(function(receiver) {\n          receiver._pc = pc;\n        });\n        return receivers;\n      };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function() {\n      return this._pc.getStats(this.track);\n    };\n  },\n\n  shimRemoveStream: function(window) {\n    if (!window.RTCPeerConnection ||\n        'removeStream' in window.RTCPeerConnection.prototype) {\n      return;\n    }\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var pc = this;\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(function(sender) {\n        if (sender.track && stream.getTracks().indexOf(sender.track) !== -1) {\n          pc.removeTrack(sender);\n        }\n      });\n    };\n  },\n\n  shimRTCDataChannel: function(window) {\n    // rename DataChannel to RTCDataChannel (native fix in FF60):\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n    if (window.DataChannel && !window.RTCDataChannel) {\n      window.RTCDataChannel = window.DataChannel;\n    }\n  },\n\n  shimGetDisplayMedia: function(window, preferredMediaSource) {\n    if ('getDisplayMedia' in window.navigator) {\n      return;\n    }\n    navigator.getDisplayMedia = function(constraints) {\n      if (!(constraints && constraints.video)) {\n        var err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return navigator.mediaDevices.getUserMedia(constraints);\n    };\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/firefox/firefox_shim.js\n// module id = 22\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        InternalError: 'NotReadableError',\n        NotSupportedError: 'TypeError',\n        PermissionDeniedError: 'NotAllowedError',\n        SecurityError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: {\n        'The operation is insecure.': 'The request is not allowed by the ' +\n        'user agent or the platform in the current context.'\n      }[e.message] || e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n      onError(shimError_(e));\n    });\n  };\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      getUserMedia_(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n  if (browserDetails.version < 49) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      return origGetUserMedia(c).then(function(stream) {\n        // Work around https://bugzil.la/802326\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(function(track) {\n            track.stop();\n          });\n          throw new DOMException('The object can not be found here.',\n                                 'NotFoundError');\n        }\n        return stream;\n      }, function(e) {\n        return Promise.reject(shimError_(e));\n      });\n    };\n  }\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    if (browserDetails.version < 44) {\n      return getUserMedia_(constraints, onSuccess, onError);\n    }\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/firefox/getusermedia.js\n// module id = 23\n// module chunks = 0","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar utils = require('../utils');\n\nmodule.exports = {\n  shimLocalStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getLocalStreams = function() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n    }\n    if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getStreamById = function(id) {\n        var result = null;\n        if (this._localStreams) {\n          this._localStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        if (this._remoteStreams) {\n          this._remoteStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        return result;\n      };\n    }\n    if (!('addStream' in window.RTCPeerConnection.prototype)) {\n      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        if (this._localStreams.indexOf(stream) === -1) {\n          this._localStreams.push(stream);\n        }\n        var pc = this;\n        stream.getTracks().forEach(function(track) {\n          _addTrack.call(pc, track, stream);\n        });\n      };\n\n      window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n        if (stream) {\n          if (!this._localStreams) {\n            this._localStreams = [stream];\n          } else if (this._localStreams.indexOf(stream) === -1) {\n            this._localStreams.push(stream);\n          }\n        }\n        return _addTrack.call(this, track, stream);\n      };\n    }\n    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        var index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        var pc = this;\n        var tracks = stream.getTracks();\n        this.getSenders().forEach(function(sender) {\n          if (tracks.indexOf(sender.track) !== -1) {\n            pc.removeTrack(sender);\n          }\n        });\n      };\n    }\n  },\n  shimRemoteStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n    }\n    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n        get: function() {\n          return this._onaddstream;\n        },\n        set: function(f) {\n          if (this._onaddstream) {\n            this.removeEventListener('addstream', this._onaddstream);\n          }\n          this.addEventListener('addstream', this._onaddstream = f);\n        }\n      });\n      var origSetRemoteDescription =\n          window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n        var pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(function(stream) {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              var event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n    }\n  },\n  shimCallbacksAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    var prototype = window.RTCPeerConnection.prototype;\n    var createOffer = prototype.createOffer;\n    var createAnswer = prototype.createAnswer;\n    var setLocalDescription = prototype.setLocalDescription;\n    var setRemoteDescription = prototype.setRemoteDescription;\n    var addIceCandidate = prototype.addIceCandidate;\n\n    prototype.createOffer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    prototype.createAnswer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    var withCallback = function(description, successCallback, failureCallback) {\n      var promise = setLocalDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setLocalDescription = withCallback;\n\n    withCallback = function(description, successCallback, failureCallback) {\n      var promise = setRemoteDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setRemoteDescription = withCallback;\n\n    withCallback = function(candidate, successCallback, failureCallback) {\n      var promise = addIceCandidate.apply(this, [candidate]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.addIceCandidate = withCallback;\n  },\n  shimGetUserMedia: function(window) {\n    var navigator = window && window.navigator;\n\n    if (!navigator.getUserMedia) {\n      if (navigator.webkitGetUserMedia) {\n        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n      } else if (navigator.mediaDevices &&\n          navigator.mediaDevices.getUserMedia) {\n        navigator.getUserMedia = function(constraints, cb, errcb) {\n          navigator.mediaDevices.getUserMedia(constraints)\n          .then(cb, errcb);\n        }.bind(navigator);\n      }\n    }\n  },\n  shimRTCIceServerUrls: function(window) {\n    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n    var OrigPeerConnection = window.RTCPeerConnection;\n    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        var newIceServers = [];\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n          var server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n    // wrap static methods. Currently just generateCertificate.\n    if ('generateCertificate' in window.RTCPeerConnection) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n  },\n  shimTrackEventTransceiver: function(window) {\n    // Add event.transceiver member over deprecated event.receiver\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        ('receiver' in window.RTCTrackEvent.prototype) &&\n        // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n        // defined for some reason even when window.RTCTransceiver is not.\n        !window.RTCTransceiver) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function() {\n          return {receiver: this.receiver};\n        }\n      });\n    }\n  },\n\n  shimCreateOfferLegacy: function(window) {\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n    window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\n      var pc = this;\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n        }\n        var audioTransceiver = pc.getTransceivers().find(function(transceiver) {\n          return transceiver.sender.track &&\n              transceiver.sender.track.kind === 'audio';\n        });\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          pc.addTransceiver('audio');\n        }\n\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n        }\n        var videoTransceiver = pc.getTransceivers().find(function(transceiver) {\n          return transceiver.sender.track &&\n              transceiver.sender.track.kind === 'video';\n        });\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            videoTransceiver.setDirection('sendonly');\n          } else if (videoTransceiver.direction === 'recvonly') {\n            videoTransceiver.setDirection('inactive');\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          pc.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(pc, arguments);\n    };\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/safari/safari_shim.js\n// module id = 24\n// module chunks = 0","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\nvar utils = require('./utils');\n\nmodule.exports = {\n  shimRTCIceCandidate: function(window) {\n    // foundation is arbitrarily chosen as an indicator for full support for\n    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n    if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n        window.RTCIceCandidate.prototype)) {\n      return;\n    }\n\n    var NativeRTCIceCandidate = window.RTCIceCandidate;\n    window.RTCIceCandidate = function(args) {\n      // Remove the a= which shouldn't be part of the candidate string.\n      if (typeof args === 'object' && args.candidate &&\n          args.candidate.indexOf('a=') === 0) {\n        args = JSON.parse(JSON.stringify(args));\n        args.candidate = args.candidate.substr(2);\n      }\n\n      if (args.candidate && args.candidate.length) {\n        // Augment the native candidate with the parsed fields.\n        var nativeCandidate = new NativeRTCIceCandidate(args);\n        var parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n        var augmentedCandidate = Object.assign(nativeCandidate,\n            parsedCandidate);\n\n        // Add a serializer that does not serialize the extra attributes.\n        augmentedCandidate.toJSON = function() {\n          return {\n            candidate: augmentedCandidate.candidate,\n            sdpMid: augmentedCandidate.sdpMid,\n            sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n            usernameFragment: augmentedCandidate.usernameFragment,\n          };\n        };\n        return augmentedCandidate;\n      }\n      return new NativeRTCIceCandidate(args);\n    };\n    window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n    // Hook up the augmented candidate in onicecandidate and\n    // addEventListener('icecandidate', ...)\n    utils.wrapPeerConnectionEvent(window, 'icecandidate', function(e) {\n      if (e.candidate) {\n        Object.defineProperty(e, 'candidate', {\n          value: new window.RTCIceCandidate(e.candidate),\n          writable: 'false'\n        });\n      }\n      return e;\n    });\n  },\n\n  // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n  shimCreateObjectURL: function(window) {\n    var URL = window && window.URL;\n\n    if (!(typeof window === 'object' && window.HTMLMediaElement &&\n          'srcObject' in window.HTMLMediaElement.prototype &&\n        URL.createObjectURL && URL.revokeObjectURL)) {\n      // Only shim CreateObjectURL using srcObject if srcObject exists.\n      return undefined;\n    }\n\n    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n    var streams = new Map(), newId = 0;\n\n    URL.createObjectURL = function(stream) {\n      if ('getTracks' in stream) {\n        var url = 'polyblob:' + (++newId);\n        streams.set(url, stream);\n        utils.deprecated('URL.createObjectURL(stream)',\n            'elem.srcObject = stream');\n        return url;\n      }\n      return nativeCreateObjectURL(stream);\n    };\n    URL.revokeObjectURL = function(url) {\n      nativeRevokeObjectURL(url);\n      streams.delete(url);\n    };\n\n    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                                              'src');\n    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n      get: function() {\n        return dsc.get.apply(this);\n      },\n      set: function(url) {\n        this.srcObject = streams.get(url) || null;\n        return dsc.set.apply(this, [url]);\n      }\n    });\n\n    var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n    window.HTMLMediaElement.prototype.setAttribute = function() {\n      if (arguments.length === 2 &&\n          ('' + arguments[0]).toLowerCase() === 'src') {\n        this.srcObject = streams.get(arguments[1]) || null;\n      }\n      return nativeSetAttribute.apply(this, arguments);\n    };\n  },\n\n  shimMaxMessageSize: function(window) {\n    if (window.RTCSctpTransport || !window.RTCPeerConnection) {\n      return;\n    }\n    var browserDetails = utils.detectBrowser(window);\n\n    if (!('sctp' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n        get: function() {\n          return typeof this._sctp === 'undefined' ? null : this._sctp;\n        }\n      });\n    }\n\n    var sctpInDescription = function(description) {\n      var sections = SDPUtils.splitSections(description.sdp);\n      sections.shift();\n      return sections.some(function(mediaSection) {\n        var mLine = SDPUtils.parseMLine(mediaSection);\n        return mLine && mLine.kind === 'application'\n            && mLine.protocol.indexOf('SCTP') !== -1;\n      });\n    };\n\n    var getRemoteFirefoxVersion = function(description) {\n      // TODO: Is there a better solution for detecting Firefox?\n      var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n      if (match === null || match.length < 2) {\n        return -1;\n      }\n      var version = parseInt(match[1], 10);\n      // Test for NaN (yes, this is ugly)\n      return version !== version ? -1 : version;\n    };\n\n    var getCanSendMaxMessageSize = function(remoteIsFirefox) {\n      // Every implementation we know can send at least 64 KiB.\n      // Note: Although Chrome is technically able to send up to 256 KiB, the\n      //       data does not reach the other peer reliably.\n      //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n      var canSendMaxMessageSize = 65536;\n      if (browserDetails.browser === 'firefox') {\n        if (browserDetails.version < 57) {\n          if (remoteIsFirefox === -1) {\n            // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n            // fragmentation.\n            canSendMaxMessageSize = 16384;\n          } else {\n            // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n            // messages. Thus, supporting ~2 GiB when sending.\n            canSendMaxMessageSize = 2147483637;\n          }\n        } else if (browserDetails.version < 60) {\n          // Currently, all FF >= 57 will reset the remote maximum message size\n          // to the default value when a data channel is created at a later\n          // stage. :(\n          // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n          canSendMaxMessageSize =\n            browserDetails.version === 57 ? 65535 : 65536;\n        } else {\n          // FF >= 60 supports sending ~2 GiB\n          canSendMaxMessageSize = 2147483637;\n        }\n      }\n      return canSendMaxMessageSize;\n    };\n\n    var getMaxMessageSize = function(description, remoteIsFirefox) {\n      // Note: 65536 bytes is the default value from the SDP spec. Also,\n      //       every implementation we know supports receiving 65536 bytes.\n      var maxMessageSize = 65536;\n\n      // FF 57 has a slightly incorrect default remote max message size, so\n      // we need to adjust it here to avoid a failure when sending.\n      // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n      if (browserDetails.browser === 'firefox'\n           && browserDetails.version === 57) {\n        maxMessageSize = 65535;\n      }\n\n      var match = SDPUtils.matchPrefix(description.sdp, 'a=max-message-size:');\n      if (match.length > 0) {\n        maxMessageSize = parseInt(match[0].substr(19), 10);\n      } else if (browserDetails.browser === 'firefox' &&\n                  remoteIsFirefox !== -1) {\n        // If the maximum message size is not present in the remote SDP and\n        // both local and remote are Firefox, the remote peer can receive\n        // ~2 GiB.\n        maxMessageSize = 2147483637;\n      }\n      return maxMessageSize;\n    };\n\n    var origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n      var pc = this;\n      pc._sctp = null;\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        var maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        var sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get: function() {\n            return maxMessageSize;\n          }\n        });\n        pc._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  },\n\n  shimSendThrowTypeError: function(window) {\n    if (!(window.RTCPeerConnection &&\n        'createDataChannel' in window.RTCPeerConnection.prototype)) {\n      return;\n    }\n\n    // Note: Although Firefox >= 57 has a native implementation, the maximum\n    //       message size can be reset for all data channels at a later stage.\n    //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n    function wrapDcSend(dc, pc) {\n      var origDataChannelSend = dc.send;\n      dc.send = function() {\n        var data = arguments[0];\n        var length = data.length || data.size || data.byteLength;\n        if (dc.readyState === 'open' &&\n            pc.sctp && length > pc.sctp.maxMessageSize) {\n          throw new TypeError('Message too large (can send a maximum of ' +\n            pc.sctp.maxMessageSize + ' bytes)');\n        }\n        return origDataChannelSend.apply(dc, arguments);\n      };\n    }\n    var origCreateDataChannel =\n      window.RTCPeerConnection.prototype.createDataChannel;\n    window.RTCPeerConnection.prototype.createDataChannel = function() {\n      var pc = this;\n      var dataChannel = origCreateDataChannel.apply(pc, arguments);\n      wrapDcSend(dataChannel, pc);\n      return dataChannel;\n    };\n    utils.wrapPeerConnectionEvent(window, 'datachannel', function(e) {\n      wrapDcSend(e.channel, e.target);\n      return e;\n    });\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/webrtc-adapter/src/js/common_shim.js\n// module id = 25\n// module chunks = 0","/**\r\n * Created with IntelliJ IDEA.\r\n * User: Deng.Qiang\r\n * Date: 2017/1/16\r\n * Time: 11:53\r\n * Author Deng Qiang\r\n * E-mail: dengqiang@fdclouds.com\r\n * The mythical alpaca haunt , devout prayer no bug.\r\n *\r\n * \\      A__A\r\n *  \\     (oo)\\__________\r\n *        (__)\\          )\\/\\\r\n *          ||- - - - -W-||\r\n *          ||          ||\r\n * = = = = = = = = = = = = = = =\r\n */\r\nvar Response = {};\r\n\r\nResponse.code_200 = 200;\r\nResponse.code_400 = 400;\r\nResponse.code_401 = 401;\r\nResponse.code_402 = 402;\r\nResponse.code_403 = 403;\r\nResponse.code_404 = 404;\r\nResponse.code_405 = 405;\r\nResponse.code_406 = 406;\r\nResponse.code_407 = 407;\r\nResponse.code_408 = 408;\r\nResponse.code_409 = 409;\r\nResponse.code_410 = 410;\r\nResponse.code_411 = 411;\r\nResponse.code_412 = 412;\r\nResponse.code_413 = 413;\r\nResponse.code_414 = 414;\r\nResponse.code_415 = 415;\r\nResponse.code_416 = 416;\r\nResponse.code_421 = 421;\r\nResponse.code_422 = 422;\r\nResponse.code_500 = 500;\r\nResponse.time_out_seconds = 60000;\r\n\r\nResponse.no_test_browser_type_or_version = '非测试通过的浏览器类型或版本',\r\nResponse.init_success = '初始化配置完成';\r\nResponse.init_failed = '尚未正确配置初始化信息,请检测后再尝试连接';\r\nResponse.params_error = '参数错误，缺少服务器地址';\r\nResponse.resolution_params_error = '参数错误，分辨率错误';\r\nResponse.username_password_except = '参数错误，用户名密码不能为空';\r\nResponse.callback_function_except = '参数错误，回调函数不是一个可执行的function';\r\nResponse.connection_except = '尚未接入服务器,请先登陆服务器建立链接';\r\nResponse.connection_lost = '链接已断开';\r\nResponse.mesage_server_except = '服务器配置错误,缺少MSS配置';\r\nResponse.sign_failed = '登录失败,请确认服务器地址是否正确';\r\nResponse.sign_username_password_error = '登录失败,请确认账号及密码是否正确';\r\nResponse.sign_success = '登陆服务器成功';\r\nResponse.sign_out_success = '已断开连接并退出登录';\r\nResponse.connect_server_success = '服务连接已连接';\r\nResponse.create_room_failed = '创建会议失败,请确认服务是否正常,请联系服务提供商';\r\nResponse.out_of_source_limit = '接入会议室失败,超出会议资源使用限制';\r\nResponse.conference_participant_time_error = '会议尚未开始,请在会议开始前15分钟内入场';\r\nResponse.conference_focus_except = '会议室未能正确分配到focus';\r\nResponse.conference_vb_except = '会议室未能正确分配到video bridge';\r\nResponse.without_usefull_video_device = '没有发现可用的视频输入设备';\r\nResponse.out_of_video_device_resolution = '视频输入设备分辨率不满足当前会议系统视频采集需求';\r\nResponse.join_room_failed = '接入会议室失败,请确认是否资源超限并联系服务提供商';\r\nResponse.join_room_success = '成功进入会议室';\r\nResponse.room_locked = '会议室已经被锁定';\r\nResponse.room_password_expect = '会议室不存在或密码错误';\r\nResponse.room_number_except = '参数错误，请输入正确的会议室号';\r\nResponse.room_number_and_nickname_except = '参数错误，请输入正确的会议室号和昵称';\r\nResponse.leave_room = '已经离开会议室';\r\nResponse.on_participant_joined = '有新的参会者进入到会议室';\r\nResponse.on_participant_audio_joined = '参会人员音频接入成功';\r\nResponse.on_participant_left = '有人离开了会议室';\r\nResponse.got_participants = '获取到参会人员列表';\r\nResponse.got_participant_info = '获取到参会人员信息';\r\nResponse.got_participant_info_failed = '未找到响应的参会人员';\r\nResponse.room_unopend = '会议室尚未开启或不存在';\r\nResponse.set_audio_toggle_complete = '设置开关音频完成';\r\nResponse.set_audio_toggle_failed = '设置开关音频失败';\r\nResponse.set_video_toggle_complete = '设置开关视频完成';\r\nResponse.set_video_toggle_failed = '设置开关视频失败';\r\nResponse.change_video_resolution_complete = '修改分辨率成功';\r\nResponse.unsupport_resolution = '你的设备不支持当前分辨率，请调低分辨率尝试';\r\nResponse.unfind_devices = '没有发现可用的音视频设备';\r\nResponse.find_devices = '获取到相应的设备列表';\r\nResponse.resource_except = '参数错误，缺少用户定位标识';\r\nResponse.out_of_authority = '对不起，你不是管理员，没有权限执行此操作';\r\nResponse.network_error = '网络错误，请确认服务是否正常并联系服务提供商';\r\nResponse.transferc_compere_success = '移交主持人权限成功';\r\nResponse.transferc_compere_failed = '移交主持人权限失败';\r\nResponse.compere_authority_own = '已经拥有主持人权限，无需再次获取';\r\nResponse.compere_password_except = '参数错误，请输入主持人密码';\r\nResponse.fetch_compere_error = '获取主持人权限失败，密码错误';\r\nResponse.fetch_compere_failed_exist = '获取权限失败,房间存在主持人';\r\nResponse.fetch_compere_success = '获取主持人权限成功';\r\nResponse.you_are_not_in_room = '你尚未进入会议室';\r\nResponse.you_are_in_a_room = '你正在开会或已经在会议室中,无法拨号';\r\nResponse.message_content_null = '消息不能为空';\r\nResponse.message_send_complete = '消息文本发送成功';\r\nResponse.receive_text_message_complete = '收到文本消息';\r\nResponse.becontrol_user_resource_except = '请输入被操作的用户唯一标识';\r\nResponse.manage_set_audio_mute_success = '主持人设置静音成功';\r\nResponse.manage_set_audio_mute_failed = '主持人设置静音失败';\r\nResponse.be_set_mute_complete = '被主持人修改音频状态';\r\nResponse.be_set_video_complete = '被主持人修改视频状态';\r\nResponse.participant_not_in_room = '参会人员已不再会议室';\r\nResponse.remove_participant_complete = '成功移除参会人员';\r\nResponse.remove_participant_failed = '移除参会人员失败';\r\nResponse.you_have_been_eject = '你已经被踢出了房间';\r\nResponse.video_device_id_except = '请传入视频输入设备ID';\r\nResponse.sip_gateway_except = '网关（Gateway）地址未正确配置';\r\nResponse.sip_number_except = '请输入被叫SIP号';\r\nResponse.call_sip_success = '呼叫视频终端成功';\r\nResponse.call_sip_failed = '呼叫视频终端失败';\r\nResponse.cancel_call_sip_success = '取消呼叫视频终端成功';\r\nResponse.cancel_call_sip_failed = '取消呼叫视频终端失败';\r\nResponse.call_sip_aready_in = '呼叫视频终端已经在会议室中';\r\nResponse.be_inviste_user_except = '请输入被邀请人的用户号';\r\nResponse.send_inviste_success = '发送邀请成功';\r\nResponse.send_inviste_failed = '发送邀请失败';\r\nResponse.on_ring_up = '收到邀请入会的响铃';\r\nResponse.on_ring_up_reply = '收到邀请入会的答复';\r\nResponse.get_my_jid = '获取到我的被叫ID';\r\nResponse.room_opened = '会议室已经开启';\r\nResponse.share_screen_success = '屏幕共享成功';\r\nResponse.share_screen_failed = '屏幕共享失败';\r\nResponse.share_screen_error = '屏幕共享失败,请联系服务提供商';\r\nResponse.share_screen_ended = '屏幕分享结束,感谢使用;请移除相应节点';\r\nResponse.share_app_except = '请传入需要分享的应用路径';\r\nResponse.share_app_completed = '成功(开始/关闭)共享应用';\r\nResponse.on_stream_added = '收到新的流增加到连接中';\r\nResponse.on_stream_added = '收到新的流增加到连接中';\r\nResponse.second_stream_except = '需要添加的流不存在';\r\nResponse.lock_or_unlock_room_completed = '锁定/解锁房间完成';\r\nResponse.lock_or_unlock_room_failed = '锁定/解锁房间失败';\r\nResponse.display_mode_execpet = '请传入需要切换的分屏模式';\r\nResponse.display_mode_change_complete = '切换显示模式成功';\r\nResponse.display_mode_change_failed = '切换显示模式失败';\r\nResponse.on_grant_admin_completed = '被授权了主持人权限';\r\nResponse.on_remove_admin_completed = '主持人权限被会控收回';\r\nResponse.dispaly_block_source_except = '请传入正确的新主屏';\r\nResponse.lock_main_display_complete = '切换主屏完成';\r\nResponse.lock_main_display_failed = '切换主屏失败';\r\nResponse.main_display_block_changed = '主屏资源已经被更改';\r\nResponse.order_change_resolution_receiver_except = '需要修改分辨率的用户ID不能为空';\r\nResponse.order_change_resolution_resulotion_except = '需要修改到的分辨率不能为空';\r\nResponse.order_change_resolution_resulotion_complete = '发送修改分辨率通知成功';\r\nResponse.order_change_resolution_resulotion_failed = '发送修改分辨率通知失败';\r\nResponse.on_order_change_resolution_order = '收到修改分辨率通知';\r\nResponse.nickname_except = '请输入正确的用户昵称';\r\nResponse.init_moderator_complete = '初始化权限完成';\r\nResponse.init_moderator_failed = '初始化权限失败';\r\nResponse.invite_time_out = '请求超时,被叫无人接听';\r\nResponse.reply_invite_time_out = '请求超时,对方已挂机';\r\nResponse.reject_invite_msg = '已拒绝呼叫';\r\nResponse.response_invite_msg_complete = '已处理呼叫信息';\r\nResponse.get_my_friends_list = '获取到我的好友列表';\r\nResponse.send_hard_remove_strem_msg = '流已从连接中被移除';\r\nResponse.local_stream_ssrc_updated = '本地流SSRC已经更新';\r\nResponse.with_moderator_status_changed = '存在主持人状态发生变化';\r\nResponse.get_user_media_success = '获取到流媒体资源';\r\nResponse.get_user_media_failed = '获取流媒体资源失败';\r\nResponse.audio_output_except = '音频输出设备不正确';\r\nResponse.audio_output_change_completed = '音频输出设备已改变';\r\nResponse.audio_input_change_completed = '音频输入设备已改变';\r\nResponse.audio_input_change_failed = '音频输入设备切换失败';\r\nResponse.room_kill_by_manager = '管理员关闭了会议室';\r\nResponse.room_lock_status_change = '房间已';\r\nResponse.participant_status_update = '参会用户信息更新';\r\nResponse.manis_recorder_status_changed = 'Manis recorder status changed ';\r\nResponse.hands_up_send_success = '举手消息已发送';\r\nResponse.hands_up_send_failed = '举手发送失败';\r\nResponse.on_hands_up_msg = '收到有人举手消息';\r\nResponse.response_hands_up_msg_success = '答复举手消息成功';\r\nResponse.response_hands_up_msg_failed = '答复举手消息失败';\r\nResponse.response_hands_up_action_error = '响应参数中action错误';\r\nResponse.on_hands_up_response = '收到举手响应消息';\r\nResponse.ring_call_request_in_processed_sent_success = '呼叫消息已处理消息已发送';\r\nResponse.ring_call_request_in_processed_sent_failed = '呼叫消息已处理消息发送失败';\r\nResponse.ring_call_request_in_processed = '呼叫消息在其他终端上已处理';\r\nResponse.media_stream_except = '仅发送模式流媒体资源不能为空';\r\nResponse.room_countdown = '会议房间预约时间即将到期,请确认是否需要延长会议时间';\r\nResponse.room_extend_time_require = '请输入合法的延长时间,单位为分钟';\r\nResponse.room_extend_time_success = '会议延长时间成功';\r\nResponse.room_extend_time_failed = '会议延长时间失败';\r\nResponse.on_room_model_change_to_audio_only = '获取本地视频失败,自动尝试音频方式入会';\r\nResponse.request_participants_sort_complete = '请求人员重新排序成功';\r\nResponse.participants_sort_except = '窗口排序字段不能为空';\r\nResponse.on_participants_sort_change = '窗口排序发生了变化';\r\nResponse.get_phone_number_success = '获取到需要呼叫的电弧号码';\r\nResponse.get_phone_number_failed = '获取需要呼叫的电话号码失败';\r\nResponse.get_phone_number_except = '请输入需要呼叫的电话号码';\r\nResponse.local_stream_except = '本地媒体资源不能为空';\r\nResponse.remove_local_stream_failed = '移出本地流媒体资源失败';\r\nResponse.system_upgrade_notice = '系统升级';\r\nResponse.other_participant_except = '等待其他人员接入后才可以使用';\r\nResponse.add_local_stream_without_negiration_success = '未协商加入本地视频成功';\r\nResponse.annotation_action_except = '画图板动作不能为空';\r\nResponse.encrypt_string_except = '请输入需要加密的字符串';\r\n\r\n\r\nmodule.exports = Response;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/manis.response.js\n// module id = 26\n// module chunks = 0","/**\r\n * Created by Deng.Qiang on 2016/12/20.\r\n *\r\n * 公共方法\r\n *\r\n */\r\n\r\n// var Status = require('./manis.status');\r\nvar ManisResponse = require('./manis.response');\r\nvar ErrorCode = require('./errorCode');\r\nvar ms = require('./strophe/plugins/manis.utils');\r\nvar Encrypt = require('jsencrypt');\r\n\r\nvar publicFunctions = {\r\n\r\n  publicKey: 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDOkK1uFnwLtdDi29TlP7NQJV8Mqfja8z5bYdeaIqCzMIFxABq6+Z48HyhH0CiUinpO3hv3KXdQOmEnern/1HLtvneLMoWp2hSN0TVkrjHQbHusq9rbmZH7hUsqGhBLTfSUVSpuOsY/x+zXEFc1VxQBrwLuIZT18kjKBFgqPSEnewIDAQAB',\r\n\r\n  currentMainResource: '',\r\n  currentMainSSRC: '',\r\n\r\n  Constraints_1080: {width: {exact: 1920}, height: {exact: 1080}},\r\n  Constraints_720: {width: {exact: 1280}, height: {exact: 720}},\r\n  Constraints_768: {width: {exact: 1024}, height: {exact: 768}},\r\n  Constraints_540: {width: {exact: 960}, height: {exact: 540}},\r\n  Constraints_480: {width: {exact: 640}, height: {exact: 480}},\r\n  Constraints_360: {width: {exact: 640}, height: {exact: 360}},\r\n  Constraints_240: {width: {exact: 320}, height: {exact: 240}},\r\n  Constraints_180: {width: {exact: 320}, height: {exact: 180}},\r\n\r\n  /**\r\n   * 根据分辨率计算获取约束和带宽\r\n   * @param withAudio\r\n   * @param withVideo\r\n   * @param audioInput\r\n   * @param videoInput\r\n   * @param videoResolution\r\n   * @returns {{audio: *, video: *}}\r\n   */\r\n  getConstraintsByResolution: function(withAudio, withVideo, audioInput, videoInput, videoResolution){\r\n    var _this = this;\r\n    var constraints = {\r\n      audio: withAudio ? {} : false,\r\n      video: withVideo ? {} : false\r\n    };\r\n    if(withVideo === true && videoResolution){\r\n      var resolution = ms.getResolution();\r\n      resolution.forEach(function(obj){\r\n          if (obj.height.exact == videoResolution) {\r\n              constraints.video = { width: obj.width, height: obj.height};\r\n              config.videoBandwidth =  _this.getVideoBandwidthByResolution(videoResolution) ? _this.getVideoBandwidthByResolution(videoResolution) : obj.videoBandwidth;\r\n              return;\r\n          }\r\n      });\r\n    }\r\n    if(withAudio === true){\r\n      var aDevice =  audioInput ? audioInput : undefined;\r\n      var cons = '{\"optional\":[{\"sourceId\":\"'+aDevice+'\"},{\"echoCancellation\":true},{\"googEchoCancellation\":true},{\"googAutoGainControl\":true},{\"googNoiseSuppression\":true},{\"googHighpassFilter\":true},{\"googNoiseSuppression2\":true},{\"googEchoCancellation2\":true},{\"googAutoGainControl2\":true},{\"googTypingNoiseDetection\":true}]}'\r\n      var audioConstraints =  JSON.parse(cons)\r\n      constraints.audio = audioConstraints;\r\n    }\r\n    if(withVideo === true){\r\n      constraints.video.deviceId =  videoInput ? {exact: videoInput} : undefined;\r\n      constraints.video.frameRate = { max: 30 , min: 20};\r\n    }\r\n    console.log(\"=========constraints====\",constraints);\r\n    return constraints;\r\n  },\r\n\r\n  /**\r\n   *\r\n   * @param resolution\r\n   * @returns {*}\r\n   */\r\n  getVideoBandwidthByResolution: function(resolution){\r\n    resolution = resolution.toString();\r\n    var videoBandwidth = null;\r\n    var rbwc = config.rbwc;\r\n    if(!rbwc || !rbwc.length){\r\n      return videoBandwidth;\r\n    }\r\n    for(var i = 0; i < rbwc.length; i++){\r\n      var item = rbwc[i];\r\n      if(item.height == resolution){\r\n        videoBandwidth = item.bandwidth;\r\n      }\r\n    }\r\n    return videoBandwidth;\r\n  },\r\n\r\n  /**\r\n   * 浏览器是否支持localStorage\r\n   *\r\n   * @returns {boolean}\r\n   */\r\n  supportsLocalStorage: function () {\r\n    try {\r\n      return 'localStorage' in window && window.localStorage !== null;\r\n    } catch (e) {\r\n      console.log(\"localstorage is not supported\");\r\n      return false;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 生成唯一标识\r\n   * @returns {*}\r\n   */\r\n  generateUniqueId: function () {\r\n    function _p8() {\r\n      return (Math.random().toString(16) + \"000000000\").substr(2, 8);\r\n    }\r\n\r\n    return _p8() + _p8() + _p8() + _p8();\r\n  }\r\n  ,\r\n\r\n  /**\r\n   * Checks whether the audio is muted or not.\r\n   * @returns {boolean} true if audio is muted and false if not.\r\n   */\r\n  isAudioMuted: function () {\r\n    var localAudio = connection.jingle.localAudio;\r\n    for (var idx = 0; idx < localAudio.getAudioTracks().length; idx++) {\r\n      if (localAudio.getAudioTracks()[idx].enabled === true)\r\n        return false;\r\n    }\r\n    return true;\r\n  }\r\n  ,\r\n\r\n  isVideoMuted: function () {\r\n    var tracks = connection.jingle.localVideo.getVideoTracks();\r\n    var mute = true;\r\n\r\n    for (var i = 0; i < tracks.length; ++i) {\r\n      if (tracks[i].enabled) {\r\n        mute = false;\r\n        break;\r\n      }\r\n    }\r\n    return mute;\r\n  },\r\n\r\n  setAdmin: function (obj) {\r\n    if (obj) {\r\n      config.role = 'CRUO';\r\n    } else {\r\n      config.role = 'NONE';\r\n    }\r\n  }\r\n  ,\r\n\r\n  /**\r\n   *  判断角色是否主持人\r\n   * @returns {boolean}\r\n   */\r\n  isAdmin: function () {\r\n    if (config.role == 'CRUO' || config.role == 'CRUA') {\r\n      return true;\r\n    } else if (config.role == 'CRUM') {\r\n      return false;\r\n    }\r\n    return false;\r\n  },\r\n  /**\r\n   * 初始化主持人\r\n   * @param callback\r\n   */\r\n  initModerator: function (callback) {\r\n    var self = this;\r\n    try {\r\n      if (typeof(config.getroomnode) == \"function\") {\r\n        var roomNum = config.getroomnode();\r\n      } else if (window.roomName != null) {\r\n        var roomNum = window.roomName.split('@')[0];\r\n      } else {\r\n        var roomNum = null;\r\n      }\r\n      if (roomNum) {\r\n        var _header = this.authoredHeader()\r\n        $.ajax({\r\n          url: window.serverPath + \"/user/initModerator?j=\" + connection.jid + \"&r=\" + roomNum,\r\n          // dataType: 'jsonp',\r\n          dataType: 'json',\r\n          processData: false,\r\n          headers: _header,\r\n          type: 'get',\r\n          async: false,\r\n          success: function (rs) {\r\n            if (rs.code == 200) {\r\n              config.role = rs.obj[0];\r\n              var isModerator = self.isAdmin();\r\n              connection.emuc.addConfigRoleToPresence(config.role);\r\n              connection.emuc.addIsModeratorToPresence(isModerator);\r\n              connection.emuc.sendPresence();\r\n              // update myself 'is_moderator' status\r\n              for(var i = 0 ; i < window.participants.length; i++){\r\n                var pt = window.participants[i];\r\n                if(pt.jid == connection.jid){\r\n                  pt.is_moderator = isModerator;\r\n                  window.participants[i] = pt;\r\n                }\r\n              }\r\n              callback({\r\n                code: ManisResponse.code_200,\r\n                msg: ManisResponse.init_moderator_complete,\r\n                response: isModerator,\r\n                master: Strophe.getResourceFromJid(rs.obj[1]),\r\n                errorCode: ErrorCode.no_error\r\n              });\r\n            }\r\n          },\r\n          error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n            callback({\r\n              code: ManisResponse.code_500,\r\n              msg: ManisResponse.init_moderator_failed,\r\n              errorCode: ErrorCode.init_moderator_right_failed\r\n            });\r\n          }\r\n        });\r\n      }\r\n    } catch (e) {\r\n      callback({\r\n        code: ManisResponse.code_500,\r\n        msg: ManisResponse.init_moderator_failed,\r\n        errorCode: ErrorCode.api_fetch_failed\r\n      });\r\n    }\r\n\r\n  },\r\n\r\n  setAudioMute: function (mute, successCallback, errorCallback) {\r\n    try {\r\n        if (mute == this.isAudioMuted()) {\r\n          successCallback();\r\n          return true;\r\n        }\r\n        // It is not clear what is the right way to handle multiple tracks.\r\n        // So at least make sure that they are all muted or all unmuted and\r\n        // that we send presence just once.\r\n        var localAudioTracks = connection.jingle.localAudio.getAudioTracks();\r\n        if (localAudioTracks.length > 0) {\r\n            for (var idx = 0; idx < localAudioTracks.length; idx++) {\r\n                localAudioTracks[idx].enabled = !mute;\r\n            }\r\n        }\r\n        // isMuted is the opposite of audioEnabled\r\n        connection.emuc.addAudioInfoToPresence(mute);\r\n        connection.emuc.sendPresence();\r\n        $(document).trigger('audiomuted.muc', [connection.jid, mute.toString()]);\r\n        if(successCallback) {\r\n            successCallback();\r\n        }\r\n    } catch (e) {\r\n      if(errorCallback){\r\n        errorCallback(e);\r\n      }\r\n    }\r\n  },\r\n\r\n\r\n  setVideoMute: function (mute, successCallback, errorCallback) {\r\n    try{\r\n      if(mute == this.isVideoMuted()){\r\n        successCallback();\r\n        return true;\r\n      }\r\n\r\n      var localVideoTracks = connection.jingle.localVideo.getVideoTracks();\r\n      if (localVideoTracks.length > 0) {\r\n        for (var idx = 0; idx < localVideoTracks.length; idx++) {\r\n          localVideoTracks[idx].enabled = !mute;\r\n        }\r\n      }\r\n      connection.emuc.addVideoInfoToPresence(mute);\r\n      connection.emuc.sendPresence();\r\n      // $(document).trigger('videomuted.muc',[connection.jid, mute.toString()]);\r\n      // if(!mute){\r\n      //   var session = window.activecall;\r\n      //   if (session) {\r\n      //     session.setVideoMute(mute, function (muteResult) {\r\n      //       console.log('hand session set video mute result: ', muteResult);\r\n      //     }, null)\r\n      //   }\r\n      // }\r\n      if(successCallback){\r\n          successCallback();\r\n      }\r\n    }catch (e) {\r\n      if(errorCallback){\r\n        errorCallback(e);\r\n      }\r\n    }\r\n  },\r\n\r\n\r\n  /**\r\n   *\r\n   * @param jid\r\n   * @returns {*}\r\n   */\r\n  getUserInfoByJid: function (jid) {\r\n    if (window.participants.length) {\r\n      for (var k = 0; k < window.participants.length; k++) {\r\n        var p = window.participants[k];\r\n        if (p.resource == Strophe.getResourceFromJid(jid)) {\r\n          // hide jid\r\n          return {\r\n            nickname: p.nickname,\r\n            resource: p.resource,\r\n            jid: jid\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return {resource: Strophe.getResourceFromJid(jid), nickname: '', jid: jid};\r\n  }\r\n  ,\r\n\r\n  /**\r\n   * 通过resource获取用户\r\n   * @param resource\r\n   * @returns {*}\r\n   */\r\n  getUserByResource: function (resource) {\r\n    if (window.participants.length) {\r\n      for (var k = 0; k < window.participants.length; k++) {\r\n        var p = window.participants[k];\r\n        if (p.resource == resource) {\r\n          // hide jid\r\n          return p;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  ,\r\n\r\n  /**\r\n   * 判断是否已经已进入会议室\r\n   * @returns {boolean}\r\n   */\r\n  isInRoom: function () {\r\n    if (connection.emuc.myroomjid != null && window.participants.length > 0) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  ,\r\n\r\n  /**\r\n   *\r\n   * @param resource\r\n   * @returns {{resolutionId: string, uploadPackageLostId: string, downloadPackageLostId: string, uploadBitrateId: string, downloadBitrateId: string}}\r\n   */\r\n  generateStatusNode: function (resource) {\r\n    var status = {\r\n      resolutionId: 'resolution_' + resource,\r\n      uploadPackageLostId: 'upload_package_lost_' + resource,\r\n      downloadPackageLostId: 'download_package_lost_' + resource,\r\n      uploadBitrateId: 'upload_bitrate_' + resource,\r\n      downloadBitrateId: 'download_bitrate_' + resource,\r\n    };\r\n    return status;\r\n  },\r\n\r\n  /**\r\n   *\r\n   * @param mode\r\n   * @param callback\r\n   */\r\n  updateDisplayMode: function(mode, callback){\r\n    var _header = this.authoredHeader();\r\n    $.ajax({\r\n      url: window.serverPath + \"/clientApi/splitScreen/\"+config.r+\"?userJid=\" + connection.jid + \"&splitScreen=\" + mode,\r\n      // dataType: 'jsonp',\r\n      processData: false,\r\n      dataType: 'json',\r\n      headers: _header,\r\n      type: 'get',\r\n      async: false,\r\n      success: function (rs) {\r\n        if (rs.code == 200) {\r\n          console.log('update display mode success! ');\r\n          callback({\r\n            code: rs.code,\r\n            msg: ManisResponse.display_mode_change_complete,\r\n            errorCode: ErrorCode.no_error\r\n          })\r\n        }else {\r\n          callback({\r\n            code: rs.code,\r\n            msg: ManisResponse.display_mode_change_failed,\r\n            errorCode: ErrorCode.display_model_broadcast_failed\r\n          })\r\n        }\r\n      },\r\n      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n        console.error('set display mode failure!', XMLHttpRequest, textStatus, errorThrown);\r\n        callback({\r\n          code: textStatus,\r\n          msg: ManisResponse.display_mode_change_failed,\r\n          errorCode: ErrorCode.display_model_broadcast_failed\r\n        })\r\n      }\r\n    });\r\n  },\r\n\r\n  sendChangeDisplayModeMsg: function (mode, callback, mainJid) {\r\n    var msg = $msg({to: connection.emuc.roomjid, type: 'groupchat'});//grant\r\n    msg.c('body', {\r\n      xmlns: 'http://igniterealtime.org/protocol/splitScreen',\r\n      jid: mainJid\r\n    }).t(mode).up();\r\n    // console.log('send change display mode msg : ', msg.tree());\r\n    try {\r\n      window.connection.send(msg);\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.display_mode_change_complete,\r\n        response: mode,\r\n        errorCode: ErrorCode.no_error\r\n      });\r\n    } catch (e) {\r\n      callback({\r\n        code: ManisResponse.code_500,\r\n        msg: ManisResponse.display_mode_change_failed,\r\n        errorCode: ErrorCode.display_model_broadcast_failed\r\n      });\r\n    }\r\n  },\r\n\r\n  /**\r\n   *\r\n   * @param objectiveJid\r\n   * @param isScreen\r\n   * @param callback\r\n   */\r\n  updateMainBlockSource: function(objectiveJid, isScreen, callback){\r\n    var _header = this.authoredHeader();\r\n    $.ajax({\r\n      url: window.serverPath + \"/clientApi/stage/\"+config.r+\"?userJid=\" + connection.jid + \"&stageJid=\" + objectiveJid + '&screen=' + isScreen,\r\n      // dataType: 'jsonp',\r\n      dataType: 'json',\r\n      processData: false,\r\n      headers: _header,\r\n      type: 'get',\r\n      async: false,\r\n      success: function (rs) {\r\n        if (rs.code == 200) {\r\n          console.log('update stage success! ');\r\n          callback({\r\n            code: rs.code,\r\n            msg: ManisResponse.lock_main_display_complete,\r\n            errorCode: ErrorCode.no_error\r\n          })\r\n        }else {\r\n          callback({\r\n            code: rs.code,\r\n            msg: ManisResponse.lock_main_display_failed,\r\n            errorCode: ErrorCode.main_display_change_failed\r\n          })\r\n        }\r\n      },\r\n      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n        console.error('set stage failure!', XMLHttpRequest, textStatus, errorThrown);\r\n        callback({\r\n          code: textStatus,\r\n          msg: ManisResponse.lock_main_display_failed,\r\n          errorCode: ErrorCode.main_display_change_failed\r\n        })\r\n      }\r\n    });\r\n  },\r\n\r\n  sendChangeMainBlockSourceMsg: function (objectiveSource, objectSSRC, callback, isScreen) {\r\n    var isScreenStream = isScreen ? true : false;\r\n    var msg = $msg({to: connection.emuc.roomjid, type: 'groupchat'});//grant\r\n    var participant = this.getUserByResource(objectiveSource);\r\n    if (participant && participant.jid) {\r\n      var _jid = participant.jid;\r\n    } else {\r\n      var _jid = connection.emuc.roomJid + '/' + objectiveSource;\r\n    }\r\n    msg.c('body', {\r\n      xmlns: 'http://igniterealtime.org/protocol/stage',\r\n      jid: _jid,\r\n      screen: isScreenStream\r\n    }).t(objectiveSource).up();\r\n    msg.c('resource', {xmlns: 'http://igniterealtime.org/protocol/endpoint'}).t(objectiveSource).up();\r\n    if (objectSSRC) {\r\n      msg.c('ssrc', {xmlns: 'http://igniterealtime.org/protocol/streamssrc'}).t(objectSSRC).up();\r\n    }\r\n    // console.log('send change display mode msg : ', msg.tree());\r\n    window.connection.send(msg);\r\n    callback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.lock_main_display_complete,\r\n      response: objectiveSource,\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n    $(document).trigger('manis.main.display.changed',[objectiveSource, objectSSRC]);\r\n    var _this = this;\r\n    if(_this.currentMainResource != objectiveSource || _this.currentMainSSRC != objectSSRC){\r\n      try {\r\n        var _header = _this.authoredHeader();\r\n        $.ajax({\r\n          url: window.serverPath + \"/user/setStage?j=\" + _jid + \"&r=\" + window.roomName.split('@')[0],\r\n          // dataType: 'jsonp',\r\n          dataType: 'json',\r\n          processData: false,\r\n          headers: _header,\r\n          type: 'get',\r\n          async: false,\r\n          success: function (rs) {\r\n            if (rs.code == 200) {\r\n              console.log('set stage success! ');\r\n              _this.currentMainResource = objectiveSource;\r\n              _this.currentMainSSRC = objectSSRC;\r\n            }\r\n          },\r\n          error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n            console.error('set stage failure!', XMLHttpRequest, textStatus, errorThrown);\r\n          }\r\n        });\r\n      } catch (e) {\r\n      }\r\n    }\r\n  },\r\n\r\n  sendHardRemoveStreamMsg: function (objectiveSource, objectSSRC, callback) {\r\n    var msg = $msg({to: connection.emuc.roomjid, type: 'groupchat'});//grant\r\n    msg.c('body', {\r\n      xmlns: 'http://igniterealtime.org/protocol/hardremove',\r\n      jid: connection.emuc.connection.jid\r\n    }).t(objectiveSource).up();\r\n    msg.c('resource', {xmlns: 'http://igniterealtime.org/protocol/endpoint'}).t(objectiveSource).up();\r\n    if (objectSSRC) {\r\n      msg.c('ssrc', {xmlns: 'http://igniterealtime.org/protocol/streamssrc'}).t(objectSSRC).up();\r\n    }\r\n    console.log('send hard remove stream msg : ', msg.tree());\r\n    window.connection.send(msg);\r\n    callback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.send_hard_remove_strem_msg,\r\n    });\r\n  },\r\n\r\n  keepAlive: function (userId, endpoint, time) {\r\n    var _headers = this.authoredHeader();\r\n    $.ajax({\r\n      url: window.serverPath + '/clientApi/keepAlive/'+userId+'/'+endpoint+'/'+time,\r\n      processData: false,\r\n      dataType: 'json',\r\n      type: 'get',\r\n      async: false,\r\n      headers: _headers,\r\n      success: function (rs) {\r\n        console.log('send keep alive request success : ', rs);\r\n        if (rs.mcode == 200) {\r\n          window.config.currentTimeMillis = rs.obj.currentTimeMillis;\r\n          window.config.token = rs.obj.token;\r\n        }\r\n      },\r\n      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n        console.error('send keep alive request failed :', XMLHttpRequest, textStatus, errorThrown);\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n  requestDisplayParticipants: function(sortParticipants, callback){\r\n    var _header = this.authoredHeader();\r\n    $.ajax({\r\n      url: window.serverPath + '/clientApi/selectParticipants/' + config.r + '?participants=' + sortParticipants + '&userJid=' + connection.jid,\r\n      processData: false,\r\n      dataType: 'json',\r\n      headers: _header,\r\n      type: 'get',\r\n      async: false,\r\n      success: function (rs) {\r\n        console.log('send display sort request complete : ', rs);\r\n        callback({\r\n          code: ManisResponse.code_200,\r\n          msg: ManisResponse.request_participants_sort_complete,\r\n          errorCode: ErrorCode.no_error,\r\n        })\r\n      },\r\n      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n        console.error('send display sort request failed :', XMLHttpRequest, textStatus, errorThrown);\r\n      }\r\n    })\r\n  },\r\n\r\n  /**\r\n   * @param nickname\r\n   * @param action\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  sendHandsUpMsg: function (nickname, action, successCallback, errorCallback) {\r\n    var _header = this.authoredHeader();\r\n    $.ajax({\r\n      url: window.serverPath + '/clientApi/handsUp/apply/' + config.r + '?userJid=' + connection.jid + '&nickname=' + nickname,\r\n      processData: false,\r\n      dataType: 'json',\r\n      type: 'get',\r\n      headers: _header,\r\n      async: false,\r\n      success: function (rs) {\r\n        console.log('send hands up request complete : ', rs);\r\n        if(rs.code == 200){\r\n          successCallback({\r\n            code: rs.code,\r\n            msg: ManisResponse.hands_up_send_success,\r\n          });\r\n        }else {\r\n          errorCallback({\r\n            code: rs.code,\r\n            msg: ManisResponse.hands_up_send_failed,\r\n          });\r\n        }\r\n      },\r\n      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n        console.error('send hands up request failed :', XMLHttpRequest, textStatus, errorThrown);\r\n        errorCallback({\r\n          code: textStatus,\r\n          msg: ManisResponse.hands_up_send_failed,\r\n        });\r\n      }\r\n    })\r\n  },\r\n\r\n  /**\r\n   * @param receiver\r\n   * @param action\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  responseHandsUpMsg: function (receiver, action, successCallback, errorCallback) {\r\n    var _header = this.authoredHeader();\r\n    $.ajax({\r\n      url: window.serverPath + '/clientApi/handsUp/' + action + '/' + config.r + '?userJid=' + receiver ,\r\n      processData: false,\r\n      dataType: 'json',\r\n      headers: _header,\r\n      type: 'get',\r\n      async: false,\r\n      success: function (rs) {\r\n        console.log('send ', action, ' hands up response complete : ', rs);\r\n        if(rs.code == 200){\r\n          successCallback({\r\n            code: rs.code,\r\n            msg: ManisResponse.response_hands_up_msg_success,\r\n          });\r\n        }else {\r\n          errorCallback({\r\n            code: rs.code,\r\n            msg: ManisResponse.response_hands_up_msg_failed,\r\n          });\r\n        }\r\n      },\r\n      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n        console.error('send ', action, ' hands up response failed :', XMLHttpRequest, textStatus, errorThrown);\r\n        errorCallback({\r\n          code: textStatus,\r\n          msg: ManisResponse.response_hands_up_msg_failed,\r\n        });\r\n      }\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 广播会议室锁定情况\r\n   * @param status\r\n   * @returns {boolean}\r\n   */\r\n  broadcastRoomLockStatus: function (status) {\r\n    var msg = $msg({to: connection.emuc.roomjid, type: 'groupchat'});\r\n    msg.c('body', {\r\n      xmlns: 'http://igniterealtime.org/protocol/roomlock',\r\n      jid: connection.emuc.connection.jid\r\n    });\r\n    msg.c('status').t(status).up().up();\r\n    window.connection.send(msg);\r\n  },\r\n\r\n  /**\r\n   * 获取呼叫电话号码的正确号码\r\n   * @param phone\r\n   * @param successCallback\r\n   * @param errorCallback\r\n   */\r\n  getPhoneNumber: function (phone, successCallback, errorCallback) {\r\n    var _header = this.authoredHeader();\r\n    $.ajax({\r\n      url: window.serverPath + '/clientApi/phone/' + phone + '?roomNumber=' + config.r + '&userJid=' + connection.jid ,\r\n      processData: false,\r\n      dataType: 'json',\r\n      type: 'get',\r\n      headers: _header,\r\n      async: false,\r\n      success: function (rs) {\r\n        console.log('send fet phone number response complete : ', rs);\r\n        if(rs.code == 200){\r\n          successCallback({\r\n            code: rs.code,\r\n            msg: ManisResponse.get_phone_number_success,\r\n            errorCode: ErrorCode.no_error,\r\n            response: rs.obj\r\n          });\r\n        }else {\r\n          errorCallback({\r\n            code: rs.code,\r\n            msg: ManisResponse.get_phone_number_failed,\r\n            errorCode: ErrorCode.fetch_ring_phone_number_failed,\r\n          });\r\n        }\r\n      },\r\n      error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n        console.error('send fet phone number response failed :', XMLHttpRequest, textStatus, errorThrown);\r\n        errorCallback({\r\n          code: textStatus,\r\n          msg: ManisResponse.get_phone_number_failed,\r\n          errorCode: ErrorCode.api_fetch_failed,\r\n        });\r\n      }\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 设置带宽,兼容协商与不重新协商\r\n   * @param bandWidth\r\n   * @param callback\r\n   */\r\n  setVideoBandwidth: function (bandWidth, callback) {\r\n    var _this = this;\r\n    config.videoBandwidth = bandWidth;\r\n    var conferenceHandler = window.activecall || null;\r\n    if(!conferenceHandler){\r\n      if(callback && typeof(callback) == 'function'){\r\n        callback();\r\n      }\r\n      return;\r\n    }\r\n    // var peerconnection = conferenceHandler.peerconnection.peerconnection;\r\n    // if (RTC.browser === 'chrome' &&\r\n    //   'RTCRtpSender' in window &&\r\n    //   'setParameters' in window.RTCRtpSender.prototype) {\r\n    //\r\n    //   var sender = _this.getSender(peerconnection.getSenders(), 'video') ;\r\n    //   var parameters = sender.getParameters();\r\n    //   parameters.encodings[0].maxBitrate = bandWidth * 1000;\r\n    //   sender.setParameters(parameters).then(function () {\r\n    //       if(callback && typeof(callback) == 'function'){\r\n    //         console.log('set video bandwidth without negotiate: ', bandWidth);\r\n    //         callback();\r\n    //       }\r\n    //     })\r\n    //     .catch(function(e){\r\n    //       console.error(e);\r\n    //     });\r\n    //   return;\r\n    // }else {\r\n    //   conferenceHandler.peerconnectionNegotiate(function () {\r\n    //     if(callback && typeof(callback) == 'function'){\r\n    //       callback();\r\n    //     }\r\n    //     return;\r\n    //   });\r\n    // }\r\n  },\r\n\r\n\r\n  /**\r\n   *  获取对应的sender\r\n   * @param senders\r\n   * @param type\r\n   * @returns {*}\r\n   */\r\n  getSender: function (senders, type) {\r\n    var returnSender = null;\r\n    if(!senders || !senders.length){\r\n      return returnSender;\r\n    }\r\n    for (var i = 0; i < senders.length; i++) {\r\n      var sender = senders[i];\r\n      if(sender && sender.track.kind == type){\r\n        returnSender = sender;\r\n      }\r\n    }\r\n    return returnSender;\r\n  },\r\n\r\n\r\n  setRoomAudioMuteStatus: function (mute, callback) {\r\n      var _header = this.authoredHeader();\r\n      $.ajax({\r\n          url: window.serverPath + '/clientApi/conferenceCtrl/'+ config.r + '?ctrlType=allAudio&userJid=' + connection.jid + '&status=' + mute ,\r\n          processData: false,\r\n          dataType: 'json',\r\n          headers: _header,\r\n          type: 'get',\r\n          success: function (rs) {\r\n              console.log('send room audio mute status complete : ', rs);\r\n              if(rs.code == 200){\r\n                  callback({\r\n                      code: rs.code,\r\n                      msg: ManisResponse.manage_set_audio_mute_success,\r\n                      errorCode: ErrorCode.no_error,\r\n                      response: rs.obj\r\n                  });\r\n              }else {\r\n                  callback({\r\n                      code: rs.code,\r\n                      msg: ManisResponse.manage_set_audio_mute_failed,\r\n                      errorCode: ErrorCode.operate_someone_audio_failed,\r\n                  });\r\n              }\r\n          },\r\n          error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n              console.error('send room audio mute status failed :', XMLHttpRequest, textStatus, errorThrown);\r\n              callback({\r\n                  code: textStatus,\r\n                  msg: ManisResponse.manage_set_audio_mute_failed,\r\n                  errorCode: ErrorCode.operate_someone_audio_failed,\r\n              });\r\n          }\r\n      })\r\n  },\r\n    \r\n    \r\n  getClientConfig: function (domain, callback) {\r\n      $.ajax({\r\n          url: window.serverPath + '/clientApi/config?domain='+ domain,\r\n          processData: false,\r\n          dataType: 'json',\r\n          type: 'get',\r\n          success: function (res) {\r\n              console.log('fetch client config complete : ', res);\r\n              if (res.mcode == 200) {\r\n                  config = Object.assign(config, res.obj);\r\n              }\r\n              if (callback) {\r\n                callback()\r\n              }\r\n          },\r\n          error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n              console.error('fetch client config  failed :', XMLHttpRequest, textStatus, errorThrown);\r\n          }\r\n      })\r\n  },\r\n\r\n  encryptStr: function (password) {\r\n      var self = this;\r\n      var encrypt = new Encrypt.JSEncrypt();\r\n      encrypt.setPublicKey(self.publicKey);\r\n      var encrypted = encrypt.encrypt(password);\r\n      // console.log('-----------passwordEncrypted----------', encrypted);\r\n      return encrypted;\r\n  },\r\n\r\n  authoredHeader: function () {\r\n    if (!window.connection || !window.config.token) {\r\n      return {}\r\n    }\r\n    return {\r\n      userJid: window.connection.jid,\r\n      token: window.config.token\r\n    }\r\n  }\r\n\r\n};\r\n\r\nmodule.exports = publicFunctions;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/manis.functions.js\n// module id = 27\n// module chunks = 0","var Code = {\r\n  no_error: '000000', // 无错误\r\n  no_test_browser_type_or_version: '300000', // 非测试通过的浏览器类型或版本\r\n  callback_except: '300001', // 回调函数缺失或类型错误\r\n  init_params_error: '300002', // 初始化参数错误,缺少服务器地址\r\n\r\n  username_except: '300103', // 用户名不能为空\r\n  user_password_except: '300104', // 用户密码不能为空\r\n  user_login_client_failed: '300105', // 用户登录失败\r\n  username_not_exist: '300106', // 用户名错误,用户不存在\r\n  user_client_auth_failed: '300107', // 用户密码错误,登录失败\r\n  user_login_status_error: '300108', // 用户状态错误\r\n  anonymous_login_failed: '300109', // 匿名登录失败\r\n  user_friends_fetch_failed: '300110', // 获取好友列表失败\r\n  user_out_of_service: '300111', // 服务已到期\r\n  user_has_been_block_up: '300112', // 用户已停用\r\n\r\n  message_server_except: '300201', // 缺少message_server配置\r\n  message_server_user_except: '300202', // 缺少mss user, 请确认已经登录授权\r\n  message_server_connect_failed: '300203', // mss 连接失败\r\n  mss_connection_except: '300204', // 缺少mss 连接,请确认是否已经建立相应的链接\r\n\r\n  conference_room_password_error: '300300', // 会议室密码不正确\r\n  conference_room_not_exist: '300301', // 会议室不存在\r\n  conference_room_locked: '300302', //会议室已锁定\r\n  conference_room_source_limit: '300303', // 超出会议资源使用限制\r\n  conference_room_participant_failed: '300304', // 加入会议室失败\r\n  conference_room_participant_out_time: '300305', // 未到可参会时间,会议前15分钟内方可入场\r\n  conference_room_focus_except: '300306', // 会议室缺少focus\r\n  conference_room_vb_except: '300307', // 会议室缺少video bridge\r\n  conference_room_participant_failed_unknown_response_code: '300308', // 加入会议室失败,未知的服务端返回码\r\n  conference_room_except: '300309', // 会议室房间号不正确\r\n  conference_room_nickname_except: '300310', // 参会昵称不正确\r\n  conference_room_not_participate: '300311', // 尚未加入到房间,不能进行房间内的操作\r\n  conference_room_un_open: '300312', // 会议室尚未开启\r\n  conference_room_wait_others: '300313', // 等待其他成员加入\r\n  conference_room_opened: '300314', // 会议室已经开启\r\n  will_ring_phone_number_except: '300315', // 需要呼叫的电话号码不能为空\r\n  fetch_ring_phone_number_failed: '300316', // 获取需要呼叫的电话号码失败\r\n\r\n  grant_admin_participant_except: '300401', // 被授予主持人权限的参会者不能为空\r\n  grant_admin_participant_failed: '300402', // 授权主持人失败\r\n  without_permission_for_the_operation: '300403', //无权执行此操作\r\n  grant_admin_participant_not_exist: '300404', // 被授予主持人权限的参会者不在会议室中或已离开\r\n  fetch_admin_password_except: '300405', // 获取主持人的密码不能为空\r\n  fetch_admin_failed_owen_it: '300406', // 您已经是主持人,无需重复获取\r\n  fetch_admin_failed: '300407', // 获取主持人权限失败\r\n  eject_participant_except: '300408', // 需要移除会议室的参会者不能为空\r\n  eject_participant_not_exist: '300409', // 需要移除会议室的参会者已经不在会议室中\r\n  eject_participant_failed: '300410', // 移除会议参会者失败\r\n  init_moderator_right_failed: '300411', // 初始化权限失败\r\n  hand_up_receiver_except: '300412', // 举手消息接收者不能为空\r\n  hand_up_send_failed: '300413', // 发送举手消息失败\r\n  hand_up_response_action_illegality: '300414', // 未知的举手响应\r\n  response_hands_up_msg_failed: '300415', // 响应举手请求失败\r\n  conference_delay_failed: '300416', // 会议延时失败\r\n  conference_delay_time_require: '300417', // 会议延时时长不能为空\r\n  fetch_admin_failed_wrong_password: '300418', // 获取主持人失败,密码错误\r\n  fetch_admin_failed_moderator_exist: '300419', //获取主持人权限失败,房间存在主持人\r\n\r\n  text_message_except: '300501', // 要发送的文本消息不能为空\r\n  private_text_message_receiver_not_exist: '300502', // 私信接收者不在会议室中\r\n\r\n  sip_gateway_except: '300601', // 网关（Gateway）地址未正确配置\r\n  sip_client_except: '300602', // 需要呼叫的视频终端不能为空\r\n  sip_call_in_progress: '300603', // 呼叫正在进行,请勿重复呼叫\r\n  sip_call_signalling_error: '300604', // 呼叫sip信令格式错误\r\n  sip_call_failed_error_password: '300605', // 呼叫sip失败,会议室密码错误\r\n  sip_call_hang_up: '300606', // sip已断开\r\n  sip_call_unknown_error: '300607', // sip呼叫未知服务端错误\r\n  sip_call_send_failed: '300608', // 呼叫消息发送失败\r\n\r\n  display_model_except: '300701', // 请传入需要变换的显示模式类型\r\n  display_model_broadcast_failed: '300702', // 显示模式广播失败\r\n  main_display_source_except: '300703', // 主屏资源id不能为空\r\n  participants_sort_except: '300704', // 请求排序字段不能为空\r\n  main_display_change_failed: '300705', // 主屏设置失败\r\n  annotation_action_except: '300801', // 画图板动作不能为空\r\n\r\n  audio_switch_mute_failed: '400101', // 设置音频开关失败\r\n  video_switch_mute_failed: '400102', // 设置视频开关失败\r\n  operate_someone_audio_participant_except: '400201', // 请传入要被操作音频开关的用户\r\n  operate_someone_audio_failed: '400202', // 主持人设置参会人员音频开关失败\r\n  operate_someone_video_participant_except: '400301', // 请传入要被操作视频开关的用户\r\n  operate_someone_video_failed: '400302', // 主持人设置参会人员视频开关失败\r\n  media_device_get_local_media_failed: '400401', // 获取本地视频失败\r\n  media_device_resolution_nonsupport: '400402', // 设备不支持当前会议系统最低需求\r\n  media_device_except: '400404', // 未发现可用的相应输入设备\r\n  change_video_input_device_except: '400405', // 需要切换的视频输入设备不能为空\r\n  change_resolution_not_match: '400406', // 不合法的分视频分辨率高度\r\n  change_audio_input_device_except: '400407', // 需要切换的音频输入设备不能为空\r\n  change_audio_input_device_failed: '400408', //切换音频输入设备失败\r\n  change_audio_output_device_except: '400409', // 需要切换的音频输出设备不能为空\r\n  second_stream_except: '400501', // 要双路流分享请传入第二路流\r\n  second_stream_share_failed: '400502', // 双路流分享失败\r\n  get_user_media_constraints_except: '400601', // 请传入获取流的配置对象\r\n  send_only_stream_except: '400701', // 仅发送模式输入流不能为空\r\n  local_stream_except: '400702', //需要增加的本地媒体资源不能为空\r\n  remove_local_stream_failed: '400702', // 移出本地媒体资源失败\r\n\r\n  api_fetch_failed: '500000', // 网络错误或连接服务超时\r\n  unknown_error: '500500', // 服务异常\r\n\r\n  invoke_receiver_except: '600101', // 被叫用户不能为空\r\n  invoke_send_failed: '600102', // 发送拨号信息失败\r\n  called_expired: '600103', // 呼叫已过期,对方已挂机\r\n  invoke_room_ready_receiver_except: '600104', // 通知房间已经准备就绪的被叫用户不能为空\r\n  send_room_ready_msg_failed: '600105', // 发送房间准备就绪消息失败\r\n  called_request_in_processed_sent_failed: '600106', // 广播被叫已处理失败\r\n\r\n  share_screen_extended_plugin_except: '700101', // 屏幕分享插件尚未安装\r\n  share_screen_fetch_stream_failed: '700102', // 捕获屏幕视频流失败\r\n  share_screen_stop_failed: '700103', // 结束屏幕分享失败\r\n  share_screen_nonsupport: '700104', // 当前浏览器版本不支持屏幕分享\r\n};\r\n\r\nmodule.exports = Code;\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/errorCode.js\n// module id = 28\n// module chunks = 0","var SDPUtil = require('./strophe.jingle.sdp.util');\r\nvar adapter = require('webrtc-adapter');\r\n\r\nvar _uniqueId = Math.round(Math.random() * 10000);\r\n\r\nvar ms = {\r\n    findValueByName: function (arr, name) {\r\n        for (var i = 0; i < arr.length; i++) {\r\n            if (arr[i].name == name) {\r\n                return arr[i][\"value\"];\r\n            }\r\n        }\r\n    },\r\n    getUniqueId: function (suffix) {\r\n        if (typeof (suffix) == \"string\" || typeof (suffix) == \"number\") {\r\n            return ++_uniqueId + \":\" + suffix;\r\n        } else {\r\n            return ++_uniqueId + \"\";\r\n        }\r\n    },\r\n    textToXML: function (text) {\r\n        var doc = null;\r\n        if (window['DOMParser']) {\r\n            var parser = new DOMParser();\r\n            doc = parser.parseFromString(text, 'text/xml');\r\n        } else if (window['ActiveXObject']) {\r\n            var doc = new ActiveXObject(\"MSXML2.DOMDocument\");\r\n            doc.async = false;\r\n            doc.loadXML(text);\r\n        } else {\r\n            throw Error('No DOMParser object found.');\r\n        }\r\n        return doc.firstChild;\r\n    },\r\n\r\n    ansToSessAcc: function (sess, contents) {\r\n        var sessionAccept = '<iq to=\"' + sess.peerjid + '\" type=\"set\" xmlns=\"jabber:client\" from=\"' + sess.connection.jid + '\" id=\"' + this.getUniqueId(\"sendIQ\") + '\">' +\r\n            '<jingle xmlns=\"urn:xmpp:jingle:1\" action=\"session-accept\" initiator=\"' + sess.initiator + '\" responder=\"' + sess.responder + '\" sid=\"' + sess.sid + '\">' +\r\n            '<attend xmlns=\"http://jitsi.org/protocol/colibri\" type=\"singlevoice\" endpoint=\"\"/>' +\r\n            '<group xmlns=\"urn:xmpp:jingle:apps:grouping:0\" semantics=\"BUNDLE\">' +\r\n            '<content name=\"audio\"/>' +\r\n            '<content name=\"video\"/>' +\r\n            '<content name=\"data\"/>' +\r\n            '</group>' +\r\n            contents +\r\n            '</jingle></iq>';\r\n        return this.textToXML(sessionAccept);\r\n    },\r\n\r\n    createDataNode: function (ufrag, pwd, fingerprints) {\r\n        var contentNode =\r\n            '<content creator=\"responder\" name=\"data\">' +\r\n            '<transport ufrag=\"' + ufrag + '\" pwd=\"' + pwd + '\" xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\">' +\r\n            '<sctpmap xmlns=\"urn:xmpp:jingle:transports:dtls-sctp:1\" number=\"5000\" protocol=\"webrtc-datachannel\" streams=\"1024\"/>' +\r\n            '<fingerprint hash=\"' + fingerprints[0].split(\":\")[1] + '\" xmlns=\"urn:xmpp:jingle:apps:dtls:0\" setup=\"active\">' + fingerprints[1] + '</fingerprint>' +\r\n            '</transport>' +\r\n            '</content>';\r\n        return contentNode;\r\n    },\r\n\r\n    createMediaNode: function (mediaName, mediaGroup, ssrc, cname, msid, ufrag, pwd, fingerprints) {\r\n        var contentNode =\r\n            '<content creator=\"responder\" name=\"' + mediaName + '\" senders=\"both\">' +\r\n            '<description xmlns=\"urn:xmpp:jingle:apps:rtp:1\" media=\"' + mediaName + '\" ssrc=\"' + ssrc + '\">';\r\n        contentNode += this.createPayloadNode(mediaName, mediaGroup);\r\n        contentNode += this.createSourceNode(mediaName, ssrc, cname, msid);\r\n        contentNode += '</description>' +\r\n            '<transport ufrag=\"' + ufrag + '\" pwd=\"' + pwd + '\" xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\">' +\r\n            '<fingerprint hash=\"' + fingerprints[0].split(\":\")[1] + '\" xmlns=\"urn:xmpp:jingle:apps:dtls:0\" setup=\"active\">' + fingerprints[1] + '</fingerprint>' +\r\n            '</transport>' +\r\n            '</content>';\r\n        return contentNode;\r\n\r\n    },\r\n\r\n    createSourceNode: function (mediaName, ssrc, cname, msid) {\r\n        var contentNode = '';\r\n        contentNode += this.createSourceParamsNode(ssrc, cname, msid);\r\n        contentNode += '<rtcp-mux/>';\r\n        if (mediaName == \"audio\") {\r\n            contentNode += '<rtp-hdrext xmlns=\"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0\" uri=\"urn:ietf:params:rtp-hdrext:ssrc-audio-level\" id=\"1\"/>';\r\n        } else {\r\n            contentNode +=\r\n                '<rtp-hdrext xmlns=\"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0\" uri=\"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\" id=\"3\"/>' +\r\n                '<rtp-hdrext xmlns=\"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0\" uri=\"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" id=\"5\"/>';\r\n        }\r\n        return contentNode;\r\n    },\r\n\r\n    createPayloadNode: function (mediaName, mediaGroup) {\r\n        var contentNode = '';\r\n        var rtpmap = SDPUtil.find_line(mediaGroup, \"a=rtpmap\").split(\":\")[1];\r\n        var rtpmap1 = rtpmap.split(\" \")[1];\r\n        if (mediaName == \"audio\") {\r\n            var _fmtp = SDPUtil.find_line(mediaGroup, \"a=fmtp\"); //;\r\n            if (_fmtp) {\r\n                var fmtpMus = _fmtp.split(\" \")[1].split(\";\");\r\n                contentNode +=\r\n                    '<payload-type id=\"' + rtpmap.split(\" \")[0] + '\" name=\"' + rtpmap1.split(\"/\")[0] + '\" clockrate=\"' + rtpmap1.split(\"/\")[1] + '\" channels=\"' + rtpmap1.split(\"/\")[2] + '\">' +\r\n                    '<parameter name=\"minptime\" value=\"' + fmtpMus[0].split(\"=\")[1] + '\"/>' +\r\n                    '<parameter name=\"useinbandfec\" value=\"' + fmtpMus[1].split(\"=\")[1] + '\"/>' +\r\n                    '</payload-type>';\r\n            } else {\r\n                contentNode +=\r\n                    '<payload-type id=\"' + rtpmap.split(\" \")[0] + '\" name=\"' + rtpmap1.split(\"/\")[0] + '\" clockrate=\"' + rtpmap1.split(\"/\")[1] + '\" channels=\"' + rtpmap1.split(\"/\")[2] + '\">' +\r\n                    '</payload-type>';\r\n            }\r\n        } else {\r\n            contentNode +=\r\n                '<payload-type id=\"' + rtpmap.split(\" \")[0] + '\" name=\"' + rtpmap1.split(\"/\")[0] + '\" clockrate=\"' + rtpmap1.split(\"/\")[1] + '\" channels=\"1\">' +\r\n                '<rtcp-fb xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\" type=\"transport-cc\"/>' +\r\n                '<rtcp-fb xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\" type=\"ccm\" subtype=\"fir\"/>' +\r\n                '<rtcp-fb xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\" type=\"nack\"/>' +\r\n                '<rtcp-fb xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\" type=\"nack\" subtype=\"pli\"/>' +\r\n                '</payload-type>';\r\n        }\r\n        return contentNode;\r\n    },\r\n    getSemantics: function () {\r\n        var semantics = null;\r\n        var browser = adapter.browserDetails.browser;\r\n        var version = adapter.browserDetails.version;\r\n        if (browser == \"chrome\") {\r\n            if (version > 75) {\r\n                semantics = \"unified-plan\";\r\n            } else {\r\n                semantics = \"plan-b\";\r\n            }\r\n        } else if (browser == \"firefox\") {\r\n            semantics = \"firefox\";\r\n        } else {\r\n            semantics = \"plan-b\";\r\n        }\r\n        return semantics;\r\n    },\r\n    createSourceParamsNode: function (ssrc, cname, msid) {\r\n        var source = '<source ssrc=\"' + ssrc + '\" xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\">' +\r\n            '<parameter name=\"cname\" value=\"' + cname + '\"/>' +\r\n            '<parameter name=\"msid\" value=\"' + msid + '\"/>' +\r\n            '<parameter name=\"mslabel\" value=\"' + msid.split(\" \")[0] + '\"/>' +\r\n            '<parameter name=\"label\" value=\"' + msid.split(\" \")[1] + '\"/>' +\r\n            '</source>';\r\n        return source;\r\n    },\r\n\r\n    getBandwidth: function (sourceType) {\r\n        var bandwidth = {\r\n            audio: config.audioBandwidth ? config.audioBandwidth : 64,   // 64kbits  minimum\r\n            video: config.videoBandwidth ? config.videoBandwidth : 256// 256kbits (both min-max)\r\n        };\r\n        var browser = adapter.browserDetails.browser;\r\n        var version = adapter.browserDetails.version;\r\n        if (browser == \"chrome\") {\r\n            if (version == 57) {\r\n                bandwidth.audio *= 1000;\r\n                bandwidth.video *= 1000;\r\n            }\r\n        }\r\n        return bandwidth[sourceType];\r\n    },\r\n    getBrowserName: function () {\r\n        return adapter.browserDetails.browser;\r\n    },\r\n    getBrowserVersion: function () {\r\n        return adapter.browserDetails.version;\r\n    },\r\n    getBrowserInfo: function () {\r\n        return {\r\n            name: adapter.browserDetails.browser,\r\n            version: adapter.browserDetails.version\r\n        };\r\n    },\r\n    isSafari: function () {\r\n        return adapter.browserDetails.browser == \"safari\";\r\n    },\r\n    isChrome: function () {\r\n        return adapter.browserDetails.browser == \"chrome\";\r\n    },\r\n    isFirefox: function () {\r\n        return adapter.browserDetails.browser == \"firefox\";\r\n    },\r\n    getResolution: function () {\r\n        return [\r\n            {width: {exact: 1920}, height: {exact: 1080}, videoBandwidth: 512 * 4},\r\n            {width: {exact: 1280}, height: {exact: 720}, videoBandwidth: 512 * 2},\r\n            {width: {exact: 1024}, height: {exact: 768}, videoBandwidth: 512 * 2},\r\n            {width: {exact: 960}, height: {exact: 540}, videoBandwidth: 512 * 1},\r\n            {width: {exact: 640}, height: {exact: 480}, videoBandwidth: 512 * 1},\r\n            // {width: {exact: 640}, height: {exact: 360}, videoBandwidth: 512 * 0.5},\r\n            {width: {exact: 320}, height: {exact: 240}, videoBandwidth: 512 * 0.5},\r\n            {width: {exact: 320}, height: {exact: 180}, videoBandwidth: 512 * 0.5}\r\n        ];\r\n    }\r\n};\r\nexports = module.exports = ms;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/strophe/plugins/manis.utils.js\n// module id = 29\n// module chunks = 0","/**\r\n * Contains utility classes used in SDP class.\r\n *\r\n */\r\n\r\n\r\nSDPUtil = {\r\n  iceparams: function (mediadesc, sessiondesc) {\r\n    var data = null;\r\n    if (SDPUtil.find_line(mediadesc, 'a=ice-ufrag:', sessiondesc) &&\r\n      SDPUtil.find_line(mediadesc, 'a=ice-pwd:', sessiondesc)) {\r\n      data = {\r\n        ufrag: SDPUtil.parse_iceufrag(SDPUtil.find_line(mediadesc, 'a=ice-ufrag:', sessiondesc)),\r\n        pwd: SDPUtil.parse_icepwd(SDPUtil.find_line(mediadesc, 'a=ice-pwd:', sessiondesc))\r\n      };\r\n    }\r\n    return data;\r\n  },\r\n  parse_iceufrag: function (line) {\r\n    return line.substring(12);\r\n  },\r\n  build_iceufrag: function (frag) {\r\n    return 'a=ice-ufrag:' + frag;\r\n  },\r\n  parse_icepwd: function (line) {\r\n    return line.substring(10);\r\n  },\r\n  build_icepwd: function (pwd) {\r\n    return 'a=ice-pwd:' + pwd;\r\n  },\r\n  parse_mid: function (line) {\r\n    return line.substring(6);\r\n  },\r\n  parse_mline: function (line) {\r\n    var parts = line.substring(2).split(' '),\r\n      data = {};\r\n    data.media = parts.shift();\r\n    data.port = parts.shift();\r\n    data.proto = parts.shift();\r\n    if (parts[parts.length - 1] === '') { // trailing whitespace\r\n      parts.pop();\r\n    }\r\n    data.fmt = parts;\r\n    return data;\r\n  },\r\n  build_mline: function (mline) {\r\n    // return 'm=' + mline.media + ' ' + mline.port + ' ' + mline.proto + ' ' + mline.fmt.join(' ');\r\n    return 'm=' + mline.media + ' 9 ' + mline.proto + ' ' + mline.fmt.join(' ');\r\n  },\r\n  parse_rtpmap: function (line) {\r\n    var parts = line.substring(9).split(' '),\r\n      data = {};\r\n    data.id = parts.shift();\r\n    parts = parts[0].split('/');\r\n    data.name = parts.shift();\r\n    data.clockrate = parts.shift();\r\n    data.channels = parts.length ? parts.shift() : '1';\r\n    return data;\r\n  },\r\n  /**\r\n   * Parses SDP line \"a=sctpmap:...\" and extracts SCTP port from it.\r\n   * @param line eg. \"a=sctpmap:5000 webrtc-datachannel\"\r\n   * @returns [SCTP port number, protocol, streams]\r\n   */\r\n  parse_sctpmap: function (line) {\r\n    var parts = line.substring(10).split(' ');\r\n    var sctpPort = parts[0];\r\n    var protocol = parts[1];\r\n    // Stream count is optional\r\n    var streamCount = parts.length > 2 ? parts[2] : null;\r\n    return [sctpPort, protocol, streamCount];// SCTP port\r\n  },\r\n  build_rtpmap: function (el) {\r\n    var line = 'a=rtpmap:' + el.getAttribute('id') + ' ' + el.getAttribute('name') + '/' + el.getAttribute('clockrate');\r\n    if (el.getAttribute('channels') && el.getAttribute('channels') != '1') {\r\n      line += '/' + el.getAttribute('channels');\r\n    }\r\n    return line;\r\n  },\r\n  parse_crypto: function (line) {\r\n    var parts = line.substring(9).split(' '),\r\n      data = {};\r\n    data.tag = parts.shift();\r\n    data['crypto-suite'] = parts.shift();\r\n    data['key-params'] = parts.shift();\r\n    if (parts.length) {\r\n      data['session-params'] = parts.join(' ');\r\n    }\r\n    return data;\r\n  },\r\n  parse_fingerprint: function (line) { // RFC 4572\r\n    var parts = line.substring(14).split(' '),\r\n      data = {};\r\n    data.hash = parts.shift();\r\n    data.fingerprint = parts.shift();\r\n    // TODO assert that fingerprint satisfies 2UHEX *(\":\" 2UHEX) ?\r\n    return data;\r\n  },\r\n  parse_fmtp: function (line) {\r\n    var parts = line.split(' '),\r\n      i, key, value,\r\n      data = [];\r\n    parts.shift();\r\n    parts = parts.join(' ').split(';');\r\n    for (i = 0; i < parts.length; i++) {\r\n      key = parts[i].split('=')[0];\r\n      while (key.length && key[0] == ' ') {\r\n        key = key.substring(1);\r\n      }\r\n      value = parts[i].split('=')[1];\r\n      if (key && value) {\r\n        data.push({name: key, value: value});\r\n      } else if (key) {\r\n        // rfc 4733 (DTMF) style stuff\r\n        data.push({name: '', value: key});\r\n      }\r\n    }\r\n    return data;\r\n  },\r\n  parse_icecandidate: function (line) {\r\n    var candidate = {},\r\n      elems = line.split(' ');\r\n    candidate.foundation = elems[0].substring(12);\r\n    candidate.component = elems[1];\r\n    candidate.protocol = elems[2].toLowerCase();\r\n    candidate.priority = elems[3];\r\n    candidate.ip = elems[4];\r\n    candidate.port = elems[5];\r\n    // elems[6] => \"typ\"\r\n    candidate.type = elems[7];\r\n    candidate.generation = 0; // default value, may be overwritten below\r\n    for (var i = 8; i < elems.length; i += 2) {\r\n      switch (elems[i]) {\r\n        case 'raddr':\r\n          candidate['rel-addr'] = elems[i + 1];\r\n          break;\r\n        case 'rport':\r\n          candidate['rel-port'] = elems[i + 1];\r\n          break;\r\n        case 'generation':\r\n          candidate.generation = elems[i + 1];\r\n          break;\r\n        case 'tcptype':\r\n          candidate.tcptype = elems[i + 1];\r\n          break;\r\n        default: // TODO\r\n          console.log('parse_icecandidate not translating \"' + elems[i] + '\" = \"' + elems[i + 1] + '\"');\r\n      }\r\n    }\r\n    candidate.network = '1';\r\n    candidate.id = Math.random().toString(36).substr(2, 10); // not applicable to SDP -- FIXME: should be unique, not just random\r\n    return candidate;\r\n  },\r\n  build_icecandidate: function (cand) {\r\n    var line = ['a=candidate:' + cand.foundation, cand.component, cand.protocol, cand.priority, cand.ip, cand.port, 'typ', cand.type].join(' ');\r\n    line += ' ';\r\n    switch (cand.type) {\r\n      case 'srflx':\r\n      case 'prflx':\r\n      case 'relay':\r\n        if (cand.hasOwnAttribute('rel-addr') && cand.hasOwnAttribute('rel-port')) {\r\n          line += 'raddr';\r\n          line += ' ';\r\n          line += cand['rel-addr'];\r\n          line += ' ';\r\n          line += 'rport';\r\n          line += ' ';\r\n          line += cand['rel-port'];\r\n          line += ' ';\r\n        }\r\n        break;\r\n    }\r\n    if (cand.hasOwnAttribute('tcptype')) {\r\n      line += 'tcptype';\r\n      line += ' ';\r\n      line += cand.tcptype;\r\n      line += ' ';\r\n    }\r\n    line += 'generation';\r\n    line += ' ';\r\n    line += cand.hasOwnAttribute('generation') ? cand.generation : '0';\r\n    return line;\r\n  },\r\n  parse_ssrc: function (desc) {\r\n    // proprietary mapping of a=ssrc lines\r\n    // TODO: see \"Jingle RTP Source Description\" by Juberti and P. Thatcher on google docs\r\n    // and parse according to that\r\n    var lines = desc.split('\\r\\n'),\r\n      data = {};\r\n    for (var i = 0; i < lines.length; i++) {\r\n      if (lines[i].substring(0, 7) == 'a=ssrc:') {\r\n        var idx = lines[i].indexOf(' ');\r\n        data[lines[i].substr(idx + 1).split(':', 2)[0]] = lines[i].substr(idx + 1).split(':', 2)[1];\r\n      }\r\n    }\r\n    return data;\r\n  },\r\n  parse_rtcpfb: function (line) {\r\n    var parts = line.substr(10).split(' ');\r\n    var data = {};\r\n    data.pt = parts.shift();\r\n    data.type = parts.shift();\r\n    data.params = parts;\r\n    return data;\r\n  },\r\n  parse_extmap: function (line) {\r\n    var parts = line.substr(9).split(' ');\r\n    var data = {};\r\n    data.value = parts.shift();\r\n    if (data.value.indexOf('/') != -1) {\r\n      data.direction = data.value.substr(data.value.indexOf('/') + 1);\r\n      data.value = data.value.substr(0, data.value.indexOf('/'));\r\n    } else {\r\n      data.direction = 'both';\r\n    }\r\n    data.uri = parts.shift();\r\n    data.params = parts;\r\n    return data;\r\n  },\r\n  find_line: function (haystack, needle, sessionpart) {\r\n    var lines = haystack.split('\\r\\n');\r\n    for (var i = 0; i < lines.length; i++) {\r\n      if (lines[i].substring(0, needle.length) == needle) {\r\n        return lines[i];\r\n      }\r\n    }\r\n    if (!sessionpart) {\r\n      return false;\r\n    }\r\n    // search session part\r\n    lines = sessionpart.split('\\r\\n');\r\n    for (var j = 0; j < lines.length; j++) {\r\n      if (lines[j].substring(0, needle.length) == needle) {\r\n        return lines[j];\r\n      }\r\n    }\r\n    return false;\r\n  },\r\n  find_lines: function (haystack, needle, sessionpart) {\r\n    var lines = haystack.split('\\r\\n'),\r\n      needles = [];\r\n    for (var i = 0; i < lines.length; i++) {\r\n      if (lines[i].substring(0, needle.length) == needle)\r\n        needles.push(lines[i]);\r\n    }\r\n    if (needles.length || !sessionpart) {\r\n      return needles;\r\n    }\r\n    // search session part\r\n    lines = sessionpart.split('\\r\\n');\r\n    for (var j = 0; j < lines.length; j++) {\r\n      if (lines[j].substring(0, needle.length) == needle) {\r\n        needles.push(lines[j]);\r\n      }\r\n    }\r\n    return needles;\r\n  },\r\n  candidateToJingle: function (line) {\r\n    // a=candidate:2979166662 1 udp 2113937151 192.168.2.100 57698 typ host generation 0\r\n    //      <candidate component=... foundation=... generation=... id=... ip=... network=... port=... priority=... protocol=... type=.../>\r\n    if (line.indexOf('candidate:') === 0) {\r\n      line = 'a=' + line;\r\n    } else if (line.substring(0, 12) != 'a=candidate:') {\r\n      console.log('parseCandidate called with a line that is not a candidate line');\r\n      console.log(line);\r\n      return null;\r\n    }\r\n    if (line.substring(line.length - 2) == '\\r\\n') // chomp it\r\n      line = line.substring(0, line.length - 2);\r\n    var candidate = {},\r\n      elems = line.split(' '),\r\n      i;\r\n    if (elems[6] != 'typ') {\r\n      console.log('did not find typ in the right place');\r\n      console.log(line);\r\n      return null;\r\n    }\r\n    candidate.foundation = elems[0].substring(12);\r\n    candidate.component = elems[1];\r\n    candidate.protocol = elems[2].toLowerCase();\r\n    candidate.priority = elems[3];\r\n    candidate.ip = elems[4];\r\n    candidate.port = elems[5];\r\n    // elems[6] => \"typ\"\r\n    candidate.type = elems[7];\r\n\r\n    candidate.generation = '0'; // default, may be overwritten below\r\n    for (i = 8; i < elems.length; i += 2) {\r\n      switch (elems[i]) {\r\n        case 'raddr':\r\n          candidate['rel-addr'] = elems[i + 1];\r\n          break;\r\n        case 'rport':\r\n          candidate['rel-port'] = elems[i + 1];\r\n          break;\r\n        case 'generation':\r\n          candidate.generation = elems[i + 1];\r\n          break;\r\n        case 'tcptype':\r\n          candidate.tcptype = elems[i + 1];\r\n          break;\r\n        default: // TODO\r\n          if(config.debug)\r\n            console.log('not translating \"' + elems[i] + '\" = \"' + elems[i + 1] + '\"');\r\n      }\r\n    }\r\n    candidate.network = '1';\r\n    candidate.id = Math.random().toString(36).substr(2, 10); // not applicable to SDP -- FIXME: should be unique, not just random\r\n    return candidate;\r\n  },\r\n  candidateFromJingle: function (cand) {\r\n    var line = 'a=candidate:';\r\n    line += cand.getAttribute('foundation');\r\n    line += ' ';\r\n    line += cand.getAttribute('component');\r\n    line += ' ';\r\n    line += cand.getAttribute('protocol'); //.toUpperCase(); // chrome M23 doesn't like this\r\n    line += ' ';\r\n    line += cand.getAttribute('priority');\r\n    line += ' ';\r\n    line += cand.getAttribute('ip');\r\n    line += ' ';\r\n    line += cand.getAttribute('port');\r\n    line += ' ';\r\n    line += 'typ';\r\n    line += ' ' + cand.getAttribute('type');\r\n    line += ' ';\r\n    switch (cand.getAttribute('type')) {\r\n      case 'srflx':\r\n      case 'prflx':\r\n      case 'relay':\r\n        if (cand.getAttribute('rel-addr') && cand.getAttribute('rel-port')) {\r\n          line += 'raddr';\r\n          line += ' ';\r\n          line += cand.getAttribute('rel-addr');\r\n          line += ' ';\r\n          line += 'rport';\r\n          line += ' ';\r\n          line += cand.getAttribute('rel-port');\r\n          line += ' ';\r\n        }\r\n        break;\r\n    }\r\n    if (cand.getAttribute('protocol').toLowerCase() == 'tcp') {\r\n      line += 'tcptype';\r\n      line += ' ';\r\n      line += cand.getAttribute('tcptype');\r\n      line += ' ';\r\n    }\r\n    line += 'generation';\r\n    line += ' ';\r\n    line += cand.getAttribute('generation') || '0';\r\n    return line + '\\r\\n';\r\n  }\r\n};\r\n\r\nexports = module.exports = SDPUtil;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/strophe/plugins/strophe.jingle.sdp.util.js\n// module id = 30\n// module chunks = 0","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.JSEncrypt = {})));\n}(this, (function (exports) { 'use strict';\n\nvar BI_RM = \"0123456789abcdefghijklmnopqrstuvwxyz\";\nfunction int2char(n) {\n    return BI_RM.charAt(n);\n}\n//#region BIT_OPERATIONS\n// (public) this & a\nfunction op_and(x, y) {\n    return x & y;\n}\n// (public) this | a\nfunction op_or(x, y) {\n    return x | y;\n}\n// (public) this ^ a\nfunction op_xor(x, y) {\n    return x ^ y;\n}\n// (public) this & ~a\nfunction op_andnot(x, y) {\n    return x & ~y;\n}\n// return index of lowest 1-bit in x, x < 2^31\nfunction lbit(x) {\n    if (x == 0) {\n        return -1;\n    }\n    var r = 0;\n    if ((x & 0xffff) == 0) {\n        x >>= 16;\n        r += 16;\n    }\n    if ((x & 0xff) == 0) {\n        x >>= 8;\n        r += 8;\n    }\n    if ((x & 0xf) == 0) {\n        x >>= 4;\n        r += 4;\n    }\n    if ((x & 3) == 0) {\n        x >>= 2;\n        r += 2;\n    }\n    if ((x & 1) == 0) {\n        ++r;\n    }\n    return r;\n}\n// return number of 1 bits in x\nfunction cbit(x) {\n    var r = 0;\n    while (x != 0) {\n        x &= x - 1;\n        ++r;\n    }\n    return r;\n}\n//#endregion BIT_OPERATIONS\n\nvar b64map = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\nvar b64pad = \"=\";\nfunction hex2b64(h) {\n    var i;\n    var c;\n    var ret = \"\";\n    for (i = 0; i + 3 <= h.length; i += 3) {\n        c = parseInt(h.substring(i, i + 3), 16);\n        ret += b64map.charAt(c >> 6) + b64map.charAt(c & 63);\n    }\n    if (i + 1 == h.length) {\n        c = parseInt(h.substring(i, i + 1), 16);\n        ret += b64map.charAt(c << 2);\n    }\n    else if (i + 2 == h.length) {\n        c = parseInt(h.substring(i, i + 2), 16);\n        ret += b64map.charAt(c >> 2) + b64map.charAt((c & 3) << 4);\n    }\n    while ((ret.length & 3) > 0) {\n        ret += b64pad;\n    }\n    return ret;\n}\n// convert a base64 string to hex\nfunction b64tohex(s) {\n    var ret = \"\";\n    var i;\n    var k = 0; // b64 state, 0-3\n    var slop = 0;\n    for (i = 0; i < s.length; ++i) {\n        if (s.charAt(i) == b64pad) {\n            break;\n        }\n        var v = b64map.indexOf(s.charAt(i));\n        if (v < 0) {\n            continue;\n        }\n        if (k == 0) {\n            ret += int2char(v >> 2);\n            slop = v & 3;\n            k = 1;\n        }\n        else if (k == 1) {\n            ret += int2char((slop << 2) | (v >> 4));\n            slop = v & 0xf;\n            k = 2;\n        }\n        else if (k == 2) {\n            ret += int2char(slop);\n            ret += int2char(v >> 2);\n            slop = v & 3;\n            k = 3;\n        }\n        else {\n            ret += int2char((slop << 2) | (v >> 4));\n            ret += int2char(v & 0xf);\n            k = 0;\n        }\n    }\n    if (k == 1) {\n        ret += int2char(slop << 2);\n    }\n    return ret;\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\n// Hex JavaScript decoder\n// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\nvar decoder;\nvar Hex = {\n    decode: function (a) {\n        var i;\n        if (decoder === undefined) {\n            var hex = \"0123456789ABCDEF\";\n            var ignore = \" \\f\\n\\r\\t\\u00A0\\u2028\\u2029\";\n            decoder = {};\n            for (i = 0; i < 16; ++i) {\n                decoder[hex.charAt(i)] = i;\n            }\n            hex = hex.toLowerCase();\n            for (i = 10; i < 16; ++i) {\n                decoder[hex.charAt(i)] = i;\n            }\n            for (i = 0; i < ignore.length; ++i) {\n                decoder[ignore.charAt(i)] = -1;\n            }\n        }\n        var out = [];\n        var bits = 0;\n        var char_count = 0;\n        for (i = 0; i < a.length; ++i) {\n            var c = a.charAt(i);\n            if (c == \"=\") {\n                break;\n            }\n            c = decoder[c];\n            if (c == -1) {\n                continue;\n            }\n            if (c === undefined) {\n                throw new Error(\"Illegal character at offset \" + i);\n            }\n            bits |= c;\n            if (++char_count >= 2) {\n                out[out.length] = bits;\n                bits = 0;\n                char_count = 0;\n            }\n            else {\n                bits <<= 4;\n            }\n        }\n        if (char_count) {\n            throw new Error(\"Hex encoding incomplete: 4 bits missing\");\n        }\n        return out;\n    }\n};\n\n// Base64 JavaScript decoder\n// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\nvar decoder$1;\nvar Base64 = {\n    decode: function (a) {\n        var i;\n        if (decoder$1 === undefined) {\n            var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n            var ignore = \"= \\f\\n\\r\\t\\u00A0\\u2028\\u2029\";\n            decoder$1 = Object.create(null);\n            for (i = 0; i < 64; ++i) {\n                decoder$1[b64.charAt(i)] = i;\n            }\n            for (i = 0; i < ignore.length; ++i) {\n                decoder$1[ignore.charAt(i)] = -1;\n            }\n        }\n        var out = [];\n        var bits = 0;\n        var char_count = 0;\n        for (i = 0; i < a.length; ++i) {\n            var c = a.charAt(i);\n            if (c == \"=\") {\n                break;\n            }\n            c = decoder$1[c];\n            if (c == -1) {\n                continue;\n            }\n            if (c === undefined) {\n                throw new Error(\"Illegal character at offset \" + i);\n            }\n            bits |= c;\n            if (++char_count >= 4) {\n                out[out.length] = (bits >> 16);\n                out[out.length] = (bits >> 8) & 0xFF;\n                out[out.length] = bits & 0xFF;\n                bits = 0;\n                char_count = 0;\n            }\n            else {\n                bits <<= 6;\n            }\n        }\n        switch (char_count) {\n            case 1:\n                throw new Error(\"Base64 encoding incomplete: at least 2 bits missing\");\n            case 2:\n                out[out.length] = (bits >> 10);\n                break;\n            case 3:\n                out[out.length] = (bits >> 16);\n                out[out.length] = (bits >> 8) & 0xFF;\n                break;\n        }\n        return out;\n    },\n    re: /-----BEGIN [^-]+-----([A-Za-z0-9+\\/=\\s]+)-----END [^-]+-----|begin-base64[^\\n]+\\n([A-Za-z0-9+\\/=\\s]+)====/,\n    unarmor: function (a) {\n        var m = Base64.re.exec(a);\n        if (m) {\n            if (m[1]) {\n                a = m[1];\n            }\n            else if (m[2]) {\n                a = m[2];\n            }\n            else {\n                throw new Error(\"RegExp out of sync\");\n            }\n        }\n        return Base64.decode(a);\n    }\n};\n\n// Big integer base-10 printing library\n// Copyright (c) 2014 Lapo Luchini <lapo@lapo.it>\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\nvar max = 10000000000000; // biggest integer that can still fit 2^53 when multiplied by 256\nvar Int10 = /** @class */ (function () {\n    function Int10(value) {\n        this.buf = [+value || 0];\n    }\n    Int10.prototype.mulAdd = function (m, c) {\n        // assert(m <= 256)\n        var b = this.buf;\n        var l = b.length;\n        var i;\n        var t;\n        for (i = 0; i < l; ++i) {\n            t = b[i] * m + c;\n            if (t < max) {\n                c = 0;\n            }\n            else {\n                c = 0 | (t / max);\n                t -= c * max;\n            }\n            b[i] = t;\n        }\n        if (c > 0) {\n            b[i] = c;\n        }\n    };\n    Int10.prototype.sub = function (c) {\n        // assert(m <= 256)\n        var b = this.buf;\n        var l = b.length;\n        var i;\n        var t;\n        for (i = 0; i < l; ++i) {\n            t = b[i] - c;\n            if (t < 0) {\n                t += max;\n                c = 1;\n            }\n            else {\n                c = 0;\n            }\n            b[i] = t;\n        }\n        while (b[b.length - 1] === 0) {\n            b.pop();\n        }\n    };\n    Int10.prototype.toString = function (base) {\n        if ((base || 10) != 10) {\n            throw new Error(\"only base 10 is supported\");\n        }\n        var b = this.buf;\n        var s = b[b.length - 1].toString();\n        for (var i = b.length - 2; i >= 0; --i) {\n            s += (max + b[i]).toString().substring(1);\n        }\n        return s;\n    };\n    Int10.prototype.valueOf = function () {\n        var b = this.buf;\n        var v = 0;\n        for (var i = b.length - 1; i >= 0; --i) {\n            v = v * max + b[i];\n        }\n        return v;\n    };\n    Int10.prototype.simplify = function () {\n        var b = this.buf;\n        return (b.length == 1) ? b[0] : this;\n    };\n    return Int10;\n}());\n\n// ASN.1 JavaScript decoder\nvar ellipsis = \"\\u2026\";\nvar reTimeS = /^(\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\nvar reTimeL = /^(\\d\\d\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\nfunction stringCut(str, len) {\n    if (str.length > len) {\n        str = str.substring(0, len) + ellipsis;\n    }\n    return str;\n}\nvar Stream = /** @class */ (function () {\n    function Stream(enc, pos) {\n        this.hexDigits = \"0123456789ABCDEF\";\n        if (enc instanceof Stream) {\n            this.enc = enc.enc;\n            this.pos = enc.pos;\n        }\n        else {\n            // enc should be an array or a binary string\n            this.enc = enc;\n            this.pos = pos;\n        }\n    }\n    Stream.prototype.get = function (pos) {\n        if (pos === undefined) {\n            pos = this.pos++;\n        }\n        if (pos >= this.enc.length) {\n            throw new Error(\"Requesting byte offset \" + pos + \" on a stream of length \" + this.enc.length);\n        }\n        return (\"string\" === typeof this.enc) ? this.enc.charCodeAt(pos) : this.enc[pos];\n    };\n    Stream.prototype.hexByte = function (b) {\n        return this.hexDigits.charAt((b >> 4) & 0xF) + this.hexDigits.charAt(b & 0xF);\n    };\n    Stream.prototype.hexDump = function (start, end, raw) {\n        var s = \"\";\n        for (var i = start; i < end; ++i) {\n            s += this.hexByte(this.get(i));\n            if (raw !== true) {\n                switch (i & 0xF) {\n                    case 0x7:\n                        s += \"  \";\n                        break;\n                    case 0xF:\n                        s += \"\\n\";\n                        break;\n                    default:\n                        s += \" \";\n                }\n            }\n        }\n        return s;\n    };\n    Stream.prototype.isASCII = function (start, end) {\n        for (var i = start; i < end; ++i) {\n            var c = this.get(i);\n            if (c < 32 || c > 176) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Stream.prototype.parseStringISO = function (start, end) {\n        var s = \"\";\n        for (var i = start; i < end; ++i) {\n            s += String.fromCharCode(this.get(i));\n        }\n        return s;\n    };\n    Stream.prototype.parseStringUTF = function (start, end) {\n        var s = \"\";\n        for (var i = start; i < end;) {\n            var c = this.get(i++);\n            if (c < 128) {\n                s += String.fromCharCode(c);\n            }\n            else if ((c > 191) && (c < 224)) {\n                s += String.fromCharCode(((c & 0x1F) << 6) | (this.get(i++) & 0x3F));\n            }\n            else {\n                s += String.fromCharCode(((c & 0x0F) << 12) | ((this.get(i++) & 0x3F) << 6) | (this.get(i++) & 0x3F));\n            }\n        }\n        return s;\n    };\n    Stream.prototype.parseStringBMP = function (start, end) {\n        var str = \"\";\n        var hi;\n        var lo;\n        for (var i = start; i < end;) {\n            hi = this.get(i++);\n            lo = this.get(i++);\n            str += String.fromCharCode((hi << 8) | lo);\n        }\n        return str;\n    };\n    Stream.prototype.parseTime = function (start, end, shortYear) {\n        var s = this.parseStringISO(start, end);\n        var m = (shortYear ? reTimeS : reTimeL).exec(s);\n        if (!m) {\n            return \"Unrecognized time: \" + s;\n        }\n        if (shortYear) {\n            // to avoid querying the timer, use the fixed range [1970, 2069]\n            // it will conform with ITU X.400 [-10, +40] sliding window until 2030\n            m[1] = +m[1];\n            m[1] += (+m[1] < 70) ? 2000 : 1900;\n        }\n        s = m[1] + \"-\" + m[2] + \"-\" + m[3] + \" \" + m[4];\n        if (m[5]) {\n            s += \":\" + m[5];\n            if (m[6]) {\n                s += \":\" + m[6];\n                if (m[7]) {\n                    s += \".\" + m[7];\n                }\n            }\n        }\n        if (m[8]) {\n            s += \" UTC\";\n            if (m[8] != \"Z\") {\n                s += m[8];\n                if (m[9]) {\n                    s += \":\" + m[9];\n                }\n            }\n        }\n        return s;\n    };\n    Stream.prototype.parseInteger = function (start, end) {\n        var v = this.get(start);\n        var neg = (v > 127);\n        var pad = neg ? 255 : 0;\n        var len;\n        var s = \"\";\n        // skip unuseful bits (not allowed in DER)\n        while (v == pad && ++start < end) {\n            v = this.get(start);\n        }\n        len = end - start;\n        if (len === 0) {\n            return neg ? -1 : 0;\n        }\n        // show bit length of huge integers\n        if (len > 4) {\n            s = v;\n            len <<= 3;\n            while (((+s ^ pad) & 0x80) == 0) {\n                s = +s << 1;\n                --len;\n            }\n            s = \"(\" + len + \" bit)\\n\";\n        }\n        // decode the integer\n        if (neg) {\n            v = v - 256;\n        }\n        var n = new Int10(v);\n        for (var i = start + 1; i < end; ++i) {\n            n.mulAdd(256, this.get(i));\n        }\n        return s + n.toString();\n    };\n    Stream.prototype.parseBitString = function (start, end, maxLength) {\n        var unusedBit = this.get(start);\n        var lenBit = ((end - start - 1) << 3) - unusedBit;\n        var intro = \"(\" + lenBit + \" bit)\\n\";\n        var s = \"\";\n        for (var i = start + 1; i < end; ++i) {\n            var b = this.get(i);\n            var skip = (i == end - 1) ? unusedBit : 0;\n            for (var j = 7; j >= skip; --j) {\n                s += (b >> j) & 1 ? \"1\" : \"0\";\n            }\n            if (s.length > maxLength) {\n                return intro + stringCut(s, maxLength);\n            }\n        }\n        return intro + s;\n    };\n    Stream.prototype.parseOctetString = function (start, end, maxLength) {\n        if (this.isASCII(start, end)) {\n            return stringCut(this.parseStringISO(start, end), maxLength);\n        }\n        var len = end - start;\n        var s = \"(\" + len + \" byte)\\n\";\n        maxLength /= 2; // we work in bytes\n        if (len > maxLength) {\n            end = start + maxLength;\n        }\n        for (var i = start; i < end; ++i) {\n            s += this.hexByte(this.get(i));\n        }\n        if (len > maxLength) {\n            s += ellipsis;\n        }\n        return s;\n    };\n    Stream.prototype.parseOID = function (start, end, maxLength) {\n        var s = \"\";\n        var n = new Int10();\n        var bits = 0;\n        for (var i = start; i < end; ++i) {\n            var v = this.get(i);\n            n.mulAdd(128, v & 0x7F);\n            bits += 7;\n            if (!(v & 0x80)) { // finished\n                if (s === \"\") {\n                    n = n.simplify();\n                    if (n instanceof Int10) {\n                        n.sub(80);\n                        s = \"2.\" + n.toString();\n                    }\n                    else {\n                        var m = n < 80 ? n < 40 ? 0 : 1 : 2;\n                        s = m + \".\" + (n - m * 40);\n                    }\n                }\n                else {\n                    s += \".\" + n.toString();\n                }\n                if (s.length > maxLength) {\n                    return stringCut(s, maxLength);\n                }\n                n = new Int10();\n                bits = 0;\n            }\n        }\n        if (bits > 0) {\n            s += \".incomplete\";\n        }\n        return s;\n    };\n    return Stream;\n}());\nvar ASN1 = /** @class */ (function () {\n    function ASN1(stream, header, length, tag, sub) {\n        if (!(tag instanceof ASN1Tag)) {\n            throw new Error(\"Invalid tag value.\");\n        }\n        this.stream = stream;\n        this.header = header;\n        this.length = length;\n        this.tag = tag;\n        this.sub = sub;\n    }\n    ASN1.prototype.typeName = function () {\n        switch (this.tag.tagClass) {\n            case 0: // universal\n                switch (this.tag.tagNumber) {\n                    case 0x00:\n                        return \"EOC\";\n                    case 0x01:\n                        return \"BOOLEAN\";\n                    case 0x02:\n                        return \"INTEGER\";\n                    case 0x03:\n                        return \"BIT_STRING\";\n                    case 0x04:\n                        return \"OCTET_STRING\";\n                    case 0x05:\n                        return \"NULL\";\n                    case 0x06:\n                        return \"OBJECT_IDENTIFIER\";\n                    case 0x07:\n                        return \"ObjectDescriptor\";\n                    case 0x08:\n                        return \"EXTERNAL\";\n                    case 0x09:\n                        return \"REAL\";\n                    case 0x0A:\n                        return \"ENUMERATED\";\n                    case 0x0B:\n                        return \"EMBEDDED_PDV\";\n                    case 0x0C:\n                        return \"UTF8String\";\n                    case 0x10:\n                        return \"SEQUENCE\";\n                    case 0x11:\n                        return \"SET\";\n                    case 0x12:\n                        return \"NumericString\";\n                    case 0x13:\n                        return \"PrintableString\"; // ASCII subset\n                    case 0x14:\n                        return \"TeletexString\"; // aka T61String\n                    case 0x15:\n                        return \"VideotexString\";\n                    case 0x16:\n                        return \"IA5String\"; // ASCII\n                    case 0x17:\n                        return \"UTCTime\";\n                    case 0x18:\n                        return \"GeneralizedTime\";\n                    case 0x19:\n                        return \"GraphicString\";\n                    case 0x1A:\n                        return \"VisibleString\"; // ASCII subset\n                    case 0x1B:\n                        return \"GeneralString\";\n                    case 0x1C:\n                        return \"UniversalString\";\n                    case 0x1E:\n                        return \"BMPString\";\n                }\n                return \"Universal_\" + this.tag.tagNumber.toString();\n            case 1:\n                return \"Application_\" + this.tag.tagNumber.toString();\n            case 2:\n                return \"[\" + this.tag.tagNumber.toString() + \"]\"; // Context\n            case 3:\n                return \"Private_\" + this.tag.tagNumber.toString();\n        }\n    };\n    ASN1.prototype.content = function (maxLength) {\n        if (this.tag === undefined) {\n            return null;\n        }\n        if (maxLength === undefined) {\n            maxLength = Infinity;\n        }\n        var content = this.posContent();\n        var len = Math.abs(this.length);\n        if (!this.tag.isUniversal()) {\n            if (this.sub !== null) {\n                return \"(\" + this.sub.length + \" elem)\";\n            }\n            return this.stream.parseOctetString(content, content + len, maxLength);\n        }\n        switch (this.tag.tagNumber) {\n            case 0x01: // BOOLEAN\n                return (this.stream.get(content) === 0) ? \"false\" : \"true\";\n            case 0x02: // INTEGER\n                return this.stream.parseInteger(content, content + len);\n            case 0x03: // BIT_STRING\n                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\n                    this.stream.parseBitString(content, content + len, maxLength);\n            case 0x04: // OCTET_STRING\n                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\n                    this.stream.parseOctetString(content, content + len, maxLength);\n            // case 0x05: // NULL\n            case 0x06: // OBJECT_IDENTIFIER\n                return this.stream.parseOID(content, content + len, maxLength);\n            // case 0x07: // ObjectDescriptor\n            // case 0x08: // EXTERNAL\n            // case 0x09: // REAL\n            // case 0x0A: // ENUMERATED\n            // case 0x0B: // EMBEDDED_PDV\n            case 0x10: // SEQUENCE\n            case 0x11: // SET\n                if (this.sub !== null) {\n                    return \"(\" + this.sub.length + \" elem)\";\n                }\n                else {\n                    return \"(no elem)\";\n                }\n            case 0x0C: // UTF8String\n                return stringCut(this.stream.parseStringUTF(content, content + len), maxLength);\n            case 0x12: // NumericString\n            case 0x13: // PrintableString\n            case 0x14: // TeletexString\n            case 0x15: // VideotexString\n            case 0x16: // IA5String\n            // case 0x19: // GraphicString\n            case 0x1A: // VisibleString\n                // case 0x1B: // GeneralString\n                // case 0x1C: // UniversalString\n                return stringCut(this.stream.parseStringISO(content, content + len), maxLength);\n            case 0x1E: // BMPString\n                return stringCut(this.stream.parseStringBMP(content, content + len), maxLength);\n            case 0x17: // UTCTime\n            case 0x18: // GeneralizedTime\n                return this.stream.parseTime(content, content + len, (this.tag.tagNumber == 0x17));\n        }\n        return null;\n    };\n    ASN1.prototype.toString = function () {\n        return this.typeName() + \"@\" + this.stream.pos + \"[header:\" + this.header + \",length:\" + this.length + \",sub:\" + ((this.sub === null) ? \"null\" : this.sub.length) + \"]\";\n    };\n    ASN1.prototype.toPrettyString = function (indent) {\n        if (indent === undefined) {\n            indent = \"\";\n        }\n        var s = indent + this.typeName() + \" @\" + this.stream.pos;\n        if (this.length >= 0) {\n            s += \"+\";\n        }\n        s += this.length;\n        if (this.tag.tagConstructed) {\n            s += \" (constructed)\";\n        }\n        else if ((this.tag.isUniversal() && ((this.tag.tagNumber == 0x03) || (this.tag.tagNumber == 0x04))) && (this.sub !== null)) {\n            s += \" (encapsulates)\";\n        }\n        s += \"\\n\";\n        if (this.sub !== null) {\n            indent += \"  \";\n            for (var i = 0, max = this.sub.length; i < max; ++i) {\n                s += this.sub[i].toPrettyString(indent);\n            }\n        }\n        return s;\n    };\n    ASN1.prototype.posStart = function () {\n        return this.stream.pos;\n    };\n    ASN1.prototype.posContent = function () {\n        return this.stream.pos + this.header;\n    };\n    ASN1.prototype.posEnd = function () {\n        return this.stream.pos + this.header + Math.abs(this.length);\n    };\n    ASN1.prototype.toHexString = function () {\n        return this.stream.hexDump(this.posStart(), this.posEnd(), true);\n    };\n    ASN1.decodeLength = function (stream) {\n        var buf = stream.get();\n        var len = buf & 0x7F;\n        if (len == buf) {\n            return len;\n        }\n        // no reason to use Int10, as it would be a huge buffer anyways\n        if (len > 6) {\n            throw new Error(\"Length over 48 bits not supported at position \" + (stream.pos - 1));\n        }\n        if (len === 0) {\n            return null;\n        } // undefined\n        buf = 0;\n        for (var i = 0; i < len; ++i) {\n            buf = (buf * 256) + stream.get();\n        }\n        return buf;\n    };\n    /**\n     * Retrieve the hexadecimal value (as a string) of the current ASN.1 element\n     * @returns {string}\n     * @public\n     */\n    ASN1.prototype.getHexStringValue = function () {\n        var hexString = this.toHexString();\n        var offset = this.header * 2;\n        var length = this.length * 2;\n        return hexString.substr(offset, length);\n    };\n    ASN1.decode = function (str) {\n        var stream;\n        if (!(str instanceof Stream)) {\n            stream = new Stream(str, 0);\n        }\n        else {\n            stream = str;\n        }\n        var streamStart = new Stream(stream);\n        var tag = new ASN1Tag(stream);\n        var len = ASN1.decodeLength(stream);\n        var start = stream.pos;\n        var header = start - streamStart.pos;\n        var sub = null;\n        var getSub = function () {\n            var ret = [];\n            if (len !== null) {\n                // definite length\n                var end = start + len;\n                while (stream.pos < end) {\n                    ret[ret.length] = ASN1.decode(stream);\n                }\n                if (stream.pos != end) {\n                    throw new Error(\"Content size is not correct for container starting at offset \" + start);\n                }\n            }\n            else {\n                // undefined length\n                try {\n                    for (;;) {\n                        var s = ASN1.decode(stream);\n                        if (s.tag.isEOC()) {\n                            break;\n                        }\n                        ret[ret.length] = s;\n                    }\n                    len = start - stream.pos; // undefined lengths are represented as negative values\n                }\n                catch (e) {\n                    throw new Error(\"Exception while decoding undefined length content: \" + e);\n                }\n            }\n            return ret;\n        };\n        if (tag.tagConstructed) {\n            // must have valid content\n            sub = getSub();\n        }\n        else if (tag.isUniversal() && ((tag.tagNumber == 0x03) || (tag.tagNumber == 0x04))) {\n            // sometimes BitString and OctetString are used to encapsulate ASN.1\n            try {\n                if (tag.tagNumber == 0x03) {\n                    if (stream.get() != 0) {\n                        throw new Error(\"BIT STRINGs with unused bits cannot encapsulate.\");\n                    }\n                }\n                sub = getSub();\n                for (var i = 0; i < sub.length; ++i) {\n                    if (sub[i].tag.isEOC()) {\n                        throw new Error(\"EOC is not supposed to be actual content.\");\n                    }\n                }\n            }\n            catch (e) {\n                // but silently ignore when they don't\n                sub = null;\n            }\n        }\n        if (sub === null) {\n            if (len === null) {\n                throw new Error(\"We can't skip over an invalid tag with undefined length at offset \" + start);\n            }\n            stream.pos = start + Math.abs(len);\n        }\n        return new ASN1(streamStart, header, len, tag, sub);\n    };\n    return ASN1;\n}());\nvar ASN1Tag = /** @class */ (function () {\n    function ASN1Tag(stream) {\n        var buf = stream.get();\n        this.tagClass = buf >> 6;\n        this.tagConstructed = ((buf & 0x20) !== 0);\n        this.tagNumber = buf & 0x1F;\n        if (this.tagNumber == 0x1F) { // long tag\n            var n = new Int10();\n            do {\n                buf = stream.get();\n                n.mulAdd(128, buf & 0x7F);\n            } while (buf & 0x80);\n            this.tagNumber = n.simplify();\n        }\n    }\n    ASN1Tag.prototype.isUniversal = function () {\n        return this.tagClass === 0x00;\n    };\n    ASN1Tag.prototype.isEOC = function () {\n        return this.tagClass === 0x00 && this.tagNumber === 0x00;\n    };\n    return ASN1Tag;\n}());\n\n// Copyright (c) 2005  Tom Wu\n// Bits per digit\nvar dbits;\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = ((canary & 0xffffff) == 0xefcafe);\n//#region\nvar lowprimes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997];\nvar lplim = (1 << 26) / lowprimes[lowprimes.length - 1];\n//#endregion\n// (public) Constructor\nvar BigInteger = /** @class */ (function () {\n    function BigInteger(a, b, c) {\n        if (a != null) {\n            if (\"number\" == typeof a) {\n                this.fromNumber(a, b, c);\n            }\n            else if (b == null && \"string\" != typeof a) {\n                this.fromString(a, 256);\n            }\n            else {\n                this.fromString(a, b);\n            }\n        }\n    }\n    //#region PUBLIC\n    // BigInteger.prototype.toString = bnToString;\n    // (public) return string representation in given radix\n    BigInteger.prototype.toString = function (b) {\n        if (this.s < 0) {\n            return \"-\" + this.negate().toString(b);\n        }\n        var k;\n        if (b == 16) {\n            k = 4;\n        }\n        else if (b == 8) {\n            k = 3;\n        }\n        else if (b == 2) {\n            k = 1;\n        }\n        else if (b == 32) {\n            k = 5;\n        }\n        else if (b == 4) {\n            k = 2;\n        }\n        else {\n            return this.toRadix(b);\n        }\n        var km = (1 << k) - 1;\n        var d;\n        var m = false;\n        var r = \"\";\n        var i = this.t;\n        var p = this.DB - (i * this.DB) % k;\n        if (i-- > 0) {\n            if (p < this.DB && (d = this[i] >> p) > 0) {\n                m = true;\n                r = int2char(d);\n            }\n            while (i >= 0) {\n                if (p < k) {\n                    d = (this[i] & ((1 << p) - 1)) << (k - p);\n                    d |= this[--i] >> (p += this.DB - k);\n                }\n                else {\n                    d = (this[i] >> (p -= k)) & km;\n                    if (p <= 0) {\n                        p += this.DB;\n                        --i;\n                    }\n                }\n                if (d > 0) {\n                    m = true;\n                }\n                if (m) {\n                    r += int2char(d);\n                }\n            }\n        }\n        return m ? r : \"0\";\n    };\n    // BigInteger.prototype.negate = bnNegate;\n    // (public) -this\n    BigInteger.prototype.negate = function () {\n        var r = nbi();\n        BigInteger.ZERO.subTo(this, r);\n        return r;\n    };\n    // BigInteger.prototype.abs = bnAbs;\n    // (public) |this|\n    BigInteger.prototype.abs = function () {\n        return (this.s < 0) ? this.negate() : this;\n    };\n    // BigInteger.prototype.compareTo = bnCompareTo;\n    // (public) return + if this > a, - if this < a, 0 if equal\n    BigInteger.prototype.compareTo = function (a) {\n        var r = this.s - a.s;\n        if (r != 0) {\n            return r;\n        }\n        var i = this.t;\n        r = i - a.t;\n        if (r != 0) {\n            return (this.s < 0) ? -r : r;\n        }\n        while (--i >= 0) {\n            if ((r = this[i] - a[i]) != 0) {\n                return r;\n            }\n        }\n        return 0;\n    };\n    // BigInteger.prototype.bitLength = bnBitLength;\n    // (public) return the number of bits in \"this\"\n    BigInteger.prototype.bitLength = function () {\n        if (this.t <= 0) {\n            return 0;\n        }\n        return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ (this.s & this.DM));\n    };\n    // BigInteger.prototype.mod = bnMod;\n    // (public) this mod a\n    BigInteger.prototype.mod = function (a) {\n        var r = nbi();\n        this.abs().divRemTo(a, null, r);\n        if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) {\n            a.subTo(r, r);\n        }\n        return r;\n    };\n    // BigInteger.prototype.modPowInt = bnModPowInt;\n    // (public) this^e % m, 0 <= e < 2^32\n    BigInteger.prototype.modPowInt = function (e, m) {\n        var z;\n        if (e < 256 || m.isEven()) {\n            z = new Classic(m);\n        }\n        else {\n            z = new Montgomery(m);\n        }\n        return this.exp(e, z);\n    };\n    // BigInteger.prototype.clone = bnClone;\n    // (public)\n    BigInteger.prototype.clone = function () {\n        var r = nbi();\n        this.copyTo(r);\n        return r;\n    };\n    // BigInteger.prototype.intValue = bnIntValue;\n    // (public) return value as integer\n    BigInteger.prototype.intValue = function () {\n        if (this.s < 0) {\n            if (this.t == 1) {\n                return this[0] - this.DV;\n            }\n            else if (this.t == 0) {\n                return -1;\n            }\n        }\n        else if (this.t == 1) {\n            return this[0];\n        }\n        else if (this.t == 0) {\n            return 0;\n        }\n        // assumes 16 < DB < 32\n        return ((this[1] & ((1 << (32 - this.DB)) - 1)) << this.DB) | this[0];\n    };\n    // BigInteger.prototype.byteValue = bnByteValue;\n    // (public) return value as byte\n    BigInteger.prototype.byteValue = function () {\n        return (this.t == 0) ? this.s : (this[0] << 24) >> 24;\n    };\n    // BigInteger.prototype.shortValue = bnShortValue;\n    // (public) return value as short (assumes DB>=16)\n    BigInteger.prototype.shortValue = function () {\n        return (this.t == 0) ? this.s : (this[0] << 16) >> 16;\n    };\n    // BigInteger.prototype.signum = bnSigNum;\n    // (public) 0 if this == 0, 1 if this > 0\n    BigInteger.prototype.signum = function () {\n        if (this.s < 0) {\n            return -1;\n        }\n        else if (this.t <= 0 || (this.t == 1 && this[0] <= 0)) {\n            return 0;\n        }\n        else {\n            return 1;\n        }\n    };\n    // BigInteger.prototype.toByteArray = bnToByteArray;\n    // (public) convert to bigendian byte array\n    BigInteger.prototype.toByteArray = function () {\n        var i = this.t;\n        var r = [];\n        r[0] = this.s;\n        var p = this.DB - (i * this.DB) % 8;\n        var d;\n        var k = 0;\n        if (i-- > 0) {\n            if (p < this.DB && (d = this[i] >> p) != (this.s & this.DM) >> p) {\n                r[k++] = d | (this.s << (this.DB - p));\n            }\n            while (i >= 0) {\n                if (p < 8) {\n                    d = (this[i] & ((1 << p) - 1)) << (8 - p);\n                    d |= this[--i] >> (p += this.DB - 8);\n                }\n                else {\n                    d = (this[i] >> (p -= 8)) & 0xff;\n                    if (p <= 0) {\n                        p += this.DB;\n                        --i;\n                    }\n                }\n                if ((d & 0x80) != 0) {\n                    d |= -256;\n                }\n                if (k == 0 && (this.s & 0x80) != (d & 0x80)) {\n                    ++k;\n                }\n                if (k > 0 || d != this.s) {\n                    r[k++] = d;\n                }\n            }\n        }\n        return r;\n    };\n    // BigInteger.prototype.equals = bnEquals;\n    BigInteger.prototype.equals = function (a) {\n        return (this.compareTo(a) == 0);\n    };\n    // BigInteger.prototype.min = bnMin;\n    BigInteger.prototype.min = function (a) {\n        return (this.compareTo(a) < 0) ? this : a;\n    };\n    // BigInteger.prototype.max = bnMax;\n    BigInteger.prototype.max = function (a) {\n        return (this.compareTo(a) > 0) ? this : a;\n    };\n    // BigInteger.prototype.and = bnAnd;\n    BigInteger.prototype.and = function (a) {\n        var r = nbi();\n        this.bitwiseTo(a, op_and, r);\n        return r;\n    };\n    // BigInteger.prototype.or = bnOr;\n    BigInteger.prototype.or = function (a) {\n        var r = nbi();\n        this.bitwiseTo(a, op_or, r);\n        return r;\n    };\n    // BigInteger.prototype.xor = bnXor;\n    BigInteger.prototype.xor = function (a) {\n        var r = nbi();\n        this.bitwiseTo(a, op_xor, r);\n        return r;\n    };\n    // BigInteger.prototype.andNot = bnAndNot;\n    BigInteger.prototype.andNot = function (a) {\n        var r = nbi();\n        this.bitwiseTo(a, op_andnot, r);\n        return r;\n    };\n    // BigInteger.prototype.not = bnNot;\n    // (public) ~this\n    BigInteger.prototype.not = function () {\n        var r = nbi();\n        for (var i = 0; i < this.t; ++i) {\n            r[i] = this.DM & ~this[i];\n        }\n        r.t = this.t;\n        r.s = ~this.s;\n        return r;\n    };\n    // BigInteger.prototype.shiftLeft = bnShiftLeft;\n    // (public) this << n\n    BigInteger.prototype.shiftLeft = function (n) {\n        var r = nbi();\n        if (n < 0) {\n            this.rShiftTo(-n, r);\n        }\n        else {\n            this.lShiftTo(n, r);\n        }\n        return r;\n    };\n    // BigInteger.prototype.shiftRight = bnShiftRight;\n    // (public) this >> n\n    BigInteger.prototype.shiftRight = function (n) {\n        var r = nbi();\n        if (n < 0) {\n            this.lShiftTo(-n, r);\n        }\n        else {\n            this.rShiftTo(n, r);\n        }\n        return r;\n    };\n    // BigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\n    // (public) returns index of lowest 1-bit (or -1 if none)\n    BigInteger.prototype.getLowestSetBit = function () {\n        for (var i = 0; i < this.t; ++i) {\n            if (this[i] != 0) {\n                return i * this.DB + lbit(this[i]);\n            }\n        }\n        if (this.s < 0) {\n            return this.t * this.DB;\n        }\n        return -1;\n    };\n    // BigInteger.prototype.bitCount = bnBitCount;\n    // (public) return number of set bits\n    BigInteger.prototype.bitCount = function () {\n        var r = 0;\n        var x = this.s & this.DM;\n        for (var i = 0; i < this.t; ++i) {\n            r += cbit(this[i] ^ x);\n        }\n        return r;\n    };\n    // BigInteger.prototype.testBit = bnTestBit;\n    // (public) true iff nth bit is set\n    BigInteger.prototype.testBit = function (n) {\n        var j = Math.floor(n / this.DB);\n        if (j >= this.t) {\n            return (this.s != 0);\n        }\n        return ((this[j] & (1 << (n % this.DB))) != 0);\n    };\n    // BigInteger.prototype.setBit = bnSetBit;\n    // (public) this | (1<<n)\n    BigInteger.prototype.setBit = function (n) {\n        return this.changeBit(n, op_or);\n    };\n    // BigInteger.prototype.clearBit = bnClearBit;\n    // (public) this & ~(1<<n)\n    BigInteger.prototype.clearBit = function (n) {\n        return this.changeBit(n, op_andnot);\n    };\n    // BigInteger.prototype.flipBit = bnFlipBit;\n    // (public) this ^ (1<<n)\n    BigInteger.prototype.flipBit = function (n) {\n        return this.changeBit(n, op_xor);\n    };\n    // BigInteger.prototype.add = bnAdd;\n    // (public) this + a\n    BigInteger.prototype.add = function (a) {\n        var r = nbi();\n        this.addTo(a, r);\n        return r;\n    };\n    // BigInteger.prototype.subtract = bnSubtract;\n    // (public) this - a\n    BigInteger.prototype.subtract = function (a) {\n        var r = nbi();\n        this.subTo(a, r);\n        return r;\n    };\n    // BigInteger.prototype.multiply = bnMultiply;\n    // (public) this * a\n    BigInteger.prototype.multiply = function (a) {\n        var r = nbi();\n        this.multiplyTo(a, r);\n        return r;\n    };\n    // BigInteger.prototype.divide = bnDivide;\n    // (public) this / a\n    BigInteger.prototype.divide = function (a) {\n        var r = nbi();\n        this.divRemTo(a, r, null);\n        return r;\n    };\n    // BigInteger.prototype.remainder = bnRemainder;\n    // (public) this % a\n    BigInteger.prototype.remainder = function (a) {\n        var r = nbi();\n        this.divRemTo(a, null, r);\n        return r;\n    };\n    // BigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\n    // (public) [this/a,this%a]\n    BigInteger.prototype.divideAndRemainder = function (a) {\n        var q = nbi();\n        var r = nbi();\n        this.divRemTo(a, q, r);\n        return [q, r];\n    };\n    // BigInteger.prototype.modPow = bnModPow;\n    // (public) this^e % m (HAC 14.85)\n    BigInteger.prototype.modPow = function (e, m) {\n        var i = e.bitLength();\n        var k;\n        var r = nbv(1);\n        var z;\n        if (i <= 0) {\n            return r;\n        }\n        else if (i < 18) {\n            k = 1;\n        }\n        else if (i < 48) {\n            k = 3;\n        }\n        else if (i < 144) {\n            k = 4;\n        }\n        else if (i < 768) {\n            k = 5;\n        }\n        else {\n            k = 6;\n        }\n        if (i < 8) {\n            z = new Classic(m);\n        }\n        else if (m.isEven()) {\n            z = new Barrett(m);\n        }\n        else {\n            z = new Montgomery(m);\n        }\n        // precomputation\n        var g = [];\n        var n = 3;\n        var k1 = k - 1;\n        var km = (1 << k) - 1;\n        g[1] = z.convert(this);\n        if (k > 1) {\n            var g2 = nbi();\n            z.sqrTo(g[1], g2);\n            while (n <= km) {\n                g[n] = nbi();\n                z.mulTo(g2, g[n - 2], g[n]);\n                n += 2;\n            }\n        }\n        var j = e.t - 1;\n        var w;\n        var is1 = true;\n        var r2 = nbi();\n        var t;\n        i = nbits(e[j]) - 1;\n        while (j >= 0) {\n            if (i >= k1) {\n                w = (e[j] >> (i - k1)) & km;\n            }\n            else {\n                w = (e[j] & ((1 << (i + 1)) - 1)) << (k1 - i);\n                if (j > 0) {\n                    w |= e[j - 1] >> (this.DB + i - k1);\n                }\n            }\n            n = k;\n            while ((w & 1) == 0) {\n                w >>= 1;\n                --n;\n            }\n            if ((i -= n) < 0) {\n                i += this.DB;\n                --j;\n            }\n            if (is1) { // ret == 1, don't bother squaring or multiplying it\n                g[w].copyTo(r);\n                is1 = false;\n            }\n            else {\n                while (n > 1) {\n                    z.sqrTo(r, r2);\n                    z.sqrTo(r2, r);\n                    n -= 2;\n                }\n                if (n > 0) {\n                    z.sqrTo(r, r2);\n                }\n                else {\n                    t = r;\n                    r = r2;\n                    r2 = t;\n                }\n                z.mulTo(r2, g[w], r);\n            }\n            while (j >= 0 && (e[j] & (1 << i)) == 0) {\n                z.sqrTo(r, r2);\n                t = r;\n                r = r2;\n                r2 = t;\n                if (--i < 0) {\n                    i = this.DB - 1;\n                    --j;\n                }\n            }\n        }\n        return z.revert(r);\n    };\n    // BigInteger.prototype.modInverse = bnModInverse;\n    // (public) 1/this % m (HAC 14.61)\n    BigInteger.prototype.modInverse = function (m) {\n        var ac = m.isEven();\n        if ((this.isEven() && ac) || m.signum() == 0) {\n            return BigInteger.ZERO;\n        }\n        var u = m.clone();\n        var v = this.clone();\n        var a = nbv(1);\n        var b = nbv(0);\n        var c = nbv(0);\n        var d = nbv(1);\n        while (u.signum() != 0) {\n            while (u.isEven()) {\n                u.rShiftTo(1, u);\n                if (ac) {\n                    if (!a.isEven() || !b.isEven()) {\n                        a.addTo(this, a);\n                        b.subTo(m, b);\n                    }\n                    a.rShiftTo(1, a);\n                }\n                else if (!b.isEven()) {\n                    b.subTo(m, b);\n                }\n                b.rShiftTo(1, b);\n            }\n            while (v.isEven()) {\n                v.rShiftTo(1, v);\n                if (ac) {\n                    if (!c.isEven() || !d.isEven()) {\n                        c.addTo(this, c);\n                        d.subTo(m, d);\n                    }\n                    c.rShiftTo(1, c);\n                }\n                else if (!d.isEven()) {\n                    d.subTo(m, d);\n                }\n                d.rShiftTo(1, d);\n            }\n            if (u.compareTo(v) >= 0) {\n                u.subTo(v, u);\n                if (ac) {\n                    a.subTo(c, a);\n                }\n                b.subTo(d, b);\n            }\n            else {\n                v.subTo(u, v);\n                if (ac) {\n                    c.subTo(a, c);\n                }\n                d.subTo(b, d);\n            }\n        }\n        if (v.compareTo(BigInteger.ONE) != 0) {\n            return BigInteger.ZERO;\n        }\n        if (d.compareTo(m) >= 0) {\n            return d.subtract(m);\n        }\n        if (d.signum() < 0) {\n            d.addTo(m, d);\n        }\n        else {\n            return d;\n        }\n        if (d.signum() < 0) {\n            return d.add(m);\n        }\n        else {\n            return d;\n        }\n    };\n    // BigInteger.prototype.pow = bnPow;\n    // (public) this^e\n    BigInteger.prototype.pow = function (e) {\n        return this.exp(e, new NullExp());\n    };\n    // BigInteger.prototype.gcd = bnGCD;\n    // (public) gcd(this,a) (HAC 14.54)\n    BigInteger.prototype.gcd = function (a) {\n        var x = (this.s < 0) ? this.negate() : this.clone();\n        var y = (a.s < 0) ? a.negate() : a.clone();\n        if (x.compareTo(y) < 0) {\n            var t = x;\n            x = y;\n            y = t;\n        }\n        var i = x.getLowestSetBit();\n        var g = y.getLowestSetBit();\n        if (g < 0) {\n            return x;\n        }\n        if (i < g) {\n            g = i;\n        }\n        if (g > 0) {\n            x.rShiftTo(g, x);\n            y.rShiftTo(g, y);\n        }\n        while (x.signum() > 0) {\n            if ((i = x.getLowestSetBit()) > 0) {\n                x.rShiftTo(i, x);\n            }\n            if ((i = y.getLowestSetBit()) > 0) {\n                y.rShiftTo(i, y);\n            }\n            if (x.compareTo(y) >= 0) {\n                x.subTo(y, x);\n                x.rShiftTo(1, x);\n            }\n            else {\n                y.subTo(x, y);\n                y.rShiftTo(1, y);\n            }\n        }\n        if (g > 0) {\n            y.lShiftTo(g, y);\n        }\n        return y;\n    };\n    // BigInteger.prototype.isProbablePrime = bnIsProbablePrime;\n    // (public) test primality with certainty >= 1-.5^t\n    BigInteger.prototype.isProbablePrime = function (t) {\n        var i;\n        var x = this.abs();\n        if (x.t == 1 && x[0] <= lowprimes[lowprimes.length - 1]) {\n            for (i = 0; i < lowprimes.length; ++i) {\n                if (x[0] == lowprimes[i]) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        if (x.isEven()) {\n            return false;\n        }\n        i = 1;\n        while (i < lowprimes.length) {\n            var m = lowprimes[i];\n            var j = i + 1;\n            while (j < lowprimes.length && m < lplim) {\n                m *= lowprimes[j++];\n            }\n            m = x.modInt(m);\n            while (i < j) {\n                if (m % lowprimes[i++] == 0) {\n                    return false;\n                }\n            }\n        }\n        return x.millerRabin(t);\n    };\n    //#endregion PUBLIC\n    //#region PROTECTED\n    // BigInteger.prototype.copyTo = bnpCopyTo;\n    // (protected) copy this to r\n    BigInteger.prototype.copyTo = function (r) {\n        for (var i = this.t - 1; i >= 0; --i) {\n            r[i] = this[i];\n        }\n        r.t = this.t;\n        r.s = this.s;\n    };\n    // BigInteger.prototype.fromInt = bnpFromInt;\n    // (protected) set from integer value x, -DV <= x < DV\n    BigInteger.prototype.fromInt = function (x) {\n        this.t = 1;\n        this.s = (x < 0) ? -1 : 0;\n        if (x > 0) {\n            this[0] = x;\n        }\n        else if (x < -1) {\n            this[0] = x + this.DV;\n        }\n        else {\n            this.t = 0;\n        }\n    };\n    // BigInteger.prototype.fromString = bnpFromString;\n    // (protected) set from string and radix\n    BigInteger.prototype.fromString = function (s, b) {\n        var k;\n        if (b == 16) {\n            k = 4;\n        }\n        else if (b == 8) {\n            k = 3;\n        }\n        else if (b == 256) {\n            k = 8;\n            /* byte array */\n        }\n        else if (b == 2) {\n            k = 1;\n        }\n        else if (b == 32) {\n            k = 5;\n        }\n        else if (b == 4) {\n            k = 2;\n        }\n        else {\n            this.fromRadix(s, b);\n            return;\n        }\n        this.t = 0;\n        this.s = 0;\n        var i = s.length;\n        var mi = false;\n        var sh = 0;\n        while (--i >= 0) {\n            var x = (k == 8) ? (+s[i]) & 0xff : intAt(s, i);\n            if (x < 0) {\n                if (s.charAt(i) == \"-\") {\n                    mi = true;\n                }\n                continue;\n            }\n            mi = false;\n            if (sh == 0) {\n                this[this.t++] = x;\n            }\n            else if (sh + k > this.DB) {\n                this[this.t - 1] |= (x & ((1 << (this.DB - sh)) - 1)) << sh;\n                this[this.t++] = (x >> (this.DB - sh));\n            }\n            else {\n                this[this.t - 1] |= x << sh;\n            }\n            sh += k;\n            if (sh >= this.DB) {\n                sh -= this.DB;\n            }\n        }\n        if (k == 8 && ((+s[0]) & 0x80) != 0) {\n            this.s = -1;\n            if (sh > 0) {\n                this[this.t - 1] |= ((1 << (this.DB - sh)) - 1) << sh;\n            }\n        }\n        this.clamp();\n        if (mi) {\n            BigInteger.ZERO.subTo(this, this);\n        }\n    };\n    // BigInteger.prototype.clamp = bnpClamp;\n    // (protected) clamp off excess high words\n    BigInteger.prototype.clamp = function () {\n        var c = this.s & this.DM;\n        while (this.t > 0 && this[this.t - 1] == c) {\n            --this.t;\n        }\n    };\n    // BigInteger.prototype.dlShiftTo = bnpDLShiftTo;\n    // (protected) r = this << n*DB\n    BigInteger.prototype.dlShiftTo = function (n, r) {\n        var i;\n        for (i = this.t - 1; i >= 0; --i) {\n            r[i + n] = this[i];\n        }\n        for (i = n - 1; i >= 0; --i) {\n            r[i] = 0;\n        }\n        r.t = this.t + n;\n        r.s = this.s;\n    };\n    // BigInteger.prototype.drShiftTo = bnpDRShiftTo;\n    // (protected) r = this >> n*DB\n    BigInteger.prototype.drShiftTo = function (n, r) {\n        for (var i = n; i < this.t; ++i) {\n            r[i - n] = this[i];\n        }\n        r.t = Math.max(this.t - n, 0);\n        r.s = this.s;\n    };\n    // BigInteger.prototype.lShiftTo = bnpLShiftTo;\n    // (protected) r = this << n\n    BigInteger.prototype.lShiftTo = function (n, r) {\n        var bs = n % this.DB;\n        var cbs = this.DB - bs;\n        var bm = (1 << cbs) - 1;\n        var ds = Math.floor(n / this.DB);\n        var c = (this.s << bs) & this.DM;\n        for (var i = this.t - 1; i >= 0; --i) {\n            r[i + ds + 1] = (this[i] >> cbs) | c;\n            c = (this[i] & bm) << bs;\n        }\n        for (var i = ds - 1; i >= 0; --i) {\n            r[i] = 0;\n        }\n        r[ds] = c;\n        r.t = this.t + ds + 1;\n        r.s = this.s;\n        r.clamp();\n    };\n    // BigInteger.prototype.rShiftTo = bnpRShiftTo;\n    // (protected) r = this >> n\n    BigInteger.prototype.rShiftTo = function (n, r) {\n        r.s = this.s;\n        var ds = Math.floor(n / this.DB);\n        if (ds >= this.t) {\n            r.t = 0;\n            return;\n        }\n        var bs = n % this.DB;\n        var cbs = this.DB - bs;\n        var bm = (1 << bs) - 1;\n        r[0] = this[ds] >> bs;\n        for (var i = ds + 1; i < this.t; ++i) {\n            r[i - ds - 1] |= (this[i] & bm) << cbs;\n            r[i - ds] = this[i] >> bs;\n        }\n        if (bs > 0) {\n            r[this.t - ds - 1] |= (this.s & bm) << cbs;\n        }\n        r.t = this.t - ds;\n        r.clamp();\n    };\n    // BigInteger.prototype.subTo = bnpSubTo;\n    // (protected) r = this - a\n    BigInteger.prototype.subTo = function (a, r) {\n        var i = 0;\n        var c = 0;\n        var m = Math.min(a.t, this.t);\n        while (i < m) {\n            c += this[i] - a[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        if (a.t < this.t) {\n            c -= a.s;\n            while (i < this.t) {\n                c += this[i];\n                r[i++] = c & this.DM;\n                c >>= this.DB;\n            }\n            c += this.s;\n        }\n        else {\n            c += this.s;\n            while (i < a.t) {\n                c -= a[i];\n                r[i++] = c & this.DM;\n                c >>= this.DB;\n            }\n            c -= a.s;\n        }\n        r.s = (c < 0) ? -1 : 0;\n        if (c < -1) {\n            r[i++] = this.DV + c;\n        }\n        else if (c > 0) {\n            r[i++] = c;\n        }\n        r.t = i;\n        r.clamp();\n    };\n    // BigInteger.prototype.multiplyTo = bnpMultiplyTo;\n    // (protected) r = this * a, r != this,a (HAC 14.12)\n    // \"this\" should be the larger one if appropriate.\n    BigInteger.prototype.multiplyTo = function (a, r) {\n        var x = this.abs();\n        var y = a.abs();\n        var i = x.t;\n        r.t = i + y.t;\n        while (--i >= 0) {\n            r[i] = 0;\n        }\n        for (i = 0; i < y.t; ++i) {\n            r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n        }\n        r.s = 0;\n        r.clamp();\n        if (this.s != a.s) {\n            BigInteger.ZERO.subTo(r, r);\n        }\n    };\n    // BigInteger.prototype.squareTo = bnpSquareTo;\n    // (protected) r = this^2, r != this (HAC 14.16)\n    BigInteger.prototype.squareTo = function (r) {\n        var x = this.abs();\n        var i = r.t = 2 * x.t;\n        while (--i >= 0) {\n            r[i] = 0;\n        }\n        for (i = 0; i < x.t - 1; ++i) {\n            var c = x.am(i, x[i], r, 2 * i, 0, 1);\n            if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\n                r[i + x.t] -= x.DV;\n                r[i + x.t + 1] = 1;\n            }\n        }\n        if (r.t > 0) {\n            r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n        }\n        r.s = 0;\n        r.clamp();\n    };\n    // BigInteger.prototype.divRemTo = bnpDivRemTo;\n    // (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n    // r != q, this != m.  q or r may be null.\n    BigInteger.prototype.divRemTo = function (m, q, r) {\n        var pm = m.abs();\n        if (pm.t <= 0) {\n            return;\n        }\n        var pt = this.abs();\n        if (pt.t < pm.t) {\n            if (q != null) {\n                q.fromInt(0);\n            }\n            if (r != null) {\n                this.copyTo(r);\n            }\n            return;\n        }\n        if (r == null) {\n            r = nbi();\n        }\n        var y = nbi();\n        var ts = this.s;\n        var ms = m.s;\n        var nsh = this.DB - nbits(pm[pm.t - 1]); // normalize modulus\n        if (nsh > 0) {\n            pm.lShiftTo(nsh, y);\n            pt.lShiftTo(nsh, r);\n        }\n        else {\n            pm.copyTo(y);\n            pt.copyTo(r);\n        }\n        var ys = y.t;\n        var y0 = y[ys - 1];\n        if (y0 == 0) {\n            return;\n        }\n        var yt = y0 * (1 << this.F1) + ((ys > 1) ? y[ys - 2] >> this.F2 : 0);\n        var d1 = this.FV / yt;\n        var d2 = (1 << this.F1) / yt;\n        var e = 1 << this.F2;\n        var i = r.t;\n        var j = i - ys;\n        var t = (q == null) ? nbi() : q;\n        y.dlShiftTo(j, t);\n        if (r.compareTo(t) >= 0) {\n            r[r.t++] = 1;\n            r.subTo(t, r);\n        }\n        BigInteger.ONE.dlShiftTo(ys, t);\n        t.subTo(y, y); // \"negative\" y so we can replace sub with am later\n        while (y.t < ys) {\n            y[y.t++] = 0;\n        }\n        while (--j >= 0) {\n            // Estimate quotient digit\n            var qd = (r[--i] == y0) ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n            if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) { // Try it out\n                y.dlShiftTo(j, t);\n                r.subTo(t, r);\n                while (r[i] < --qd) {\n                    r.subTo(t, r);\n                }\n            }\n        }\n        if (q != null) {\n            r.drShiftTo(ys, q);\n            if (ts != ms) {\n                BigInteger.ZERO.subTo(q, q);\n            }\n        }\n        r.t = ys;\n        r.clamp();\n        if (nsh > 0) {\n            r.rShiftTo(nsh, r);\n        } // Denormalize remainder\n        if (ts < 0) {\n            BigInteger.ZERO.subTo(r, r);\n        }\n    };\n    // BigInteger.prototype.invDigit = bnpInvDigit;\n    // (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n    // justification:\n    //         xy == 1 (mod m)\n    //         xy =  1+km\n    //   xy(2-xy) = (1+km)(1-km)\n    // x[y(2-xy)] = 1-k^2m^2\n    // x[y(2-xy)] == 1 (mod m^2)\n    // if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n    // should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n    // JS multiply \"overflows\" differently from C/C++, so care is needed here.\n    BigInteger.prototype.invDigit = function () {\n        if (this.t < 1) {\n            return 0;\n        }\n        var x = this[0];\n        if ((x & 1) == 0) {\n            return 0;\n        }\n        var y = x & 3; // y == 1/x mod 2^2\n        y = (y * (2 - (x & 0xf) * y)) & 0xf; // y == 1/x mod 2^4\n        y = (y * (2 - (x & 0xff) * y)) & 0xff; // y == 1/x mod 2^8\n        y = (y * (2 - (((x & 0xffff) * y) & 0xffff))) & 0xffff; // y == 1/x mod 2^16\n        // last step - calculate inverse mod DV directly;\n        // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n        y = (y * (2 - x * y % this.DV)) % this.DV; // y == 1/x mod 2^dbits\n        // we really want the negative inverse, and -DV < y < DV\n        return (y > 0) ? this.DV - y : -y;\n    };\n    // BigInteger.prototype.isEven = bnpIsEven;\n    // (protected) true iff this is even\n    BigInteger.prototype.isEven = function () {\n        return ((this.t > 0) ? (this[0] & 1) : this.s) == 0;\n    };\n    // BigInteger.prototype.exp = bnpExp;\n    // (protected) this^e, e < 2^32, doing sqr and mul with \"r\" (HAC 14.79)\n    BigInteger.prototype.exp = function (e, z) {\n        if (e > 0xffffffff || e < 1) {\n            return BigInteger.ONE;\n        }\n        var r = nbi();\n        var r2 = nbi();\n        var g = z.convert(this);\n        var i = nbits(e) - 1;\n        g.copyTo(r);\n        while (--i >= 0) {\n            z.sqrTo(r, r2);\n            if ((e & (1 << i)) > 0) {\n                z.mulTo(r2, g, r);\n            }\n            else {\n                var t = r;\n                r = r2;\n                r2 = t;\n            }\n        }\n        return z.revert(r);\n    };\n    // BigInteger.prototype.chunkSize = bnpChunkSize;\n    // (protected) return x s.t. r^x < DV\n    BigInteger.prototype.chunkSize = function (r) {\n        return Math.floor(Math.LN2 * this.DB / Math.log(r));\n    };\n    // BigInteger.prototype.toRadix = bnpToRadix;\n    // (protected) convert to radix string\n    BigInteger.prototype.toRadix = function (b) {\n        if (b == null) {\n            b = 10;\n        }\n        if (this.signum() == 0 || b < 2 || b > 36) {\n            return \"0\";\n        }\n        var cs = this.chunkSize(b);\n        var a = Math.pow(b, cs);\n        var d = nbv(a);\n        var y = nbi();\n        var z = nbi();\n        var r = \"\";\n        this.divRemTo(d, y, z);\n        while (y.signum() > 0) {\n            r = (a + z.intValue()).toString(b).substr(1) + r;\n            y.divRemTo(d, y, z);\n        }\n        return z.intValue().toString(b) + r;\n    };\n    // BigInteger.prototype.fromRadix = bnpFromRadix;\n    // (protected) convert from radix string\n    BigInteger.prototype.fromRadix = function (s, b) {\n        this.fromInt(0);\n        if (b == null) {\n            b = 10;\n        }\n        var cs = this.chunkSize(b);\n        var d = Math.pow(b, cs);\n        var mi = false;\n        var j = 0;\n        var w = 0;\n        for (var i = 0; i < s.length; ++i) {\n            var x = intAt(s, i);\n            if (x < 0) {\n                if (s.charAt(i) == \"-\" && this.signum() == 0) {\n                    mi = true;\n                }\n                continue;\n            }\n            w = b * w + x;\n            if (++j >= cs) {\n                this.dMultiply(d);\n                this.dAddOffset(w, 0);\n                j = 0;\n                w = 0;\n            }\n        }\n        if (j > 0) {\n            this.dMultiply(Math.pow(b, j));\n            this.dAddOffset(w, 0);\n        }\n        if (mi) {\n            BigInteger.ZERO.subTo(this, this);\n        }\n    };\n    // BigInteger.prototype.fromNumber = bnpFromNumber;\n    // (protected) alternate constructor\n    BigInteger.prototype.fromNumber = function (a, b, c) {\n        if (\"number\" == typeof b) {\n            // new BigInteger(int,int,RNG)\n            if (a < 2) {\n                this.fromInt(1);\n            }\n            else {\n                this.fromNumber(a, c);\n                if (!this.testBit(a - 1)) {\n                    // force MSB set\n                    this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), op_or, this);\n                }\n                if (this.isEven()) {\n                    this.dAddOffset(1, 0);\n                } // force odd\n                while (!this.isProbablePrime(b)) {\n                    this.dAddOffset(2, 0);\n                    if (this.bitLength() > a) {\n                        this.subTo(BigInteger.ONE.shiftLeft(a - 1), this);\n                    }\n                }\n            }\n        }\n        else {\n            // new BigInteger(int,RNG)\n            var x = [];\n            var t = a & 7;\n            x.length = (a >> 3) + 1;\n            b.nextBytes(x);\n            if (t > 0) {\n                x[0] &= ((1 << t) - 1);\n            }\n            else {\n                x[0] = 0;\n            }\n            this.fromString(x, 256);\n        }\n    };\n    // BigInteger.prototype.bitwiseTo = bnpBitwiseTo;\n    // (protected) r = this op a (bitwise)\n    BigInteger.prototype.bitwiseTo = function (a, op, r) {\n        var i;\n        var f;\n        var m = Math.min(a.t, this.t);\n        for (i = 0; i < m; ++i) {\n            r[i] = op(this[i], a[i]);\n        }\n        if (a.t < this.t) {\n            f = a.s & this.DM;\n            for (i = m; i < this.t; ++i) {\n                r[i] = op(this[i], f);\n            }\n            r.t = this.t;\n        }\n        else {\n            f = this.s & this.DM;\n            for (i = m; i < a.t; ++i) {\n                r[i] = op(f, a[i]);\n            }\n            r.t = a.t;\n        }\n        r.s = op(this.s, a.s);\n        r.clamp();\n    };\n    // BigInteger.prototype.changeBit = bnpChangeBit;\n    // (protected) this op (1<<n)\n    BigInteger.prototype.changeBit = function (n, op) {\n        var r = BigInteger.ONE.shiftLeft(n);\n        this.bitwiseTo(r, op, r);\n        return r;\n    };\n    // BigInteger.prototype.addTo = bnpAddTo;\n    // (protected) r = this + a\n    BigInteger.prototype.addTo = function (a, r) {\n        var i = 0;\n        var c = 0;\n        var m = Math.min(a.t, this.t);\n        while (i < m) {\n            c += this[i] + a[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        if (a.t < this.t) {\n            c += a.s;\n            while (i < this.t) {\n                c += this[i];\n                r[i++] = c & this.DM;\n                c >>= this.DB;\n            }\n            c += this.s;\n        }\n        else {\n            c += this.s;\n            while (i < a.t) {\n                c += a[i];\n                r[i++] = c & this.DM;\n                c >>= this.DB;\n            }\n            c += a.s;\n        }\n        r.s = (c < 0) ? -1 : 0;\n        if (c > 0) {\n            r[i++] = c;\n        }\n        else if (c < -1) {\n            r[i++] = this.DV + c;\n        }\n        r.t = i;\n        r.clamp();\n    };\n    // BigInteger.prototype.dMultiply = bnpDMultiply;\n    // (protected) this *= n, this >= 0, 1 < n < DV\n    BigInteger.prototype.dMultiply = function (n) {\n        this[this.t] = this.am(0, n - 1, this, 0, 0, this.t);\n        ++this.t;\n        this.clamp();\n    };\n    // BigInteger.prototype.dAddOffset = bnpDAddOffset;\n    // (protected) this += n << w words, this >= 0\n    BigInteger.prototype.dAddOffset = function (n, w) {\n        if (n == 0) {\n            return;\n        }\n        while (this.t <= w) {\n            this[this.t++] = 0;\n        }\n        this[w] += n;\n        while (this[w] >= this.DV) {\n            this[w] -= this.DV;\n            if (++w >= this.t) {\n                this[this.t++] = 0;\n            }\n            ++this[w];\n        }\n    };\n    // BigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\n    // (protected) r = lower n words of \"this * a\", a.t <= n\n    // \"this\" should be the larger one if appropriate.\n    BigInteger.prototype.multiplyLowerTo = function (a, n, r) {\n        var i = Math.min(this.t + a.t, n);\n        r.s = 0; // assumes a,this >= 0\n        r.t = i;\n        while (i > 0) {\n            r[--i] = 0;\n        }\n        for (var j = r.t - this.t; i < j; ++i) {\n            r[i + this.t] = this.am(0, a[i], r, i, 0, this.t);\n        }\n        for (var j = Math.min(a.t, n); i < j; ++i) {\n            this.am(0, a[i], r, i, 0, n - i);\n        }\n        r.clamp();\n    };\n    // BigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\n    // (protected) r = \"this * a\" without lower n words, n > 0\n    // \"this\" should be the larger one if appropriate.\n    BigInteger.prototype.multiplyUpperTo = function (a, n, r) {\n        --n;\n        var i = r.t = this.t + a.t - n;\n        r.s = 0; // assumes a,this >= 0\n        while (--i >= 0) {\n            r[i] = 0;\n        }\n        for (i = Math.max(n - this.t, 0); i < a.t; ++i) {\n            r[this.t + i - n] = this.am(n - i, a[i], r, 0, 0, this.t + i - n);\n        }\n        r.clamp();\n        r.drShiftTo(1, r);\n    };\n    // BigInteger.prototype.modInt = bnpModInt;\n    // (protected) this % n, n < 2^26\n    BigInteger.prototype.modInt = function (n) {\n        if (n <= 0) {\n            return 0;\n        }\n        var d = this.DV % n;\n        var r = (this.s < 0) ? n - 1 : 0;\n        if (this.t > 0) {\n            if (d == 0) {\n                r = this[0] % n;\n            }\n            else {\n                for (var i = this.t - 1; i >= 0; --i) {\n                    r = (d * r + this[i]) % n;\n                }\n            }\n        }\n        return r;\n    };\n    // BigInteger.prototype.millerRabin = bnpMillerRabin;\n    // (protected) true if probably prime (HAC 4.24, Miller-Rabin)\n    BigInteger.prototype.millerRabin = function (t) {\n        var n1 = this.subtract(BigInteger.ONE);\n        var k = n1.getLowestSetBit();\n        if (k <= 0) {\n            return false;\n        }\n        var r = n1.shiftRight(k);\n        t = (t + 1) >> 1;\n        if (t > lowprimes.length) {\n            t = lowprimes.length;\n        }\n        var a = nbi();\n        for (var i = 0; i < t; ++i) {\n            // Pick bases at random, instead of starting at 2\n            a.fromInt(lowprimes[Math.floor(Math.random() * lowprimes.length)]);\n            var y = a.modPow(r, this);\n            if (y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {\n                var j = 1;\n                while (j++ < k && y.compareTo(n1) != 0) {\n                    y = y.modPowInt(2, this);\n                    if (y.compareTo(BigInteger.ONE) == 0) {\n                        return false;\n                    }\n                }\n                if (y.compareTo(n1) != 0) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n    // BigInteger.prototype.square = bnSquare;\n    // (public) this^2\n    BigInteger.prototype.square = function () {\n        var r = nbi();\n        this.squareTo(r);\n        return r;\n    };\n    //#region ASYNC\n    // Public API method\n    BigInteger.prototype.gcda = function (a, callback) {\n        var x = (this.s < 0) ? this.negate() : this.clone();\n        var y = (a.s < 0) ? a.negate() : a.clone();\n        if (x.compareTo(y) < 0) {\n            var t = x;\n            x = y;\n            y = t;\n        }\n        var i = x.getLowestSetBit();\n        var g = y.getLowestSetBit();\n        if (g < 0) {\n            callback(x);\n            return;\n        }\n        if (i < g) {\n            g = i;\n        }\n        if (g > 0) {\n            x.rShiftTo(g, x);\n            y.rShiftTo(g, y);\n        }\n        // Workhorse of the algorithm, gets called 200 - 800 times per 512 bit keygen.\n        var gcda1 = function () {\n            if ((i = x.getLowestSetBit()) > 0) {\n                x.rShiftTo(i, x);\n            }\n            if ((i = y.getLowestSetBit()) > 0) {\n                y.rShiftTo(i, y);\n            }\n            if (x.compareTo(y) >= 0) {\n                x.subTo(y, x);\n                x.rShiftTo(1, x);\n            }\n            else {\n                y.subTo(x, y);\n                y.rShiftTo(1, y);\n            }\n            if (!(x.signum() > 0)) {\n                if (g > 0) {\n                    y.lShiftTo(g, y);\n                }\n                setTimeout(function () { callback(y); }, 0); // escape\n            }\n            else {\n                setTimeout(gcda1, 0);\n            }\n        };\n        setTimeout(gcda1, 10);\n    };\n    // (protected) alternate constructor\n    BigInteger.prototype.fromNumberAsync = function (a, b, c, callback) {\n        if (\"number\" == typeof b) {\n            if (a < 2) {\n                this.fromInt(1);\n            }\n            else {\n                this.fromNumber(a, c);\n                if (!this.testBit(a - 1)) {\n                    this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), op_or, this);\n                }\n                if (this.isEven()) {\n                    this.dAddOffset(1, 0);\n                }\n                var bnp_1 = this;\n                var bnpfn1_1 = function () {\n                    bnp_1.dAddOffset(2, 0);\n                    if (bnp_1.bitLength() > a) {\n                        bnp_1.subTo(BigInteger.ONE.shiftLeft(a - 1), bnp_1);\n                    }\n                    if (bnp_1.isProbablePrime(b)) {\n                        setTimeout(function () { callback(); }, 0); // escape\n                    }\n                    else {\n                        setTimeout(bnpfn1_1, 0);\n                    }\n                };\n                setTimeout(bnpfn1_1, 0);\n            }\n        }\n        else {\n            var x = [];\n            var t = a & 7;\n            x.length = (a >> 3) + 1;\n            b.nextBytes(x);\n            if (t > 0) {\n                x[0] &= ((1 << t) - 1);\n            }\n            else {\n                x[0] = 0;\n            }\n            this.fromString(x, 256);\n        }\n    };\n    return BigInteger;\n}());\n//#region REDUCERS\n//#region NullExp\nvar NullExp = /** @class */ (function () {\n    function NullExp() {\n    }\n    // NullExp.prototype.convert = nNop;\n    NullExp.prototype.convert = function (x) {\n        return x;\n    };\n    // NullExp.prototype.revert = nNop;\n    NullExp.prototype.revert = function (x) {\n        return x;\n    };\n    // NullExp.prototype.mulTo = nMulTo;\n    NullExp.prototype.mulTo = function (x, y, r) {\n        x.multiplyTo(y, r);\n    };\n    // NullExp.prototype.sqrTo = nSqrTo;\n    NullExp.prototype.sqrTo = function (x, r) {\n        x.squareTo(r);\n    };\n    return NullExp;\n}());\n// Modular reduction using \"classic\" algorithm\nvar Classic = /** @class */ (function () {\n    function Classic(m) {\n        this.m = m;\n    }\n    // Classic.prototype.convert = cConvert;\n    Classic.prototype.convert = function (x) {\n        if (x.s < 0 || x.compareTo(this.m) >= 0) {\n            return x.mod(this.m);\n        }\n        else {\n            return x;\n        }\n    };\n    // Classic.prototype.revert = cRevert;\n    Classic.prototype.revert = function (x) {\n        return x;\n    };\n    // Classic.prototype.reduce = cReduce;\n    Classic.prototype.reduce = function (x) {\n        x.divRemTo(this.m, null, x);\n    };\n    // Classic.prototype.mulTo = cMulTo;\n    Classic.prototype.mulTo = function (x, y, r) {\n        x.multiplyTo(y, r);\n        this.reduce(r);\n    };\n    // Classic.prototype.sqrTo = cSqrTo;\n    Classic.prototype.sqrTo = function (x, r) {\n        x.squareTo(r);\n        this.reduce(r);\n    };\n    return Classic;\n}());\n//#endregion\n//#region Montgomery\n// Montgomery reduction\nvar Montgomery = /** @class */ (function () {\n    function Montgomery(m) {\n        this.m = m;\n        this.mp = m.invDigit();\n        this.mpl = this.mp & 0x7fff;\n        this.mph = this.mp >> 15;\n        this.um = (1 << (m.DB - 15)) - 1;\n        this.mt2 = 2 * m.t;\n    }\n    // Montgomery.prototype.convert = montConvert;\n    // xR mod m\n    Montgomery.prototype.convert = function (x) {\n        var r = nbi();\n        x.abs().dlShiftTo(this.m.t, r);\n        r.divRemTo(this.m, null, r);\n        if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) {\n            this.m.subTo(r, r);\n        }\n        return r;\n    };\n    // Montgomery.prototype.revert = montRevert;\n    // x/R mod m\n    Montgomery.prototype.revert = function (x) {\n        var r = nbi();\n        x.copyTo(r);\n        this.reduce(r);\n        return r;\n    };\n    // Montgomery.prototype.reduce = montReduce;\n    // x = x/R mod m (HAC 14.32)\n    Montgomery.prototype.reduce = function (x) {\n        while (x.t <= this.mt2) {\n            // pad x so am has enough room later\n            x[x.t++] = 0;\n        }\n        for (var i = 0; i < this.m.t; ++i) {\n            // faster way of calculating u0 = x[i]*mp mod DV\n            var j = x[i] & 0x7fff;\n            var u0 = (j * this.mpl + (((j * this.mph + (x[i] >> 15) * this.mpl) & this.um) << 15)) & x.DM;\n            // use am to combine the multiply-shift-add into one call\n            j = i + this.m.t;\n            x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n            // propagate carry\n            while (x[j] >= x.DV) {\n                x[j] -= x.DV;\n                x[++j]++;\n            }\n        }\n        x.clamp();\n        x.drShiftTo(this.m.t, x);\n        if (x.compareTo(this.m) >= 0) {\n            x.subTo(this.m, x);\n        }\n    };\n    // Montgomery.prototype.mulTo = montMulTo;\n    // r = \"xy/R mod m\"; x,y != r\n    Montgomery.prototype.mulTo = function (x, y, r) {\n        x.multiplyTo(y, r);\n        this.reduce(r);\n    };\n    // Montgomery.prototype.sqrTo = montSqrTo;\n    // r = \"x^2/R mod m\"; x != r\n    Montgomery.prototype.sqrTo = function (x, r) {\n        x.squareTo(r);\n        this.reduce(r);\n    };\n    return Montgomery;\n}());\n//#endregion Montgomery\n//#region Barrett\n// Barrett modular reduction\nvar Barrett = /** @class */ (function () {\n    function Barrett(m) {\n        this.m = m;\n        // setup Barrett\n        this.r2 = nbi();\n        this.q3 = nbi();\n        BigInteger.ONE.dlShiftTo(2 * m.t, this.r2);\n        this.mu = this.r2.divide(m);\n    }\n    // Barrett.prototype.convert = barrettConvert;\n    Barrett.prototype.convert = function (x) {\n        if (x.s < 0 || x.t > 2 * this.m.t) {\n            return x.mod(this.m);\n        }\n        else if (x.compareTo(this.m) < 0) {\n            return x;\n        }\n        else {\n            var r = nbi();\n            x.copyTo(r);\n            this.reduce(r);\n            return r;\n        }\n    };\n    // Barrett.prototype.revert = barrettRevert;\n    Barrett.prototype.revert = function (x) {\n        return x;\n    };\n    // Barrett.prototype.reduce = barrettReduce;\n    // x = x mod m (HAC 14.42)\n    Barrett.prototype.reduce = function (x) {\n        x.drShiftTo(this.m.t - 1, this.r2);\n        if (x.t > this.m.t + 1) {\n            x.t = this.m.t + 1;\n            x.clamp();\n        }\n        this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3);\n        this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2);\n        while (x.compareTo(this.r2) < 0) {\n            x.dAddOffset(1, this.m.t + 1);\n        }\n        x.subTo(this.r2, x);\n        while (x.compareTo(this.m) >= 0) {\n            x.subTo(this.m, x);\n        }\n    };\n    // Barrett.prototype.mulTo = barrettMulTo;\n    // r = x*y mod m; x,y != r\n    Barrett.prototype.mulTo = function (x, y, r) {\n        x.multiplyTo(y, r);\n        this.reduce(r);\n    };\n    // Barrett.prototype.sqrTo = barrettSqrTo;\n    // r = x^2 mod m; x != r\n    Barrett.prototype.sqrTo = function (x, r) {\n        x.squareTo(r);\n        this.reduce(r);\n    };\n    return Barrett;\n}());\n//#endregion\n//#endregion REDUCERS\n// return new, unset BigInteger\nfunction nbi() { return new BigInteger(null); }\nfunction parseBigInt(str, r) {\n    return new BigInteger(str, r);\n}\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i, x, w, j, c, n) {\n    while (--n >= 0) {\n        var v = x * this[i++] + w[j] + c;\n        c = Math.floor(v / 0x4000000);\n        w[j++] = v & 0x3ffffff;\n    }\n    return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i, x, w, j, c, n) {\n    var xl = x & 0x7fff;\n    var xh = x >> 15;\n    while (--n >= 0) {\n        var l = this[i] & 0x7fff;\n        var h = this[i++] >> 15;\n        var m = xh * l + h * xl;\n        l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n        c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n        w[j++] = l & 0x3fffffff;\n    }\n    return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i, x, w, j, c, n) {\n    var xl = x & 0x3fff;\n    var xh = x >> 14;\n    while (--n >= 0) {\n        var l = this[i] & 0x3fff;\n        var h = this[i++] >> 14;\n        var m = xh * l + h * xl;\n        l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n        c = (l >> 28) + (m >> 14) + xh * h;\n        w[j++] = l & 0xfffffff;\n    }\n    return c;\n}\nif (j_lm && (navigator.appName == \"Microsoft Internet Explorer\")) {\n    BigInteger.prototype.am = am2;\n    dbits = 30;\n}\nelse if (j_lm && (navigator.appName != \"Netscape\")) {\n    BigInteger.prototype.am = am1;\n    dbits = 26;\n}\nelse { // Mozilla/Netscape seems to prefer am3\n    BigInteger.prototype.am = am3;\n    dbits = 28;\n}\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = ((1 << dbits) - 1);\nBigInteger.prototype.DV = (1 << dbits);\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n// Digit conversions\nvar BI_RC = [];\nvar rr;\nvar vv;\nrr = \"0\".charCodeAt(0);\nfor (vv = 0; vv <= 9; ++vv) {\n    BI_RC[rr++] = vv;\n}\nrr = \"a\".charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) {\n    BI_RC[rr++] = vv;\n}\nrr = \"A\".charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) {\n    BI_RC[rr++] = vv;\n}\nfunction intAt(s, i) {\n    var c = BI_RC[s.charCodeAt(i)];\n    return (c == null) ? -1 : c;\n}\n// return bigint initialized to value\nfunction nbv(i) {\n    var r = nbi();\n    r.fromInt(i);\n    return r;\n}\n// returns bit length of the integer x\nfunction nbits(x) {\n    var r = 1;\n    var t;\n    if ((t = x >>> 16) != 0) {\n        x = t;\n        r += 16;\n    }\n    if ((t = x >> 8) != 0) {\n        x = t;\n        r += 8;\n    }\n    if ((t = x >> 4) != 0) {\n        x = t;\n        r += 4;\n    }\n    if ((t = x >> 2) != 0) {\n        x = t;\n        r += 2;\n    }\n    if ((t = x >> 1) != 0) {\n        x = t;\n        r += 1;\n    }\n    return r;\n}\n// \"constants\"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);\n\n// prng4.js - uses Arcfour as a PRNG\nvar Arcfour = /** @class */ (function () {\n    function Arcfour() {\n        this.i = 0;\n        this.j = 0;\n        this.S = [];\n    }\n    // Arcfour.prototype.init = ARC4init;\n    // Initialize arcfour context from key, an array of ints, each from [0..255]\n    Arcfour.prototype.init = function (key) {\n        var i;\n        var j;\n        var t;\n        for (i = 0; i < 256; ++i) {\n            this.S[i] = i;\n        }\n        j = 0;\n        for (i = 0; i < 256; ++i) {\n            j = (j + this.S[i] + key[i % key.length]) & 255;\n            t = this.S[i];\n            this.S[i] = this.S[j];\n            this.S[j] = t;\n        }\n        this.i = 0;\n        this.j = 0;\n    };\n    // Arcfour.prototype.next = ARC4next;\n    Arcfour.prototype.next = function () {\n        var t;\n        this.i = (this.i + 1) & 255;\n        this.j = (this.j + this.S[this.i]) & 255;\n        t = this.S[this.i];\n        this.S[this.i] = this.S[this.j];\n        this.S[this.j] = t;\n        return this.S[(t + this.S[this.i]) & 255];\n    };\n    return Arcfour;\n}());\n// Plug in your RNG constructor here\nfunction prng_newstate() {\n    return new Arcfour();\n}\n// Pool size must be a multiple of 4 and greater than 32.\n// An array of bytes the size of the pool will be passed to init()\nvar rng_psize = 256;\n\n// Random number generator - requires a PRNG backend, e.g. prng4.js\nvar rng_state;\nvar rng_pool = null;\nvar rng_pptr;\n// Initialize the pool with junk if needed.\nif (rng_pool == null) {\n    rng_pool = [];\n    rng_pptr = 0;\n    var t = void 0;\n    if (window.crypto && window.crypto.getRandomValues) {\n        // Extract entropy (2048 bits) from RNG if available\n        var z = new Uint32Array(256);\n        window.crypto.getRandomValues(z);\n        for (t = 0; t < z.length; ++t) {\n            rng_pool[rng_pptr++] = z[t] & 255;\n        }\n    }\n    // Use mouse events for entropy, if we do not have enough entropy by the time\n    // we need it, entropy will be generated by Math.random.\n    var onMouseMoveListener_1 = function (ev) {\n        this.count = this.count || 0;\n        if (this.count >= 256 || rng_pptr >= rng_psize) {\n            if (window.removeEventListener) {\n                window.removeEventListener(\"mousemove\", onMouseMoveListener_1, false);\n            }\n            else if (window.detachEvent) {\n                window.detachEvent(\"onmousemove\", onMouseMoveListener_1);\n            }\n            return;\n        }\n        try {\n            var mouseCoordinates = ev.x + ev.y;\n            rng_pool[rng_pptr++] = mouseCoordinates & 255;\n            this.count += 1;\n        }\n        catch (e) {\n            // Sometimes Firefox will deny permission to access event properties for some reason. Ignore.\n        }\n    };\n    if (window.addEventListener) {\n        window.addEventListener(\"mousemove\", onMouseMoveListener_1, false);\n    }\n    else if (window.attachEvent) {\n        window.attachEvent(\"onmousemove\", onMouseMoveListener_1);\n    }\n}\nfunction rng_get_byte() {\n    if (rng_state == null) {\n        rng_state = prng_newstate();\n        // At this point, we may not have collected enough entropy.  If not, fall back to Math.random\n        while (rng_pptr < rng_psize) {\n            var random = Math.floor(65536 * Math.random());\n            rng_pool[rng_pptr++] = random & 255;\n        }\n        rng_state.init(rng_pool);\n        for (rng_pptr = 0; rng_pptr < rng_pool.length; ++rng_pptr) {\n            rng_pool[rng_pptr] = 0;\n        }\n        rng_pptr = 0;\n    }\n    // TODO: allow reseeding after first request\n    return rng_state.next();\n}\nvar SecureRandom = /** @class */ (function () {\n    function SecureRandom() {\n    }\n    SecureRandom.prototype.nextBytes = function (ba) {\n        for (var i = 0; i < ba.length; ++i) {\n            ba[i] = rng_get_byte();\n        }\n    };\n    return SecureRandom;\n}());\n\n// Depends on jsbn.js and rng.js\n// function linebrk(s,n) {\n//   var ret = \"\";\n//   var i = 0;\n//   while(i + n < s.length) {\n//     ret += s.substring(i,i+n) + \"\\n\";\n//     i += n;\n//   }\n//   return ret + s.substring(i,s.length);\n// }\n// function byte2Hex(b) {\n//   if(b < 0x10)\n//     return \"0\" + b.toString(16);\n//   else\n//     return b.toString(16);\n// }\nfunction pkcs1pad1(s, n) {\n    if (n < s.length + 22) {\n        console.error(\"Message too long for RSA\");\n        return null;\n    }\n    var len = n - s.length - 6;\n    var filler = \"\";\n    for (var f = 0; f < len; f += 2) {\n        filler += \"ff\";\n    }\n    var m = \"0001\" + filler + \"00\" + s;\n    return parseBigInt(m, 16);\n}\n// PKCS#1 (type 2, random) pad input string s to n bytes, and return a bigint\nfunction pkcs1pad2(s, n) {\n    if (n < s.length + 11) { // TODO: fix for utf-8\n        console.error(\"Message too long for RSA\");\n        return null;\n    }\n    var ba = [];\n    var i = s.length - 1;\n    while (i >= 0 && n > 0) {\n        var c = s.charCodeAt(i--);\n        if (c < 128) { // encode using utf-8\n            ba[--n] = c;\n        }\n        else if ((c > 127) && (c < 2048)) {\n            ba[--n] = (c & 63) | 128;\n            ba[--n] = (c >> 6) | 192;\n        }\n        else {\n            ba[--n] = (c & 63) | 128;\n            ba[--n] = ((c >> 6) & 63) | 128;\n            ba[--n] = (c >> 12) | 224;\n        }\n    }\n    ba[--n] = 0;\n    var rng = new SecureRandom();\n    var x = [];\n    while (n > 2) { // random non-zero pad\n        x[0] = 0;\n        while (x[0] == 0) {\n            rng.nextBytes(x);\n        }\n        ba[--n] = x[0];\n    }\n    ba[--n] = 2;\n    ba[--n] = 0;\n    return new BigInteger(ba);\n}\n// \"empty\" RSA key constructor\nvar RSAKey = /** @class */ (function () {\n    function RSAKey() {\n        this.n = null;\n        this.e = 0;\n        this.d = null;\n        this.p = null;\n        this.q = null;\n        this.dmp1 = null;\n        this.dmq1 = null;\n        this.coeff = null;\n    }\n    //#region PROTECTED\n    // protected\n    // RSAKey.prototype.doPublic = RSADoPublic;\n    // Perform raw public operation on \"x\": return x^e (mod n)\n    RSAKey.prototype.doPublic = function (x) {\n        return x.modPowInt(this.e, this.n);\n    };\n    // RSAKey.prototype.doPrivate = RSADoPrivate;\n    // Perform raw private operation on \"x\": return x^d (mod n)\n    RSAKey.prototype.doPrivate = function (x) {\n        if (this.p == null || this.q == null) {\n            return x.modPow(this.d, this.n);\n        }\n        // TODO: re-calculate any missing CRT params\n        var xp = x.mod(this.p).modPow(this.dmp1, this.p);\n        var xq = x.mod(this.q).modPow(this.dmq1, this.q);\n        while (xp.compareTo(xq) < 0) {\n            xp = xp.add(this.p);\n        }\n        return xp.subtract(xq).multiply(this.coeff).mod(this.p).multiply(this.q).add(xq);\n    };\n    //#endregion PROTECTED\n    //#region PUBLIC\n    // RSAKey.prototype.setPublic = RSASetPublic;\n    // Set the public key fields N and e from hex strings\n    RSAKey.prototype.setPublic = function (N, E) {\n        if (N != null && E != null && N.length > 0 && E.length > 0) {\n            this.n = parseBigInt(N, 16);\n            this.e = parseInt(E, 16);\n        }\n        else {\n            console.error(\"Invalid RSA public key\");\n        }\n    };\n    // RSAKey.prototype.encrypt = RSAEncrypt;\n    // Return the PKCS#1 RSA encryption of \"text\" as an even-length hex string\n    RSAKey.prototype.encrypt = function (text) {\n        var m = pkcs1pad2(text, (this.n.bitLength() + 7) >> 3);\n        if (m == null) {\n            return null;\n        }\n        var c = this.doPublic(m);\n        if (c == null) {\n            return null;\n        }\n        var h = c.toString(16);\n        if ((h.length & 1) == 0) {\n            return h;\n        }\n        else {\n            return \"0\" + h;\n        }\n    };\n    // RSAKey.prototype.setPrivate = RSASetPrivate;\n    // Set the private key fields N, e, and d from hex strings\n    RSAKey.prototype.setPrivate = function (N, E, D) {\n        if (N != null && E != null && N.length > 0 && E.length > 0) {\n            this.n = parseBigInt(N, 16);\n            this.e = parseInt(E, 16);\n            this.d = parseBigInt(D, 16);\n        }\n        else {\n            console.error(\"Invalid RSA private key\");\n        }\n    };\n    // RSAKey.prototype.setPrivateEx = RSASetPrivateEx;\n    // Set the private key fields N, e, d and CRT params from hex strings\n    RSAKey.prototype.setPrivateEx = function (N, E, D, P, Q, DP, DQ, C) {\n        if (N != null && E != null && N.length > 0 && E.length > 0) {\n            this.n = parseBigInt(N, 16);\n            this.e = parseInt(E, 16);\n            this.d = parseBigInt(D, 16);\n            this.p = parseBigInt(P, 16);\n            this.q = parseBigInt(Q, 16);\n            this.dmp1 = parseBigInt(DP, 16);\n            this.dmq1 = parseBigInt(DQ, 16);\n            this.coeff = parseBigInt(C, 16);\n        }\n        else {\n            console.error(\"Invalid RSA private key\");\n        }\n    };\n    // RSAKey.prototype.generate = RSAGenerate;\n    // Generate a new random private key B bits long, using public expt E\n    RSAKey.prototype.generate = function (B, E) {\n        var rng = new SecureRandom();\n        var qs = B >> 1;\n        this.e = parseInt(E, 16);\n        var ee = new BigInteger(E, 16);\n        for (;;) {\n            for (;;) {\n                this.p = new BigInteger(B - qs, 1, rng);\n                if (this.p.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE) == 0 && this.p.isProbablePrime(10)) {\n                    break;\n                }\n            }\n            for (;;) {\n                this.q = new BigInteger(qs, 1, rng);\n                if (this.q.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE) == 0 && this.q.isProbablePrime(10)) {\n                    break;\n                }\n            }\n            if (this.p.compareTo(this.q) <= 0) {\n                var t = this.p;\n                this.p = this.q;\n                this.q = t;\n            }\n            var p1 = this.p.subtract(BigInteger.ONE);\n            var q1 = this.q.subtract(BigInteger.ONE);\n            var phi = p1.multiply(q1);\n            if (phi.gcd(ee).compareTo(BigInteger.ONE) == 0) {\n                this.n = this.p.multiply(this.q);\n                this.d = ee.modInverse(phi);\n                this.dmp1 = this.d.mod(p1);\n                this.dmq1 = this.d.mod(q1);\n                this.coeff = this.q.modInverse(this.p);\n                break;\n            }\n        }\n    };\n    // RSAKey.prototype.decrypt = RSADecrypt;\n    // Return the PKCS#1 RSA decryption of \"ctext\".\n    // \"ctext\" is an even-length hex string and the output is a plain string.\n    RSAKey.prototype.decrypt = function (ctext) {\n        var c = parseBigInt(ctext, 16);\n        var m = this.doPrivate(c);\n        if (m == null) {\n            return null;\n        }\n        return pkcs1unpad2(m, (this.n.bitLength() + 7) >> 3);\n    };\n    // Generate a new random private key B bits long, using public expt E\n    RSAKey.prototype.generateAsync = function (B, E, callback) {\n        var rng = new SecureRandom();\n        var qs = B >> 1;\n        this.e = parseInt(E, 16);\n        var ee = new BigInteger(E, 16);\n        var rsa = this;\n        // These functions have non-descript names because they were originally for(;;) loops.\n        // I don't know about cryptography to give them better names than loop1-4.\n        var loop1 = function () {\n            var loop4 = function () {\n                if (rsa.p.compareTo(rsa.q) <= 0) {\n                    var t = rsa.p;\n                    rsa.p = rsa.q;\n                    rsa.q = t;\n                }\n                var p1 = rsa.p.subtract(BigInteger.ONE);\n                var q1 = rsa.q.subtract(BigInteger.ONE);\n                var phi = p1.multiply(q1);\n                if (phi.gcd(ee).compareTo(BigInteger.ONE) == 0) {\n                    rsa.n = rsa.p.multiply(rsa.q);\n                    rsa.d = ee.modInverse(phi);\n                    rsa.dmp1 = rsa.d.mod(p1);\n                    rsa.dmq1 = rsa.d.mod(q1);\n                    rsa.coeff = rsa.q.modInverse(rsa.p);\n                    setTimeout(function () { callback(); }, 0); // escape\n                }\n                else {\n                    setTimeout(loop1, 0);\n                }\n            };\n            var loop3 = function () {\n                rsa.q = nbi();\n                rsa.q.fromNumberAsync(qs, 1, rng, function () {\n                    rsa.q.subtract(BigInteger.ONE).gcda(ee, function (r) {\n                        if (r.compareTo(BigInteger.ONE) == 0 && rsa.q.isProbablePrime(10)) {\n                            setTimeout(loop4, 0);\n                        }\n                        else {\n                            setTimeout(loop3, 0);\n                        }\n                    });\n                });\n            };\n            var loop2 = function () {\n                rsa.p = nbi();\n                rsa.p.fromNumberAsync(B - qs, 1, rng, function () {\n                    rsa.p.subtract(BigInteger.ONE).gcda(ee, function (r) {\n                        if (r.compareTo(BigInteger.ONE) == 0 && rsa.p.isProbablePrime(10)) {\n                            setTimeout(loop3, 0);\n                        }\n                        else {\n                            setTimeout(loop2, 0);\n                        }\n                    });\n                });\n            };\n            setTimeout(loop2, 0);\n        };\n        setTimeout(loop1, 0);\n    };\n    RSAKey.prototype.sign = function (text, digestMethod, digestName) {\n        var header = getDigestHeader(digestName);\n        var digest = header + digestMethod(text).toString();\n        var m = pkcs1pad1(digest, this.n.bitLength() / 4);\n        if (m == null) {\n            return null;\n        }\n        var c = this.doPrivate(m);\n        if (c == null) {\n            return null;\n        }\n        var h = c.toString(16);\n        if ((h.length & 1) == 0) {\n            return h;\n        }\n        else {\n            return \"0\" + h;\n        }\n    };\n    RSAKey.prototype.verify = function (text, signature, digestMethod) {\n        var c = parseBigInt(signature, 16);\n        var m = this.doPublic(c);\n        if (m == null) {\n            return null;\n        }\n        var unpadded = m.toString(16).replace(/^1f+00/, \"\");\n        var digest = removeDigestHeader(unpadded);\n        return digest == digestMethod(text).toString();\n    };\n    return RSAKey;\n}());\n// Undo PKCS#1 (type 2, random) padding and, if valid, return the plaintext\nfunction pkcs1unpad2(d, n) {\n    var b = d.toByteArray();\n    var i = 0;\n    while (i < b.length && b[i] == 0) {\n        ++i;\n    }\n    if (b.length - i != n - 1 || b[i] != 2) {\n        return null;\n    }\n    ++i;\n    while (b[i] != 0) {\n        if (++i >= b.length) {\n            return null;\n        }\n    }\n    var ret = \"\";\n    while (++i < b.length) {\n        var c = b[i] & 255;\n        if (c < 128) { // utf-8 decode\n            ret += String.fromCharCode(c);\n        }\n        else if ((c > 191) && (c < 224)) {\n            ret += String.fromCharCode(((c & 31) << 6) | (b[i + 1] & 63));\n            ++i;\n        }\n        else {\n            ret += String.fromCharCode(((c & 15) << 12) | ((b[i + 1] & 63) << 6) | (b[i + 2] & 63));\n            i += 2;\n        }\n    }\n    return ret;\n}\n// https://tools.ietf.org/html/rfc3447#page-43\nvar DIGEST_HEADERS = {\n    md2: \"3020300c06082a864886f70d020205000410\",\n    md5: \"3020300c06082a864886f70d020505000410\",\n    sha1: \"3021300906052b0e03021a05000414\",\n    sha224: \"302d300d06096086480165030402040500041c\",\n    sha256: \"3031300d060960864801650304020105000420\",\n    sha384: \"3041300d060960864801650304020205000430\",\n    sha512: \"3051300d060960864801650304020305000440\",\n    ripemd160: \"3021300906052b2403020105000414\",\n};\nfunction getDigestHeader(name) {\n    return DIGEST_HEADERS[name] || \"\";\n}\nfunction removeDigestHeader(str) {\n    for (var name_1 in DIGEST_HEADERS) {\n        if (DIGEST_HEADERS.hasOwnProperty(name_1)) {\n            var header = DIGEST_HEADERS[name_1];\n            var len = header.length;\n            if (str.substr(0, len) == header) {\n                return str.substr(len);\n            }\n        }\n    }\n    return str;\n}\n// Return the PKCS#1 RSA encryption of \"text\" as a Base64-encoded string\n// function RSAEncryptB64(text) {\n//  var h = this.encrypt(text);\n//  if(h) return hex2b64(h); else return null;\n// }\n// public\n// RSAKey.prototype.encrypt_b64 = RSAEncryptB64;\n\n/*!\nCopyright (c) 2011, Yahoo! Inc. All rights reserved.\nCode licensed under the BSD License:\nhttp://developer.yahoo.com/yui/license.html\nversion: 2.9.0\n*/\nvar YAHOO = {};\nYAHOO.lang = {\n    /**\n     * Utility to set up the prototype, constructor and superclass properties to\n     * support an inheritance strategy that can chain constructors and methods.\n     * Static members will not be inherited.\n     *\n     * @method extend\n     * @static\n     * @param {Function} subc   the object to modify\n     * @param {Function} superc the object to inherit\n     * @param {Object} overrides  additional properties/methods to add to the\n     *                              subclass prototype.  These will override the\n     *                              matching items obtained from the superclass\n     *                              if present.\n     */\n    extend: function(subc, superc, overrides) {\n        if (! superc || ! subc) {\n            throw new Error(\"YAHOO.lang.extend failed, please check that \" +\n                \"all dependencies are included.\");\n        }\n\n        var F = function() {};\n        F.prototype = superc.prototype;\n        subc.prototype = new F();\n        subc.prototype.constructor = subc;\n        subc.superclass = superc.prototype;\n\n        if (superc.prototype.constructor == Object.prototype.constructor) {\n            superc.prototype.constructor = superc;\n        }\n\n        if (overrides) {\n            var i;\n            for (i in overrides) {\n                subc.prototype[i] = overrides[i];\n            }\n\n            /*\n             * IE will not enumerate native functions in a derived object even if the\n             * function was overridden.  This is a workaround for specific functions\n             * we care about on the Object prototype.\n             * @property _IEEnumFix\n             * @param {Function} r  the object to receive the augmentation\n             * @param {Function} s  the object that supplies the properties to augment\n             * @static\n             * @private\n             */\n            var _IEEnumFix = function() {},\n                ADD = [\"toString\", \"valueOf\"];\n            try {\n                if (/MSIE/.test(navigator.userAgent)) {\n                    _IEEnumFix = function(r, s) {\n                        for (i = 0; i < ADD.length; i = i + 1) {\n                            var fname = ADD[i], f = s[fname];\n                            if (typeof f === 'function' && f != Object.prototype[fname]) {\n                                r[fname] = f;\n                            }\n                        }\n                    };\n                }\n            } catch (ex) {}            _IEEnumFix(subc.prototype, overrides);\n        }\n    }\n};\n\n/* asn1-1.0.13.js (c) 2013-2017 Kenji Urushima | kjur.github.com/jsrsasign/license\n */\n\n/**\n * @fileOverview\n * @name asn1-1.0.js\n * @author Kenji Urushima kenji.urushima@gmail.com\n * @version asn1 1.0.13 (2017-Jun-02)\n * @since jsrsasign 2.1\n * @license <a href=\"https://kjur.github.io/jsrsasign/license/\">MIT License</a>\n */\n\n/**\n * kjur's class library name space\n * <p>\n * This name space provides following name spaces:\n * <ul>\n * <li>{@link KJUR.asn1} - ASN.1 primitive hexadecimal encoder</li>\n * <li>{@link KJUR.asn1.x509} - ASN.1 structure for X.509 certificate and CRL</li>\n * <li>{@link KJUR.crypto} - Java Cryptographic Extension(JCE) style MessageDigest/Signature\n * class and utilities</li>\n * </ul>\n * </p>\n * NOTE: Please ignore method summary and document of this namespace. This caused by a bug of jsdoc2.\n * @name KJUR\n * @namespace kjur's class library name space\n */\nvar KJUR = {};\n\n/**\n * kjur's ASN.1 class library name space\n * <p>\n * This is ITU-T X.690 ASN.1 DER encoder class library and\n * class structure and methods is very similar to\n * org.bouncycastle.asn1 package of\n * well known BouncyCaslte Cryptography Library.\n * <h4>PROVIDING ASN.1 PRIMITIVES</h4>\n * Here are ASN.1 DER primitive classes.\n * <ul>\n * <li>0x01 {@link KJUR.asn1.DERBoolean}</li>\n * <li>0x02 {@link KJUR.asn1.DERInteger}</li>\n * <li>0x03 {@link KJUR.asn1.DERBitString}</li>\n * <li>0x04 {@link KJUR.asn1.DEROctetString}</li>\n * <li>0x05 {@link KJUR.asn1.DERNull}</li>\n * <li>0x06 {@link KJUR.asn1.DERObjectIdentifier}</li>\n * <li>0x0a {@link KJUR.asn1.DEREnumerated}</li>\n * <li>0x0c {@link KJUR.asn1.DERUTF8String}</li>\n * <li>0x12 {@link KJUR.asn1.DERNumericString}</li>\n * <li>0x13 {@link KJUR.asn1.DERPrintableString}</li>\n * <li>0x14 {@link KJUR.asn1.DERTeletexString}</li>\n * <li>0x16 {@link KJUR.asn1.DERIA5String}</li>\n * <li>0x17 {@link KJUR.asn1.DERUTCTime}</li>\n * <li>0x18 {@link KJUR.asn1.DERGeneralizedTime}</li>\n * <li>0x30 {@link KJUR.asn1.DERSequence}</li>\n * <li>0x31 {@link KJUR.asn1.DERSet}</li>\n * </ul>\n * <h4>OTHER ASN.1 CLASSES</h4>\n * <ul>\n * <li>{@link KJUR.asn1.ASN1Object}</li>\n * <li>{@link KJUR.asn1.DERAbstractString}</li>\n * <li>{@link KJUR.asn1.DERAbstractTime}</li>\n * <li>{@link KJUR.asn1.DERAbstractStructured}</li>\n * <li>{@link KJUR.asn1.DERTaggedObject}</li>\n * </ul>\n * <h4>SUB NAME SPACES</h4>\n * <ul>\n * <li>{@link KJUR.asn1.cades} - CAdES long term signature format</li>\n * <li>{@link KJUR.asn1.cms} - Cryptographic Message Syntax</li>\n * <li>{@link KJUR.asn1.csr} - Certificate Signing Request (CSR/PKCS#10)</li>\n * <li>{@link KJUR.asn1.tsp} - RFC 3161 Timestamping Protocol Format</li>\n * <li>{@link KJUR.asn1.x509} - RFC 5280 X.509 certificate and CRL</li>\n * </ul>\n * </p>\n * NOTE: Please ignore method summary and document of this namespace.\n * This caused by a bug of jsdoc2.\n * @name KJUR.asn1\n * @namespace\n */\nif (typeof KJUR.asn1 == \"undefined\" || !KJUR.asn1) KJUR.asn1 = {};\n\n/**\n * ASN1 utilities class\n * @name KJUR.asn1.ASN1Util\n * @class ASN1 utilities class\n * @since asn1 1.0.2\n */\nKJUR.asn1.ASN1Util = new function() {\n    this.integerToByteHex = function(i) {\n        var h = i.toString(16);\n        if ((h.length % 2) == 1) h = '0' + h;\n        return h;\n    };\n    this.bigIntToMinTwosComplementsHex = function(bigIntegerValue) {\n        var h = bigIntegerValue.toString(16);\n        if (h.substr(0, 1) != '-') {\n            if (h.length % 2 == 1) {\n                h = '0' + h;\n            } else {\n                if (! h.match(/^[0-7]/)) {\n                    h = '00' + h;\n                }\n            }\n        } else {\n            var hPos = h.substr(1);\n            var xorLen = hPos.length;\n            if (xorLen % 2 == 1) {\n                xorLen += 1;\n            } else {\n                if (! h.match(/^[0-7]/)) {\n                    xorLen += 2;\n                }\n            }\n            var hMask = '';\n            for (var i = 0; i < xorLen; i++) {\n                hMask += 'f';\n            }\n            var biMask = new BigInteger(hMask, 16);\n            var biNeg = biMask.xor(bigIntegerValue).add(BigInteger.ONE);\n            h = biNeg.toString(16).replace(/^-/, '');\n        }\n        return h;\n    };\n    /**\n     * get PEM string from hexadecimal data and header string\n     * @name getPEMStringFromHex\n     * @memberOf KJUR.asn1.ASN1Util\n     * @function\n     * @param {String} dataHex hexadecimal string of PEM body\n     * @param {String} pemHeader PEM header string (ex. 'RSA PRIVATE KEY')\n     * @return {String} PEM formatted string of input data\n     * @description\n     * This method converts a hexadecimal string to a PEM string with\n     * a specified header. Its line break will be CRLF(\"\\r\\n\").\n     * @example\n     * var pem  = KJUR.asn1.ASN1Util.getPEMStringFromHex('616161', 'RSA PRIVATE KEY');\n     * // value of pem will be:\n     * -----BEGIN PRIVATE KEY-----\n     * YWFh\n     * -----END PRIVATE KEY-----\n     */\n    this.getPEMStringFromHex = function(dataHex, pemHeader) {\n        return hextopem(dataHex, pemHeader);\n    };\n\n    /**\n     * generate ASN1Object specifed by JSON parameters\n     * @name newObject\n     * @memberOf KJUR.asn1.ASN1Util\n     * @function\n     * @param {Array} param JSON parameter to generate ASN1Object\n     * @return {KJUR.asn1.ASN1Object} generated object\n     * @since asn1 1.0.3\n     * @description\n     * generate any ASN1Object specified by JSON param\n     * including ASN.1 primitive or structured.\n     * Generally 'param' can be described as follows:\n     * <blockquote>\n     * {TYPE-OF-ASNOBJ: ASN1OBJ-PARAMETER}\n     * </blockquote>\n     * 'TYPE-OF-ASN1OBJ' can be one of following symbols:\n     * <ul>\n     * <li>'bool' - DERBoolean</li>\n     * <li>'int' - DERInteger</li>\n     * <li>'bitstr' - DERBitString</li>\n     * <li>'octstr' - DEROctetString</li>\n     * <li>'null' - DERNull</li>\n     * <li>'oid' - DERObjectIdentifier</li>\n     * <li>'enum' - DEREnumerated</li>\n     * <li>'utf8str' - DERUTF8String</li>\n     * <li>'numstr' - DERNumericString</li>\n     * <li>'prnstr' - DERPrintableString</li>\n     * <li>'telstr' - DERTeletexString</li>\n     * <li>'ia5str' - DERIA5String</li>\n     * <li>'utctime' - DERUTCTime</li>\n     * <li>'gentime' - DERGeneralizedTime</li>\n     * <li>'seq' - DERSequence</li>\n     * <li>'set' - DERSet</li>\n     * <li>'tag' - DERTaggedObject</li>\n     * </ul>\n     * @example\n     * newObject({'prnstr': 'aaa'});\n     * newObject({'seq': [{'int': 3}, {'prnstr': 'aaa'}]})\n     * // ASN.1 Tagged Object\n     * newObject({'tag': {'tag': 'a1',\n     *                    'explicit': true,\n     *                    'obj': {'seq': [{'int': 3}, {'prnstr': 'aaa'}]}}});\n     * // more simple representation of ASN.1 Tagged Object\n     * newObject({'tag': ['a1',\n     *                    true,\n     *                    {'seq': [\n     *                      {'int': 3},\n     *                      {'prnstr': 'aaa'}]}\n     *                   ]});\n     */\n    this.newObject = function(param) {\n        var _KJUR = KJUR,\n            _KJUR_asn1 = _KJUR.asn1,\n            _DERBoolean = _KJUR_asn1.DERBoolean,\n            _DERInteger = _KJUR_asn1.DERInteger,\n            _DERBitString = _KJUR_asn1.DERBitString,\n            _DEROctetString = _KJUR_asn1.DEROctetString,\n            _DERNull = _KJUR_asn1.DERNull,\n            _DERObjectIdentifier = _KJUR_asn1.DERObjectIdentifier,\n            _DEREnumerated = _KJUR_asn1.DEREnumerated,\n            _DERUTF8String = _KJUR_asn1.DERUTF8String,\n            _DERNumericString = _KJUR_asn1.DERNumericString,\n            _DERPrintableString = _KJUR_asn1.DERPrintableString,\n            _DERTeletexString = _KJUR_asn1.DERTeletexString,\n            _DERIA5String = _KJUR_asn1.DERIA5String,\n            _DERUTCTime = _KJUR_asn1.DERUTCTime,\n            _DERGeneralizedTime = _KJUR_asn1.DERGeneralizedTime,\n            _DERSequence = _KJUR_asn1.DERSequence,\n            _DERSet = _KJUR_asn1.DERSet,\n            _DERTaggedObject = _KJUR_asn1.DERTaggedObject,\n            _newObject = _KJUR_asn1.ASN1Util.newObject;\n\n        var keys = Object.keys(param);\n        if (keys.length != 1)\n            throw \"key of param shall be only one.\";\n        var key = keys[0];\n\n        if (\":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:\".indexOf(\":\" + key + \":\") == -1)\n            throw \"undefined key: \" + key;\n\n        if (key == \"bool\")    return new _DERBoolean(param[key]);\n        if (key == \"int\")     return new _DERInteger(param[key]);\n        if (key == \"bitstr\")  return new _DERBitString(param[key]);\n        if (key == \"octstr\")  return new _DEROctetString(param[key]);\n        if (key == \"null\")    return new _DERNull(param[key]);\n        if (key == \"oid\")     return new _DERObjectIdentifier(param[key]);\n        if (key == \"enum\")    return new _DEREnumerated(param[key]);\n        if (key == \"utf8str\") return new _DERUTF8String(param[key]);\n        if (key == \"numstr\")  return new _DERNumericString(param[key]);\n        if (key == \"prnstr\")  return new _DERPrintableString(param[key]);\n        if (key == \"telstr\")  return new _DERTeletexString(param[key]);\n        if (key == \"ia5str\")  return new _DERIA5String(param[key]);\n        if (key == \"utctime\") return new _DERUTCTime(param[key]);\n        if (key == \"gentime\") return new _DERGeneralizedTime(param[key]);\n\n        if (key == \"seq\") {\n            var paramList = param[key];\n            var a = [];\n            for (var i = 0; i < paramList.length; i++) {\n                var asn1Obj = _newObject(paramList[i]);\n                a.push(asn1Obj);\n            }\n            return new _DERSequence({'array': a});\n        }\n\n        if (key == \"set\") {\n            var paramList = param[key];\n            var a = [];\n            for (var i = 0; i < paramList.length; i++) {\n                var asn1Obj = _newObject(paramList[i]);\n                a.push(asn1Obj);\n            }\n            return new _DERSet({'array': a});\n        }\n\n        if (key == \"tag\") {\n            var tagParam = param[key];\n            if (Object.prototype.toString.call(tagParam) === '[object Array]' &&\n                tagParam.length == 3) {\n                var obj = _newObject(tagParam[2]);\n                return new _DERTaggedObject({tag: tagParam[0],\n                    explicit: tagParam[1],\n                    obj: obj});\n            } else {\n                var newParam = {};\n                if (tagParam.explicit !== undefined)\n                    newParam.explicit = tagParam.explicit;\n                if (tagParam.tag !== undefined)\n                    newParam.tag = tagParam.tag;\n                if (tagParam.obj === undefined)\n                    throw \"obj shall be specified for 'tag'.\";\n                newParam.obj = _newObject(tagParam.obj);\n                return new _DERTaggedObject(newParam);\n            }\n        }\n    };\n\n    /**\n     * get encoded hexadecimal string of ASN1Object specifed by JSON parameters\n     * @name jsonToASN1HEX\n     * @memberOf KJUR.asn1.ASN1Util\n     * @function\n     * @param {Array} param JSON parameter to generate ASN1Object\n     * @return hexadecimal string of ASN1Object\n     * @since asn1 1.0.4\n     * @description\n     * As for ASN.1 object representation of JSON object,\n     * please see {@link newObject}.\n     * @example\n     * jsonToASN1HEX({'prnstr': 'aaa'});\n     */\n    this.jsonToASN1HEX = function(param) {\n        var asn1Obj = this.newObject(param);\n        return asn1Obj.getEncodedHex();\n    };\n};\n\n/**\n * get dot noted oid number string from hexadecimal value of OID\n * @name oidHexToInt\n * @memberOf KJUR.asn1.ASN1Util\n * @function\n * @param {String} hex hexadecimal value of object identifier\n * @return {String} dot noted string of object identifier\n * @since jsrsasign 4.8.3 asn1 1.0.7\n * @description\n * This static method converts from hexadecimal string representation of\n * ASN.1 value of object identifier to oid number string.\n * @example\n * KJUR.asn1.ASN1Util.oidHexToInt('550406') &rarr; \"2.5.4.6\"\n */\nKJUR.asn1.ASN1Util.oidHexToInt = function(hex) {\n    var s = \"\";\n    var i01 = parseInt(hex.substr(0, 2), 16);\n    var i0 = Math.floor(i01 / 40);\n    var i1 = i01 % 40;\n    var s = i0 + \".\" + i1;\n\n    var binbuf = \"\";\n    for (var i = 2; i < hex.length; i += 2) {\n        var value = parseInt(hex.substr(i, 2), 16);\n        var bin = (\"00000000\" + value.toString(2)).slice(- 8);\n        binbuf = binbuf + bin.substr(1, 7);\n        if (bin.substr(0, 1) == \"0\") {\n            var bi = new BigInteger(binbuf, 2);\n            s = s + \".\" + bi.toString(10);\n            binbuf = \"\";\n        }\n    }\n    return s;\n};\n\n/**\n * get hexadecimal value of object identifier from dot noted oid value\n * @name oidIntToHex\n * @memberOf KJUR.asn1.ASN1Util\n * @function\n * @param {String} oidString dot noted string of object identifier\n * @return {String} hexadecimal value of object identifier\n * @since jsrsasign 4.8.3 asn1 1.0.7\n * @description\n * This static method converts from object identifier value string.\n * to hexadecimal string representation of it.\n * @example\n * KJUR.asn1.ASN1Util.oidIntToHex(\"2.5.4.6\") &rarr; \"550406\"\n */\nKJUR.asn1.ASN1Util.oidIntToHex = function(oidString) {\n    var itox = function(i) {\n        var h = i.toString(16);\n        if (h.length == 1) h = '0' + h;\n        return h;\n    };\n\n    var roidtox = function(roid) {\n        var h = '';\n        var bi = new BigInteger(roid, 10);\n        var b = bi.toString(2);\n        var padLen = 7 - b.length % 7;\n        if (padLen == 7) padLen = 0;\n        var bPad = '';\n        for (var i = 0; i < padLen; i++) bPad += '0';\n        b = bPad + b;\n        for (var i = 0; i < b.length - 1; i += 7) {\n            var b8 = b.substr(i, 7);\n            if (i != b.length - 7) b8 = '1' + b8;\n            h += itox(parseInt(b8, 2));\n        }\n        return h;\n    };\n\n    if (! oidString.match(/^[0-9.]+$/)) {\n        throw \"malformed oid string: \" + oidString;\n    }\n    var h = '';\n    var a = oidString.split('.');\n    var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\n    h += itox(i0);\n    a.splice(0, 2);\n    for (var i = 0; i < a.length; i++) {\n        h += roidtox(a[i]);\n    }\n    return h;\n};\n\n\n// ********************************************************************\n//  Abstract ASN.1 Classes\n// ********************************************************************\n\n// ********************************************************************\n\n/**\n * base class for ASN.1 DER encoder object\n * @name KJUR.asn1.ASN1Object\n * @class base class for ASN.1 DER encoder object\n * @property {Boolean} isModified flag whether internal data was changed\n * @property {String} hTLV hexadecimal string of ASN.1 TLV\n * @property {String} hT hexadecimal string of ASN.1 TLV tag(T)\n * @property {String} hL hexadecimal string of ASN.1 TLV length(L)\n * @property {String} hV hexadecimal string of ASN.1 TLV value(V)\n * @description\n */\nKJUR.asn1.ASN1Object = function() {\n    var hV = '';\n\n    /**\n     * get hexadecimal ASN.1 TLV length(L) bytes from TLV value(V)\n     * @name getLengthHexFromValue\n     * @memberOf KJUR.asn1.ASN1Object#\n     * @function\n     * @return {String} hexadecimal string of ASN.1 TLV length(L)\n     */\n    this.getLengthHexFromValue = function() {\n        if (typeof this.hV == \"undefined\" || this.hV == null) {\n            throw \"this.hV is null or undefined.\";\n        }\n        if (this.hV.length % 2 == 1) {\n            throw \"value hex must be even length: n=\" + hV.length + \",v=\" + this.hV;\n        }\n        var n = this.hV.length / 2;\n        var hN = n.toString(16);\n        if (hN.length % 2 == 1) {\n            hN = \"0\" + hN;\n        }\n        if (n < 128) {\n            return hN;\n        } else {\n            var hNlen = hN.length / 2;\n            if (hNlen > 15) {\n                throw \"ASN.1 length too long to represent by 8x: n = \" + n.toString(16);\n            }\n            var head = 128 + hNlen;\n            return head.toString(16) + hN;\n        }\n    };\n\n    /**\n     * get hexadecimal string of ASN.1 TLV bytes\n     * @name getEncodedHex\n     * @memberOf KJUR.asn1.ASN1Object#\n     * @function\n     * @return {String} hexadecimal string of ASN.1 TLV\n     */\n    this.getEncodedHex = function() {\n        if (this.hTLV == null || this.isModified) {\n            this.hV = this.getFreshValueHex();\n            this.hL = this.getLengthHexFromValue();\n            this.hTLV = this.hT + this.hL + this.hV;\n            this.isModified = false;\n            //alert(\"first time: \" + this.hTLV);\n        }\n        return this.hTLV;\n    };\n\n    /**\n     * get hexadecimal string of ASN.1 TLV value(V) bytes\n     * @name getValueHex\n     * @memberOf KJUR.asn1.ASN1Object#\n     * @function\n     * @return {String} hexadecimal string of ASN.1 TLV value(V) bytes\n     */\n    this.getValueHex = function() {\n        this.getEncodedHex();\n        return this.hV;\n    };\n\n    this.getFreshValueHex = function() {\n        return '';\n    };\n};\n\n// == BEGIN DERAbstractString ================================================\n/**\n * base class for ASN.1 DER string classes\n * @name KJUR.asn1.DERAbstractString\n * @class base class for ASN.1 DER string classes\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @property {String} s internal string of value\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERAbstractString = function(params) {\n    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\n\n    /**\n     * get string value of this string object\n     * @name getString\n     * @memberOf KJUR.asn1.DERAbstractString#\n     * @function\n     * @return {String} string value of this string object\n     */\n    this.getString = function() {\n        return this.s;\n    };\n\n    /**\n     * set value by a string\n     * @name setString\n     * @memberOf KJUR.asn1.DERAbstractString#\n     * @function\n     * @param {String} newS value by a string to set\n     */\n    this.setString = function(newS) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = newS;\n        this.hV = stohex(this.s);\n    };\n\n    /**\n     * set value by a hexadecimal string\n     * @name setStringHex\n     * @memberOf KJUR.asn1.DERAbstractString#\n     * @function\n     * @param {String} newHexString value by a hexadecimal string to set\n     */\n    this.setStringHex = function(newHexString) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = null;\n        this.hV = newHexString;\n    };\n\n    this.getFreshValueHex = function() {\n        return this.hV;\n    };\n\n    if (typeof params != \"undefined\") {\n        if (typeof params == \"string\") {\n            this.setString(params);\n        } else if (typeof params['str'] != \"undefined\") {\n            this.setString(params['str']);\n        } else if (typeof params['hex'] != \"undefined\") {\n            this.setStringHex(params['hex']);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERAbstractString, KJUR.asn1.ASN1Object);\n// == END   DERAbstractString ================================================\n\n// == BEGIN DERAbstractTime ==================================================\n/**\n * base class for ASN.1 DER Generalized/UTCTime class\n * @name KJUR.asn1.DERAbstractTime\n * @class base class for ASN.1 DER Generalized/UTCTime class\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERAbstractTime = function(params) {\n    KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);\n\n    // --- PRIVATE METHODS --------------------\n    this.localDateToUTC = function(d) {\n        utc = d.getTime() + (d.getTimezoneOffset() * 60000);\n        var utcDate = new Date(utc);\n        return utcDate;\n    };\n\n    /*\n     * format date string by Data object\n     * @name formatDate\n     * @memberOf KJUR.asn1.AbstractTime;\n     * @param {Date} dateObject\n     * @param {string} type 'utc' or 'gen'\n     * @param {boolean} withMillis flag for with millisections or not\n     * @description\n     * 'withMillis' flag is supported from asn1 1.0.6.\n     */\n    this.formatDate = function(dateObject, type, withMillis) {\n        var pad = this.zeroPadding;\n        var d = this.localDateToUTC(dateObject);\n        var year = String(d.getFullYear());\n        if (type == 'utc') year = year.substr(2, 2);\n        var month = pad(String(d.getMonth() + 1), 2);\n        var day = pad(String(d.getDate()), 2);\n        var hour = pad(String(d.getHours()), 2);\n        var min = pad(String(d.getMinutes()), 2);\n        var sec = pad(String(d.getSeconds()), 2);\n        var s = year + month + day + hour + min + sec;\n        if (withMillis === true) {\n            var millis = d.getMilliseconds();\n            if (millis != 0) {\n                var sMillis = pad(String(millis), 3);\n                sMillis = sMillis.replace(/[0]+$/, \"\");\n                s = s + \".\" + sMillis;\n            }\n        }\n        return s + \"Z\";\n    };\n\n    this.zeroPadding = function(s, len) {\n        if (s.length >= len) return s;\n        return new Array(len - s.length + 1).join('0') + s;\n    };\n\n    // --- PUBLIC METHODS --------------------\n    /**\n     * get string value of this string object\n     * @name getString\n     * @memberOf KJUR.asn1.DERAbstractTime#\n     * @function\n     * @return {String} string value of this time object\n     */\n    this.getString = function() {\n        return this.s;\n    };\n\n    /**\n     * set value by a string\n     * @name setString\n     * @memberOf KJUR.asn1.DERAbstractTime#\n     * @function\n     * @param {String} newS value by a string to set such like \"130430235959Z\"\n     */\n    this.setString = function(newS) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = newS;\n        this.hV = stohex(newS);\n    };\n\n    /**\n     * set value by a Date object\n     * @name setByDateValue\n     * @memberOf KJUR.asn1.DERAbstractTime#\n     * @function\n     * @param {Integer} year year of date (ex. 2013)\n     * @param {Integer} month month of date between 1 and 12 (ex. 12)\n     * @param {Integer} day day of month\n     * @param {Integer} hour hours of date\n     * @param {Integer} min minutes of date\n     * @param {Integer} sec seconds of date\n     */\n    this.setByDateValue = function(year, month, day, hour, min, sec) {\n        var dateObject = new Date(Date.UTC(year, month - 1, day, hour, min, sec, 0));\n        this.setByDate(dateObject);\n    };\n\n    this.getFreshValueHex = function() {\n        return this.hV;\n    };\n};\nYAHOO.lang.extend(KJUR.asn1.DERAbstractTime, KJUR.asn1.ASN1Object);\n// == END   DERAbstractTime ==================================================\n\n// == BEGIN DERAbstractStructured ============================================\n/**\n * base class for ASN.1 DER structured class\n * @name KJUR.asn1.DERAbstractStructured\n * @class base class for ASN.1 DER structured class\n * @property {Array} asn1Array internal array of ASN1Object\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERAbstractStructured = function(params) {\n    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\n\n    /**\n     * set value by array of ASN1Object\n     * @name setByASN1ObjectArray\n     * @memberOf KJUR.asn1.DERAbstractStructured#\n     * @function\n     * @param {array} asn1ObjectArray array of ASN1Object to set\n     */\n    this.setByASN1ObjectArray = function(asn1ObjectArray) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.asn1Array = asn1ObjectArray;\n    };\n\n    /**\n     * append an ASN1Object to internal array\n     * @name appendASN1Object\n     * @memberOf KJUR.asn1.DERAbstractStructured#\n     * @function\n     * @param {ASN1Object} asn1Object to add\n     */\n    this.appendASN1Object = function(asn1Object) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.asn1Array.push(asn1Object);\n    };\n\n    this.asn1Array = new Array();\n    if (typeof params != \"undefined\") {\n        if (typeof params['array'] != \"undefined\") {\n            this.asn1Array = params['array'];\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERAbstractStructured, KJUR.asn1.ASN1Object);\n\n\n// ********************************************************************\n//  ASN.1 Object Classes\n// ********************************************************************\n\n// ********************************************************************\n/**\n * class for ASN.1 DER Boolean\n * @name KJUR.asn1.DERBoolean\n * @class class for ASN.1 DER Boolean\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERBoolean = function() {\n    KJUR.asn1.DERBoolean.superclass.constructor.call(this);\n    this.hT = \"01\";\n    this.hTLV = \"0101ff\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERBoolean, KJUR.asn1.ASN1Object);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER Integer\n * @name KJUR.asn1.DERInteger\n * @class class for ASN.1 DER Integer\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>int - specify initial ASN.1 value(V) by integer value</li>\n * <li>bigint - specify initial ASN.1 value(V) by BigInteger object</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERInteger = function(params) {\n    KJUR.asn1.DERInteger.superclass.constructor.call(this);\n    this.hT = \"02\";\n\n    /**\n     * set value by Tom Wu's BigInteger object\n     * @name setByBigInteger\n     * @memberOf KJUR.asn1.DERInteger#\n     * @function\n     * @param {BigInteger} bigIntegerValue to set\n     */\n    this.setByBigInteger = function(bigIntegerValue) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\n    };\n\n    /**\n     * set value by integer value\n     * @name setByInteger\n     * @memberOf KJUR.asn1.DERInteger\n     * @function\n     * @param {Integer} integer value to set\n     */\n    this.setByInteger = function(intValue) {\n        var bi = new BigInteger(String(intValue), 10);\n        this.setByBigInteger(bi);\n    };\n\n    /**\n     * set value by integer value\n     * @name setValueHex\n     * @memberOf KJUR.asn1.DERInteger#\n     * @function\n     * @param {String} hexadecimal string of integer value\n     * @description\n     * <br/>\n     * NOTE: Value shall be represented by minimum octet length of\n     * two's complement representation.\n     * @example\n     * new KJUR.asn1.DERInteger(123);\n     * new KJUR.asn1.DERInteger({'int': 123});\n     * new KJUR.asn1.DERInteger({'hex': '1fad'});\n     */\n    this.setValueHex = function(newHexString) {\n        this.hV = newHexString;\n    };\n\n    this.getFreshValueHex = function() {\n        return this.hV;\n    };\n\n    if (typeof params != \"undefined\") {\n        if (typeof params['bigint'] != \"undefined\") {\n            this.setByBigInteger(params['bigint']);\n        } else if (typeof params['int'] != \"undefined\") {\n            this.setByInteger(params['int']);\n        } else if (typeof params == \"number\") {\n            this.setByInteger(params);\n        } else if (typeof params['hex'] != \"undefined\") {\n            this.setValueHex(params['hex']);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERInteger, KJUR.asn1.ASN1Object);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER encoded BitString primitive\n * @name KJUR.asn1.DERBitString\n * @class class for ASN.1 DER encoded BitString primitive\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>bin - specify binary string (ex. '10111')</li>\n * <li>array - specify array of boolean (ex. [true,false,true,true])</li>\n * <li>hex - specify hexadecimal string of ASN.1 value(V) including unused bits</li>\n * <li>obj - specify {@link KJUR.asn1.ASN1Util.newObject}\n * argument for \"BitString encapsulates\" structure.</li>\n * </ul>\n * NOTE1: 'params' can be omitted.<br/>\n * NOTE2: 'obj' parameter have been supported since\n * asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).<br/>\n * @example\n * // default constructor\n * o = new KJUR.asn1.DERBitString();\n * // initialize with binary string\n * o = new KJUR.asn1.DERBitString({bin: \"1011\"});\n * // initialize with boolean array\n * o = new KJUR.asn1.DERBitString({array: [true,false,true,true]});\n * // initialize with hexadecimal string (04 is unused bits)\n * o = new KJUR.asn1.DEROctetString({hex: \"04bac0\"});\n * // initialize with ASN1Util.newObject argument for encapsulated\n * o = new KJUR.asn1.DERBitString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});\n * // above generates a ASN.1 data like this:\n * // BIT STRING, encapsulates {\n * //   SEQUENCE {\n * //     INTEGER 3\n * //     PrintableString 'aaa'\n * //     }\n * //   }\n */\nKJUR.asn1.DERBitString = function(params) {\n    if (params !== undefined && typeof params.obj !== \"undefined\") {\n        var o = KJUR.asn1.ASN1Util.newObject(params.obj);\n        params.hex = \"00\" + o.getEncodedHex();\n    }\n    KJUR.asn1.DERBitString.superclass.constructor.call(this);\n    this.hT = \"03\";\n\n    /**\n     * set ASN.1 value(V) by a hexadecimal string including unused bits\n     * @name setHexValueIncludingUnusedBits\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {String} newHexStringIncludingUnusedBits\n     */\n    this.setHexValueIncludingUnusedBits = function(newHexStringIncludingUnusedBits) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = newHexStringIncludingUnusedBits;\n    };\n\n    /**\n     * set ASN.1 value(V) by unused bit and hexadecimal string of value\n     * @name setUnusedBitsAndHexValue\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {Integer} unusedBits\n     * @param {String} hValue\n     */\n    this.setUnusedBitsAndHexValue = function(unusedBits, hValue) {\n        if (unusedBits < 0 || 7 < unusedBits) {\n            throw \"unused bits shall be from 0 to 7: u = \" + unusedBits;\n        }\n        var hUnusedBits = \"0\" + unusedBits;\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = hUnusedBits + hValue;\n    };\n\n    /**\n     * set ASN.1 DER BitString by binary string<br/>\n     * @name setByBinaryString\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {String} binaryString binary value string (i.e. '10111')\n     * @description\n     * Its unused bits will be calculated automatically by length of\n     * 'binaryValue'. <br/>\n     * NOTE: Trailing zeros '0' will be ignored.\n     * @example\n     * o = new KJUR.asn1.DERBitString();\n     * o.setByBooleanArray(\"01011\");\n     */\n    this.setByBinaryString = function(binaryString) {\n        binaryString = binaryString.replace(/0+$/, '');\n        var unusedBits = 8 - binaryString.length % 8;\n        if (unusedBits == 8) unusedBits = 0;\n        for (var i = 0; i <= unusedBits; i++) {\n            binaryString += '0';\n        }\n        var h = '';\n        for (var i = 0; i < binaryString.length - 1; i += 8) {\n            var b = binaryString.substr(i, 8);\n            var x = parseInt(b, 2).toString(16);\n            if (x.length == 1) x = '0' + x;\n            h += x;\n        }\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = '0' + unusedBits + h;\n    };\n\n    /**\n     * set ASN.1 TLV value(V) by an array of boolean<br/>\n     * @name setByBooleanArray\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {array} booleanArray array of boolean (ex. [true, false, true])\n     * @description\n     * NOTE: Trailing falses will be ignored in the ASN.1 DER Object.\n     * @example\n     * o = new KJUR.asn1.DERBitString();\n     * o.setByBooleanArray([false, true, false, true, true]);\n     */\n    this.setByBooleanArray = function(booleanArray) {\n        var s = '';\n        for (var i = 0; i < booleanArray.length; i++) {\n            if (booleanArray[i] == true) {\n                s += '1';\n            } else {\n                s += '0';\n            }\n        }\n        this.setByBinaryString(s);\n    };\n\n    /**\n     * generate an array of falses with specified length<br/>\n     * @name newFalseArray\n     * @memberOf KJUR.asn1.DERBitString\n     * @function\n     * @param {Integer} nLength length of array to generate\n     * @return {array} array of boolean falses\n     * @description\n     * This static method may be useful to initialize boolean array.\n     * @example\n     * o = new KJUR.asn1.DERBitString();\n     * o.newFalseArray(3) &rarr; [false, false, false]\n     */\n    this.newFalseArray = function(nLength) {\n        var a = new Array(nLength);\n        for (var i = 0; i < nLength; i++) {\n            a[i] = false;\n        }\n        return a;\n    };\n\n    this.getFreshValueHex = function() {\n        return this.hV;\n    };\n\n    if (typeof params != \"undefined\") {\n        if (typeof params == \"string\" && params.toLowerCase().match(/^[0-9a-f]+$/)) {\n            this.setHexValueIncludingUnusedBits(params);\n        } else if (typeof params['hex'] != \"undefined\") {\n            this.setHexValueIncludingUnusedBits(params['hex']);\n        } else if (typeof params['bin'] != \"undefined\") {\n            this.setByBinaryString(params['bin']);\n        } else if (typeof params['array'] != \"undefined\") {\n            this.setByBooleanArray(params['array']);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERBitString, KJUR.asn1.ASN1Object);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER OctetString<br/>\n * @name KJUR.asn1.DEROctetString\n * @class class for ASN.1 DER OctetString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * This class provides ASN.1 OctetString simple type.<br/>\n * Supported \"params\" attributes are:\n * <ul>\n * <li>str - to set a string as a value</li>\n * <li>hex - to set a hexadecimal string as a value</li>\n * <li>obj - to set a encapsulated ASN.1 value by JSON object\n * which is defined in {@link KJUR.asn1.ASN1Util.newObject}</li>\n * </ul>\n * NOTE: A parameter 'obj' have been supported\n * for \"OCTET STRING, encapsulates\" structure.\n * since asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).\n * @see KJUR.asn1.DERAbstractString - superclass\n * @example\n * // default constructor\n * o = new KJUR.asn1.DEROctetString();\n * // initialize with string\n * o = new KJUR.asn1.DEROctetString({str: \"aaa\"});\n * // initialize with hexadecimal string\n * o = new KJUR.asn1.DEROctetString({hex: \"616161\"});\n * // initialize with ASN1Util.newObject argument\n * o = new KJUR.asn1.DEROctetString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});\n * // above generates a ASN.1 data like this:\n * // OCTET STRING, encapsulates {\n * //   SEQUENCE {\n * //     INTEGER 3\n * //     PrintableString 'aaa'\n * //     }\n * //   }\n */\nKJUR.asn1.DEROctetString = function(params) {\n    if (params !== undefined && typeof params.obj !== \"undefined\") {\n        var o = KJUR.asn1.ASN1Util.newObject(params.obj);\n        params.hex = o.getEncodedHex();\n    }\n    KJUR.asn1.DEROctetString.superclass.constructor.call(this, params);\n    this.hT = \"04\";\n};\nYAHOO.lang.extend(KJUR.asn1.DEROctetString, KJUR.asn1.DERAbstractString);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER Null\n * @name KJUR.asn1.DERNull\n * @class class for ASN.1 DER Null\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERNull = function() {\n    KJUR.asn1.DERNull.superclass.constructor.call(this);\n    this.hT = \"05\";\n    this.hTLV = \"0500\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERNull, KJUR.asn1.ASN1Object);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER ObjectIdentifier\n * @name KJUR.asn1.DERObjectIdentifier\n * @class class for ASN.1 DER ObjectIdentifier\n * @param {Array} params associative array of parameters (ex. {'oid': '2.5.4.5'})\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>oid - specify initial ASN.1 value(V) by a oid string (ex. 2.5.4.13)</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERObjectIdentifier = function(params) {\n    var itox = function(i) {\n        var h = i.toString(16);\n        if (h.length == 1) h = '0' + h;\n        return h;\n    };\n    var roidtox = function(roid) {\n        var h = '';\n        var bi = new BigInteger(roid, 10);\n        var b = bi.toString(2);\n        var padLen = 7 - b.length % 7;\n        if (padLen == 7) padLen = 0;\n        var bPad = '';\n        for (var i = 0; i < padLen; i++) bPad += '0';\n        b = bPad + b;\n        for (var i = 0; i < b.length - 1; i += 7) {\n            var b8 = b.substr(i, 7);\n            if (i != b.length - 7) b8 = '1' + b8;\n            h += itox(parseInt(b8, 2));\n        }\n        return h;\n    };\n\n    KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);\n    this.hT = \"06\";\n\n    /**\n     * set value by a hexadecimal string\n     * @name setValueHex\n     * @memberOf KJUR.asn1.DERObjectIdentifier#\n     * @function\n     * @param {String} newHexString hexadecimal value of OID bytes\n     */\n    this.setValueHex = function(newHexString) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = null;\n        this.hV = newHexString;\n    };\n\n    /**\n     * set value by a OID string<br/>\n     * @name setValueOidString\n     * @memberOf KJUR.asn1.DERObjectIdentifier#\n     * @function\n     * @param {String} oidString OID string (ex. 2.5.4.13)\n     * @example\n     * o = new KJUR.asn1.DERObjectIdentifier();\n     * o.setValueOidString(\"2.5.4.13\");\n     */\n    this.setValueOidString = function(oidString) {\n        if (! oidString.match(/^[0-9.]+$/)) {\n            throw \"malformed oid string: \" + oidString;\n        }\n        var h = '';\n        var a = oidString.split('.');\n        var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\n        h += itox(i0);\n        a.splice(0, 2);\n        for (var i = 0; i < a.length; i++) {\n            h += roidtox(a[i]);\n        }\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = null;\n        this.hV = h;\n    };\n\n    /**\n     * set value by a OID name\n     * @name setValueName\n     * @memberOf KJUR.asn1.DERObjectIdentifier#\n     * @function\n     * @param {String} oidName OID name (ex. 'serverAuth')\n     * @since 1.0.1\n     * @description\n     * OID name shall be defined in 'KJUR.asn1.x509.OID.name2oidList'.\n     * Otherwise raise error.\n     * @example\n     * o = new KJUR.asn1.DERObjectIdentifier();\n     * o.setValueName(\"serverAuth\");\n     */\n    this.setValueName = function(oidName) {\n        var oid = KJUR.asn1.x509.OID.name2oid(oidName);\n        if (oid !== '') {\n            this.setValueOidString(oid);\n        } else {\n            throw \"DERObjectIdentifier oidName undefined: \" + oidName;\n        }\n    };\n\n    this.getFreshValueHex = function() {\n        return this.hV;\n    };\n\n    if (params !== undefined) {\n        if (typeof params === \"string\") {\n            if (params.match(/^[0-2].[0-9.]+$/)) {\n                this.setValueOidString(params);\n            } else {\n                this.setValueName(params);\n            }\n        } else if (params.oid !== undefined) {\n            this.setValueOidString(params.oid);\n        } else if (params.hex !== undefined) {\n            this.setValueHex(params.hex);\n        } else if (params.name !== undefined) {\n            this.setValueName(params.name);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier, KJUR.asn1.ASN1Object);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER Enumerated\n * @name KJUR.asn1.DEREnumerated\n * @class class for ASN.1 DER Enumerated\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>int - specify initial ASN.1 value(V) by integer value</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n * @example\n * new KJUR.asn1.DEREnumerated(123);\n * new KJUR.asn1.DEREnumerated({int: 123});\n * new KJUR.asn1.DEREnumerated({hex: '1fad'});\n */\nKJUR.asn1.DEREnumerated = function(params) {\n    KJUR.asn1.DEREnumerated.superclass.constructor.call(this);\n    this.hT = \"0a\";\n\n    /**\n     * set value by Tom Wu's BigInteger object\n     * @name setByBigInteger\n     * @memberOf KJUR.asn1.DEREnumerated#\n     * @function\n     * @param {BigInteger} bigIntegerValue to set\n     */\n    this.setByBigInteger = function(bigIntegerValue) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\n    };\n\n    /**\n     * set value by integer value\n     * @name setByInteger\n     * @memberOf KJUR.asn1.DEREnumerated#\n     * @function\n     * @param {Integer} integer value to set\n     */\n    this.setByInteger = function(intValue) {\n        var bi = new BigInteger(String(intValue), 10);\n        this.setByBigInteger(bi);\n    };\n\n    /**\n     * set value by integer value\n     * @name setValueHex\n     * @memberOf KJUR.asn1.DEREnumerated#\n     * @function\n     * @param {String} hexadecimal string of integer value\n     * @description\n     * <br/>\n     * NOTE: Value shall be represented by minimum octet length of\n     * two's complement representation.\n     */\n    this.setValueHex = function(newHexString) {\n        this.hV = newHexString;\n    };\n\n    this.getFreshValueHex = function() {\n        return this.hV;\n    };\n\n    if (typeof params != \"undefined\") {\n        if (typeof params['int'] != \"undefined\") {\n            this.setByInteger(params['int']);\n        } else if (typeof params == \"number\") {\n            this.setByInteger(params);\n        } else if (typeof params['hex'] != \"undefined\") {\n            this.setValueHex(params['hex']);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DEREnumerated, KJUR.asn1.ASN1Object);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER UTF8String\n * @name KJUR.asn1.DERUTF8String\n * @class class for ASN.1 DER UTF8String\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERUTF8String = function(params) {\n    KJUR.asn1.DERUTF8String.superclass.constructor.call(this, params);\n    this.hT = \"0c\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERUTF8String, KJUR.asn1.DERAbstractString);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER NumericString\n * @name KJUR.asn1.DERNumericString\n * @class class for ASN.1 DER NumericString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERNumericString = function(params) {\n    KJUR.asn1.DERNumericString.superclass.constructor.call(this, params);\n    this.hT = \"12\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERNumericString, KJUR.asn1.DERAbstractString);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER PrintableString\n * @name KJUR.asn1.DERPrintableString\n * @class class for ASN.1 DER PrintableString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERPrintableString = function(params) {\n    KJUR.asn1.DERPrintableString.superclass.constructor.call(this, params);\n    this.hT = \"13\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERPrintableString, KJUR.asn1.DERAbstractString);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER TeletexString\n * @name KJUR.asn1.DERTeletexString\n * @class class for ASN.1 DER TeletexString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERTeletexString = function(params) {\n    KJUR.asn1.DERTeletexString.superclass.constructor.call(this, params);\n    this.hT = \"14\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERTeletexString, KJUR.asn1.DERAbstractString);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER IA5String\n * @name KJUR.asn1.DERIA5String\n * @class class for ASN.1 DER IA5String\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERIA5String = function(params) {\n    KJUR.asn1.DERIA5String.superclass.constructor.call(this, params);\n    this.hT = \"16\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERIA5String, KJUR.asn1.DERAbstractString);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER UTCTime\n * @name KJUR.asn1.DERUTCTime\n * @class class for ASN.1 DER UTCTime\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\n * @extends KJUR.asn1.DERAbstractTime\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'130430235959Z')</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * <li>date - specify Date object.</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n * <h4>EXAMPLES</h4>\n * @example\n * d1 = new KJUR.asn1.DERUTCTime();\n * d1.setString('130430125959Z');\n *\n * d2 = new KJUR.asn1.DERUTCTime({'str': '130430125959Z'});\n * d3 = new KJUR.asn1.DERUTCTime({'date': new Date(Date.UTC(2015, 0, 31, 0, 0, 0, 0))});\n * d4 = new KJUR.asn1.DERUTCTime('130430125959Z');\n */\nKJUR.asn1.DERUTCTime = function(params) {\n    KJUR.asn1.DERUTCTime.superclass.constructor.call(this, params);\n    this.hT = \"17\";\n\n    /**\n     * set value by a Date object<br/>\n     * @name setByDate\n     * @memberOf KJUR.asn1.DERUTCTime#\n     * @function\n     * @param {Date} dateObject Date object to set ASN.1 value(V)\n     * @example\n     * o = new KJUR.asn1.DERUTCTime();\n     * o.setByDate(new Date(\"2016/12/31\"));\n     */\n    this.setByDate = function(dateObject) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.date = dateObject;\n        this.s = this.formatDate(this.date, 'utc');\n        this.hV = stohex(this.s);\n    };\n\n    this.getFreshValueHex = function() {\n        if (typeof this.date == \"undefined\" && typeof this.s == \"undefined\") {\n            this.date = new Date();\n            this.s = this.formatDate(this.date, 'utc');\n            this.hV = stohex(this.s);\n        }\n        return this.hV;\n    };\n\n    if (params !== undefined) {\n        if (params.str !== undefined) {\n            this.setString(params.str);\n        } else if (typeof params == \"string\" && params.match(/^[0-9]{12}Z$/)) {\n            this.setString(params);\n        } else if (params.hex !== undefined) {\n            this.setStringHex(params.hex);\n        } else if (params.date !== undefined) {\n            this.setByDate(params.date);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERUTCTime, KJUR.asn1.DERAbstractTime);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER GeneralizedTime\n * @name KJUR.asn1.DERGeneralizedTime\n * @class class for ASN.1 DER GeneralizedTime\n * @param {Array} params associative array of parameters (ex. {'str': '20130430235959Z'})\n * @property {Boolean} withMillis flag to show milliseconds or not\n * @extends KJUR.asn1.DERAbstractTime\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'20130430235959Z')</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * <li>date - specify Date object.</li>\n * <li>millis - specify flag to show milliseconds (from 1.0.6)</li>\n * </ul>\n * NOTE1: 'params' can be omitted.\n * NOTE2: 'withMillis' property is supported from asn1 1.0.6.\n */\nKJUR.asn1.DERGeneralizedTime = function(params) {\n    KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this, params);\n    this.hT = \"18\";\n    this.withMillis = false;\n\n    /**\n     * set value by a Date object\n     * @name setByDate\n     * @memberOf KJUR.asn1.DERGeneralizedTime#\n     * @function\n     * @param {Date} dateObject Date object to set ASN.1 value(V)\n     * @example\n     * When you specify UTC time, use 'Date.UTC' method like this:<br/>\n     * o1 = new DERUTCTime();\n     * o1.setByDate(date);\n     *\n     * date = new Date(Date.UTC(2015, 0, 31, 23, 59, 59, 0)); #2015JAN31 23:59:59\n     */\n    this.setByDate = function(dateObject) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.date = dateObject;\n        this.s = this.formatDate(this.date, 'gen', this.withMillis);\n        this.hV = stohex(this.s);\n    };\n\n    this.getFreshValueHex = function() {\n        if (this.date === undefined && this.s === undefined) {\n            this.date = new Date();\n            this.s = this.formatDate(this.date, 'gen', this.withMillis);\n            this.hV = stohex(this.s);\n        }\n        return this.hV;\n    };\n\n    if (params !== undefined) {\n        if (params.str !== undefined) {\n            this.setString(params.str);\n        } else if (typeof params == \"string\" && params.match(/^[0-9]{14}Z$/)) {\n            this.setString(params);\n        } else if (params.hex !== undefined) {\n            this.setStringHex(params.hex);\n        } else if (params.date !== undefined) {\n            this.setByDate(params.date);\n        }\n        if (params.millis === true) {\n            this.withMillis = true;\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime, KJUR.asn1.DERAbstractTime);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER Sequence\n * @name KJUR.asn1.DERSequence\n * @class class for ASN.1 DER Sequence\n * @extends KJUR.asn1.DERAbstractStructured\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>array - specify array of ASN1Object to set elements of content</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERSequence = function(params) {\n    KJUR.asn1.DERSequence.superclass.constructor.call(this, params);\n    this.hT = \"30\";\n    this.getFreshValueHex = function() {\n        var h = '';\n        for (var i = 0; i < this.asn1Array.length; i++) {\n            var asn1Obj = this.asn1Array[i];\n            h += asn1Obj.getEncodedHex();\n        }\n        this.hV = h;\n        return this.hV;\n    };\n};\nYAHOO.lang.extend(KJUR.asn1.DERSequence, KJUR.asn1.DERAbstractStructured);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER Set\n * @name KJUR.asn1.DERSet\n * @class class for ASN.1 DER Set\n * @extends KJUR.asn1.DERAbstractStructured\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>array - specify array of ASN1Object to set elements of content</li>\n * <li>sortflag - flag for sort (default: true). ASN.1 BER is not sorted in 'SET OF'.</li>\n * </ul>\n * NOTE1: 'params' can be omitted.<br/>\n * NOTE2: sortflag is supported since 1.0.5.\n */\nKJUR.asn1.DERSet = function(params) {\n    KJUR.asn1.DERSet.superclass.constructor.call(this, params);\n    this.hT = \"31\";\n    this.sortFlag = true; // item shall be sorted only in ASN.1 DER\n    this.getFreshValueHex = function() {\n        var a = new Array();\n        for (var i = 0; i < this.asn1Array.length; i++) {\n            var asn1Obj = this.asn1Array[i];\n            a.push(asn1Obj.getEncodedHex());\n        }\n        if (this.sortFlag == true) a.sort();\n        this.hV = a.join('');\n        return this.hV;\n    };\n\n    if (typeof params != \"undefined\") {\n        if (typeof params.sortflag != \"undefined\" &&\n            params.sortflag == false)\n            this.sortFlag = false;\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERSet, KJUR.asn1.DERAbstractStructured);\n\n// ********************************************************************\n/**\n * class for ASN.1 DER TaggedObject\n * @name KJUR.asn1.DERTaggedObject\n * @class class for ASN.1 DER TaggedObject\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * Parameter 'tagNoNex' is ASN.1 tag(T) value for this object.\n * For example, if you find '[1]' tag in a ASN.1 dump,\n * 'tagNoHex' will be 'a1'.\n * <br/>\n * As for optional argument 'params' for constructor, you can specify *ANY* of\n * following properties:\n * <ul>\n * <li>explicit - specify true if this is explicit tag otherwise false\n *     (default is 'true').</li>\n * <li>tag - specify tag (default is 'a0' which means [0])</li>\n * <li>obj - specify ASN1Object which is tagged</li>\n * </ul>\n * @example\n * d1 = new KJUR.asn1.DERUTF8String({'str':'a'});\n * d2 = new KJUR.asn1.DERTaggedObject({'obj': d1});\n * hex = d2.getEncodedHex();\n */\nKJUR.asn1.DERTaggedObject = function(params) {\n    KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);\n    this.hT = \"a0\";\n    this.hV = '';\n    this.isExplicit = true;\n    this.asn1Object = null;\n\n    /**\n     * set value by an ASN1Object\n     * @name setString\n     * @memberOf KJUR.asn1.DERTaggedObject#\n     * @function\n     * @param {Boolean} isExplicitFlag flag for explicit/implicit tag\n     * @param {Integer} tagNoHex hexadecimal string of ASN.1 tag\n     * @param {ASN1Object} asn1Object ASN.1 to encapsulate\n     */\n    this.setASN1Object = function(isExplicitFlag, tagNoHex, asn1Object) {\n        this.hT = tagNoHex;\n        this.isExplicit = isExplicitFlag;\n        this.asn1Object = asn1Object;\n        if (this.isExplicit) {\n            this.hV = this.asn1Object.getEncodedHex();\n            this.hTLV = null;\n            this.isModified = true;\n        } else {\n            this.hV = null;\n            this.hTLV = asn1Object.getEncodedHex();\n            this.hTLV = this.hTLV.replace(/^../, tagNoHex);\n            this.isModified = false;\n        }\n    };\n\n    this.getFreshValueHex = function() {\n        return this.hV;\n    };\n\n    if (typeof params != \"undefined\") {\n        if (typeof params['tag'] != \"undefined\") {\n            this.hT = params['tag'];\n        }\n        if (typeof params['explicit'] != \"undefined\") {\n            this.isExplicit = params['explicit'];\n        }\n        if (typeof params['obj'] != \"undefined\") {\n            this.asn1Object = params['obj'];\n            this.setASN1Object(this.isExplicit, this.hT, this.asn1Object);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERTaggedObject, KJUR.asn1.ASN1Object);\n\n/**\n * Create a new JSEncryptRSAKey that extends Tom Wu's RSA key object.\n * This object is just a decorator for parsing the key parameter\n * @param {string|Object} key - The key in string format, or an object containing\n * the parameters needed to build a RSAKey object.\n * @constructor\n */\nvar JSEncryptRSAKey = /** @class */ (function (_super) {\n    __extends(JSEncryptRSAKey, _super);\n    function JSEncryptRSAKey(key) {\n        var _this = _super.call(this) || this;\n        // Call the super constructor.\n        //  RSAKey.call(this);\n        // If a key key was provided.\n        if (key) {\n            // If this is a string...\n            if (typeof key === \"string\") {\n                _this.parseKey(key);\n            }\n            else if (JSEncryptRSAKey.hasPrivateKeyProperty(key) ||\n                JSEncryptRSAKey.hasPublicKeyProperty(key)) {\n                // Set the values for the key.\n                _this.parsePropertiesFrom(key);\n            }\n        }\n        return _this;\n    }\n    /**\n     * Method to parse a pem encoded string containing both a public or private key.\n     * The method will translate the pem encoded string in a der encoded string and\n     * will parse private key and public key parameters. This method accepts public key\n     * in the rsaencryption pkcs #1 format (oid: 1.2.840.113549.1.1.1).\n     *\n     * @todo Check how many rsa formats use the same format of pkcs #1.\n     *\n     * The format is defined as:\n     * PublicKeyInfo ::= SEQUENCE {\n     *   algorithm       AlgorithmIdentifier,\n     *   PublicKey       BIT STRING\n     * }\n     * Where AlgorithmIdentifier is:\n     * AlgorithmIdentifier ::= SEQUENCE {\n     *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm\n     *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)\n     * }\n     * and PublicKey is a SEQUENCE encapsulated in a BIT STRING\n     * RSAPublicKey ::= SEQUENCE {\n     *   modulus           INTEGER,  -- n\n     *   publicExponent    INTEGER   -- e\n     * }\n     * it's possible to examine the structure of the keys obtained from openssl using\n     * an asn.1 dumper as the one used here to parse the components: http://lapo.it/asn1js/\n     * @argument {string} pem the pem encoded string, can include the BEGIN/END header/footer\n     * @private\n     */\n    JSEncryptRSAKey.prototype.parseKey = function (pem) {\n        try {\n            var modulus = 0;\n            var public_exponent = 0;\n            var reHex = /^\\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\\s*)+$/;\n            var der = reHex.test(pem) ? Hex.decode(pem) : Base64.unarmor(pem);\n            var asn1 = ASN1.decode(der);\n            // Fixes a bug with OpenSSL 1.0+ private keys\n            if (asn1.sub.length === 3) {\n                asn1 = asn1.sub[2].sub[0];\n            }\n            if (asn1.sub.length === 9) {\n                // Parse the private key.\n                modulus = asn1.sub[1].getHexStringValue(); // bigint\n                this.n = parseBigInt(modulus, 16);\n                public_exponent = asn1.sub[2].getHexStringValue(); // int\n                this.e = parseInt(public_exponent, 16);\n                var private_exponent = asn1.sub[3].getHexStringValue(); // bigint\n                this.d = parseBigInt(private_exponent, 16);\n                var prime1 = asn1.sub[4].getHexStringValue(); // bigint\n                this.p = parseBigInt(prime1, 16);\n                var prime2 = asn1.sub[5].getHexStringValue(); // bigint\n                this.q = parseBigInt(prime2, 16);\n                var exponent1 = asn1.sub[6].getHexStringValue(); // bigint\n                this.dmp1 = parseBigInt(exponent1, 16);\n                var exponent2 = asn1.sub[7].getHexStringValue(); // bigint\n                this.dmq1 = parseBigInt(exponent2, 16);\n                var coefficient = asn1.sub[8].getHexStringValue(); // bigint\n                this.coeff = parseBigInt(coefficient, 16);\n            }\n            else if (asn1.sub.length === 2) {\n                // Parse the public key.\n                var bit_string = asn1.sub[1];\n                var sequence = bit_string.sub[0];\n                modulus = sequence.sub[0].getHexStringValue();\n                this.n = parseBigInt(modulus, 16);\n                public_exponent = sequence.sub[1].getHexStringValue();\n                this.e = parseInt(public_exponent, 16);\n            }\n            else {\n                return false;\n            }\n            return true;\n        }\n        catch (ex) {\n            return false;\n        }\n    };\n    /**\n     * Translate rsa parameters in a hex encoded string representing the rsa key.\n     *\n     * The translation follow the ASN.1 notation :\n     * RSAPrivateKey ::= SEQUENCE {\n     *   version           Version,\n     *   modulus           INTEGER,  -- n\n     *   publicExponent    INTEGER,  -- e\n     *   privateExponent   INTEGER,  -- d\n     *   prime1            INTEGER,  -- p\n     *   prime2            INTEGER,  -- q\n     *   exponent1         INTEGER,  -- d mod (p1)\n     *   exponent2         INTEGER,  -- d mod (q-1)\n     *   coefficient       INTEGER,  -- (inverse of q) mod p\n     * }\n     * @returns {string}  DER Encoded String representing the rsa private key\n     * @private\n     */\n    JSEncryptRSAKey.prototype.getPrivateBaseKey = function () {\n        var options = {\n            array: [\n                new KJUR.asn1.DERInteger({ int: 0 }),\n                new KJUR.asn1.DERInteger({ bigint: this.n }),\n                new KJUR.asn1.DERInteger({ int: this.e }),\n                new KJUR.asn1.DERInteger({ bigint: this.d }),\n                new KJUR.asn1.DERInteger({ bigint: this.p }),\n                new KJUR.asn1.DERInteger({ bigint: this.q }),\n                new KJUR.asn1.DERInteger({ bigint: this.dmp1 }),\n                new KJUR.asn1.DERInteger({ bigint: this.dmq1 }),\n                new KJUR.asn1.DERInteger({ bigint: this.coeff })\n            ]\n        };\n        var seq = new KJUR.asn1.DERSequence(options);\n        return seq.getEncodedHex();\n    };\n    /**\n     * base64 (pem) encoded version of the DER encoded representation\n     * @returns {string} pem encoded representation without header and footer\n     * @public\n     */\n    JSEncryptRSAKey.prototype.getPrivateBaseKeyB64 = function () {\n        return hex2b64(this.getPrivateBaseKey());\n    };\n    /**\n     * Translate rsa parameters in a hex encoded string representing the rsa public key.\n     * The representation follow the ASN.1 notation :\n     * PublicKeyInfo ::= SEQUENCE {\n     *   algorithm       AlgorithmIdentifier,\n     *   PublicKey       BIT STRING\n     * }\n     * Where AlgorithmIdentifier is:\n     * AlgorithmIdentifier ::= SEQUENCE {\n     *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm\n     *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)\n     * }\n     * and PublicKey is a SEQUENCE encapsulated in a BIT STRING\n     * RSAPublicKey ::= SEQUENCE {\n     *   modulus           INTEGER,  -- n\n     *   publicExponent    INTEGER   -- e\n     * }\n     * @returns {string} DER Encoded String representing the rsa public key\n     * @private\n     */\n    JSEncryptRSAKey.prototype.getPublicBaseKey = function () {\n        var first_sequence = new KJUR.asn1.DERSequence({\n            array: [\n                new KJUR.asn1.DERObjectIdentifier({ oid: \"1.2.840.113549.1.1.1\" }),\n                new KJUR.asn1.DERNull()\n            ]\n        });\n        var second_sequence = new KJUR.asn1.DERSequence({\n            array: [\n                new KJUR.asn1.DERInteger({ bigint: this.n }),\n                new KJUR.asn1.DERInteger({ int: this.e })\n            ]\n        });\n        var bit_string = new KJUR.asn1.DERBitString({\n            hex: \"00\" + second_sequence.getEncodedHex()\n        });\n        var seq = new KJUR.asn1.DERSequence({\n            array: [\n                first_sequence,\n                bit_string\n            ]\n        });\n        return seq.getEncodedHex();\n    };\n    /**\n     * base64 (pem) encoded version of the DER encoded representation\n     * @returns {string} pem encoded representation without header and footer\n     * @public\n     */\n    JSEncryptRSAKey.prototype.getPublicBaseKeyB64 = function () {\n        return hex2b64(this.getPublicBaseKey());\n    };\n    /**\n     * wrap the string in block of width chars. The default value for rsa keys is 64\n     * characters.\n     * @param {string} str the pem encoded string without header and footer\n     * @param {Number} [width=64] - the length the string has to be wrapped at\n     * @returns {string}\n     * @private\n     */\n    JSEncryptRSAKey.wordwrap = function (str, width) {\n        width = width || 64;\n        if (!str) {\n            return str;\n        }\n        var regex = \"(.{1,\" + width + \"})( +|$\\n?)|(.{1,\" + width + \"})\";\n        return str.match(RegExp(regex, \"g\")).join(\"\\n\");\n    };\n    /**\n     * Retrieve the pem encoded private key\n     * @returns {string} the pem encoded private key with header/footer\n     * @public\n     */\n    JSEncryptRSAKey.prototype.getPrivateKey = function () {\n        var key = \"-----BEGIN RSA PRIVATE KEY-----\\n\";\n        key += JSEncryptRSAKey.wordwrap(this.getPrivateBaseKeyB64()) + \"\\n\";\n        key += \"-----END RSA PRIVATE KEY-----\";\n        return key;\n    };\n    /**\n     * Retrieve the pem encoded public key\n     * @returns {string} the pem encoded public key with header/footer\n     * @public\n     */\n    JSEncryptRSAKey.prototype.getPublicKey = function () {\n        var key = \"-----BEGIN PUBLIC KEY-----\\n\";\n        key += JSEncryptRSAKey.wordwrap(this.getPublicBaseKeyB64()) + \"\\n\";\n        key += \"-----END PUBLIC KEY-----\";\n        return key;\n    };\n    /**\n     * Check if the object contains the necessary parameters to populate the rsa modulus\n     * and public exponent parameters.\n     * @param {Object} [obj={}] - An object that may contain the two public key\n     * parameters\n     * @returns {boolean} true if the object contains both the modulus and the public exponent\n     * properties (n and e)\n     * @todo check for types of n and e. N should be a parseable bigInt object, E should\n     * be a parseable integer number\n     * @private\n     */\n    JSEncryptRSAKey.hasPublicKeyProperty = function (obj) {\n        obj = obj || {};\n        return (obj.hasOwnProperty(\"n\") &&\n            obj.hasOwnProperty(\"e\"));\n    };\n    /**\n     * Check if the object contains ALL the parameters of an RSA key.\n     * @param {Object} [obj={}] - An object that may contain nine rsa key\n     * parameters\n     * @returns {boolean} true if the object contains all the parameters needed\n     * @todo check for types of the parameters all the parameters but the public exponent\n     * should be parseable bigint objects, the public exponent should be a parseable integer number\n     * @private\n     */\n    JSEncryptRSAKey.hasPrivateKeyProperty = function (obj) {\n        obj = obj || {};\n        return (obj.hasOwnProperty(\"n\") &&\n            obj.hasOwnProperty(\"e\") &&\n            obj.hasOwnProperty(\"d\") &&\n            obj.hasOwnProperty(\"p\") &&\n            obj.hasOwnProperty(\"q\") &&\n            obj.hasOwnProperty(\"dmp1\") &&\n            obj.hasOwnProperty(\"dmq1\") &&\n            obj.hasOwnProperty(\"coeff\"));\n    };\n    /**\n     * Parse the properties of obj in the current rsa object. Obj should AT LEAST\n     * include the modulus and public exponent (n, e) parameters.\n     * @param {Object} obj - the object containing rsa parameters\n     * @private\n     */\n    JSEncryptRSAKey.prototype.parsePropertiesFrom = function (obj) {\n        this.n = obj.n;\n        this.e = obj.e;\n        if (obj.hasOwnProperty(\"d\")) {\n            this.d = obj.d;\n            this.p = obj.p;\n            this.q = obj.q;\n            this.dmp1 = obj.dmp1;\n            this.dmq1 = obj.dmq1;\n            this.coeff = obj.coeff;\n        }\n    };\n    return JSEncryptRSAKey;\n}(RSAKey));\n\n/**\n *\n * @param {Object} [options = {}] - An object to customize JSEncrypt behaviour\n * possible parameters are:\n * - default_key_size        {number}  default: 1024 the key size in bit\n * - default_public_exponent {string}  default: '010001' the hexadecimal representation of the public exponent\n * - log                     {boolean} default: false whether log warn/error or not\n * @constructor\n */\nvar JSEncrypt = /** @class */ (function () {\n    function JSEncrypt(options) {\n        options = options || {};\n        this.default_key_size = parseInt(options.default_key_size, 10) || 1024;\n        this.default_public_exponent = options.default_public_exponent || \"010001\"; // 65537 default openssl public exponent for rsa key type\n        this.log = options.log || false;\n        // The private and public key.\n        this.key = null;\n    }\n    /**\n     * Method to set the rsa key parameter (one method is enough to set both the public\n     * and the private key, since the private key contains the public key paramenters)\n     * Log a warning if logs are enabled\n     * @param {Object|string} key the pem encoded string or an object (with or without header/footer)\n     * @public\n     */\n    JSEncrypt.prototype.setKey = function (key) {\n        if (this.log && this.key) {\n            console.warn(\"A key was already set, overriding existing.\");\n        }\n        this.key = new JSEncryptRSAKey(key);\n    };\n    /**\n     * Proxy method for setKey, for api compatibility\n     * @see setKey\n     * @public\n     */\n    JSEncrypt.prototype.setPrivateKey = function (privkey) {\n        // Create the key.\n        this.setKey(privkey);\n    };\n    /**\n     * Proxy method for setKey, for api compatibility\n     * @see setKey\n     * @public\n     */\n    JSEncrypt.prototype.setPublicKey = function (pubkey) {\n        // Sets the public key.\n        this.setKey(pubkey);\n    };\n    /**\n     * Proxy method for RSAKey object's decrypt, decrypt the string using the private\n     * components of the rsa key object. Note that if the object was not set will be created\n     * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor\n     * @param {string} str base64 encoded crypted string to decrypt\n     * @return {string} the decrypted string\n     * @public\n     */\n    JSEncrypt.prototype.decrypt = function (str) {\n        // Return the decrypted string.\n        try {\n            return this.getKey().decrypt(b64tohex(str));\n        }\n        catch (ex) {\n            return false;\n        }\n    };\n    /**\n     * Proxy method for RSAKey object's encrypt, encrypt the string using the public\n     * components of the rsa key object. Note that if the object was not set will be created\n     * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor\n     * @param {string} str the string to encrypt\n     * @return {string} the encrypted string encoded in base64\n     * @public\n     */\n    JSEncrypt.prototype.encrypt = function (str) {\n        // Return the encrypted string.\n        try {\n            return hex2b64(this.getKey().encrypt(str));\n        }\n        catch (ex) {\n            return false;\n        }\n    };\n    /**\n     * Proxy method for RSAKey object's sign.\n     * @param {string} str the string to sign\n     * @param {function} digestMethod hash method\n     * @param {string} digestName the name of the hash algorithm\n     * @return {string} the signature encoded in base64\n     * @public\n     */\n    JSEncrypt.prototype.sign = function (str, digestMethod, digestName) {\n        // return the RSA signature of 'str' in 'hex' format.\n        try {\n            return hex2b64(this.getKey().sign(str, digestMethod, digestName));\n        }\n        catch (ex) {\n            return false;\n        }\n    };\n    /**\n     * Proxy method for RSAKey object's verify.\n     * @param {string} str the string to verify\n     * @param {string} signature the signature encoded in base64 to compare the string to\n     * @param {function} digestMethod hash method\n     * @return {boolean} whether the data and signature match\n     * @public\n     */\n    JSEncrypt.prototype.verify = function (str, signature, digestMethod) {\n        // Return the decrypted 'digest' of the signature.\n        try {\n            return this.getKey().verify(str, b64tohex(signature), digestMethod);\n        }\n        catch (ex) {\n            return false;\n        }\n    };\n    /**\n     * Getter for the current JSEncryptRSAKey object. If it doesn't exists a new object\n     * will be created and returned\n     * @param {callback} [cb] the callback to be called if we want the key to be generated\n     * in an async fashion\n     * @returns {JSEncryptRSAKey} the JSEncryptRSAKey object\n     * @public\n     */\n    JSEncrypt.prototype.getKey = function (cb) {\n        // Only create new if it does not exist.\n        if (!this.key) {\n            // Get a new private key.\n            this.key = new JSEncryptRSAKey();\n            if (cb && {}.toString.call(cb) === \"[object Function]\") {\n                this.key.generateAsync(this.default_key_size, this.default_public_exponent, cb);\n                return;\n            }\n            // Generate the key.\n            this.key.generate(this.default_key_size, this.default_public_exponent);\n        }\n        return this.key;\n    };\n    /**\n     * Returns the pem encoded representation of the private key\n     * If the key doesn't exists a new key will be created\n     * @returns {string} pem encoded representation of the private key WITH header and footer\n     * @public\n     */\n    JSEncrypt.prototype.getPrivateKey = function () {\n        // Return the private representation of this key.\n        return this.getKey().getPrivateKey();\n    };\n    /**\n     * Returns the pem encoded representation of the private key\n     * If the key doesn't exists a new key will be created\n     * @returns {string} pem encoded representation of the private key WITHOUT header and footer\n     * @public\n     */\n    JSEncrypt.prototype.getPrivateKeyB64 = function () {\n        // Return the private representation of this key.\n        return this.getKey().getPrivateBaseKeyB64();\n    };\n    /**\n     * Returns the pem encoded representation of the public key\n     * If the key doesn't exists a new key will be created\n     * @returns {string} pem encoded representation of the public key WITH header and footer\n     * @public\n     */\n    JSEncrypt.prototype.getPublicKey = function () {\n        // Return the private representation of this key.\n        return this.getKey().getPublicKey();\n    };\n    /**\n     * Returns the pem encoded representation of the public key\n     * If the key doesn't exists a new key will be created\n     * @returns {string} pem encoded representation of the public key WITHOUT header and footer\n     * @public\n     */\n    JSEncrypt.prototype.getPublicKeyB64 = function () {\n        // Return the private representation of this key.\n        return this.getKey().getPublicBaseKeyB64();\n    };\n    JSEncrypt.version = \"3.0.0-rc.1\";\n    return JSEncrypt;\n}());\n\nwindow.JSEncrypt = JSEncrypt;\n\nexports.JSEncrypt = JSEncrypt;\nexports.default = JSEncrypt;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/jsencrypt/bin/jsencrypt.js\n// module id = 31\n// module chunks = 0","/**\r\n * Created by Qiang.Deng on 2017/3/20.\r\n */\r\nvar strophe = require('strophe');\r\nvar muc = require('./strophe/plugins/strophe.emuc');\r\n\r\nvar Openfire = require('./libs/strophe.openfire.js');\r\nvar ManisStream = require('./manis.stream');\r\nvar ManisResponse = require('../modules/manis.response');\r\nvar ManisFunctions = require('../modules/manis.functions');\r\n\r\nvar peers = {}, myjid;\r\n\r\n\r\nfunction connectXMPP(username, password, nickname, successCallback, errorCallback) {\r\n  var openfireHost = window.serverPath + '/http-bind/';\r\n  connection = new Openfire.Connection(openfireHost);\r\n  try {\r\n    connection.connect(username, password, onConnect);\r\n    if (nickname) {\r\n      config.nickname = nickname;\r\n      connection.emuc.addDisplayNameToPresence(nickname);\r\n    }\r\n    connection.addHandler(onMessage, null, 'message');\r\n    connection.addHandler(onJingle, 'urn:xmpp:jingle:1', 'iq', 'set', null, null);\r\n    successCallback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.sign_success\r\n    });\r\n    console.info('userId : ', username.split('@')[0]);\r\n  } catch (e) {\r\n    errorCallback({\r\n      code: ManisResponse.code_400,\r\n      msg: ManisResponse.sign_failed,\r\n      error: e\r\n    })\r\n  }\r\n\r\n}\r\n\r\n\r\nfunction onConnect(status) {\r\n  if (status == Strophe.Status.CONNECTED) {\r\n    window.connection = connection;\r\n    console.log(\"xmpp connected\");\r\n    connection.sendIQ($pres().tree());\r\n  }\r\n}\r\n\r\nfunction onMessage(msg) {\r\n  if (window.connectType != 'p2p') {\r\n    return;\r\n  }\r\n  console.log(msg);\r\n  roomId = msg.getAttribute('from');\r\n  myjid = msg.getAttribute(\"to\");\r\n  var join = $(msg).find('>join');\r\n  if (join.length) {\r\n    var jids = join[0].childNodes;\r\n    for (var i = 0; i < jids.length; i++) {\r\n      var jid = jids[i].getAttribute(\"jid\");\r\n      if (jid == myjid) {\r\n        continue;\r\n      }\r\n      if (jid == roomId) {\r\n        continue;\r\n      }\r\n      var pc = getOrCreatePeerConnection(jid);\r\n      createOffer(pc, jid);\r\n    }\r\n  }\r\n  var left = $(msg).find('>left');\r\n  if (left.length) {\r\n    var sid = Strophe.getResourceFromJid(left[0].childNodes[0].textContent);\r\n    // var remoteVideos = document.getElementById(\"remoteVideos\");\r\n    // remoteVideos.removeChild(document.getElementById(sid));\r\n    if (window.participants.length > 0) {\r\n      for (var k = 0; k <= window.participants.length; k++) {\r\n        var p = window.participants[k];\r\n        if (p && p.resource === Strophe.getResourceFromJid(sid)) {\r\n          window.participants.splice(k, 1);\r\n        }\r\n      }\r\n    }\r\n    $(document).trigger('manis.room.someone.left', {resource: Strophe.getResourceFromJid(sid)});\r\n    peers[sid].close();\r\n    delete peers[sid];\r\n    console.log(\"sid>>>>\", sid);\r\n  }\r\n  console.log(\"peers>>>>>>>>\", peers);\r\n  return true;\r\n}\r\n\r\nfunction onJingle(iq) {\r\n  if (window.connectType != 'p2p') {\r\n    return;\r\n  }\r\n  var rid = $(iq).find('jingle').attr('rid');\r\n  var sid = $(iq).find('jingle').attr('sid');\r\n  var pc = getOrCreatePeerConnection(sid);\r\n  var action = $(iq).find('jingle').attr('action');\r\n  var sdp = $(iq).find('jingle').attr('sdp').split(\"||\").join(\"\\r\\n\");\r\n  roomId = iq.getAttribute('from');\r\n  console.log(\"action>>>>>>>>>>>>>>>>:\", action, \"   rid:\", rid);\r\n  if ('session-initiate' == action) {\r\n    myjid = rid;\r\n\r\n    pc.setRemoteDescription(new RTCSessionDescription({\r\n      type: 'offer',\r\n      sdp: sdp\r\n    }));\r\n    pc.createAnswer(function (sessionDescription) {\r\n      //console.log(\"--------------------------发送本地消息-----------------------------\", sessionDescription);\r\n      pc.setLocalDescription(sessionDescription);\r\n      var init = $iq({\r\n        to: roomId,\r\n        type: 'set'\r\n      }).c('jingle', {\r\n        xmlns: 'urn:xmpp:jingle:1',\r\n        action: 'session-accept',\r\n        sid: sid,\r\n        rid: rid,\r\n        sdp: sessionDescription.sdp.split(\"\\r\\n\").join(\"||\")\r\n      });\r\n      console.log(\"发送 createAnswer\", init.tree());\r\n      connection.sendIQ(init);\r\n    }, function (error) {\r\n      console.log('Failure callback: ' + error);\r\n    });\r\n  }\r\n  if ('session-accept' == action) {\r\n    pc.setRemoteDescription(new RTCSessionDescription({\r\n      type: 'answer',\r\n      sdp: sdp\r\n    }));\r\n  }\r\n  if ('transport-info' == action) {\r\n    var cand = $(iq).find('jingle').attr('sdp').split(\"||\");\r\n    var candidate = new RTCIceCandidate({\r\n      candidate: cand[0],\r\n      sdpMLineIndex: cand[1],\r\n      sdpMid: cand[2]\r\n    });\r\n    pc.addIceCandidate(candidate);\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction getOrCreatePeerConnection(sid) {\r\n  var pc = peers[Strophe.getResourceFromJid(sid)];\r\n  if (!pc) {\r\n    var server = {\"iceServers\": [{\"url\": config.nat}]};\r\n    pc = new RTCPeerConnection(server);\r\n    pc.onicecandidate = function (event) {\r\n      if (event.candidate) {\r\n        var init = $iq({\r\n          to: roomId,\r\n          type: 'set'\r\n        }).c('jingle', {\r\n          xmlns: 'urn:xmpp:jingle:1',\r\n          action: 'transport-info',\r\n          sid: sid,\r\n          rid: myjid,\r\n          sdp: event.candidate.candidate + \"||\" + event.candidate.sdpMLineIndex + \"||\" + event.candidate.sdpMid\r\n        });\r\n        console.log(\"发送 event.candidate\", sid, \" myjid:\", myjid);\r\n        connection.sendIQ(init);\r\n      } else {\r\n        console.log(\"End of candidates.\");\r\n      }\r\n    };\r\n    pc.onaddstream = function (event) {\r\n      /*console.log(\"remote:\" + event.stream.id);\r\n       var remoteVideos = document.getElementById(\"remoteVideos\");\r\n       var newVideo = document.createElement(\"video\");\r\n       newVideo.setAttribute(\"id\", Strophe.getResourceFromJid(sid));\r\n       attachMediaStream(newVideo, event.stream);\r\n       remoteVideos.appendChild(newVideo);*/\r\n      // event.stream.src = URL.createObjectURL(event.stream);\r\n      var participant = {\r\n        info: ManisFunctions.getUserInfoByJid(sid),\r\n        stream: event.stream,\r\n        status: ManisFunctions.generateStatusNode(Strophe.getResourceFromJid(sid))\r\n      };\r\n      $(document).trigger('manis.room.someone.joined', [participant]);\r\n    };\r\n    pc.onremovestream = function (event) { // 远程视频移除\r\n      console.log(\"远程视频移除\", event);\r\n    };\r\n    pc.addStream(localStream);\r\n    peers[Strophe.getResourceFromJid(sid)] = pc;\r\n  }\r\n  // console.log(peers);\r\n  return pc;\r\n}\r\n\r\n\r\nfunction createOffer(pc, sid) {\r\n  pc.createOffer(function (sessionDescription) {\r\n    //console.log(\"--------------------------发送本地消息-----------------------------\", sessionDescription);\r\n    pc.setLocalDescription(sessionDescription);\r\n    var init = $iq({\r\n      to: roomId,\r\n      type: 'set'\r\n    }).c('jingle', {\r\n      xmlns: 'urn:xmpp:jingle:1',\r\n      action: 'session-initiate',\r\n      sid: sid,\r\n      rid: myjid,\r\n      sdp: sessionDescription.sdp.split(\"\\r\\n\").join(\"||\")\r\n    });\r\n    console.log(\"event.createOffer\", init.tree());\r\n    connection.sendIQ(init);\r\n  }, function (error) {\r\n    console.log('Failure callback: ' + error);\r\n  });\r\n}\r\n\r\n\r\nfunction joinP2PRoom(roomName, successCallback, errorCallback) {\r\n\r\n  ManisStream.getMedia(constraints, function (stream) {\r\n    var mediaStream = localStream = stream;\r\n    /* console.log(\"local stream id:\", stream.id);\r\n     var container = document.getElementById(\"localVideos\");\r\n     var videoElement = document.createElement('video');\r\n     videoElement.id = stream.id;\r\n     container.appendChild(videoElement);\r\n     attachMediaStream(videoElement, stream);*/\r\n    if (window.webkitMediaStream) {\r\n      var audioStream = new webkitMediaStream();\r\n      var videoStream = new webkitMediaStream();\r\n      var audioTracks = mediaStream.getAudioTracks();\r\n      var videoTracks = mediaStream.getVideoTracks();\r\n      for (var i = 0; i < audioTracks.length; i++) {\r\n        audioStream.addTrack(audioTracks[i]);\r\n      }\r\n      for (i = 0; i < videoTracks.length; i++) {\r\n        videoStream.addTrack(videoTracks[i]);\r\n      }\r\n      connection.jingle.localAudio = audioStream;\r\n      connection.jingle.localVideo = videoStream;\r\n    } else {\r\n      connection.jingle.localAudio = mediaStream;\r\n      connection.jingle.localVideo = mediaStream;\r\n    }\r\n\r\n\r\n    var _to = roomName + '@' + 'conference.' + manisConfg.messageServer;\r\n    var iq = createConferenceIq(_to);\r\n    connection.sendIQ(iq, function (result) {\r\n      connection.emuc.doJoin(_to + \"/\" + Strophe.getResourceFromJid(connection.jid));\r\n      var _resource = Strophe.getResourceFromJid(connection.jid);\r\n      // localStream.src = URL.createObjectURL(localStream);\r\n      var myself = {\r\n        info: {\r\n          nickname: config.nickname ? config.nickname : manisConfg.mUsername,\r\n          resource: _resource\r\n        },\r\n        stream: localStream,\r\n        status: ManisFunctions.generateStatusNode(_resource),\r\n        constraints: constraints\r\n      };\r\n      successCallback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.join_room_success,\r\n        response: myself\r\n      });\r\n    }, function (error) {\r\n      errorCallback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.join_room_failed,\r\n        error: error\r\n      })\r\n    });\r\n  }, function (error) {\r\n    if (error.name == 'DevicesNotFoundError' || error.constructor.name == 'DevicesNotFoundError'\r\n        || error.name == 'NotFoundError' || error.constructor.name == 'NotFoundError') {\r\n      errorCallback({\r\n        code: ManisResponse.code_404,\r\n        msg: ManisResponse.without_usefull_video_device\r\n      });\r\n      return;\r\n    }\r\n    if (error.name == 'OverconstrainedError' || error.constructor.name == 'OverconstrainedError') {\r\n      if ((error.constraint == 'width' && constraints.video.width.exact > 320) || (error.constraint == 'height' && constraints.video.height.exact > 240)) {\r\n        // turn down video constraint\r\n        if (constraints.video.height.exact == 1080) {\r\n          constraints.video.width.exact = 1280;\r\n          constraints.video.height.exact = 720;\r\n          joinP2PRoom(roomName, successCallback, errorCallback);\r\n        } else if (constraints.video.height.exact == 720) {\r\n          constraints.video.width.exact = 640;\r\n          constraints.video.height.exact = 480;\r\n          joinP2PRoom(roomName, successCallback, errorCallback);\r\n        } else if (constraints.video.height.exact == 480) {\r\n          constraints.video.width.exact = 320;\r\n          constraints.video.height.exact = 240;\r\n          joinP2PRoom(roomName, successCallback, errorCallback, constraints);\r\n        }\r\n      } else {\r\n        errorCallback({\r\n          code: ManisResponse.code_402,\r\n          msg: ManisResponse.out_of_video_device_resolution\r\n        });\r\n        return;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n *\r\n * @param roomName\r\n * @returns {*}\r\n */\r\nfunction createConferenceIq(roomName) {\r\n  var elem = $iq({\r\n    to: \"p2p.\" + manisConfg.messageServer,\r\n    type: 'set'\r\n  });\r\n  elem.c('conference', {\r\n    xmlns: 'http://jitsi.org/protocol/focus',\r\n    room: roomName\r\n  });\r\n  elem.up();\r\n  return elem;\r\n}\r\n\r\n/**\r\n *\r\n * @param successCallback\r\n * @param errorCallback\r\n */\r\nfunction p2pAudioToggleMute(successCallback, errorCallback) {\r\n\r\n  var mute = !ManisFunctions.isAudioMuted();\r\n\r\n  try {\r\n\r\n    var localAudioTracks = connection.jingle.localAudio.getAudioTracks();\r\n    if (localAudioTracks.length > 0) {\r\n      for (var idx = 0; idx < localAudioTracks.length; idx++) {\r\n        localAudioTracks[idx].enabled = !mute;\r\n      }\r\n    }\r\n    connection.emuc.addAudioInfoToPresence(mute);\r\n    connection.emuc.sendPresence();\r\n    // @TODO 发送iq消息告诉会议室静音状态\r\n    successCallback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.set_audio_toggle_complete,\r\n      response: mute\r\n    })\r\n\r\n  } catch (e) {\r\n    errorCallback({\r\n      code: ManisResponse.code_400,\r\n      msg: ManisResponse.set_audio_toggle_failed,\r\n      response: !mute\r\n    })\r\n  }\r\n\r\n}\r\n\r\n/**\r\n *\r\n * @param successCallback\r\n * @param errorCallback\r\n */\r\nfunction p2pVideoToggleMute(successCallback, errorCallback) {\r\n  var mute = !ManisFunctions.isVideoMuted();\r\n  try {\r\n    var localVideoTracks = connection.jingle.localVideo.getVideoTracks();\r\n\r\n    for (var i = 0; i < localVideoTracks.length; ++i) {\r\n      localVideoTracks[i].enabled = !mute;\r\n    }\r\n    connection.emuc.addAudioInfoToPresence(mute);\r\n    connection.emuc.sendPresence();\r\n    // @TODO 发送iq消息告诉会议室开关视频状态\r\n    successCallback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.set_video_toggle_complete,\r\n      response: mute\r\n    })\r\n  } catch (e) {\r\n    errorCallback({\r\n      code: ManisResponse.code_400,\r\n      msg: ManisResponse.set_video_toggle_failed,\r\n      response: !mute\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param oldStream\r\n * @param newStream\r\n * @param callback\r\n * @param options\r\n */\r\nfunction p2pSwitchStream(oldStream, newStream, callback, options) {\r\n  console.info('old stream : ', oldStream, '\\r\\n', 'new stream : ', newStream);\r\n  // @TODO 待完善换流和新增流\r\n}\r\n\r\nmodule.exports = {\r\n  connect: connectXMPP,\r\n  join: joinP2PRoom,\r\n  muteVideo: p2pVideoToggleMute,\r\n  muteAudio: p2pAudioToggleMute,\r\n  switchStream: p2pSwitchStream\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/manis.p2p.js\n// module id = 32\n// module chunks = 0","var Openfire = {};\r\n\r\n\r\n/** Class: Openfire.Connection\r\n *  WebSockets Connection Manager for Openfire\r\n *\r\n *  Thie class manages an WebSockets connection\r\n *  to an Openfire XMPP server through the WebSockets plugin and dispatches events to the user callbacks as\r\n *  data arrives.  It uses the server side Openfire authentication\r\n *\r\n *  After creating a Openfire object, the user will typically\r\n *  call connect() with a user supplied callback to handle connection level\r\n *  events like authentication failure, disconnection, or connection\r\n *  complete.\r\n *\r\n *  To send data to the connection, use send(doc) or sendRaw(text)\r\n *\r\n *  Use xmlInput(doc) and RawInput(text) overrideable function to receive XML data coming into the\r\n *  connection.\r\n *\r\n *  The user will also have several event handlers defined by using\r\n *  addHandler() and addTimedHandler().  These will allow the user code to\r\n *  respond to interesting stanzas or do something periodically with the\r\n *  connection.  These handlers will be active once authentication is\r\n *  finished.\r\n *\r\n *  Create and initialize a Openfire object.\r\n *\r\n *\r\n *  Returns:\r\n *    A new Openfire object.\r\n */\r\n\r\nOpenfire.Connection = function (url, endPoint) {\r\n  if (!window.WebSocket) {\r\n    window.WebSocket = window.MozWebSocket;\r\n\r\n    if (!window.WebSocket) {\r\n      var msg = \"WebSocket not supported by this browser\";\r\n      alert(msg);\r\n      throw Error(msg);\r\n    }\r\n  }\r\n\r\n  this.host = url.indexOf(\"/\") < 0 ? url : url.split(\"/\")[2];\r\n  this.protocol = url.indexOf(\"/\") < 0 ? \"wss:\" : (url.split(\"/\")[0] == \"http:\") ? \"ws:\" : \"wss:\";\r\n  this.jid = \"\";\r\n  this.resource = endPoint ? endPoint : '';\r\n  this.streamId = null;\r\n\r\n  // handler lists\r\n\r\n  this.timedHandlers = [];\r\n  this.handlers = [];\r\n  this.removeTimeds = [];\r\n  this.removeHandlers = [];\r\n  this.addTimeds = [];\r\n  this.addHandlers = [];\r\n  this._idleTimeout = null;\r\n\r\n  this.authenticated = false;\r\n  this.disconnecting = false;\r\n  this.connected = false;\r\n\r\n  this.errors = 0;\r\n\r\n  this._uniqueId = Math.round(Math.random() * 10000);\r\n\r\n  // setup onIdle callback every 1/10th of a second\r\n  this._idleTimeout = setTimeout(this._onIdle.bind(this), 100);\r\n\r\n  // initialize plugins\r\n\r\n  for (var k in Strophe._connectionPlugins) {\r\n    if (Strophe._connectionPlugins.hasOwnProperty(k)) {\r\n      var ptype = Strophe._connectionPlugins[k];\r\n      // jslint complaints about the below line, but this is fine\r\n      var F = function () {\r\n      };\r\n      F.prototype = ptype;\r\n      this[k] = new F();\r\n      this[k].init(this);\r\n    }\r\n  }\r\n}\r\n\r\nOpenfire.Connection.prototype = {\r\n\r\n  /** Function: reset\r\n   *  Reset the connection.\r\n   *\r\n   *  This function should be called after a connection is disconnected\r\n   *  before that connection is reused.\r\n   */\r\n\r\n  reset: function () {\r\n    this.streamId = null;\r\n\r\n    this.timedHandlers = [];\r\n    this.handlers = [];\r\n    this.removeTimeds = [];\r\n    this.removeHandlers = [];\r\n    this.addTimeds = [];\r\n    this.addHandlers = [];\r\n\r\n    this.authenticated = false;\r\n    this.disconnecting = false;\r\n    this.connected = false;\r\n    this.errorCallback = null;\r\n\r\n    this.errors = 0;\r\n  },\r\n\r\n\r\n  /** Function: pause\r\n   *  UNUSED with websockets\r\n   */\r\n\r\n  pause: function () {\r\n    return;\r\n  },\r\n\r\n  /** Function: resume\r\n   *  UNUSED with websockets\r\n   */\r\n\r\n  resume: function () {\r\n    return;\r\n  },\r\n\r\n  /** Function: getUniqueId\r\n   *  Generate a unique ID for use in <iq/> elements.\r\n   *\r\n   *  All <iq/> stanzas are required to have unique id attributes.  This\r\n   *  function makes creating these easy.  Each connection instance has\r\n   *  a counter which starts from zero, and the value of this counter\r\n   *  plus a colon followed by the suffix becomes the unique id. If no\r\n   *  suffix is supplied, the counter is used as the unique id.\r\n   *\r\n   *  Suffixes are used to make debugging easier when reading the stream\r\n   *  data, and their use is recommended.  The counter resets to 0 for\r\n   *  every new connection for the same reason.  For connections to the\r\n   *  same server that authenticate the same way, all the ids should be\r\n   *  the same, which makes it easy to see changes.  This is useful for\r\n   *  automated testing as well.\r\n   *\r\n   *  Parameters:\r\n   *    (String) suffix - A optional suffix to append to the id.\r\n   *\r\n   *  Returns:\r\n   *    A unique string to be used for the id attribute.\r\n   */\r\n\r\n  getUniqueId: function (suffix) {\r\n    if (typeof(suffix) == \"string\" || typeof(suffix) == \"number\") {\r\n      return ++this._uniqueId + \":\" + suffix;\r\n    } else {\r\n      return ++this._uniqueId + \"\";\r\n    }\r\n  },\r\n\r\n  /** Function: connect\r\n   *  Starts the connection process.\r\n   *\r\n   *\r\n   *  Parameters:\r\n   *    (String) username - The Openfire username.\r\n   *    (String) pass - The user's password.\r\n   *    (String) resource - The user resource for this connection.\r\n   *    (Function) callback The connect callback function.\r\n   */\r\n\r\n  connect: function (jid, pass, callback,errorCallback, wait, hold, route) {\r\n    this.jid = jid.indexOf(\"/\") > -1 ? jid : jid + '/' + this.resource;\r\n    this.username = jid.indexOf(\"@\") < 0 ? jid : jid.split(\"@\")[0];\r\n    this.pass = pass == \"\" ? null : pass;\r\n    this.connect_callback = callback;\r\n    this.disconnecting = false;\r\n    this.errorCallback = errorCallback;\r\n    this.connected = false;\r\n    this.authenticated = false;\r\n    this.errors = 0;\r\n    var domain = window.manisParams.domain ? window.manisParams.domain : '';\r\n\r\n    this._changeConnectStatus(Strophe.Status.CONNECTING, null);\r\n    // this.url = this.protocol + \"//\" + this.host + \"/ofmeetws/server?username=\" + this.username + \"&password=\" + this.pass + \"&resource=\" + this.resource;\r\n    this.url = this.protocol + \"//\" + this.host + ':' + manisConfg.messageServerPort + \"/websocket?uid=\" + this.username + \"&domain=\" + domain + \"&endpoint=\" + this.resource + '&t='+window.manisConfg.currentTimeMillis;\r\n    // console.log('will connect to : ', this.url);\r\n    this._ws = new WebSocket(this.url);\r\n\r\n    this._ws.onopen = this._onopen.bind(this);\r\n    this._ws.onmessage = this._onmessage.bind(this);\r\n    this._ws.onclose = this._onclose.bind(this);\r\n    this._ws.onerror = this._onerror.bind(this);\r\n\r\n    window.openfireWebSocket = this;\r\n\r\n    this.jid = this.jid.indexOf(\"@\") < 0 ? this.resource + \"@\" + this.jid : this.jid;\r\n\r\n    this._changeConnectStatus(Strophe.Status.AUTHENTICATING, null);\r\n\r\n  },\r\n\r\n  _onerror: function (error) {\r\n    console.error(error);\r\n    // $(document).trigger('manis.on.unknown.error', [{code:404, msg: 'connection lost'}]);\r\n    if(this.errorCallback){\r\n      this.errorCallback(error);\r\n    }\r\n  },\r\n\r\n  /**\r\n   *\r\n   * Private Function: _onopen websocket event handler\r\n   *\r\n   */\r\n\r\n  _onopen: function () {\r\n    this.connected = true;\r\n    this.authenticated = true;\r\n    this.resource = Strophe.getResourceFromJid(this.jid);\r\n    this.domain = Strophe.getDomainFromJid(this.jid);\r\n    var _this = this;\r\n\r\n    try {\r\n\r\n      this._changeConnectStatus(Strophe.Status.CONNECTED, null);\r\n\r\n    } catch (e) {\r\n\r\n      throw Error(\"User connection callback caused an exception: \" + e);\r\n    }\r\n\r\n    function sendPing() {\r\n      if (openfireWebSocket.readyState === openfireWebSocket.OPEN) {\r\n        openfireWebSocket.sendRaw(\"ping\");\r\n        // console.log('ping at: ', new Date());\r\n        _this.interval = setTimeout(sendPing, 10000);\r\n      }\r\n    }\r\n    sendPing();\r\n    // this.interval = setInterval(function () {\r\n    //   window.openfireWebSocket.sendRaw(\"ping\")\r\n    // }, 10000);\r\n  },\r\n\r\n  /** Function: attach\r\n   *  UNUSED, use connect again\r\n   */\r\n\r\n  attach: function () {\r\n    return\r\n  },\r\n\r\n  /** Function: xmlInput\r\n   *  User overrideable function that receives XML data coming into the\r\n   *  connection.\r\n   *\r\n   *  The default function does nothing.  User code can override this with\r\n   *  > Openfire.xmlInput = function (elem) {\r\n     *  >   (user code)\r\n     *  > };\r\n   *\r\n   *  Parameters:\r\n   *    (XMLElement) elem - The XML data received by the connection.\r\n   */\r\n\r\n  xmlInput: function (elem) {\r\n    return;\r\n  },\r\n\r\n  /** Function: xmlOutput\r\n   *  User overrideable function that receives XML data sent to the\r\n   *  connection.\r\n   *\r\n   *  The default function does nothing.  User code can override this with\r\n   *  > Openfire.xmlOutput = function (elem) {\r\n     *  >   (user code)\r\n     *  > };\r\n   *\r\n   *  Parameters:\r\n   *    (XMLElement) elem - The XMLdata sent by the connection.\r\n   */\r\n\r\n  xmlOutput: function (elem) {\r\n    return;\r\n  },\r\n\r\n  /** Function: rawInput\r\n   *  User overrideable function that receives raw data coming into the\r\n   *  connection.\r\n   *\r\n   *  The default function does nothing.  User code can override this with\r\n   *  > Openfire.rawInput = function (data) {\r\n     *  >   (user code)\r\n     *  > };\r\n   *\r\n   *  Parameters:\r\n   *    (String) data - The data received by the connection.\r\n   */\r\n\r\n  rawInput: function (data) {\r\n    return;\r\n  },\r\n\r\n  /** Function: rawOutput\r\n   *  User overrideable function that receives raw data sent to the\r\n   *  connection.\r\n   *\r\n   *  The default function does nothing.  User code can override this with\r\n   *  > Openfire.rawOutput = function (data) {\r\n     *  >   (user code)\r\n     *  > };\r\n   *\r\n   *  Parameters:\r\n   *    (String) data - The data sent by the connection.\r\n   */\r\n\r\n  rawOutput: function (data) {\r\n    return;\r\n  },\r\n\r\n\r\n  /** Function: sendRaw\r\n   *  Send a stanza in raw XML text.\r\n   *\r\n   *  This function is called to push data onto the send queue to\r\n   *  go out over the wire.  Whenever a request is sent to the BOSH\r\n   *  server, all pending data is sent and the queue is flushed.\r\n   *\r\n   *  Parameters:\r\n   *    xml - The stanza text XML to send.\r\n   */\r\n\r\n  sendRaw: function (xml) {\r\n\r\n    if (!this.connected || this._ws == null) {\r\n      throw Error(\"Not connected, cannot send packets.\");\r\n    }\r\n\r\n    if (xml != \"ping\") {\r\n      this.xmlOutput(this._textToXML(xml));\r\n      this.rawOutput(xml);\r\n    }\r\n\r\n    this.doSend(xml);\r\n  },\r\n\r\n  /**\r\n   * do send\r\n   * @param xml\r\n   */\r\n  doSend: function (xml) {\r\n    var _this = this;\r\n    try{\r\n      if(config.debug == true){\r\n        console.log('Will send content: \\n', xml);\r\n      }\r\n      _this._ws.send(xml);\r\n    }catch (e){\r\n      console.warn('send failed, try again after 200 ms: ', e);\r\n      setTimeout(function () {\r\n        _this.doSend(xml);\r\n      }, 1000);\r\n    }\r\n  },\r\n\r\n  /** Function: send\r\n   *  Send a stanza.\r\n   *\r\n   *  This function is called to push data onto the send queue to\r\n   *  go out over the wire.  Whenever a request is sent to the BOSH\r\n   *  server, all pending data is sent and the queue is flushed.\r\n   *\r\n   *  Parameters:\r\n   *    (XMLElement |\r\n   *     [XMLElement] |\r\n   *     Strophe.Builder) elem - The stanza to send.\r\n   */\r\n\r\n  send: function (elem) {\r\n    /**\r\n     @static\r\n     @type {number}\r\n     @const\r\n\r\n    WebSocket.OPEN = 1;\r\n\r\n     @static\r\n     @type {number}\r\n     @const\r\n\r\n    WebSocket.CLOSING = 2;\r\n\r\n     @static\r\n     @type {number}\r\n     @const\r\n\r\n    WebSocket.CLOSED = 3;\r\n    */\r\n    if (this._ws == null || this._ws.readyState >  WebSocket.OPEN) {\r\n      // throw Error(\"Not connected, cannot send packets.\");\r\n      console.warn(\"Not connected, cannot send packets.\");\r\n    }\r\n\r\n    var toSend = \"\";\r\n\r\n    if (elem === null) {\r\n      return;\r\n    }\r\n\r\n    if (typeof(elem.sort) === \"function\") {\r\n      // console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send sort before >>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n      //   elem ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n      for (var i = 0; i < elem.length; i++) {\r\n        toSend += Strophe.serialize(elem[i]);\r\n        this.xmlOutput(elem[i]);\r\n      }\r\n\r\n    } else if (typeof(elem.tree) === \"function\") {\r\n      // console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send tree before>>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n      //   elem ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n      elem.attrs({from: connection.jid});\r\n\r\n      // console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send tree after>>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n      //   elem ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n\r\n      toSend = Strophe.serialize(elem.tree());\r\n      this.xmlOutput(elem.tree());\r\n\r\n    } else {\r\n\r\n      //   console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send default before>>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n      //     elem ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n      elem.setAttribute('from', connection.jid);\r\n      // console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send default after>>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n      //   elem ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n      toSend = Strophe.serialize(elem);\r\n      this.xmlOutput(elem);\r\n    }\r\n\r\n    this.rawOutput(toSend);\r\n    if(config.debug == true){\r\n      console.warn(\">>>>>>>>>>>>>>>>>>>>>>>>>>>> to send >>>>>>>>>>>>>>>>>>>>>>>>> \\r\\n \" ,\r\n        toSend ,\" \\r\\n >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\r\n    }\r\n    this.doSend(toSend);\r\n  },\r\n\r\n  /** Function: flush\r\n   *  UNUSED\r\n   */\r\n\r\n  flush: function () {\r\n    return\r\n  },\r\n\r\n\r\n  /** Function: sendIQ\r\n   *  Helper function to send IQ stanzas.\r\n   *\r\n   *  Parameters:\r\n   *    (XMLElement) elem - The stanza to send.\r\n   *    (Function) callback - The callback function for a successful request.\r\n   *    (Function) errback - The callback function for a failed or timed\r\n   *      out request.  On timeout, the stanza will be null.\r\n   *    (Integer) timeout - The time specified in milliseconds for a\r\n   *      timeout to occur.\r\n   *\r\n   *  Returns:\r\n   *    The id used to send the IQ.\r\n   */\r\n\r\n  sendIQ: function (elem, callback, errback, timeout) {\r\n    var timeoutHandler = null;\r\n    var that = this;\r\n\r\n    if (typeof(elem.tree) === \"function\") {\r\n      elem = elem.tree();\r\n    }\r\n    elem.setAttribute(\"from\", connection.jid);\r\n    var id = elem.getAttribute('id');\r\n\r\n    // inject id if not found\r\n\r\n    if (!id) {\r\n      id = this.getUniqueId(\"sendIQ\");\r\n      elem.setAttribute(\"id\", id);\r\n    }\r\n\r\n    var handler = this.addHandler(function (stanza) {\r\n      // remove timeout handler if there is one\r\n\r\n      if (timeoutHandler) {\r\n        that.deleteTimedHandler(timeoutHandler);\r\n      }\r\n\r\n      var iqtype = stanza.getAttribute('type');\r\n\r\n      if (iqtype == 'result') {\r\n        if (callback) {\r\n          callback(stanza);\r\n        }\r\n\r\n      } else if (iqtype == 'get') {\r\n\r\n      } else if (iqtype == 'error') {\r\n        if (errback) {\r\n          errback(stanza);\r\n        }\r\n      } else {\r\n        throw {\r\n          name: \"StropheError\",\r\n          message: \"Got bad IQ type of \" + iqtype\r\n        };\r\n      }\r\n    }, null, 'iq', null, id);\r\n\r\n    // if timeout specified, setup timeout handler.\r\n\r\n    if (timeout) {\r\n      timeoutHandler = this.addTimedHandler(timeout, function () {\r\n        // get rid of normal handler\r\n        that.deleteHandler(handler);\r\n\r\n        // call errback on timeout with null stanza\r\n        if (errback) {\r\n          errback(null);\r\n        }\r\n        return false;\r\n      });\r\n    }\r\n\r\n    this.send(elem);\r\n\r\n    return id;\r\n  },\r\n\r\n  /** Function: addTimedHandler\r\n   *  Add a timed handler to the connection.\r\n   *\r\n   *  This function adds a timed handler.  The provided handler will\r\n   *  be called every period milliseconds until it returns false,\r\n   *  the connection is terminated, or the handler is removed.  Handlers\r\n   *  that wish to continue being invoked should return true.\r\n   *\r\n   *  Because of method binding it is necessary to save the result of\r\n   *  this function if you wish to remove a handler with\r\n   *  deleteTimedHandler().\r\n   *\r\n   *  Note that user handlers are not active until authentication is\r\n   *  successful.\r\n   *\r\n   *  Parameters:\r\n   *    (Integer) period - The period of the handler.\r\n   *    (Function) handler - The callback function.\r\n   *\r\n   *  Returns:\r\n   *    A reference to the handler that can be used to remove it.\r\n   */\r\n\r\n  addTimedHandler: function (period, handler) {\r\n    var thand = new Strophe.TimedHandler(period, handler);\r\n    this.addTimeds.push(thand);\r\n    return thand;\r\n  },\r\n\r\n\r\n  /** Function: deleteTimedHandler\r\n   *  Delete a timed handler for a connection.\r\n   *\r\n   *  This function removes a timed handler from the connection.  The\r\n   *  handRef parameter is *not* the function passed to addTimedHandler(),\r\n   *  but is the reference returned from addTimedHandler().\r\n   *\r\n   *  Parameters:\r\n   *    (Strophe.TimedHandler) handRef - The handler reference.\r\n   */\r\n\r\n  deleteTimedHandler: function (handRef) {\r\n    // this must be done in the Idle loop so that we don't change\r\n    // the handlers during iteration\r\n\r\n    this.removeTimeds.push(handRef);\r\n  },\r\n\r\n  /** Function: addHandler\r\n   *  Add a stanza handler for the connection.\r\n   *\r\n   *  This function adds a stanza handler to the connection.  The\r\n   *  handler callback will be called for any stanza that matches\r\n   *  the parameters.  Note that if multiple parameters are supplied,\r\n   *  they must all match for the handler to be invoked.\r\n   *\r\n   *  The handler will receive the stanza that triggered it as its argument.\r\n   *  The handler should return true if it is to be invoked again;\r\n   *  returning false will remove the handler after it returns.\r\n   *\r\n   *  As a convenience, the ns parameters applies to the top level element\r\n   *  and also any of its immediate children.  This is primarily to make\r\n   *  matching /iq/query elements easy.\r\n   *\r\n   *  The options argument contains handler matching flags that affect how\r\n   *  matches are determined. Currently the only flag is matchBare (a\r\n   *  boolean). When matchBare is true, the from parameter and the from\r\n   *  attribute on the stanza will be matched as bare JIDs instead of\r\n   *  full JIDs. To use this, pass {matchBare: true} as the value of\r\n   *  options. The default value for matchBare is false.\r\n   *\r\n   *  The return value should be saved if you wish to remove the handler\r\n   *  with deleteHandler().\r\n   *\r\n   *  Parameters:\r\n   *    (Function) handler - The user callback.\r\n   *    (String) ns - The namespace to match.\r\n   *    (String) name - The stanza name to match.\r\n   *    (String) type - The stanza type attribute to match.\r\n   *    (String) id - The stanza id attribute to match.\r\n   *    (String) from - The stanza from attribute to match.\r\n   *    (String) options - The handler options\r\n   *\r\n   *  Returns:\r\n   *    A reference to the handler that can be used to remove it.\r\n   */\r\n\r\n  addHandler: function (handler, ns, name, type, id, from, options) {\r\n    var hand = new Strophe.Handler(handler, ns, name, type, id, from, options);\r\n    this.addHandlers.push(hand);\r\n    return hand;\r\n  },\r\n\r\n  /** Function: deleteHandler\r\n   *  Delete a stanza handler for a connection.\r\n   *\r\n   *  This function removes a stanza handler from the connection.  The\r\n   *  handRef parameter is *not* the function passed to addHandler(),\r\n   *  but is the reference returned from addHandler().\r\n   *\r\n   *  Parameters:\r\n   *    (Strophe.Handler) handRef - The handler reference.\r\n   */\r\n\r\n  deleteHandler: function (handRef) {\r\n    // this must be done in the Idle loop so that we don't change\r\n    // the handlers during iteration\r\n\r\n    this.removeHandlers.push(handRef);\r\n  },\r\n\r\n  /** Function: disconnect\r\n   *  Start the graceful disconnection process.\r\n   *\r\n   *  This function starts the disconnection process.  This process starts\r\n   *  by sending unavailable presence and sending BOSH body of type\r\n   *  terminate.  A timeout handler makes sure that disconnection happens\r\n   *  even if the BOSH server does not respond.\r\n   *\r\n   *  The user supplied connection callback will be notified of the\r\n   *  progress as this process happens.\r\n   *\r\n   *  Parameters:\r\n   *    (String) reason - The reason the disconnect is occuring.\r\n   */\r\n\r\n  disconnect: function (reason) {\r\n\r\n    if (!this.connected || this._ws == null) {\r\n      return;\r\n    }\r\n\r\n    this._changeConnectStatus(Strophe.Status.DISCONNECTING, reason);\r\n    Strophe.info(\"Disconnect was called because: \" + reason);\r\n\r\n    this._ws.close();\r\n\r\n  },\r\n\r\n  /** PrivateFunction: _onDisconnectTimeout\r\n   *  _Private_ timeout handler for handling non-graceful disconnection.\r\n   *\r\n   *  If the graceful disconnect process does not complete within the\r\n   *  time allotted, this handler finishes the disconnect anyway.\r\n   *\r\n   *  Returns:\r\n   *    false to remove the handler.\r\n   */\r\n\r\n  _onDisconnectTimeout: function () {\r\n    Strophe.info(\"_onDisconnectTimeout was called\");\r\n\r\n    this._doDisconnect();\r\n\r\n    return false;\r\n  },\r\n\r\n  /** PrivateFunction: _doDisconnect\r\n   *  _Private_ function to disconnect.\r\n   *\r\n   *  This is the last piece of the disconnection logic.  This resets the\r\n   *  connection and alerts the user's connection callback.\r\n   */\r\n\r\n  _doDisconnect: function () {\r\n    Strophe.info(\"_doDisconnect was called\");\r\n    this._onclose();\r\n  },\r\n\r\n  /** PrivateFunction: _changeConnectStatus\r\n   *  _Private_ helper function that makes sure plugins and the user's\r\n   *  callback are notified of connection status changes.\r\n   *\r\n   *  Parameters:\r\n   *    (Integer) status - the new connection status, one of the values\r\n   *      in Strophe.Status\r\n   *    (String) condition - the error condition or null\r\n   */\r\n\r\n  _changeConnectStatus: function (status, condition) {\r\n    // notify all plugins listening for status changes\r\n\r\n    for (var k in Strophe._connectionPlugins) {\r\n      if (Strophe._connectionPlugins.hasOwnProperty(k)) {\r\n        var plugin = this[k];\r\n\r\n        if (plugin.statusChanged) {\r\n          try {\r\n            plugin.statusChanged(status, condition);\r\n          } catch (err) {\r\n            Strophe.error(\"\" + k + \" plugin caused an exception changing status: \" + err);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // notify the user's callback\r\n\r\n    if (typeof this.connect_callback == 'function') {\r\n      try {\r\n        this.connect_callback(status, condition);\r\n      } catch (e) {\r\n        Strophe.error(\"User connection callback caused an exception: \" + e);\r\n      }\r\n    }\r\n  },\r\n\r\n\r\n  /**\r\n   *\r\n   * Private Function: _onclose websocket event handler\r\n   *\r\n   */\r\n\r\n  _onclose: function () {\r\n    Strophe.info(\"websocket closed\");\r\n    console.log('_onclose - disconnected');\r\n    // clearInterval(this.interval);\r\n    clearTimeout(this.interval);\r\n\r\n    this.authenticated = false;\r\n    this.disconnecting = false;\r\n    this.streamId = null;\r\n\r\n    // tell the parent we disconnected\r\n\r\n    this._changeConnectStatus(Strophe.Status.DISCONNECTED, null);\r\n    this.connected = false;\r\n\r\n    // delete handlers\r\n\r\n    this.handlers = [];\r\n    this.timedHandlers = [];\r\n    this.removeTimeds = [];\r\n    this.removeHandlers = [];\r\n    this.addTimeds = [];\r\n    this.addHandlers = [];\r\n\r\n    if (this._ws.readyState != this._ws.CLOSED) {\r\n      this._ws.close();\r\n    }\r\n    window.exitCode = 1010;\r\n    $(document).trigger('manis.on.unknown.error', [{code:404, msg: 'connection lost'}]);\r\n  },\r\n\r\n  /**\r\n   *\r\n   * Private Function: _onmessage websocket event handler\r\n   *\r\n   */\r\n\r\n  _onmessage: function (packet) {\r\n    var elem;\r\n    if(packet.type == 'message' && packet.data == 'pong'){\r\n      //on heart bit response, do nothing\r\n      return ;\r\n    }\r\n    try {\r\n      elem = this._textToXML(packet.data);\r\n      if(config.debug == true){\r\n        console.warn(\"<<<<<<<<<<<<<<<<<<<<<<<<<<<<< on message <<<<<<<<<<<<<<<<<<< \\r\\n \" ,\r\n          elem,\" \\r\\n <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< \\r\\n \", packet);\r\n      }\r\n    } catch (e) {\r\n\r\n      if (e != \"parsererror\") {\r\n        throw e;\r\n      }\r\n      this.disconnect(\"strophe-parsererror\");\r\n    }\r\n\r\n    if (elem === null) {\r\n      return;\r\n    }\r\n\r\n    this.xmlInput(elem);\r\n    this.rawInput(packet.data);\r\n\r\n    // remove handlers scheduled for deletion\r\n\r\n    var i, hand;\r\n\r\n    while (this.removeHandlers.length > 0) {\r\n      hand = this.removeHandlers.pop();\r\n      i = this.handlers.indexOf(hand);\r\n\r\n      if (i >= 0) {\r\n        this.handlers.splice(i, 1);\r\n      }\r\n    }\r\n\r\n    // add handlers scheduled for addition\r\n\r\n    while (this.addHandlers.length > 0) {\r\n      this.handlers.push(this.addHandlers.pop());\r\n    }\r\n\r\n    // send each incoming stanza through the handler chain\r\n\r\n    var i, newList;\r\n    newList = this.handlers;\r\n    this.handlers = [];\r\n\r\n    for (i = 0; i < newList.length; i++) {\r\n      var hand = newList[i];\r\n      // console.log('===========', hand.name, hand.ns);\r\n\r\n      if (hand.isMatch(elem) && (this.authenticated || !hand.user)) {\r\n        if (hand.run(elem)) {\r\n          this.handlers.push(hand);\r\n        }\r\n\r\n      } else {\r\n        this.handlers.push(hand);\r\n      }\r\n    }\r\n\r\n    // handle conference leave iq\r\n    this._handleConferenceLeaveIq(packet);\r\n  },\r\n\r\n\r\n  _handleConferenceLeaveIq: function (packet) {\r\n    var element = packet.data;\r\n    var from = $(element).attr('from') || null;\r\n    var conferenceNode = $(element).find('>conference[xmlns=\"http://jitsi.org/protocol/focus\"]') || null;\r\n    if(conferenceNode){\r\n      var type = conferenceNode.attr('type');\r\n      if(type == 'leave'){\r\n        connection.emuc.onParticipantLeave(from);\r\n        connection.ofmuc.onParticipantLeave(from);\r\n        $(document).trigger('left.muc', [from]);\r\n      }else if(type == 'kickout'){\r\n        var jid = conferenceNode.attr('kickout');\r\n        if(Strophe.getResourceFromJid(connection.jid) == Strophe.getResourceFromJid(jid)){\r\n          // if share screen, stop it first\r\n          if(window.isUsingScreenStream == true){\r\n            $(document).trigger('manis.been.stop.screen.share');\r\n          }\r\n          // console.log('11111111111144444444444=======handleEjectFrom============', from)\r\n          $(document).trigger('oneject.muc', [from]);\r\n        }else{\r\n          $(document).trigger('left.muc', [jid]);\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   *\r\n   * Private Function: _textToXML convert text to DOM Document object\r\n   *\r\n   */\r\n\r\n  _textToXML: function (text) {\r\n\r\n    var doc = null;\r\n\r\n    if (window['DOMParser']) {\r\n      var parser = new DOMParser();\r\n      doc = parser.parseFromString(text, 'text/xml');\r\n\r\n    } else if (window['ActiveXObject']) {\r\n      var doc = new ActiveXObject(\"MSXML2.DOMDocument\");\r\n      doc.async = false;\r\n      doc.loadXML(text);\r\n\r\n    } else {\r\n      throw Error('No DOMParser object found.');\r\n    }\r\n\r\n    return doc.firstChild;\r\n  },\r\n\r\n  /** PrivateFunction: _onIdle\r\n   *  _Private_ handler to process events during idle cycle.\r\n   *\r\n   *  This handler is called every 100ms to fire timed handlers that\r\n   *  are ready and keep poll requests going.\r\n   */\r\n\r\n  _onIdle: function () {\r\n    var i, thand, since, newList;\r\n\r\n    // remove timed handlers that have been scheduled for deletion\r\n\r\n    while (this.removeTimeds.length > 0) {\r\n      thand = this.removeTimeds.pop();\r\n      i = this.timedHandlers.indexOf(thand);\r\n      if (i >= 0) {\r\n        this.timedHandlers.splice(i, 1);\r\n      }\r\n    }\r\n\r\n    // add timed handlers scheduled for addition\r\n\r\n    while (this.addTimeds.length > 0) {\r\n      this.timedHandlers.push(this.addTimeds.pop());\r\n    }\r\n\r\n    // call ready timed handlers\r\n    var now = new Date().getTime();\r\n    newList = [];\r\n\r\n    for (i = 0; i < this.timedHandlers.length; i++) {\r\n      thand = this.timedHandlers[i];\r\n\r\n      if (this.authenticated || !thand.user) {\r\n        since = thand.lastCalled + thand.period;\r\n\r\n        if (since - now <= 0) {\r\n          if (thand.run()) {\r\n            newList.push(thand);\r\n          }\r\n        } else {\r\n          newList.push(thand);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.timedHandlers = newList;\r\n\r\n    // reactivate the timer\r\n\r\n    clearTimeout(this._idleTimeout);\r\n    this._idleTimeout = setTimeout(this._onIdle.bind(this), 100);\r\n  }\r\n}\r\n\r\nexports = module.exports = Openfire;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/libs/strophe.openfire.js\n// module id = 33\n// module chunks = 0","var JingleSession = require('./strophe.jingle.session');\r\n\r\n/* jshint -W117 */\r\nStrophe.addConnectionPlugin('jingle', {\r\n  connection: null,\r\n  sessions: {},\r\n  jid2session: {},\r\n  ice_config: (window.config !== undefined && window.config.nat !== undefined) ? {'iceServers': [{'url': window.config.nat}]} : {'iceServers': [{'url': 'stun:stun.l.google.com:19302'}]},\r\n  pc_constraints: {},\r\n  media_constraints: {\r\n    mandatory: {\r\n      'OfferToReceiveAudio': true,\r\n      'OfferToReceiveVideo': true\r\n    }\r\n    // MozDontOfferDataChannel: true when this is firefox\r\n  },\r\n  localAudio: null,\r\n  localVideo: null,\r\n  localScreen: null,\r\n    localScreenSsrc : null,\r\n\r\n  init: function (conn) {\r\n    this.connection = conn;\r\n    if (this.connection.disco) {\r\n      // http://xmpp.org/extensions/xep-0167.html#support\r\n      // http://xmpp.org/extensions/xep-0176.html#support\r\n      this.connection.disco.addFeature('urn:xmpp:jingle:1');\r\n      this.connection.disco.addFeature('urn:xmpp:jingle:apps:rtp:1');\r\n      this.connection.disco.addFeature('urn:xmpp:jingle:transports:ice-udp:1');\r\n      this.connection.disco.addFeature('urn:xmpp:jingle:apps:rtp:audio');\r\n      this.connection.disco.addFeature('urn:xmpp:jingle:apps:rtp:video');\r\n\r\n\r\n      // this is dealt with by SDP O/A so we don't need to annouce this\r\n      //this.connection.disco.addFeature('urn:xmpp:jingle:apps:rtp:rtcp-fb:0'); // XEP-0293\r\n      //this.connection.disco.addFeature('urn:xmpp:jingle:apps:rtp:rtp-hdrext:0'); // XEP-0294\r\n      if (config.useRtcpMux) {\r\n        this.connection.disco.addFeature('urn:ietf:rfc:5761'); // rtcp-mux\r\n      }\r\n      if (config.useBundle) {\r\n        this.connection.disco.addFeature('urn:ietf:rfc:5888'); // a=group, e.g. bundle\r\n      }\r\n      //this.connection.disco.addFeature('urn:ietf:rfc:5576'); // a=ssrc\r\n    }\r\n    this.connection.addHandler(this.onJingle.bind(this), 'urn:xmpp:jingle:1', 'iq', 'set', null, null);\r\n  },\r\n  onJingle: function (iq) {\r\n    if (window.connectType == 'p2p') {\r\n      return;\r\n    }\r\n    var sid = $(iq).find('jingle').attr('sid');\r\n    var action = $(iq).find('jingle').attr('action');\r\n    var fromJid = iq.getAttribute('from');\r\n    // send ack first\r\n    var ack = $iq({\r\n      type: 'result',\r\n      to: fromJid,\r\n      id: iq.getAttribute('id')\r\n    });\r\n    console.log('====on jingle ' + action + ' from ' + fromJid, iq, sid, this.sessions);\r\n    var sess = this.sessions[sid];\r\n    if ('session-initiate' != action) {\r\n      if (sess === null) {\r\n        ack.type = 'error';\r\n        ack.c('error', {type: 'cancel'})\r\n          .c('item-not-found', {xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'}).up()\r\n          .c('unknown-session', {xmlns: 'urn:xmpp:jingle:errors:1'});\r\n        this.connection.send(ack);\r\n        return true;\r\n      }\r\n      // compare from to sess.peerjid (bare jid comparison for later compat with message-mode)\r\n      // local jid is not checked\r\n      if (Strophe.getBareJidFromJid(fromJid) != Strophe.getBareJidFromJid(sess.peerjid)) {\r\n        console.warn('jid mismatch for session id', sid, fromJid, sess.peerjid);\r\n        ack.type = 'error';\r\n        ack.c('error', {type: 'cancel'})\r\n          .c('item-not-found', {xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'}).up()\r\n          .c('unknown-session', {xmlns: 'urn:xmpp:jingle:errors:1'});\r\n        this.connection.send(ack);\r\n        return true;\r\n      }\r\n    } else if (sess !== undefined) {\r\n      // existing session with same session id\r\n      // this might be out-of-order if the sess.peerjid is the same as from\r\n      ack.type = 'error';\r\n      ack.c('error', {type: 'cancel'})\r\n        .c('service-unavailable', {xmlns: 'urn:ietf:params:xml:ns:xmpp-stanzas'}).up();\r\n      console.warn('duplicate session id', sid);\r\n      this.connection.send(ack);\r\n      return true;\r\n    }\r\n    // FIXME: check for a defined action\r\n    this.connection.send(ack);\r\n    // see http://xmpp.org/extensions/xep-0166.html#concepts-session\r\n    switch (action) {\r\n      case 'session-initiate':\r\n        sess = new JingleSession($(iq).attr('to'), $(iq).find('jingle').attr('sid'), this.connection);\r\n        // configure session\r\n\r\n        //in firefox we have only one stream object\r\n        if (this.localAudio != this.localVideo) {\r\n          sess.localStreams.push(this.localAudio);\r\n        }\r\n        if (this.localVideo) {\r\n          sess.localStreams.push(this.localVideo);\r\n        }\r\n        sess.media_constraints = this.media_constraints;\r\n        sess.pc_constraints = this.pc_constraints;\r\n        sess.ice_config = this.ice_config;\r\n\r\n        sess.initiate(fromJid, false);\r\n        // FIXME: setRemoteDescription should only be done when this call is to be accepted\r\n        sess.setRemoteDescription($(iq).find('>jingle'), 'offer');\r\n\r\n        this.sessions[sess.sid] = sess;\r\n        this.jid2session[sess.peerjid] = sess;\r\n\r\n        // the callback should either\r\n        // .sendAnswer and .accept\r\n        // or .sendTerminate -- not necessarily synchronus\r\n        $(document).trigger('callincoming.jingle', [sess.sid]);\r\n        break;\r\n      case 'session-accept':\r\n        sess.setRemoteDescription($(iq).find('>jingle'), 'answer');\r\n        sess.accept();\r\n        $(document).trigger('callaccepted.jingle', [sess.sid]);\r\n        break;\r\n      case 'session-terminate':\r\n        // If this is not the focus sending the terminate, we have\r\n        // nothing more to do here.\r\n        if (Object.keys(this.sessions).length < 1\r\n          || !(this.sessions[Object.keys(this.sessions)[0]] instanceof JingleSession)) {\r\n          break;\r\n        }\r\n        console.log('terminating...', sess.sid);\r\n        sess.terminate();\r\n        this.terminate(sess.sid);\r\n        if ($(iq).find('>jingle>reason').length) {\r\n          $(document).trigger('callterminated.jingle', [\r\n            sess.sid,\r\n            sess.peerjid,\r\n            $(iq).find('>jingle>reason>:first')[0].tagName,\r\n            $(iq).find('>jingle>reason>text').text()\r\n          ]);\r\n        } else {\r\n          $(document).trigger('callterminated.jingle',\r\n            [sess.sid, sess.peerjid]);\r\n        }\r\n        break;\r\n      case 'transport-info':\r\n        sess.addIceCandidate($(iq).find('>jingle>content'));\r\n        break;\r\n      case 'session-info':\r\n        var affected;\r\n        if ($(iq).find('>jingle>ringing[xmlns=\"urn:xmpp:jingle:apps:rtp:info:1\"]').length) {\r\n          $(document).trigger('ringing.jingle', [sess.sid]);\r\n        } else if ($(iq).find('>jingle>mute[xmlns=\"urn:xmpp:jingle:apps:rtp:info:1\"]').length) {\r\n          affected = $(iq).find('>jingle>mute[xmlns=\"urn:xmpp:jingle:apps:rtp:info:1\"]').attr('name');\r\n          $(document).trigger('mute.jingle', [sess.sid, affected]);\r\n        } else if ($(iq).find('>jingle>unmute[xmlns=\"urn:xmpp:jingle:apps:rtp:info:1\"]').length) {\r\n          affected = $(iq).find('>jingle>unmute[xmlns=\"urn:xmpp:jingle:apps:rtp:info:1\"]').attr('name');\r\n          $(document).trigger('unmute.jingle', [sess.sid, affected]);\r\n        }\r\n        break;\r\n      case 'addsource': // FIXME: proprietary, un-jingleish\r\n      case 'source-add': // FIXME: proprietary\r\n        // sess.addSource($(iq).find('>jingle'), fromJid);\r\n        sess.setRemoteDescription($(iq).find('>jingle'), 'offer');\r\n        break;\r\n      case 'removesource': // FIXME: proprietary, un-jingleish\r\n      case 'source-remove': // FIXME: proprietary\r\n        // sess.removeSource($(iq).find('>jingle>content'), fromJid);\r\n        sess.setRemoteDescription($(iq).find('>jingle'), 'offer');\r\n        break;\r\n      default:\r\n        console.warn('jingle action not implemented', action);\r\n        break;\r\n    }\r\n    return true;\r\n  },\r\n  initiate: function (peerjid, myjid) { // initiate a new jinglesession to peerjid\r\n    var sess = new JingleSession(myjid || this.connection.jid,\r\n      Math.random().toString(36).substr(2, 12), // random string\r\n      this.connection);\r\n    // configure session\r\n\r\n    //in firefox we have only one stream\r\n    if (this.localAudio != this.localVideo) {\r\n      sess.localStreams.push(this.localAudio);\r\n    }\r\n    if (this.localVideo) {\r\n      sess.localStreams.push(this.localVideo);\r\n    }\r\n    sess.media_constraints = this.media_constraints;\r\n    sess.pc_constraints = this.pc_constraints;\r\n    sess.ice_config = this.ice_config;\r\n\r\n    sess.initiate(peerjid, true);\r\n    this.sessions[sess.sid] = sess;\r\n    this.jid2session[sess.peerjid] = sess;\r\n    sess.sendOffer();\r\n    return sess;\r\n  },\r\n  terminate: function (sid, reason, text) { // terminate by sessionid (or all sessions)\r\n    if (sid === null || sid === undefined) {\r\n      for (sid in this.sessions) {\r\n        if (this.sessions[sid].state != 'ended') {\r\n          this.sessions[sid].sendTerminate(reason || (!this.sessions[sid].active()) ? 'cancel' : null, text);\r\n          this.sessions[sid].terminate();\r\n        }\r\n        delete this.jid2session[this.sessions[sid].peerjid];\r\n        delete this.sessions[sid];\r\n      }\r\n    } else if (this.sessions.hasOwnProperty(sid)) {\r\n      if (this.sessions[sid].state != 'ended') {\r\n        this.sessions[sid].sendTerminate(reason || (!this.sessions[sid].active()) ? 'cancel' : null, text);\r\n        this.sessions[sid].terminate();\r\n      }\r\n      delete this.jid2session[this.sessions[sid].peerjid];\r\n      delete this.sessions[sid];\r\n    }\r\n  },\r\n  // Used to terminate a session when an unavailable presence is received.\r\n  terminateByJid: function (jid) {\r\n    if (this.jid2session.hasOwnProperty(jid)) {\r\n      var sess = this.jid2session[jid];\r\n      if (sess) {\r\n        sess.terminate();\r\n        console.log('peer went away silently', jid);\r\n        delete this.sessions[sess.sid];\r\n        delete this.jid2session[jid];\r\n        $(document).trigger('callterminated.jingle',\r\n          [sess.sid, jid], 'gone');\r\n      }\r\n    }\r\n  },\r\n  terminateRemoteByJid: function (jid, reason) {\r\n    if (this.jid2session.hasOwnProperty(jid)) {\r\n      var sess = this.jid2session[jid];\r\n      if (sess) {\r\n        sess.sendTerminate(reason || (!sess.active()) ? 'kick' : null);\r\n        sess.terminate();\r\n        console.log('terminate peer with jid', sess.sid, jid);\r\n        delete this.sessions[sess.sid];\r\n        delete this.jid2session[jid];\r\n        $(document).trigger('callterminated.jingle',\r\n          [sess.sid, jid, 'kicked']);\r\n      }\r\n    }\r\n  },\r\n  getStunAndTurnCredentials: function () {\r\n    // get stun and turn configuration from server via xep-0215\r\n    // uses time-limited credentials as described in\r\n    // http://tools.ietf.org/html/draft-uberti-behave-turn-rest-00\r\n    //\r\n    // see https://code.google.com/p/prosody-modules/source/browse/mod_turncredentials/mod_turncredentials.lua\r\n    // for a prosody module which implements this\r\n    //\r\n    // currently, this doesn't work with updateIce and therefore credentials with a long\r\n    // validity have to be fetched before creating the peerconnection\r\n    // TODO: implement refresh via updateIce as described in\r\n    //      https://code.google.com/p/webrtc/issues/detail?id=1650\r\n    var self = this;\r\n    this.connection.sendIQ(\r\n      $iq({type: 'get', to: this.connection.domain})\r\n        .c('services', {xmlns: 'urn:xmpp:extdisco:1'}).c('service', {host: 'turn.' + this.connection.domain}),\r\n      function (res) {\r\n        var iceservers = [];\r\n        $(res).find('>services>service').each(function (idx, el) {\r\n          el = $(el);\r\n          var dict = {};\r\n          var type = el.attr('type');\r\n          switch (type) {\r\n            case 'stun':\r\n              dict.url = 'stun:' + el.attr('host');\r\n              if (el.attr('port')) {\r\n                dict.url += ':' + el.attr('port');\r\n              }\r\n              iceservers.push(dict);\r\n              break;\r\n            case 'turn':\r\n            case 'turns':\r\n              dict.url = type + ':';\r\n              if (el.attr('username')) { // https://code.google.com/p/webrtc/issues/detail?id=1508\r\n                if (navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./) && parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10) < 28) {\r\n                  dict.url += el.attr('username') + '@';\r\n                } else {\r\n                  dict.username = el.attr('username'); // only works in M28\r\n                }\r\n              }\r\n              dict.url += el.attr('host');\r\n              if (el.attr('port') && el.attr('port') != '3478') {\r\n                dict.url += ':' + el.attr('port');\r\n              }\r\n              if (el.attr('transport') && el.attr('transport') != 'udp') {\r\n                dict.url += '?transport=' + el.attr('transport');\r\n              }\r\n              if (el.attr('password')) {\r\n                dict.credential = el.attr('password');\r\n              }\r\n              iceservers.push(dict);\r\n              break;\r\n          }\r\n        });\r\n        self.ice_config.iceServers = iceservers;\r\n      },\r\n      function (err) {\r\n        console.warn('getting turn credentials failed', err);\r\n        console.warn('is mod_turncredentials or similar installed?');\r\n      }\r\n    );\r\n    // implement push?\r\n  }\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/strophe/plugins/strophe.jingle.js\n// module id = 34\n// module chunks = 0","var SessionBase = require('./strophe.jingle.sessionbase');\r\nvar SDP = require('./strophe.jingle.sdp');\r\nvar TraceablePeerConnection = require('./strophe.jingle.adapter');\r\nvar simulcast = require('../../libs/simulcast');\r\nvar X2JS = require('x2js');\r\nvar ms = require('./manis.utils');\r\nvar ErrorCode = require('../../errorCode');\r\nvar SdpUtil = require('./SdpUtil');\r\n\r\n/* jshint -W117 */\r\n// Jingle stuff\r\nJingleSession.prototype = Object.create(SessionBase.prototype);\r\nfunction JingleSession(me, sid, connection) {\r\n\r\n  SessionBase.call(this, connection, sid);\r\n\r\n  this.me = me;\r\n  this.initiator = null;\r\n  this.responder = null;\r\n  this.isInitiator = null;\r\n  this.peerjid = null;\r\n  this.state = null;\r\n  this.localSDP = null;\r\n  this.remoteSDP = null;\r\n  this.localStreams = [];\r\n  this.relayedStreams = [];\r\n  this.remoteStreams = [];\r\n  this.startTime = null;\r\n  this.stopTime = null;\r\n  this.media_constraints = null;\r\n  this.pc_constraints = null;\r\n  this.ice_config = {};\r\n  this.drip_container = [];\r\n\r\n  this.usetrickle = true;\r\n  this.usepranswer = false; // early transport warmup -- mind you, this might fail. depends on webrtc issue 1718\r\n  this.usedrip = false; // dripping is sending trickle candidates not one-by-one\r\n\r\n  this.hadstuncandidate = false;\r\n  this.hadturncandidate = false;\r\n  this.lasticecandidate = false;\r\n  this.statsinterval = null;\r\n  this.reason = null;\r\n  this.wait = true;\r\n  this.localStreamsSSRC = null;\r\n}\r\n\r\nJingleSession.prototype.initiate = function (peerjid, isInitiator) {\r\n  var self = this;\r\n  if (this.state !== null) {\r\n    console.error('attempt to initiate on session ' + this.sid +  'in state ' + this.state);\r\n    return;\r\n  }\r\n  this.isInitiator = isInitiator;\r\n  this.state = 'pending';\r\n  this.initiator = isInitiator ? this.me : peerjid;\r\n  this.responder = !isInitiator ? this.me : peerjid;\r\n  this.peerjid = peerjid;\r\n  this.hadstuncandidate = false;\r\n  this.hadturncandidate = false;\r\n  this.lasticecandidate = false;\r\n\r\n  this.peerconnection\r\n    = new TraceablePeerConnection(\r\n    this.connection.jingle.ice_config,\r\n    this.connection.jingle.pc_constraints);\r\n\r\n  this.peerconnection.onicecandidate = function (event) {\r\n    self.sendIceCandidate(event.candidate);\r\n  };\r\n    this.peerconnection.ontrack = function (event) {\r\n      console.log('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA', event);\r\n    };\r\n  this.peerconnection.onaddstream = function (event) {\r\n    self.remoteStreams.push(event.stream);\r\n    console.log(\"================================REMOTE STREAM ADDED:\",event ,\"\\n stream \" , event.stream ,  \" \\n stream id:  \" ,  event.stream.id);\r\n    var streamId = event.stream.id;\r\n    if (!(streamId.indexOf(\"mixed\") > -1 || streamId.indexOf(\"re_ms\") > -1)) {\r\n        $(document).trigger('remotestreamadded.jingle', [event.stream, SdpUtil.getSsrc(streamId)]);\r\n        // clearTimeout(askTimeout);\r\n        // askTimeout = setTimeout(function () {\r\n        //   self.sendKeyframe();\r\n        // },1000 * 10);\r\n    }\r\n  };\r\n  this.peerconnection.onremovestream = function (event) {\r\n    // Remove the stream from remoteStreams\r\n    var streamIdx = self.remoteStreams.indexOf(event.stream);\r\n    if (streamIdx !== -1) {\r\n      self.remoteStreams.splice(streamIdx, 1);\r\n    }\r\n    // FIXME: remotestreamremoved.jingle not defined anywhere(unused)\r\n    $(document).trigger('remotestreamremoved.jingle', [event, self.sid]);\r\n  };\r\n  this.peerconnection.onsignalingstatechange = function (event) {\r\n    if (!(self && self.peerconnection)) return;\r\n  };\r\n  this.peerconnection.oniceconnectionstatechange = function (event) {\r\n    if (!(self && self.peerconnection)) return;\r\n    switch (self.peerconnection.iceConnectionState) {\r\n      case 'connected':\r\n        this.startTime = new Date();\r\n        break;\r\n      case 'disconnected':\r\n        this.stopTime = new Date();\r\n        break;\r\n    }\r\n    $(document).trigger('iceconnectionstatechange.jingle', [self.sid, self]);\r\n  };\r\n  // add any local and relayed stream\r\n  this.localStreams.forEach(function (stream) {\r\n    self.peerconnection.addStream(stream);\r\n  });\r\n  this.relayedStreams.forEach(function (stream) {\r\n    self.peerconnection.addStream(stream);\r\n  });\r\n};\r\n\r\nJingleSession.prototype.accept = function () {\r\n  var self = this;\r\n  this.state = 'active';\r\n\r\n  var pranswer = this.peerconnection.localDescription;\r\n  if (!pranswer || pranswer.type != 'pranswer') {\r\n    return;\r\n  }\r\n  console.log('going from pranswer to answer');\r\n  if (this.usetrickle) {\r\n    // remove candidates already sent from session-accept\r\n    var lines = SDPUtil.find_lines(pranswer.sdp, 'a=candidate:');\r\n    for (var i = 0; i < lines.length; i++) {\r\n      pranswer.sdp = pranswer.sdp.replace(lines[i] + '\\r\\n', '');\r\n    }\r\n  }\r\n  while (SDPUtil.find_line(pranswer.sdp, 'a=inactive')) {\r\n    // FIXME: change any inactive to sendrecv or whatever they were originally\r\n    pranswer.sdp = pranswer.sdp.replace('a=inactive', 'a=sendrecv');\r\n  }\r\n  pranswer = simulcast.reverseTransformLocalDescription(pranswer);\r\n  var prsdp = new SDP(pranswer.sdp);\r\n  var accept = $iq({\r\n    to: this.peerjid,\r\n    type: 'set'\r\n  })\r\n    .c('jingle', {\r\n      xmlns: 'urn:xmpp:jingle:1',\r\n      action: 'session-accept',\r\n      initiator: this.initiator,\r\n      responder: this.responder,\r\n      sid: this.sid\r\n    });\r\n  prsdp.toJingle(accept, this.initiator == this.me ? 'initiator' : 'responder', this.localStreamsSSRC);\r\n  var sdp = this.peerconnection.localDescription.sdp;\r\n  while (SDPUtil.find_line(sdp, 'a=inactive')) {\r\n    // FIXME: change any inactive to sendrecv or whatever they were originally\r\n    sdp = sdp.replace('a=inactive', 'a=sendrecv');\r\n  }\r\n  this.peerconnection.setLocalDescription(new RTCSessionDescription({type: 'answer', sdp: sdp}), // BAO\r\n    function () {\r\n      //console.log('setLocalDescription success');\r\n      $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n      console.log('----------------- send accept', accept.tree());\r\n      this.connection.sendIQ(accept,\r\n        function () {\r\n          var ack = {};\r\n          ack.source = 'answer';\r\n          $(document).trigger('ack.jingle', [self.sid, ack]);\r\n        },\r\n        function (stanza) {\r\n          var error = ($(stanza).find('error').length) ? {\r\n            code: $(stanza).find('error').attr('code'),\r\n            reason: $(stanza).find('error :first')[0].tagName\r\n          } : {};\r\n          error.source = 'answer';\r\n          $(document).trigger('error.jingle', [self.sid, error]);\r\n        });\r\n    },\r\n    function (e) {\r\n      console.error('setLocalDescription failed', e);\r\n    }\r\n  );\r\n};\r\n\r\n/**\r\n * Implements SessionBase.sendSSRCUpdate.\r\n */\r\nJingleSession.prototype.sendSSRCUpdate = function (sdpMediaSsrcs, fromJid, isadd) {\r\n\r\n  var self = this;\r\n  //console.log('tell', self.peerjid, 'about ' + (isadd ? 'new' : 'removed') + ' ssrcs from' + self.me);\r\n\r\n  //  BAO This code is now redundant\r\n  //\r\n  //if (!(this.peerconnection.signalingState == 'stable' && this.peerconnection.iceConnectionState == 'connected')){\r\n  //    console.log(\"Too early to send updates\");\r\n  //    return;\r\n  //}\r\n\r\n  this.sendSSRCUpdateIq(sdpMediaSsrcs, self.sid, self.initiator, self.peerjid, isadd);\r\n};\r\n\r\nJingleSession.prototype.terminate = function (reason) {\r\n  this.state = 'ended';\r\n  this.reason = reason;\r\n  this.peerconnection.close();\r\n  if (this.statsinterval !== null) {\r\n    window.clearInterval(this.statsinterval);\r\n    this.statsinterval = null;\r\n  }\r\n};\r\n\r\nJingleSession.prototype.active = function () {\r\n  return this.state == 'active';\r\n};\r\n\r\nJingleSession.prototype.sendIceCandidate = function (candidate) {\r\n  // console.log(\"==================sendIceCandidate===========\",candidate);\r\n  var self = this;\r\n  if (candidate && !this.lasticecandidate) {\r\n    var ice = SDPUtil.iceparams(this.localSDP.media[candidate.sdpMLineIndex], this.localSDP.session);\r\n    var jcand = SDPUtil.candidateToJingle(candidate.candidate);\r\n    if (!(ice && jcand)) {\r\n      console.error('failed to get ice && jcand');\r\n      return;\r\n    }\r\n    ice.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\r\n\r\n    if (jcand.type === 'srflx') {\r\n      this.hadstuncandidate = true;\r\n    } else if (jcand.type === 'relay') {\r\n      this.hadturncandidate = true;\r\n    }\r\n\r\n    if (this.usetrickle) {\r\n      if (this.usedrip) {\r\n        if (this.drip_container.length === 0) {\r\n          // start 20ms callout\r\n          window.setTimeout(function () {\r\n            if (self.drip_container.length === 0) return;\r\n            //console.log('sendIceCandidates timeout', self.usetrickle, self.usedrip, self.drip_container);\r\n            self.sendIceCandidates(self.drip_container);\r\n            self.drip_container = [];\r\n          }, 20);\r\n\r\n        }\r\n        this.drip_container.push(candidate);\r\n        return;\r\n      } else {\r\n        //console.log('sendIceCandidates single', self.usetrickle, self.usedrip, candidate);\r\n        self.sendIceCandidates([candidate]);\r\n      }\r\n    }\r\n  } else {\r\n    //console.log('sendIceCandidate: last candidate.');\r\n    if (!this.usetrickle) {\r\n      //console.log('should send full offer now...');\r\n      var init = $iq({\r\n        to: this.peerjid,\r\n        type: 'set'\r\n      })\r\n        .c('jingle', {\r\n          xmlns: 'urn:xmpp:jingle:1',\r\n          action: this.peerconnection.localDescription.type == 'offer' ? 'session-initiate' : 'session-accept',\r\n          initiator: this.initiator,\r\n          sid: this.sid\r\n        });\r\n      this.localSDP = new SDP(this.peerconnection.localDescription.sdp);\r\n      var self = this;\r\n      var sendJingle = function (ssrc) {\r\n        if (!ssrc)\r\n          ssrc = {};\r\n        self.localSDP.toJingle(init, self.initiator == self.me ? 'initiator' : 'responder', ssrc);\r\n        self.connection.sendIQ(init,\r\n          function () {\r\n            //console.log('session initiate ack');\r\n            var ack = {};\r\n            ack.source = 'offer';\r\n            $(document).trigger('ack.jingle', [self.sid, ack]);\r\n          },\r\n          function (stanza) {\r\n            self.state = 'error';\r\n            self.peerconnection.close();\r\n            var error = ($(stanza).find('error').length) ? {\r\n              code: $(stanza).find('error').attr('code'),\r\n              reason: $(stanza).find('error :first')[0].tagName,\r\n            } : {};\r\n            error.source = 'offer';\r\n            $(document).trigger('error.jingle', [self.sid, error]);\r\n          });\r\n      }\r\n\r\n      RTC.getLocalSSRC(this, function (ssrcs) {\r\n        if (ssrcs) {\r\n          sendJingle(ssrcs);\r\n          $(document).trigger(\"setLocalDescription.jingle\", [self.sid]);\r\n        }\r\n        else {\r\n          sendJingle();\r\n        }\r\n      });\r\n\r\n    }\r\n    this.lasticecandidate = true;\r\n    console.log('Have we encountered any srflx candidates? ' + this.hadstuncandidate);\r\n    console.log('Have we encountered any relay candidates? ' + this.hadturncandidate);\r\n\r\n    if (!(this.hadstuncandidate || this.hadturncandidate) && this.peerconnection.signalingState != 'closed') {\r\n      $(document).trigger('nostuncandidates.jingle', [this.sid]);\r\n    }\r\n  }\r\n};\r\n\r\nJingleSession.prototype.sendIceCandidates = function (candidates) {\r\n  console.log('sendIceCandidates', candidates);\r\n  var self = this;\r\n  var relayDone = false;\r\n  var cand = $iq({to: this.peerjid, type: 'set'})\r\n    .c('jingle', {\r\n      xmlns: 'urn:xmpp:jingle:1',\r\n      action: 'transport-info',\r\n      initiator: this.initiator,\r\n      sid: this.sid\r\n    });\r\n  for (var mid = 0; mid < this.localSDP.media.length; mid++) {\r\n    var cands = candidates.filter(function (el) {\r\n      return el.sdpMLineIndex == mid;\r\n    });\r\n    var mline = SDPUtil.parse_mline(this.localSDP.media[mid].split('\\r\\n')[0]);\r\n    if (cands.length > 0) {\r\n      var ice = SDPUtil.iceparams(this.localSDP.media[mid], this.localSDP.session);\r\n      ice.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\r\n      cand.c('content', {\r\n        creator: this.initiator == this.me ? 'initiator' : 'responder',\r\n        name: (cands[0].sdpMid ? cands[0].sdpMid : mline.media)\r\n      }).c('transport', ice);\r\n      for (var i = 0; i < cands.length; i++) {\r\n        cand.c('candidate', SDPUtil.candidateToJingle(cands[i].candidate)).up();\r\n      }\r\n\r\n      // add fingerprint\r\n      if (SDPUtil.find_line(this.localSDP.media[mid], 'a=fingerprint:', this.localSDP.session)) {\r\n        var tmp = SDPUtil.parse_fingerprint(SDPUtil.find_line(this.localSDP.media[mid], 'a=fingerprint:', this.localSDP.session));\r\n        tmp.required = true;\r\n        cand.c(\r\n          'fingerprint',\r\n          {xmlns: 'urn:xmpp:jingle:apps:dtls:0'})\r\n          .t(tmp.fingerprint);\r\n        delete tmp.fingerprint;\r\n        cand.attrs(tmp);\r\n        cand.up();\r\n      }\r\n      cand.up(); // transport\r\n      cand.up(); // content\r\n    }\r\n    self.relayDone = relayDone;\r\n  }\r\n  // might merge last-candidate notification into this, but it is called alot later. See webrtc issue #2340\r\n  //console.log('was this the last candidate', this.lasticecandidate);\r\n  this.connection.sendIQ(cand,\r\n    function () {\r\n      var ack = {};\r\n      ack.source = 'transportinfo';\r\n      $(document).trigger('ack.jingle', [this.sid, ack]);\r\n    },\r\n    function (stanza) {\r\n      var error = ($(stanza).find('error').length) ? {\r\n        code: $(stanza).find('error').attr('code'),\r\n        reason: $(stanza).find('error :first')[0].tagName,\r\n      } : {};\r\n      error.source = 'transportinfo';\r\n      $(document).trigger('error.jingle', [this.sid, error]);\r\n    });\r\n};\r\n\r\n\r\nJingleSession.prototype.sendOffer = function () {\r\n  //console.log('sendOffer...');\r\n  var self = this;\r\n  this.peerconnection.createOffer(function (sdp) {\r\n      self.createdOffer(sdp);\r\n    },\r\n    function (e) {\r\n      console.error('createOffer failed', e);\r\n    },\r\n    this.media_constraints\r\n  );\r\n};\r\n\r\nJingleSession.prototype.createdOffer = function (sdp) {\r\n  //console.log('createdOffer', sdp);\r\n  var self = this;\r\n  this.localSDP = new SDP(sdp.sdp);\r\n  //this.localSDP.mangle();\r\n  var sendJingle = function () {\r\n    var init = $iq({\r\n      to: this.peerjid,\r\n      type: 'set'\r\n    })\r\n      .c('jingle', {\r\n        xmlns: 'urn:xmpp:jingle:1',\r\n        action: 'session-initiate',\r\n        initiator: this.initiator,\r\n        sid: this.sid\r\n      });\r\n    this.localSDP.toJingle(init, this.initiator == this.me ? 'initiator' : 'responder', this.localStreamsSSRC);\r\n    this.connection.sendIQ(init,\r\n      function () {\r\n        var ack = {};\r\n        ack.source = 'offer';\r\n        $(document).trigger('ack.jingle', [self.sid, ack]);\r\n      },\r\n      function (stanza) {\r\n        self.state = 'error';\r\n        self.peerconnection.close();\r\n        var error = ($(stanza).find('error').length) ? {\r\n          code: $(stanza).find('error').attr('code'),\r\n          reason: $(stanza).find('error :first')[0].tagName,\r\n        } : {};\r\n        error.source = 'offer';\r\n        $(document).trigger('error.jingle', [self.sid, error]);\r\n      });\r\n  }\r\n  // sdp.sdp = this.setBandwidth(this.localSDP.raw); // BAO\r\n\r\n  this.peerconnection.setLocalDescription(sdp,\r\n    function () {\r\n      if (this.usetrickle) {\r\n        RTC.getLocalSSRC(function (ssrc) {\r\n          sendJingle(ssrc);\r\n          $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n        });\r\n      }\r\n      else\r\n        $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n      //console.log('setLocalDescription success');\r\n    },\r\n    function (e) {\r\n      console.error('setLocalDescription failed', e);\r\n    }\r\n  );\r\n  var cands = SDPUtil.find_lines(this.localSDP.raw, 'a=candidate:');\r\n  for (var i = 0; i < cands.length; i++) {\r\n    var cand = SDPUtil.parse_icecandidate(cands[i]);\r\n    if (cand.type == 'srflx') {\r\n      this.hadstuncandidate = true;\r\n    } else if (cand.type == 'relay') {\r\n      this.hadturncandidate = true;\r\n    }\r\n  }\r\n};\r\n\r\nJingleSession.prototype.setRemoteDescription = function (elem,desctype) {\r\n  var _this = this;\r\n if (elem[0].outerHTML) {\r\n  var iqXml = elem[0].outerHTML;\r\n  var emptyIQ = ($(iqXml).find(\">content\").length) == 0;\r\n  if(emptyIQ){\r\n   console.warn('handle empty iq, ignore: \\n', iqXml);\r\n   return true;\r\n  }\r\n  var x2js = new X2JS({\r\n    attributePrefix : \"\"\r\n  });\r\n  var jsonObj = x2js.xml2js(iqXml);\r\n  if (jsonObj.jingle) {\r\n    var action = jsonObj.jingle.action;\r\n    if (action == \"session-initiate\")  {\r\n      var sdp = SdpUtil.xml2sdp(iqXml);\r\n      var remotedesc = new RTCSessionDescription({type: desctype, sdp: sdp});\r\n      this.peerconnection.peerconnection.setRemoteDescription(remotedesc,\r\n        function () {\r\n          console.log(\"====setRemoteDescription===1=====ok====\" + action);\r\n        },\r\n        function (err) {\r\n          console.error(\"====setRemoteDescription==1==err======\" + action,err)\r\n        }\r\n      );\r\n    } else if (action == \"source-add\")  {\r\n      var sdp = SdpUtil.xml2sdp(iqXml);\r\n      var remotedesc = new RTCSessionDescription({type: desctype, sdp: sdp});\r\n      this.peerconnection.peerconnection.setRemoteDescription(remotedesc,\r\n        function () {\r\n          _this.peerconnection.createAnswer(\r\n            function (answer) {\r\n              _this.peerconnection.peerconnection.setLocalDescription(answer);\r\n            },\r\n            function (e) {\r\n              console.error(\"====createAnswer===1=====err====\" + action,e);\r\n            }\r\n          );\r\n        },\r\n        function (e) {\r\n          console.error(\"====setRemoteDescription===1=====err====\" + action,e);\r\n        }\r\n      );\r\n    } else if (action == \"source-remove\"){\r\n      var sdp = SdpUtil.xml2sdp(iqXml);\r\n      var remotedesc = new RTCSessionDescription({type: desctype, sdp: sdp});\r\n      this.peerconnection.peerconnection.setRemoteDescription(remotedesc,\r\n          function () {\r\n            _this.peerconnection.createAnswer(\r\n                function (answer) {\r\n                  _this.peerconnection.peerconnection.setLocalDescription(answer);\r\n                },\r\n                function (e) {\r\n                  console.log(\"====createAnswer===1=====err====\" + action,e);\r\n                }\r\n            );\r\n          },\r\n          function (e) {\r\n            console.error(\"====setRemoteDescription===1=====err====\" + action,e);\r\n          }\r\n      );\r\n    }\r\n  }\r\n }\r\n};\r\n\r\nJingleSession.prototype.addIceCandidate = function (elem) {\r\n  var self = this;\r\n  if (this.peerconnection.signalingState == 'closed') {\r\n    return;\r\n  }\r\n  if (!this.peerconnection.remoteDescription && this.peerconnection.signalingState == 'have-local-offer') {\r\n    console.log('trickle ice candidate arriving before session accept...');\r\n    // create a PRANSWER for setRemoteDescription\r\n    if (!this.remoteSDP) {\r\n      var cobbled = 'v=0\\r\\n' +\r\n        'o=- ' + '1923518516' + ' 2 IN IP4 0.0.0.0\\r\\n' +// FIXME\r\n        's=-\\r\\n' +\r\n        't=0 0\\r\\n';\r\n      // first, take some things from the local description\r\n      for (var i = 0; i < this.localSDP.media.length; i++) {\r\n        cobbled += SDPUtil.find_line(this.localSDP.media[i], 'm=') + '\\r\\n';\r\n        cobbled += SDPUtil.find_lines(this.localSDP.media[i], 'a=rtpmap:').join('\\r\\n') + '\\r\\n';\r\n        if (SDPUtil.find_line(this.localSDP.media[i], 'a=mid:')) {\r\n          cobbled += SDPUtil.find_line(this.localSDP.media[i], 'a=mid:') + '\\r\\n';\r\n        }\r\n        cobbled += 'a=inactive\\r\\n';\r\n      }\r\n      this.remoteSDP = new SDP(cobbled);\r\n    }\r\n    // then add things like ice and dtls from remote candidate\r\n    elem.each(function () {\r\n      for (var i = 0; i < self.remoteSDP.media.length; i++) {\r\n        if (SDPUtil.find_line(self.remoteSDP.media[i], 'a=mid:' + $(this).attr('name')) ||\r\n          self.remoteSDP.media[i].indexOf('m=' + $(this).attr('name')) === 0) {\r\n          if (!SDPUtil.find_line(self.remoteSDP.media[i], 'a=ice-ufrag:')) {\r\n            var tmp = $(this).find('transport');\r\n            self.remoteSDP.media[i] += 'a=ice-ufrag:' + tmp.attr('ufrag') + '\\r\\n';\r\n            self.remoteSDP.media[i] += 'a=ice-pwd:' + tmp.attr('pwd') + '\\r\\n';\r\n            tmp = $(this).find('transport>fingerprint');\r\n            if (tmp.length) {\r\n              self.remoteSDP.media[i] += 'a=fingerprint:' + tmp.attr('hash') + ' ' + tmp.text() + '\\r\\n';\r\n            } else {\r\n              console.log('no dtls fingerprint (webrtc issue #1718?)');\r\n              self.remoteSDP.media[i] += 'a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:BAADBAADBAADBAADBAADBAADBAADBAADBAADBAAD\\r\\n';\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    });\r\n    this.remoteSDP.raw = this.remoteSDP.session + this.remoteSDP.media.join('');\r\n\r\n    // we need a complete SDP with ice-ufrag/ice-pwd in all parts\r\n    // this makes the assumption that the PRANSWER is constructed such that the ice-ufrag is in all mediaparts\r\n    // but it could be in the session part as well. since the code above constructs this sdp this can't happen however\r\n    var iscomplete = this.remoteSDP.media.filter(function (mediapart) {\r\n        return SDPUtil.find_line(mediapart, 'a=ice-ufrag:');\r\n      }).length == this.remoteSDP.media.length;\r\n\r\n    if (iscomplete) {\r\n      console.log('setting pranswer');\r\n      try {\r\n        this.peerconnection.setRemoteDescription(new RTCSessionDescription({\r\n            type: 'pranswer',\r\n            sdp: this.remoteSDP.raw\r\n          }),\r\n          function () {\r\n          },\r\n          function (e) {\r\n            console.log('setRemoteDescription pranswer failed', e.toString());\r\n          });\r\n      } catch (e) {\r\n        console.error('setting pranswer failed', e);\r\n      }\r\n    } else {\r\n      //console.log('not yet setting pranswer');\r\n    }\r\n  }\r\n  // operate on each content element\r\n  elem.each(function () {\r\n    // would love to deactivate this, but firefox still requires it\r\n    var idx = -1;\r\n    var i;\r\n    for (i = 0; i < self.remoteSDP.media.length; i++) {\r\n      if (SDPUtil.find_line(self.remoteSDP.media[i], 'a=mid:' + $(this).attr('name')) ||\r\n        self.remoteSDP.media[i].indexOf('m=' + $(this).attr('name')) === 0) {\r\n        idx = i;\r\n        break;\r\n      }\r\n    }\r\n    if (idx == -1) { // fall back to localdescription\r\n      for (i = 0; i < self.localSDP.media.length; i++) {\r\n        if (SDPUtil.find_line(self.localSDP.media[i], 'a=mid:' + $(this).attr('name')) ||\r\n          self.localSDP.media[i].indexOf('m=' + $(this).attr('name')) === 0) {\r\n          idx = i;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    var name = $(this).attr('name');\r\n    // TODO: check ice-pwd and ice-ufrag?\r\n    $(this).find('transport>candidate').each(function () {\r\n      var line, candidate;\r\n      line = SDPUtil.candidateFromJingle(this);\r\n      candidate = new RTCIceCandidate({\r\n        sdpMLineIndex: idx,\r\n        sdpMid: name,\r\n        candidate: line\r\n      });\r\n      try {\r\n        self.peerconnection.addIceCandidate(candidate);\r\n      } catch (e) {\r\n        console.error('addIceCandidate failed', e.toString(), line);\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nJingleSession.prototype.sendAnswer = function (provisional) {\r\n  //console.log('createAnswer', provisional);\r\n  var self = this;\r\n  this.peerconnection.createAnswer(\r\n    function (sdp) {\r\n      console.log('createAnswer', provisional);\r\n      console.log('createAnswer sdp', sdp);\r\n      self.createdAnswer(sdp, provisional);\r\n    },\r\n    function (e) {\r\n      console.error('createAnswer failed', e);\r\n    },\r\n    this.media_constraints\r\n  );\r\n};\r\n\r\nJingleSession.prototype.createdAnswer = function (sdp, provisional) {\r\n  console.log(\"===========cretateAnswer===\",sdp);\r\n  var self = this;\r\n  var medias = sdp.sdp.split('\\r\\nm=');\r\n  var contentsNode = '';\r\n  if (ms.getSemantics() != \"firefox\")  {\r\n    for (var i=0; i< medias.length ; i++ ) {\r\n      var mediaGroup = medias[i];\r\n      if (mediaGroup) {\r\n        var mediaLine = SDPUtil.find_line(mediaGroup, \"a=ssrc\") || SDPUtil.find_line(mediaGroup, \"application\");\r\n        if (mediaLine) {\r\n          var audioVideoGroup = SDPUtil.find_line(mediaGroup,\"audio\") || SDPUtil.find_line(mediaGroup,\"video\");\r\n          var applicationLine = SDPUtil.find_line(mediaGroup,\"application\");\r\n\r\n          var ufrag = SDPUtil.find_line(mediaGroup,\"a=ice-ufrag\").split(\":\")[1];\r\n          var pwd = SDPUtil.find_line(mediaGroup,\"a=ice-pwd\").split(\":\")[1];\r\n          var fingerprints = SDPUtil.find_line(mediaGroup,\"a=fingerprint\").split(\" \");\r\n\r\n          if (audioVideoGroup) {\r\n            var mediaName = audioVideoGroup.split(\" \")[0]; //audio video\r\n\r\n            var msid = SDPUtil.find_line(mediaGroup, \"a=msid\");\r\n            var ssrcLine = \"\", ssrc = \"\" , cname = \"\";\r\n            if (msid) {\r\n              msid = msid.split(\":\")[1];\r\n              ssrcLine = SDPUtil.find_line(mediaGroup, \"a=ssrc\").split(\" \");\r\n            } else {\r\n              var ssrcLines = SDPUtil.find_lines(mediaGroup,\"a=ssrc\");\r\n              for (var j = 0 ;j< ssrcLines.length;j++) {\r\n                if (ssrcLines[j].indexOf(\"cname\") > -1) {\r\n                  ssrcLine = ssrcLines[j].split(\" \");\r\n                }\r\n                if (ssrcLines[j].indexOf(\"msid\") > -1) {\r\n                  msid = ssrcLines[j].split(\"msid:\")[1];\r\n                }\r\n              }\r\n            }\r\n            ssrc = ssrcLine[0].split(\":\")[1];\r\n            cname = ssrcLine[1].split(\":\")[1];\r\n            contentsNode += ms.createMediaNode(mediaName, mediaGroup, ssrc, cname, msid, ufrag, pwd, fingerprints)\r\n          } else if (applicationLine) {\r\n            contentsNode += ms.createDataNode(ufrag, pwd, fingerprints);\r\n          }\r\n        }\r\n      }\r\n    }// end for\r\n  } else {\r\n      var fingerprints = SDPUtil.find_line(medias[0],\"a=fingerprint\").split(\" \");\r\n      for (var i=1; i< medias.length ; i++ ) {\r\n          var mediaGroup = medias[i];\r\n          if (mediaGroup) {\r\n              var mediaLine = (SDPUtil.find_line(mediaGroup, \"a=sendrecv\") && SDPUtil.find_line(mediaGroup, \"a=ssrc\")) || SDPUtil.find_line(mediaGroup, \"application\");\r\n              if (mediaLine) {\r\n                  var audioVideoGroup = SDPUtil.find_line(mediaGroup,\"audio\") || SDPUtil.find_line(mediaGroup,\"video\");\r\n                  var applicationLine = SDPUtil.find_line(mediaGroup,\"application\");\r\n                  var ufrag = SDPUtil.find_line(mediaGroup,\"a=ice-ufrag\").split(\":\")[1];\r\n                  var pwd = SDPUtil.find_line(mediaGroup,\"a=ice-pwd\").split(\":\")[1];\r\n\r\n                  if (audioVideoGroup) {\r\n                      var mediaName = audioVideoGroup.split(\" \")[0]; //audio video\r\n                      var msid = SDPUtil.find_line(mediaGroup, \"a=msid\");\r\n                      var ssrcLine = \"\", ssrc = \"\" , cname = \"\";\r\n                      if (msid) {\r\n                          msid = msid.split(\":\")[1];\r\n                          ssrcLine = SDPUtil.find_line(mediaGroup, \"a=ssrc\").split(\" \");\r\n                      } else {\r\n                          var ssrcLines = SDPUtil.find_lines(mediaGroup,\"a=ssrc\");\r\n                          for (var j = 0 ;j< ssrcLines.length;j++) {\r\n                              if (ssrcLines[j].indexOf(\"cname\") > -1) {\r\n                                  ssrcLine = ssrcLines[j].split(\" \");\r\n                              }\r\n                              if (ssrcLines[j].indexOf(\"msid\") > -1) {\r\n                                  msid = ssrcLines[j].split(\"msid:\")[1];\r\n                              }\r\n                          }\r\n                      }\r\n                      ssrc = ssrcLine[0].split(\":\")[1];\r\n                      cname = ssrcLine[1].split(\":\")[1];\r\n                      contentsNode += ms.createMediaNode(mediaName, mediaGroup, ssrc, cname, msid, ufrag, pwd, fingerprints);\r\n                  } else if (applicationLine) {\r\n                      contentsNode += ms.createDataNode(ufrag, pwd, fingerprints);\r\n                  }\r\n\r\n              }\r\n          }\r\n      }// end for\r\n  }\r\n\r\n  var mxml = ms.ansToSessAcc(self, contentsNode);\r\n  console.log(\"==========================createdAnswer============mxml======\\r\\n\", mxml.outerHTML);\r\n\r\n\r\n  this.localSDP = new SDP(sdp.sdp);\r\n  //this.localSDP.mangle();\r\n  this.usepranswer = provisional === true;\r\n  if (this.usetrickle) {\r\n    if (this.usepranswer) {\r\n      sdp.type = 'pranswer';\r\n      for (var i = 0; i < this.localSDP.media.length; i++) {\r\n        this.localSDP.media[i] = this.localSDP.media[i].replace('a=sendrecv\\r\\n', 'a=inactive\\r\\n');\r\n      }\r\n      this.localSDP.raw = this.localSDP.session + '\\r\\n' + this.localSDP.media.join('');\r\n    }\r\n  }\r\n\r\n  var sendJingle = function (ssrcs) {\r\n    this.connection.sendIQ(mxml,\r\n      function () {\r\n        // console.log(\"====================this.connection.sendIQ(textToXML(mxml)===========success=========\" + mxml);\r\n        // var ack = {};\r\n        // ack.source = 'answer';\r\n        // $(document).trigger('ack.jingle', [self.sid, ack]);\r\n      },\r\n      function (stanza) {\r\n        // console.log(\"====================this.connection.sendIQ(textToXML(mxml)=======error=============\" + mxml);\r\n        // var error = ($(stanza).find('error').length) ? {\r\n        //   code: $(stanza).find('error').attr('code'),\r\n        //   reason: $(stanza).find('error :first')[0].tagName,\r\n        // } : {};\r\n        // error.source = 'answer';\r\n        // $(document).trigger('error.jingle', [self.sid, error]);\r\n      });\r\n  }\r\n  // sdp.sdp = this.setBandwidth(this.localSDP.raw); //BAO\r\n  // console.log(\"===================================answer===sdp============\",sdp.sdp);\r\n  var localdesc = new RTCSessionDescription({type: \"answer\", sdp: sdp.sdp});\r\n  this.peerconnection.peerconnection.setLocalDescription(localdesc,\r\n    function () {\r\n      //console.log('setLocalDescription success');\r\n      if (self.usetrickle && !self.usepranswer) {\r\n        RTC.getLocalSSRC(self, function (ssrc) {\r\n          sendJingle(ssrc);\r\n          $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n        });\r\n      }\r\n      else\r\n        $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n    },\r\n    function (e) {\r\n      console.error('setLocalDescription failed', e);\r\n    }\r\n  );\r\n  var cands = SDPUtil.find_lines(this.localSDP.raw, 'a=candidate:');\r\n  for (var j = 0; j < cands.length; j++) {\r\n    var cand = SDPUtil.parse_icecandidate(cands[j]);\r\n    if (cand.type == 'srflx') {\r\n      this.hadstuncandidate = true;\r\n    } else if (cand.type == 'relay') {\r\n      this.hadturncandidate = true;\r\n    }\r\n  }\r\n};\r\n\r\nJingleSession.prototype.sendTerminate = function (reason, text) {\r\n  var self = this,\r\n    term = $iq({\r\n      to: this.peerjid,\r\n      type: 'set'\r\n    })\r\n      .c('jingle', {\r\n        xmlns: 'urn:xmpp:jingle:1',\r\n        action: 'session-terminate',\r\n        initiator: this.initiator,\r\n        sid: this.sid\r\n      })\r\n      .c('reason')\r\n      .c(reason || 'success');\r\n\r\n  if (text) {\r\n    term.up().c('text').t(text);\r\n  }\r\n\r\n  this.connection.sendIQ(term,\r\n    function () {\r\n      self.peerconnection.close();\r\n      self.peerconnection = null;\r\n      self.terminate();\r\n      var ack = {};\r\n      ack.source = 'terminate';\r\n      $(document).trigger('ack.jingle', [self.sid, ack]);\r\n    },\r\n    function (stanza) {\r\n      var error = ($(stanza).find('error').length) ? {\r\n        code: $(stanza).find('error').attr('code'),\r\n        reason: $(stanza).find('error :first')[0].tagName,\r\n      } : {};\r\n      $(document).trigger('ack.jingle', [self.sid, error]);\r\n    });\r\n  if (this.statsinterval !== null) {\r\n    window.clearInterval(this.statsinterval);\r\n    this.statsinterval = null;\r\n  }\r\n};\r\n\r\nJingleSession.prototype.sendMute = function (muted, content) {\r\n  var info = $iq({\r\n    to: this.peerjid,\r\n    type: 'set'\r\n  })\r\n    .c('jingle', {\r\n      xmlns: 'urn:xmpp:jingle:1',\r\n      action: 'session-info',\r\n      initiator: this.initiator,\r\n      sid: this.sid\r\n    });\r\n  info.c(muted ? 'mute' : 'unmute', {xmlns: 'urn:xmpp:jingle:apps:rtp:info:1'});\r\n  info.attrs({'creator': this.me == this.initiator ? 'creator' : 'responder'});\r\n  if (content) {\r\n    info.attrs({'name': content});\r\n  }\r\n  this.connection.send(info);\r\n};\r\n\r\nJingleSession.prototype.sendRinging = function () {\r\n  var info = $iq({\r\n    to: this.peerjid,\r\n    type: 'set'\r\n  })\r\n    .c('jingle', {\r\n      xmlns: 'urn:xmpp:jingle:1',\r\n      action: 'session-info',\r\n      initiator: this.initiator,\r\n      sid: this.sid\r\n    });\r\n  info.c('ringing', {xmlns: 'urn:xmpp:jingle:apps:rtp:info:1'});\r\n  this.connection.send(info);\r\n};\r\n\r\nJingleSession.prototype.getStats = function (interval) {\r\n  var self = this;\r\n  var recv = {audio: 0, video: 0};\r\n  var lost = {audio: 0, video: 0};\r\n  var lastrecv = {audio: 0, video: 0};\r\n  var lastlost = {audio: 0, video: 0};\r\n  var loss = {audio: 0, video: 0};\r\n  var delta = {audio: 0, video: 0};\r\n  this.statsinterval = window.setInterval(function () {\r\n    if (self && self.peerconnection && self.peerconnection.getStats) {\r\n      self.peerconnection.getStats(function (stats) {\r\n        var results = stats.result();\r\n        // TODO: there are so much statistics you can get from this..\r\n        for (var i = 0; i < results.length; ++i) {\r\n          if (results[i].type == 'ssrc') {\r\n            var packetsrecv = results[i].stat('packetsReceived');\r\n            var packetslost = results[i].stat('packetsLost');\r\n            if (packetsrecv && packetslost) {\r\n              packetsrecv = parseInt(packetsrecv, 10);\r\n              packetslost = parseInt(packetslost, 10);\r\n\r\n              if (results[i].stat('googFrameRateReceived')) {\r\n                lastlost.video = lost.video;\r\n                lastrecv.video = recv.video;\r\n                recv.video = packetsrecv;\r\n                lost.video = packetslost;\r\n              } else {\r\n                lastlost.audio = lost.audio;\r\n                lastrecv.audio = recv.audio;\r\n                recv.audio = packetsrecv;\r\n                lost.audio = packetslost;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        delta.audio = recv.audio - lastrecv.audio;\r\n        delta.video = recv.video - lastrecv.video;\r\n        loss.audio = (delta.audio > 0) ? Math.ceil(100 * (lost.audio - lastlost.audio) / delta.audio) : 0;\r\n        loss.video = (delta.video > 0) ? Math.ceil(100 * (lost.video - lastlost.video) / delta.video) : 0;\r\n        $(document).trigger('packetloss.jingle', [self.sid, loss]);\r\n      });\r\n    }\r\n  }, interval || 3000);\r\n  return this.statsinterval;\r\n};\r\n\r\nfunction getScreenXml(that, action) {\r\n  var localScreen = that.connection.jingle.localScreen;\r\n  var localSDP = that.peerconnection.peerconnection.localDescription.sdp;\r\n  var msid = \"\", ssrc = \"\", cname = \"\";\r\n  if (ms.getSemantics() == \"unified-plan\") {\r\n    var medias = localSDP.split('\\r\\nm=');\r\n    medias.forEach(function(media) {\r\n      var sdpMsid = SDPUtil.find_line(media, \"a=msid:\" + localScreen.id);\r\n      if (sdpMsid) {\r\n        msid = sdpMsid.split(\":\")[1];\r\n        var ssrcCname = SDPUtil.find_line(media, \"a=ssrc:\").split(\" \");\r\n        ssrc = ssrcCname[0].split(\":\")[1];\r\n        cname = ssrcCname[1].split(\":\")[1];\r\n      }\r\n    })\r\n  } else if (ms.getSemantics() == \"plan-b\") {\r\n    msid = localScreen.id + \" \" + localScreen.getVideoTracks()[0].id;\r\n    var ssrcs = SDPUtil.find_lines(localSDP, \"a=ssrc:\");\r\n    ssrcs.forEach(function (obj) {\r\n      if (obj.indexOf(msid) > -1) {\r\n        ssrc = obj.split(\" \")[0].split(\":\")[1];\r\n        cname = SDPUtil.find_line(localSDP, \"a=ssrc:\" + ssrc + \" \" + \"cname:\").split(\":\")[2];\r\n        return;\r\n      }\r\n    });\r\n  }\r\n  if (ssrc != \"\" && cname != \"\" && msid != \"\") {\r\n    var xml = '<iq to=\"' + that.peerjid + '\" type=\"set\" xmlns=\"jabber:client\" from=\"' + that.connection.jid + '\" id=\"' + ms.getUniqueId(\"sendIQ\") + '\">' +\r\n        '<jingle xmlns=\"urn:xmpp:jingle:1\" action=\"' + action + '\" initiator=\"' + that.initiator + '\" sid=\"' + that.sid + '\">' +\r\n        '<content name=\"video\">' +\r\n        '<description xmlns=\"urn:xmpp:jingle:apps:rtp:1\" media=\"video\">';\r\n    xml += ms.createSourceParamsNode(ssrc, cname, msid);\r\n    xml += '</description>' +\r\n        '</content>' +\r\n        '</jingle>' +\r\n        '</iq>';\r\n    console.log('=====getScreenXml===' + action, xml);\r\n    return xml;\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\nJingleSession.prototype.sourceOperation = function(source, cb, action){\r\n  var that = this;\r\n  var pc = that.peerconnection.peerconnection;\r\n  if (action == \"remove\") {\r\n    var xml = getScreenXml(that, \"source-remove\");\r\n    if (xml) {\r\n      that.connection.sendIQ(ms.textToXML(xml));\r\n      pc.setRemoteDescription(pc.remoteDescription,\r\n          function () {\r\n            pc.createAnswer(\r\n                function (answer) {\r\n                  pc.setLocalDescription(answer,function () {\r\n                      cb({\r\n                          code: 200,\r\n                          msg: 'remove source from connection complete',\r\n                          errorCode: ErrorCode.no_error\r\n                      })\r\n                  },function (e) {\r\n                    console.error('setLocalDescription failed', e);\r\n                  });\r\n                },\r\n                function (e) {\r\n                  console.error('createAnswer failed', e);\r\n                }\r\n            );\r\n          },\r\n          function (e) {\r\n            console.error('setRemoteDescription failed', e);\r\n          }\r\n      );\r\n    }\r\n  } else if (action == \"add\") {\r\n    var senders = pc.getSenders();\r\n    var flag = true;\r\n    senders.forEach(function (obj) {\r\n      if (obj.track && obj.track.label == \"screen:0:0\" && obj.replaceTrack) {\r\n        obj.replaceTrack(source.getVideoTracks()[0]);\r\n        flag = false;\r\n        return;\r\n      }\r\n    });\r\n    if (flag) {\r\n      that.connection.jingle.localScreen = source;\r\n      pc.addTrack(source.getVideoTracks()[0], source);\r\n    }\r\n    pc.setRemoteDescription(pc.remoteDescription,\r\n        function () {\r\n          pc.createAnswer(\r\n              function (answer) {\r\n                pc.setLocalDescription(answer);\r\n                var xml = getScreenXml(that, \"source-add\");\r\n                if (xml) {\r\n                  that.connection.sendIQ(ms.textToXML(xml));\r\n                }\r\n                cb({\r\n                    code: 200,\r\n                    msg: 'success add screen source !',\r\n                    response: source,\r\n                    errorCode: ErrorCode.no_error\r\n                })\r\n                $(document).trigger('mains.on.screen.share.start');\r\n              },\r\n              function (e) {\r\n                console.error('createAnswer failed', e);\r\n              }\r\n          );\r\n        },\r\n        function (e) {\r\n          console.error('setRemoteDescription failed', e);\r\n        }\r\n    );\r\n  }\r\n};\r\n\r\nJingleSession.prototype.replaceMediaTrack = function (newStream, oldStream, callback, replaceType) {\r\n    replaceType = (replaceType == 'audio') ? 'audio' : 'video';\r\n    var that = this;\r\n    var shallRemoveSender = that.getSendersByType(replaceType);\r\n    if (shallRemoveSender) {\r\n        if (ms.getSemantics() == \"unified-plan\" || ms.getSemantics() == \"firefox\") {\r\n            var senders = that.peerconnection.peerconnection.getSenders();\r\n            senders.forEach(function (obj) {\r\n                if (obj.track && obj.track.id == shallRemoveSender.track.id) {\r\n                    obj.replaceTrack(newStream.getTracks()[0]);\r\n                    return;\r\n                }\r\n            });\r\n        } else if (ms.getSemantics() == \"plan-b\") {\r\n            var pc = that.peerconnection.peerconnection;\r\n            var senders = that.peerconnection.peerconnection.getSenders();\r\n            senders.forEach(function (obj) {\r\n                if (obj.track && obj.track.id == shallRemoveSender.track.id) {\r\n                    if (obj.replaceTrack) {\r\n                        obj.replaceTrack(newStream.getTracks()[0]);\r\n                    } else {\r\n                        pc.removeTrack(shallRemoveSender);\r\n                        newStream.getTracks().forEach(function (track) {\r\n                            var sender = pc.addTrack(track, newStream);\r\n                            if (sender.track.kind == replaceType) {\r\n                                if (replaceType == 'video') {\r\n                                    that.peerconnection.localVideoSender = sender;\r\n                                    that.connection.jingle.localVideo = newStream;\r\n                                }\r\n                                if (replaceType == 'audio') {\r\n                                    that.peerconnection.localAudioSender = sender;\r\n                                    that.connection.jingle.localAudio = newStream;\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        var event = new Event('negotiationneeded');\r\n                        that.peerconnection.peerconnection.dispatchEvent(event);\r\n                        that.peerconnection.setRemoteDescription(that.peerconnection.remoteDescription, function () {\r\n                            console.info('set remote description success ');\r\n                            // create Answer\r\n                            that.peerconnection.createAnswer(function (modifiedAnswer) {\r\n                                console.log('create answer success : ',modifiedAnswer);\r\n                                var newSdp = that.replaceSdpSsrc(that.peerconnection.localDescription.sdp, modifiedAnswer.sdp, replaceType);\r\n                                modifiedAnswer.sdp = newSdp;\r\n                                console.log('answer modified : ',modifiedAnswer);\r\n                                that.peerconnection.setLocalDescription(modifiedAnswer, function () {\r\n                                    callback();\r\n                                }, function (error) {\r\n                                    console.error('set local description failed', error);\r\n                                });\r\n                            }, function (error) {\r\n                                console.error('create answer failed', error);\r\n                            })\r\n                        }, function (error) {\r\n                            console.error('set setRemoteDescription failed : ', error);\r\n                        });\r\n                    }\r\n                    return;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    callback();\r\n};\r\n\r\nJingleSession.prototype.sendKeyframe = function () {\r\n  var pc = this.peerconnection.peerconnection;\r\n  console.log('sendkeyframe', pc.iceConnectionState);\r\n  if (pc.iceConnectionState != 'connected')  {\r\n    return;\r\n  }\r\n  pc.setRemoteDescription(\r\n      pc.remoteDescription,\r\n      function () {\r\n        pc.createAnswer(\r\n            function (answer) {\r\n              pc.setLocalDescription(\r\n                  answer,\r\n                  function () {\r\n                    // noop\r\n                  },\r\n                  function (err) {\r\n                    console.error('triggerKeyframe setLocalDescription failed', err);\r\n                  }\r\n              );\r\n            },\r\n            function (err) {\r\n              console.error('triggerKeyframe createAnswer failed', err);\r\n            }\r\n        );\r\n      },\r\n      function (err) {\r\n        console.error('triggerKeyframe setRemoteDescription failed', err);\r\n      }\r\n  );\r\n}\r\nexports = module.exports = JingleSession;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/strophe/plugins/strophe.jingle.session.js\n// module id = 35\n// module chunks = 0","var SDP = require('./strophe.jingle.sdp');\r\nvar ManisFunctions = require('../../manis.functions');\r\nvar simulcast = require('../../libs/simulcast');\r\nvar transform = require('sdp-transform');\r\nvar ErrorCode = require('../../errorCode');\r\n\r\n/**\r\n * Base class for ColibriFocus and JingleSession.\r\n * @param connection Strophe connection object\r\n * @param sid my session identifier(resource)\r\n * @constructor\r\n */\r\nfunction SessionBase(connection, sid) {\r\n  this.connection = connection;\r\n  this.sid = sid;\r\n\r\n  this.screenSender = null;\r\n  this.localVideoSender = null;\r\n  this.localAudioSender = null;\r\n  /**\r\n   * The indicator which determines whether the (local) video has been muted\r\n   * in response to a user command in contrast to an automatic decision made\r\n   * by the application logic.\r\n   */\r\n  this.videoMuteByUser = false;\r\n}\r\n\r\n\r\nSessionBase.prototype.modifySources = function (successCallback) {\r\n  var self = this;\r\n  if (this.peerconnection) {\r\n    var isNeedAnswer = false;\r\n    if (successCallback) {\r\n      isNeedAnswer = true;\r\n    }\r\n    this.peerconnection.modifySources(function () {\r\n      console.log(' will set local description , sid : ', self.sid);\r\n      $(document).trigger('setLocalDescription.jingle', [self.sid]);\r\n      if (successCallback) {\r\n        successCallback();\r\n      }\r\n    }, isNeedAnswer);\r\n  }\r\n\r\n};\r\n\r\nSessionBase.prototype.addSource = function (xmlJingle, fromJid) {\r\n  console.log(\"=============================addsource=======\", xmlJingle[0].outerHTML);\r\n  var elem = xmlJingle.find(\">content\");\r\n  console.log('handle source add content : ', elem, fromJid);\r\n\r\n  var self = this;\r\n  // FIXME: dirty waiting\r\n  if (!self.peerconnection.localDescription) {\r\n    console.warn(\"addSource - localDescription not ready yet\")\r\n    setTimeout(function () {\r\n        self.addSource(elem, fromJid);\r\n      },\r\n      200\r\n    );\r\n    return;\r\n  }\r\n\r\n  var videoNode = $(elem).find('description[media=\"video\"]') || null;\r\n  if(videoNode.length){\r\n    var videoSource = videoNode.find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')|| null;\r\n    if(videoSource){\r\n      var videoSSRC = videoSource.attr('ssrc') || null;\r\n      var jid = videoSource.attr('jid') || null;\r\n      var isScreen = videoSource.attr('screen') || false;\r\n      if(videoSSRC){\r\n        console.log('handle video source added : ', videoSSRC);\r\n        var removeSSRC = parseInt(videoSSRC);\r\n        ssrc2jid[removeSSRC] = jid;\r\n        ssrc2resolution[removeSSRC] = jid;\r\n        ssrc2videoType[removeSSRC] = jid;\r\n        if(isScreen.toString() == 'true'){\r\n          window.screenSSRC = videoSSRC;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  var audioNode = $(elem).find('description[media=\"audio\"]') || null;\r\n  if(audioNode.length){\r\n    var audioSource = audioNode.find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')|| null;\r\n    if(audioSource){\r\n      var audioSSRC = audioSource.attr('ssrc') || null;\r\n      var jid = videoSource.attr('jid') || null;\r\n      if(audioSSRC){\r\n        console.log('handle audio source added : ', audioSSRC);\r\n        var removeSSRC = parseInt(audioSSRC);\r\n        ssrc2jid[removeSSRC] = jid ;\r\n        ssrc2resolution[removeSSRC] = jid;\r\n        ssrc2videoType[removeSSRC] = jid;\r\n      }\r\n    }\r\n  }\r\n\r\n  self.peerconnection.addSource(elem);\r\n\r\n  if (navigator.mozGetUserMedia){\r\n    self.modifySources(function (result) {\r\n      console.log('will create answer', result);\r\n    });\r\n  }else {\r\n    self.modifySources();\r\n  }\r\n};\r\n\r\nSessionBase.prototype.removeSource = function (elem, fromJid) {\r\n\r\n  console.log('handle source remove content : ', elem, fromJid);\r\n  var self = this;\r\n  // FIXME: dirty waiting\r\n  if (!self.peerconnection.localDescription) {\r\n    console.warn(\"removeSource - localDescription not ready yet\")\r\n    setTimeout(function () {\r\n        self.removeSource(elem, fromJid);\r\n      },\r\n      200\r\n    );\r\n    return;\r\n  }\r\n  self.peerconnection.removeSource(elem);\r\n\r\n  self.modifySources();\r\n\r\n\r\n  var videoNode = $(elem).find('description[media=\"video\"]') || null;\r\n  if(videoNode.length){\r\n    var videoSource = videoNode.find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')|| null;\r\n    if(videoSource){\r\n      var videoSSRC = videoSource.attr('ssrc') || null;\r\n      if(videoSSRC){\r\n        console.log('handle video source remove : ', videoSSRC);\r\n        var removeSSRC = parseInt(videoSSRC);\r\n        delete ssrc2jid[removeSSRC];\r\n        delete ssrc2resolution[removeSSRC];\r\n        delete ssrc2videoType[removeSSRC];\r\n        $(document).trigger('mains.on.stream.removed', ['video', videoSSRC, false]);\r\n      }\r\n    }\r\n  }\r\n\r\n  var audioNode = $(elem).find('description[media=\"audio\"]') || null;\r\n  if(audioNode.length){\r\n    var audioSource = audioNode.find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]')|| null;\r\n    if(audioSource){\r\n      var audioSSRC = audioSource.attr('ssrc') || null;\r\n      if(audioSSRC){\r\n        console.log('handle audio source remove : ', audioSSRC);\r\n        var removeSSRC = parseInt(audioSSRC);\r\n        delete ssrc2jid[removeSSRC];\r\n        delete ssrc2resolution[removeSSRC];\r\n        delete ssrc2videoType[removeSSRC];\r\n        $(document).trigger('mains.on.stream.removed', ['audio', audioSSRC, false]);\r\n      }\r\n    }\r\n  }\r\n\r\n};\r\n\r\nSessionBase.prototype.getSendersByType = function (replaceType) {\r\n  var that = this;\r\n  var shallRemoveSender = (replaceType == 'video') ? that.peerconnection.localVideoSender : that.peerconnection.localAudioSender;\r\n  if(!shallRemoveSender){\r\n    var currentSenders = that.peerconnection.peerconnection.getSenders();\r\n    for(var i = 0; i < currentSenders.length; i++){\r\n      var sender = currentSenders[i];\r\n      if(sender.track.kind == replaceType && !shallRemoveSender){\r\n        shallRemoveSender = sender;\r\n      }\r\n    }\r\n  }\r\n  return shallRemoveSender;\r\n};\r\n\r\nSessionBase.prototype.peerconnectionNegotiate = function (callback) {\r\n  var pc = this.peerconnection.peerconnection;\r\n  pc.setRemoteDescription(pc.remoteDescription, function () {\r\n    console.info('set remote description success ');\r\n    pc.createAnswer(function (modifiedAnswer) {\r\n      console.log('create answer success : ',modifiedAnswer);\r\n      pc.setLocalDescription(modifiedAnswer, function () {\r\n        callback();\r\n      }, function (err) {\r\n        console.error('set local description failed', err);\r\n      });\r\n    }, function (err) {\r\n      console.error('create answer failed', err);\r\n    })\r\n  }, function (err) {\r\n    console.error('====peerconnectionNegotiate==set remote description failed : ', err);\r\n  });\r\n};\r\n\r\n\r\nSessionBase.prototype.replaceSdpSsrc = function (oldSdp, newSdp, replaceType) {\r\n  console.log('oldSdp : ', '\\r\\n', transform.parse(oldSdp), '\\r\\n', replaceType);\r\n  console.log('newSdp : ', '\\r\\n', transform.parse(newSdp), '\\r\\n', replaceType);\r\n\r\n  var oldSdpObject = transform.parse(oldSdp);\r\n  // record old sdp ssrcs for compare adn replace in new sdp\r\n  var oldSdpSSRCs = [];\r\n  if(oldSdpObject.media && oldSdpObject.media.length){\r\n    oldSdpObject.media.forEach(function (media) {\r\n      if(media.type == replaceType){\r\n        oldSdpSSRCs = media.ssrcs.map(function(ssrcLine){\r\n          return ssrcLine.id;\r\n        })\r\n      }\r\n    })\r\n  }\r\n  console.log('old sdp ', replaceType, ' ssrcs : ', oldSdpSSRCs);\r\n\r\n  var newSdpObject = transform.parse(newSdp);\r\n\r\n  var newSdpSSRCs = [];\r\n  if(newSdpObject.media && newSdpObject.media.length){\r\n    newSdpObject.media.forEach(function (media) {\r\n      if(media.type == replaceType){\r\n        newSdpSSRCs = media.ssrcs.map(function(ssrcLine){\r\n          return ssrcLine.id;\r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n  console.log('new sdp ', replaceType, ' ssrcs : ', newSdpSSRCs);\r\n\r\n  var replaceObject = {};\r\n\r\n  for(var i = 0; i < newSdpSSRCs.length; i++){\r\n    var newSSRC = newSdpSSRCs[i];\r\n    for(var j = 0; j < oldSdpSSRCs.length; j++){\r\n      var oldSSRC = oldSdpSSRCs[j];\r\n      if(newSdpSSRCs.indexOf(oldSSRC) == -1 && oldSdpSSRCs.indexOf(newSSRC) == -1){\r\n        replaceObject.from = newSSRC;\r\n        replaceObject.to = oldSSRC;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  console.log('sdp replace to : ', replaceObject);\r\n\r\n\r\n  if(newSdpObject.media && newSdpObject.media.length){\r\n    newSdpObject.media.forEach(function (media) {\r\n      if(media.type == replaceType){\r\n        var replacedSSRCs = media.ssrcs.map(function(ssrcLine){\r\n          if(ssrcLine.id == replaceObject.from){\r\n            ssrcLine.id = replaceObject.to;\r\n          }\r\n          return ssrcLine;\r\n        });\r\n        media.ssrcs = replacedSSRCs;\r\n      }\r\n    });\r\n  }\r\n\r\n  console.log('sdp replaced : ', newSdpObject);\r\n\r\n  return transform.write(newSdpObject);\r\n\r\n};\r\n\r\n\r\n/**\r\n * Switches video streams.\r\n * @param new_stream new stream that will be used as video of this session.\r\n * @param oldStream old video stream of this session.\r\n * @param success_callback callback executed after successful stream switch.\r\n */\r\nSessionBase.prototype.switchStreams = function (new_stream, oldStream, success_callback) {\r\n  console.log('old stream : ', oldStream, ' new stream : ', new_stream);\r\n  var self = this;\r\n\r\n  // Stop the stream to trigger onended event for old stream\r\n  if (oldStream.getAudioTracks().length) {\r\n    oldStream.getAudioTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n  }\r\n\r\n  if (oldStream.getVideoTracks().length) {\r\n    oldStream.getVideoTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n  }\r\n\r\n  // Remember SDP to figure out added/removed SSRCs\r\n  var oldSdp = null;\r\n  if (self.peerconnection) {\r\n    if (self.peerconnection.localDescription) {\r\n      oldSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n    }\r\n    self.peerconnection.removeStream(oldStream, true);\r\n    self.peerconnection.addStream(new_stream);\r\n  }\r\n\r\n  self.connection.jingle.localVideo = new_stream;\r\n\r\n  self.connection.jingle.localStreams = [];\r\n\r\n  //in firefox we have only one stream object\r\n  if (self.connection.jingle.localAudio != self.connection.jingle.localVideo)\r\n    self.connection.jingle.localStreams.push(self.connection.jingle.localAudio);\r\n  self.connection.jingle.localStreams.push(self.connection.jingle.localVideo);\r\n\r\n  // Conference is not active\r\n  if (!oldSdp || !self.peerconnection) {\r\n    success_callback();\r\n    return;\r\n  }\r\n\r\n  self.peerconnection.switchstreams = true;\r\n  self.modifySources(function () {\r\n    console.log('modify sources done');\r\n\r\n    success_callback();\r\n\r\n    var newSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n    console.log(\"SDPs\", oldSdp, newSdp);\r\n    self.notifyMySSRCUpdate(oldSdp, newSdp);\r\n  });\r\n\r\n};\r\n\r\nSessionBase.prototype.removeScreen = function (oldStream, success_callback) {\r\n\r\n  var self = this;\r\n  // Stop the stream to trigger onended event for old stream\r\n\r\n  if (oldStream.getAudioTracks().length) {\r\n    oldStream.getAudioTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n  }\r\n\r\n  if (oldStream.getVideoTracks().length) {\r\n    oldStream.getVideoTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n  }\r\n\r\n  // Remember SDP to figure out added/removed SSRCs\r\n  var oldSdp = null;\r\n  if (self.peerconnection) {\r\n    if (self.peerconnection.localDescription) {\r\n      oldSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n    }\r\n    console.log(' peerconnection ', self.peerconnection, self.peerconnection.peerconnection.removeTrack);\r\n    if(self.peerconnection.peerconnection.removeTrack != undefined){\r\n      self.peerconnection.peerconnection.removeTrack(self.screenSender);\r\n      console.log(' remove screen track', self.screenSender);\r\n    }else {\r\n      self.peerconnection.removeStream(oldStream, true);\r\n    }\r\n  }\r\n  //\r\n  //\r\n  self.connection.jingle.localStreams = [];\r\n\r\n  //in firefox we have only one stream object\r\n  if (self.connection.jingle.localAudio != self.connection.jingle.localVideo)\r\n    self.connection.jingle.localStreams.push(self.connection.jingle.localAudio);\r\n  self.connection.jingle.localStreams.push(self.connection.jingle.localVideo);\r\n\r\n  // Conference is not active\r\n  if (!oldSdp || !self.peerconnection) {\r\n    connection.jingle.localScreen = null;\r\n    success_callback({\r\n      code: 200,\r\n      msg: 'remove source from connection complete',\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n    return;\r\n  }\r\n\r\n  self.peerconnection.switchstreams = true;\r\n  self.modifySources(function () {\r\n    console.log('modify sources done');\r\n    connection.jingle.localScreen = null;\r\n    success_callback({\r\n      code: 200,\r\n      msg: 'remove source from connection complete',\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n\r\n    var newSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n    console.log(\"SDPs\", oldSdp, newSdp);\r\n    self.notifyMySSRCUpdate(oldSdp, newSdp);\r\n  });\r\n};\r\n\r\n\r\nSessionBase.prototype.addScreen = function (screenStream, successCallback) {\r\n  var self = this;\r\n\r\n  var oldSdp = null;\r\n  if (self.peerconnection) {\r\n    if (self.peerconnection.localDescription) {\r\n      oldSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n    }\r\n    console.log(' peerconnection ', self.peerconnection, self.peerconnection.peerconnection.addTrack);\r\n    if(self.peerconnection.peerconnection.addTrack != undefined){\r\n      var track = screenStream.getVideoTracks()[0];\r\n      var screenSender = self.peerconnection.peerconnection.addTrack(track, screenStream);\r\n      self.screenSender = screenSender;\r\n      console.log(' add screen track', screenSender);\r\n    }else {\r\n      self.peerconnection.addStream(screenStream);\r\n    }\r\n  }\r\n  self.connection.jingle.localScreen = screenStream;\r\n\r\n  self.connection.jingle.localStreams = [];\r\n\r\n  //in firefox we have only one stream object\r\n  if (self.connection.jingle.localAudio != self.connection.jingle.localScreen)\r\n    self.connection.jingle.localStreams.push(self.connection.jingle.localScreen);\r\n  self.connection.jingle.localStreams.push(self.connection.jingle.localScreen);\r\n\r\n  if (!oldSdp || !self.peerconnection) {\r\n    successCallback({\r\n      code: 402,\r\n      msg: 'Conference is not active',\r\n      errorCode: ErrorCode.conference_room_wait_others\r\n    });\r\n    return;\r\n  }\r\n  self.peerconnection.switchstreams = true;\r\n  self.modifySources(function () {\r\n    console.log('modify sources done');\r\n\r\n    successCallback({\r\n      code: 200,\r\n      msg: 'success add screen source !',\r\n      response: screenStream,\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n\r\n    var newSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n    console.log(\"SDPs\", oldSdp, newSdp);\r\n    self.notifyMySSRCUpdate(oldSdp, newSdp);\r\n    $(document).trigger('mains.on.screen.share.start');\r\n  });\r\n};\r\n\r\nSessionBase.prototype.removeLocalStream = function (removeStreams, success_callback) {\r\n\r\n  var self = this;\r\n  var senders = [];\r\n  // Stop the stream to trigger onended event for old stream\r\n  if(removeStreams.length){\r\n    for (var i = 0; i < removeStreams.length; i++) {\r\n      var stream = removeStreams[i];\r\n      if (stream.getAudioTracks().length) {\r\n        stream.getAudioTracks().forEach(function (track) {\r\n          track.stop();\r\n        });\r\n        senders.push(self.localAudioSender);\r\n      }\r\n      if (stream.getVideoTracks().length) {\r\n        stream.getVideoTracks().forEach(function (track) {\r\n          track.stop();\r\n        });\r\n        senders.push(self.localVideoSender);\r\n      }\r\n    }\r\n  }\r\n  // console.warn('Active sends: ', senders, ' local audio sender:', self.localAudioSender, ' local video sender: ', self.localVideoSender);\r\n  // Remember SDP to figure out added/removed SSRCs\r\n  var oldSdp = null;\r\n  if (self.peerconnection) {\r\n    if (self.peerconnection.localDescription) {\r\n      oldSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n    }\r\n    console.log(' peerconnection ', self.peerconnection, self.peerconnection.peerconnection.removeTrack);\r\n    if(self.peerconnection.peerconnection.removeTrack != undefined){\r\n      if(senders){\r\n        for (var j = 0; j < senders.length; j++) {\r\n          var sender = senders[j];\r\n          self.peerconnection.peerconnection.removeTrack(sender);\r\n          console.log(' remove screen track', sender);\r\n        }\r\n        self.localVideoSender = null;\r\n        self.localAudioSender = null;\r\n      }\r\n    }else {\r\n      for (var k = 0; k < removeStreams; k++) {\r\n        var stream = removeStreams[k];\r\n        self.peerconnection.removeStream(stream, true);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Conference is not active\r\n  if (!oldSdp || !self.peerconnection) {\r\n    connection.jingle.localScreen = null;\r\n    success_callback({\r\n      code: 200,\r\n      msg: 'remove source from connection complete',\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n    return;\r\n  }\r\n\r\n  self.peerconnection.switchstreams = true;\r\n  self.modifySources(function () {\r\n    console.log('modify sources done');\r\n    connection.jingle.localScreen = null;\r\n    success_callback({\r\n      code: 200,\r\n      msg: 'remove source from connection complete',\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n\r\n    var newSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n    console.log(\"SDPs\", oldSdp, newSdp);\r\n    self.notifyMySSRCUpdate(oldSdp, newSdp);\r\n  });\r\n};\r\n\r\nSessionBase.prototype.addLocalStream = function (localMediaStream, successCallback) {\r\n  var self = this;\r\n\r\n  var oldSdp = null;\r\n  if (self.peerconnection) {\r\n    if (self.peerconnection.localDescription) {\r\n      oldSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n    }\r\n    console.log(' peerconnection ', self.peerconnection, self.peerconnection.peerconnection.addTrack);\r\n    if(self.peerconnection.peerconnection.addTrack != undefined){\r\n      // var track = screenStream.getVideoTracks()[0];\r\n      // var screenSender = self.peerconnection.peerconnection.addTrack(track, screenStream);\r\n      // self.screenSender = screenSender;\r\n      // console.log(' add screen track', screenSender);\r\n\r\n      if (window.webkitMediaStream) {\r\n        var audioStream = new webkitMediaStream();\r\n        var videoStream = new webkitMediaStream();\r\n        var audioTracks = localMediaStream.getAudioTracks();\r\n        var videoTracks = localMediaStream.getVideoTracks();\r\n        for (var i = 0; i < audioTracks.length; i++) {\r\n          audioStream.addTrack(audioTracks[i]);\r\n        }\r\n        for (i = 0; i < videoTracks.length; i++) {\r\n          videoStream.addTrack(videoTracks[i]);\r\n        }\r\n        connection.jingle.localAudio = audioStream;\r\n        connection.jingle.localVideo = videoStream;\r\n      } else {\r\n        connection.jingle.localAudio = localMediaStream;\r\n        connection.jingle.localVideo = localMediaStream;\r\n      }\r\n      // @Todo add track\r\n      localMediaStream.getTracks().forEach(function (track) {\r\n        var sender = self.peerconnection.peerconnection.addTrack(\r\n          track,\r\n          localMediaStream\r\n        );\r\n        if (sender.track.kind == 'video' && !self.localVideoSender) {\r\n          self.localVideoSender = sender;\r\n        }\r\n        if (sender.track.kind == 'audio' && !self.localAudioSender) {\r\n          self.localAudioSender = sender;\r\n        }\r\n      });\r\n    }else {\r\n      console.warn('add track is undefined, switch to add stream');\r\n      self.peerconnection.addStream(localMediaStream);\r\n    }\r\n  }\r\n\r\n  self.connection.jingle.localStreams = [];\r\n\r\n  self.connection.jingle.localStreams.push(self.connection.jingle.localAudio);\r\n  self.connection.jingle.localStreams.push(self.connection.jingle.localVideo);\r\n\r\n  if (!oldSdp || !self.peerconnection) {\r\n    successCallback({\r\n      code: 402,\r\n      msg: 'Conference is not active',\r\n      errorCode: ErrorCode.conference_room_wait_others\r\n    });\r\n    return;\r\n  }\r\n  self.peerconnection.switchstreams = true;\r\n  self.modifySources(function () {\r\n    console.log('modify sources done');\r\n\r\n    successCallback({\r\n      code: 200,\r\n      msg: 'success add screen source !',\r\n      response: localMediaStream,\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n\r\n    var newSdp = new SDP(self.peerconnection.localDescription.sdp);\r\n    console.log(\"SDPs\", oldSdp, newSdp);\r\n    self.notifyMySSRCUpdate(oldSdp, newSdp);\r\n    // $(document).trigger('mains.on.screen.share.start');\r\n  });\r\n};\r\n\r\n/**\r\n * Figures out added/removed ssrcs and send update IQs.\r\n * @param old_sdp SDP object for old description.\r\n * @param new_sdp SDP object for new description.\r\n */\r\nSessionBase.prototype.notifyMySSRCUpdate = function (old_sdp, new_sdp) {\r\n\r\n  var old_media = old_sdp.getMediaSsrcMap();\r\n  var new_media = new_sdp.getMediaSsrcMap();\r\n  //console.log(\"old/new medias: \", old_media, new_media);\r\n\r\n  var toAdd = old_sdp.getNewMedia(new_sdp);\r\n  var toRemove = new_sdp.getNewMedia(old_sdp);\r\n  //console.log(\"to add\", toAdd);\r\n  //console.log(\"to remove\", toRemove);\r\n  if (Object.keys(toRemove).length > 0) {\r\n    this.sendSSRCUpdate(toRemove, null, false);\r\n  }\r\n  if (Object.keys(toAdd).length > 0) {\r\n    this.sendSSRCUpdate(toAdd, null, true);\r\n  }\r\n  if (Object.keys(toAdd).length > 0 && Object.keys(toRemove).length <= 0) {\r\n    // 增加了新流\r\n    console.log(\"to add\", toAdd);\r\n    var toAddSSRC = null;\r\n    Object.keys(toAdd).forEach(function (index) {\r\n      var element = toAdd[index];\r\n      if (element.ssrcs) {\r\n        Object.keys(element.ssrcs).forEach(function (indexTow) {\r\n          toAddSSRC = indexTow;\r\n        })\r\n      }\r\n    });\r\n    // if (toAddSSRC) {\r\n    //   // start share second stream\r\n    //   setTimeout(function () {\r\n    //     ManisFunctions.sendChangeMainBlockSourceMsg(Strophe.getResourceFromJid(connection.jid), toAddSSRC, function (result) {\r\n    //       console.log('notice set new stream to main complete');\r\n    //     }, true)\r\n    //   }, 1000);\r\n    // }\r\n  }\r\n  if (Object.keys(toAdd).length <= 0 && Object.keys(toRemove).length > 0) {\r\n    // 移除了流\r\n    console.log(\"to remove\", toRemove);\r\n    var toRemoveSSRC = null;\r\n    Object.keys(toRemove).forEach(function (index) {\r\n      var element = toRemove[index];\r\n      if (element.ssrcs) {\r\n        Object.keys(element.ssrcs).forEach(function (indexTow) {\r\n          toRemoveSSRC = indexTow;\r\n        })\r\n      }\r\n    });\r\n    if (toRemoveSSRC) {\r\n      // stop share second stream\r\n      ManisFunctions.sendHardRemoveStreamMsg(Strophe.getResourceFromJid(connection.jid), toRemoveSSRC, function (result) {\r\n        console.log('notice hard remove stream complete', result);\r\n      })\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Empty method that does nothing by default. It should send SSRC update IQs to session participants.\r\n * @param sdpMediaSsrcs array of\r\n * @param fromJid\r\n * @param isAdd\r\n */\r\nSessionBase.prototype.sendSSRCUpdate = function (sdpMediaSsrcs, fromJid, isAdd) {\r\n  //FIXME: put default implementation here(maybe from JingleSession?)\r\n}\r\n\r\n/**\r\n * Sends SSRC update IQ.\r\n * @param sdpMediaSsrcs SSRCs map obtained from SDP.getNewMedia. Cntains SSRCs to add/remove.\r\n * @param sid session identifier that will be put into the IQ.\r\n * @param initiator initiator identifier.\r\n * @param toJid destination Jid\r\n * @param isAdd indicates if this is remove or add operation.\r\n */\r\nSessionBase.prototype.sendSSRCUpdateIq = function (sdpMediaSsrcs, sid, initiator, toJid, isAdd) {\r\n\r\n  var self = this;\r\n  var modify = $iq({to: toJid, type: 'set'})\r\n    .c('jingle', {\r\n        xmlns: 'urn:xmpp:jingle:1',\r\n        action: isAdd ? 'source-add' : 'source-remove',\r\n        initiator: initiator,\r\n        sid: sid\r\n      }\r\n    );\r\n  // FIXME: only announce video ssrcs since we mix audio and dont need\r\n  //      the audio ssrcs therefore\r\n  var modified = false;\r\n  Object.keys(sdpMediaSsrcs).forEach(function (channelNum) {\r\n    modified = true;\r\n    var channel = sdpMediaSsrcs[channelNum];\r\n    modify.c('content', {name: channel.mediaType});\r\n\r\n    modify.c('description', {xmlns: 'urn:xmpp:jingle:apps:rtp:1', media: channel.mediaType});\r\n    // FIXME: not completly sure this operates on blocks and / or handles different ssrcs correctly\r\n    // generate sources from lines\r\n    Object.keys(channel.ssrcs).forEach(function (ssrcNum) {\r\n      var mediaSsrc = channel.ssrcs[ssrcNum];\r\n      modify.c('source', {xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'});\r\n      modify.attrs({ssrc: mediaSsrc.ssrc});\r\n      // iterate over ssrc lines\r\n      mediaSsrc.lines.forEach(function (line) {\r\n        var idx = line.indexOf(' ');\r\n        var kv = line.substr(idx + 1);\r\n        modify.c('parameter');\r\n        if (kv.indexOf(':') == -1) {\r\n          modify.attrs({name: kv});\r\n        } else {\r\n          modify.attrs({name: kv.split(':', 2)[0]});\r\n          modify.attrs({value: kv.split(':', 2)[1]});\r\n        }\r\n        modify.up(); // end of parameter\r\n      });\r\n      modify.up(); // end of source\r\n    });\r\n\r\n    // generate source groups from lines\r\n    channel.ssrcGroups.forEach(function (ssrcGroup) {\r\n      if (ssrcGroup.ssrcs.length != 0) {\r\n\r\n        modify.c('ssrc-group', {\r\n          semantics: ssrcGroup.semantics,\r\n          xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'\r\n        });\r\n\r\n        ssrcGroup.ssrcs.forEach(function (ssrc) {\r\n          modify.c('source', {ssrc: ssrc})\r\n            .up(); // end of source\r\n        });\r\n        modify.up(); // end of ssrc-group\r\n      }\r\n    });\r\n\r\n    modify.up(); // end of description\r\n    modify.up(); // end of content\r\n  });\r\n  if (modified) {\r\n    self.connection.sendIQ(modify,\r\n      function (res) {\r\n        console.info('got modify result', res);\r\n      },\r\n      function (err) {\r\n        console.error('got modify error', err);\r\n      }\r\n    );\r\n  } else {\r\n    console.log('modification not necessary');\r\n  }\r\n};\r\n\r\n/**\r\n * Determines whether the (local) video is mute i.e. all video tracks are\r\n * disabled.\r\n *\r\n * @return <tt>true</tt> if the (local) video is mute i.e. all video tracks are\r\n * disabled; otherwise, <tt>false</tt>\r\n */\r\nSessionBase.prototype.isVideoMute = function () {\r\n  var tracks = connection.jingle.localVideo.getVideoTracks();\r\n  var mute = true;\r\n\r\n  for (var i = 0; i < tracks.length; ++i) {\r\n    if (tracks[i].enabled) {\r\n      mute = false;\r\n      break;\r\n    }\r\n  }\r\n  return mute;\r\n};\r\n\r\n/**\r\n * Mutes/unmutes the (local) video i.e. enables/disables all video tracks.\r\n *\r\n * @param mute <tt>true</tt> to mute the (local) video i.e. to disable all video\r\n * tracks; otherwise, <tt>false</tt>\r\n * @param callback a function to be invoked with <tt>mute</tt> after all video\r\n * tracks have been enabled/disabled. The function may, optionally, return\r\n * another function which is to be invoked after the whole mute/unmute operation\r\n * has completed successfully.\r\n * @param options an object which specifies optional arguments such as the\r\n * <tt>boolean</tt> key <tt>byUser</tt> with default value <tt>true</tt> which\r\n * specifies whether the method was initiated in response to a user command (in\r\n * contrast to an automatic decision made by the application logic)\r\n */\r\nSessionBase.prototype.setVideoMute = function (mute, callback, options) {\r\n  var byUser;\r\n\r\n  if (options) {\r\n    byUser = options.byUser;\r\n    if (typeof byUser === 'undefined') {\r\n      byUser = true;\r\n    }\r\n  } else {\r\n    byUser = true;\r\n  }\r\n  // The user's command to mute the (local) video takes precedence over any\r\n  // automatic decision made by the application logic.\r\n  if (byUser) {\r\n    this.videoMuteByUser = mute;\r\n  } else if (this.videoMuteByUser) {\r\n    return;\r\n  }\r\n  var tracks = connection.jingle.localVideo.getVideoTracks();\r\n\r\n  for (var i = 0; i < tracks.length; ++i) {\r\n    tracks[i].enabled = !mute;\r\n  }\r\n\r\n  if (this.peerconnection) {\r\n    this.peerconnection.hardMuteVideo(mute);\r\n  }\r\n\r\n  console.log('switch video mute complete and will modify source');\r\n  // 屏幕分享中,关闭视频只关闭本地视频流.不需重新协商.屏幕分享关闭,重开视频流需要重新协商\r\n  if(window.isUsingScreenStream == true){\r\n    this.modifySources(callback(mute));\r\n  }else {\r\n    this.modifySources(function () {\r\n      callback(mute);\r\n    });\r\n  }\r\n};\r\n\r\n// SDP-based mute by going recvonly/sendrecv\r\n// FIXME: should probably black out the screen as well\r\nSessionBase.prototype.toggleVideoMute = function (callback) {\r\n  setVideoMute(isVideoMute(), callback);\r\n};\r\n\r\nexports = module.exports = SessionBase;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/strophe/plugins/strophe.jingle.sessionbase.js\n// module id = 36\n// module chunks = 0","var SDPUtil = require('./strophe.jingle.sdp.util');\r\n\r\n/**\r\n * Class holds a=ssrc lines and media type a=mid\r\n * @param ssrc synchronization source identifier number(a=ssrc lines from SDP)\r\n * @param type media type eg. \"audio\" or \"video\"(a=mid frm SDP)\r\n * @constructor\r\n */\r\nfunction ChannelSsrc(ssrc, type) {\r\n  this.ssrc = ssrc;\r\n  this.type = type;\r\n  this.lines = [];\r\n}\r\n\r\n/**\r\n * Class holds a=ssrc-group: lines\r\n * @param semantics\r\n * @param ssrcs\r\n * @constructor\r\n */\r\nfunction ChannelSsrcGroup(semantics, ssrcs, line) {\r\n  this.semantics = semantics;\r\n  this.ssrcs = ssrcs;\r\n}\r\n\r\n/**\r\n * Helper class represents media channel. Is a container for ChannelSsrc, holds channel idx and media type.\r\n * @param channelNumber channel idx in SDP media array.\r\n * @param mediaType media type(a=mid)\r\n * @constructor\r\n */\r\nfunction MediaChannel(channelNumber, mediaType) {\r\n  /**\r\n   * SDP channel number\r\n   * @type {*}\r\n   */\r\n  this.chNumber = channelNumber;\r\n  /**\r\n   * Channel media type(a=mid)\r\n   * @type {*}\r\n   */\r\n  this.mediaType = mediaType;\r\n  /**\r\n   * The maps of ssrc numbers to ChannelSsrc objects.\r\n   */\r\n  this.ssrcs = {};\r\n\r\n  /**\r\n   * The array of ChannelSsrcGroup objects.\r\n   * @type {Array}\r\n   */\r\n  this.ssrcGroups = [];\r\n}\r\n\r\n\r\n/* jshint -W117 */\r\n// SDP STUFF\r\nfunction SDP(sdp) {\r\n  this.media = sdp.split('\\r\\nm=');\r\n  for (var i = 1; i < this.media.length; i++) {\r\n    this.media[i] = 'm=' + this.media[i];\r\n    if (i != this.media.length - 1) {\r\n      this.media[i] += '\\r\\n';\r\n    }\r\n  }\r\n  this.session = this.media.shift() + '\\r\\n';\r\n  this.raw = this.session + this.media.join('');\r\n}\r\n/**\r\n * Returns map of MediaChannel mapped per channel idx.\r\n */\r\nSDP.prototype.getMediaSsrcMap = function () {\r\n  var self = this;\r\n  var media_ssrcs = {};\r\n  for (channelNum = 0; channelNum < self.media.length; channelNum++) {\r\n    modified = true;\r\n    tmp = SDPUtil.find_lines(self.media[channelNum], 'a=ssrc:');\r\n    var type = SDPUtil.parse_mid(SDPUtil.find_line(self.media[channelNum], 'a=mid:'));\r\n    var channel = new MediaChannel(channelNum, type);\r\n    media_ssrcs[channelNum] = channel;\r\n    tmp.forEach(function (line) {\r\n      var linessrc = line.substring(7).split(' ')[0];\r\n      // allocate new ChannelSsrc\r\n      if (!channel.ssrcs[linessrc]) {\r\n        channel.ssrcs[linessrc] = new ChannelSsrc(linessrc, type);\r\n      }\r\n      channel.ssrcs[linessrc].lines.push(line);\r\n    });\r\n    tmp = SDPUtil.find_lines(self.media[channelNum], 'a=ssrc-group:');\r\n    tmp.forEach(function (line) {\r\n      var semantics = line.substr(0, idx).substr(13);\r\n      var ssrcs = line.substr(14 + semantics.length).split(' ');\r\n      if (ssrcs.length != 0) {\r\n        var ssrcGroup = new ChannelSsrcGroup(semantics, ssrcs);\r\n        channel.ssrcGroups.push(ssrcGroup);\r\n      }\r\n    });\r\n  }\r\n  return media_ssrcs;\r\n};\r\n/**\r\n * Returns <tt>true</tt> if this SDP contains given SSRC.\r\n * @param ssrc the ssrc to check.\r\n * @returns {boolean} <tt>true</tt> if this SDP contains given SSRC.\r\n */\r\nSDP.prototype.containsSSRC = function (ssrc) {\r\n  var channels = this.getMediaSsrcMap();\r\n  var contains = false;\r\n  Object.keys(channels).forEach(function (chNumber) {\r\n    var channel = channels[chNumber];\r\n    //console.log(\"Check\", channel, ssrc);\r\n    if (Object.keys(channel.ssrcs).indexOf(ssrc) != -1) {\r\n      contains = true;\r\n    }\r\n  });\r\n  return contains;\r\n};\r\n\r\n/**\r\n * Returns map of MediaChannel that contains only media not contained in <tt>otherSdp</tt>. Mapped by channel idx.\r\n * @param otherSdp the other SDP to check ssrc with.\r\n */\r\nSDP.prototype.getNewMedia = function (otherSdp) {\r\n\r\n  // this could be useful in Array.prototype.\r\n  function arrayEquals(array) {\r\n    // if the other array is a falsy value, return\r\n    if (!array)\r\n      return false;\r\n\r\n    // compare lengths - can save a lot of time\r\n    if (this.length != array.length)\r\n      return false;\r\n\r\n    for (var i = 0, l = this.length; i < l; i++) {\r\n      // Check if we have nested arrays\r\n      if (this[i] instanceof Array && array[i] instanceof Array) {\r\n        // recurse into the nested arrays\r\n        if (!this[i].equals(array[i]))\r\n          return false;\r\n      }\r\n      else if (this[i] != array[i]) {\r\n        // Warning - two different object instances will never be equal: {x:20} != {x:20}\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  var myMedia = this.getMediaSsrcMap();\r\n  var othersMedia = otherSdp.getMediaSsrcMap();\r\n  var newMedia = {};\r\n  Object.keys(othersMedia).forEach(function (channelNum) {\r\n    var myChannel = myMedia[channelNum];\r\n    var othersChannel = othersMedia[channelNum];\r\n    if (!myChannel && othersChannel) {\r\n      // Add whole channel\r\n      newMedia[channelNum] = othersChannel;\r\n      return;\r\n    }\r\n    // Look for new ssrcs accross the channel\r\n    Object.keys(othersChannel.ssrcs).forEach(function (ssrc) {\r\n      if (Object.keys(myChannel.ssrcs).indexOf(ssrc) === -1) {\r\n        // Allocate channel if we've found ssrc that doesn't exist in our channel\r\n        if (!newMedia[channelNum]) {\r\n          newMedia[channelNum] = new MediaChannel(othersChannel.chNumber, othersChannel.mediaType);\r\n        }\r\n        newMedia[channelNum].ssrcs[ssrc] = othersChannel.ssrcs[ssrc];\r\n      }\r\n    });\r\n\r\n    // Look for new ssrc groups across the channels\r\n    othersChannel.ssrcGroups.forEach(function (otherSsrcGroup) {\r\n\r\n      // try to match the other ssrc-group with an ssrc-group of ours\r\n      var matched = false;\r\n      for (var i = 0; i < myChannel.ssrcGroups.length; i++) {\r\n        var mySsrcGroup = myChannel.ssrcGroups[i];\r\n        if (otherSsrcGroup.semantics == mySsrcGroup.semantics\r\n          && arrayEquals.apply(otherSsrcGroup.ssrcs, [mySsrcGroup.ssrcs])) {\r\n\r\n          matched = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!matched) {\r\n        // Allocate channel if we've found an ssrc-group that doesn't\r\n        // exist in our channel\r\n\r\n        if (!newMedia[channelNum]) {\r\n          newMedia[channelNum] = new MediaChannel(othersChannel.chNumber, othersChannel.mediaType);\r\n        }\r\n        newMedia[channelNum].ssrcGroups.push(otherSsrcGroup);\r\n      }\r\n    });\r\n  });\r\n  return newMedia;\r\n};\r\n\r\n// remove iSAC and CN from SDP\r\nSDP.prototype.mangle = function () {\r\n  var i, j, mline, lines, rtpmap, newdesc;\r\n  for (i = 0; i < this.media.length; i++) {\r\n    lines = this.media[i].split('\\r\\n');\r\n    lines.pop(); // remove empty last element\r\n    mline = SDPUtil.parse_mline(lines.shift());\r\n    if (mline.media != 'audio')\r\n      continue;\r\n    newdesc = '';\r\n    mline.fmt.length = 0;\r\n    for (j = 0; j < lines.length; j++) {\r\n      if (lines[j].substr(0, 9) == 'a=rtpmap:') {\r\n        rtpmap = SDPUtil.parse_rtpmap(lines[j]);\r\n        if (rtpmap.name == 'CN' || rtpmap.name == 'ISAC')\r\n          continue;\r\n        mline.fmt.push(rtpmap.id);\r\n        newdesc += lines[j] + '\\r\\n';\r\n      } else {\r\n        newdesc += lines[j] + '\\r\\n';\r\n      }\r\n    }\r\n    this.media[i] = SDPUtil.build_mline(mline) + '\\r\\n';\r\n    this.media[i] += newdesc;\r\n  }\r\n  this.raw = this.session + this.media.join('');\r\n};\r\n\r\n// remove lines matching prefix from session section\r\nSDP.prototype.removeSessionLines = function (prefix) {\r\n  var self = this;\r\n  var lines = SDPUtil.find_lines(this.session, prefix);\r\n  lines.forEach(function (line) {\r\n    self.session = self.session.replace(line + '\\r\\n', '');\r\n  });\r\n  this.raw = this.session + this.media.join('');\r\n  return lines;\r\n}\r\n// remove lines matching prefix from a media section specified by mediaindex\r\n// TODO: non-numeric mediaindex could match mid\r\nSDP.prototype.removeMediaLines = function (mediaindex, prefix) {\r\n  var self = this;\r\n  var lines = SDPUtil.find_lines(this.media[mediaindex], prefix);\r\n  lines.forEach(function (line) {\r\n    self.media[mediaindex] = self.media[mediaindex].replace(line + '\\r\\n', '');\r\n  });\r\n  this.raw = this.session + this.media.join('');\r\n  return lines;\r\n}\r\n\r\n// add content's to a jingle element\r\nSDP.prototype.toJingle = function (elem, thecreator, ssrcs) {\r\n//    console.log(\"SSRC\" + ssrcs[\"audio\"] + \" - \" + ssrcs[\"video\"]);\r\n  var i, j, k, mline, ssrc, rtpmap, tmp, line, lines;\r\n  var self = this;\r\n  // new bundle plan\r\n  if (SDPUtil.find_line(this.session, 'a=group:')) {\r\n    lines = SDPUtil.find_lines(this.session, 'a=group:');\r\n    for (i = 0; i < lines.length; i++) {\r\n      tmp = lines[i].split(' ');\r\n      var semantics = tmp.shift().substr(8);\r\n      elem.c('group', {xmlns: 'urn:xmpp:jingle:apps:grouping:0', semantics: semantics});\r\n      for (j = 0; j < tmp.length; j++) {\r\n        elem.c('content', {name: tmp[j]}).up();\r\n      }\r\n      elem.up();\r\n    }\r\n  }\r\n  for (i = 0; i < this.media.length; i++) {\r\n    mline = SDPUtil.parse_mline(this.media[i].split('\\r\\n')[0]);\r\n    if (!(mline.media === 'audio' ||\r\n      mline.media === 'video' ||\r\n      mline.media === 'application')) {\r\n      continue;\r\n    }\r\n    if (SDPUtil.find_line(this.media[i], 'a=ssrc:')) {\r\n      ssrc = SDPUtil.find_line(this.media[i], 'a=ssrc:').substring(7).split(' ')[0]; // take the first\r\n    } else {\r\n      if (ssrcs && ssrcs[mline.media]) {\r\n        ssrc = ssrcs[mline.media];\r\n      }\r\n      else\r\n        ssrc = false;\r\n    }\r\n\r\n    elem.c('content', {creator: thecreator, name: mline.media});\r\n    if (SDPUtil.find_line(this.media[i], 'a=mid:')) {\r\n      // prefer identifier from a=mid if present\r\n      var mid = SDPUtil.parse_mid(SDPUtil.find_line(this.media[i], 'a=mid:'));\r\n      elem.attrs({name: mid});\r\n    }\r\n\r\n    if (SDPUtil.find_line(this.media[i], 'a=rtpmap:').length) {\r\n      elem.c('description',\r\n        {\r\n          xmlns: 'urn:xmpp:jingle:apps:rtp:1',\r\n          media: mline.media\r\n        });\r\n      if (ssrc) {\r\n        elem.attrs({ssrc: ssrc});\r\n      }\r\n      for (j = 0; j < mline.fmt.length; j++) {\r\n        rtpmap = SDPUtil.find_line(this.media[i], 'a=rtpmap:' + mline.fmt[j]);\r\n        elem.c('payload-type', SDPUtil.parse_rtpmap(rtpmap));\r\n        // put any 'a=fmtp:' + mline.fmt[j] lines into <param name=foo value=bar/>\r\n        if (SDPUtil.find_line(this.media[i], 'a=fmtp:' + mline.fmt[j])) {\r\n          tmp = SDPUtil.parse_fmtp(SDPUtil.find_line(this.media[i], 'a=fmtp:' + mline.fmt[j]));\r\n          for (k = 0; k < tmp.length; k++) {\r\n            elem.c('parameter', tmp[k]).up();\r\n          }\r\n        }\r\n        this.RtcpFbToJingle(i, elem, mline.fmt[j]); // XEP-0293 -- map a=rtcp-fb\r\n\r\n        elem.up();\r\n      }\r\n      if (SDPUtil.find_line(this.media[i], 'a=crypto:', this.session)) {\r\n        elem.c('encryption', {required: 1});\r\n        var crypto = SDPUtil.find_lines(this.media[i], 'a=crypto:', this.session);\r\n        crypto.forEach(function (line) {\r\n          elem.c('crypto', SDPUtil.parse_crypto(line)).up();\r\n        });\r\n        elem.up(); // end of encryption\r\n      }\r\n\r\n      if (ssrc) {\r\n        // new style mapping\r\n        elem.c('source', {ssrc: ssrc, xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'});\r\n        // FIXME: group by ssrc and support multiple different ssrcs\r\n        var ssrclines = SDPUtil.find_lines(this.media[i], 'a=ssrc:');\r\n        if (ssrclines.length > 0) {\r\n          ssrclines.forEach(function (line) {\r\n            console.log('ssrc line BBBBBBBBBBBBBBBBBBBB: ', line);\r\n            idx = line.indexOf(' ');\r\n            var linessrc = line.substr(0, idx).substr(7);\r\n            if (linessrc != ssrc) {\r\n              elem.up();\r\n              ssrc = linessrc;\r\n              elem.c('source', {ssrc: ssrc, xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'});\r\n            }\r\n            var kv = line.substr(idx + 1);\r\n            elem.c('parameter');\r\n            if (kv.indexOf(':') == -1) {\r\n              elem.attrs({name: kv});\r\n            } else {\r\n              elem.attrs({name: kv.split(':', 2)[0]});\r\n              elem.attrs({value: kv.split(':', 2)[1]});\r\n            }\r\n            elem.up();\r\n\r\n            if (SDPUtil.find_line(self.media[i], 'a=msid:').length){\r\n              var msidLine  = SDPUtil.find_line(self.media[i], 'a=msid:');\r\n              console.log('msid line CCCCCCCCCCCCCCCCCCC', msidLine);\r\n\r\n              elem.c('parameter').attrs({name: 'msid', value: msidLine.split(':', 2)[1]}).up();\r\n              elem.c('parameter').attrs({name: 'mslabel', value: (msidLine.split(':', 2)[1]).split(' ', 2)[0]}).up();\r\n              elem.c('parameter').attrs({name: 'label', value: (msidLine.split(':', 2)[1]).split(' ', 2)[1]}).up();\r\n\r\n            }\r\n          });\r\n          elem.up();\r\n        }\r\n        else {\r\n          elem.up();\r\n          elem.c('source', {ssrc: ssrc, xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'});\r\n          elem.c('parameter');\r\n          elem.attrs({name: \"cname\", value: Math.random().toString(36).substring(7)});\r\n          elem.up();\r\n          var msid = null;\r\n          if (mline.media == \"audio\") {\r\n            msid = connection.jingle.localAudio.getAudioTracks()[0].id;\r\n          }\r\n          else {\r\n            msid = connection.jingle.localVideo.getVideoTracks()[0].id;\r\n          }\r\n          if (msid != null) {\r\n            msid = msid.replace(/[\\{,\\}]/g, \"\");\r\n            elem.c('parameter');\r\n            elem.attrs({name: \"msid\", value: msid});\r\n            elem.up();\r\n            elem.c('parameter');\r\n            elem.attrs({name: \"mslabel\", value: msid});\r\n            elem.up();\r\n            elem.c('parameter');\r\n            elem.attrs({name: \"label\", value: msid});\r\n            elem.up();\r\n            elem.up();\r\n          }\r\n\r\n\r\n        }\r\n\r\n        // XEP-0339 handle ssrc-group attributes\r\n        var ssrc_group_lines = SDPUtil.find_lines(this.media[i], 'a=ssrc-group:');\r\n        ssrc_group_lines.forEach(function (line) {\r\n          idx = line.indexOf(' ');\r\n          var semantics = line.substr(0, idx).substr(13);\r\n          var ssrcs = line.substr(14 + semantics.length).split(' ');\r\n          if (ssrcs.length != 0) {\r\n            elem.c('ssrc-group', {semantics: semantics, xmlns: 'urn:xmpp:jingle:apps:rtp:ssma:0'});\r\n            ssrcs.forEach(function (ssrc) {\r\n              elem.c('source', {ssrc: ssrc})\r\n                .up();\r\n            });\r\n            elem.up();\r\n          }\r\n        });\r\n      }\r\n\r\n      if (SDPUtil.find_line(this.media[i], 'a=rtcp-mux')) {\r\n        elem.c('rtcp-mux').up();\r\n      }\r\n\r\n      // XEP-0293 -- map a=rtcp-fb:*\r\n      this.RtcpFbToJingle(i, elem, '*');\r\n\r\n      // XEP-0294\r\n      if (SDPUtil.find_line(this.media[i], 'a=extmap:')) {\r\n        lines = SDPUtil.find_lines(this.media[i], 'a=extmap:');\r\n        for (j = 0; j < lines.length; j++) {\r\n          tmp = SDPUtil.parse_extmap(lines[j]);\r\n          elem.c('rtp-hdrext', {\r\n            xmlns: 'urn:xmpp:jingle:apps:rtp:rtp-hdrext:0',\r\n            uri: tmp.uri,\r\n            id: tmp.value\r\n          });\r\n          if (tmp.hasOwnProperty('direction')) {\r\n            switch (tmp.direction) {\r\n              case 'sendonly':\r\n                elem.attrs({senders: 'responder'});\r\n                break;\r\n              case 'recvonly':\r\n                elem.attrs({senders: 'initiator'});\r\n                break;\r\n              case 'sendrecv':\r\n                elem.attrs({senders: 'both'});\r\n                break;\r\n              case 'inactive':\r\n                elem.attrs({senders: 'none'});\r\n                break;\r\n            }\r\n          }\r\n          // TODO: handle params\r\n          elem.up();\r\n        }\r\n      }\r\n      elem.up(); // end of description\r\n    }\r\n\r\n    // map ice-ufrag/pwd, dtls fingerprint, candidates\r\n    this.TransportToJingle(i, elem);\r\n\r\n    if (SDPUtil.find_line(this.media[i], 'a=sendrecv', this.session)) {\r\n      elem.attrs({senders: 'both'});\r\n    } else if (SDPUtil.find_line(this.media[i], 'a=sendonly', this.session)) {\r\n      elem.attrs({senders: 'initiator'});\r\n    } else if (SDPUtil.find_line(this.media[i], 'a=recvonly', this.session)) {\r\n      elem.attrs({senders: 'responder'});\r\n    } else if (SDPUtil.find_line(this.media[i], 'a=inactive', this.session)) {\r\n      elem.attrs({senders: 'none'});\r\n    }\r\n    if (mline.port == '0') {\r\n      // estos hack to reject an m-line\r\n      elem.attrs({senders: 'rejected'});\r\n    }\r\n    elem.up(); // end of content\r\n  }\r\n  elem.up();\r\n  return elem;\r\n};\r\n\r\nSDP.prototype.TransportToJingle = function (mediaindex, elem) {\r\n  var i = mediaindex;\r\n  var tmp;\r\n  var self = this;\r\n  elem.c('transport');\r\n\r\n  // XEP-0343 DTLS/SCTP\r\n  if (SDPUtil.find_line(this.media[mediaindex], 'a=sctpmap:').length) {\r\n    var sctpmap = SDPUtil.find_line(\r\n      this.media[i], 'a=sctpmap:', self.session);\r\n    if (sctpmap) {\r\n      var sctpAttrs = SDPUtil.parse_sctpmap(sctpmap);\r\n      elem.c('sctpmap',\r\n        {\r\n          xmlns: 'urn:xmpp:jingle:transports:dtls-sctp:1',\r\n          number: sctpAttrs[0], /* SCTP port */\r\n          protocol: sctpAttrs[1], /* protocol */\r\n        });\r\n      // Optional stream count attribute\r\n      if (sctpAttrs.length > 2)\r\n        elem.attrs({streams: sctpAttrs[2]});\r\n      elem.up();\r\n    }\r\n  }\r\n  // XEP-0320\r\n  var fingerprints = SDPUtil.find_lines(this.media[mediaindex], 'a=fingerprint:', this.session);\r\n  fingerprints.forEach(function (line) {\r\n    tmp = SDPUtil.parse_fingerprint(line);\r\n    tmp.xmlns = 'urn:xmpp:jingle:apps:dtls:0';\r\n    elem.c('fingerprint').t(tmp.fingerprint);\r\n    delete tmp.fingerprint;\r\n    line = SDPUtil.find_line(self.media[mediaindex], 'a=setup:', self.session);\r\n    if (line) {\r\n      tmp.setup = line.substr(8);\r\n    }\r\n    elem.attrs(tmp);\r\n    elem.up(); // end of fingerprint\r\n  });\r\n  tmp = SDPUtil.iceparams(this.media[mediaindex], this.session);\r\n  if (tmp) {\r\n    tmp.xmlns = 'urn:xmpp:jingle:transports:ice-udp:1';\r\n    elem.attrs(tmp);\r\n    // XEP-0176\r\n    if (SDPUtil.find_line(this.media[mediaindex], 'a=candidate:', this.session)) { // add any a=candidate lines\r\n      var lines = SDPUtil.find_lines(this.media[mediaindex], 'a=candidate:', this.session);\r\n      lines.forEach(function (line) {\r\n        elem.c('candidate', SDPUtil.candidateToJingle(line)).up();\r\n      });\r\n    }\r\n  }\r\n  elem.up(); // end of transport\r\n}\r\n\r\nSDP.prototype.RtcpFbToJingle = function (mediaindex, elem, payloadtype) { // XEP-0293\r\n  var lines = SDPUtil.find_lines(this.media[mediaindex], 'a=rtcp-fb:' + payloadtype);\r\n  lines.forEach(function (line) {\r\n    var tmp = SDPUtil.parse_rtcpfb(line);\r\n    if (tmp.type == 'trr-int') {\r\n      elem.c('rtcp-fb-trr-int', {xmlns: 'urn:xmpp:jingle:apps:rtp:rtcp-fb:0', value: tmp.params[0]});\r\n      elem.up();\r\n    } else {\r\n      elem.c('rtcp-fb', {xmlns: 'urn:xmpp:jingle:apps:rtp:rtcp-fb:0', type: tmp.type});\r\n      if (tmp.params.length > 0) {\r\n        elem.attrs({'subtype': tmp.params[0]});\r\n      }\r\n      elem.up();\r\n    }\r\n  });\r\n};\r\n\r\nSDP.prototype.RtcpFbFromJingle = function (elem, payloadtype) { // XEP-0293\r\n  var media = '';\r\n  var tmp = elem.find('>rtcp-fb-trr-int[xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\"]');\r\n  if (tmp.length) {\r\n    media += 'a=rtcp-fb:' + '*' + ' ' + 'trr-int' + ' ';\r\n    if (tmp.attr('value')) {\r\n      media += tmp.attr('value');\r\n    } else {\r\n      media += '0';\r\n    }\r\n    media += '\\r\\n';\r\n  }\r\n  tmp = elem.find('>rtcp-fb[xmlns=\"urn:xmpp:jingle:apps:rtp:rtcp-fb:0\"]');\r\n  tmp.each(function () {\r\n    media += 'a=rtcp-fb:' + payloadtype + ' ' + $(this).attr('type');\r\n    if ($(this).attr('subtype')) {\r\n      media += ' ' + $(this).attr('subtype');\r\n    }\r\n    media += '\\r\\n';\r\n  });\r\n  return media;\r\n};\r\n\r\n// construct an SDP from a jingle stanza\r\nSDP.prototype.fromJingle = function (jingle) {\r\n  var self = this;\r\n  this.raw = 'v=0\\r\\n' +\r\n    'o=- ' + '1923518516' + ' 2 IN IP4 0.0.0.0\\r\\n' +// FIXME\r\n    's=-\\r\\n' +\r\n    't=0 0\\r\\n'\r\n  // http://tools.ietf.org/html/draft-ietf-mmusic-sdp-bundle-negotiation-04#section-8\r\n  if ($(jingle).find('>group[xmlns=\"urn:xmpp:jingle:apps:grouping:0\"]').length) {\r\n    $(jingle).find('>group[xmlns=\"urn:xmpp:jingle:apps:grouping:0\"]').each(function (idx, group) {\r\n      var contents = $(group).find('>content').map(function (idx, content) {\r\n        return content.getAttribute('name');\r\n      }).get();\r\n      if (contents.length > 0) {\r\n        self.raw += 'a=group:' + (group.getAttribute('semantics') || group.getAttribute('type')) + ' ' + contents.join(' ') + '\\r\\n';\r\n      }\r\n    });\r\n  }\r\n\r\n  this.session = this.raw;\r\n  jingle.find('>content').each(function () {\r\n    var m = self.jingle2media($(this));\r\n    self.media.push(m);\r\n  });\r\n\r\n  // reconstruct msid-semantic -- apparently not necessary\r\n  /*\r\n   var msid = SDPUtil.parse_ssrc(this.raw);\r\n   if (msid.hasOwnProperty('mslabel')) {\r\n   this.session += \"a=msid-semantic: WMS \" + msid.mslabel + \"\\r\\n\";\r\n   }\r\n   */\r\n\r\n  this.raw = this.session + this.media.join('');\r\n};\r\n\r\n// translate a jingle content element into an an SDP media part\r\nSDP.prototype.jingle2media = function (content) {\r\n  var media = '',\r\n    desc = content.find('description'),\r\n    ssrc = desc.attr('ssrc'),\r\n    self = this,\r\n    tmp;\r\n  var sctp = content.find(\r\n    '>transport>sctpmap[xmlns=\"urn:xmpp:jingle:transports:dtls-sctp:1\"]');\r\n\r\n  tmp = {media: desc.attr('media')};\r\n  tmp.port = '1';\r\n  if (content.attr('senders') == 'rejected') {\r\n    // estos hack to reject an m-line.\r\n    tmp.port = '0';\r\n  }\r\n  if (content.find('>transport>fingerprint').length || desc.find('encryption').length) {\r\n    if (sctp.length)\r\n      tmp.proto = 'DTLS/SCTP';\r\n    else\r\n      // tmp.proto = 'RTP/SAVPF';\r\n    tmp.proto = 'UDP/TLS/RTP/SAVPF';\r\n  } else {\r\n    tmp.proto = 'RTP/AVPF';\r\n  }\r\n  if (!sctp.length) {\r\n    tmp.fmt = desc.find('payload-type').map(\r\n      function () {\r\n        return this.getAttribute('id');\r\n      }).get();\r\n    media += SDPUtil.build_mline(tmp) + '\\r\\n';\r\n  }\r\n  else {\r\n    media += 'm=application 1 DTLS/SCTP ' + sctp.attr('number') + '\\r\\n';\r\n    media += 'a=sctpmap:' + sctp.attr('number') +\r\n      ' ' + sctp.attr('protocol');\r\n\r\n    var streamCount = sctp.attr('streams');\r\n    if (streamCount)\r\n      media += ' ' + streamCount + '\\r\\n';\r\n    else\r\n      media += '\\r\\n';\r\n  }\r\n\r\n  media += 'c=IN IP4 0.0.0.0\\r\\n';\r\n  if (!sctp.length)\r\n    media += 'a=rtcp:1 IN IP4 0.0.0.0\\r\\n';\r\n  tmp = content.find('>transport[xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\"]');\r\n  if (tmp.length) {\r\n    if (tmp.attr('ufrag')) {\r\n      media += SDPUtil.build_iceufrag(tmp.attr('ufrag')) + '\\r\\n';\r\n    }\r\n    if (tmp.attr('pwd')) {\r\n      media += SDPUtil.build_icepwd(tmp.attr('pwd')) + '\\r\\n';\r\n    }\r\n    tmp.find('>fingerprint').each(function () {\r\n      // FIXME: check namespace at some point\r\n      media += 'a=fingerprint:' + this.getAttribute('hash');\r\n      media += ' ' + $(this).text();\r\n      media += '\\r\\n';\r\n      if (this.getAttribute('setup')) {\r\n        media += 'a=setup:' + this.getAttribute('setup') + '\\r\\n';\r\n      }\r\n    });\r\n  }\r\n  switch (content.attr('senders')) {\r\n    case 'initiator':\r\n      media += 'a=sendonly\\r\\n';\r\n      break;\r\n    case 'responder':\r\n      media += 'a=recvonly\\r\\n';\r\n      break;\r\n    case 'none':\r\n      media += 'a=inactive\\r\\n';\r\n      break;\r\n    case 'both':\r\n      media += 'a=sendrecv\\r\\n';\r\n      break;\r\n  }\r\n  media += 'a=mid:' + content.attr('name') + '\\r\\n';\r\n\r\n  // <description><rtcp-mux/></description>\r\n  // see http://code.google.com/p/libjingle/issues/detail?id=309 -- no spec though\r\n  // and http://mail.jabber.org/pipermail/jingle/2011-December/001761.html\r\n  if (desc.find('rtcp-mux').length) {\r\n    media += 'a=rtcp-mux\\r\\n';\r\n  }\r\n\r\n  if (desc.find('encryption').length) {\r\n    desc.find('encryption>crypto').each(function () {\r\n      media += 'a=crypto:' + this.getAttribute('tag');\r\n      media += ' ' + this.getAttribute('crypto-suite');\r\n      media += ' ' + this.getAttribute('key-params');\r\n      if (this.getAttribute('session-params')) {\r\n        media += ' ' + this.getAttribute('session-params');\r\n      }\r\n      media += '\\r\\n';\r\n    });\r\n  }\r\n  desc.find('payload-type').each(function () {\r\n    media += SDPUtil.build_rtpmap(this) + '\\r\\n';\r\n    if ($(this).find('>parameter').length) {\r\n      media += 'a=fmtp:' + this.getAttribute('id') + ' ';\r\n      media += $(this).find('parameter').map(function () {\r\n        return (this.getAttribute('name') ? (this.getAttribute('name') + '=') : '') + this.getAttribute('value');\r\n      }).get().join('; ');\r\n      media += '\\r\\n';\r\n    }\r\n    // xep-0293\r\n    media += self.RtcpFbFromJingle($(this), this.getAttribute('id'));\r\n  });\r\n\r\n  // xep-0293\r\n  media += self.RtcpFbFromJingle(desc, '*');\r\n\r\n  // xep-0294\r\n  tmp = desc.find('>rtp-hdrext[xmlns=\"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0\"]');\r\n  tmp.each(function () {\r\n    media += 'a=extmap:' + this.getAttribute('id') + ' ' + this.getAttribute('uri') + '\\r\\n';\r\n  });\r\n  media += \"a=extmap:9 urn:ietf:params:rtp-hdrext:sdes:mid\\r\\n\";\r\n  content.find('>transport[xmlns=\"urn:xmpp:jingle:transports:ice-udp:1\"]>candidate').each(function () {\r\n    media += SDPUtil.candidateFromJingle(this);\r\n  });\r\n\r\n  // XEP-0339 handle ssrc-group attributes\r\n  tmp = content.find('description>ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]').each(function () {\r\n    var semantics = this.getAttribute('semantics');\r\n    var ssrcs = $(this).find('>source').map(function () {\r\n      return this.getAttribute('ssrc');\r\n    }).get();\r\n\r\n    if (ssrcs.length != 0) {\r\n      media += 'a=ssrc-group:' + semantics + ' ' + ssrcs.join(' ') + '\\r\\n';\r\n    }\r\n  });\r\n\r\n  tmp = content.find('description>source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]');\r\n  tmp.each(function () {\r\n    var ssrc = this.getAttribute('ssrc');\r\n    $(this).find('>parameter').each(function () {\r\n      media += 'a=ssrc:' + ssrc + ' ' + this.getAttribute('name');\r\n      if (this.getAttribute('value') && this.getAttribute('value').length)\r\n        media += ':' + this.getAttribute('value');\r\n      media += '\\r\\n';\r\n    });\r\n  });\r\n\r\n  return media;\r\n};\r\n\r\nexports = module.exports = SDP;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/strophe/plugins/strophe.jingle.sdp.js\n// module id = 37\n// module chunks = 0","/*jslint plusplus: true */\r\n/*jslint nomen: true*/\r\n\r\n/**\r\n *\r\n * @constructor\r\n */\r\nfunction SimulcastUtils() {\r\n  this.logger = new SimulcastLogger(\"SimulcastUtils\", 1);\r\n}\r\n\r\n/**\r\n *\r\n * @type {{}}\r\n * @private\r\n */\r\nSimulcastUtils.prototype._emptyCompoundIndex = {};\r\n\r\n/**\r\n *\r\n * @param lines\r\n * @param videoSources\r\n * @private\r\n */\r\nSimulcastUtils.prototype._replaceVideoSources = function (lines, videoSources) {\r\n  var i, inVideo = false, index = -1, howMany = 0;\r\n\r\n  this.logger.info('Replacing video sources...');\r\n\r\n  for (i = 0; i < lines.length; i++) {\r\n    if (inVideo && lines[i].substring(0, 'm='.length) === 'm=') {\r\n      // Out of video.\r\n      break;\r\n    }\r\n\r\n    if (!inVideo && lines[i].substring(0, 'm=video '.length) === 'm=video ') {\r\n      // In video.\r\n      inVideo = true;\r\n    }\r\n\r\n    if (inVideo && (lines[i].substring(0, 'a=ssrc:'.length) === 'a=ssrc:'\r\n      || lines[i].substring(0, 'a=ssrc-group:'.length) === 'a=ssrc-group:')) {\r\n\r\n      if (index === -1) {\r\n        index = i;\r\n      }\r\n\r\n      howMany++;\r\n    }\r\n  }\r\n\r\n  //  efficiency baby ;)\r\n  lines.splice.apply(lines,\r\n    [index, howMany].concat(videoSources));\r\n\r\n};\r\n\r\nSimulcastUtils.prototype.isValidDescription = function (desc) {\r\n  return desc && desc != null\r\n    && desc.type && desc.type != ''\r\n    && desc.sdp && desc.sdp != '';\r\n};\r\n\r\nSimulcastUtils.prototype._getVideoSources = function (lines) {\r\n  var i, inVideo = false, sb = [];\r\n\r\n  this.logger.info('Getting video sources...');\r\n\r\n  for (i = 0; i < lines.length; i++) {\r\n    if (inVideo && lines[i].substring(0, 'm='.length) === 'm=') {\r\n      // Out of video.\r\n      break;\r\n    }\r\n\r\n    if (!inVideo && lines[i].substring(0, 'm=video '.length) === 'm=video ') {\r\n      // In video.\r\n      inVideo = true;\r\n    }\r\n\r\n    if (inVideo && lines[i].substring(0, 'a=ssrc:'.length) === 'a=ssrc:') {\r\n      // In SSRC.\r\n      sb.push(lines[i]);\r\n    }\r\n\r\n    if (inVideo && lines[i].substring(0, 'a=ssrc-group:'.length) === 'a=ssrc-group:') {\r\n      sb.push(lines[i]);\r\n    }\r\n  }\r\n\r\n  return sb;\r\n};\r\n\r\nSimulcastUtils.prototype.parseMedia = function (lines, mediatypes) {\r\n  var i, res = [], type, cur_media, idx, ssrcs, cur_ssrc, ssrc,\r\n    ssrc_attribute, group, semantics, skip = true;\r\n\r\n  this.logger.info('Parsing media sources...');\r\n\r\n  for (i = 0; i < lines.length; i++) {\r\n    if (lines[i].substring(0, 'm='.length) === 'm=') {\r\n\r\n      type = lines[i]\r\n        .substr('m='.length, lines[i].indexOf(' ') - 'm='.length);\r\n      skip = mediatypes !== undefined && mediatypes.indexOf(type) === -1;\r\n\r\n      if (!skip) {\r\n        cur_media = {\r\n          'type': type,\r\n          'sources': {},\r\n          'groups': []\r\n        };\r\n\r\n        res.push(cur_media);\r\n      }\r\n\r\n    } else if (!skip && lines[i].substring(0, 'a=ssrc:'.length) === 'a=ssrc:') {\r\n\r\n      idx = lines[i].indexOf(' ');\r\n      ssrc = lines[i].substring('a=ssrc:'.length, idx);\r\n      if (cur_media.sources[ssrc] === undefined) {\r\n        cur_ssrc = {'ssrc': ssrc};\r\n        cur_media.sources[ssrc] = cur_ssrc;\r\n      }\r\n\r\n      ssrc_attribute = lines[i].substr(idx + 1).split(':', 2)[0];\r\n      cur_ssrc[ssrc_attribute] = lines[i].substr(idx + 1).split(':', 2)[1];\r\n\r\n      if (cur_media.base === undefined) {\r\n        cur_media.base = cur_ssrc;\r\n      }\r\n\r\n    } else if (!skip && lines[i].substring(0, 'a=ssrc-group:'.length) === 'a=ssrc-group:') {\r\n      idx = lines[i].indexOf(' ');\r\n      semantics = lines[i].substr(0, idx).substr('a=ssrc-group:'.length);\r\n      ssrcs = lines[i].substr(idx).trim().split(' ');\r\n      group = {\r\n        'semantics': semantics,\r\n        'ssrcs': ssrcs\r\n      };\r\n      cur_media.groups.push(group);\r\n    } else if (!skip && (lines[i].substring(0, 'a=sendrecv'.length) === 'a=sendrecv' ||\r\n      lines[i].substring(0, 'a=recvonly'.length) === 'a=recvonly' ||\r\n      lines[i].substring(0, 'a=sendonly'.length) === 'a=sendonly' ||\r\n      lines[i].substring(0, 'a=inactive'.length) === 'a=inactive')) {\r\n\r\n      cur_media.direction = lines[i].substring('a='.length);\r\n    }\r\n  }\r\n\r\n  return res;\r\n};\r\n\r\n/**\r\n * The _indexOfArray() method returns the first a CompoundIndex at which a\r\n * given element can be found in the array, or _emptyCompoundIndex if it is\r\n * not present.\r\n *\r\n * Example:\r\n *\r\n * _indexOfArray('3', [ 'this is line 1', 'this is line 2', 'this is line 3' ])\r\n *\r\n * returns {row: 2, column: 14}\r\n *\r\n * @param needle\r\n * @param haystack\r\n * @param start\r\n * @returns {}\r\n * @private\r\n */\r\nSimulcastUtils.prototype._indexOfArray = function (needle, haystack, start) {\r\n  var length = haystack.length, idx, i;\r\n\r\n  if (!start) {\r\n    start = 0;\r\n  }\r\n\r\n  for (i = start; i < length; i++) {\r\n    idx = haystack[i].indexOf(needle);\r\n    if (idx !== -1) {\r\n      return {row: i, column: idx};\r\n    }\r\n  }\r\n  return this._emptyCompoundIndex;\r\n};\r\n\r\nSimulcastUtils.prototype._removeSimulcastGroup = function (lines) {\r\n  var i;\r\n\r\n  for (i = lines.length - 1; i >= 0; i--) {\r\n    if (lines[i].indexOf('a=ssrc-group:SIM') !== -1) {\r\n      lines.splice(i, 1);\r\n    }\r\n  }\r\n};\r\n\r\nSimulcastUtils.prototype._compileVideoSources = function (videoSources) {\r\n  var sb = [], ssrc, addedSSRCs = [];\r\n\r\n  this.logger.info('Compiling video sources...');\r\n\r\n  // Add the groups\r\n  if (videoSources.groups && videoSources.groups.length !== 0) {\r\n    videoSources.groups.forEach(function (group) {\r\n      if (group.ssrcs && group.ssrcs.length !== 0) {\r\n        sb.push([['a=ssrc-group:', group.semantics].join(''), group.ssrcs.join(' ')].join(' '));\r\n\r\n        // if (group.semantics !== 'SIM') {\r\n        group.ssrcs.forEach(function (ssrc) {\r\n          addedSSRCs.push(ssrc);\r\n          sb.splice.apply(sb, [sb.length, 0].concat([\r\n            [\"a=ssrc:\", ssrc, \" cname:\", videoSources.sources[ssrc].cname].join(''),\r\n            [\"a=ssrc:\", ssrc, \" msid:\", videoSources.sources[ssrc].msid].join('')]));\r\n        });\r\n        //}\r\n      }\r\n    });\r\n  }\r\n\r\n  // Then add any free sources.\r\n  if (videoSources.sources) {\r\n    for (ssrc in videoSources.sources) {\r\n      if (addedSSRCs.indexOf(ssrc) === -1) {\r\n        sb.splice.apply(sb, [sb.length, 0].concat([\r\n          [\"a=ssrc:\", ssrc, \" cname:\", videoSources.sources[ssrc].cname].join(''),\r\n          [\"a=ssrc:\", ssrc, \" msid:\", videoSources.sources[ssrc].msid].join('')]));\r\n      }\r\n    }\r\n  }\r\n\r\n  return sb;\r\n};\r\n\r\nfunction SimulcastReceiver() {\r\n  this.simulcastUtils = new SimulcastUtils();\r\n  this.logger = new SimulcastLogger('SimulcastReceiver', 1);\r\n}\r\n\r\nSimulcastReceiver.prototype._remoteVideoSourceCache = '';\r\nSimulcastReceiver.prototype._remoteMaps = {\r\n  msid2Quality: {},\r\n  ssrc2Msid: {},\r\n  msid2ssrc: {},\r\n  receivingVideoStreams: {}\r\n};\r\n\r\nSimulcastReceiver.prototype._cacheRemoteVideoSources = function (lines) {\r\n  this._remoteVideoSourceCache = this.simulcastUtils._getVideoSources(lines);\r\n};\r\n\r\nSimulcastReceiver.prototype._restoreRemoteVideoSources = function (lines) {\r\n  this.simulcastUtils._replaceVideoSources(lines, this._remoteVideoSourceCache);\r\n};\r\n\r\nSimulcastReceiver.prototype._ensureGoogConference = function (lines) {\r\n  var sb;\r\n\r\n  this.logger.info('Ensuring x-google-conference flag...')\r\n\r\n  if (this.simulcastUtils._indexOfArray('a=x-google-flag:conference', lines) === this.simulcastUtils._emptyCompoundIndex) {\r\n    // TODO(gp) do that for the audio as well as suggested by fippo.\r\n    // Add the google conference flag\r\n    sb = this.simulcastUtils._getVideoSources(lines);\r\n    sb = ['a=x-google-flag:conference'].concat(sb);\r\n    this.simulcastUtils._replaceVideoSources(lines, sb);\r\n  }\r\n};\r\n\r\nSimulcastReceiver.prototype._restoreSimulcastGroups = function (sb) {\r\n  this._restoreRemoteVideoSources(sb);\r\n};\r\n\r\n/**\r\n * Restores the simulcast groups of the remote description. In\r\n * transformRemoteDescription we remove those in order for the set remote\r\n * description to succeed. The focus needs the signal the groups to new\r\n * participants.\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nSimulcastReceiver.prototype.reverseTransformRemoteDescription = function (desc) {\r\n  var sb;\r\n\r\n  if (!this.simulcastUtils.isValidDescription(desc)) {\r\n    return desc;\r\n  }\r\n\r\n  if (config.enableSimulcast) {\r\n    sb = desc.sdp.split('\\r\\n');\r\n\r\n    this._restoreSimulcastGroups(sb);\r\n\r\n    desc = new RTCSessionDescription({\r\n      type: desc.type,\r\n      sdp: sb.join('\\r\\n')\r\n    });\r\n  }\r\n\r\n  return desc;\r\n};\r\n\r\nSimulcastUtils.prototype._ensureOrder = function (lines) {\r\n  var videoSources, sb;\r\n\r\n  videoSources = this.parseMedia(lines, ['video'])[0];\r\n  sb = this._compileVideoSources(videoSources);\r\n\r\n  this._replaceVideoSources(lines, sb);\r\n};\r\n\r\nSimulcastReceiver.prototype._updateRemoteMaps = function (lines) {\r\n  var remoteVideoSources = this.simulcastUtils.parseMedia(lines, ['video'])[0],\r\n    videoSource, quality;\r\n\r\n  // (re) initialize the remote maps.\r\n  this._remoteMaps.msid2Quality = {};\r\n  this._remoteMaps.ssrc2Msid = {};\r\n  this._remoteMaps.msid2ssrc = {};\r\n\r\n  var self = this;\r\n  if (remoteVideoSources && remoteVideoSources.groups && remoteVideoSources.groups.length !== 0) {\r\n    remoteVideoSources.groups.forEach(function (group) {\r\n      if (group.semantics === 'SIM' && group.ssrcs && group.ssrcs.length !== 0) {\r\n        quality = 0;\r\n        group.ssrcs.forEach(function (ssrc) {\r\n          videoSource = remoteVideoSources.sources[ssrc];\r\n          self._remoteMaps.msid2Quality[videoSource.msid] = quality++;\r\n          self._remoteMaps.ssrc2Msid[videoSource.ssrc] = videoSource.msid;\r\n          self._remoteMaps.msid2ssrc[videoSource.msid] = videoSource.ssrc;\r\n        });\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nSimulcastReceiver.prototype._setReceivingVideoStream = function (resource, ssrc) {\r\n  this._remoteMaps.receivingVideoStreams[resource] = ssrc;\r\n};\r\n\r\n/**\r\n * Returns a stream with single video track, the one currently being\r\n * received by this endpoint.\r\n *\r\n * @param stream the remote simulcast stream.\r\n * @returns {webkitMediaStream}\r\n */\r\nSimulcastReceiver.prototype.getReceivingVideoStream = function (stream) {\r\n  var tracks, i, electedTrack, msid, quality = 0, receivingTrackId;\r\n\r\n  var self = this;\r\n  if (config.enableSimulcast) {\r\n\r\n    stream.getVideoTracks().some(function (track) {\r\n      return Object.keys(self._remoteMaps.receivingVideoStreams).some(function (resource) {\r\n        var ssrc = self._remoteMaps.receivingVideoStreams[resource];\r\n        var msid = self._remoteMaps.ssrc2Msid[ssrc];\r\n        if (msid == [stream.id, track.id].join(' ')) {\r\n          electedTrack = track;\r\n          return true;\r\n        }\r\n      });\r\n    });\r\n\r\n    if (!electedTrack) {\r\n      // we don't have an elected track, choose by initial quality.\r\n      tracks = stream.getVideoTracks();\r\n      for (i = 0; i < tracks.length; i++) {\r\n        msid = [stream.id, tracks[i].id].join(' ');\r\n        if (this._remoteMaps.msid2Quality[msid] === quality) {\r\n          electedTrack = tracks[i];\r\n          break;\r\n        }\r\n      }\r\n\r\n      // TODO(gp) if the initialQuality could not be satisfied, lower\r\n      // the requirement and try again.\r\n    }\r\n  }\r\n\r\n  return (electedTrack)\r\n    ? new webkitMediaStream([electedTrack])\r\n    : stream;\r\n};\r\n\r\nSimulcastReceiver.prototype.getReceivingSSRC = function (jid) {\r\n  var resource = Strophe.getResourceFromJid(jid);\r\n  var ssrc = this._remoteMaps.receivingVideoStreams[resource];\r\n\r\n  // If we haven't receiving a \"changed\" event yet, then we must be receiving\r\n  // low quality (that the sender always streams).\r\n  if (!ssrc && connection.jingle) {\r\n    var session;\r\n    var i, j, k;\r\n\r\n    var keys = Object.keys(connection.jingle.sessions);\r\n    for (i = 0; i < keys.length; i++) {\r\n      var sid = keys[i];\r\n\r\n      if (ssrc) {\r\n        // stream found, stop.\r\n        break;\r\n      }\r\n\r\n      session = connection.jingle.sessions[sid];\r\n      if (session.remoteStreams) {\r\n        for (j = 0; j < session.remoteStreams.length; j++) {\r\n          var remoteStream = session.remoteStreams[j];\r\n\r\n          if (ssrc) {\r\n            // stream found, stop.\r\n            break;\r\n          }\r\n          var tracks = remoteStream.getVideoTracks();\r\n          if (tracks) {\r\n            for (k = 0; k < tracks.length; k++) {\r\n              var track = tracks[k];\r\n              var msid = [remoteStream.id, track.id].join(' ');\r\n              var _ssrc = this._remoteMaps.msid2ssrc[msid];\r\n              var _jid = ssrc2jid[_ssrc];\r\n              var quality = this._remoteMaps.msid2Quality[msid];\r\n              if (jid == _jid && quality == 0) {\r\n                ssrc = _ssrc;\r\n                // stream found, stop.\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return ssrc;\r\n};\r\n\r\nSimulcastReceiver.prototype.getReceivingVideoStreamBySSRC = function (ssrc) {\r\n  var session, electedStream;\r\n  var i, j, k;\r\n  if (connection.jingle) {\r\n    var keys = Object.keys(connection.jingle.sessions);\r\n    for (i = 0; i < keys.length; i++) {\r\n      var sid = keys[i];\r\n\r\n      if (electedStream) {\r\n        // stream found, stop.\r\n        break;\r\n      }\r\n\r\n      session = connection.jingle.sessions[sid];\r\n      if (session.remoteStreams) {\r\n        for (j = 0; j < session.remoteStreams.length; j++) {\r\n          var remoteStream = session.remoteStreams[j];\r\n\r\n          if (electedStream) {\r\n            // stream found, stop.\r\n            break;\r\n          }\r\n          var tracks = remoteStream.getVideoTracks();\r\n          if (tracks) {\r\n            for (k = 0; k < tracks.length; k++) {\r\n              var track = tracks[k];\r\n              var msid = [remoteStream.id, track.id].join(' ');\r\n              var tmp = this._remoteMaps.msid2ssrc[msid];\r\n              if (tmp == ssrc) {\r\n                electedStream = new webkitMediaStream([track]);\r\n                // stream found, stop.\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    session: session,\r\n    stream: electedStream\r\n  };\r\n};\r\n\r\n/**\r\n * Gets the fully qualified msid (stream.id + track.id) associated to the\r\n * SSRC.\r\n *\r\n * @param ssrc\r\n * @returns {*}\r\n */\r\nSimulcastReceiver.prototype.getRemoteVideoStreamIdBySSRC = function (ssrc) {\r\n  return this._remoteMaps.ssrc2Msid[ssrc];\r\n};\r\n\r\nfunction SimulcastSender() {\r\n  this.simulcastUtils = new SimulcastUtils();\r\n  this.logger = new SimulcastLogger('SimulcastSender', 1);\r\n}\r\n\r\nSimulcastSender.prototype.displayedLocalVideoStream = null;\r\n\r\nSimulcastSender.prototype._generateGuid = (function () {\r\n  function s4() {\r\n    return Math.floor((1 + Math.random()) * 0x10000)\r\n      .toString(16)\r\n      .substring(1);\r\n  }\r\n\r\n  return function () {\r\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n      s4() + '-' + s4() + s4() + s4();\r\n  };\r\n}());\r\n\r\n// Returns a random integer between min (included) and max (excluded)\r\n// Using Math.round() gives a non-uniform distribution!\r\nSimulcastSender.prototype._generateRandomSSRC = function () {\r\n  var min = 0, max = 0xffffffff;\r\n  return Math.floor(Math.random() * (max - min)) + min;\r\n};\r\n\r\nSimulcastSender.prototype.getLocalVideoStream = function () {\r\n  return (this.displayedLocalVideoStream != null)\r\n    ? this.displayedLocalVideoStream\r\n    // in case we have no simulcast at all, i.e. we didn't perform the GUM\r\n    : connection.jingle.localVideo;\r\n};\r\n\r\nfunction NativeSimulcastSender() {\r\n  SimulcastSender.call(this); // call the super constructor.\r\n}\r\n\r\nNativeSimulcastSender.prototype = Object.create(SimulcastSender.prototype);\r\n\r\nNativeSimulcastSender.prototype._localExplosionMap = {};\r\nNativeSimulcastSender.prototype._isUsingScreenStream = false;\r\nNativeSimulcastSender.prototype._localVideoSourceCache = '';\r\n\r\nNativeSimulcastSender.prototype.reset = function () {\r\n  this._localExplosionMap = {};\r\n  this._isUsingScreenStream = isUsingScreenStream;\r\n};\r\n\r\nNativeSimulcastSender.prototype._cacheLocalVideoSources = function (lines) {\r\n  this._localVideoSourceCache = this.simulcastUtils._getVideoSources(lines);\r\n};\r\n\r\nNativeSimulcastSender.prototype._restoreLocalVideoSources = function (lines) {\r\n  this.simulcastUtils._replaceVideoSources(lines, this._localVideoSourceCache);\r\n};\r\n\r\nNativeSimulcastSender.prototype._appendSimulcastGroup = function (lines) {\r\n  var videoSources, ssrcGroup, simSSRC, numOfSubs = 2, i, sb, msid;\r\n\r\n  this.logger.info('Appending simulcast group...');\r\n\r\n  // Get the primary SSRC information.\r\n  videoSources = this.simulcastUtils.parseMedia(lines, ['video'])[0];\r\n\r\n  // Start building the SIM SSRC group.\r\n  ssrcGroup = ['a=ssrc-group:SIM'];\r\n\r\n  // The video source buffer.\r\n  sb = [];\r\n\r\n  // Create the simulcast sub-streams.\r\n  for (i = 0; i < numOfSubs; i++) {\r\n    // TODO(gp) prevent SSRC collision.\r\n    simSSRC = this._generateRandomSSRC();\r\n    ssrcGroup.push(simSSRC);\r\n\r\n    if (videoSources.base) {\r\n      sb.splice.apply(sb, [sb.length, 0].concat(\r\n        [[\"a=ssrc:\", simSSRC, \" cname:\", videoSources.base.cname].join(''),\r\n          [\"a=ssrc:\", simSSRC, \" msid:\", videoSources.base.msid].join('')]\r\n      ));\r\n    }\r\n\r\n    this.logger.info(['Generated substream ', i, ' with SSRC ', simSSRC, '.'].join(''));\r\n\r\n  }\r\n\r\n  // Add the group sim layers.\r\n  sb.splice(0, 0, ssrcGroup.join(' '))\r\n\r\n  this.simulcastUtils._replaceVideoSources(lines, sb);\r\n};\r\n\r\n// Does the actual patching.\r\nNativeSimulcastSender.prototype._ensureSimulcastGroup = function (lines) {\r\n\r\n  this.logger.info('Ensuring simulcast group...');\r\n\r\n  if (this.simulcastUtils._indexOfArray('a=ssrc-group:SIM', lines) === this.simulcastUtils._emptyCompoundIndex) {\r\n    this._appendSimulcastGroup(lines);\r\n    this._cacheLocalVideoSources(lines);\r\n  } else {\r\n    // verify that the ssrcs participating in the SIM group are present\r\n    // in the SDP (needed for presence).\r\n    this._restoreLocalVideoSources(lines);\r\n  }\r\n};\r\n\r\n/**\r\n * Produces a single stream with multiple tracks for local video sources.\r\n *\r\n * @param lines\r\n * @private\r\n */\r\nNativeSimulcastSender.prototype._explodeSimulcastSenderSources = function (lines) {\r\n  var sb, msid, sid, tid, videoSources, self;\r\n\r\n  this.logger.info('Exploding local video sources...');\r\n\r\n  videoSources = this.simulcastUtils.parseMedia(lines, ['video'])[0];\r\n\r\n  self = this;\r\n  if (videoSources.groups && videoSources.groups.length !== 0) {\r\n    videoSources.groups.forEach(function (group) {\r\n      if (group.semantics === 'SIM') {\r\n        group.ssrcs.forEach(function (ssrc) {\r\n\r\n          // Get the msid for this ssrc..\r\n          if (self._localExplosionMap[ssrc]) {\r\n            // .. either from the explosion map..\r\n            msid = self._localExplosionMap[ssrc];\r\n          } else {\r\n            // .. or generate a new one (msid).\r\n            sid = videoSources.sources[ssrc].msid\r\n              .substring(0, videoSources.sources[ssrc].msid.indexOf(' '));\r\n\r\n            tid = self._generateGuid();\r\n            msid = [sid, tid].join(' ');\r\n            self._localExplosionMap[ssrc] = msid;\r\n          }\r\n\r\n          // Assign it to the source object.\r\n          videoSources.sources[ssrc].msid = msid;\r\n\r\n          // TODO(gp) Change the msid of associated sources.\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  sb = this.simulcastUtils._compileVideoSources(videoSources);\r\n\r\n  this.simulcastUtils._replaceVideoSources(lines, sb);\r\n};\r\n\r\n/**\r\n * GUM for simulcast.\r\n *\r\n * @param constraints\r\n * @param success\r\n * @param err\r\n */\r\nNativeSimulcastSender.prototype.getUserMedia = function (constraints, success, err) {\r\n\r\n  // There's nothing special to do for native simulcast, so just do a normal GUM.\r\n  navigator.webkitGetUserMedia(constraints, function (hqStream) {\r\n    success(hqStream);\r\n  }, err);\r\n};\r\n\r\n/**\r\n * Prepares the local description for public usage (i.e. to be signaled\r\n * through Jingle to the focus).\r\n *\r\n * @param desc\r\n * @returns {RTCSessionDescription}\r\n */\r\nNativeSimulcastSender.prototype.reverseTransformLocalDescription = function (desc) {\r\n  var sb;\r\n\r\n  if (!this.simulcastUtils.isValidDescription(desc) || this._isUsingScreenStream) {\r\n    return desc;\r\n  }\r\n\r\n\r\n  sb = desc.sdp.split('\\r\\n');\r\n\r\n  this._explodeSimulcastSenderSources(sb);\r\n\r\n  desc = new RTCSessionDescription({\r\n    type: desc.type,\r\n    sdp: sb.join('\\r\\n')\r\n  });\r\n\r\n  this.logger.fine(['Exploded local video sources', desc.sdp].join(' '));\r\n\r\n  return desc;\r\n};\r\n\r\n/**\r\n * Ensures that the simulcast group is present in the answer, _if_ native\r\n * simulcast is enabled,\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nNativeSimulcastSender.prototype.transformAnswer = function (desc) {\r\n\r\n  if (!this.simulcastUtils.isValidDescription(desc) || this._isUsingScreenStream) {\r\n    return desc;\r\n  }\r\n\r\n  var sb = desc.sdp.split('\\r\\n');\r\n\r\n  // Even if we have enabled native simulcasting previously\r\n  // (with a call to SLD with an appropriate SDP, for example),\r\n  // createAnswer seems to consistently generate incomplete SDP\r\n  // with missing SSRCS.\r\n  //\r\n  // So, subsequent calls to SLD will have missing SSRCS and presence\r\n  // won't have the complete list of SRCs.\r\n  this._ensureSimulcastGroup(sb);\r\n\r\n  desc = new RTCSessionDescription({\r\n    type: desc.type,\r\n    sdp: sb.join('\\r\\n')\r\n  });\r\n\r\n  this.logger.fine(['Transformed answer', desc.sdp].join(' '));\r\n\r\n  return desc;\r\n};\r\n\r\n\r\n/**\r\n *\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nNativeSimulcastSender.prototype.transformLocalDescription = function (desc) {\r\n  return desc;\r\n};\r\n\r\n/**\r\n * Removes the ssrc-group:SIM from the remote description bacause Chrome\r\n * either gets confused and thinks this is an FID group or, if an FID group\r\n * is already present, it fails to set the remote description.\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nSimulcastReceiver.prototype.transformRemoteDescription = function (desc) {\r\n\r\n  if (desc && desc.sdp) {\r\n    var sb = desc.sdp.split('\\r\\n');\r\n\r\n    this._updateRemoteMaps(sb);\r\n    this._cacheRemoteVideoSources(sb);\r\n\r\n    // NOTE(gp) this needs to be called after updateRemoteMaps because we\r\n    // need the simulcast group in the _updateRemoteMaps() method.\r\n    this.simulcastUtils._removeSimulcastGroup(sb);\r\n\r\n    if (desc.sdp.indexOf('a=ssrc-group:SIM') !== -1) {\r\n      // We don't need the goog conference flag if we're not doing\r\n      // simulcast.\r\n      this._ensureGoogConference(sb);\r\n    }\r\n\r\n    desc = new RTCSessionDescription({\r\n      type: desc.type,\r\n      sdp: sb.join('\\r\\n')\r\n    });\r\n\r\n    this.logger.fine(['Transformed remote description', desc.sdp].join(' '));\r\n  }\r\n\r\n  return desc;\r\n};\r\n\r\nNativeSimulcastSender.prototype._setLocalVideoStreamEnabled = function (ssrc, enabled) {\r\n  // Nothing to do here, native simulcast does that auto-magically.\r\n};\r\n\r\nNativeSimulcastSender.prototype.constructor = NativeSimulcastSender;\r\n\r\nfunction SimpleSimulcastSender() {\r\n  SimulcastSender.call(this);\r\n}\r\n\r\nSimpleSimulcastSender.prototype = Object.create(SimulcastSender.prototype);\r\n\r\nSimpleSimulcastSender.prototype.localStream = null;\r\nSimpleSimulcastSender.prototype._localMaps = {\r\n  msids: [],\r\n  msid2ssrc: {}\r\n};\r\n\r\n/**\r\n * Groups local video sources together in the ssrc-group:SIM group.\r\n *\r\n * @param lines\r\n * @private\r\n */\r\nSimpleSimulcastSender.prototype._groupLocalVideoSources = function (lines) {\r\n  var sb, videoSources, ssrcs = [], ssrc;\r\n\r\n  this.logger.info('Grouping local video sources...');\r\n\r\n  videoSources = this.simulcastUtils.parseMedia(lines, ['video'])[0];\r\n\r\n  for (ssrc in videoSources.sources) {\r\n    // jitsi-meet destroys/creates streams at various places causing\r\n    // the original local stream ids to change. The only thing that\r\n    // remains unchanged is the trackid.\r\n    this._localMaps.msid2ssrc[videoSources.sources[ssrc].msid.split(' ')[1]] = ssrc;\r\n  }\r\n\r\n  var self = this;\r\n  // TODO(gp) add only \"free\" sources.\r\n  this._localMaps.msids.forEach(function (msid) {\r\n    ssrcs.push(self._localMaps.msid2ssrc[msid]);\r\n  });\r\n\r\n  if (!videoSources.groups) {\r\n    videoSources.groups = [];\r\n  }\r\n\r\n  videoSources.groups.push({\r\n    'semantics': 'SIM',\r\n    'ssrcs': ssrcs\r\n  });\r\n\r\n  sb = this.simulcastUtils._compileVideoSources(videoSources);\r\n\r\n  this.simulcastUtils._replaceVideoSources(lines, sb);\r\n};\r\n\r\n/**\r\n * GUM for simulcast.\r\n *\r\n * @param constraints\r\n * @param success\r\n * @param err\r\n */\r\nSimpleSimulcastSender.prototype.getUserMedia = function (constraints, success, err) {\r\n\r\n  // TODO(gp) what if we request a resolution not supported by the hardware?\r\n  // TODO(gp) make the lq stream configurable; although this wouldn't work with native simulcast\r\n  var lqConstraints = {\r\n    audio: false,\r\n    video: {\r\n      mandatory: {\r\n        maxWidth: 320,\r\n        maxHeight: 180,\r\n        maxFrameRate: 15\r\n      }\r\n    }\r\n  };\r\n\r\n  this.logger.info('HQ constraints: ', constraints);\r\n  this.logger.info('LQ constraints: ', lqConstraints);\r\n\r\n\r\n  // NOTE(gp) if we request the lq stream first webkitGetUserMedia\r\n  // fails randomly. Tested with Chrome 37. As fippo suggested, the\r\n  // reason appears to be that Chrome only acquires the cam once and\r\n  // then downscales the picture (https://code.google.com/p/chromium/issues/detail?id=346616#c11)\r\n\r\n  var self = this;\r\n  navigator.webkitGetUserMedia(constraints, function (hqStream) {\r\n\r\n    self.localStream = hqStream;\r\n\r\n    // reset local maps.\r\n    self._localMaps.msids = [];\r\n    self._localMaps.msid2ssrc = {};\r\n\r\n    // add hq trackid to local map\r\n    self._localMaps.msids.push(hqStream.getVideoTracks()[0].id);\r\n\r\n    navigator.webkitGetUserMedia(lqConstraints, function (lqStream) {\r\n\r\n      self.displayedLocalVideoStream = lqStream;\r\n\r\n      // NOTE(gp) The specification says Array.forEach() will visit\r\n      // the array elements in numeric order, and that it doesn't\r\n      // visit elements that don't exist.\r\n\r\n      // add lq trackid to local map\r\n      self._localMaps.msids.splice(0, 0, lqStream.getVideoTracks()[0].id);\r\n\r\n      self.localStream.addTrack(lqStream.getVideoTracks()[0]);\r\n      success(self.localStream);\r\n    }, err);\r\n  }, err);\r\n};\r\n\r\n/**\r\n * Prepares the local description for public usage (i.e. to be signaled\r\n * through Jingle to the focus).\r\n *\r\n * @param desc\r\n * @returns {RTCSessionDescription}\r\n */\r\nSimpleSimulcastSender.prototype.reverseTransformLocalDescription = function (desc) {\r\n  var sb;\r\n\r\n  if (!this.simulcastUtils.isValidDescription(desc)) {\r\n    return desc;\r\n  }\r\n\r\n  sb = desc.sdp.split('\\r\\n');\r\n\r\n  this._groupLocalVideoSources(sb);\r\n\r\n  desc = new RTCSessionDescription({\r\n    type: desc.type,\r\n    sdp: sb.join('\\r\\n')\r\n  });\r\n\r\n  this.logger.fine('Grouped local video sources');\r\n  this.logger.fine(desc.sdp);\r\n\r\n  return desc;\r\n};\r\n\r\n/**\r\n * Ensures that the simulcast group is present in the answer, _if_ native\r\n * simulcast is enabled,\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nSimpleSimulcastSender.prototype.transformAnswer = function (desc) {\r\n  return desc;\r\n};\r\n\r\n\r\n/**\r\n *\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nSimpleSimulcastSender.prototype.transformLocalDescription = function (desc) {\r\n\r\n  var sb = desc.sdp.split('\\r\\n');\r\n\r\n  this.simulcastUtils._removeSimulcastGroup(sb);\r\n\r\n  desc = new RTCSessionDescription({\r\n    type: desc.type,\r\n    sdp: sb.join('\\r\\n')\r\n  });\r\n\r\n  this.logger.fine('Transformed local description');\r\n  this.logger.fine(desc.sdp);\r\n\r\n  return desc;\r\n};\r\n\r\nSimpleSimulcastSender.prototype._setLocalVideoStreamEnabled = function (ssrc, enabled) {\r\n  var trackid;\r\n\r\n  var self = this;\r\n  this.logger.log(['Requested to', enabled ? 'enable' : 'disable', ssrc].join(' '));\r\n  if (Object.keys(this._localMaps.msid2ssrc).some(function (tid) {\r\n      // Search for the track id that corresponds to the ssrc\r\n      if (self._localMaps.msid2ssrc[tid] == ssrc) {\r\n        trackid = tid;\r\n        return true;\r\n      }\r\n    }) && self.localStream.getVideoTracks().some(function (track) {\r\n      // Start/stop the track that corresponds to the track id\r\n      if (track.id === trackid) {\r\n        track.enabled = enabled;\r\n        return true;\r\n      }\r\n    })) {\r\n    this.logger.log([trackid, enabled ? 'enabled' : 'disabled'].join(' '));\r\n    $(document).trigger(enabled\r\n      ? 'simulcastlayerstarted'\r\n      : 'simulcastlayerstopped');\r\n  } else {\r\n    this.logger.error(\"I don't have a local stream with SSRC \" + ssrc);\r\n  }\r\n};\r\n\r\nSimpleSimulcastSender.prototype.constructor = SimpleSimulcastSender;\r\n\r\nfunction NoSimulcastSender() {\r\n  SimulcastSender.call(this);\r\n}\r\n\r\nNoSimulcastSender.prototype = Object.create(SimulcastSender.prototype);\r\n\r\n/**\r\n * GUM for simulcast.\r\n *\r\n * @param constraints\r\n * @param success\r\n * @param err\r\n */\r\nNoSimulcastSender.prototype.getUserMedia = function (constraints, success, err) {\r\n  navigator.webkitGetUserMedia(constraints, function (hqStream) {\r\n    success(hqStream);\r\n  }, err);\r\n};\r\n\r\n/**\r\n * Prepares the local description for public usage (i.e. to be signaled\r\n * through Jingle to the focus).\r\n *\r\n * @param desc\r\n * @returns {RTCSessionDescription}\r\n */\r\nNoSimulcastSender.prototype.reverseTransformLocalDescription = function (desc) {\r\n  return desc;\r\n};\r\n\r\n/**\r\n * Ensures that the simulcast group is present in the answer, _if_ native\r\n * simulcast is enabled,\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nNoSimulcastSender.prototype.transformAnswer = function (desc) {\r\n  return desc;\r\n};\r\n\r\n\r\n/**\r\n *\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nNoSimulcastSender.prototype.transformLocalDescription = function (desc) {\r\n  return desc;\r\n};\r\n\r\nNoSimulcastSender.prototype._setLocalVideoStreamEnabled = function (ssrc, enabled) {\r\n\r\n};\r\n\r\nNoSimulcastSender.prototype.constructor = NoSimulcastSender;\r\n\r\n/**\r\n *\r\n * @constructor\r\n */\r\nfunction SimulcastManager() {\r\n\r\n  // Create the simulcast utilities.\r\n  this.simulcastUtils = new SimulcastUtils();\r\n\r\n  // Create remote simulcast.\r\n  this.simulcastReceiver = new SimulcastReceiver();\r\n\r\n  // Initialize local simulcast.\r\n\r\n  // TODO(gp) move into SimulcastManager.prototype.getUserMedia and take into\r\n  // account constraints.\r\n  // if (!config.enableSimulcast) {\r\n  this.simulcastSender = new NoSimulcastSender();\r\n  // } else {\r\n  //\r\n  //     var isChromium = window.chrome,\r\n  //         vendorName = window.navigator.vendor;\r\n  //     if(isChromium !== null && isChromium !== undefined\r\n  //         /* skip opera */\r\n  //         && vendorName === \"Google Inc.\"\r\n  //         /* skip Chromium as suggested by fippo */\r\n  //         && !window.navigator.appVersion.match(/Chromium\\//) ) {\r\n  //         var ver = parseInt(window.navigator.appVersion.match(/Chrome\\/(\\d+)\\./)[1], 10);\r\n  //         if (ver > 37) {\r\n  //             this.simulcastSender = new NativeSimulcastSender();\r\n  //         } else {\r\n  //             this.simulcastSender = new NoSimulcastSender();\r\n  //         }\r\n  //     } else {\r\n  //         this.simulcastSender = new NoSimulcastSender();\r\n  //     }\r\n  //\r\n  // }\r\n}\r\n\r\n/**\r\n * Restores the simulcast groups of the remote description. In\r\n * transformRemoteDescription we remove those in order for the set remote\r\n * description to succeed. The focus needs the signal the groups to new\r\n * participants.\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nSimulcastManager.prototype.reverseTransformRemoteDescription = function (desc) {\r\n  return this.simulcastReceiver.reverseTransformRemoteDescription(desc);\r\n};\r\n\r\n/**\r\n * Removes the ssrc-group:SIM from the remote description bacause Chrome\r\n * either gets confused and thinks this is an FID group or, if an FID group\r\n * is already present, it fails to set the remote description.\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nSimulcastManager.prototype.transformRemoteDescription = function (desc) {\r\n  return this.simulcastReceiver.transformRemoteDescription(desc);\r\n};\r\n\r\n/**\r\n * Gets the fully qualified msid (stream.id + track.id) associated to the\r\n * SSRC.\r\n *\r\n * @param ssrc\r\n * @returns {*}\r\n */\r\nSimulcastManager.prototype.getRemoteVideoStreamIdBySSRC = function (ssrc) {\r\n  return this.simulcastReceiver.getRemoteVideoStreamIdBySSRC(ssrc);\r\n};\r\n\r\n/**\r\n * Returns a stream with single video track, the one currently being\r\n * received by this endpoint.\r\n *\r\n * @param stream the remote simulcast stream.\r\n * @returns {webkitMediaStream}\r\n */\r\nSimulcastManager.prototype.getReceivingVideoStream = function (stream) {\r\n  return this.simulcastReceiver.getReceivingVideoStream(stream);\r\n};\r\n\r\n/**\r\n *\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nSimulcastManager.prototype.transformLocalDescription = function (desc) {\r\n  return this.simulcastSender.transformLocalDescription(desc);\r\n};\r\n\r\n/**\r\n *\r\n * @returns {*}\r\n */\r\nSimulcastManager.prototype.getLocalVideoStream = function () {\r\n  return this.simulcastSender.getLocalVideoStream();\r\n};\r\n\r\n/**\r\n * GUM for simulcast.\r\n *\r\n * @param constraints\r\n * @param success\r\n * @param err\r\n */\r\nSimulcastManager.prototype.getUserMedia = function (constraints, success, err) {\r\n\r\n  this.simulcastSender.getUserMedia(constraints, success, err);\r\n};\r\n\r\n/**\r\n * Prepares the local description for public usage (i.e. to be signaled\r\n * through Jingle to the focus).\r\n *\r\n * @param desc\r\n * @returns {RTCSessionDescription}\r\n */\r\nSimulcastManager.prototype.reverseTransformLocalDescription = function (desc) {\r\n  return this.simulcastSender.reverseTransformLocalDescription(desc);\r\n};\r\n\r\n/**\r\n * Ensures that the simulcast group is present in the answer, _if_ native\r\n * simulcast is enabled,\r\n *\r\n * @param desc\r\n * @returns {*}\r\n */\r\nSimulcastManager.prototype.transformAnswer = function (desc) {\r\n  return this.simulcastSender.transformAnswer(desc);\r\n};\r\n\r\nSimulcastManager.prototype.getReceivingSSRC = function (jid) {\r\n  return this.simulcastReceiver.getReceivingSSRC(jid);\r\n};\r\n\r\nSimulcastManager.prototype.getReceivingVideoStreamBySSRC = function (msid) {\r\n  return this.simulcastReceiver.getReceivingVideoStreamBySSRC(msid);\r\n};\r\n\r\n/**\r\n *\r\n * @param lines\r\n * @param mediatypes\r\n * @returns {*}\r\n */\r\nSimulcastManager.prototype.parseMedia = function (lines, mediatypes) {\r\n  var sb = lines.sdp.split('\\r\\n');\r\n  return this.simulcastUtils.parseMedia(sb, mediatypes);\r\n};\r\n\r\nSimulcastManager.prototype._setReceivingVideoStream = function (resource, ssrc) {\r\n  this.simulcastReceiver._setReceivingVideoStream(resource, ssrc);\r\n};\r\n\r\nSimulcastManager.prototype._setLocalVideoStreamEnabled = function (ssrc, enabled) {\r\n  this.simulcastSender._setLocalVideoStreamEnabled(ssrc, enabled);\r\n};\r\n\r\nSimulcastManager.prototype.resetSender = function () {\r\n  if (typeof this.simulcastSender.reset === 'function') {\r\n    this.simulcastSender.reset();\r\n  }\r\n};\r\n\r\n/**\r\n *\r\n * @constructor\r\n */\r\nfunction SimulcastLogger(name, lvl) {\r\n  this.name = name;\r\n  this.lvl = lvl;\r\n}\r\n\r\nSimulcastLogger.prototype.log = function (text) {\r\n  if (this.lvl) {\r\n    console.log(text);\r\n  }\r\n};\r\n\r\nSimulcastLogger.prototype.info = function (text) {\r\n  if (this.lvl > 1) {\r\n    console.info(text);\r\n  }\r\n};\r\n\r\nSimulcastLogger.prototype.fine = function (text) {\r\n  if (this.lvl > 2) {\r\n    console.log(text);\r\n  }\r\n};\r\n\r\nSimulcastLogger.prototype.error = function (text) {\r\n  console.error(text);\r\n};\r\n\r\nvar simulcast = new SimulcastManager();\r\n\r\nexports = module.exports = simulcast;\r\n\r\n$(document).bind('simulcastlayerschanged', function (event, endpointSimulcastLayers) {\r\n  endpointSimulcastLayers.forEach(function (esl) {\r\n    var ssrc = esl.simulcastLayer.primarySSRC;\r\n    simulcast._setReceivingVideoStream(esl.endpoint, ssrc);\r\n  });\r\n});\r\n\r\n$(document).bind('startsimulcastlayer', function (event, simulcastLayer) {\r\n  var ssrc = simulcastLayer.primarySSRC;\r\n  simulcast._setLocalVideoStreamEnabled(ssrc, true);\r\n});\r\n\r\n$(document).bind('stopsimulcastlayer', function (event, simulcastLayer) {\r\n  var ssrc = simulcastLayer.primarySSRC;\r\n  simulcast._setLocalVideoStreamEnabled(ssrc, false);\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/libs/simulcast.js\n// module id = 38\n// module chunks = 0","var parser = require('./parser');\nvar writer = require('./writer');\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseFmtpConfig = parser.parseFmtpConfig;\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-transform/lib/index.js\n// module id = 39\n// module chunks = 0","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar fmtpReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  }\n  return acc;\n};\n\nexports.parseFmtpConfig = function (str) {\n  return str.split(/\\;\\s?/).reduce(fmtpReducer, {});\n};\n\nexports.parsePayloads = function (str) {\n  return str.split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-transform/lib/parser.js\n// module id = 40\n// module chunks = 0","var grammar = module.exports = {\n  v: [{\n      name: 'version',\n      reg: /^(\\d*)$/\n  }],\n  o: [{ //o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: \"%s %s %d %s IP%d %s\"\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly..\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  //k: [{}], // outdated thing ignored\n  t: [{ //t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: \"%d %d\"\n  }],\n  c: [{ //c=IN IP4 10.47.197.26\n      name: 'connection',\n      reg: /^IN IP(\\d) (\\S*)/,\n      names: ['version', 'ip'],\n      format: \"IN IP%d %s\"\n  }],\n  b: [{ //b=AS:4000\n      push: 'bandwidth',\n      reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n      names: ['type', 'limit'],\n      format: \"%s:%s\"\n  }],\n  m: [{ //m=video 51744 RTP/AVP 126 97 98 34 31\n      // NB: special - pushes to session\n      // TODO: rtp/fmtp should be filtered by the payloads found here?\n      reg: /^(\\w*) (\\d*) ([\\w\\/]*)(?: (.*))?/,\n      names: ['type', 'port', 'protocol', 'payloads'],\n      format: \"%s %d %s %s\"\n  }],\n  a: [\n    { //a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-\\.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding) ?\n          \"rtpmap:%d %s/%s/%s\":\n          o.rate ?\n          \"rtpmap:%d %s/%s\":\n          \"rtpmap:%d %s\";\n      }\n    },\n    {\n      //a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      //a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: \"fmtp:%d %s\"\n    },\n    { //a=control:streamid=0\n        name: 'control',\n        reg: /^control:(.*)/,\n        format: \"control:%s\"\n    },\n    { //a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null) ?\n          \"rtcp:%d %s IP%d %s\":\n          \"rtcp:%d\";\n      }\n    },\n    { //a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: \"rtcp-fb:%d trr-int %d\"\n    },\n    { //a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null) ?\n          \"rtcp-fb:%s %s %s\":\n          \"rtcp-fb:%s %s\";\n      }\n    },\n    { //a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      //a=extmap:1/recvonly URI-gps-string\n      push: 'ext',\n      reg: /^extmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,\n      names: ['value', 'uri', 'config'], // value may include \"/direction\" suffix\n      format: function (o) {\n        return (o.config != null) ?\n          \"extmap:%s %s %s\":\n          \"extmap:%s %s\";\n      }\n    },\n    {\n      //a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null) ?\n          \"crypto:%d %s %s %s\":\n          \"crypto:%d %s %s\";\n      }\n    },\n    { //a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: \"setup:%s\"\n    },\n    { //a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: \"mid:%s\"\n    },\n    { //a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: \"msid:%s\"\n    },\n    { //a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*)/,\n      format: \"ptime:%d\"\n    },\n    { //a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*)/,\n      format: \"maxptime:%d\"\n    },\n    { //a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    { //a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    { //a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: \"ice-ufrag:%s\"\n    },\n    { //a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: \"ice-pwd:%s\"\n    },\n    { //a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: \"fingerprint:%s %s\"\n    },\n    {\n      //a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      //a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      //a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = \"candidate:%s %d %s %d %s %d typ %s\";\n\n        str += (o.raddr != null) ? \" raddr %s rport %d\" : \"%v%v\";\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? \" tcptype %s\" : \"%v\";\n\n        if (o.generation != null) {\n          str += \" generation %d\";\n        }\n\n        str += (o['network-id'] != null) ? \" network-id %d\" : \"%v\";\n        str += (o['network-cost'] != null) ? \" network-cost %d\" : \"%v\";\n        return str;\n      }\n    },\n    { //a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    { //a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: \"remote-candidates:%s\"\n    },\n    { //a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: \"ice-options:%s\"\n    },\n    { //a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: \"ssrcs\",\n      reg: /^ssrc:(\\d*) ([\\w_]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = \"ssrc:%d\";\n        if (o.attribute != null) {\n          str += \" %s\";\n          if (o.value != null) {\n            str += \":%s\";\n          }\n        }\n        return str;\n      }\n    },\n    { //a=ssrc-group:FEC 1 2\n      push: \"ssrcGroups\",\n      reg: /^ssrc-group:(\\w*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: \"ssrc-group:%s %s\"\n    },\n    { //a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: \"msidSemantic\",\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: \"msid-semantic: %s %s\" // space after \":\" is not accidental\n    },\n    { //a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: \"group:%s %s\"\n    },\n    { //a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    { //a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    { //a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null) ?\n          \"sctpmap:%s %s %s\" :\n          \"sctpmap:%s %s\";\n      }\n    },\n    { // any a= that we don't understand is kepts verbatim on media.invalid\n      push: 'invalid',\n      names: [\"value\"]\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = \"%s\";\n    }\n  });\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-transform/lib/grammar.js\n// module id = 41\n// module chunks = 0","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n      case '%%':\n        return '%';\n      case '%s':\n        return String(arg);\n      case '%d':\n        return Number(arg);\n      case '%v':\n        return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // \"v=0\" must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = \" \"; // \"s= \" must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = \"\";\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-transform/lib/writer.js\n// module id = 42\n// module chunks = 0","var simulcast = require('../../libs/simulcast');\r\nvar SDP = require('./strophe.jingle.sdp');\r\nvar transform = require('sdp-transform');\r\nvar Interop = require('sdp-interop').Interop;\r\nvar ms = require(\"./manis.utils\");\r\n\r\nfunction TraceablePeerConnection(ice_config, constraints) {\r\n  var self = this;\r\n\r\n  var semantics = ms.getSemantics();\r\n  if(!ice_config){\r\n    ice_config = {};\r\n  }\r\n  if (semantics && semantics != \"firefox\") {\r\n      ice_config.sdpSemantics = semantics;\r\n  }\r\n  this.peerconnection = new RTCPeerConnection(ice_config);\r\n  // this.peerconnection = new RTCPeerConnection(ice_config, constraints);\r\n  this.updateLog = [];\r\n  this.stats = {};\r\n  this.statsinterval = null;\r\n  this.maxstats = 0; // limit to 300 values, i.e. 5 minutes; set to 0 to disable\r\n  // var Interop = require('sdp-interop').Interop;\r\n  this.interop = new Interop();\r\n  this.localVideoSender = null;\r\n  this.localAudioSender = null;\r\n  this.resetLocalDescriptionTimes = 0;\r\n  this.negotiationInprogress = false; // 协商进行中\r\n  /**\r\n   * Array of ssrcs that will be added on next modifySources call.\r\n   * @type {Array}\r\n   */\r\n  this.addssrc = [];\r\n  /**\r\n   * Array of ssrcs that will be added on next modifySources call.\r\n   * @type {Array}\r\n   */\r\n  this.removessrc = [];\r\n  /**\r\n   * Pending operation that will be done during modifySources call.\r\n   * Currently 'mute'/'unmute' operations are supported.\r\n   *\r\n   * @type {String}\r\n   */\r\n  this.pendingop = null;\r\n\r\n  /**\r\n   * data channel\r\n   * @type {null}\r\n   */\r\n  this.channel = null;\r\n\r\n  /**\r\n   * Flag indicates that peer connection stream have changed and modifySources should proceed.\r\n   * @type {boolean}\r\n   */\r\n  this.switchstreams = false;\r\n\r\n  // override as desired\r\n  this.trace = function (what, info) {\r\n    //console.warn('WTRACE', what, info);\r\n    self.updateLog.push({\r\n      time: new Date(),\r\n      type: what,\r\n      value: info || \"\"\r\n    });\r\n  };\r\n  this.onicecandidate = null;\r\n  this.peerconnection.onicecandidate = function (event) {\r\n    self.trace('onicecandidate', JSON.stringify(event.candidate, null, ' '));\r\n    if (self.onicecandidate !== null) {\r\n      self.onicecandidate(event);\r\n    }\r\n  };\r\n  this.peerconnection.ontrack = function(event) {\r\n    // TODO change to ontrack while onaddstream is droped\r\n  };\r\n  this.onaddstream = null;\r\n  this.peerconnection.onaddstream = function (event) {\r\n    self.trace('onaddstream', event.stream.id);\r\n    if (self.onaddstream !== null) {\r\n      self.onaddstream(event);\r\n    }\r\n  };\r\n  this.onremovestream = null;\r\n  this.peerconnection.onremovestream = function (event) {\r\n    self.trace('onremovestream', event.stream.id);\r\n    if (self.onremovestream !== null) {\r\n      self.onremovestream(event);\r\n    }\r\n  };\r\n  this.onsignalingstatechange = null;\r\n  this.peerconnection.onsignalingstatechange = function (event) {\r\n    self.trace('onsignalingstatechange', self.signalingState);\r\n    console.info('onsignalingstatechange', self.signalingState);\r\n    if (self.onsignalingstatechange !== null) {\r\n      self.onsignalingstatechange(event);\r\n    }\r\n  };\r\n  this.oniceconnectionstatechange = null;\r\n  this.peerconnection.oniceconnectionstatechange = function (event) {\r\n    self.trace('oniceconnectionstatechange', self.iceConnectionState);\r\n    console.info('oniceconnectionstatechange', self.iceConnectionState);\r\n    if (self.oniceconnectionstatechange !== null) {\r\n      self.oniceconnectionstatechange(event);\r\n    }\r\n  };\r\n  this.onnegotiationneeded = null;\r\n  this.peerconnection.onnegotiationneeded = function (event) {\r\n    self.trace('onnegotiationneeded');\r\n    if (self.onnegotiationneeded !== null) {\r\n      self.onnegotiationneeded(event);\r\n    }\r\n  };\r\n  self.ondatachannel = null;\r\n  this.peerconnection.ondatachannel = function (event) {\r\n    console.log('on data channel : ', event);\r\n    if (event.channel) {\r\n      self.channel = event.channel;\r\n    }\r\n    self.trace('ondatachannel', event);\r\n    if (self.ondatachannel !== null) {\r\n      self.ondatachannel(event);\r\n    }\r\n  };\r\n  if (!navigator.mozGetUserMedia && this.maxstats) {\r\n    this.statsinterval = window.setInterval(function () {\r\n      self.peerconnection.getStats(function (stats) {\r\n        var results = stats.result();\r\n        for (var i = 0; i < results.length; ++i) {\r\n          //console.log(results[i].type, results[i].id, results[i].names())\r\n          var now = new Date();\r\n          results[i].names().forEach(function (name) {\r\n            var id = results[i].id + '-' + name;\r\n            if (!self.stats[id]) {\r\n              self.stats[id] = {\r\n                startTime: now,\r\n                endTime: now,\r\n                values: [],\r\n                times: []\r\n              };\r\n            }\r\n            self.stats[id].values.push(results[i].stat(name));\r\n            self.stats[id].times.push(now.getTime());\r\n            if (self.stats[id].values.length > self.maxstats) {\r\n              self.stats[id].values.shift();\r\n              self.stats[id].times.shift();\r\n            }\r\n            self.stats[id].endTime = now;\r\n          });\r\n        }\r\n      });\r\n\r\n    }, 1000);\r\n  }\r\n\r\n};\r\n\r\ndumpSDP = function (description) {\r\n  return 'type: ' + description.type + '\\r\\n' + description.sdp;\r\n}\r\n\r\nwindow.dumpSDP = dumpSDP;\r\n\r\nif (TraceablePeerConnection.prototype.__defineGetter__ !== undefined) {\r\n  TraceablePeerConnection.prototype.__defineGetter__('signalingState', function () {\r\n    return this.peerconnection.signalingState;\r\n  });\r\n  TraceablePeerConnection.prototype.__defineGetter__('iceConnectionState', function () {\r\n    return this.peerconnection.iceConnectionState;\r\n  });\r\n  TraceablePeerConnection.prototype.__defineGetter__('localDescription', function () {\r\n    var publicLocalDescription = simulcast.reverseTransformLocalDescription(this.peerconnection.localDescription);\r\n    // if we're running on FF, transform to Plan B first.\r\n    if (navigator.mozGetUserMedia && publicLocalDescription) {\r\n      publicLocalDescription = this.interop.toPlanB(publicLocalDescription);\r\n    }\r\n    return publicLocalDescription;\r\n  });\r\n  TraceablePeerConnection.prototype.__defineGetter__('remoteDescription', function () {\r\n    var publicRemoteDescription = simulcast.reverseTransformRemoteDescription(this.peerconnection.remoteDescription);\r\n    // if we're running on FF, transform to Plan B first.\r\n    if (navigator.mozGetUserMedia && publicRemoteDescription) {\r\n      publicRemoteDescription = this.interop.toPlanB(publicRemoteDescription);\r\n    }\r\n    return publicRemoteDescription;\r\n  });\r\n}\r\n\r\nTraceablePeerConnection.prototype.addStream = function (stream) {\r\n  this.trace('addStream', stream.id);\r\n  simulcast.resetSender();\r\n  try {\r\n    var that = this;\r\n    stream.getTracks().forEach(function (track) {\r\n      var sender = that.peerconnection.addTrack(\r\n        track,\r\n        stream\r\n      );\r\n      if (sender.track.kind == 'video' && !that.localVideoSender) {\r\n        that.localVideoSender = sender;\r\n      }\r\n      if (sender.track.kind == 'audio' && !that.localAudioSender) {\r\n        that.localAudioSender = sender;\r\n      }\r\n    });\r\n\r\n    // this.peerconnection.addStream(stream);\r\n  }\r\n  catch (e) {\r\n    console.error(e);\r\n    return;\r\n  }\r\n};\r\n\r\nTraceablePeerConnection.prototype.removeStream = function (stream, stopStreams) {\r\n  this.trace('removeStream', stream.id);\r\n  simulcast.resetSender();\r\n  if (stopStreams) {\r\n    stream.getAudioTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n    stream.getVideoTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n  }\r\n  this.peerconnection.removeStream(stream);\r\n};\r\n\r\nTraceablePeerConnection.prototype.createDataChannel = function (label, opts) {\r\n  this.trace('createDataChannel', label, opts);\r\n  return this.peerconnection.createDataChannel(label, opts);\r\n};\r\n\r\nTraceablePeerConnection.prototype.setLocalDescription = function (description, successCallback, failureCallback) {\r\n  var self = this;\r\n  this.trace('setLocalDescription', dumpSDP(description));\r\n  this.peerconnection.setLocalDescription(description,\r\n      function () {\r\n        self.trace('setLocalDescriptionOnSuccess');\r\n        successCallback();\r\n      },\r\n      function (err) {\r\n        self.trace('setLocalDescriptionOnFailure', err);\r\n        failureCallback(err);\r\n      }\r\n  );\r\n};\r\n\r\nTraceablePeerConnection.prototype.setRemoteDescription = function (description, successCallback, failureCallback) {\r\n  var self = this;\r\n  this.trace('setRemoteDescription', dumpSDP(description));\r\n  this.peerconnection.setRemoteDescription(description,\r\n      function () {\r\n        self.trace('setRemoteDescriptionOnSuccess');\r\n        successCallback();\r\n      },\r\n      function (err) {\r\n        self.trace('setRemoteDescriptionOnFailure', err);\r\n        failureCallback(err);\r\n      }\r\n  );\r\n};\r\n\r\nTraceablePeerConnection.prototype.hardMuteVideo = function (muted) {\r\n  this.pendingop = muted ? 'mute' : 'unmute';\r\n};\r\n\r\nTraceablePeerConnection.prototype.enqueueAddSsrc = function (channel, ssrcLines) {\r\n  if (!this.addssrc[channel]) {\r\n    this.addssrc[channel] = '';\r\n  }\r\n  this.addssrc[channel] += ssrcLines;\r\n};\r\n\r\nTraceablePeerConnection.prototype.addSource = function (elem) {\r\n  console.log('addssrc', new Date().getTime());\r\n  console.log('ice', this.iceConnectionState);\r\n  var sdp = new SDP(this.remoteDescription.sdp);\r\n  var mySdp = new SDP(this.peerconnection.localDescription.sdp);\r\n\r\n  var self = this;\r\n  $(elem).each(function (idx, content) {\r\n    var name = $(content).attr('name');\r\n    var lines = '';\r\n    tmp = $(content).find('ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]').each(function () {\r\n      var semantics = this.getAttribute('semantics');\r\n      var ssrcs = $(this).find('>source').map(function () {\r\n        return this.getAttribute('ssrc');\r\n      }).get();\r\n\r\n      if (ssrcs.length != 0) {\r\n        lines += 'a=ssrc-group:' + semantics + ' ' + ssrcs.join(' ') + '\\r\\n';\r\n      }\r\n    });\r\n    tmp = $(content).find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]'); // can handle both >source and >description>source\r\n    tmp.each(function () {\r\n      var ssrc = $(this).attr('ssrc');\r\n      if (mySdp.containsSSRC(ssrc)) {\r\n        /**\r\n         * This happens when multiple participants change their streams at the same time and\r\n         * ColibriFocus.modifySources have to wait for stable state. In the meantime multiple\r\n         * addssrc are scheduled for update IQ. See\r\n         */\r\n        console.warn(\"Got add stream request for my own ssrc: \" + ssrc);\r\n        return;\r\n      }\r\n      $(this).find('>parameter').each(function () {\r\n        lines += 'a=ssrc:' + ssrc + ' ' + $(this).attr('name');\r\n        if ($(this).attr('value') && $(this).attr('value').length)\r\n          lines += ':' + $(this).attr('value');\r\n        lines += '\\r\\n';\r\n      });\r\n    });\r\n    if(lines){\r\n      var nameIndex, tempMedia;\r\n      if(name == 'audio'){\r\n        nameIndex = 0;\r\n        tempMedia = sdp.media[nameIndex];\r\n      }else if(name == 'video'){\r\n        nameIndex = 1;\r\n        tempMedia = sdp.media[nameIndex];\r\n      }\r\n      sdp.media.forEach(function (media, idx) {\r\n        console.log('++++++++++++++ source add lines 1 \\n', SDPUtil.find_line(media, 'a=mid:'), name);\r\n        if (!SDPUtil.find_line(media, 'a=mid:' + name) && !SDPUtil.find_line(media, 'a=mid:' + nameIndex))\r\n          return;\r\n        // sdp.media[idx] += lines;\r\n        if(name == 'audio' || name == 'video' && tempMedia){\r\n          console.log('++++++++++++++ source add 2 ', name, \"\\n\", tempMedia.split('a=ssrc:', 2)[0] );\r\n          if(tempMedia.split('a=ssrc:', 2)[0]){\r\n            lines = tempMedia.split('a=ssrc:', 2)[0] + lines;\r\n          }\r\n          sdp.media.push(lines);\r\n          self.enqueueAddSsrc(idx, lines);\r\n        }\r\n      });\r\n    }\r\n    console.log('++++++++++++++ source add medias \\n', sdp.media);\r\n    sdp.raw = sdp.session + sdp.media.join('');\r\n    console.log('++++++++++++++ source add sdp \\n', sdp.raw);\r\n  });\r\n};\r\n\r\nTraceablePeerConnection.prototype.enqueueRemoveSsrc = function (channel, ssrcLines) {\r\n  if (!this.removessrc[channel]) {\r\n    this.removessrc[channel] = '';\r\n  }\r\n  this.removessrc[channel] += ssrcLines;\r\n};\r\n\r\nTraceablePeerConnection.prototype.removeSource = function (elem) {\r\n  console.log('removessrc', new Date().getTime());\r\n  console.log('ice', this.iceConnectionState);\r\n  var sdp = new SDP(this.remoteDescription.sdp);\r\n  var mySdp = new SDP(this.peerconnection.localDescription.sdp);\r\n\r\n  var self = this;\r\n  $(elem).each(function (idx, content) {\r\n    var name = $(content).attr('name');\r\n    var lines = '';\r\n    tmp = $(content).find('ssrc-group[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]').each(function () {\r\n      var semantics = this.getAttribute('semantics');\r\n      var ssrcs = $(this).find('>source').map(function () {\r\n        return this.getAttribute('ssrc');\r\n      }).get();\r\n\r\n      if (ssrcs.length != 0) {\r\n        lines += 'a=ssrc-group:' + semantics + ' ' + ssrcs.join(' ') + '\\r\\n';\r\n      }\r\n    });\r\n    tmp = $(content).find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]'); // can handle both >source and >description>source\r\n    tmp.each(function () {\r\n      var ssrc = $(this).attr('ssrc');\r\n      // This should never happen, but can be useful for bug detection\r\n      if (mySdp.containsSSRC(ssrc)) {\r\n        console.error(\"Got remove stream request for my own ssrc: \" + ssrc);\r\n        return;\r\n      }\r\n      $(this).find('>parameter').each(function () {\r\n        lines += 'a=ssrc:' + ssrc + ' ' + $(this).attr('name');\r\n        if ($(this).attr('value') && $(this).attr('value').length)\r\n          lines += ':' + $(this).attr('value');\r\n        lines += '\\r\\n';\r\n      });\r\n    });\r\n    sdp.media.forEach(function (media, idx) {\r\n      if (!SDPUtil.find_line(media, 'a=mid:' + name))\r\n        return;\r\n      sdp.media[idx] += lines;\r\n      self.enqueueRemoveSsrc(idx, lines);\r\n    });\r\n    sdp.raw = sdp.session + sdp.media.join('');\r\n  });\r\n};\r\n\r\nTraceablePeerConnection.prototype.modifySources = function (successCallback, isNeedAnswer) {\r\n  var self = this;\r\n  if (this.signalingState == 'closed') return;\r\n  if (!(this.addssrc.length || this.removessrc.length || this.pendingop !== null || this.switchstreams)) {\r\n    // There is nothing to do since scheduled job might have been executed by another succeeding call\r\n    console.warn('There is nothing to do since scheduled job might have been executed by another succeeding call');\r\n    if (successCallback) {\r\n      successCallback();\r\n    }\r\n    return;\r\n  }\r\n\r\n  // FIXME: this is a big hack\r\n  // https://code.google.com/p/webrtc/issues/detail?id=2688\r\n  // ^ has been fixed.\r\n\r\n  // Reset switch streams flag\r\n  this.switchstreams = false;\r\n  console.log('222222222222222221111111111111111111 \\n', this.remoteDescription.sdp);\r\n  var sdp = new SDP(this.remoteDescription.sdp);\r\n  console.log('22222222222222222222222222222222222 \\n', sdp.raw);\r\n  // add sources\r\n  this.addssrc.forEach(function (lines, idx) {\r\n    // sdp.media[idx] += lines;\r\n    sdp.media.push(lines);\r\n  });\r\n  this.addssrc = [];\r\n\r\n  // remove sources\r\n  this.removessrc.forEach(function (lines, idx) {\r\n    lines = lines.split('\\r\\n');\r\n    lines.pop(); // remove empty last element;\r\n    lines.forEach(function (line) {\r\n      sdp.media[idx] = sdp.media[idx].replace(line + '\\r\\n', '');\r\n    });\r\n  });\r\n  this.removessrc = [];\r\n\r\n  // FIXME:\r\n  // this was a hack for the situation when only one peer exists\r\n  // in the conference.\r\n  // check if still required and remove\r\n  if (sdp.media[0])\r\n    sdp.media[0] = sdp.media[0].replace('a=recvonly', 'a=sendrecv');\r\n  if (sdp.media[1])\r\n    sdp.media[1] = sdp.media[1].replace('a=recvonly', 'a=sendrecv');\r\n\r\n  sdp.raw = sdp.session + sdp.media.join('');\r\n  console.log('222222222222222223333333333333333333 \\n', sdp.raw, \"\\n\", sdp.media);\r\n  this.setRemoteDescription(new RTCSessionDescription({type: 'offer', sdp: sdp.raw}),\r\n    function () {\r\n\r\n      if (self.signalingState == 'closed') {\r\n        console.error(\"createAnswer attempt on closed state\");\r\n        return;\r\n      }\r\n\r\n      if (isNeedAnswer) {\r\n        self.createAnswer(\r\n          function (modifiedAnswer) {\r\n            // change video direction, see https://github.com/jitsi/jitmeet/issues/41\r\n            console.log('AAAAAAAAAAAAAAAAA new answer: ', modifiedAnswer);\r\n            if (self.pendingop !== null) {\r\n              var sdp = new SDP(modifiedAnswer.sdp);\r\n              if (sdp.media.length > 1) {\r\n                switch (self.pendingop) {\r\n                  case 'mute':\r\n                    sdp.media[1] = sdp.media[1].replace('a=sendrecv', 'a=recvonly');\r\n                    break;\r\n                  case 'unmute':\r\n                    sdp.media[1] = sdp.media[1].replace('a=recvonly', 'a=sendrecv');\r\n                    break;\r\n                }\r\n                sdp.raw = sdp.session + sdp.media.join('');\r\n                modifiedAnswer.sdp = sdp.raw;\r\n              }\r\n              self.pendingop = null;\r\n            }\r\n\r\n            // FIXME: pushing down an answer while ice connection state\r\n            // console.log('AAAAAAAAAAAAAAAA will set local description ', manualRemoveUnknownSSRCFromSDP(modifiedAnswer));\r\n            // modifiedAnswer = manualRemoveUnknownSSRCFromSDP(modifiedAnswer);\r\n            // is still checking is bad...\r\n            //console.log(self.peerconnection.iceConnectionState);\r\n\r\n            // trying to work around another chrome bug\r\n            //modifiedAnswer.sdp = modifiedAnswer.sdp.replace(/a=setup:active/g, 'a=setup:actpass');\r\n            self.setLocalDescription(modifiedAnswer,\r\n              function () {\r\n                //console.log('modified setLocalDescription ok');\r\n                if (successCallback) {\r\n                  successCallback();\r\n                }\r\n              },\r\n              function (error) {\r\n                console.error('modified setLocalDescription failed', error);\r\n              }\r\n            );\r\n          },\r\n          function (error) {\r\n            console.error('modified answer failed', error);\r\n          }\r\n        );\r\n      } else {\r\n        // 不需要set local description ,直接解锁\r\n        self.negotiationInprogress = false;\r\n      }\r\n    },\r\n    function (error) {\r\n      console.error('modify failed', error);\r\n    }\r\n  );\r\n};\r\n\r\nfunction manualRemoveUnknownSSRCFromSDP(beforeAnswer) {\r\n\r\n  // console.log('AAAAAAAAAAAAAAAAAAAAAAAAAAA before modify media : ', transform.parse(beforeAnswer.sdp).media, ' \\r Before answer : ', beforeAnswer);\r\n\r\n  var sdp = transform.parse(beforeAnswer.sdp);\r\n  var media = sdp.media;\r\n  media.forEach(function (value, key) {\r\n    if (value.type == 'video') {\r\n      var video = value;\r\n      var ssrcsLength = video.ssrcs.length;\r\n      if (ssrcsLength > 4) { // 如果是屏幕分享者,则需要发送两股流.\r\n        // rebuilt ssrcs\r\n        var newSSRCS = [];\r\n        newSSRCS.push(video.ssrcs[ssrcsLength - 4]);\r\n        newSSRCS.push(video.ssrcs[ssrcsLength - 3]);\r\n        newSSRCS.push(video.ssrcs[ssrcsLength - 2]);\r\n        newSSRCS.push(video.ssrcs[ssrcsLength - 1]);\r\n        video.ssrcs = newSSRCS;\r\n      }\r\n      media[key] = video;\r\n    }\r\n  });\r\n  sdp.media = media;\r\n  // console.log('AAAAAAAAAAAAAAAAAAAAAAAAAAA after modify media : ', media, 'after sdp : ', transform.write(sdp));\r\n  beforeAnswer.sdp = transform.write(sdp);\r\n\r\n  // console.log('AAAAAAAAAAAAAAAAAAAAAAAAAAA after modify media : ', ' \\r after answer : ', beforeAnswer);\r\n  return beforeAnswer;\r\n}\r\n\r\nTraceablePeerConnection.prototype.close = function () {\r\n  this.trace('stop');\r\n  if (this.statsinterval !== null) {\r\n    window.clearInterval(this.statsinterval);\r\n    this.statsinterval = null;\r\n  }\r\n  this.peerconnection.close();\r\n};\r\n\r\nTraceablePeerConnection.prototype.createOffer = function (successCallback, failureCallback, constraints) {\r\n  var self = this;\r\n  this.trace('createOffer', JSON.stringify(constraints, null, ' '));\r\n  this.peerconnection.createOffer(\r\n    function (offer) {\r\n      self.trace('createOfferOnSuccess', dumpSDP(offer));\r\n      if (navigator.mozGetUserMedia)\r\n        offer = self.interop.toPlanB(offer);\r\n      console.log('------------------ Create Offer Success--------------------', dumpSDP(offer));\r\n      successCallback(offer);\r\n    },\r\n    function (err) {\r\n      self.trace('createOfferOnFailure', err);\r\n      failureCallback(err);\r\n    },\r\n    constraints\r\n  );\r\n};\r\n\r\nTraceablePeerConnection.prototype.createAnswer = function (successCallback, failureCallback, constraints) {\r\n  var self = this;\r\n  this.trace('createAnswer', JSON.stringify(constraints, null, ' '));\r\n  this.peerconnection.createAnswer(\r\n    function (answer) {\r\n      answer = simulcast.transformAnswer(answer);\r\n      // if (navigator.mozGetUserMedia) {\r\n      //   answer = self.interop.toPlanB(answer);\r\n      // }\r\n      // console.log('------------------ Create Answer Success--------------------', dumpSDP(answer));\r\n      successCallback(answer);\r\n    },\r\n    function (err) {\r\n      self.trace('createAnswerOnFailure', err);\r\n      failureCallback(err);\r\n    },\r\n    constraints\r\n  );\r\n};\r\n\r\nTraceablePeerConnection.prototype.addIceCandidate = function (candidate, successCallback, failureCallback) {\r\n  var self = this;\r\n  this.trace('addIceCandidate', JSON.stringify(candidate, null, ' '));\r\n  this.peerconnection.addIceCandidate(candidate);\r\n  /* maybe later\r\n   this.peerconnection.addIceCandidate(candidate,\r\n   function () {\r\n   self.trace('addIceCandidateOnSuccess');\r\n   successCallback();\r\n   },\r\n   function (err) {\r\n   self.trace('addIceCandidateOnFailure', err);\r\n   failureCallback(err);\r\n   }\r\n   );\r\n   */\r\n};\r\n\r\nTraceablePeerConnection.prototype.getStats = function (callback, errorCallback) {\r\n  if (ms.isFirefox()) {\r\n    this.peerconnection.getStats(null).then(callback);\r\n  } else if (ms.isSafari()) {\r\n    this.peerconnection.getStats(null).then(callback);\r\n  } else {\r\n    this.peerconnection.getStats(callback);\r\n  }\r\n};\r\n\r\nexports = module.exports = TraceablePeerConnection;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/strophe/plugins/strophe.jingle.adapter.js\n// module id = 43\n// module chunks = 0","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexports.Interop = require('./interop');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/lib/index.js\n// module id = 44\n// module chunks = 0","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* global RTCSessionDescription */\n/* global RTCIceCandidate */\n/* jshint -W097 */\n\"use strict\";\n\nvar transform = require('./transform');\nvar arrayEquals = require('./array-equals');\n\nfunction Interop() {\n\n    /**\n     * This map holds the most recent Unified Plan offer/answer SDP that was\n     * converted to Plan B, with the SDP type ('offer' or 'answer') as keys and\n     * the SDP string as values.\n     *\n     * @type {{}}\n     */\n    this.cache = {\n        mlB2UMap : {},\n        mlU2BMap : {}\n    };\n}\n\nmodule.exports = Interop;\n\n/**\n * Changes the candidate args to match with the related Unified Plan\n */\nInterop.prototype.candidateToUnifiedPlan = function(candidate) {\n    var cand = new RTCIceCandidate(candidate);\n\n    cand.sdpMLineIndex = this.cache.mlB2UMap[cand.sdpMLineIndex];\n    /* TODO: change sdpMid to (audio|video)-SSRC */\n\n    return cand;\n};\n\n/**\n * Changes the candidate args to match with the related Plan B\n */\nInterop.prototype.candidateToPlanB = function(candidate) {\n    var cand = new RTCIceCandidate(candidate);\n\n    if (cand.sdpMid.indexOf('audio') === 0) {\n      cand.sdpMid = 'audio';\n    } else if (cand.sdpMid.indexOf('video') === 0) {\n      cand.sdpMid = 'video';\n    } else {\n      throw new Error('candidate with ' + cand.sdpMid + ' not allowed');\n    }\n\n    cand.sdpMLineIndex = this.cache.mlU2BMap[cand.sdpMLineIndex];\n\n    return cand;\n};\n\n/**\n * Returns the index of the first m-line with the given media type and with a\n * direction which allows sending, in the last Unified Plan description with\n * type \"answer\" converted to Plan B. Returns {null} if there is no saved\n * answer, or if none of its m-lines with the given type allow sending.\n * @param type the media type (\"audio\" or \"video\").\n * @returns {*}\n */\nInterop.prototype.getFirstSendingIndexFromAnswer = function(type) {\n    if (!this.cache.answer) {\n        return null;\n    }\n\n    var session = transform.parse(this.cache.answer);\n    if (session && session.media && Array.isArray(session.media)){\n        for (var i = 0; i < session.media.length; i++) {\n            if (session.media[i].type == type &&\n                (!session.media[i].direction /* default to sendrecv */ ||\n                    session.media[i].direction === 'sendrecv' ||\n                    session.media[i].direction === 'sendonly')){\n                return i;\n            }\n        }\n    }\n\n    return null;\n};\n\n/**\n * This method transforms a Unified Plan SDP to an equivalent Plan B SDP. A\n * PeerConnection wrapper transforms the SDP to Plan B before passing it to the\n * application.\n *\n * @param desc\n * @returns {*}\n */\nInterop.prototype.toPlanB = function(desc) {\n    var self = this;\n    //#region Preliminary input validation.\n\n    if (typeof desc !== 'object' || desc === null ||\n        typeof desc.sdp !== 'string') {\n        console.warn('An empty description was passed as an argument.');\n        return desc;\n    }\n\n    // Objectify the SDP for easier manipulation.\n    var session = transform.parse(desc.sdp);\n\n    // If the SDP contains no media, there's nothing to transform.\n    if (typeof session.media === 'undefined' ||\n        !Array.isArray(session.media) || session.media.length === 0) {\n        console.warn('The description has no media.');\n        return desc;\n    }\n\n    // Try some heuristics to \"make sure\" this is a Unified Plan SDP. Plan B\n    // SDP has a video, an audio and a data \"channel\" at most.\n    if (session.media.length <= 3 && session.media.every(function(m) {\n            return ['video', 'audio', 'data'].indexOf(m.mid) !== -1;\n        })) {\n        console.warn('This description does not look like Unified Plan.');\n        return desc;\n    }\n\n    //#endregion\n\n    // HACK https://bugzilla.mozilla.org/show_bug.cgi?id=1113443\n    var sdp = desc.sdp;\n    var rewrite = false;\n    for (var i = 0; i < session.media.length; i++) {\n        var uLine = session.media[i];\n        uLine.rtp.forEach(function(rtp) {\n            if (rtp.codec === 'NULL')\n            {\n                rewrite = true;\n                var offer = transform.parse(self.cache.offer);\n                rtp.codec = offer.media[i].rtp[0].codec;\n            }\n        });\n    }\n    if (rewrite) {\n        sdp = transform.write(session);\n    }\n\n    // Unified Plan SDP is our \"precious\". Cache it for later use in the Plan B\n    // -> Unified Plan transformation.\n    this.cache[desc.type] = sdp;\n\n    //#region Convert from Unified Plan to Plan B.\n\n    // We rebuild the session.media array.\n    var media = session.media;\n    session.media = [];\n\n    // Associative array that maps channel types to channel objects for fast\n    // access to channel objects by their type, e.g. type2bl['audio']->channel\n    // obj.\n    var type2bl = {};\n\n    // Used to build the group:BUNDLE value after the channels construction\n    // loop.\n    var types = [];\n\n    // Used to aggregate the directions of the m-lines.\n    var directionResult = {};\n\n    media.forEach(function(uLine) {\n        // rtcp-mux is required in the Plan B SDP.\n        if ((typeof uLine.rtcpMux !== 'string' ||\n            uLine.rtcpMux !== 'rtcp-mux') &&\n            uLine.direction !== 'inactive') {\n            throw new Error('Cannot convert to Plan B because m-lines ' +\n                'without the rtcp-mux attribute were found.');\n        }\n\n        // If we don't have a channel for this uLine.type OR the selected is\n        // inactive, then select this uLine as the channel basis.\n        if (typeof type2bl[uLine.type] === 'undefined' ||\n            type2bl[uLine.type].direction === 'inactive') {\n            type2bl[uLine.type] = uLine;\n        }\n    });\n\n    // Implode the Unified Plan m-lines/tracks into Plan B channels.\n    media.forEach(function(uLine) {\n        var type = uLine.type;\n\n        if (type === 'application') {\n            session.media.push(uLine);\n            types.push(uLine.mid);\n            return;\n        }\n\n        // Add sources to the channel and handle a=msid.\n        if (typeof uLine.sources === 'object') {\n            Object.keys(uLine.sources).forEach(function(ssrc) {\n                if (typeof type2bl[type].sources !== 'object')\n                    type2bl[type].sources = {};\n\n                // Assign the sources to the channel.\n                type2bl[type].sources[ssrc] = uLine.sources[ssrc];\n\n                if (typeof uLine.msid !== 'undefined') {\n                    // In Plan B the msid is an SSRC attribute. Also, we don't\n                    // care about the obsolete label and mslabel attributes.\n                    //\n                    // Note that it is not guaranteed that the uLine will\n                    // have an msid. recvonly channels in particular don't have\n                    // one.\n                    type2bl[type].sources[ssrc].msid = uLine.msid;\n                }\n                // NOTE ssrcs in ssrc groups will share msids, as\n                // draft-uberti-rtcweb-plan-00 mandates.\n            });\n        }\n\n        // Add ssrc groups to the channel.\n        if (typeof uLine.ssrcGroups !== 'undefined' &&\n                Array.isArray(uLine.ssrcGroups)) {\n\n            // Create the ssrcGroups array, if it's not defined.\n            if (typeof type2bl[type].ssrcGroups === 'undefined' ||\n                    !Array.isArray(type2bl[type].ssrcGroups)) {\n                type2bl[type].ssrcGroups = [];\n            }\n\n            type2bl[type].ssrcGroups\n                = type2bl[type].ssrcGroups.concat(uLine.ssrcGroups);\n        }\n\n        var direction = uLine.direction;\n\n        directionResult[type]\n            = (directionResult[type] || 0 /* inactive */)\n                | directionMasks[direction || 'inactive'];\n\n        if (type2bl[type] === uLine) {\n            // Plan B mids are in ['audio', 'video', 'data']\n            uLine.mid = type;\n\n            // Plan B doesn't support/need the bundle-only attribute.\n            delete uLine.bundleOnly;\n\n            // In Plan B the msid is an SSRC attribute.\n            delete uLine.msid;\n\n            if (direction !== 'inactive') {\n              // Used to build the group:BUNDLE value after this loop.\n              types.push(type);\n            }\n\n            // Add the channel to the new media array.\n            session.media.push(uLine);\n        }\n    });\n\n    // We regenerate the BUNDLE group with the new mids.\n    session.groups.some(function(group) {\n        if (group.type === 'BUNDLE') {\n            group.mids = types.join(' ');\n            return true;\n        }\n    });\n\n    // msid semantic\n    session.msidSemantic = {\n        semantic: 'WMS',\n        token: '*'\n    };\n\n    var resStr = transform.write(session);\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: resStr\n    });\n\n    //#endregion\n};\n\n/**\n * This method transforms a Plan B SDP to an equivalent Unified Plan SDP. A\n * PeerConnection wrapper transforms the SDP to Unified Plan before passing it\n * to FF.\n *\n * @param desc\n * @returns {*}\n */\nInterop.prototype.toUnifiedPlan = function(desc) {\n    var self = this;\n    //#region Preliminary input validation.\n\n    if (typeof desc !== 'object' || desc === null ||\n        typeof desc.sdp !== 'string') {\n        console.warn('An empty description was passed as an argument.');\n        return desc;\n    }\n\n    var session = transform.parse(desc.sdp);\n\n    // If the SDP contains no media, there's nothing to transform.\n    if (typeof session.media === 'undefined' ||\n        !Array.isArray(session.media) || session.media.length === 0) {\n        console.warn('The description has no media.');\n        return desc;\n    }\n\n    // Try some heuristics to \"make sure\" this is a Plan B SDP. Plan B SDP has\n    // a video, an audio and a data \"channel\" at most.\n    if (session.media.length > 3 || !session.media.every(function(m) {\n            return ['video', 'audio', 'data'].indexOf(m.mid) !== -1;\n        })) {\n        console.warn('This description does not look like Plan B.');\n        return desc;\n    }\n\n    // Make sure this Plan B SDP can be converted to a Unified Plan SDP.\n    var mids = [];\n    session.media.forEach(function(m) {\n        mids.push(m.mid);\n    });\n\n    var hasBundle = false;\n    if (typeof session.groups !== 'undefined' &&\n        Array.isArray(session.groups)) {\n        hasBundle = session.groups.every(function(g) {\n            return g.type !== 'BUNDLE' ||\n                arrayEquals.apply(g.mids.sort(), [mids.sort()]);\n        });\n    }\n\n    if (!hasBundle) {\n        throw new Error(\"Cannot convert to Unified Plan because m-lines that\" +\n            \" are not bundled were found.\");\n    }\n\n    //#endregion\n\n\n    //#region Convert from Plan B to Unified Plan.\n\n    // Unfortunately, a Plan B offer/answer doesn't have enough information to\n    // rebuild an equivalent Unified Plan offer/answer.\n    //\n    // For example, if this is a local answer (in Unified Plan style) that we\n    // convert to Plan B prior to handing it over to the application (the\n    // PeerConnection wrapper called us, for instance, after a successful\n    // createAnswer), we want to remember the m-line at which we've seen the\n    // (local) SSRC. That's because when the application wants to do call the\n    // SLD method, forcing us to do the inverse transformation (from Plan B to\n    // Unified Plan), we need to know to which m-line to assign the (local)\n    // SSRC. We also need to know all the other m-lines that the original\n    // answer had and include them in the transformed answer as well.\n    //\n    // Another example is if this is a remote offer that we convert to Plan B\n    // prior to giving it to the application, we want to remember the mid at\n    // which we've seen the (remote) SSRC.\n    //\n    // In the iteration that follows, we use the cached Unified Plan (if it\n    // exists) to assign mids to ssrcs.\n\n    var cached;\n    if (typeof this.cache[desc.type] !== 'undefined') {\n        cached = transform.parse(this.cache[desc.type]);\n    }\n\n    var recvonlySsrcs = {\n        audio: {},\n        video: {}\n    };\n\n    // A helper map that sends mids to m-line objects. We use it later to\n    // rebuild the Unified Plan style session.media array.\n    var mid2ul = {};\n    var bIdx = 0;\n    var uIdx = 0;\n\n    session.media.forEach(function(bLine) {\n        console.log('===== bLine', bLine);\n        if (bLine.type === 'application') {\n            mid2ul[bLine.mid] = bLine;\n            return;\n        }\n        if ((typeof bLine.rtcpMux !== 'string' ||\n            bLine.rtcpMux !== 'rtcp-mux') &&\n            bLine.direction !== 'inactive') {\n            throw new Error(\"Cannot convert to Unified Plan because m-lines \" +\n                \"without the rtcp-mux attribute were found.\");\n        }\n\n        // With rtcp-mux and bundle all the channels should have the same ICE\n        // stuff.\n        var sources = bLine.sources;\n        var ssrcGroups = bLine.ssrcGroups;\n        var candidates = bLine.candidates;\n        var iceUfrag = bLine.iceUfrag;\n        var icePwd = bLine.icePwd;\n        var fingerprint = bLine.fingerprint;\n        var port = bLine.port;\n\n        // We'll use the \"bLine\" object as a prototype for each new \"mLine\"\n        // that we create, but first we need to clean it up a bit.\n        delete bLine.sources;\n        delete bLine.ssrcGroups;\n        delete bLine.candidates;\n        delete bLine.iceUfrag;\n        delete bLine.icePwd;\n        delete bLine.fingerprint;\n        delete bLine.port;\n        delete bLine.mid;\n\n        // inverted ssrc group map\n        var ssrc2group = {};\n        if (typeof ssrcGroups !== 'undefined' && Array.isArray(ssrcGroups)) {\n            ssrcGroups.forEach(function (ssrcGroup) {\n\n                // TODO(gp) find out how to receive simulcast with FF. For the\n                // time being, hide it.\n                if (ssrcGroup.semantics === 'SIM') {\n                    return;\n                }\n\n                // XXX This might brake if an SSRC is in more than one group\n                // for some reason.\n                if (typeof ssrcGroup.ssrcs !== 'undefined' &&\n                    Array.isArray(ssrcGroup.ssrcs)) {\n                    ssrcGroup.ssrcs.forEach(function (ssrc) {\n                        if (typeof ssrc2group[ssrc] === 'undefined') {\n                            ssrc2group[ssrc] = [];\n                        }\n\n                        ssrc2group[ssrc].push(ssrcGroup);\n                    });\n                }\n            });\n        }\n\n        // ssrc to m-line index.\n        var ssrc2ml = {};\n\n        if (typeof sources === 'object') {\n\n            // Explode the Plan B channel sources with one m-line per source.\n            Object.keys(sources).forEach(function(ssrc) {\n\n                // The (unified) m-line for this SSRC. We either create it from\n                // scratch or, if it's a grouped SSRC, we re-use a related\n                // mline. In other words, if the source is grouped with another\n                // source, put the two together in the same m-line.\n                var uLine;\n\n                // We assume here that we are the answerer in the O/A, so any\n                // offers which we translate come from the remote side, while\n                // answers are local. So the check below is to make that we\n                // handle receive-only SSRCs in a special way only if they come\n                // from the remote side.\n                if (desc.type==='offer') {\n                    // We want to detect SSRCs which are used by a remote peer\n                    // in an m-line with direction=recvonly (i.e. they are\n                    // being used for RTCP only).\n                    // This information would have gotten lost if the remote\n                    // peer used Unified Plan and their local description was\n                    // translated to Plan B. So we use the lack of an MSID\n                    // attribute to deduce a \"receive only\" SSRC.\n                    if (!sources[ssrc].msid) {\n                        recvonlySsrcs[bLine.type][ssrc] = sources[ssrc];\n                        // Receive-only SSRCs must not create new m-lines. We\n                        // will assign them to an existing m-line later.\n                        return;\n                    }\n                }\n\n                if (typeof ssrc2group[ssrc] !== 'undefined' &&\n                    Array.isArray(ssrc2group[ssrc])) {\n                    ssrc2group[ssrc].some(function (ssrcGroup) {\n                        // ssrcGroup.ssrcs *is* an Array, no need to check\n                        // again here.\n                        return ssrcGroup.ssrcs.some(function (related) {\n                            if (typeof ssrc2ml[related] === 'object') {\n                                uLine = ssrc2ml[related];\n                                return true;\n                            }\n                        });\n                    });\n                }\n\n                if (typeof uLine === 'object') {\n                    // the m-line already exists. Just add the source.\n                    uLine.sources[ssrc] = sources[ssrc];\n                    delete sources[ssrc].msid;\n                } else {\n                    // Use the \"bLine\" as a prototype for the \"uLine\".\n                    uLine = Object.create(bLine);\n                    ssrc2ml[ssrc] = uLine;\n\n                    if (typeof sources[ssrc].msid !== 'undefined') {\n                        // Assign the msid of the source to the m-line. Note\n                        // that it is not guaranteed that the source will have\n                        // msid. In particular \"recvonly\" sources don't have an\n                        // msid. Note that \"recvonly\" is a term only defined\n                        // for m-lines.\n                        uLine.msid = sources[ssrc].msid;\n                        delete sources[ssrc].msid;\n                    }\n\n                    // We assign one SSRC per media line.\n                    uLine.sources = {};\n                    uLine.sources[ssrc] = sources[ssrc];\n                    uLine.ssrcGroups = ssrc2group[ssrc];\n\n                    // Use the cached Unified Plan SDP (if it exists) to assign\n                    // SSRCs to mids.\n                    if (typeof cached !== 'undefined' &&\n                        typeof cached.media !== 'undefined' &&\n                        Array.isArray(cached.media)) {\n\n                        cached.media.forEach(function (m) {\n                            if (typeof m.sources === 'object') {\n                                Object.keys(m.sources).forEach(function (s) {\n                                    if (s === ssrc) {\n                                        uLine.mid = m.mid;\n                                    }\n                                });\n                            }\n                        });\n                    }\n\n                    if (typeof uLine.mid === 'undefined') {\n\n                        // If this is an SSRC that we see for the first time\n                        // assign it a new mid. This is typically the case when\n                        // this method is called to transform a remote\n                        // description for the first time or when there is a\n                        // new SSRC in the remote description because a new\n                        // peer has joined the conference. Local SSRCs should\n                        // have already been added to the map in the toPlanB\n                        // method.\n                        //\n                        // Because FF generates answers in Unified Plan style,\n                        // we MUST already have a cached answer with all the\n                        // local SSRCs mapped to some m-line/mid.\n\n                        if (desc.type === 'answer') {\n                            throw new Error(\"An unmapped SSRC was found.\");\n                        }\n\n                        uLine.mid = [bLine.type, '-', ssrc].join('');\n                    }\n\n                    // Include the candidates in the 1st media line.\n                    uLine.candidates = candidates;\n                    uLine.iceUfrag = iceUfrag;\n                    uLine.icePwd = icePwd;\n                    uLine.fingerprint = fingerprint;\n                    uLine.port = port;\n\n                    mid2ul[uLine.mid] = uLine;\n\n                    self.cache.mlU2BMap[uIdx] = bIdx;\n                    if (typeof self.cache.mlB2UMap[bIdx] === 'undefined') {\n                      self.cache.mlB2UMap[bIdx] = uIdx;\n                    }\n                    uIdx++;\n                }\n            });\n        }\n\n        bIdx++;\n    });\n\n    // Rebuild the media array in the right order and add the missing mLines\n    // (missing from the Plan B SDP).\n    session.media = [];\n    mids = []; // reuse\n\n    if (desc.type === 'answer') {\n\n        // The media lines in the answer must match the media lines in the\n        // offer. The order is important too. Here we assume that Firefox is\n        // the answerer, so we merely have to use the reconstructed (unified)\n        // answer to update the cached (unified) answer accordingly.\n        //\n        // In the general case, one would have to use the cached (unified)\n        // offer to find the m-lines that are missing from the reconstructed\n        // answer, potentially grabbing them from the cached (unified) answer.\n        // One has to be careful with this approach because inactive m-lines do\n        // not always have an mid, making it tricky (impossible?) to find where\n        // exactly and which m-lines are missing from the reconstructed answer.\n\n        for (var i = 0; i < cached.media.length; i++) {\n            var uLine = cached.media[i];\n\n            if (typeof mid2ul[uLine.mid] === 'undefined') {\n\n                // The mid isn't in the reconstructed (unified) answer.\n                // This is either a (unified) m-line containing a remote\n                // track only, or a (unified) m-line containing a remote\n                // track and a local track that has been removed.\n                // In either case, it MUST exist in the cached\n                // (unified) answer.\n                //\n                // In case this is a removed local track, clean-up\n                // the (unified) m-line and make sure it's 'recvonly' or\n                // 'inactive'.\n\n                delete uLine.msid;\n                delete uLine.sources;\n                delete uLine.ssrcGroups;\n                if (!uLine.direction\n                    || uLine.direction === 'sendrecv')\n                    uLine.direction = 'recvonly';\n                else if (uLine.direction === 'sendonly')\n                    uLine.direction = 'inactive';\n            } else {\n                // This is an (unified) m-line/channel that contains a local\n                // track (sendrecv or sendonly channel) or it's a unified\n                // recvonly m-line/channel. In either case, since we're\n                // going from PlanB -> Unified Plan this m-line MUST\n                // exist in the cached answer.\n            }\n\n            session.media.push(uLine);\n\n            if (typeof uLine.mid === 'string') {\n                // inactive lines don't/may not have an mid.\n                mids.push(uLine.mid);\n            }\n        }\n    } else {\n\n        // SDP offer/answer (and the JSEP spec) forbids removing an m-section\n        // under any circumstances. If we are no longer interested in sending a\n        // track, we just remove the msid and ssrc attributes and set it to\n        // either a=recvonly (as the reofferer, we must use recvonly if the\n        // other side was previously sending on the m-section, but we can also\n        // leave the possibility open if it wasn't previously in use), or\n        // a=inactive.\n\n        if (typeof cached !== 'undefined' &&\n            typeof cached.media !== 'undefined' &&\n            Array.isArray(cached.media)) {\n            cached.media.forEach(function(uLine) {\n                mids.push(uLine.mid);\n                if (typeof mid2ul[uLine.mid] !== 'undefined') {\n                    session.media.push(mid2ul[uLine.mid]);\n                } else {\n                    delete uLine.msid;\n                    delete uLine.sources;\n                    delete uLine.ssrcGroups;\n                    if (!uLine.direction\n                        || uLine.direction === 'sendrecv')\n                        uLine.direction = 'recvonly';\n                    if (!uLine.direction\n                        || uLine.direction === 'sendonly')\n                        uLine.direction = 'inactive';\n                    session.media.push(uLine);\n                }\n            });\n        }\n\n        // Add all the remaining (new) m-lines of the transformed SDP.\n        Object.keys(mid2ul).forEach(function(mid) {\n            if (mids.indexOf(mid) === -1) {\n                mids.push(mid);\n                if (mid2ul[mid].direction === 'recvonly') {\n                    // This is a remote recvonly channel. Add its SSRC to the\n                    // appropriate sendrecv or sendonly channel.\n                    // TODO(gp) what if we don't have sendrecv/sendonly\n                    // channel?\n\n                    session.media.some(function (uLine) {\n                        if ((uLine.direction === 'sendrecv' ||\n                            uLine.direction === 'sendonly') &&\n                            uLine.type === mid2ul[mid].type) {\n\n                            // mid2ul[mid] shouldn't have any ssrc-groups\n                            Object.keys(mid2ul[mid].sources).forEach(\n                                function (ssrc) {\n                                uLine.sources[ssrc] =\n                                    mid2ul[mid].sources[ssrc];\n                            });\n\n                            return true;\n                        }\n                    });\n                } else {\n                    session.media.push(mid2ul[mid]);\n                }\n            }\n        });\n    }\n\n    // After we have constructed the Plan Unified m-lines we can figure out\n    // where (in which m-line) to place the 'recvonly SSRCs'.\n    // Note: we assume here that we are the answerer in the O/A, so any offers\n    // which we translate come from the remote side, while answers are local\n    // (and so our last local description is cached as an 'answer').\n    [\"audio\", \"video\"].forEach(function (type) {\n        if (!session || !session.media || !Array.isArray(session.media))\n            return;\n\n        var idx = null;\n        if (Object.keys(recvonlySsrcs[type]).length > 0) {\n            idx = self.getFirstSendingIndexFromAnswer(type);\n            if (idx === null){\n                // If this is the first offer we receive, we don't have a\n                // cached answer. Assume that we will be sending media using\n                // the first m-line for each media type.\n\n                for (var i = 0; i < session.media.length; i++) {\n                    if (session.media[i].type === type) {\n                        idx = i;\n                        break;\n                    }\n                }\n            }\n        }\n\n        if (idx && session.media.length > idx) {\n            var mLine = session.media[idx];\n            Object.keys(recvonlySsrcs[type]).forEach(function(ssrc) {\n                if (mLine.sources && mLine.sources[ssrc]) {\n                    console.warn(\"Replacing an existing SSRC.\");\n                }\n                if (!mLine.sources) {\n                    mLine.sources = {};\n                }\n\n                mLine.sources[ssrc] = recvonlySsrcs[type][ssrc];\n            });\n        }\n    });\n\n    // We regenerate the BUNDLE group (since we regenerated the mids)\n    session.groups.some(function(group) {\n        if (group.type === 'BUNDLE') {\n            group.mids = mids.join(' ');\n            return true;\n        }\n    });\n\n    // msid semantic\n    session.msidSemantic = {\n        semantic: 'WMS',\n        token: '*'\n    };\n\n    var resStr = transform.write(session);\n\n    // Cache the transformed SDP (Unified Plan) for later re-use in this\n    // function.\n    this.cache[desc.type] = resStr;\n\n    return new RTCSessionDescription({\n        type: desc.type,\n        sdp: resStr\n    });\n\n    //#endregion\n};\n\n/**\n * Maps the direction strings to their binary representation. The binary\n * representation of the directions will contain only 2 bits. The least\n * significant bit will indicate the receiving direction and the other bit will\n * indicate the sending direction.\n *\n * @type {Map<string, number>}\n */\nvar directionMasks = {\n    'inactive': 0, // 00\n    'recvonly': 1, // 01\n    'sendonly': 2, // 10\n    'sendrecv': 3  // 11\n}\n\n/**\n * Parses a number into direction string.\n *\n * @param {number} direction - The number to be parsed.\n * @returns {string} - The parsed direction string.\n */\nfunction parseDirection(direction) {\n    // Filter all other bits except the 2 less significant.\n    var directionMask = direction & 3;\n\n    switch (directionMask) {\n    case 0:\n        return 'inactive';\n    case 1:\n        return 'recvonly';\n    case 2:\n        return 'sendonly';\n    case 3:\n        return 'sendrecv';\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/lib/interop.js\n// module id = 45\n// module chunks = 0","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar transform = require('sdp-transform');\n\nexports.write = function(session, opts) {\n\n  if (typeof session !== 'undefined' &&\n      typeof session.media !== 'undefined' &&\n      Array.isArray(session.media)) {\n\n    session.media.forEach(function (mLine) {\n      // expand sources to ssrcs\n      if (typeof mLine.sources !== 'undefined' &&\n        Object.keys(mLine.sources).length !== 0) {\n          mLine.ssrcs = [];\n          Object.keys(mLine.sources).forEach(function (ssrc) {\n            var source = mLine.sources[ssrc];\n            Object.keys(source).forEach(function (attribute) {\n              mLine.ssrcs.push({\n                id: ssrc,\n                attribute: attribute,\n                value: source[attribute]\n              });\n            });\n          });\n          delete mLine.sources;\n        }\n\n      // join ssrcs in ssrc groups\n      if (typeof mLine.ssrcGroups !== 'undefined' &&\n        Array.isArray(mLine.ssrcGroups)) {\n          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n            if (typeof ssrcGroup.ssrcs !== 'undefined' &&\n                Array.isArray(ssrcGroup.ssrcs)) {\n              ssrcGroup.ssrcs = ssrcGroup.ssrcs.join(' ');\n            }\n          });\n        }\n    });\n  }\n\n  // join group mids\n  if (typeof session !== 'undefined' &&\n      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\n    session.groups.forEach(function (g) {\n      if (typeof g.mids !== 'undefined' && Array.isArray(g.mids)) {\n        g.mids = g.mids.join(' ');\n      }\n    });\n  }\n\n  return transform.write(session, opts);\n};\n\nexports.parse = function(sdp) {\n  var session = transform.parse(sdp);\n\n  if (typeof session !== 'undefined' && typeof session.media !== 'undefined' &&\n      Array.isArray(session.media)) {\n\n    session.media.forEach(function (mLine) {\n      // group sources attributes by ssrc\n      if (typeof mLine.ssrcs !== 'undefined' && Array.isArray(mLine.ssrcs)) {\n        mLine.sources = {};\n        mLine.ssrcs.forEach(function (ssrc) {\n          if (!mLine.sources[ssrc.id])\n          mLine.sources[ssrc.id] = {};\n        mLine.sources[ssrc.id][ssrc.attribute] = ssrc.value;\n        });\n\n        delete mLine.ssrcs;\n      }\n\n      // split ssrcs in ssrc groups\n      if (typeof mLine.ssrcGroups !== 'undefined' &&\n        Array.isArray(mLine.ssrcGroups)) {\n          mLine.ssrcGroups.forEach(function (ssrcGroup) {\n            if (typeof ssrcGroup.ssrcs === 'string') {\n              ssrcGroup.ssrcs = ssrcGroup.ssrcs.split(' ');\n            }\n          });\n        }\n    });\n  }\n  // split group mids\n  if (typeof session !== 'undefined' &&\n      typeof session.groups !== 'undefined' && Array.isArray(session.groups)) {\n\n    session.groups.forEach(function (g) {\n      if (typeof g.mids === 'string') {\n        g.mids = g.mids.split(' ');\n      }\n    });\n  }\n\n  return session;\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/lib/transform.js\n// module id = 46\n// module chunks = 0","var parser = require('./parser');\nvar writer = require('./writer');\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseFmtpConfig = parser.parseFmtpConfig;\nexports.parseParams = parser.parseParams;\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/~/sdp-transform/lib/index.js\n// module id = 47\n// module chunks = 0","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/\\;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/~/sdp-transform/lib/parser.js\n// module id = 48\n// module chunks = 0","var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{ //o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly..\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  //k: [{}], // outdated thing ignored\n  t: [{ //t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{ //c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{ //b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{ //m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w\\/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    { //a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-\\.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding) ?\n          'rtpmap:%d %s/%s/%s':\n          o.rate ?\n          'rtpmap:%d %s/%s':\n          'rtpmap:%d %s';\n      }\n    },\n    { //a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      //a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    { //a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    { //a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null) ?\n          'rtcp:%d %s IP%d %s':\n          'rtcp:%d';\n      }\n    },\n    { //a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%d trr-int %d'\n    },\n    { //a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null) ?\n          'rtcp-fb:%s %s %s':\n          'rtcp-fb:%s %s';\n      }\n    },\n    { //a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      //a=extmap:1/recvonly URI-gps-string\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'uri', 'config'],\n      format: function (o) {\n        return 'extmap:%d' + (o.direction ? '/%s' : '%v') + ' %s' + (o.config ? ' %s' : '');\n      }\n    },\n    { //a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null) ?\n          'crypto:%d %s %s %s':\n          'crypto:%d %s %s';\n      }\n    },\n    { //a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    { //a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    { //a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    { //a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*)/,\n      format: 'ptime:%d'\n    },\n    { //a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*)/,\n      format: 'maxptime:%d'\n    },\n    { //a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    { //a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    { //a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    { //a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    { //a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    { //a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      //a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      //a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    { //a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    { //a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    { //a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    { //a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    { //a=ssrc-group:FEC 1 2\n      //a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    { //a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    { //a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    { //a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    { //a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    { //a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null) ?\n          'sctpmap:%s %s %s' :\n          'sctpmap:%s %s';\n      }\n    },\n    { //a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    { //a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    { //a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      //a=imageattr:* send [x=800,y=640] recv *\n      //a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        //a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        //send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        //recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    { //a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      //a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        //a=simulcast:\n        '^simulcast:' +\n        //send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        //space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        //end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    { //Old simulcast draft 03 (implemented by Firefox)\n      //  https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      //a=simulcast: recv pt=97;98 send pt=97\n      //a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      //a=framerate:25\n      //a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    { // any a= that we don't understand is kepts verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/~/sdp-transform/lib/grammar.js\n// module id = 49\n// module chunks = 0","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/~/sdp-transform/lib/writer.js\n// module id = 50\n// module chunks = 0","/* Copyright @ 2015 Atlassian Pty Ltd\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = function arrayEquals(array) {\n    // if the other array is a falsy value, return\n    if (!array)\n        return false;\n\n    // compare lengths - can save a lot of time\n    if (this.length != array.length)\n        return false;\n\n    for (var i = 0, l = this.length; i < l; i++) {\n        // Check if we have nested arrays\n        if (this[i] instanceof Array && array[i] instanceof Array) {\n            // recurse into the nested arrays\n            if (!arrayEquals.apply(this[i], [array[i]]))\n                return false;\n        } else if (this[i] != array[i]) {\n            // Warning - two different object instances will never be equal:\n            // {x:20} != {x:20}\n            return false;\n        }\n    }\n    return true;\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sdp-interop/lib/array-equals.js\n// module id = 51\n// module chunks = 0","/*\r\n\tCopyright 2015 Axinom\r\n\tCopyright 2011-2013 Abdulla Abdurakhmanov\r\n\tOriginal sources are available at https://code.google.com/p/x2js/\r\n\r\n\tLicensed under the Apache License, Version 2.0 (the \"License\");\r\n\tyou may not use this file except in compliance with the License.\r\n\tYou may obtain a copy of the License at\r\n\r\n\thttp://www.apache.org/licenses/LICENSE-2.0\r\n\r\n\tUnless required by applicable law or agreed to in writing, software\r\n\tdistributed under the License is distributed on an \"AS IS\" BASIS,\r\n\tWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n\tSee the License for the specific language governing permissions and\r\n\tlimitations under the License.\r\n*/\r\n\r\n/*\r\n\tSupported export methods:\r\n\t* AMD\r\n\t* <script> (window.X2JS)\r\n\t* Node.js\r\n\r\n\tLimitations:\r\n\t* Attribute namespace prefixes are not parsed as such.\r\n\t* Overall the serialization/deserializaton code is \"best effort\" and not foolproof.\r\n*/\r\n\r\n// Module definition pattern used is returnExports from https://github.com/umdjs/umd\r\n(function (root, factory) {\r\n\t\"use strict\";\r\n\r\n\t/* global define */\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD. Register as an anonymous module.\r\n\t\tdefine([], factory);\r\n\t} else if (typeof module === 'object' && module.exports) {\r\n\t\t// Node. Does not work with strict CommonJS, but only CommonJS-like\r\n\t\t// environments that support module.exports, like Node.\r\n\t\tmodule.exports = factory(require(\"xmldom\").DOMParser);\r\n\t} else {\r\n\t\t// Browser globals (root is window)\r\n\t\troot.X2JS = factory();\r\n\t}\r\n})(this, function (CustomDOMParser) {\r\n\t\"use strict\";\r\n\r\n\t// We return a constructor that can be used to make X2JS instances.\r\n\treturn function X2JS(config) {\r\n\t\tvar VERSION = \"3.1.1\";\r\n\r\n\t\tconfig = config || {};\r\n\r\n\t\tfunction initConfigDefaults() {\r\n\t\t\t// If set to \"property\" then <element>_asArray will be created\r\n\t\t\t// to allow you to access any element as an array (even if there is only one of it).\r\n\t\t\tconfig.arrayAccessForm = config.arrayAccessForm || \"none\";\r\n\r\n\t\t\t// If \"text\" then <empty></empty> will be transformed to \"\".\r\n\t\t\t// If \"object\" then <empty></empty> will be transformed to {}.\r\n\t\t\tconfig.emptyNodeForm = config.emptyNodeForm || \"text\";\r\n\r\n\t\t\t// Function that will be called for each elements, if the function returns true, the element will be skipped\r\n\t\t\t// function(name, value) { return true; };\r\n\t\t\tconfig.jsAttributeFilter = config.jsAttributeFilter;\r\n\r\n\t\t\t// Function that will be called for each elements, the element value will be replaced by the returned value\r\n\t\t\t// function(name, value) { return parseFloat(value); };\r\n\t\t\tconfig.jsAttributeConverter = config.jsAttributeConverter;\r\n\r\n\t\t\t// Allows attribute values to be converted on the fly during parsing to objects.\r\n\t\t\t// \t\"test\": function(name, value) { return true; }\r\n\t\t\t//\t\"convert\": function(name, value) { return parseFloat(value); };\r\n\t\t\t// convert() will be called for every attribute where test() returns true\r\n\t\t\t// and the return value from convert() will replace the original value of the attribute.\r\n\t\t\tconfig.attributeConverters = config.attributeConverters || [];\r\n\r\n\t\t\t// Any elements that match the paths here will have their text parsed\r\n\t\t\t// as an XML datetime value (2011-11-12T13:00:00-07:00 style).\r\n\t\t\t// The path can be a plain string (parent.child1.child2),\r\n\t\t\t// a regex (/.*\\.child2/) or function(elementPath).\r\n\t\t\tconfig.datetimeAccessFormPaths = config.datetimeAccessFormPaths || [];\r\n\r\n\t\t\t// Any elements that match the paths listed here will be stored in JavaScript objects\r\n\t\t\t// as arrays even if there is only one of them. The path can be a plain string\r\n\t\t\t// (parent.child1.child2), a regex (/.*\\.child2/) or function(elementName, elementPath).\r\n\t\t\tconfig.arrayAccessFormPaths = config.arrayAccessFormPaths || [];\r\n\r\n\t\t\t// If true, a toString function is generated to print nodes containing text or cdata.\r\n\t\t\t// Useful if you want to accept both plain text and CData as equivalent inputs.\r\n\t\t\tif (config.enableToStringFunc === undefined) {\r\n\t\t\t\tconfig.enableToStringFunc = true;\r\n\t\t\t}\r\n\r\n\t\t\t// If true, empty text tags are ignored for elements with child nodes.\r\n\t\t\tif (config.skipEmptyTextNodesForObj === undefined) {\r\n\t\t\t\tconfig.skipEmptyTextNodesForObj = true;\r\n\t\t\t}\r\n\r\n\t\t\t// If true, whitespace is trimmed from text nodes.\r\n\t\t\tif (config.stripWhitespaces === undefined) {\r\n\t\t\t\tconfig.stripWhitespaces = true;\r\n\t\t\t}\r\n\r\n\t\t\t// If true, double quotes are used in generated XML.\r\n\t\t\tif (config.useDoubleQuotes === undefined) {\r\n\t\t\t\tconfig.useDoubleQuotes = true;\r\n\t\t\t}\r\n\r\n\t\t\t// If true, the root element of the XML document is ignored when converting to objects.\r\n\t\t\t// The result will directly have the root element's children as its own properties.\r\n\t\t\tif (config.ignoreRoot === undefined) {\r\n\t\t\t\tconfig.ignoreRoot = false;\r\n\t\t\t}\r\n\r\n\t\t\t// Whether XML characters in text are escaped when reading/writing XML.\r\n\t\t\tif (config.escapeMode === undefined) {\r\n\t\t\t\tconfig.escapeMode = true;\r\n\t\t\t}\r\n\r\n\t\t\t// Prefix to use for properties that are created to represent XML attributes.\r\n\t\t\tif (config.attributePrefix === undefined) {\r\n\t\t\t\tconfig.attributePrefix = \"_\";\r\n\t\t\t}\r\n\r\n\t\t\t// If true, empty elements will created as self closing elements (<element />)\r\n\t\t\t// If false, empty elements will be created with start and end tags (<element></element>)\r\n\t\t\tif (config.selfClosingElements === undefined) {\r\n\t\t\t\tconfig.selfClosingElements = true;\r\n\t\t\t}\r\n\r\n\t\t\t// If this property defined as false and an XML element has CData node ONLY, it will be converted to text without additional property \"__cdata\"\r\n\t\t\tif (config.keepCData === undefined) {\r\n\t\t\t\tconfig.keepCData = false;\r\n\t\t\t}\r\n\r\n\t\t\t// If true, will output dates in UTC\r\n\t\t\tif (config.jsDateUTC === undefined) {\r\n\t\t\t\tconfig.jsDateUTC = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction initRequiredPolyfills() {\r\n\t\t\tfunction pad(number) {\r\n\t\t\t\tvar r = String(number);\r\n\t\t\t\tif (r.length === 1) {\r\n\t\t\t\t\tr = '0' + r;\r\n\t\t\t\t}\r\n\t\t\t\treturn r;\r\n\t\t\t}\r\n\t\t\t// Hello IE8-\r\n\t\t\tif (typeof String.prototype.trim !== 'function') {\r\n\t\t\t\tString.prototype.trim = function trim() {\r\n\t\t\t\t\treturn this.replace(/^\\s+|^\\n+|(\\s|\\n)+$/g, '');\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (typeof Date.prototype.toISOString !== 'function') {\r\n\t\t\t\t// Implementation from http://stackoverflow.com/questions/2573521/how-do-i-output-an-iso-8601-formatted-string-in-javascript\r\n\t\t\t\tDate.prototype.toISOString = function toISOString() {\r\n\t\t\t\t\tvar MS_IN_S = 1000;\r\n\r\n\t\t\t\t\treturn this.getUTCFullYear()\r\n\t\t\t\t\t\t+ '-' + pad(this.getUTCMonth() + 1)\r\n\t\t\t\t\t\t+ '-' + pad(this.getUTCDate())\r\n\t\t\t\t\t\t+ 'T' + pad(this.getUTCHours())\r\n\t\t\t\t\t\t+ ':' + pad(this.getUTCMinutes())\r\n\t\t\t\t\t\t+ ':' + pad(this.getUTCSeconds())\r\n\t\t\t\t\t\t+ '.' + String((this.getUTCMilliseconds() / MS_IN_S).toFixed(3)).slice(2, 5)\r\n\t\t\t\t\t\t+ 'Z';\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinitConfigDefaults();\r\n\t\tinitRequiredPolyfills();\r\n\r\n\t\tvar DOMNodeTypes = {\r\n\t\t\t\"ELEMENT_NODE\": 1,\r\n\t\t\t\"TEXT_NODE\": 3,\r\n\t\t\t\"CDATA_SECTION_NODE\": 4,\r\n\t\t\t\"COMMENT_NODE\": 8,\r\n\t\t\t\"DOCUMENT_NODE\": 9\r\n\t\t};\r\n\r\n\t\tfunction getDomNodeLocalName(domNode) {\r\n\t\t\tvar localName = domNode.localName;\r\n\t\t\tif (localName == null) {\r\n\t\t\t\t// Yeah, this is IE!!\r\n\t\t\t\tlocalName = domNode.baseName;\r\n\t\t\t}\r\n\t\t\tif (localName == null || localName === \"\") {\r\n\t\t\t\t// ===\"\" is IE too\r\n\t\t\t\tlocalName = domNode.nodeName;\r\n\t\t\t}\r\n\t\t\treturn localName;\r\n\t\t}\r\n\r\n\t\tfunction getDomNodeNamespacePrefix(node) {\r\n\t\t\treturn node.prefix;\r\n\t\t}\r\n\r\n\t\tfunction escapeXmlChars(str) {\r\n\t\t\tif (typeof str === \"string\")\r\n\t\t\t\treturn str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#x27;');\r\n\t\t\telse\r\n\t\t\t\treturn str;\r\n\t\t}\r\n\r\n\t\tfunction unescapeXmlChars(str) {\r\n\t\t\treturn str.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"').replace(/&#x27;/g, \"'\").replace(/&amp;/g, '&');\r\n\t\t}\r\n\r\n\t\tfunction ensureProperArrayAccessForm(element, childName, elementPath) {\r\n\t\t\tswitch (config.arrayAccessForm) {\r\n\t\t\t\tcase \"property\":\r\n\t\t\t\t\tif (!(element[childName] instanceof Array))\r\n\t\t\t\t\t\telement[childName + \"_asArray\"] = [element[childName]];\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\telement[childName + \"_asArray\"] = element[childName];\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (!(element[childName] instanceof Array) && config.arrayAccessFormPaths.length > 0) {\r\n\t\t\t\tvar match = false;\r\n\r\n\t\t\t\tfor (var i = 0; i < config.arrayAccessFormPaths.length; i++) {\r\n\t\t\t\t\tvar arrayPath = config.arrayAccessFormPaths[i];\r\n\t\t\t\t\tif (typeof arrayPath === \"string\") {\r\n\t\t\t\t\t\tif (arrayPath === elementPath) {\r\n\t\t\t\t\t\t\tmatch = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (arrayPath instanceof RegExp) {\r\n\t\t\t\t\t\tif (arrayPath.test(elementPath)) {\r\n\t\t\t\t\t\t\tmatch = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (typeof arrayPath === \"function\") {\r\n\t\t\t\t\t\tif (arrayPath(childName, elementPath)) {\r\n\t\t\t\t\t\t\tmatch = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (match)\r\n\t\t\t\t\telement[childName] = [element[childName]];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction xmlDateTimeToDate(prop) {\r\n\t\t\t// Implementation based up on http://stackoverflow.com/questions/8178598/xml-datetime-to-javascript-date-object\r\n\t\t\t// Improved to support full spec and optional parts\r\n\t\t\tvar MINUTES_PER_HOUR = 60;\r\n\r\n\t\t\tvar bits = prop.split(/[-T:+Z]/g);\r\n\r\n\t\t\tvar d = new Date(bits[0], bits[1] - 1, bits[2]);\r\n\t\t\tvar secondBits = bits[5].split(\"\\.\");\r\n\t\t\td.setHours(bits[3], bits[4], secondBits[0]);\r\n\t\t\tif (secondBits.length > 1)\r\n\t\t\t\td.setMilliseconds(secondBits[1]);\r\n\r\n\t\t\t// Get supplied time zone offset in minutes\r\n\t\t\tif (bits[6] && bits[7]) {\r\n\t\t\t\tvar offsetMinutes = bits[6] * MINUTES_PER_HOUR + Number(bits[7]);\r\n\t\t\t\tvar sign = /\\d\\d-\\d\\d:\\d\\d$/.test(prop) ? '-' : '+';\r\n\r\n\t\t\t\t// Apply the sign\r\n\t\t\t\toffsetMinutes = 0 + (sign === '-' ? -1 * offsetMinutes : offsetMinutes);\r\n\r\n\t\t\t\t// Apply offset and local timezone\r\n\t\t\t\td.setMinutes(d.getMinutes() - offsetMinutes - d.getTimezoneOffset());\r\n\t\t\t} else if (prop.indexOf(\"Z\", prop.length - 1) !== -1) {\r\n\t\t\t\td = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds()));\r\n\t\t\t}\r\n\r\n\t\t\t// d is now a local time equivalent to the supplied time\r\n\t\t\treturn d;\r\n\t\t}\r\n\r\n\t\tfunction convertToDateIfRequired(value, childName, fullPath) {\r\n\t\t\tif (config.datetimeAccessFormPaths.length > 0) {\r\n\t\t\t\tvar pathWithoutTextNode = fullPath.split(\"\\.#\")[0];\r\n\r\n\t\t\t\tfor (var i = 0; i < config.datetimeAccessFormPaths.length; i++) {\r\n\t\t\t\t\tvar candidatePath = config.datetimeAccessFormPaths[i];\r\n\t\t\t\t\tif (typeof candidatePath === \"string\") {\r\n\t\t\t\t\t\tif (candidatePath === pathWithoutTextNode)\r\n\t\t\t\t\t\t\treturn xmlDateTimeToDate(value);\r\n\t\t\t\t\t} else if (candidatePath instanceof RegExp) {\r\n\t\t\t\t\t\tif (candidatePath.test(pathWithoutTextNode))\r\n\t\t\t\t\t\t\treturn xmlDateTimeToDate(value);\r\n\t\t\t\t\t} else if (typeof candidatePath === \"function\") {\r\n\t\t\t\t\t\tif (candidatePath(pathWithoutTextNode))\r\n\t\t\t\t\t\t\treturn xmlDateTimeToDate(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tfunction deserializeRootElementChildren(rootElement) {\r\n\t\t\tvar result = {};\r\n\t\t\tvar children = rootElement.childNodes;\r\n\r\n\t\t\t// Alternative for firstElementChild which is not supported in some environments\r\n\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\tvar child = children.item(i);\r\n\t\t\t\tif (child.nodeType === DOMNodeTypes.ELEMENT_NODE) {\r\n\t\t\t\t\tvar childName = getDomNodeLocalName(child);\r\n\r\n\t\t\t\t\tif (config.ignoreRoot)\r\n\t\t\t\t\t\tresult = deserializeDomChildren(child, childName);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tresult[childName] = deserializeDomChildren(child, childName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tfunction deserializeElementChildren(element, elementPath) {\r\n\t\t\tvar result = {};\r\n\t\t\tresult.__cnt = 0;\r\n\r\n\t\t\tvar nodeChildren = element.childNodes;\r\n\r\n\t\t\t// Child nodes.\r\n\t\t\tfor (var iChild = 0; iChild < nodeChildren.length; iChild++) {\r\n\t\t\t\tvar child = nodeChildren.item(iChild);\r\n\t\t\t\tvar childName = getDomNodeLocalName(child);\r\n\r\n\t\t\t\tif (child.nodeType === DOMNodeTypes.COMMENT_NODE)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tresult.__cnt++;\r\n\r\n\t\t\t\t// We deliberately do not accept everything falsey here because\r\n\t\t\t\t// elements that resolve to empty string should still be preserved.\r\n\t\t\t\tif (result[childName] == null) {\r\n\t\t\t\t\tresult[childName] = deserializeDomChildren(child, elementPath + \".\" + childName);\r\n\t\t\t\t\tensureProperArrayAccessForm(result, childName, elementPath + \".\" + childName);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!(result[childName] instanceof Array)) {\r\n\t\t\t\t\t\tresult[childName] = [result[childName]];\r\n\t\t\t\t\t\tensureProperArrayAccessForm(result, childName, elementPath + \".\" + childName);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresult[childName][result[childName].length] = deserializeDomChildren(child, elementPath + \".\" + childName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Attributes\r\n\t\t\tfor (var iAttribute = 0; iAttribute < element.attributes.length; iAttribute++) {\r\n\t\t\t\tvar attribute = element.attributes.item(iAttribute);\r\n\t\t\t\tresult.__cnt++;\r\n\r\n\t\t\t\tvar adjustedValue = attribute.value;\r\n\t\t\t\tfor (var iConverter = 0; iConverter < config.attributeConverters.length; iConverter++) {\r\n\t\t\t\t\tvar converter = config.attributeConverters[iConverter];\r\n\t\t\t\t\tif (converter.test.call(null, attribute.name, attribute.value))\r\n\t\t\t\t\t\tadjustedValue = converter.convert.call(null, attribute.name, attribute.value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult[config.attributePrefix + attribute.name] = adjustedValue;\r\n\t\t\t}\r\n\r\n\t\t\t// Node namespace prefix\r\n\t\t\tvar namespacePrefix = getDomNodeNamespacePrefix(element);\r\n\t\t\tif (namespacePrefix) {\r\n\t\t\t\tresult.__cnt++;\r\n\t\t\t\tresult.__prefix = namespacePrefix;\r\n\t\t\t}\r\n\r\n\t\t\tif (result[\"#text\"]) {\r\n\t\t\t\tresult.__text = result[\"#text\"];\r\n\r\n\t\t\t\tif (result.__text instanceof Array) {\r\n\t\t\t\t\tresult.__text = result.__text.join(\"\\n\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (config.escapeMode)\r\n\t\t\t\t\tresult.__text = unescapeXmlChars(result.__text);\r\n\r\n\t\t\t\tif (config.stripWhitespaces)\r\n\t\t\t\t\tresult.__text = result.__text.trim();\r\n\r\n\t\t\t\tdelete result[\"#text\"];\r\n\r\n\t\t\t\tif (config.arrayAccessForm === \"property\")\r\n\t\t\t\t\tdelete result[\"#text_asArray\"];\r\n\r\n\t\t\t\tresult.__text = convertToDateIfRequired(result.__text, \"#text\", elementPath + \".#text\");\r\n\t\t\t}\r\n\r\n\t\t\tif (result.hasOwnProperty('#cdata-section')) {\r\n\t\t\t\tresult.__cdata = result[\"#cdata-section\"];\r\n\t\t\t\tdelete result[\"#cdata-section\"];\r\n\r\n\t\t\t\tif (config.arrayAccessForm === \"property\")\r\n\t\t\t\t\tdelete result[\"#cdata-section_asArray\"];\r\n\t\t\t}\r\n\r\n\t\t\tif (result.__cnt === 1 && result.__text) {\r\n\t\t\t\tresult = result.__text;\r\n\t\t\t} else if (result.__cnt === 0 && config.emptyNodeForm === \"text\") {\r\n\t\t\t\tresult = '';\r\n\t\t\t} else if (result.__cnt > 1 && result.__text !== undefined && config.skipEmptyTextNodesForObj) {\r\n\t\t\t\tif (config.stripWhitespaces && result.__text === \"\" || result.__text.trim() === \"\") {\r\n\t\t\t\t\tdelete result.__text;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete result.__cnt;\r\n\r\n\t\t\t/**\r\n\t\t\t * We are checking if we are creating a __cdata property or if we just add the content of cdata inside result.\r\n\t\t\t * But, if we have a property inside xml tag (<tag PROPERTY=\"1\"></tag>), and a cdata inside, we can't ignore it.\r\n\t\t\t * In this case we are keeping __cdata property.\r\n\t\t\t */\r\n\t\t\tif (!config.keepCData && (!result.hasOwnProperty('__text') && result.hasOwnProperty('__cdata') && Object.keys(result).length === 1)) {\r\n\t\t\t\treturn (result.__cdata ? result.__cdata : '');\r\n\t\t\t}\r\n\r\n\t\t\tif (config.enableToStringFunc && (result.__text || result.__cdata)) {\r\n\t\t\t\tresult.toString = function toString() {\r\n\t\t\t\t\treturn (this.__text ? this.__text : '') + (this.__cdata ? this.__cdata : '');\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tfunction deserializeDomChildren(node, parentPath) {\r\n\t\t\tif (node.nodeType === DOMNodeTypes.DOCUMENT_NODE) {\r\n\t\t\t\treturn deserializeRootElementChildren(node);\r\n\t\t\t} else if (node.nodeType === DOMNodeTypes.ELEMENT_NODE) {\r\n\t\t\t\treturn deserializeElementChildren(node, parentPath);\r\n\t\t\t} else if (node.nodeType === DOMNodeTypes.TEXT_NODE || node.nodeType === DOMNodeTypes.CDATA_SECTION_NODE) {\r\n\t\t\t\treturn node.nodeValue;\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction serializeStartTag(jsObject, elementName, attributeNames, selfClosing) {\r\n\t\t\tvar resultStr = \"<\" + ((jsObject && jsObject.__prefix) ? (jsObject.__prefix + \":\") : \"\") + elementName;\r\n\r\n\t\t\tif (attributeNames) {\r\n\t\t\t\tfor (var i = 0; i < attributeNames.length; i++) {\r\n\t\t\t\t\tvar attributeName = attributeNames[i];\r\n\t\t\t\t\tvar attributeValue = jsObject[attributeName];\r\n\r\n\t\t\t\t\tif (config.escapeMode)\r\n\t\t\t\t\t\tattributeValue = escapeXmlChars(attributeValue);\r\n\r\n\t\t\t\t\tresultStr += \" \" + attributeName.substr(config.attributePrefix.length) + \"=\";\r\n\r\n\t\t\t\t\tif (config.useDoubleQuotes)\r\n\t\t\t\t\t\tresultStr += '\"' + attributeValue + '\"';\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tresultStr += \"'\" + attributeValue + \"'\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!selfClosing)\r\n\t\t\t\tresultStr += \">\";\r\n\t\t\telse\r\n\t\t\t\tresultStr += \" />\";\r\n\r\n\t\t\treturn resultStr;\r\n\t\t}\r\n\r\n\t\tfunction serializeEndTag(jsObject, elementName) {\r\n\t\t\treturn \"</\" + ((jsObject && jsObject.__prefix) ? (jsObject.__prefix + \":\") : \"\") + elementName + \">\";\r\n\t\t}\r\n\r\n\t\tfunction endsWith(str, suffix) {\r\n\t\t\treturn str.indexOf(suffix, str.length - suffix.length) !== -1;\r\n\t\t}\r\n\r\n\t\tfunction isSpecialProperty(jsonObj, propertyName) {\r\n\t\t\tif ((config.arrayAccessForm === \"property\" && endsWith(propertyName.toString(), (\"_asArray\")))\r\n\t\t\t\t|| propertyName.toString().indexOf(config.attributePrefix) === 0\r\n\t\t\t\t|| propertyName.toString().indexOf(\"__\") === 0\r\n\t\t\t\t|| (jsonObj[propertyName] instanceof Function))\r\n\t\t\t\treturn true;\r\n\t\t\telse\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction getDataElementCount(jsObject) {\r\n\t\t\tvar count = 0;\r\n\r\n\t\t\tif (jsObject instanceof Object) {\r\n\t\t\t\tfor (var propertyName in jsObject) {\r\n\t\t\t\t\tif (isSpecialProperty(jsObject, propertyName))\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn count;\r\n\t\t}\r\n\r\n\t\tfunction getDataAttributeNames(jsObject) {\r\n\t\t\tvar names = [];\r\n\r\n\t\t\tif (jsObject instanceof Object) {\r\n\t\t\t\tfor (var attributeName in jsObject) {\r\n\t\t\t\t\tif (attributeName.toString().indexOf(\"__\") === -1\r\n\t\t\t\t\t\t&& attributeName.toString().indexOf(config.attributePrefix) === 0) {\r\n\t\t\t\t\t\tnames.push(attributeName);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn names;\r\n\t\t}\r\n\r\n\t\tfunction serializeComplexTextNodeContents(textNode) {\r\n\t\t\tvar result = \"\";\r\n\r\n\t\t\tif (textNode.__cdata) {\r\n\t\t\t\tresult += \"<![CDATA[\" + textNode.__cdata + \"]]>\";\r\n\t\t\t}\r\n\r\n\t\t\tif (textNode.__text || typeof (textNode.__text) === 'number' || typeof (textNode.__text) === 'boolean') {\r\n\t\t\t\tif (config.escapeMode)\r\n\t\t\t\t\tresult += escapeXmlChars(textNode.__text);\r\n\t\t\t\telse\r\n\t\t\t\t\tresult += textNode.__text;\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tfunction serializeTextNodeContents(textNode) {\r\n\t\t\tvar result = \"\";\r\n\r\n\t\t\tif (textNode instanceof Object) {\r\n\t\t\t\tresult += serializeComplexTextNodeContents(textNode);\r\n\t\t\t} else if (textNode !== null) {\r\n\t\t\t\tif (config.escapeMode)\r\n\t\t\t\t\tresult += escapeXmlChars(textNode);\r\n\t\t\t\telse\r\n\t\t\t\t\tresult += textNode;\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tfunction serializeArray(elementArray, elementName, attributes) {\r\n\t\t\tvar result = \"\";\r\n\r\n\t\t\tif (elementArray.length === 0) {\r\n\t\t\t\tresult += serializeStartTag(elementArray, elementName, attributes, true);\r\n\t\t\t} else {\r\n\t\t\t\tfor (var i = 0; i < elementArray.length; i++) {\r\n\t\t\t\t\tresult += serializeJavaScriptObject(elementArray[i], elementName, getDataAttributeNames(elementArray[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tfunction serializeJavaScriptObject(element, elementName, attributes) {\r\n\t\t\tvar result = \"\";\r\n\r\n\t\t\t// Filter out elements\r\n\t\t\tif (config.jsAttributeFilter && config.jsAttributeFilter.call(null, elementName, element)) {\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\t// Convert element\r\n\t\t\tif (config.jsAttributeConverter) {\r\n\t\t\t\telement = config.jsAttributeConverter.call(null, elementName, element);\r\n\t\t\t}\r\n\t\t\tif ((element === undefined || element === null || element === '') && config.selfClosingElements) {\r\n\t\t\t\tresult += serializeStartTag(element, elementName, attributes, true);\r\n\t\t\t} else if (typeof element === 'object') {\r\n\t\t\t\tif (Object.prototype.toString.call(element) === '[object Array]') {\r\n\t\t\t\t\tresult += serializeArray(element, elementName, attributes);\r\n\t\t\t\t} else if (element instanceof Date) {\r\n\t\t\t\t\tresult += serializeStartTag(element, elementName, attributes, false);\r\n\t\t\t\t\t// Serialize date\r\n\t\t\t\t\tresult += config.jsDateUTC ? element.toUTCString() : element.toISOString();\r\n\t\t\t\t\tresult += serializeEndTag(element, elementName);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar childElementCount = getDataElementCount(element);\r\n\t\t\t\t\tif (childElementCount > 0 || typeof (element.__text) === 'number' || typeof (element.__text) === 'boolean' || element.__text || element.__cdata) {\r\n\t\t\t\t\t\tresult += serializeStartTag(element, elementName, attributes, false);\r\n\t\t\t\t\t\tresult += serializeJavaScriptObjectChildren(element);\r\n\t\t\t\t\t\tresult += serializeEndTag(element, elementName);\r\n\t\t\t\t\t} else if (config.selfClosingElements) {\r\n\t\t\t\t\t\tresult += serializeStartTag(element, elementName, attributes, true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult += serializeStartTag(element, elementName, attributes, false);\r\n\t\t\t\t\t\tresult += serializeEndTag(element, elementName);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult += serializeStartTag(element, elementName, attributes, false);\r\n\t\t\t\tresult += serializeTextNodeContents(element);\r\n\t\t\t\tresult += serializeEndTag(element, elementName);\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tfunction serializeJavaScriptObjectChildren(jsObject) {\r\n\t\t\tvar result = \"\";\r\n\r\n\t\t\tvar elementCount = getDataElementCount(jsObject);\r\n\r\n\t\t\tif (elementCount > 0) {\r\n\t\t\t\tfor (var elementName in jsObject) {\r\n\t\t\t\t\tif (isSpecialProperty(jsObject, elementName))\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\tvar element = jsObject[elementName];\r\n\t\t\t\t\tvar attributes = getDataAttributeNames(element);\r\n\r\n\t\t\t\t\tresult += serializeJavaScriptObject(element, elementName, attributes);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tresult += serializeTextNodeContents(jsObject);\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tfunction parseXml(xml) {\r\n\t\t\tif (xml === undefined) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof xml !== \"string\") {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar parser = null;\r\n\t\t\tvar domNode = null;\r\n\r\n\t\t\tif (CustomDOMParser) {\r\n\t\t\t\t// This branch is used for node.js, with the xmldom parser.\r\n\t\t\t\tparser = new CustomDOMParser();\r\n\r\n\t\t\t\tdomNode = parser.parseFromString(xml, \"text/xml\");\r\n\t\t\t} else if (window && window.DOMParser) {\r\n\t\t\t\tparser = new window.DOMParser();\r\n\t\t\t\tvar parsererrorNS = null;\r\n\r\n\t\t\t\tvar isIEParser = window.ActiveXObject || \"ActiveXObject\" in window;\r\n\r\n\t\t\t\t// IE9+ now is here\r\n\t\t\t\tif (!isIEParser) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tparsererrorNS = parser.parseFromString(\"INVALID\", \"text/xml\").childNodes[0].namespaceURI;\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\tparsererrorNS = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdomNode = parser.parseFromString(xml, \"text/xml\");\r\n\t\t\t\t\tif (parsererrorNS !== null && domNode.getElementsByTagNameNS(parsererrorNS, \"parsererror\").length > 0) {\r\n\t\t\t\t\t\tdomNode = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tdomNode = null;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// IE :(\r\n\t\t\t\tif (xml.indexOf(\"<?\") === 0) {\r\n\t\t\t\t\txml = xml.substr(xml.indexOf(\"?>\") + 2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* global ActiveXObject */\r\n\t\t\t\tdomNode = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tdomNode.async = \"false\";\r\n\t\t\t\tdomNode.loadXML(xml);\r\n\t\t\t}\r\n\r\n\t\t\treturn domNode;\r\n\t\t}\r\n\r\n\t\tthis.asArray = function asArray(prop) {\r\n\t\t\tif (prop === undefined || prop === null) {\r\n\t\t\t\treturn [];\r\n\t\t\t} else if (prop instanceof Array) {\r\n\t\t\t\treturn prop;\r\n\t\t\t} else {\r\n\t\t\t\treturn [prop];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.toXmlDateTime = function toXmlDateTime(dt) {\r\n\t\t\tif (dt instanceof Date) {\r\n\t\t\t\treturn dt.toISOString();\r\n\t\t\t} else if (typeof (dt) === 'number') {\r\n\t\t\t\treturn new Date(dt).toISOString();\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.asDateTime = function asDateTime(prop) {\r\n\t\t\tif (typeof (prop) === \"string\") {\r\n\t\t\t\treturn xmlDateTimeToDate(prop);\r\n\t\t\t} else {\r\n\t\t\t\treturn prop;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/*\r\n\t\t\tInternally the logic works in a cycle:\r\n\t\t\tDOM->JS - implemented by custom logic (deserialization).\r\n\t\t\tJS->XML - implemented by custom logic (serialization).\r\n\t\t\tXML->DOM - implemented by browser.\r\n\t\t*/\r\n\r\n\t\t// Transformns an XML string into DOM-tree\r\n\t\tthis.xml2dom = function xml2dom(xml) {\r\n\t\t\treturn parseXml(xml);\r\n\t\t};\r\n\r\n\t\t// Transforms a DOM tree to JavaScript objects.\r\n\t\tthis.dom2js = function dom2js(domNode) {\r\n\t\t\treturn deserializeDomChildren(domNode, null);\r\n\t\t};\r\n\r\n\t\t// Transforms JavaScript objects to a DOM tree.\r\n\t\tthis.js2dom = function js2dom(jsObject) {\r\n\t\t\tvar xml = this.js2xml(jsObject);\r\n\t\t\treturn parseXml(xml);\r\n\t\t};\r\n\r\n\t\t// Transformns an XML string into JavaScript objects.\r\n\t\tthis.xml2js = function xml2js(xml) {\r\n\t\t\tvar domNode = parseXml(xml);\r\n\t\t\tif (domNode != null)\r\n\t\t\t\treturn this.dom2js(domNode);\r\n\t\t\telse\r\n\t\t\t\treturn null;\r\n\t\t};\r\n\r\n\t\t// Transforms JavaScript objects into an XML string.\r\n\t\tthis.js2xml = function js2xml(jsObject) {\r\n\t\t\treturn serializeJavaScriptObjectChildren(jsObject);\r\n\t\t};\r\n\r\n\t\tthis.getVersion = function getVersion() {\r\n\t\t\treturn VERSION;\r\n\t\t};\r\n\t};\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/x2js/x2js.js\n// module id = 52\n// module chunks = 0","var ms = require('./manis.utils');\r\nvar X2JS = require('x2js');\r\n\r\nvar x2js = new X2JS({\r\n    attributePrefix: \"\"\r\n});\r\nvar _ssrcList = new Map();\r\n\r\n\r\n/**\r\n * audio/video/data集合\r\n */\r\nvar mediaObjList = new Array();\r\n\r\n/**\r\n * 1.保存VB节点，source-add时重用公共部分\r\n * 2.SDP对应的->cname : mixedaudio mixedvideo\r\n */\r\nvar _mixedAudioObj, _mixedVideoObj;\r\n\r\n/**\r\n * 1.生成假的SSRC\r\n * 2.自增\r\n */\r\nvar _ssrc = 100;\r\n\r\nvar midMum = 0;\r\n\r\nvar SsrcObj = function (isNew) {\r\n    this.jid = \"\";\r\n    this.isNew = isNew;\r\n};\r\n\r\nvar MediaObj = function (type) {\r\n    this.type = type;\r\n    this.ssrc = \"\";\r\n    this.title = \"\";\r\n    if (ms.getSemantics() != \"plan-b\") {\r\n        this.mid = midMum;\r\n    } else {\r\n        this.mid = type;\r\n    }\r\n    this.body = \"\";\r\n    if (this.type == \"data\") {\r\n        this.ssrc = \"0\";\r\n    }\r\n\r\n    /**\r\n     * 删除替换时保留原始MediaStream对象，根据endpoint修改\r\n     */\r\n    this.streamId = \"\";\r\n\r\n    /**\r\n     * sdp:mslabel对应MediaStream对象的ID属性\r\n     */\r\n    this.mslabel = \"\";\r\n\r\n    midMum++;\r\n};\r\nvar SdpUtil = {\r\n    markScreenSSRC: function (xml) {\r\n        var content = $(xml).find(\">content\");\r\n        var videoNode = $(content).find('description[media=\"video\"]') || null;\r\n        var videoSources = videoNode.find('source[xmlns=\"urn:xmpp:jingle:apps:rtp:ssma:0\"]') || null;\r\n        for (var i = 0; i < videoSources.length; i++) {\r\n            var videoSource = $(videoSources[i]);\r\n            var isScreen = videoSource.attr('screen') || false;\r\n            var videoSSRC = videoSource.attr('ssrc') || null;\r\n            if (isScreen.toString() == 'true') {\r\n                console.log('find screen source: ', videoSource[0], videoSSRC);\r\n                window.screenSSRC = parseInt(videoSSRC);\r\n            }\r\n        }\r\n    },\r\n    xml2sdp: function (xml) {\r\n        var that = this;\r\n        that.markScreenSSRC(xml)\r\n        var jsonObj = x2js.xml2js(xml);\r\n        if (jsonObj && jsonObj.jingle) {\r\n            var action = jsonObj.jingle.action;\r\n            var contents = jsonObj.jingle.content;\r\n            if (action && contents) {\r\n                if (!contents.length) {\r\n                    var _array = new Array();\r\n                    _array.push(contents);\r\n                    contents = _array;\r\n                }\r\n                if (action == \"session-initiate\") {\r\n                    _ssrcList = new Map();\r\n                    mediaObjList = new Array();\r\n\r\n                    contents.forEach(function (content) {\r\n                        var name = content.name;\r\n                        if (name && content.description) {\r\n                            if (name != \"data\") {\r\n                                var sources = content.description.source;\r\n                                if (!sources.length) {\r\n                                    var _array = new Array();\r\n                                    _array.push(sources);\r\n                                    sources = _array;\r\n                                }\r\n                                sources.forEach(function (source) {\r\n                                    that.getSessionInitiateMediaObj(name, content, source);\r\n                                });\r\n                            } else {\r\n                                if (content.transport) {\r\n                                    var title = \"m=\" + content.description.media + \" 9 DTLS/SCTP \" + content.transport.sctpmap.number + \"\\r\\n\"\r\n                                        + \"c=IN IP4 0.0.0.0\" + \"\\r\\n\"\r\n                                        + \"a=ice-ufrag:\" + content.transport.ufrag + \"\\r\\n\"\r\n                                        + \"a=ice-pwd:\" + content.transport.pwd + \"\\r\\n\"\r\n                                        + \"a=ice-options:trickle\" + \"\\r\\n\"\r\n                                        + \"a=fingerprint:\" + content.transport.fingerprint.hash + \" \" + content.transport.fingerprint[\"__text\"] + \"\\r\\n\"\r\n                                        + \"a=setup:actpass\" + \"\\r\\n\"\r\n                                    var candidates = content.transport.candidate;\r\n                                    for (var i = 0; i < candidates.length; i++) {\r\n                                        var candidate = candidates[i];\r\n                                        title += \"a=candidate:\" + candidate.foundation\r\n                                            + \" \" + candidate.component\r\n                                            + \" \" + candidate.protocol\r\n                                            + \" \" + candidate.priority\r\n                                            + \" \" + candidate.ip\r\n                                            + \" \" + candidate.port\r\n                                            + \" typ \" + candidate.type + \" generation \" + candidate.generation + \"\\r\\n\";\r\n                                    }\r\n                                    title += \"a=sendrecv\" + \"\\r\\n\"\r\n                                        + \"a=rtcp-mux\" + \"\\r\\n\";\r\n                                    var body = \"a=sctpmap:\" + content.transport.sctpmap.number + \" \" + content.transport.sctpmap.protocol + \" \" + content.transport.sctpmap.streams + \"\\r\\n\";\r\n                                    var media = new MediaObj(name);\r\n                                    media.title = title;\r\n                                    media.body = body;\r\n                                    // 保存 data/application\r\n                                    mediaObjList.push(media);\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                } else if (action == \"source-add\") {\r\n                    var that = this;\r\n                    contents.forEach(function (content) {\r\n                        that.getSourceAddObj(content);\r\n                    });\r\n                } else if (action == \"source-remove\") {\r\n                    var that = this;\r\n                    contents.forEach(function (content) {\r\n                        that.getSourceRemoveObj(content);\r\n                    });\r\n                }\r\n\r\n                var sdp = this.getOfferSDP();\r\n                console.log(\"========================sdp========\" + action + \"\\n\" + sdp + \",ssrcList:\", _ssrcList);\r\n                return sdp;\r\n            }\r\n        }\r\n    },\r\n    getSessionInitiateMediaObj: function (name, content, source) {\r\n        if (source && name && content) {\r\n            var streamId = ms.findValueByName(source.parameter, 'mslabel');\r\n            if (streamId) {\r\n                var media = new MediaObj(name);\r\n                media.ssrc = source.ssrc;\r\n                media.title = this.getMediaTtileSDP(name, content);\r\n                media.body = this.getMediaBodySDP(source);\r\n\r\n                media.mslabel = streamId;\r\n                media.label = ms.findValueByName(source.parameter, 'label');\r\n                media.streamId = streamId;\r\n\r\n                this.saveSsrc(streamId, media, source, name, true);\r\n\r\n                // 保存 audio / video\r\n                mediaObjList.push(media);\r\n\r\n                if (media.mslabel.indexOf(\"mixed\") > -1) {\r\n                    if (name == \"audio\") {\r\n                        _mixedAudioObj = media;\r\n                    } else {\r\n                        _mixedVideoObj = media;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    getMediaBodySDP: function (source) {\r\n        var rs = \"\";\r\n        if (ms.getSemantics() != \"plan-b\") {\r\n            rs += \"a=msid:\" + ms.findValueByName(source.parameter, 'msid') + \"\\r\\n\";\r\n        }\r\n        rs += \"a=ssrc:\" + source.ssrc + \" cname:\" + ms.findValueByName(source.parameter, 'cname') + \"\\r\\n\";\r\n        if (ms.getSemantics() != \"firefox\") {\r\n            rs += \"a=ssrc:\" + source.ssrc + \" msid:\" + ms.findValueByName(source.parameter, 'msid') + \"\\r\\n\"\r\n                + \"a=ssrc:\" + source.ssrc + \" mslabel:\" + ms.findValueByName(source.parameter, 'mslabel') + \"\\r\\n\"\r\n                + \"a=ssrc:\" + source.ssrc + \" label:\" + ms.findValueByName(source.parameter, 'label') + \"\\r\\n\";\r\n        }\r\n        return rs;\r\n    },\r\n    getMediaTtileSDP: function (name, content) {\r\n        var payloads = content.description[\"payload-type\"];\r\n        if (!payloads.length) {\r\n            var _array = new Array();\r\n            _array.push(payloads);\r\n            payloads = _array;\r\n        }\r\n        var payloadTypeIds = new Array();\r\n        payloads.forEach(function (payload) {\r\n            payloadTypeIds.push(payload.id);\r\n        });\r\n\r\n        var rs = \"m=\" + name + \" 9 UDP/TLS/RTP/SAVPF \" + payloadTypeIds.join(\" \") + \"\\r\\n\"\r\n            + \"c=IN IP4 0.0.0.0\" + \"\\r\\n\"\r\n            + \"a=rtcp:9 IN IP4 0.0.0.0\\r\\n\"\r\n            + \"a=ice-ufrag:\" + content.transport.ufrag + \"\\r\\n\"\r\n            + \"a=ice-pwd:\" + content.transport.pwd + \"\\r\\n\"\r\n            + \"a=ice-options:trickle\" + \"\\r\\n\"\r\n            + \"a=fingerprint:\" + content.transport.fingerprint.hash + \" \" + content.transport.fingerprint[\"__text\"] + \"\\r\\n\"\r\n            + \"a=setup:actpass\" + \"\\r\\n\";\r\n        // if (name == \"audio\") {\r\n        //     rs += \"a=extmap:1 urn:ietf:params:rtp-hdrext:ssrc-audio-level\" + \"\\r\\n\"\r\n        //     // + \"a=extmap:9 urn:ietf:params:rtp-hdrext:sdes:mid\" + \"\\r\\n\"\r\n        // } else if (name == \"video\") {\r\n        //     // rs += \"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\" + \"\\r\\n\"\r\n        //     //     + \"a=extmap:4 urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id\" + \"\\r\\n\"\r\n        //     //     + \"a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\" + \"\\r\\n\"\r\n        //     //+ \"a=extmap:9 urn:ietf:params:rtp-hdrext:sdes:mid\" + \"\\r\\n\"\r\n        // }\r\n        var rtpHdrext = content.description[\"rtp-hdrext\"];\r\n        if (!rtpHdrext.length) {\r\n            rs += \"a=extmap:\" + rtpHdrext.id + \" \" + rtpHdrext.uri + \"\\r\\n\";\r\n        } else {\r\n            rtpHdrext.forEach(function (obj) {\r\n                rs += \"a=extmap:\" + obj.id + \" \" + obj.uri + \"\\r\\n\";\r\n            });\r\n        }\r\n        var candidates = content.transport.candidate;\r\n        for (var i = 0; i < candidates.length; i++) {\r\n            var candidate = candidates[i];\r\n            rs += \"a=candidate:\" + candidate.foundation\r\n                + \" \" + candidate.component\r\n                + \" \" + candidate.protocol\r\n                + \" \" + candidate.priority\r\n                + \" \" + candidate.ip\r\n                + \" \" + candidate.port\r\n                + \" typ \" + candidate.type + \" generation \" + candidate.generation + \"\\r\\n\";\r\n        }\r\n        rs += \"a=sendrecv\" + \"\\r\\n\"\r\n            + \"a=rtcp-mux\" + \"\\r\\n\";\r\n\r\n        payloads.forEach(function (payload) {\r\n            var id = payload.id;\r\n            var payloadName = payload.name;\r\n            var clockrate = payload.clockrate;\r\n            if (name == \"audio\") {\r\n                var channels = payload.channels;\r\n                if (channels) {\r\n                    rs += \"a=rtpmap:\" + id + \" \" + payloadName + \"/\" + clockrate + \"/\" + channels + \"\\r\\n\";\r\n                } else {\r\n                    rs += \"a=rtpmap:\" + id + \" \" + payloadName + \"/\" + clockrate + \"\\r\\n\"\r\n                }\r\n                rs += \"a=rtcp-fb:\" + id + \" transport-cc\" + \"\\r\\n\";\r\n            } else if (name == \"video\") {\r\n                rs += \"a=rtpmap:\" + id + \" \" + payloadName + \"/\" + clockrate + \"\\r\\n\"\r\n                if (payload[\"rtcp-fb\"]) {\r\n                    rs += \"a=rtcp-fb:\" + id + \" ccm fir\" + \"\\r\\n\"\r\n                        + \"a=rtcp-fb:\" + id + \" nack\" + \"\\r\\n\"\r\n                        + \"a=rtcp-fb:\" + id + \" nack pli\" + \"\\r\\n\"\r\n                        + \"a=rtcp-fb:\" + id + \" transport-cc\" + \"\\r\\n\"\r\n                }\r\n            }\r\n            if (payload.parameter) {\r\n                if (payload.parameter.length) {\r\n                    var pars = \"\";\r\n                    for (var i = 0, j = payload.parameter.length; i < j; i++) {\r\n                        if (i == 0) {\r\n                            pars += payload.parameter[i][\"name\"] + \"=\" + payload.parameter[i][\"value\"];\r\n                        } else {\r\n                            pars += \";\" + payload.parameter[i][\"name\"] + \"=\" + payload.parameter[i][\"value\"];\r\n                        }\r\n                    }\r\n                    rs += \"a=fmtp:\" + id + \" \" + pars + \"\\r\\n\";\r\n                } else {\r\n                    rs += \"a=fmtp:\" + id + \" \" + payload.parameter[\"name\"] + \"=\" + payload.parameter[\"value\"] + \"\\r\\n\";\r\n                }\r\n            }\r\n        });\r\n        return rs;\r\n    },\r\n    getSourceAddObj: function (content) {\r\n        var that = this;\r\n        var name = content.name;\r\n        if (name != \"data\") {\r\n            if (ms.getSemantics() == \"plan-b\") {\r\n                var sources = content.description.source;\r\n                if (sources) {\r\n                    if (!sources.length) {\r\n                        var _array = new Array();\r\n                        _array.push(sources);\r\n                        sources = _array;\r\n                    }\r\n                    sources.forEach(function (source) {\r\n                        var obj = new MediaObj(name);\r\n                        if (name == \"audio\") {\r\n                            obj.title = _mixedAudioObj.title;\r\n                        } else {\r\n                            obj.title = _mixedVideoObj.title;\r\n                        }\r\n                        var streamId = ms.findValueByName(source.parameter, 'mslabel');\r\n\r\n                        if (streamId) {\r\n                            obj.body = that.getMediaBodySDP(source);\r\n                            obj.ssrc = source.ssrc;\r\n                            obj.mslabel = streamId;\r\n                            obj.label = ms.findValueByName(source.parameter, 'label');\r\n                            obj.streamId = streamId;\r\n                            mediaObjList.push(obj);\r\n\r\n                            that.saveSsrc(streamId, obj, source, name, true);\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                var flag = true;\r\n                mediaObjList.forEach(function (obj) {\r\n                    if (obj.type == name && obj.mslabel == \"re_mslabel\") {\r\n                        var source = content.description.source;\r\n                        if (source && flag) {\r\n                            var mslabel = ms.findValueByName(source.parameter, 'mslabel');\r\n                            if (mslabel) {\r\n                                obj.body = that.getMediaBodySDP(source);\r\n                                obj.mslabel = mslabel;\r\n                                obj.label = ms.findValueByName(source.parameter, 'label');\r\n                                obj.ssrc = source.ssrc;\r\n\r\n                                that.saveSsrc(mslabel, obj, source, name, true);\r\n                                flag = false;\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n                if (flag) {\r\n                    var source = content.description.source;\r\n                    var streamId = ms.findValueByName(source.parameter, 'mslabel');\r\n                    if (source && streamId) {\r\n                        var obj = new MediaObj(name);\r\n                        if (name == \"audio\") {\r\n                            obj.title = _mixedAudioObj.title;\r\n                        } else {\r\n                            obj.title = _mixedVideoObj.title;\r\n                        }\r\n\r\n                        obj.body = that.getMediaBodySDP(source);\r\n                        obj.mslabel = streamId;\r\n                        obj.label = ms.findValueByName(source.parameter, 'label');\r\n                        obj.ssrc = source.ssrc;\r\n                        obj.streamId = streamId;\r\n                        mediaObjList.push(obj);\r\n\r\n                        that.saveSsrc(streamId, obj, source, name, false);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n    },\r\n    saveSsrc: function (streamId, obj, source, name, flag) {\r\n        if (streamId && streamId.indexOf(\"mixed\") == -1) {\r\n            var type = {\r\n                ssrc: obj.ssrc,\r\n                label: obj.label\r\n            };\r\n            var ssrcObj = _ssrcList.get(streamId);\r\n            if (!ssrcObj) {\r\n                ssrcObj = new SsrcObj(flag);\r\n                ssrcObj.jid = source.jid;\r\n                ssrcObj[name] = type;\r\n                _ssrcList.set(streamId, ssrcObj);\r\n            } else {\r\n                ssrcObj[name] = type;\r\n            }\r\n        }\r\n    },\r\n    getSourceRemoveObj: function (content) {\r\n        var that = this;\r\n        var name = content.name;\r\n        if (name != \"data\") {\r\n            var sources = content.description.source;\r\n            if (sources) {\r\n                if (!sources.length) {\r\n                    var _array = new Array();\r\n                    _array.push(sources);\r\n                    sources = _array;\r\n                }\r\n                if (ms.getSemantics() == \"plan-b\") {\r\n                    sources.forEach(function (source) {\r\n                        var streamId = ms.findValueByName(source.parameter, 'mslabel');\r\n                        if (streamId) {\r\n                            _ssrcList.delete(streamId);\r\n                            var _array = new Array();\r\n                            mediaObjList.forEach(function (obj) {\r\n                                if (obj.ssrc == source.ssrc) {\r\n                                    $(document).trigger('mains.on.stream.removed', [name, source.ssrc, false]);\r\n                                } else {\r\n                                    _array.push(obj);\r\n                                }\r\n                            });\r\n                            mediaObjList = _array;\r\n                        }\r\n                    });\r\n                } else if (ms.getSemantics() == \"unified-plan\") {\r\n                    sources.forEach(function (source) {\r\n                        var streamId = ms.findValueByName(source.parameter, 'mslabel')\r\n                        if (streamId) {\r\n                            _ssrcList.delete(streamId);\r\n                            mediaObjList.forEach(function (obj) {\r\n                                if (obj.ssrc == source.ssrc) {\r\n                                    obj.body = that.getReplaceMediaBodySDP();\r\n                                    obj.ssrc = _ssrc;\r\n                                    obj.label = \"re_label\";\r\n                                    obj.mslabel = \"re_mslabel\";\r\n                                    $(document).trigger('mains.on.stream.removed', [name, source.ssrc, false]);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                } else if (ms.getSemantics() == \"firefox\") {\r\n                    sources.forEach(function (source) {\r\n                        var msid = ms.findValueByName(source.parameter, 'msid');\r\n                        if (msid) {\r\n                            var labels = msid.split(\" \");\r\n                            var streamId = labels[0];\r\n                            _ssrcList.delete(streamId);\r\n\r\n                            mediaObjList.forEach(function (obj) {\r\n                                if (obj.ssrc == source.ssrc) {\r\n                                    obj.body = that.getReplaceMediaBodySDP();\r\n                                    obj.ssrc = _ssrc;\r\n                                    obj.label = \"re_label\";\r\n                                    obj.mslabel = \"re_mslabel\";\r\n\r\n                                    $(document).trigger('mains.on.stream.removed', [name, source.ssrc, false]);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    },\r\n    getOfferSDP: function () {\r\n        if (ms.getSemantics() == \"plan-b\") {\r\n            var bundleNumStr = \"\", audioGroup = \"\", videoGroup = \"\", dataGroup = \"\";\r\n            mediaObjList.forEach(function (obj) {\r\n                if (obj.type == \"audio\") {\r\n                    if (audioGroup == \"\") {\r\n                        bundleNumStr += \" \" + obj.mid;\r\n                        audioGroup += obj.title;\r\n                        audioGroup += \"a=mid:\" + obj.mid + \"\\r\\n\";\r\n                        audioGroup += \"b=AS:\" + ms.getBandwidth(obj.type) + \"\\r\\n\";\r\n                        audioGroup += obj.body;\r\n                    } else {\r\n                        audioGroup += obj.body;\r\n                    }\r\n                }\r\n                if (obj.type == \"video\") {\r\n                    if (videoGroup == \"\") {\r\n                        bundleNumStr += \" \" + obj.mid;\r\n                        videoGroup += obj.title;\r\n                        videoGroup += \"a=mid:\" + obj.mid + \"\\r\\n\";\r\n                        videoGroup += \"b=AS:\" + ms.getBandwidth(obj.type) + \"\\r\\n\";\r\n                        videoGroup += obj.body;\r\n                    } else {\r\n                        videoGroup += obj.body;\r\n                    }\r\n                }\r\n                if (obj.type == \"data\") {\r\n                    if (dataGroup == \"\") {\r\n                        bundleNumStr += \" \" + obj.mid;\r\n                        dataGroup += obj.title;\r\n                        dataGroup += \"a=mid:\" + obj.mid + \"\\r\\n\";\r\n                        dataGroup += obj.body;\r\n                    }\r\n                }\r\n            });\r\n            var sdpOffer = \"v=0\\r\\n\"\r\n                + \"o=- 1923518516 2 IN IP4 0.0.0.0\\r\\n\"\r\n                + \"s=-\\r\\n\"\r\n                + \"t=0 0\\r\\n\"\r\n                + \"a=group:BUNDLE\" + bundleNumStr + \"\\r\\n\"\r\n                + \"a=msid-semantic: WMS\\r\\n\"\r\n                + audioGroup\r\n                + videoGroup\r\n                + dataGroup;\r\n            return sdpOffer;\r\n        } else {\r\n            var bundleNumStr = \"\", bootSdpOffer = \"\";\r\n            mediaObjList.forEach(function (obj) {\r\n                bundleNumStr += \" \" + obj.mid;\r\n                bootSdpOffer += obj.title;\r\n                bootSdpOffer += \"a=mid:\" + obj.mid + \"\\r\\n\";\r\n                if (obj.type != \"data\") {\r\n                    bootSdpOffer += \"b=AS:\" + ms.getBandwidth(obj.type) + \"\\r\\n\";\r\n                }\r\n                bootSdpOffer += obj.body;\r\n            });\r\n\r\n            var sdpOffer = \"v=0\\r\\n\" +\r\n                \"o=- 1923518516 2 IN IP4 0.0.0.0\\r\\n\" +\r\n                \"s=-\\r\\n\" +\r\n                \"t=0 0\\r\\n\" +\r\n                \"a=group:BUNDLE\" + bundleNumStr + \"\\r\\n\" +\r\n                \"a=msid-semantic: WMS *\\r\\n\" + bootSdpOffer;\r\n            return sdpOffer;\r\n        }\r\n    },\r\n    getSsrc: function (streamId) {\r\n        if (streamId) {\r\n            return _ssrcList.get(streamId);\r\n        } else {\r\n            return _ssrcList;\r\n        }\r\n    },\r\n    getReplaceMediaBodySDP: function () {\r\n        var rs = \"a=msid:re_mslabel re_label\\r\\n\"\r\n            + \"a=ssrc:\" + _ssrc + \" cname:re_cname\\r\\n\"\r\n        if (ms.getSemantics() != \"firefox\") {\r\n            rs += \"a=ssrc:\" + _ssrc + \" msid:re_mslabel re_label\\r\\n\"\r\n                + \"a=ssrc:\" + _ssrc + \" mslabel:re_mslabel\\r\\n\"\r\n                + \"a=ssrc:\" + _ssrc + \" label:re_label\\r\\n\";\r\n        }\r\n        _ssrc++;\r\n        return rs;\r\n    }\r\n};\r\nexports = module.exports = SdpUtil;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/strophe/plugins/SdpUtil.js\n// module id = 53\n// module chunks = 0","var LZString = require('../../libs/lz-string');\r\nvar ManisFunctions = require('../../manis.functions');\r\nvar ManisResponse = require('../../manis.response');\r\nvar ErrorCode = require('../../errorCode');\r\n\r\nvar whiteboardStart = false;\r\n/*\r\n $(document).ready(function () {\r\n var conferenceList = '<datalist id=\"conference-list\">'\r\n\r\n for (var i = 0; i < config.conferences.length; i++) {\r\n conferenceList = conferenceList + '<option value=\"' + Strophe.getNodeFromJid(config.conferences[i].jid) + '\">' + config.conferences[i].name + '</option>'\r\n }\r\n\r\n conferenceList = conferenceList + '</datalist>'\r\n\r\n $(\"body\").append(conferenceList);\r\n $(\"#enter_room_field\").attr(\"list\", \"conference-list\");\r\n\r\n setTimeout(function () {\r\n if ($('#ofmeet-extension-installed').length > 0) {\r\n var msg = {\r\n type: 'ofmeetSetConfig',\r\n host: window.location.host,\r\n username: Strophe.getResourceFromJid(this.connection.jid)\r\n };\r\n console.log(\"window.post.ofmeetSetConfig\", msg);\r\n window.postMessage(msg, '*');\r\n }\r\n }, 5000);\r\n });\r\n */\r\n\r\n\r\nStrophe.addConnectionPlugin('ofmuc', {\r\n  connection: null,\r\n  roomJid: null,\r\n  members: {},\r\n  sharePDF: null,\r\n  shareApp: null,\r\n  shareLink: '',\r\n  linkSharer: false,\r\n  pdfPage: \"1\",\r\n  recordingToken: null,\r\n  isRecording: false,\r\n  urls: [],\r\n  bookmarks: [],\r\n  appRunning: false,\r\n  enableCursor: true,\r\n  video: null,\r\n  appStartFrom: null,\r\n\r\n  init: function (conn) {\r\n    this.connection = conn;\r\n    this.connection.addHandler(this.onMessage.bind(this), null, 'message');\r\n    this.connection.addHandler(this.onPresence.bind(this), null, 'presence');\r\n    this.connection.addHandler(this.onPresenceUnavailable.bind(this), null, 'presence', 'unavailable');\r\n\r\n    var that = this;\r\n\r\n    that.shareLink = \"\";\r\n\r\n    // $(window).resize(function () {\r\n    //   that.resize();\r\n    // });\r\n\r\n\r\n    window.addEventListener('message', function (event) {\r\n      // console.log(\"addListener message ofmuc\", event);\r\n\r\n      if (!event.data) return;\r\n      if (event.data.type == 'ofmeetLoaded') that.appReady();\r\n      if (event.data.type == 'ofmeetSendMessage') that.appMessage(event.data.msg);\r\n    });\r\n  },\r\n\r\n  resize: function () {\r\n    if ($('#presentation>iframe')) {\r\n      $('#presentation>iframe').width(this.getPresentationWidth());\r\n      $('#presentation>iframe').height(this.getPresentationHeight());\r\n    }\r\n  },\r\n\r\n  getPresentationWidth: function () {\r\n    var availableWidth = window.innerWidth * 0.6;\r\n    /*var availableHeight = this.getPresentationHeight();\r\n\r\n     var aspectRatio = 16.5 / 9.0;\r\n     if (availableHeight < availableWidth / aspectRatio) {\r\n     availableWidth = Math.floor(availableHeight * aspectRatio);\r\n     }*/\r\n    return availableWidth - 10;\r\n  },\r\n\r\n  getPresentationHeight: function () {\r\n    var remoteVideos = $('#remoteVideos');\r\n    return window.innerHeight - 40 - (remoteVideos[0].scrollHeight - remoteVideos.outerHeight()) - 120;//(window.innerHeight - remoteVideos.outerHeight())*0.9;\r\n  },\r\n\r\n  onPresence: function (pres) {\r\n    //console.log('ofmuc onPresence', $(pres))\r\n\r\n    var from = pres.getAttribute('from');\r\n    var type = pres.getAttribute('type');\r\n\r\n    if (type != null) {\r\n      return true;\r\n    }\r\n    if(config.debug == true){\r\n      console.log('ofmuc on presence', pres, from, type);\r\n    }\r\n    var member = {};\r\n    member.jid = from;\r\n    if(this.members[from] === undefined){\r\n      this.members[from] = member;\r\n      if(this.shareApp){\r\n        this.appShare(\"create\", this.shareApp);\r\n      }\r\n    }\r\n    return true;\r\n  },\r\n\r\n  onParticipantLeave: function (from) {\r\n    delete this.members[from];\r\n    return true;\r\n  },\r\n\r\n  onPresenceUnavailable: function (pres) {\r\n    //console.log('onPresenceUnavailable', $(pres));\r\n\r\n    var from = pres.getAttribute('from');\r\n    if (!this.roomJid) return true;\r\n\r\n    this.onParticipantLeave(from);\r\n    return true;\r\n  },\r\n\r\n  onMessage: function (msg) {\r\n    if(window.clientType == 'electron-client'){\r\n      return ;\r\n    }\r\n    // console.warn('onMessage', $(msg))\r\n    var that = this;\r\n    var from = msg.getAttribute('from');\r\n    var type = msg.getAttribute('type');\r\n    var farparty = Strophe.getResourceFromJid(from);\r\n\r\n    if (type == \"chat\" && type != \"error\") {\r\n      $(msg).find('remotecontrol').each(function () {\r\n        var action = $(this).attr('action');\r\n        var requestor = Strophe.getResourceFromJid(from);\r\n\r\n        console.log(\"remote control message\", action, requestor);\r\n\r\n        if (action == \"request\")\t// requested\r\n        {\r\n          var msg2 = $msg({to: from, type: 'chat'});\r\n\r\n          if (!isUsingScreenStream || remoteControlled) {\r\n            msg2.c('remotecontrol', {\r\n              xmlns: 'http://igniterealtime.org/protocol/remotecontrol',\r\n              action: 'rejected'\r\n            }).up();\r\n            that.connection.send(msg2);\r\n\r\n          } else {\r\n\r\n            $.prompt(requestor + ' would like to control your desktop?',\r\n              {\r\n                title: \"Desktop Remote Control\",\r\n                persistent: false,\r\n                buttons: {\"Permit\": true, \"Deny\": false},\r\n                defaultButton: 1,\r\n                loaded: function (event) {\r\n                },\r\n                submit: function (e, v, m, f) {\r\n                  if (v) {\r\n                    msg2.c('remotecontrol', {\r\n                      xmlns: 'http://igniterealtime.org/protocol/remotecontrol',\r\n                      action: 'accepted'\r\n                    }).up();\r\n\r\n                    remoteControlled = true;\r\n                    remoteController = requestor;\r\n\r\n                    window.postMessage({type: 'ofmeetSetRequestorOn', id: requestor}, '*');\r\n\r\n                  } else {\r\n                    msg2.c('remotecontrol', {\r\n                      xmlns: 'http://igniterealtime.org/protocol/remotecontrol',\r\n                      action: 'rejected'\r\n                    }).up();\r\n                  }\r\n\r\n                  that.connection.send(msg2);\r\n                }\r\n              });\r\n          }\r\n        }\r\n        else if (action == \"terminate\")\t// requested\r\n        {\r\n          remoteControlled = false;\r\n          remoteController = null;\r\n\r\n          window.postMessage({type: 'ofmeetSetRequestorOff'}, '*');\r\n        }\r\n\r\n        else if (action == \"rejected\")\t\t// requestor\r\n        {\r\n          $.prompt(\"Your request was rejected\",\r\n            {\r\n              title: \"Desktop Remote Control\",\r\n              persistent: false\r\n            }\r\n          );\r\n        }\r\n        else if (action == \"accepted\")\t\t// requestor\r\n        {\r\n          isRemoteControl = true;\r\n          // Toolbar.changeRemoteControlButtonState(true);\r\n\r\n          $.prompt(\"You now have remote desktop control of \" + requestor,\r\n            {\r\n              title: \"Desktop Remote Control\",\r\n              persistent: false\r\n            }\r\n          );\r\n        }\r\n        else if (action == \"terminated\")\t\t// requestor\r\n        {\r\n          isRemoteControl = false;\r\n          // Toolbar.changeRemoteControlButtonState(false);\r\n        }\r\n\r\n        return;\r\n      });\r\n\r\n      $(msg).find('body').each(function () {\r\n        var body = $('<div/>').text($(this).text()).html();\r\n\r\n        // console.log('onMessage chat', body, from)\r\n\r\n        if (body.indexOf('https://') == 0 && body.indexOf('/ofmeet/?b=') > 0) {\r\n          $(document).trigger(\"ofmuc.meeting.invite\", [body, Strophe.getBareJidFromJid(from)]);\r\n        }\r\n\r\n      });\r\n\r\n      return true;\r\n    }\r\n\r\n    if (!farparty) farparty = Strophe.getResourceFromJid(from);\r\n    if (!that.roomJid) that.roomJid = Strophe.getBareJidFromJid(from);\r\n\r\n    $(msg).find('appshare').each(function () {\r\n      var action = $(this).attr('action');\r\n      var url = $(this).attr('url');\r\n\r\n      if (Strophe.getResourceFromJid(from) != Strophe.getResourceFromJid(that.connection.jid)) {\r\n        that.handleAppShare(action, url, farparty);\r\n      }\r\n    });\r\n\r\n    $(msg).find('pdfshare').each(function () {\r\n      var action = $(this).attr('action');\r\n      var url = $(this).attr('url');\r\n\r\n      if (Strophe.getResourceFromJid(from) != Strophe.getResourceFromJid(that.connection.jid)) {\r\n        that.handlePdfShare(action, url, farparty);\r\n      }\r\n    });\r\n\r\n    $(msg).find('linkshare').each(function () {\r\n      var action = $(this).attr('action');\r\n      var url = $(this).attr('url');\r\n\r\n      if (Strophe.getResourceFromJid(from) != Strophe.getResourceFromJid(that.connection.jid)) {\r\n        that.handleLinkShare(action, url, farparty);\r\n      }\r\n    });\r\n\r\n    $(msg).find('avatarshare').each(function () {\r\n      that.members[from].avatar = $(this).text();\r\n      Avatar.setUserAvatar(from);\r\n    });\r\n\r\n    return true;\r\n  },\r\n\r\n  appSave: function (callback) {\r\n    console.log(\"ofmuc.appSave\");\r\n\r\n    var canSave = false;\r\n\r\n    try {\r\n      canSave = this.appFrame && this.appFrame.contentWindow.ManisMeetings && this.appFrame.contentWindow.ManisMeetings.getContent;\r\n    } catch (e) {\r\n      if (callback) callback()\r\n    }\r\n\r\n    if (canSave) {\r\n      var content = this.appFrame.contentWindow.ManisMeetings.getContent();\r\n\r\n      if (content != null) {\r\n        var compressed = LZString.compressToBase64(content);\r\n\r\n        //console.log(\"ofmuc.appSave\", this.shareApp, content, compressed);\r\n\r\n        var ns = this.shareApp + \"/\" + this.roomJid;\r\n        var iq = $iq({to: manisConfg.messageServer, type: 'set'});\r\n        iq.c('query', {xmlns: \"jabber:iq:private\"}).c('ofmeet-application', {xmlns: ns}).t(compressed);\r\n\r\n        this.connection.sendIQ(iq,\r\n\r\n          function (resp) {\r\n            if (callback) callback()\r\n          },\r\n\r\n          function (err) {\r\n            var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n            if (lang == 'en') {\r\n              var promptContent = 'Application save...';\r\n            }else {\r\n              var promptContent = '数据保存中...';\r\n            }\r\n            $.prompt(promptContent, {title: err, persistent: false});\r\n          }\r\n        );\r\n\r\n      } else if (callback) callback();\r\n\r\n    } else if (callback) callback()\r\n  },\r\n\r\n  appPrint: function () {\r\n    //console.log(\"ofmuc.appPrint\");\r\n\r\n    var canPrint = false;\r\n\r\n    try {\r\n      canPrint = this.appFrame && this.appFrame.contentWindow.ManisMeetings && this.appFrame.contentWindow.ManisMeetings.getPrintContent;\r\n    } catch (e) {\r\n    }\r\n\r\n    if (canPrint) {\r\n      var content = this.appFrame.contentWindow.ManisMeetings.getPrintContent();\r\n      var printWin = window.open();\r\n      printWin.document.write(content);\r\n      printWin.print();\r\n      printWin.close();\r\n    }\r\n  },\r\n\r\n  appEnableCursor: function (flag) {\r\n    //console.log(\"ofmuc.appEnableCursor\", flag)\r\n    this.enableCursor = flag;\r\n  },\r\n\r\n  appReady: function () {\r\n    //console.log(\"ofmuc.appReady\")\r\n\r\n    if (this.appRunning) return;\r\n\r\n    $.prompt.close();\r\n\r\n    this.setPresentationVisible(true);\r\n    // VideoLayout.resizeLargeVideoContainer();\r\n    // VideoLayout.positionLarge();\r\n    // VideoLayout.resizeThumbnails();\r\n    // this.resize();\r\n\r\n    // request for initial content\r\n\r\n    if (this.shareApp)     // owner, get from server\r\n    {\r\n      var that = this;\r\n      var ns = this.shareApp + \"/\" + this.roomJid;\r\n      var iq = $iq({to: manisConfg.messageServer, type: 'get'});\r\n      iq.c('query', {xmlns: \"jabber:iq:private\"}).c('ofmeet-application', {xmlns: ns});\r\n\r\n      this.connection.sendIQ(iq,\r\n\r\n        function (resp) {\r\n          var response = \"\";\r\n\r\n          $(resp).find('ofmeet-application').each(function () {\r\n            try {\r\n              if (that.appFrame && that.appFrame.contentWindow.ManisMeetings && that.appFrame.contentWindow.ManisMeetings.setContent) {\r\n                var content = LZString.decompressFromBase64($(this).text());\r\n                //console.log(\"ofmuc.appReady\", that.shareApp, content);\r\n                that.appFrame.contentWindow.ManisMeetings.setContent(content);\r\n              }\r\n            } catch (e) {\r\n            }\r\n          });\r\n        },\r\n\r\n        function (err) {\r\n            var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n            if (lang == 'en') {\r\n              var promptContent = 'Application data retrieve...';\r\n            }else {\r\n              var promptContent = '数据恢复中...';\r\n            }\r\n          $.prompt(promptContent, {title: err, persistent: false});\r\n        }\r\n      );\r\n\r\n      this.appShare(\"create\", this.shareApp);\r\n\r\n    } else { \t\t// request from peers\r\n      var msg = $msg({to: this.roomJid, type: 'groupchat'});\r\n      msg.c('appshare', {\r\n        xmlns: 'http://igniterealtime.org/protocol/appshare',\r\n        action: 'message',\r\n        url: '{\"type\": \"joined\"}'\r\n      }).up();\r\n      this.connection.send(msg);\r\n    }\r\n\r\n    this.appRunning = true;\r\n    if (this.appFrame) this.appFrame.contentWindow.postMessage({\r\n      type: 'ofmeetEnableCursor',\r\n      flag: this.enableCursor\r\n    }, '*');\r\n\r\n    if (this.appFrame) {\r\n      this.appFrame.contentWindow.__isadmin = ManisFunctions.isAdmin();\r\n      if (!ManisFunctions.isAdmin()) {\r\n        this.appFrame.contentWindow.DisableInput();\r\n      }\r\n    }\r\n  },\r\n\r\n  appShare: function (action, url) {\r\n    this.roomJid = window.parent.connection.emuc.roomjid;\r\n    // console.log(\"ofmuc.appShare\", url, action, this.roomJid);\r\n    var msg = $msg({to: this.roomJid, type: 'groupchat'});\r\n    msg.c('appshare', {xmlns: 'http://igniterealtime.org/protocol/appshare', action: action, url: url}).up();\r\n    console.log('xxxxxxxxxxxxx', msg.tree());\r\n    this.connection.send(msg);\r\n  },\r\n\r\n  appStart: function (url, owner, callback) {\r\n    __isshow = false;\r\n    //console.log(\"ofmuc.appStart\", url, owner);\r\n    if (!this.roomJid) {\r\n      this.roomJid = window.parent.connection.emuc.roomjid;\r\n    }\r\n\r\n    this.enableCursor = true;\r\n    // Toolbar.changeShareAppsButtonState(true);\r\n\r\n    $('#presentation').html('<iframe id=\"appViewer\" src=\"' + url + \"?room=\" + roomName + \"&user=\" + self.nickname + '\"></iframe>');\r\n    this.appFrame = document.getElementById(\"appViewer\");\r\n    $('.media-container').addClass('hidden');\r\n    $('.whiteboard-container').removeClass('hidden');\r\n    $(document).trigger('resizeWhiteboardContainer');\r\n    var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n    if(lang == 'en'){\r\n      var promptTitle = 'Application Loader';\r\n      var promptContent = 'Please wait....';\r\n    }else {\r\n        var promptTitle = '初始化应用';\r\n        var promptContent = '请稍后....';\r\n    }\r\n    $.prompt(promptContent,\r\n      {\r\n        title: promptTitle,\r\n        persistent: false\r\n      }\r\n    );\r\n    if(callback){\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.share_app_completed,\r\n        errorCode: ErrorCode.no_error,\r\n        response: true\r\n      })\r\n    }\r\n    var _this = this;\r\n    $(document).bind('app.share.endpoint.left', function (event, from) {\r\n      if (from == _this.appStartFrom) {\r\n        _this.appStop();\r\n      }\r\n    });\r\n  },\r\n\r\n  appStop: function (url) {\r\n    //console.log(\"ofmuc.appStop\", url);\r\n    __isshow = true;\r\n    this.setPresentationVisible(false);\r\n    // Toolbar.changeShareAppsButtonState(false);\r\n\r\n    if (this.appFrame) {\r\n      this.appFrame.contentWindow.location.href = \"about:blank\";\r\n      this.appFrame = null;\r\n      this.appRunning = false;\r\n\r\n      $('#presentation').html('');\r\n      $('.whiteboard-container').addClass('hidden');\r\n      $('.media-container').removeClass('hidden');\r\n    }\r\n  },\r\n\r\n  appMessage: function (msg) {\r\n\r\n    //console.log(\"ofmuc.appMessage\", msg);\r\n\r\n    if (this.appFrame) {\r\n      this.appShare(\"message\", JSON.stringify(msg));\r\n    }\r\n  },\r\n\r\n  handleAppShare: function (action, url, from) {\r\n    // console.log(\"ofmuc.handleAppShare\", url, action, from);\r\n\r\n    if (this.shareApp == null) {\r\n      if (this.appFrame == null) {\r\n        if (action == \"create\") this.appStart(url, false);\r\n        // 记录当前分享屏幕的人的endpoint,以备此人异常退出时,关闭共享白板.\r\n        this.appStartFrom = from;\r\n      } else {\r\n\r\n        if (action == \"destroy\") this.appStop(url);\r\n      }\r\n    }\r\n\r\n    if (this.appFrame && this.appFrame.contentWindow) {\r\n      if (this.enableCursor) this.appFrame.contentWindow.postMessage({\r\n        type: 'ofmeetSetMessage',\r\n        json: url,\r\n        from: from\r\n      }, '*');\r\n\r\n      try {\r\n        if (this.appFrame.contentWindow.ManisMeetings && this.appFrame.contentWindow.ManisMeetings.handleAppMessage && action == \"message\") {\r\n          this.appFrame.contentWindow.ManisMeetings.handleAppMessage(url, from);\r\n        }\r\n      } catch (e) {\r\n      }\r\n    }\r\n  },\r\n\r\n  openAppsDialog: function (auto, shareDir, callback) {\r\n    //console.log(\"ofmuc.openAppsDialog\");\r\n    var that = this;\r\n    var canPrint = false;\r\n    var canSave = false;\r\n    try {\r\n      canPrint = this.appFrame && this.appFrame.contentWindow.ManisMeetings && this.appFrame.contentWindow.ManisMeetings.getPrintContent;\r\n      canSave = this.appFrame && this.appFrame.contentWindow.ManisMeetings && this.appFrame.contentWindow.ManisMeetings.setContent;\r\n    } catch (e) {\r\n    }\r\n\r\n    var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n    if (lang == 'en') {\r\n      var removeButtons = {\"Close\": 1};\r\n      var printButtons = {\"Confirm\": 1};\r\n    } else {\r\n      var removeButtons = {\"关闭\": 1};\r\n      var printButtons = {\"确定\": 1};\r\n    }\r\n\r\n    if (canPrint) {\r\n      if (lang == 'en') {\r\n        removeButtons[\"Print\"] = 2;\r\n        printButtons[\"Print\"] = 2;\r\n      } else {\r\n        removeButtons[\"打印\"] = 2;\r\n        printButtons[\"打印\"] = 2;\r\n      }\r\n    }\r\n\r\n    if (canSave) {\r\n      if (lang == 'en') {\r\n        removeButtons[\"Save\"] = 3;\r\n      } else {\r\n        removeButtons[\"保存\"] = 3;\r\n      }\r\n    }\r\n\r\n    if (auto) {\r\n      if (this.shareApp) {\r\n        that.appSave(function () {\r\n          that.appShare(\"destroy\", that.shareApp);\r\n          that.appStop(that.shareApp);\r\n          that.shareApp = null;\r\n        });\r\n      }\r\n    } else if (this.shareApp) {\r\n      if (this.isPresentationVisible() == false) {\r\n        this.setPresentationVisible(true);\r\n\r\n      } else {\r\n\r\n        if(lang == 'en'){\r\n          var noticeStr = 'Do you want to close the Shared application ';\r\n          var noticeTitle = 'Stop whiteboard share ';\r\n        }else {\r\n          var noticeStr = '您是否想要关闭共享的应用程序';\r\n          var noticeTitle = '关闭应用程序共享';\r\n        }\r\n\r\n        $.prompt(noticeStr,\r\n          {\r\n            title: noticeTitle,\r\n            buttons: removeButtons,\r\n            defaultButton: 1,\r\n            submit: function (e, v, m, f) {\r\n              if (v == 1) {\r\n                // that.appSave(function () {\r\n                //   that.appShare(\"destroy\", that.shareApp);\r\n                //   that.appStop(that.shareApp);\r\n                //   that.shareApp = null;\r\n                //   whiteboardStart = false;\r\n                // });\r\n                that.appDestory(callback);\r\n              }\r\n              else if (v == 3) {\r\n                that.appSave();\r\n              }\r\n              else if (v == 2) {\r\n                that.appPrint();\r\n              }\r\n            }\r\n          });\r\n      }\r\n    }\r\n    else if (this.appFrame != null) {\r\n\r\n      if (this.isPresentationVisible() == false) {\r\n        this.setPresentationVisible(true);\r\n\r\n      } else {\r\n        var lang = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n        if (lang == 'en') {\r\n          var promptTitle = 'Application share';\r\n          var promptContent = 'Application share busy, someone using at this moment';\r\n        }else {\r\n            var promptTitle = '分享应用程序';\r\n            var promptContent = '其他成员正在共享应用程序或文档. 在同一时刻此会议仅允许一个共享的应用程序';\r\n        }\r\n        $.prompt(promptContent,\r\n          {\r\n            f: promptTitle,\r\n            buttons: printButtons,\r\n            defaultButton: 0,\r\n            submit: function (e, v, m, f) {\r\n              if (v == 1) {\r\n                //$.prompt.close();\r\n              }\r\n              else if (v == 2) {\r\n                that.appPrint();\r\n              }\r\n            }\r\n          });\r\n      }\r\n    }\r\n    else {\r\n      that.shareApp = shareDir ? shareDir : 'apps/drawing';\r\n      that.appStart(that.shareApp, true, callback);\r\n      whiteboardStart = true;\r\n    }\r\n  },\r\n\r\n  appDestory: function (callback) {\r\n    var that = this;\r\n    if(that.shareApp || whiteboardStart){\r\n      that.appSave(function () {\r\n        that.appShare(\"destroy\", that.shareApp);\r\n        that.appStop(that.shareApp);\r\n        that.shareApp = null;\r\n        whiteboardStart = false;\r\n      });\r\n      if(callback){\r\n        callback({\r\n          code: ManisResponse.code_200,\r\n            errorCode: ErrorCode.no_error,\r\n          msg: ManisResponse.share_app_completed,\r\n          response: false\r\n        })\r\n      }\r\n    }\r\n  },\r\n\r\n  setPresentationVisible: function (visible) {\r\n    /*   if (!visible) {\r\n     $(\"#remoteVideos\").toggleClass(\"hidden\", config.layout === LAYOUT_SURROUND);\r\n     } else {\r\n     $(\"#remoteVideos\").toggleClass(\"hidden\", visible);\r\n     }\r\n     $(\"#splitscrean\").attr(\"disabled\", visible);*/\r\n    if (visible) {\r\n      // Trigger the video.selected event to indicate a change in the\r\n      // large video.\r\n      // $(document).trigger(\"video.selected\", [true]);\r\n\r\n      $('#largeVideo').fadeOut(300, function () {\r\n        // VideoLayout.setLargeVideoVisible(false);\r\n        $('#presentation>iframe').fadeIn(300, function () {\r\n          $('#presentation>iframe').css({opacity: '1'});\r\n          // ToolbarToggler.dockToolbar(false);\r\n        });\r\n      });\r\n    }\r\n    else {\r\n      if ($('#presentation>iframe').css('opacity') == '1') {\r\n        $('#presentation>iframe').fadeOut(300, function () {\r\n          $('#presentation>iframe').css({opacity: '0'});\r\n          // $('#reloadPresentation').css({display: 'none'});\r\n        });\r\n      }\r\n      // $('#largeVideo').fadeIn(300, function () {\r\n      //   VideoLayout.setLargeVideoVisible(true);\r\n      //   ToolbarToggler.dockToolbar(true);\r\n      // });\r\n    }\r\n  },\r\n\r\n  isPresentationVisible: function () {\r\n    return ($('#presentation>iframe') != null && $('#presentation>iframe').css('opacity') == 1);\r\n  },\r\n\r\n  validURL: function (url) {\r\n    var p = /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[\\+~%\\/.\\w-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w]*))?)/;\r\n    return url.match(p);\r\n  },\r\n\r\n  iframeURL: function (url) {\r\n    return url.indexOf(\"<iframe src=\") > -1;\r\n  },\r\n});\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/strophe/plugins/strophe.ofmuc.js\n// module id = 54\n// module chunks = 0","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\r\n// This work is free. You can redistribute it and/or modify it\r\n// under the terms of the WTFPL, Version 2\r\n// For more information see LICENSE.txt or http://www.wtfpl.net/\r\n//\r\n// For more information, the home page:\r\n// http://pieroxy.net/blog/pages/lz-string/testing.html\r\n//\r\n// LZ-based compression algorithm, version 1.3.7\r\nvar LZString = {\r\n\r\n\r\n  // private property\r\n  _keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n  _f: String.fromCharCode,\r\n\r\n  compressToBase64: function (input) {\r\n    if (input == null) return \"\";\r\n    var output = \"\";\r\n    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n    var i = 0;\r\n\r\n    input = LZString.compress(input);\r\n\r\n    while (i < input.length * 2) {\r\n\r\n      if (i % 2 == 0) {\r\n        chr1 = input.charCodeAt(i / 2) >> 8;\r\n        chr2 = input.charCodeAt(i / 2) & 255;\r\n        if (i / 2 + 1 < input.length)\r\n          chr3 = input.charCodeAt(i / 2 + 1) >> 8;\r\n        else\r\n          chr3 = NaN;\r\n      } else {\r\n        chr1 = input.charCodeAt((i - 1) / 2) & 255;\r\n        if ((i + 1) / 2 < input.length) {\r\n          chr2 = input.charCodeAt((i + 1) / 2) >> 8;\r\n          chr3 = input.charCodeAt((i + 1) / 2) & 255;\r\n        } else\r\n          chr2 = chr3 = NaN;\r\n      }\r\n      i += 3;\r\n\r\n      enc1 = chr1 >> 2;\r\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n      enc4 = chr3 & 63;\r\n\r\n      if (isNaN(chr2)) {\r\n        enc3 = enc4 = 64;\r\n      } else if (isNaN(chr3)) {\r\n        enc4 = 64;\r\n      }\r\n\r\n      output = output +\r\n        LZString._keyStr[enc1] + LZString._keyStr[enc2] +\r\n        LZString._keyStr[enc3] + LZString._keyStr[enc4];\r\n\r\n    }\r\n\r\n    return output;\r\n  },\r\n\r\n  decompressFromBase64: function (input) {\r\n    if (input == null) return \"\";\r\n    var output = \"\",\r\n      ol = 0,\r\n      output_,\r\n      chr1, chr2, chr3,\r\n      enc1, enc2, enc3, enc4,\r\n      i = 0, f = LZString._f;\r\n\r\n    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\r\n    while (i < input.length) {\r\n\r\n      enc1 = LZString._keyStr.indexOf(input[i++]);\r\n      enc2 = LZString._keyStr.indexOf(input[i++]);\r\n      enc3 = LZString._keyStr.indexOf(input[i++]);\r\n      enc4 = LZString._keyStr.indexOf(input[i++]);\r\n\r\n      chr1 = (enc1 << 2) | (enc2 >> 4);\r\n      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n      chr3 = ((enc3 & 3) << 6) | enc4;\r\n\r\n      if (ol % 2 == 0) {\r\n        output_ = chr1 << 8;\r\n\r\n        if (enc3 != 64) {\r\n          output += f(output_ | chr2);\r\n        }\r\n        if (enc4 != 64) {\r\n          output_ = chr3 << 8;\r\n        }\r\n      } else {\r\n        output = output + f(output_ | chr1);\r\n\r\n        if (enc3 != 64) {\r\n          output_ = chr2 << 8;\r\n        }\r\n        if (enc4 != 64) {\r\n          output += f(output_ | chr3);\r\n        }\r\n      }\r\n      ol += 3;\r\n    }\r\n\r\n    return LZString.decompress(output);\r\n\r\n  },\r\n\r\n  compressToUTF16: function (input) {\r\n    if (input == null) return \"\";\r\n    var output = \"\",\r\n      i, c,\r\n      current,\r\n      status = 0,\r\n      f = LZString._f;\r\n\r\n    input = LZString.compress(input);\r\n\r\n    for (i = 0; i < input.length; i++) {\r\n      c = input.charCodeAt(i);\r\n      switch (status) {\r\n        case 0:\r\n          output += f((c >> 1) + 32);\r\n          current = (c & 1) << 14;\r\n          status++;\r\n          break;\r\n\r\n        case 14:\r\n          output += f((current + (c >> 15)) + 32, (c & 32767) + 32);\r\n          status = 0;\r\n          break;\r\n\r\n        default:\r\n          output += f((current + (c >> (status + 1))) + 32);\r\n          current = (c & ((2 << status) - 1)) << (14 - status);\r\n          status++;\r\n          break;\r\n      }\r\n    }\r\n\r\n    return output + f(current + 32);\r\n  },\r\n\r\n\r\n  decompressFromUTF16: function (input) {\r\n    if (input == null) return \"\";\r\n    var output = \"\",\r\n      current, c,\r\n      status = 0,\r\n      i = 0,\r\n      f = LZString._f;\r\n\r\n    while (i < input.length) {\r\n      c = input.charCodeAt(i) - 32;\r\n\r\n      switch (status++) {\r\n        case 0:\r\n          current = c << 1;\r\n          break;\r\n        case 1:\r\n          output += f(current | (c >> 14));\r\n          current = (c & 16383) << 2;\r\n          break;\r\n        case 2:\r\n          output += f(current | (c >> 13));\r\n          current = (c & 8191) << 3;\r\n          break;\r\n        case 3:\r\n          output += f(current | (c >> 12));\r\n          current = (c & 4095) << 4;\r\n          break;\r\n        case 4:\r\n          output += f(current | (c >> 11));\r\n          current = (c & 2047) << 5;\r\n          break;\r\n        case 5:\r\n          output += f(current | (c >> 10));\r\n          current = (c & 1023) << 6;\r\n          break;\r\n        case 6:\r\n          output += f(current | (c >> 9));\r\n          current = (c & 511) << 7;\r\n          break;\r\n        case 7:\r\n          output += f(current | (c >> 8));\r\n          current = (c & 255) << 8;\r\n          break;\r\n        case 8:\r\n          output += f(current | (c >> 7));\r\n          current = (c & 127) << 9;\r\n          break;\r\n        case 9:\r\n          output += f(current | (c >> 6));\r\n          current = (c & 63) << 10;\r\n          break;\r\n        case 10:\r\n          output += f(current | (c >> 5));\r\n          current = (c & 31) << 11;\r\n          break;\r\n        case 11:\r\n          output += f(current | (c >> 4));\r\n          current = (c & 15) << 12;\r\n          break;\r\n        case 12:\r\n          output += f(current | (c >> 3));\r\n          current = (c & 7) << 13;\r\n          break;\r\n        case 13:\r\n          output += f(current | (c >> 2));\r\n          current = (c & 3) << 14;\r\n          break;\r\n        case 14:\r\n          output += f(current | (c >> 1));\r\n          current = (c & 1) << 15;\r\n          break;\r\n        case 15:\r\n          output += f(current | c);\r\n          status = 0;\r\n          break;\r\n      }\r\n\r\n\r\n      i++;\r\n    }\r\n\r\n    return LZString.decompress(output);\r\n    //return output;\r\n\r\n  },\r\n\r\n\r\n  //compress into uint8array (UCS-2 big endian format)\r\n  compressToUint8Array: function (uncompressed) {\r\n\r\n    var compressed = LZString.compress(uncompressed);\r\n    var buf = new Uint8Array(compressed.length * 2); // 2 bytes per character\r\n\r\n    for (var i = 0, TotalLen = compressed.length; i < TotalLen; i++) {\r\n      var current_value = compressed.charCodeAt(i);\r\n      buf[i * 2] = current_value >>> 8;\r\n      buf[i * 2 + 1] = current_value % 256;\r\n    }\r\n    return buf;\r\n\r\n  },\r\n\r\n  //decompress from uint8array (UCS-2 big endian format)\r\n  decompressFromUint8Array: function (compressed) {\r\n\r\n    if (compressed === null || compressed === undefined) {\r\n      return LZString.decompress(compressed);\r\n    } else {\r\n\r\n      var buf = new Array(compressed.length / 2); // 2 bytes per character\r\n\r\n      for (var i = 0, TotalLen = buf.length; i < TotalLen; i++) {\r\n        buf[i] = compressed[i * 2] * 256 + compressed[i * 2 + 1];\r\n      }\r\n\r\n      return LZString.decompress(String.fromCharCode.apply(null, buf));\r\n\r\n    }\r\n\r\n  },\r\n\r\n  //compress into a string that is already URI encoded\r\n  compressToEncodedURIComponent: function (uncompressed) {\r\n    return LZString.compressToBase64(uncompressed).replace(/=/g, \"$\").replace(/\\//g, \"-\");\r\n  },\r\n\r\n  //decompress from an output of compressToEncodedURIComponent\r\n  decompressFromEncodedURIComponent: function (compressed) {\r\n    if (compressed) compressed = compressed.replace(/$/g, \"=\").replace(/-/g, \"/\");\r\n    return LZString.decompressFromBase64(compressed);\r\n  },\r\n\r\n\r\n  compress: function (uncompressed) {\r\n    if (uncompressed == null) return \"\";\r\n    var i, value,\r\n      context_dictionary = {},\r\n      context_dictionaryToCreate = {},\r\n      context_c = \"\",\r\n      context_wc = \"\",\r\n      context_w = \"\",\r\n      context_enlargeIn = 2, // Compensate for the first entry which should not count\r\n      context_dictSize = 3,\r\n      context_numBits = 2,\r\n      context_data_string = \"\",\r\n      context_data_val = 0,\r\n      context_data_position = 0,\r\n      ii,\r\n      f = LZString._f;\r\n\r\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\r\n      context_c = uncompressed[ii];\r\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary, context_c)) {\r\n        context_dictionary[context_c] = context_dictSize++;\r\n        context_dictionaryToCreate[context_c] = true;\r\n      }\r\n\r\n      context_wc = context_w + context_c;\r\n      if (Object.prototype.hasOwnProperty.call(context_dictionary, context_wc)) {\r\n        context_w = context_wc;\r\n      } else {\r\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {\r\n          if (context_w.charCodeAt(0) < 256) {\r\n            for (i = 0; i < context_numBits; i++) {\r\n              context_data_val = (context_data_val << 1);\r\n              if (context_data_position == 15) {\r\n                context_data_position = 0;\r\n                context_data_string += f(context_data_val);\r\n                context_data_val = 0;\r\n              } else {\r\n                context_data_position++;\r\n              }\r\n            }\r\n            value = context_w.charCodeAt(0);\r\n            for (i = 0; i < 8; i++) {\r\n              context_data_val = (context_data_val << 1) | (value & 1);\r\n              if (context_data_position == 15) {\r\n                context_data_position = 0;\r\n                context_data_string += f(context_data_val);\r\n                context_data_val = 0;\r\n              } else {\r\n                context_data_position++;\r\n              }\r\n              value = value >> 1;\r\n            }\r\n          } else {\r\n            value = 1;\r\n            for (i = 0; i < context_numBits; i++) {\r\n              context_data_val = (context_data_val << 1) | value;\r\n              if (context_data_position == 15) {\r\n                context_data_position = 0;\r\n                context_data_string += f(context_data_val);\r\n                context_data_val = 0;\r\n              } else {\r\n                context_data_position++;\r\n              }\r\n              value = 0;\r\n            }\r\n            value = context_w.charCodeAt(0);\r\n            for (i = 0; i < 16; i++) {\r\n              context_data_val = (context_data_val << 1) | (value & 1);\r\n              if (context_data_position == 15) {\r\n                context_data_position = 0;\r\n                context_data_string += f(context_data_val);\r\n                context_data_val = 0;\r\n              } else {\r\n                context_data_position++;\r\n              }\r\n              value = value >> 1;\r\n            }\r\n          }\r\n          context_enlargeIn--;\r\n          if (context_enlargeIn == 0) {\r\n            context_enlargeIn = Math.pow(2, context_numBits);\r\n            context_numBits++;\r\n          }\r\n          delete context_dictionaryToCreate[context_w];\r\n        } else {\r\n          value = context_dictionary[context_w];\r\n          for (i = 0; i < context_numBits; i++) {\r\n            context_data_val = (context_data_val << 1) | (value & 1);\r\n            if (context_data_position == 15) {\r\n              context_data_position = 0;\r\n              context_data_string += f(context_data_val);\r\n              context_data_val = 0;\r\n            } else {\r\n              context_data_position++;\r\n            }\r\n            value = value >> 1;\r\n          }\r\n\r\n\r\n        }\r\n        context_enlargeIn--;\r\n        if (context_enlargeIn == 0) {\r\n          context_enlargeIn = Math.pow(2, context_numBits);\r\n          context_numBits++;\r\n        }\r\n        // Add wc to the dictionary.\r\n        context_dictionary[context_wc] = context_dictSize++;\r\n        context_w = String(context_c);\r\n      }\r\n    }\r\n\r\n    // Output the code for w.\r\n    if (context_w !== \"\") {\r\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {\r\n        if (context_w.charCodeAt(0) < 256) {\r\n          for (i = 0; i < context_numBits; i++) {\r\n            context_data_val = (context_data_val << 1);\r\n            if (context_data_position == 15) {\r\n              context_data_position = 0;\r\n              context_data_string += f(context_data_val);\r\n              context_data_val = 0;\r\n            } else {\r\n              context_data_position++;\r\n            }\r\n          }\r\n          value = context_w.charCodeAt(0);\r\n          for (i = 0; i < 8; i++) {\r\n            context_data_val = (context_data_val << 1) | (value & 1);\r\n            if (context_data_position == 15) {\r\n              context_data_position = 0;\r\n              context_data_string += f(context_data_val);\r\n              context_data_val = 0;\r\n            } else {\r\n              context_data_position++;\r\n            }\r\n            value = value >> 1;\r\n          }\r\n        } else {\r\n          value = 1;\r\n          for (i = 0; i < context_numBits; i++) {\r\n            context_data_val = (context_data_val << 1) | value;\r\n            if (context_data_position == 15) {\r\n              context_data_position = 0;\r\n              context_data_string += f(context_data_val);\r\n              context_data_val = 0;\r\n            } else {\r\n              context_data_position++;\r\n            }\r\n            value = 0;\r\n          }\r\n          value = context_w.charCodeAt(0);\r\n          for (i = 0; i < 16; i++) {\r\n            context_data_val = (context_data_val << 1) | (value & 1);\r\n            if (context_data_position == 15) {\r\n              context_data_position = 0;\r\n              context_data_string += f(context_data_val);\r\n              context_data_val = 0;\r\n            } else {\r\n              context_data_position++;\r\n            }\r\n            value = value >> 1;\r\n          }\r\n        }\r\n        context_enlargeIn--;\r\n        if (context_enlargeIn == 0) {\r\n          context_enlargeIn = Math.pow(2, context_numBits);\r\n          context_numBits++;\r\n        }\r\n        delete context_dictionaryToCreate[context_w];\r\n      } else {\r\n        value = context_dictionary[context_w];\r\n        for (i = 0; i < context_numBits; i++) {\r\n          context_data_val = (context_data_val << 1) | (value & 1);\r\n          if (context_data_position == 15) {\r\n            context_data_position = 0;\r\n            context_data_string += f(context_data_val);\r\n            context_data_val = 0;\r\n          } else {\r\n            context_data_position++;\r\n          }\r\n          value = value >> 1;\r\n        }\r\n\r\n\r\n      }\r\n      context_enlargeIn--;\r\n      if (context_enlargeIn == 0) {\r\n        context_enlargeIn = Math.pow(2, context_numBits);\r\n        context_numBits++;\r\n      }\r\n    }\r\n\r\n    // Mark the end of the stream\r\n    value = 2;\r\n    for (i = 0; i < context_numBits; i++) {\r\n      context_data_val = (context_data_val << 1) | (value & 1);\r\n      if (context_data_position == 15) {\r\n        context_data_position = 0;\r\n        context_data_string += f(context_data_val);\r\n        context_data_val = 0;\r\n      } else {\r\n        context_data_position++;\r\n      }\r\n      value = value >> 1;\r\n    }\r\n\r\n    // Flush the last char\r\n    while (true) {\r\n      context_data_val = (context_data_val << 1);\r\n      if (context_data_position == 15) {\r\n        context_data_string += f(context_data_val);\r\n        break;\r\n      }\r\n      else context_data_position++;\r\n    }\r\n    return context_data_string;\r\n  },\r\n\r\n  decompress: function (compressed) {\r\n    if (compressed == null) return \"\";\r\n    if (compressed == \"\") return null;\r\n    var dictionary = [],\r\n      next,\r\n      enlargeIn = 4,\r\n      dictSize = 4,\r\n      numBits = 3,\r\n      entry = \"\",\r\n      result = \"\",\r\n      i,\r\n      w,\r\n      bits, resb, maxpower, power,\r\n      c,\r\n      f = LZString._f,\r\n      data = {string: compressed, val: compressed.charCodeAt(0), position: 32768, index: 1};\r\n\r\n    for (i = 0; i < 3; i += 1) {\r\n      dictionary[i] = i;\r\n    }\r\n\r\n    bits = 0;\r\n    maxpower = Math.pow(2, 2);\r\n    power = 1;\r\n    while (power != maxpower) {\r\n      resb = data.val & data.position;\r\n      data.position >>= 1;\r\n      if (data.position == 0) {\r\n        data.position = 32768;\r\n        data.val = data.string.charCodeAt(data.index++);\r\n      }\r\n      bits |= (resb > 0 ? 1 : 0) * power;\r\n      power <<= 1;\r\n    }\r\n\r\n    switch (next = bits) {\r\n      case 0:\r\n        bits = 0;\r\n        maxpower = Math.pow(2, 8);\r\n        power = 1;\r\n        while (power != maxpower) {\r\n          resb = data.val & data.position;\r\n          data.position >>= 1;\r\n          if (data.position == 0) {\r\n            data.position = 32768;\r\n            data.val = data.string.charCodeAt(data.index++);\r\n          }\r\n          bits |= (resb > 0 ? 1 : 0) * power;\r\n          power <<= 1;\r\n        }\r\n        c = f(bits);\r\n        break;\r\n      case 1:\r\n        bits = 0;\r\n        maxpower = Math.pow(2, 16);\r\n        power = 1;\r\n        while (power != maxpower) {\r\n          resb = data.val & data.position;\r\n          data.position >>= 1;\r\n          if (data.position == 0) {\r\n            data.position = 32768;\r\n            data.val = data.string.charCodeAt(data.index++);\r\n          }\r\n          bits |= (resb > 0 ? 1 : 0) * power;\r\n          power <<= 1;\r\n        }\r\n        c = f(bits);\r\n        break;\r\n      case 2:\r\n        return \"\";\r\n    }\r\n    dictionary[3] = c;\r\n    w = result = c;\r\n    while (true) {\r\n      if (data.index > data.string.length) {\r\n        return \"\";\r\n      }\r\n\r\n      bits = 0;\r\n      maxpower = Math.pow(2, numBits);\r\n      power = 1;\r\n      while (power != maxpower) {\r\n        resb = data.val & data.position;\r\n        data.position >>= 1;\r\n        if (data.position == 0) {\r\n          data.position = 32768;\r\n          data.val = data.string.charCodeAt(data.index++);\r\n        }\r\n        bits |= (resb > 0 ? 1 : 0) * power;\r\n        power <<= 1;\r\n      }\r\n\r\n      switch (c = bits) {\r\n        case 0:\r\n          bits = 0;\r\n          maxpower = Math.pow(2, 8);\r\n          power = 1;\r\n          while (power != maxpower) {\r\n            resb = data.val & data.position;\r\n            data.position >>= 1;\r\n            if (data.position == 0) {\r\n              data.position = 32768;\r\n              data.val = data.string.charCodeAt(data.index++);\r\n            }\r\n            bits |= (resb > 0 ? 1 : 0) * power;\r\n            power <<= 1;\r\n          }\r\n\r\n          dictionary[dictSize++] = f(bits);\r\n          c = dictSize - 1;\r\n          enlargeIn--;\r\n          break;\r\n        case 1:\r\n          bits = 0;\r\n          maxpower = Math.pow(2, 16);\r\n          power = 1;\r\n          while (power != maxpower) {\r\n            resb = data.val & data.position;\r\n            data.position >>= 1;\r\n            if (data.position == 0) {\r\n              data.position = 32768;\r\n              data.val = data.string.charCodeAt(data.index++);\r\n            }\r\n            bits |= (resb > 0 ? 1 : 0) * power;\r\n            power <<= 1;\r\n          }\r\n          dictionary[dictSize++] = f(bits);\r\n          c = dictSize - 1;\r\n          enlargeIn--;\r\n          break;\r\n        case 2:\r\n          return result;\r\n      }\r\n\r\n      if (enlargeIn == 0) {\r\n        enlargeIn = Math.pow(2, numBits);\r\n        numBits++;\r\n      }\r\n\r\n      if (dictionary[c]) {\r\n        entry = dictionary[c];\r\n      } else {\r\n        if (c === dictSize) {\r\n          entry = w + w[0];\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n      result += entry;\r\n\r\n      // Add w+entry[0] to the dictionary.\r\n      dictionary[dictSize++] = w + entry[0];\r\n      enlargeIn--;\r\n\r\n      w = entry;\r\n\r\n      if (enlargeIn == 0) {\r\n        enlargeIn = Math.pow(2, numBits);\r\n        numBits++;\r\n      }\r\n\r\n    }\r\n  }\r\n};\r\n\r\nexports = module.exports = LZString;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/libs/lz-string.js\n// module id = 55\n// module chunks = 0","var ManisStream = require('./manis.stream');\r\nvar ManisEvents = require('./manis.events');\r\nvar crypto = require('crypto');\r\nvar ManisFunctions = require('./manis.functions');\r\nvar ManisResponse = require('../modules/manis.response');\r\nvar ErrorCode = require('../modules/errorCode');\r\nvar P2P = require('./manis.p2p');\r\n\r\nconst CHECK_RESOURCES_URL = \"/user/join\";\r\nconst JOIN_BY_ANONYMOUS_URL = \"/loginClientAnonymous\";\r\nconst JOIN_ROOM_URL = \"/user/joinConferenceClient\";\r\nconst GRANT_ADMIN = \"/user/grantAdmin\";\r\nconst FETCH_ADMIN = \"/user/getModerator\";\r\nconst CREATE_OR_JOIN_CONFERENCE = '/clientApi/createOrJoinConference';\r\nconst DELAY_ROOM_PATH = '/clientApi/conferences/extend/';\r\nconst CONFIG_RESOURCE_UPDATE = '/clientApi/conference/resources';\r\nvar ms = require('./strophe/plugins/manis.utils');\r\n\r\nconst QVGAConstraints = {width: {exact: 320}, height: {exact: 180}};\r\nconst VGAConstraints = {width: {exact: 960}, height: {exact: 540}};\r\nconst HDConstraints = {width: {exact: 1280}, height: {exact: 720}};\r\nconst FullHDConstraints = {width: {exact: 1920}, height: {exact: 1080}};\r\n\r\nconst XGAConstraints_240 = {width: {exact: 320}, height: {exact: 240}};\r\nconst XGAConstraints_480 = {width: {exact: 640}, height: {exact: 480}};\r\nconst XGAConstraints_768 = {width: {exact: 1024}, height: {exact: 768}};\r\nvar constraints =\r\n{\r\n  video: FullHDConstraints,\r\n  audio: {\r\n      // mandatory: {}, optional: [\r\n      // {googEchoCancellation: true},\r\n      // {googAutoGainControl: true},\r\n      // {googNoiseSupression: true},\r\n      // {googHighpassFilter: true},\r\n      // {googNoisesuppression2: true},\r\n      // {googEchoCancellation2: true},\r\n      // {googAutoGainControl2: true}\r\n      // ]368\r\n  }\r\n};\r\nwindow.constraints = constraints;\r\n\r\n/**\r\n * 初始化默认输入设备\r\n */\r\nfunction initDefaultInputDevices(audioInput, videoInput, audioOut) {\r\n  if (audioInput) {\r\n    window.currentAudioInputDeviceId = audioInput;\r\n  }\r\n  if (videoInput) {\r\n    window.currentVideoInputDeviceId = videoInput;\r\n  }\r\n  if (audioOut) {\r\n    window.currentAudioOutputDeviceId = audioInput;\r\n  }\r\n  navigator.mediaDevices.enumerateDevices().then(gotInputDevices).catch(handleError);\r\n}\r\n\r\n/**\r\n *\r\n * @param error\r\n */\r\nfunction handleError(error) {\r\n  console.log('navigator.getUserMedia error: ', error);\r\n}\r\n\r\n/**\r\n *\r\n * @param devicesInfo\r\n * @returns {*}\r\n */\r\nfunction gotInputDevices(devicesInfo) {\r\n  for (var i = 0; i !== devicesInfo.length; ++i) {\r\n    var deviceInfo = devicesInfo[i];\r\n    if (config.debug == true) {\r\n      console.log(deviceInfo);\r\n    }\r\n    if (deviceInfo.kind == 'videoinput' && !window.currentVideoInputDeviceId) {\r\n      window.currentVideoInputDeviceId = deviceInfo.deviceId;\r\n    } else if (deviceInfo.kind == 'audioinput' && !window.currentAudioInputDeviceId) {\r\n      window.currentAudioInputDeviceId = deviceInfo.deviceId;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nfunction generateDefaultConstraints(audioOnly) {\r\n  var constraints = {\r\n    audio: {},\r\n    video: {},\r\n  };\r\n  if (audioOnly == true) {\r\n    constraints.video = false;\r\n  } else {\r\n    if (config.resolution) {\r\n      var defaultResolution = config.resolution;\r\n      switch (defaultResolution) {\r\n        case 1080:\r\n        case '1080':\r\n          constraints.video = FullHDConstraints;\r\n          config.videoBandwidth = (config.videoBandwidth == 1024 * 2 * 2) ? config.videoBandwidth : 1024 * 2;\r\n          break;\r\n        case 720:\r\n        case '720':\r\n          constraints.video = HDConstraints;\r\n          config.videoBandwidth = (config.videoBandwidth == 512 * 2 * 2) ? config.videoBandwidth : 512 * 2;\r\n          break;\r\n        case 768:\r\n        case '768':\r\n          constraints.video = XGAConstraints_768;\r\n          config.videoBandwidth = (config.videoBandwidth == 512 * 2 * 2) ? config.videoBandwidth : 512 * 2;\r\n          break;\r\n        case 540:\r\n        case '540':\r\n          constraints.video = VGAConstraints;\r\n          config.videoBandwidth = (config.videoBandwidth == 256 * 2 * 2) ? config.videoBandwidth : 256 * 2;\r\n          break;\r\n        case 480:\r\n        case '480':\r\n          constraints.video = XGAConstraints_480;\r\n          config.videoBandwidth = (config.videoBandwidth == 256 * 2 * 2) ? config.videoBandwidth : 256 * 2;\r\n          break;\r\n        case 240:\r\n        case '240':\r\n          constraints.video = XGAConstraints_240;\r\n          config.videoBandwidth = (config.videoBandwidth == 128 * 2 * 2) ? config.videoBandwidth : 128 * 2;\r\n          break;\r\n        case 180:\r\n        case '180':\r\n          constraints.video = QVGAConstraints;\r\n          config.videoBandwidth = (config.videoBandwidth == 128 * 2 * 2) ? config.videoBandwidth : 128 * 2;\r\n          break;\r\n        default:\r\n          constraints.video = HDConstraints;\r\n          config.videoBandwidth = (config.videoBandwidth == 512 * 2 * 2) ? config.videoBandwidth : 512 * 2;\r\n      }\r\n    }\r\n    if (constraints.video && window.currentVideoInputDeviceId) {\r\n      // constraints.video.deviceId = window.currentVideoInputDeviceId;\r\n      constraints.video.deviceId = window.currentVideoInputDeviceId ? {exact: window.currentVideoInputDeviceId} : undefined;\r\n    }\r\n  }\r\n  if (window.currentAudioInputDeviceId) {\r\n    // constraints.audio.deviceId = window.currentAudioInputDeviceId;\r\n    constraints.audio.deviceId = window.currentAudioInputDeviceId ? {exact: window.currentAudioInputDeviceId} : undefined;\r\n  }\r\n  window.constraints = constraints;\r\n  return constraints;\r\n}\r\n\r\n/**\r\n * 会控创建会议室回调(optional)\r\n * @param response\r\n */\r\nfunction createRoomInCtlCallback(response) {\r\n  console.log('get create room in ctl response :', response);\r\n}\r\n\r\nfunction grantAdminCallBack(response) {\r\n  console.log('get grant admin response :', response);\r\n}\r\n\r\nfunction validRoomCallBack(response) {\r\n  console.log('valid room response :', response);\r\n}\r\n\r\nfunction fetchAdminCallBack(response) {\r\n  console.log('fetch admin response:', response);\r\n}\r\n\r\nwindow.validRoomCallBack = validRoomCallBack;\r\nwindow.fetchAdminCallBack = fetchAdminCallBack;\r\nwindow.createRoomInCtlCallback = createRoomInCtlCallback;\r\nwindow.grantAdminCallBack = grantAdminCallBack;\r\n\r\n/**\r\n * 获取会议室的focus,后续可能会修改创建规则\r\n * @return {null}\r\n */\r\nfunction getFocusComponent() {\r\n  var focusComponent = (config.hosts && config.hosts.focus) ? config.hosts.focus : null;\r\n  if (!focusComponent) {\r\n    focusComponent = 'ofmeet-focus.' + manisConfg.messageServer;\r\n  }\r\n  return focusComponent;\r\n};\r\n\r\n/**\r\n * 退出会议室iq\r\n * @returns {*}\r\n */\r\nfunction leaveConferenceRoom() {\r\n  var elem = $iq({to: roomName, type: 'set'});\r\n  elem.c('conference', {\r\n    xmlns: 'http://jitsi.org/protocol/focus',\r\n    room: roomName,\r\n    type: 'leave'\r\n  }).c('property', {\r\n    name: 'exitCode',\r\n    value: window.exitCode\r\n  });\r\n  elem.up();\r\n  // console.log('1111111111111122222222222222=======willSendLeavePresence============', elem.tree())\r\n  connection.sendIQ(elem, function (success) {\r\n    console.log('leave room complete : ', success)\r\n  }, function (error) {\r\n    console.log('leave room failed : ', error);\r\n  });\r\n};\r\n\r\n/**\r\n * 生成创建会议室的iq消息\r\n * @param connResp\r\n * @return {*}\r\n */\r\nfunction createConferenceIq(connResp, isJoin) {\r\n  var elem = $iq({to: connResp.focusJid, type: 'set', from: connection.jid});\r\n  elem.c('conference', {\r\n    xmlns: 'http://jitsi.org/protocol/focus',\r\n    room: connResp.r ? connResp.r + '@conference.' + manisConfg.messageServer : null\r\n  });\r\n  if (connResp.vb !== undefined) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'bridge', value: connResp.vb})\r\n      .up();\r\n  }\r\n  if (connResp.autoRecord !== undefined) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'autoRecord', value: connResp.autoRecord})\r\n      .up();\r\n  }\r\n  if (config.channelLastN !== undefined) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'channelLastN', value: config.channelLastN})\r\n      .up();\r\n  }\r\n  if (config.adaptiveLastN !== undefined) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'adaptiveLastN', value: config.adaptiveLastN})\r\n      .up();\r\n  }\r\n  if (config.adaptiveSimulcast !== undefined) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'adaptiveSimulcast', value: config.adaptiveSimulcast})\r\n      .up();\r\n  }\r\n  if (config.openSctp !== undefined) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'openSctp', value: config.openSctp})\r\n      .up();\r\n  }\r\n  if (config.enableFirefoxSupport !== undefined) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'enableFirefoxHacks', value: config.enableFirefoxSupport})\r\n      .up();\r\n  }\r\n  if (connection.resource !== undefined) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'endPoint', value: connection.resource})\r\n      .up();\r\n  }\r\n  if (config.nat !== undefined) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'nat', value: config.nat})\r\n      .up();\r\n  }\r\n  elem.c(\r\n    'property', {\r\n      name: 'simulcastMode',\r\n      value: 'rewriting'\r\n    }).up();\r\n  if (connResp.audioEncoding) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'audioEncoding', value: connResp.audioEncoding})\r\n      .up();\r\n  }\r\n  if (connResp.videoEncoding) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'videoEncoding', value: connResp.videoEncoding})\r\n      .up();\r\n  }\r\n  if (config.nickname) {\r\n    elem.c(\r\n      'property',\r\n      {name: 'nick', value: config.nickname})\r\n      .up();\r\n  }\r\n  elem.c(\r\n    'property', {\r\n      name: 'action',\r\n      value: isJoin ? 'join' : ''\r\n    }).up();\r\n  elem.up();\r\n  return elem;\r\n}\r\n\r\n/**\r\n * 发送iq消息创建会议室\r\n * @param connResp\r\n * @param successCallback\r\n * @param errorCallback\r\n * @param mediaStream\r\n */\r\nfunction doJoinRoom(connResp, successCallback, errorCallback, mediaStream, constraints) {\r\n  // Send create conference IQ\r\n  var that = this;\r\n  var iq = createConferenceIq(connResp, true);\r\n  console.log('generate create room iq : ', iq.tree());\r\n  connection.sendIQ(iq, function (result) {\r\n    console.info('send iq complete : ', result);\r\n    if ('true' == $(result).find('conference').attr('ready')) {\r\n      // room is ready\r\n      var focusJid = $(result).attr('from');\r\n      window.focusJid = focusJid;\r\n      doJoinAfterFocus(successCallback, errorCallback, mediaStream, constraints, connResp);\r\n    } else {\r\n      setTimeout(function () {\r\n        doJoinRoom(connResp, successCallback, errorCallback, mediaStream, constraints);\r\n      }, 1000);\r\n      return;\r\n    }\r\n\r\n  }, function (error) {\r\n    console.error('send iq failure : ', error);\r\n    setTimeout(function () {\r\n      doJoinRoom(connResp, successCallback, errorCallback, mediaStream, constraints);\r\n    }, 1000);\r\n  });\r\n}\r\n\r\n\r\n/**\r\n *\r\n * @param successCallback\r\n * @param errorCallback\r\n * @param mediaStream\r\n * @param connResp\r\n */\r\nfunction doJoinAfterFocus(successCallback, errorCallback, mediaStream, constraints, connResp) {\r\n  try {\r\n    var roomJid = roomName + '/' + connection.resource;\r\n    connection.emuc.doJoin(roomJid);\r\n    connection.emuc.addAudioInfoToPresence((constraints.audio == false));\r\n    connection.emuc.addVideoInfoToPresence((constraints.video == false));\r\n    var _resource = Strophe.getResourceFromJid(connection.jid);\r\n    var myself = {\r\n      info: {\r\n        nickname: config.nickname ? config.nickname : manisConfg.mUsername,\r\n        resource: _resource,\r\n        roomNumber: connResp.r,\r\n        roomPassword: config.roomPassword ? config.roomPassword : '',\r\n        jid: connection.jid,\r\n      },\r\n      stream: connection.jingle.localVideo,\r\n      status: ManisFunctions.generateStatusNode(_resource),\r\n      constraints: constraints,\r\n      roomName: connResp.r,\r\n      hands_up: false,\r\n      is_moderator: (connection.jid == config.moderatorJid),\r\n      audio_only: (constraints.video == false),\r\n      video_muted: (constraints.video == false),\r\n    };\r\n    successCallback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.join_room_success,\r\n      response: myself,\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n  } catch (e) {\r\n    errorCallback({\r\n      code: ManisResponse.code_500,\r\n      msg: ManisResponse.join_room_failed,\r\n      errorCode: ErrorCode.conference_room_participant_failed\r\n    });\r\n  }\r\n\r\n}\r\n\r\nfunction getLocalStream(constraints, successCallback, errorCallback) {\r\n  console.log('try to get user media with constraints: ', constraints);\r\n  ManisStream.getMedia(constraints, function (mediaStream) {\r\n    config.currentResolution = constraints.video ? constraints.video.height.exact : null;\r\n    successCallback(mediaStream);\r\n  }, function (error) {\r\n    if (error.name == 'DevicesNotFoundError' || error.constructor.name == 'DevicesNotFoundError') {\r\n      errorCallback({\r\n        code: ManisResponse.code_404,\r\n        msg: ManisResponse.without_usefull_video_device,\r\n        errorCode: ErrorCode.media_device_except\r\n      });\r\n      return;\r\n    } else if (error.name == 'OverconstrainedError' || error.constructor.name == 'OverconstrainedError') {\r\n      if(constraints.video){\r\n        if (constraints.video.height.exact > 180) {\r\n           var resolution = ms.getResolution();\r\n           for (var i = 0; i < resolution.length - 1; i++) {\r\n             if (constraints.video.height.exact == resolution[i].height.exact) {\r\n               var newConstraints = ManisFunctions.getConstraintsByResolution((constraints.audio != false),\r\n                   (constraints.video != false), ((constraints.audio && constraints.audio.deviceId) ? constraints.audio.deviceId.exact : undefined),\r\n                   ((constraints.video && constraints.video.deviceId) ? constraints.video.deviceId.exact : undefined), resolution[i + 1].height.exact);\r\n               getLocalStream(newConstraints, successCallback, errorCallback);\r\n             }\r\n           }\r\n        } else {\r\n          console.error(error);\r\n          errorCallback({\r\n            code: ManisResponse.code_402,\r\n            msg: ManisResponse.out_of_video_device_resolution,\r\n            errorCode: ErrorCode.media_device_resolution_nonsupport\r\n          });\r\n          return;\r\n        }\r\n      }\r\n    } else {\r\n      console.error(error);\r\n      errorCallback({\r\n        code: ManisResponse.code_400,\r\n        msg: ManisResponse.get_user_media_failed,\r\n        error: error,\r\n        errorCode: ErrorCode.media_device_get_local_media_failed\r\n      });\r\n      return;\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 加入房间\r\n * @param connResp\r\n * @param successCallback\r\n * @param errorCallback\r\n * @param audioOnly\r\n * @param localMediaStream\r\n * @param withoutStream\r\n */\r\nfunction joinRoom(connResp, successCallback, errorCallback, audioOnly, localMediaStream, withoutStream) {\r\n  var isModerator = (connection.jid == config.moderatorJid);\r\n  ManisFunctions.setAdmin(isModerator);\r\n  connection.emuc.addConfigRoleToPresence(config.role);\r\n  connection.emuc.addIsModeratorToPresence(isModerator);\r\n  connection.emuc.addAvartarToPresence(config.photo || '');\r\n  if (window.connectType == 'p2p') {\r\n    P2P.join(connResp.r, successCallback, errorCallback);\r\n  } else {\r\n    if (!localMediaStream) {\r\n      if (withoutStream) {\r\n        // just join room,without any media stream\r\n        var withAudio = false;\r\n        var withVideo = false;\r\n        var audioIn = undefined;\r\n        var videoIn = undefined;\r\n        var constraints = ManisFunctions.getConstraintsByResolution(withAudio, withVideo, audioIn, videoIn, config.resolution);\r\n        doJoinRoom(connResp, successCallback, errorCallback, localMediaStream, constraints);\r\n      } else {\r\n      // var constraints = generateDefaultConstraints(audioOnly);\r\n      var withAudio = true;\r\n      var withVideo = !(audioOnly == true);\r\n      var audioIn = (window.currentAudioInputDeviceId) ? window.currentAudioInputDeviceId : undefined;\r\n      var videoIn = (window.currentVideoInputDeviceId) ? window.currentVideoInputDeviceId : undefined;\r\n      var constraints = ManisFunctions.getConstraintsByResolution(withAudio, withVideo, audioIn, videoIn, config.resolution);\r\n      getLocalStream(constraints, function (mediaStream) {\r\n        console.log(\"=========================getLocalStream====================\",mediaStream);\r\n        if (window.webkitMediaStream) {\r\n          var audioStream = new webkitMediaStream();\r\n          var videoStream = new webkitMediaStream();\r\n          var audioTracks = mediaStream.getAudioTracks();\r\n          var videoTracks = mediaStream.getVideoTracks();\r\n          for (var i = 0; i < audioTracks.length; i++) {\r\n            audioStream.addTrack(audioTracks[i]);\r\n          }\r\n          for (i = 0; i < videoTracks.length; i++) {\r\n            videoStream.addTrack(videoTracks[i]);\r\n          }\r\n          connection.jingle.localAudio = audioStream;\r\n          connection.jingle.localVideo = videoStream;\r\n        } else {\r\n          connection.jingle.localAudio = mediaStream;\r\n          connection.jingle.localVideo = mediaStream;\r\n        }\r\n        // 发送IQ消息到xmpp进入会议室.\r\n        // mediaStream.src = URL.createObjectURL(mediaStream);\r\n        mediaStream.ssrc = window.localStreamSSRC;\r\n        doJoinRoom(connResp, successCallback, errorCallback, mediaStream, constraints);\r\n      }, function (error) {\r\n        if (!audioOnly) {\r\n          console.log('get local video media stream failed, try audio only model');\r\n          $(document).trigger('manis.on.switch.to.audio.model', [!audioOnly]);\r\n          joinRoom(connResp, successCallback, errorCallback, true, localMediaStream, withoutStream);\r\n          return;\r\n        } else {\r\n          console.error(error);\r\n          errorCallback(error);\r\n        }\r\n      });\r\n      }\r\n    } else {\r\n      if (window.webkitMediaStream) {\r\n        var audioStream = new webkitMediaStream();\r\n        var videoStream = new webkitMediaStream();\r\n        var audioTracks = localMediaStream.getAudioTracks();\r\n        var videoTracks = localMediaStream.getVideoTracks();\r\n        for (var i = 0; i < audioTracks.length; i++) {\r\n          audioStream.addTrack(audioTracks[i]);\r\n        }\r\n        for (i = 0; i < videoTracks.length; i++) {\r\n          videoStream.addTrack(videoTracks[i]);\r\n        }\r\n        connection.jingle.localAudio = audioStream;\r\n        connection.jingle.localVideo = videoStream;\r\n      } else {\r\n        connection.jingle.localAudio = localMediaStream;\r\n        connection.jingle.localVideo = localMediaStream;\r\n      }\r\n      // 发送IQ消息到xmpp进入会议室.\r\n      // mediaStream.src = URL.createObjectURL(mediaStream);\r\n      localMediaStream.ssrc = window.localStreamSSRC;\r\n      doJoinRoom(connResp, successCallback, errorCallback, localMediaStream, {});\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * 创建会议室: (一) 调用会控创建会议室\r\n *\r\n * @param userId\r\n * @param jid\r\n * @param roomPassword\r\n * @param comperePassword\r\n * @param successCallback\r\n * @param errorCallback\r\n * @param server\r\n */\r\nfunction createRoom(userId, jid, roomPassword, comperePassword, successCallback, errorCallback, server) {\r\n  var _header = ManisFunctions.authoredHeader();\r\n  try {\r\n    $.ajax({\r\n      url: server,\r\n      // dataType: 'jsonp',\r\n      // jsonpCallback: 'createRoomInCtlCallback',\r\n      data: {u: userId, j: jid, p: roomPassword, op: comperePassword},\r\n      headers: _header,\r\n      type: 'GET',\r\n      async: false,\r\n      timeout: 2000,\r\n      success: function (response, textStatus, xOptions) {\r\n        // console.info('get create room in ctl result : ', response, 'xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n        if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n          if (response.code == 500) {\r\n            // conference exist\r\n            console.info('room exist in ctl do join: ', response);\r\n            validRoom(response.obj.r, roomPassword, successCallback, errorCallback)\r\n          } else if (response.code == 200) {\r\n            ManisFunctions.setAdmin(true);\r\n            // create room in ctl success\r\n            console.info('create room in ctl success: ', response);\r\n            // room name   100220006@conference.192.168.5.60\r\n            if (response.obj.moderator != undefined) {\r\n              var isModerator = response.obj.moderator == 'true';\r\n              connection.emuc.addIsModeratorToPresence(isModerator);\r\n            }\r\n            config.gw = response.obj.gw;\r\n            config.title = response.obj.title;\r\n            window.roomName = response.obj.r + '@conference.' + manisConfg.messageServer;\r\n            window.config.focusUserJid = 'focus@' + manisConfg.messageServer;\r\n            joinRoom(response.obj, successCallback, errorCallback);\r\n          }\r\n        } else {\r\n          // create room in ctl failure\r\n          errorCallback({\r\n            code: ManisResponse.code_403,\r\n            msg: ManisResponse.out_of_source_limit\r\n          });\r\n        }\r\n      },\r\n      error: function (xOptions, textStatus) {\r\n        console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n        errorCallback({\r\n          code: ManisResponse.code_500,\r\n          msg: ManisResponse.create_room_failed\r\n        });\r\n      }\r\n    });\r\n  }\r\n  catch (e) {\r\n    console.error('xhr request failure with error : ', e);\r\n    errorCallback({\r\n      code: ManisResponse.code_500,\r\n      msg: ManisResponse.create_room_failed\r\n    });\r\n  }\r\n\r\n};\r\n\r\nfunction fetchAdmin(participant, roomName, password, successCallback, errorCallback) {\r\n  var md5 = crypto.createHash('md5');\r\n  md5.update(password);\r\n  var md5Password = md5.digest('hex');\r\n  var _header = ManisFunctions.authoredHeader();\r\n  // try {\r\n  $.ajax({\r\n    url: window.serverPath + FETCH_ADMIN,\r\n    dataType: 'json',\r\n    // jsonpCallback: 'fetchAdminCallBack',\r\n    data: {r: roomName, j: participant.jid, p: md5Password},\r\n    headers: _header,\r\n    type: 'GET',\r\n    // async: false,\r\n    timeout: 2000,\r\n    success: function (response, textStatus, xOptions) {\r\n      // if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n      if (response.mcode == 200) {\r\n        ManisFunctions.setAdmin(true);\r\n        var msg = $msg({to: participant.jid, type: 'chat'});//grant\r\n        msg.c('body', {\r\n          xmlns: 'http://igniterealtime.org/protocol/grantAdmin',\r\n          jid: participant.jid\r\n        }).t(\"true\").up();\r\n        window.connection.send(msg);\r\n        window.connection.emuc.addConfigRoleToPresence(config.role);\r\n        window.connection.emuc.addIsModeratorToPresence(ManisFunctions.isAdmin());\r\n        window.connection.emuc.sendPresence();\r\n        successCallback({\r\n          code: ManisResponse.code_200,\r\n          msg: ManisResponse.fetch_compere_success,\r\n          errorCode: ErrorCode.no_error\r\n        });\r\n      }else if(response.mcode == 703){\r\n        errorCallback({\r\n          code: response.mcode,\r\n          msg: ManisResponse.fetch_compere_error,\r\n          errorCode: ErrorCode.fetch_admin_failed_wrong_password\r\n        });\r\n      }else if(response.mcode == 702){\r\n          errorCallback({\r\n              code: response.mcode,\r\n              msg: ManisResponse.fetch_compere_failed_exist,\r\n              errorCode: ErrorCode.fetch_admin_failed_moderator_exist\r\n          });\r\n      }else {\r\n        errorCallback({\r\n          code: response.mcode,\r\n          msg: ManisResponse.fetch_compere_error,\r\n          errorCode: ErrorCode.fetch_admin_failed\r\n        });\r\n      }\r\n      // } else {\r\n      //   errorCallback({\r\n      //     code: ManisResponse.code_400,\r\n      //     msg: ManisResponse.fetch_compere_error\r\n      //   });\r\n      // }\r\n    },\r\n    error: function (xOptions, textStatus) {\r\n      errorCallback({\r\n        code: ManisResponse.code_500,\r\n        msg: ManisResponse.network_error,\r\n        errorCode: ErrorCode.api_fetch_failed\r\n      });\r\n    }\r\n  });\r\n  // } catch (e) {\r\n  //   errorCallBack({\r\n  //     code: ManisResponse.code_500,\r\n  //     msg: ManisResponse.network_error\r\n  //   });\r\n  // }\r\n};\r\n\r\nfunction grantAdmin(participant, roomName, successCallback, errorCallback) {\r\n  var _header = ManisFunctions.authoredHeader();\r\n  // try {\r\n  $.ajax({\r\n    url: window.serverPath + GRANT_ADMIN,\r\n    dataType: 'json',\r\n    // jsonpCallback: 'grantAdminCallBack',\r\n    data: {r: roomName, j: participant.jid, i: config.mUserId},\r\n    headers: _header,\r\n    type: 'GET',\r\n    // async: false,\r\n    timeout: 2000,\r\n    success: function (response) {\r\n      // if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n      if (response.code == 200) {\r\n        ManisFunctions.setAdmin(false);\r\n        // console.log('grant admin success');\r\n        var _jid = window.connection.emuc.roomjid + '/' + Strophe.getResourceFromJid(participant.jid)\r\n        var msg = $msg({to: _jid, type: 'chat'});//grant\r\n        msg.c('body', {\r\n          xmlns: 'http://igniterealtime.org/protocol/grantAdmin',\r\n          jid: _jid\r\n        }).t(\"true\").up();\r\n        window.connection.send(msg);\r\n        window.connection.emuc.addConfigRoleToPresence(config.role);\r\n        window.connection.emuc.addIsModeratorToPresence(ManisFunctions.isAdmin());\r\n        window.connection.emuc.sendPresence();\r\n        // update myself 'is_moderator' status\r\n        for (var i = 0; i < window.participants.length; i++) {\r\n          var pt = window.participants[i];\r\n          if (pt.jid == connection.jid) {\r\n            pt.is_moderator = ManisFunctions.isAdmin();\r\n            window.participants[i] = pt;\r\n          }\r\n        }\r\n        successCallback({\r\n          code: ManisResponse.code_200,\r\n          msg: ManisResponse.transferc_compere_success,\r\n          errorCode: ErrorCode.no_error\r\n        });\r\n      } else {\r\n        errorCallback({\r\n          code: ManisResponse.code_400,\r\n          msg: ManisResponse.transferc_compere_failed,\r\n          errorCode: ErrorCode.grant_admin_participant_failed\r\n        })\r\n      }\r\n      // } else {\r\n      //   errorCallback({\r\n      //     code: ManisResponse.code_403,\r\n      //     msg: ManisResponse.out_of_authority\r\n      //   })\r\n      // }\r\n    },\r\n    error: function (xOptions, textStatus) {\r\n      errorCallback({\r\n        code: ManisResponse.code_500,\r\n        msg: ManisResponse.network_error,\r\n        errorCode: ErrorCode.api_fetch_failed\r\n      });\r\n    }\r\n  });\r\n  // } catch (e) {\r\n  //   errorCallback({\r\n  //     code: ManisResponse.code_500,\r\n  //     msg: ManisResponse.network_error\r\n  //   });\r\n  // }\r\n};\r\n\r\nfunction setAudioMute(resource, mute, successCallback, errorCallback) {\r\n  var participant = ManisFunctions.getUserByResource(resource);\r\n  var iqToFocus = $iq({to: window.focusJid, type: 'set'}).c('mute', {\r\n    xmlns: 'http://jitsi.org/jitmeet/audio',\r\n    jid: participant.jid,\r\n    userjid: participant.jid\r\n  }).t(mute.toString()).up();\r\n  window.connection.sendIQ(iqToFocus, function (success) {\r\n    if (participant.jid == window.self.jid) {\r\n      ManisFunctions.setAudioMute(mute);\r\n    }\r\n    successCallback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.manage_set_audio_mute_success,\r\n      response: mute,\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n  }, function (error) {\r\n    errorCallback({\r\n      code: ManisResponse.code_400,\r\n      msg: ManisResponse.manage_set_audio_mute_failed,\r\n      errorCode: ErrorCode.operate_someone_audio_failed\r\n    })\r\n  });\r\n};\r\n\r\nfunction setVideoMute(resource, mute, successCallback, errorCallback) {\r\n  var participant = ManisFunctions.getUserByResource(resource);\r\n  var iqToFocus = $iq({to: window.focusJid, type: 'set'}).c('mute', {\r\n    xmlns: 'http://jitsi.org/jitmeet/video',\r\n    jid: participant.jid,\r\n    userjid: participant.jid\r\n  }).t(mute.toString()).up();\r\n  window.connection.sendIQ(iqToFocus, function (success) {\r\n    if (participant.jid == window.self.jid) {\r\n      ManisFunctions.setVideoMute(mute);\r\n      $(document).trigger('onmute.video.muc', mute);\r\n    }\r\n    successCallback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.set_video_toggle_complete,\r\n      response: mute,\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n  }, function (error) {\r\n    errorCallback({\r\n      code: ManisResponse.code_400,\r\n      msg: ManisResponse.set_video_toggle_failed,\r\n      errorCode: ErrorCode.operate_someone_video_failed\r\n    })\r\n  });\r\n};\r\n\r\n\r\nfunction eject(participant, successCallback, errorCallback) {\r\n  try {\r\n    var msg = $msg({to: participant.jid, type: 'chat'});\r\n    msg.c('body', {xmlns: 'http://igniterealtime.org/protocol/eject', jid: participant.jid}).t(\"true\").up();\r\n    window.connection.send(msg);\r\n    successCallback({\r\n      code: ManisResponse.code_200,\r\n      msg: ManisResponse.remove_participant_complete,\r\n      errorCode: ErrorCode.no_error\r\n    });\r\n  } catch (e) {\r\n    errorCallback({\r\n      code: ManisResponse.code_400,\r\n      msg: ManisResponse.remove_participant_failed,\r\n      errorCode: ErrorCode.eject_participant_failed\r\n    });\r\n  }\r\n};\r\n\r\nfunction validRoom(roomName, roomPassword, successCallBack, errorCallback) {\r\n  var _header = ManisFunctions.authoredHeader();\r\n  try {\r\n    $.ajax({\r\n      url: window.serverPath + JOIN_ROOM_URL,\r\n      // dataType: 'jsonp',\r\n      // jsonpCallback: 'validRoomCallBack',\r\n      data: {r: roomName, p: roomPassword, u: manisConfg.mUserId, j: connection.jid},\r\n      dataType: 'json',\r\n      headers: _header,\r\n      type: 'GET',\r\n      // async: true,\r\n      timeout: 2000,\r\n      success: function (response, textStatus, xOptions) {\r\n        if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n          if (response.code == 200) {\r\n            console.log('success join room :', roomName, response);\r\n            var isModerator = (response.obj.moderator ? response.obj.moderator == connection.jid : ManisFunctions.isAdmin());\r\n            if (response.obj.moderator != undefined) {\r\n              connection.emuc.addIsModeratorToPresence(isModerator);\r\n              connection.emuc.sendPresence();\r\n            }\r\n            // ③ 加入会议\r\n            window.roomName = roomName + '@conference.' + manisConfg.messageServer;\r\n            var resp = response;\r\n            resp.r = roomName;\r\n            resp.vb = response.obj.vb;\r\n            config.gw = response.obj.gw;\r\n            config.title = response.obj.title;\r\n            ManisFunctions.setAdmin(isModerator);\r\n            joinRoom(resp, successCallBack, errorCallback);\r\n          } else if (response.code == 401) {\r\n            // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n            errorCallback({\r\n              code: ManisResponse.code_422,\r\n              msg: ManisResponse.room_password_expect\r\n            });\r\n          } else if (response.code == 403) {\r\n            // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n            errorCallback({\r\n              code: ManisResponse.code_405,\r\n              msg: ManisResponse.room_locked\r\n            });\r\n          }\r\n        } else {\r\n          // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n          errorCallback({\r\n            code: ManisResponse.code_500,\r\n            msg: ManisResponse.join_room_failed\r\n          });\r\n        }\r\n      },\r\n      error: function (xOptions, textStatus) {\r\n        // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n        errorCallback({\r\n          code: ManisResponse.code_500,\r\n          msg: ManisResponse.join_room_failed\r\n        });\r\n      }\r\n    });\r\n  } catch (e) {\r\n    // console.error('xhr request failure with error : ', e);\r\n    errorCallBack({\r\n      code: ManisResponse.code_500,\r\n      msg: ManisResponse.join_room_failed\r\n    });\r\n  }\r\n}\r\n\r\nfunction joinConferenceRoom(conferenceName, conferencePassword, successCallback, errorCallback) {\r\n  join(conferenceName, conferencePassword, successCallback, errorCallback);\r\n};\r\n\r\nfunction join(conferenceName, conferencePassword, successCallback, errorCallback) {\r\n  // ① 判断是否超出会议资源限制\r\n  var _header = ManisFunctions.authoredHeader();\r\n  try {\r\n    $.ajax({\r\n      url: window.serverPath + CHECK_RESOURCES_URL,\r\n      // dataType: 'jsonp',\r\n      // jsonpCallback: 'checkResourcesCallBack',\r\n      data: {r: conferenceName, j: connection.jid, u: manisConfg.mUserId},\r\n      dataType: 'json',\r\n      headers: _header,\r\n      type: 'GET',\r\n      // async: true,\r\n      timeout: 2000,\r\n      success: function (response, textStatus, xOptions) {\r\n        if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n          // ② 判断会议室是否存在以及会议室密码是否正确\r\n          if (response.code == 200) {\r\n            // console.warn('get check resource result: ', response);\r\n            var d = conferencePassword;\r\n            if (d != undefined && d != '' && d != null) {\r\n              console.log('room resources check success.');\r\n              var md5 = crypto.createHash('md5');\r\n              md5.update(conferencePassword);\r\n              d = md5.digest('hex');\r\n            }\r\n            validRoom(conferenceName, d, successCallback, errorCallback);\r\n          } else {\r\n            // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n            errorCallback({\r\n              code: ManisResponse.code_403,\r\n              msg: ManisResponse.out_of_source_limit\r\n            });\r\n          }\r\n        } else {\r\n          // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n          errorCallback({\r\n            code: ManisResponse.code_500,\r\n            msg: ManisResponse.join_room_failed\r\n          });\r\n        }\r\n      },\r\n      error: function (xOptions, textStatus) {\r\n        // console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n        errorCallback({\r\n          code: ManisResponse.code_500,\r\n          msg: ManisResponse.join_room_failed\r\n        });\r\n      }\r\n    });\r\n  } catch (e) {\r\n    // console.error('xhr request failure with error : ', e);\r\n    errorCallback({\r\n      code: ManisResponse.code_500,\r\n      msg: ManisResponse.join_room_failed\r\n    });\r\n  }\r\n}\r\n\r\nfunction lockRoom(action, callback) {\r\n  var switchAction = (action && action.toString() == 'true') ? true : false;\r\n  // try {\r\n    var username = manisConfg.mUserId;\r\n    var roomNumber = roomName.split('@')[0];\r\n    var _header = ManisFunctions.authoredHeader();\r\n    $.ajax({\r\n      url: window.serverPath + \"/conference/lock?i=\" + username + \"&r=\" + roomNumber + \"&l=\" + switchAction,\r\n      dataType: 'json',\r\n      headers: _header,\r\n      processData: false,\r\n      type: 'GET',\r\n      success: function (rs) {\r\n        if (rs.code == 200) {\r\n          window.lock = switchAction;\r\n          ManisFunctions.broadcastRoomLockStatus(switchAction);\r\n          // console.log('oooooooooooooooosssssssssssooooooooooo');\r\n          callback({\r\n              code: ManisResponse.code_200,\r\n              msg: ManisResponse.lock_or_unlock_room_completed,\r\n              response: switchAction,\r\n              errorCode: ErrorCode.no_error\r\n          })\r\n        }\r\n      },\r\n      error: function (err) {\r\n          console.error(err)\r\n      }\r\n    });\r\n  // } catch (e) {\r\n  //   callback({\r\n  //     code: ManisResponse.code_500,\r\n  //     msg: ManisResponse.lock_or_unlock_room_failed,\r\n  //     errorCode: ErrorCode.api_fetch_failed\r\n  //   })\r\n  // }\r\n}\r\n\r\n/**\r\n * 校验会议室资源\r\n * @param params\r\n * @param successCallback\r\n * @param errorCallback\r\n */\r\nfunction joinCheck(params, successCallback, errorCallback) {\r\n  var _header = ManisFunctions.authoredHeader();\r\n  $.ajax({\r\n    url: window.serverPath + \"/user/join?j=\" + connection.jid + \"&r=\" + params.r,\r\n    // dataType: 'jsonp',\r\n    dataType: 'json',\r\n    headers: _header,\r\n    processData: false,\r\n    type: 'GET',\r\n    async: false,\r\n    success: function (rs) {\r\n      if (rs.code == 200) {\r\n        joinRoom(params, successCallback, errorCallback);\r\n      } else {\r\n        errorCallback({\r\n          code: ManisResponse.code_403,\r\n          msg: ManisResponse.out_of_source_limit\r\n        });\r\n      }\r\n    },\r\n    error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n      errorCallback({\r\n        code: ManisResponse.code_500,\r\n        msg: ManisResponse.out_of_source_limit\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\nfunction roomValidCheck(params, successCallback, errorCallback) {\r\n  var _header = ManisFunctions.authoredHeader();\r\n  $.ajax({\r\n    url: window.serverPath + \"/user/valid?i=\" + connection.username + \"&r=\" + params.r + \"&j=\" + connection.jid,\r\n    // dataType: 'jsonp',\r\n    dataType: 'json',\r\n    headers: _header,\r\n    processData: false,\r\n    type: 'get',\r\n    success: function (rs) {\r\n      if (rs.code == 200) {\r\n        joinCheck(params, successCallback, errorCallback);\r\n      } else if (rs.code == 401 || rs.code == 403) {\r\n        errorCallback({\r\n          code: ManisResponse.code_400,\r\n          msg: ManisResponse.join_room_failed\r\n        });\r\n        window.location.href = rs.msg;\r\n      } else if (rs.code == 4030) {\r\n        errorCallback({\r\n          code: ManisResponse.code_400,\r\n          msg: ManisResponse.room_locked\r\n        });\r\n        window.location.href = rs.msg;\r\n      } else {\r\n        errorCallback({\r\n          code: ManisResponse.code_400,\r\n          msg: ManisResponse.join_room_failed\r\n        });\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nfunction createOrJoinRoom(roomNumber, roomPassword, operatorPassword, successCallback, errorCallback, isAudioOnly, localMediaStream, withoutStream) {\r\n  var activeLanguage = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n  var _header = ManisFunctions.authoredHeader();\r\n  $.ajax({\r\n    url: window.serverPath + CREATE_OR_JOIN_CONFERENCE,\r\n    dataType: 'json',\r\n    // jsonpCallback: 'createOrJoinConferenceCallBack',\r\n    data: {\r\n      r: roomNumber,\r\n      j: connection.jid,\r\n      u: manisConfg.mUserId,\r\n      p: roomPassword,\r\n      op: operatorPassword,\r\n      lang: activeLanguage\r\n    },\r\n    headers: _header,\r\n    type: 'GET',\r\n    // async: true,\r\n    timeout: 2000,\r\n    success: function (response) {\r\n      // if (xOptions.readyState == 4 && xOptions.status == 200) {\r\n      console.info('create or join room in room controller result : ', response);\r\n      switch (response.code) {\r\n        case 200:\r\n          // success\r\n          window.roomName = response.obj.r + '@conference.' + manisConfg.messageServer;\r\n          config.gw = response.obj.gw;\r\n          config = Object.assign(config, response.obj);\r\n          config.roomPassword = roomPassword;\r\n          // store origin config resolution, restore while device change\r\n          config.storeResolution = config.resolution;\r\n          window.localSSRCS = [];\r\n          joinRoom(response.obj, successCallback, errorCallback, isAudioOnly, localMediaStream, withoutStream);\r\n          break;\r\n        case 401:\r\n          // auth failed\r\n          errorCallback({\r\n            code: ManisResponse.code_401,\r\n            msg: ManisResponse.room_password_expect,\r\n            errorCode: ErrorCode.conference_room_password_error\r\n          });\r\n          break;\r\n        case 403:\r\n          // room locked\r\n          errorCallback({\r\n            code: ManisResponse.code_403,\r\n            msg: ManisResponse.room_locked,\r\n            errorCode: ErrorCode.conference_room_locked\r\n          });\r\n          break;\r\n        case 404:\r\n          // focus except\r\n          errorCallback({\r\n            code: ManisResponse.code_404,\r\n            msg: ManisResponse.conference_focus_except,\r\n            errorCode: ErrorCode.conference_room_focus_except\r\n          });\r\n          break;\r\n        case 405:\r\n          // vb except\r\n          errorCallback({\r\n            code: ManisResponse.code_405,\r\n            msg: ManisResponse.conference_vb_except,\r\n            errorCode: ErrorCode.conference_room_vb_except\r\n          });\r\n          break;\r\n        case 4031:\r\n          // out of source limit\r\n          errorCallback({\r\n            code: ManisResponse.code_403,\r\n            msg: ManisResponse.out_of_source_limit,\r\n            errorCode: ErrorCode.conference_room_source_limit\r\n          });\r\n          break;\r\n        case 4032:\r\n          errorCallback({\r\n            code: ManisResponse.code_408,\r\n            msg: ManisResponse.conference_participant_time_error,\r\n            errorCode: ErrorCode.conference_room_participant_out_time\r\n          });\r\n          break;\r\n        default:\r\n          // create or join failed\r\n          errorCallback({\r\n            code: ManisResponse.code_500,\r\n            msg: ManisResponse.join_room_failed,\r\n            errorCode: response.code\r\n          });\r\n      }\r\n      // return true;\r\n      // } else {\r\n      //   console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n      //   errorCallback({\r\n      //     code: ManisResponse.code_500,\r\n      //     msg: ManisResponse.join_room_failed\r\n      //   });\r\n      // }\r\n    },\r\n    error: function (xOptions, textStatus) {\r\n      console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n      errorCallback({\r\n        code: ManisResponse.code_500,\r\n        msg: ManisResponse.join_room_failed,\r\n        errorCode: ErrorCode.api_fetch_failed\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\nfunction joinConferenceWithMedia(room, password, mediaStream, callback) {\r\n  try {\r\n    var activeLanguage = window.localStorage.getItem('defaultLanguage') || 'zh';\r\n    var _header = ManisFunctions.authoredHeader();\r\n    $.ajax({\r\n      url: window.serverPath + CREATE_OR_JOIN_CONFERENCE,\r\n      // dataType: 'jsonp',\r\n      // jsonpCallback: 'createOrJoinConferenceCallBack',\r\n      dataType: 'json',\r\n      data: {r: room, j: connection.jid, u: manisConfg.mUserId, p: password, op: null, lang: activeLanguage},\r\n      headers: _header,\r\n      type: 'GET',\r\n      async: true,\r\n      timeout: 2000,\r\n      success: function (response, textStatus, xOptions) {\r\n        console.info('create or join room in room controller result : ', response);\r\n        switch (response.code) {\r\n          case 200:\r\n            // success\r\n            window.roomName = response.obj.r + '@conference.' + manisConfg.messageServer;\r\n            config.gw = response.obj.gw;\r\n            config = Object.assign(config, response.obj);\r\n            config.roomPassword = password;\r\n            var isModerator = (connection.jid == config.moderatorJid);\r\n            ManisFunctions.setAdmin(isModerator);\r\n            connection.emuc.addConfigRoleToPresence(config.role);\r\n            connection.emuc.addIsModeratorToPresence(isModerator);\r\n\r\n            doJoinRoom(response.obj, callback, callback, mediaStream, {});\r\n            break;\r\n          case 401:\r\n            // auth failed\r\n            callback({\r\n              code: ManisResponse.code_401,\r\n              msg: ManisResponse.room_password_expect,\r\n              errorCode: ErrorCode.conference_room_not_exist\r\n            });\r\n            break;\r\n          case 403:\r\n            // room locked\r\n            callback({\r\n              code: ManisResponse.code_403,\r\n              msg: ManisResponse.room_locked,\r\n              errorCode: ErrorCode.conference_room_locked\r\n            });\r\n            break;\r\n          case 404:\r\n            // focus except\r\n            callback({\r\n              code: ManisResponse.code_404,\r\n              msg: ManisResponse.conference_focus_except,\r\n              errorCode: ErrorCode.conference_room_focus_except\r\n            });\r\n            break;\r\n          case 405:\r\n            // vb except\r\n            callback({\r\n              code: ManisResponse.code_405,\r\n              msg: ManisResponse.conference_vb_except,\r\n              errorCode: ErrorCode.conference_room_vb_except\r\n            });\r\n            break;\r\n          case 4031:\r\n            // out of source limit\r\n            callback({\r\n              code: ManisResponse.code_403,\r\n              msg: ManisResponse.out_of_source_limit,\r\n              errorCode: ErrorCode.conference_room_source_limit\r\n            });\r\n            break;\r\n          case 4032:\r\n            callback({\r\n              code: ManisResponse.code_408,\r\n              msg: ManisResponse.conference_participant_time_error,\r\n              errorCode: ErrorCode.conference_room_participant_out_time\r\n            });\r\n            break;\r\n          default:\r\n            // join failed\r\n            callback({\r\n              code: ManisResponse.code_500,\r\n              msg: ManisResponse.join_room_failed,\r\n              errorCode: ErrorCode.conference_room_participant_failed_unknown_response_code\r\n            });\r\n        }\r\n      },\r\n      error: function (xOptions, textStatus) {\r\n        console.error('xOptions : ', xOptions, 'textStatus : ', textStatus);\r\n        callback({\r\n          code: ManisResponse.code_500,\r\n          msg: ManisResponse.join_room_failed,\r\n          errorCode: ErrorCode.api_fetch_failed\r\n        });\r\n      }\r\n    });\r\n  } catch (e) {\r\n    console.error('xhr request failure with error : ', e);\r\n    callback({\r\n      code: ManisResponse.code_500,\r\n      msg: ManisResponse.join_room_failed,\r\n      errorCode: ErrorCode.unknown_error\r\n    });\r\n  }\r\n}\r\n\r\n\r\nfunction isSupportShareScreen() {\r\n  if(RTC.isChrome()) {\r\n      return true;\r\n  }\r\n  return false;\r\n}\r\nfunction isSupportRecord() {\r\n  if(RTC.isSafari()) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction roomDelay(time, callback) {\r\n  var _header = ManisFunctions.authoredHeader();\r\n  $.ajax({\r\n    url: window.serverPath + DELAY_ROOM_PATH + config.r,\r\n    data: {userId: config.mUserId, lengthTime: time},\r\n    dataType: 'json',\r\n    headers: _header,\r\n    type: 'GET',\r\n    timeout: 2000,\r\n    success: function (response) {\r\n      if (config.debug == true) {\r\n        console.log('delay room success', response);\r\n      }\r\n      callback({\r\n        code: ManisResponse.code_200,\r\n        msg: ManisResponse.room_extend_time_success,\r\n        errorCode: ErrorCode.no_error\r\n      })\r\n    },\r\n    error: function (xOptions, textStatus) {\r\n      if (config.debug == true) {\r\n        console.error('delay room failed: ', xOptions, textStatus);\r\n      }\r\n      callback({\r\n        code: ManisResponse.code_403,\r\n        msg: ManisResponse.room_extend_time_failed,\r\n        errorCode: ErrorCode.conference_delay_failed\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 呼叫录播之前获取最近的gw配置\r\n * @param callback\r\n */\r\nfunction updateGWConfig(callback){\r\n  var _header = ManisFunctions.authoredHeader();\r\n  $.ajax({\r\n    url: window.serverPath + CONFIG_RESOURCE_UPDATE,\r\n    data: {roomNumber: config.r, userJid: connection.jid},\r\n    dataType: 'json',\r\n    headers: _header,\r\n    type: 'GET',\r\n    timeout: 2000,\r\n    success: function (response) {\r\n      console.log('update gw config resource', response);\r\n      if(response.code == 200){\r\n        var newGW = response.obj.gw ? response.obj.gw : config.gw;\r\n        callback({\r\n          code: response.mcode,\r\n          response: newGW\r\n        });\r\n      }else {\r\n        console.error('update gw config resource failed: ', response);\r\n        callback({\r\n          code: response.mcode,\r\n          response: config.gw\r\n        });\r\n      }\r\n    },\r\n    error: function (xOptions, textStatus) {\r\n      if (config.debug == true) {\r\n        console.error('update gw config resource failed: ', xOptions, textStatus);\r\n        callback({\r\n          code: 500,\r\n          response: config.gw\r\n        });\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nmodule.exports = {\r\n  createOrJoinRoom: createOrJoinRoom,\r\n  // createRoom: createRoom,\r\n  fetchAdmin: fetchAdmin,\r\n  grantAdmin: grantAdmin,\r\n  setAudioMute: setAudioMute,\r\n  setVideoMute: setVideoMute,\r\n  eject: eject,\r\n  // joinConferenceRoom: joinConferenceRoom,\r\n  lockRoom: lockRoom,\r\n  // roomValidCheck: roomValidCheck,\r\n  // joinRoom: joinRoom,\r\n  leaveConferenceRoom: leaveConferenceRoom,\r\n  initDefaultInputDevices: initDefaultInputDevices,\r\n  joinConferenceWithMedia: joinConferenceWithMedia,\r\n  roomDelay: roomDelay,\r\n  updateGWConfig: updateGWConfig,\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/manis.conference.js\n// module id = 56\n// module chunks = 0","var SDPUtil = require('./strophe/plugins/strophe.jingle.sdp.util');\r\nvar MediaStream = require('./libs/media_stream');\r\nvar DataChannel = require('./libs/data_channels');\r\nvar simulcast = require('./libs/simulcast');\r\nvar Status = require('./manis.status');\r\nvar ManisFunctions = require('./manis.functions');\r\nvar ConnectionQuality = require('./libs/connectionquality');\r\n\r\n$(document).bind('moderatored.muc', function (event, jid, isModerator) {\r\n  var withModerator = false;\r\n  for (var i = 0; i < window.participants.length; i++) {\r\n    var participant = window.participants[i];\r\n    if (participant.resource == Strophe.getResourceFromJid(jid)) {\r\n      participant.is_moderator = isModerator;\r\n    }\r\n    if (participant.is_moderator) {\r\n      withModerator = true;\r\n    }\r\n  }\r\n  // console.log('XXXXXXXXXXXXXX with moderator status : ', withModerator, window.config.withModerator);\r\n  // if (withModerator != window.config.withModerator) {\r\n  //   $(document).trigger('manis.on.with.moderator.changed', [withModerator]);\r\n  // }\r\n});\r\n\r\n$(document).bind('manis.been.stop.screen.share', function (event) {\r\n  window.removeScreenInprogress = true;\r\n  window.isUsingScreenStream = false;\r\n  Status.removeScreenSourceFromConnection(function (result) {\r\n    console.info('someone share screen replaced my share');\r\n    $(document).trigger('mains.on.screen.share.end');\r\n  })\r\n});\r\n\r\n$(document).bind('entered.muc', function (event, jid, info, pres) {\r\n  console.log('entered', jid, info);\r\n\r\n  // ignore recorder\r\n  if(jid.indexOf('recorder') > -1){\r\n    // console.log('recorder entered ');\r\n    // $(document).trigger('manis.recorder.status.change', [true, jid]);\r\n    return false;\r\n  }\r\n\r\n  // 判斷將新加入的用戶添加到用戶列表中，如果jid是focus，則添加自己進去，參會用戶participant對象為：\r\n  // var participant = {\r\n  //   nickname: 'nickname',\r\n  //   jid: 'uniqueId@conference/resource',\r\n  //   resource: 'resource',  截取jid後面的resource\r\n  // }\r\n  if (jid.indexOf('focus') === -1) {\r\n    // remote participant\r\n    var participant = {\r\n      nickname: info.displayName,\r\n      jid: info.jid,\r\n      resource: Strophe.getResourceFromJid(info.jid),\r\n      audio_muted: false,\r\n      video_muted: false,\r\n      is_moderator: (connection.jid == config.moderatorJid),\r\n    }\r\n  } else {\r\n    // self\r\n    var participant = {\r\n      nickname: config.nickname ? config.nickname : manisConfg.mUserName,\r\n      jid: connection.jid,\r\n      resource: Strophe.getResourceFromJid(connection.jid),\r\n      audio_muted: false,\r\n      video_muted: false,\r\n      is_moderator: (connection.jid == config.moderatorJid),\r\n    }\r\n  }\r\n  // 去重\r\n  if (window.participants.length > 0) {\r\n    var participantExist = false;\r\n    for (var k = 0; k < window.participants.length; k++) {\r\n      var p = window.participants[k];\r\n      if (p.resource === participant.resource) {\r\n        participantExist = true;\r\n      }\r\n    }\r\n    if (!participantExist) {\r\n      window.participants.push(participant);\r\n    }\r\n  } else {\r\n    // insert\r\n    window.participants.push(participant);\r\n  }\r\n  if (info.isFocus) {\r\n    window.focusJid = jid;\r\n    console.info(\"Ignore focus: \" + jid + \", real JID: \" + info.jid);\r\n    return;\r\n  }\r\n  $(document).trigger('manis.on.muc.change', ['entered', participant])\r\n});\r\n\r\n$(document).bind('left.muc', function (event, jid) {\r\n  console.info(\"=========left==========:\", event , \" jid : \", jid);\r\n  delete jid2Ssrc[jid];\r\n  if (connection.jingle != undefined) {\r\n    connection.jingle.terminateByJid(jid);\r\n  }\r\n  var leftFromRoom = false;\r\n  // 從participants中刪除對應的participant對象\r\n  if (window.participants.length > 0) {\r\n    for (var k = 0; k <= window.participants.length; k++) {\r\n      var p = window.participants[k];\r\n      if (p && p.resource === Strophe.getResourceFromJid(jid)) {\r\n        window.participants.splice(k, 1);\r\n        leftFromRoom = true;\r\n      }\r\n    }\r\n  }\r\n  if(leftFromRoom){\r\n    console.log(\"=======================left======================\",jid);\r\n    $(document).trigger('manis.room.someone.left', {resource: Strophe.getResourceFromJid(jid)});\r\n    $(document).trigger('app.share.endpoint.left', [Strophe.getResourceFromJid(jid)]);\r\n    $(document).trigger('manis.on.muc.change', ['left', jid])\r\n  }else {\r\n    console.log('some one sign out:', Strophe.getResourceFromJid(jid));\r\n  }\r\n  //\r\n  if(jid.indexOf('recorder') > -1){\r\n    $(document).trigger('manis.recorder.status.change', [false, jid]);\r\n  }\r\n});\r\n\r\n$(document).bind('presence.status', function (event, pres) {\r\n  try{\r\n    var resources = {}, status = {};\r\n    var presNode = $(pres);\r\n    var from = presNode.attr('from');\r\n    var configRole = presNode.find('configRole').text() || 'NONE';\r\n    var nickName = presNode.find('nick').text() || '';\r\n    var audioMuted = presNode.find('audiomuted').text() || false;\r\n    var videoMuted = presNode.find('videomuted').text() || false;\r\n    var statusNode = presNode.find('stats[xmlns=\"http://jitsi.org/jitmeet/stats\"]');\r\n    var mediaNode = presNode.find('media[xmlns=\"http://estos.de/ns/mjs\"]');\r\n    $.each(statusNode.find('stat'), function (index, statNode) {\r\n      if($(statNode).attr('name') == 'bitrate_download'){\r\n        var downloadBitrate = $(statNode).attr('value') || '0';\r\n        status.downloadBitrate = downloadBitrate;\r\n      }else if($(statNode).attr('name') == 'bitrate_upload'){\r\n        var uploadBitrate = $(statNode).attr('value') || '0';\r\n        status.uploadBitrate = uploadBitrate;\r\n      }else if($(statNode).attr('name') == 'packetLoss_download'){\r\n        var packageDownloadLost = $(statNode).attr('value') || '0';\r\n        status.packageDownloadLost = packageDownloadLost;\r\n      }else if($(statNode).attr('name') == 'packetLoss_upload'){\r\n        var packageUploadLost = $(statNode).attr('value') || '0';\r\n        status.packageUploadLost = packageUploadLost;\r\n      }\r\n    });\r\n    $.each(mediaNode.find('source'), function (index, sourceNode) {\r\n      var sourceSSRC = $(sourceNode).attr('ssrc');\r\n      if($(sourceNode).attr('type') == 'audio'){\r\n        resources.audio = {ssrc: sourceSSRC, resolution: (sourceSSRC ? ssrc2resolution[sourceSSRC]: 'NaN')};\r\n      }else if($(sourceNode).attr('type') == 'video'){\r\n        resources.video ={ssrc: sourceSSRC, resolution: (sourceSSRC ? ssrc2resolution[sourceSSRC]: 'NaN')};\r\n      }else if($(sourceNode).attr('type') == 'screen'){\r\n        resources.screen = {ssrc: sourceSSRC, resolution: (sourceSSRC ? ssrc2resolution[sourceSSRC]: 'NaN')};\r\n      }\r\n    });\r\n    var participantPresence = {\r\n      from: from,\r\n      nickName: nickName,\r\n      configRole: configRole,\r\n      audioMuted: audioMuted,\r\n      videoMuted: videoMuted,\r\n      status: status,\r\n      mediaSources: resources,\r\n    };\r\n    $(document).trigger('manis.participant.status.update', [participantPresence]);\r\n    updateSSRC2Jid(pres, from);\r\n  }catch (e){\r\n    console.error('on presence.status error',e);\r\n  }\r\n\r\n});\r\n\r\nfunction updateSSRC2Jid(pres, jid) {\r\n  //  update\r\n  $(pres).find('media[xmlns=\"http://estos.de/ns/mjs\"]>source').each(function (idx, ssrc) {\r\n    var ssrcV = ssrc.getAttribute('ssrc');\r\n    ssrc2jid[ssrcV] = jid;\r\n    var type = ssrc.getAttribute('type');\r\n    ssrc2videoType[ssrcV] = type;\r\n    // console.log('======= ssrcV :', ssrcV, ' ========= ssrc2jid : ', ssrc2jid, ' ==== type : ', type, ' ==== ssrc2videoType: ', ssrc2videoType);\r\n  });\r\n  updateConnectQuality(pres, jid)\r\n}\r\n\r\nfunction updateConnectQuality(pres, from) {\r\n\r\n  var stats = $(pres).find('stats');\r\n  if (stats.length) {\r\n    var statsObj = {};\r\n    Strophe.forEachChild(stats[0], \"stat\", function (el) {\r\n      statsObj[el.getAttribute(\"name\")] = el.getAttribute(\"value\");\r\n    });\r\n    var videoSsrc = null;\r\n    var media = $(pres).find('media');\r\n    if (media.length) {\r\n      Strophe.forEachChild(media[0], \"source\", function (sel) {\r\n        var type = sel.getAttribute(\"type\");\r\n        if (type == 'video') {\r\n          videoSsrc = sel.getAttribute(\"ssrc\");\r\n        }\r\n      });\r\n    }\r\n    ConnectionQuality.updateRemoteStats(from, statsObj, videoSsrc);\r\n  }\r\n}\r\n\r\n$(document).bind('presence.muc', function (event, jid, info, pres) {\r\n\r\n  // Remove old ssrcs coming from the jid\r\n  Object.keys(ssrc2jid).forEach(function (ssrc) {\r\n    if (ssrc2jid[ssrc] == jid) {\r\n      delete ssrc2jid[ssrc];\r\n    }\r\n  });\r\n  updateSSRC2Jid(pres, jid);\r\n\r\n  if (window.participants.length > 0) {\r\n    for (var k = 0; k <= window.participants.length; k++) {\r\n      var p = window.participants[k];\r\n      if (p && p.resource === Strophe.getResourceFromJid(jid)) {\r\n        window.participants[k].nickname = info.displayName;\r\n        window.participants[k].jid = jid;\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\n$(document).bind('remotestreamadded.jingle', function (event,stream,ssrcObj) {\r\n    console.log(\"=============remotestreamadded.jingle=======222==========\",stream,ssrcObj);\r\n    var isVideo = stream.getVideoTracks().length > 0;\r\n    var isAudio = stream.getAudioTracks().length > 0;\r\n    if (isVideo) {\r\n        var videoStream = stream.clone();\r\n        videoStream.ssrc = ssrcObj.video.ssrc;\r\n        onRemoteVideoAdded(videoStream, ssrcObj.jid);\r\n    }\r\n    if(isAudio){\r\n        var audioStream = stream.clone();\r\n        audioStream.ssrc = ssrcObj.audio.ssrc;\r\n        onRemoteAudioAdded(audioStream, ssrcObj.jid);\r\n    }\r\n\r\n  // waitForPresence(data, sid, 0);\r\n\r\n  // onRemoteStreamAdded(data, sid);\r\n  // console.info('wait for pressnce ; data : ', data, ' sid : ', sid);\r\n  if(window.sendOnly == true){\r\n    $(document).trigger('sendonlydatachannelmsg.on.sourceadd');\r\n  }\r\n});\r\n\r\n/*function onRemoteStreamAdded(data, sid){\r\n  console.log('handle remote stream added : ', data, sid);\r\n  var stream = data.stream || null;\r\n  var streamSSRC = parseInt(stream.ssrc);\r\n  if(stream){\r\n    if(stream.id.indexOf('mixedmslabel') == -1){\r\n      console.warn('handle remote stream added mixedmslabel, ignore', stream, sid);\r\n    }else {\r\n      data = mapSSRC2Jid(data, sid);\r\n      var peerJid = data.peerjid || ssrc2jid[streamSSRC];\r\n      if(!peerJid){\r\n        console.warn('handle remote stream added without peerjid :', data, sid);\r\n        return true;\r\n      }\r\n      var mediaStream = new MediaStream(data, sid, streamSSRC);\r\n      if(mediaStream.type == 'Video'){\r\n        if(checkStreamTrackAlive(stream)){\r\n          var participant = {\r\n            info: ManisFunctions.getUserInfoByJid(peerJid),\r\n            stream: stream,\r\n            status: ManisFunctions.generateStatusNode(Strophe.getResourceFromJid(peerJid)),\r\n            hands_up: false\r\n          };\r\n          console.log(' video source added : ', data, sid, new Date().getTime());\r\n          $(document).trigger('manis.room.someone.joined', [participant]);\r\n        }else {\r\n          console.warn('remote video track not alive, try again after 500 ms');\r\n          setTimeout(function () {\r\n            onRemoteStreamAdded(data, sid);\r\n          }, 500);\r\n        }\r\n      }else if(mediaStream.type == 'Audio'){\r\n        if(checkStreamTrackAlive(stream)){\r\n          $(document).trigger('manis.room.someone.audio.added', [{\r\n            info: ManisFunctions.getUserInfoByJid(peerJid),\r\n            status: ManisFunctions.generateStatusNode(Strophe.getResourceFromJid(peerJid)),\r\n            stream: data.stream,\r\n            video_muted: true,\r\n            type: 'audio'\r\n          }]);\r\n        }else {\r\n          console.warn('remote audio track not alive, try again after 500 ms');\r\n          setTimeout(function () {\r\n            onRemoteStreamAdded(data, sid);\r\n          }, 500);\r\n        }\r\n      }else {\r\n        // unknown type stream\r\n        console.warn('handle unknown type stream: ', mediaStream);\r\n      }\r\n\r\n    }\r\n  }else {\r\n    console.warn('handle remote stream added, but without stream : ', data, sid);\r\n  }\r\n};\r\n\r\nfunction mapSSRC2Jid(data, sid) {\r\n  var sess = connection.jingle.sessions[sid];\r\n\r\n  var thessrc;\r\n  // look only at a=ssrc: and _not_ at a=ssrc-group: lines\r\n  var ssrclines\r\n    = SDPUtil.find_lines(sess.peerconnection.remoteDescription.sdp, 'a=ssrc:');\r\n  console.log('ssrclines: ', ssrclines);\r\n  ssrclines = ssrclines.filter(function (line) {\r\n    // console.info(\"============='msid:' + data.stream.id==========\"+'msid:' + data.stream.id);\r\n    return ((line.indexOf('msid:' + data.stream.id) !== -1));\r\n  });\r\n  if (ssrclines.length) {\r\n    console.log(' new ssrclines: ', ssrclines);\r\n    for(var i = 0; i < ssrclines.length; i++){\r\n      thessrc = ssrclines[i].substring(7).split(' ')[0];\r\n      console.log('associated jid', ssrc2jid[thessrc], data.peerjid);\r\n      if (ssrc2jid[thessrc]) {\r\n        data.peerjid = ssrc2jid[thessrc];\r\n      }\r\n    }\r\n  }\r\n  return data;\r\n}*/\r\n\r\nfunction checkStreamTrackAlive(stream){\r\n  // var track = stream.getTracks() ? stream.getTracks()[0] : null;\r\n  // if(track && track.readyState == 'live'){\r\n  //   return true;\r\n  // }\r\n  // console.warn('handle remote stream but track not alive', stream);\r\n  // return false;\r\n    return true;\r\n}\r\n\r\n$(document).bind('sendonlydatachannelmsg.on.sourceadd', function (event) {\r\n  sendOnly();\r\n});\r\n\r\nfunction sendOnly() {\r\n  if(window.sendOnly == true){\r\n    Status.sendOnlyChannelMsg(function (result) {\r\n      if(result.code != 200){\r\n        console.log('resent sendonly msg again after 1 second, mabay channel not ok');\r\n        setTimeout(sendOnly, 1000);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n$(document).bind('callincoming.jingle', function (event, sid) {\r\n  var sess = connection.jingle.sessions[sid];\r\n\r\n  activecall = sess;\r\n\r\n  Status.startRtpStatsCollector();\r\n  //*****************timing send presence to keep in conference.*****************\r\n  // ConnectionQuality.startSendingStats();\r\n\r\n  if (config.openSctp) {\r\n    DataChannel.bindDataChannelListener(sess.peerconnection);\r\n  }\r\n\r\n  // TODO: check affiliation and/or role\r\n  console.log('emuc data for', sess.peerjid, connection.emuc.members[sess.peerjid]);\r\n  sess.usedrip = true; // not-so-naive trickle ice\r\n  sess.sendAnswer();\r\n  // sess.accept();\r\n\r\n});\r\n\r\n$(document).bind('setLocalDescription.jingle', function (event, sid) {\r\n  // put our ssrcs into presence so other clients can identify our stream\r\n  var sess = connection.jingle.sessions[sid];\r\n  var newssrcs = [];\r\n  var media = simulcast.parseMedia(sess.peerconnection.localDescription);\r\n  media.forEach(function (media) {\r\n\r\n    if (Object.keys(media.sources).length > 0) {\r\n      // TODO(gp) maybe exclude FID streams?\r\n      Object.keys(media.sources).forEach(function (ssrc) {\r\n        newssrcs.push({\r\n          'ssrc': ssrc,\r\n          'type': media.type,\r\n          'direction': media.direction\r\n        });\r\n      });\r\n    }\r\n    else if (sess.localStreamsSSRC && sess.localStreamsSSRC[media.type]) {\r\n      newssrcs.push({\r\n        'ssrc': sess.localStreamsSSRC[media.type],\r\n        'type': media.type,\r\n        'direction': media.direction\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  console.log('new ssrcs : ', newssrcs);\r\n\r\n  // Have to clear presence map to get rid of removed streams\r\n  connection.emuc.clearPresenceMedia();\r\n\r\n  if (newssrcs.length > 0) {\r\n    if(window.localSSRCS.length <= 0){\r\n      window.localSSRCS = newssrcs;\r\n    }\r\n    for (var i = 1; i <= newssrcs.length; i++) {\r\n      // Change video type to screen\r\n      // if (newssrcs[i - 1].type === 'video') {\r\n      //   window.localStreamSSRC = newssrcs[i - 1].ssrc;\r\n      //   $(document).trigger('manis.local.stream.ssrc.update', [newssrcs[i - 1].ssrc, newssrcs[i - 1].type]);\r\n      // }\r\n      // if (newssrcs[i - 1].type === 'video' && isUsingScreenStream && i > 2) {\r\n      //   newssrcs[i - 1].type = 'screen';\r\n      // }\r\n\r\n      var newSSRC = newssrcs[i-1];\r\n      newSSRC.isOriginalExist = false;\r\n      if(window.localSSRCS.length){\r\n        for(var j = 0 ; j < window.localSSRCS.length; j++){\r\n          var perSSRC = window.localSSRCS[j];\r\n          if(perSSRC.ssrc == newSSRC.ssrc){\r\n            newSSRC.isOriginalExist = true;\r\n            newSSRC.type = perSSRC.type;\r\n            if(newSSRC.type == 'video'){\r\n              window.localStreamSSRC = newSSRC.ssrc;\r\n              $(document).trigger('manis.local.stream.ssrc.update', [newSSRC.ssrc, newSSRC.type]);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if(newSSRC.isOriginalExist == false && isUsingScreenStream){\r\n        newSSRC.type = 'screen';\r\n      }\r\n      connection.emuc.addMediaToPresence(i,\r\n        newSSRC.type, newSSRC.ssrc, newSSRC.direction);\r\n    }\r\n\r\n    connection.emuc.sendPresence();\r\n  }\r\n  state = false;\r\n});\r\n\r\n/**\r\n *\r\n * @param stream\r\n * @param jid\r\n */\r\nfunction onRemoteVideoAdded(stream, jid) {\r\n  var that = this;\r\n  var type = checkStreamIsScreen(stream,stream.ssrc);\r\n  stream.streamType = type;\r\n  if(checkStreamTrackAlive(stream)){\r\n    var participant = {\r\n      info: ManisFunctions.getUserInfoByJid(jid),\r\n      stream: stream,\r\n      status: ManisFunctions.generateStatusNode(Strophe.getResourceFromJid(jid)),\r\n      hands_up: false\r\n    };\r\n    console.log(' video source added : ',that, stream, new Date());\r\n    $(document).trigger('manis.room.someone.joined', [participant]);\r\n  }else {\r\n    setTimeout(function () {\r\n      onRemoteVideoAdded(stream, jid)\r\n    }, 500);\r\n  }\r\n\r\n}\r\n\r\n/**\r\n *\r\n * @param stream\r\n * @returns {string}\r\n */\r\nfunction checkStreamIsScreen(stream,ssrc) {\r\n  if(stream){\r\n    var ssrc = stream.ssrc || null;\r\n    if(ssrc == window.screenSSRC){\r\n      return 'screen';\r\n    }\r\n    return 'video';\r\n  }\r\n  return 'video';\r\n}\r\n\r\n/**\r\n *\r\n * @param stream\r\n * @param jid\r\n */\r\nfunction onRemoteAudioAdded(stream, jid) {\r\n  if(checkStreamTrackAlive(stream)){\r\n    console.log(' audio source added : ', stream, new Date());\r\n    $(document).trigger('manis.room.someone.audio.added', [{\r\n      info: ManisFunctions.getUserInfoByJid(jid),\r\n      status: ManisFunctions.generateStatusNode(Strophe.getResourceFromJid(jid)),\r\n      stream: stream,\r\n      video_muted: true,\r\n      type: 'audio'\r\n    }]);\r\n  }else {\r\n    setTimeout(function () {\r\n      onRemoteAudioAdded(stream, jid);\r\n    }, 500)\r\n  }\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/manis.events.js\n// module id = 57\n// module chunks = 0","/**\r\n * Provides a wrapper class for the MediaStream.\r\n *\r\n * TODO : Add here the src from the video element and other related properties\r\n * and get rid of some of the mappings that we use throughout the UI.\r\n */\r\nvar MediaStream = (function () {\r\n  /**\r\n   * Creates a MediaStream object for the given data, session id and ssrc.\r\n   *\r\n   * @param data the data object from which we obtain the stream,\r\n   * the peerjid, etc.\r\n   * @param sid the session id\r\n   * @param ssrc the ssrc corresponding to this MediaStream\r\n   *\r\n   * @constructor\r\n   */\r\n  function MediaStreamProto(data, sid, ssrc) {\r\n    this.stream = data.stream;\r\n    this.peerjid = data.peerjid;\r\n    this.ssrc = ssrc;\r\n    this.session = connection.jingle.sessions[sid];\r\n    this.type = (this.stream.getVideoTracks().length > 0)\r\n      ? MediaStream.VIDEO_TYPE : (this.stream.getAudioTracks().length > 0 ? MediaStream.AUDIO_TYPE : MediaStream.UNKNOWN_TYPE);\r\n    this.muted = false;\r\n  }\r\n\r\n  return MediaStreamProto;\r\n})();\r\n\r\nMediaStream.VIDEO_TYPE = 'Video';\r\nMediaStream.AUDIO_TYPE = 'Audio';\r\nMediaStream.UNKNOWN_TYPE = 'Unknown';\r\n\r\nexports = module.exports = MediaStream;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/libs/media_stream.js\n// module id = 58\n// module chunks = 0","/* global connection, Strophe, updateLargeVideo, focusedVideoSrc*/\r\n\r\n// cache datachannels to avoid garbage collection\r\n// https://code.google.com/p/chromium/issues/detail?id=405545\r\n\r\n\r\n/**\r\n * Callback triggered by PeerConnection when new data channel is opened\r\n * on the bridge.\r\n * @param event the event info object.\r\n */\r\nfunction onSelectedEndpointChanged(userJid) {\r\n  console.log('selected endpoint changed: ', userJid);\r\n\r\n  if (_dataChannels && _dataChannels.length != 0) {\r\n    _dataChannels.some(function (dataChannel) {\r\n      if (dataChannel.readyState == 'open') {\r\n        dataChannel.send(JSON.stringify({\r\n          'colibriClass': 'SelectedEndpointChangedEvent',\r\n          'selectedEndpoint': (!userJid || userJid == null)\r\n            ? null : userJid\r\n        }));\r\n\r\n        return true;\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n\r\nfunction onDataChannel(event) {\r\n  var dataChannel = event.channel;\r\n\r\n  //* dataChannel.onopen = function ()\r\n  //* {\r\n  //     console.info(\"Data channel opened by the Videobridge!\", dataChannel);\r\n\r\n  // Code sample for sending string and/or binary data\r\n  // Sends String message to the bridge\r\n  //dataChannel.send(\"Hello bridge!\");\r\n  // Sends 12 bytes binary message to the bridge\r\n  //dataChannel.send(new ArrayBuffer(12));\r\n\r\n  // when the data channel becomes available, tell the bridge about video\r\n  // selections so that it can do adaptive simulcast,\r\n  //* var userJid = VideoLayout.getLargeVideoState().userJid;\r\n  // we want the notification to trigger even if userJid is undefined,\r\n  // or null.\r\n  //* onSelectedEndpointChanged(userJid);\r\n  //* };\r\n\r\n  dataChannel.onerror = function (error) {\r\n    console.error(\"Data Channel Error:\", error, dataChannel);\r\n  };\r\n\r\n  dataChannel.onmessage = function (event) {\r\n    if (config.onStage) {\r\n      return;\r\n    }\r\n    var data = event.data;\r\n    // JSON\r\n    var obj;\r\n\r\n    try {\r\n      obj = JSON.parse(data);\r\n    }\r\n    catch (e) {\r\n      console.error(\r\n        \"Failed to parse data channel message as JSON: \",\r\n        data,\r\n        dataChannel);\r\n    }\r\n    if (('undefined' !== typeof(obj)) && (null !== obj)) {\r\n      var colibriClass = obj.colibriClass;\r\n\r\n      if (\"DominantSpeakerEndpointChangeEvent\" === colibriClass) {\r\n        // Endpoint ID from the Videobridge.\r\n        var dominantSpeakerEndpoint = obj.dominantSpeakerEndpoint;\r\n\r\n        console.info(\r\n          \"Data channel new dominant speaker event: \",\r\n          dominantSpeakerEndpoint);\r\n        //* if(!selectedSplitScrean){\r\n        //* $(document).trigger(\r\n        //*     'dominantspeakerchanged',\r\n        //*     [dominantSpeakerEndpoint]);\r\n        //* }\r\n      }\r\n      else if (\"InLastNChangeEvent\" === colibriClass) {\r\n        var oldValue = obj.oldValue;\r\n        var newValue = obj.newValue;\r\n        // Make sure that oldValue and newValue are of type boolean.\r\n        var type;\r\n\r\n        if ((type = typeof oldValue) !== 'boolean') {\r\n          if (type === 'string') {\r\n            oldValue = (oldValue == \"true\");\r\n          } else {\r\n            oldValue = new Boolean(oldValue).valueOf();\r\n          }\r\n        }\r\n        if ((type = typeof newValue) !== 'boolean') {\r\n          if (type === 'string') {\r\n            newValue = (newValue == \"true\");\r\n          } else {\r\n            newValue = new Boolean(newValue).valueOf();\r\n          }\r\n        }\r\n        $(document).trigger('inlastnchanged', [oldValue, newValue]);\r\n      }\r\n      else if (\"LastNEndpointsChangeEvent\" === colibriClass) {\r\n        // The new/latest list of last-n endpoint IDs.\r\n        var lastNEndpoints = obj.lastNEndpoints;\r\n        // The list of endpoint IDs which are entering the list of\r\n        // last-n at this time i.e. were not in the old list of last-n\r\n        // endpoint IDs.\r\n        var endpointsEnteringLastN = obj.endpointsEnteringLastN;\r\n        var stream = obj.stream;\r\n\r\n        console.log(\r\n          \"Data channel new last-n event: \",\r\n          lastNEndpoints, endpointsEnteringLastN, obj);\r\n        $(document).trigger(\r\n          'lastnchanged',\r\n          [lastNEndpoints, endpointsEnteringLastN, stream]);\r\n      }\r\n      else if (\"SimulcastLayersChangedEvent\" === colibriClass) {\r\n        $(document).trigger(\r\n          'simulcastlayerschanged',\r\n          [obj.endpointSimulcastLayers]);\r\n      }\r\n      else if (\"SimulcastLayersChangingEvent\" === colibriClass) {\r\n        $(document).trigger(\r\n          'simulcastlayerschanging',\r\n          [obj.endpointSimulcastLayers]);\r\n      }\r\n      else if (\"StartSimulcastLayerEvent\" === colibriClass) {\r\n        $(document).trigger('startsimulcastlayer', obj.simulcastLayer);\r\n      }\r\n      else if (\"StopSimulcastLayerEvent\" === colibriClass) {\r\n        $(document).trigger('stopsimulcastlayer', obj.simulcastLayer);\r\n      }\r\n      else {\r\n        console.debug(\"Data channel JSON-formatted message: \", obj);\r\n      }\r\n    }\r\n  };\r\n\r\n  dataChannel.onclose = function () {\r\n    console.info(\"The Data Channel closed\", dataChannel);\r\n    var idx = _dataChannels.indexOf(dataChannel);\r\n    if (idx > -1)\r\n      _dataChannels = _dataChannels.splice(idx, 1);\r\n  };\r\n  _dataChannels.push(dataChannel);\r\n}\r\n\r\n/**\r\n * Binds \"ondatachannel\" event listener to given PeerConnection instance.\r\n * @param peerConnection WebRTC peer connection instance.\r\n */\r\nexports.bindDataChannelListener = function (peerConnection) {\r\n  peerConnection.ondatachannel = onDataChannel;\r\n\r\n  // Sample code for opening new data channel from Jitsi Meet to the bridge.\r\n  // Although it's not a requirement to open separate channels from both bridge\r\n  // and peer as single channel can be used for sending and receiving data.\r\n  // So either channel opened by the bridge or the one opened here is enough\r\n  // for communication with the bridge.\r\n  /*\r\n   var dataChannelOptions = { reliable: true };\r\n   var dataChannel\r\n   = peerConnection.createDataChannel(\"myChannel\", dataChannelOptions);\r\n\r\n   // Can be used only when is in open state\r\n   dataChannel.onopen = function ()\r\n   {\r\n   dataChannel.send(\"My channel !!!\");\r\n   };\r\n   dataChannel.onmessage = function (event)\r\n   {\r\n   var msgData = event.data;\r\n   console.info(\"Got My Data Channel Message:\", msgData, dataChannel);\r\n   };\r\n   */\r\n}\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/libs/data_channels.js\n// module id = 59\n// module chunks = 0","var rng = require('./rng')\n\nfunction error () {\n  var m = [].slice.call(arguments).join(' ')\n  throw new Error([\n    m,\n    'we accept pull requests',\n    'http://github.com/dominictarr/crypto-browserify'\n    ].join('\\n'))\n}\n\nexports.createHash = require('./create-hash')\n\nexports.createHmac = require('./create-hmac')\n\nexports.randomBytes = function(size, callback) {\n  if (callback && callback.call) {\n    try {\n      callback.call(this, undefined, new Buffer(rng(size)))\n    } catch (err) { callback(err) }\n  } else {\n    return new Buffer(rng(size))\n  }\n}\n\nfunction each(a, f) {\n  for(var i in a)\n    f(a[i], i)\n}\n\nexports.getHashes = function () {\n  return ['sha1', 'sha256', 'sha512', 'md5', 'rmd160']\n}\n\nvar p = require('./pbkdf2')(exports)\nexports.pbkdf2 = p.pbkdf2\nexports.pbkdf2Sync = p.pbkdf2Sync\nrequire('browserify-aes/inject')(exports, module.exports);\n\n// the least I can do is make error messages for the rest of the node.js/crypto api.\neach(['createCredentials'\n, 'createSign'\n, 'createVerify'\n, 'createDiffieHellman'\n], function (name) {\n  exports[name] = function () {\n    error('sorry,', name, 'is not implemented yet')\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/crypto-browserify/index.js\n// module id = 60\n// module chunks = 0","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/buffer/index.js\n// module id = 61\n// module chunks = 0","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/base64-js/index.js\n// module id = 62\n// module chunks = 0","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ieee754/index.js\n// module id = 63\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/buffer/~/isarray/index.js\n// module id = 64\n// module chunks = 0","(function() {\n  var g = ('undefined' === typeof window ? global : window) || {}\n  _crypto = (\n    g.crypto || g.msCrypto || require('crypto')\n  )\n  module.exports = function(size) {\n    // Modern Browsers\n    if(_crypto.getRandomValues) {\n      var bytes = new Buffer(size); //in browserify, this is an extended Uint8Array\n      /* This will not work in older browsers.\n       * See https://developer.mozilla.org/en-US/docs/Web/API/window.crypto.getRandomValues\n       */\n    \n      _crypto.getRandomValues(bytes);\n      return bytes;\n    }\n    else if (_crypto.randomBytes) {\n      return _crypto.randomBytes(size)\n    }\n    else\n      throw new Error(\n        'secure random number generation not supported by this browser\\n'+\n        'use chrome, FireFox or Internet Explorer 11'\n      )\n  }\n}())\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/crypto-browserify/rng.js\n// module id = 65\n// module chunks = 0","var createHash = require('sha.js')\n\nvar md5 = toConstructor(require('./md5'))\nvar rmd160 = toConstructor(require('ripemd160'))\n\nfunction toConstructor (fn) {\n  return function () {\n    var buffers = []\n    var m= {\n      update: function (data, enc) {\n        if(!Buffer.isBuffer(data)) data = new Buffer(data, enc)\n        buffers.push(data)\n        return this\n      },\n      digest: function (enc) {\n        var buf = Buffer.concat(buffers)\n        var r = fn(buf)\n        buffers = null\n        return enc ? r.toString(enc) : r\n      }\n    }\n    return m\n  }\n}\n\nmodule.exports = function (alg) {\n  if('md5' === alg) return new md5()\n  if('rmd160' === alg) return new rmd160()\n  return createHash(alg)\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/crypto-browserify/create-hash.js\n// module id = 67\n// module chunks = 0","var exports = module.exports = function (alg) {\n  var Alg = exports[alg]\n  if(!Alg) throw new Error(alg + ' is not supported (we accept pull requests)')\n  return new Alg()\n}\n\nvar Buffer = require('buffer').Buffer\nvar Hash   = require('./hash')(Buffer)\n\nexports.sha1 = require('./sha1')(Buffer, Hash)\nexports.sha256 = require('./sha256')(Buffer, Hash)\nexports.sha512 = require('./sha512')(Buffer, Hash)\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sha.js/index.js\n// module id = 68\n// module chunks = 0","module.exports = function (Buffer) {\n\n  //prototype class for hash functions\n  function Hash (blockSize, finalSize) {\n    this._block = new Buffer(blockSize) //new Uint32Array(blockSize/4)\n    this._finalSize = finalSize\n    this._blockSize = blockSize\n    this._len = 0\n    this._s = 0\n  }\n\n  Hash.prototype.init = function () {\n    this._s = 0\n    this._len = 0\n  }\n\n  Hash.prototype.update = function (data, enc) {\n    if (\"string\" === typeof data) {\n      enc = enc || \"utf8\"\n      data = new Buffer(data, enc)\n    }\n\n    var l = this._len += data.length\n    var s = this._s = (this._s || 0)\n    var f = 0\n    var buffer = this._block\n\n    while (s < l) {\n      var t = Math.min(data.length, f + this._blockSize - (s % this._blockSize))\n      var ch = (t - f)\n\n      for (var i = 0; i < ch; i++) {\n        buffer[(s % this._blockSize) + i] = data[i + f]\n      }\n\n      s += ch\n      f += ch\n\n      if ((s % this._blockSize) === 0) {\n        this._update(buffer)\n      }\n    }\n    this._s = s\n\n    return this\n  }\n\n  Hash.prototype.digest = function (enc) {\n    // Suppose the length of the message M, in bits, is l\n    var l = this._len * 8\n\n    // Append the bit 1 to the end of the message\n    this._block[this._len % this._blockSize] = 0x80\n\n    // and then k zero bits, where k is the smallest non-negative solution to the equation (l + 1 + k) === finalSize mod blockSize\n    this._block.fill(0, this._len % this._blockSize + 1)\n\n    if (l % (this._blockSize * 8) >= this._finalSize * 8) {\n      this._update(this._block)\n      this._block.fill(0)\n    }\n\n    // to this append the block which is equal to the number l written in binary\n    // TODO: handle case where l is > Math.pow(2, 29)\n    this._block.writeInt32BE(l, this._blockSize - 4)\n\n    var hash = this._update(this._block) || this._hash()\n\n    return enc ? hash.toString(enc) : hash\n  }\n\n  Hash.prototype._update = function () {\n    throw new Error('_update must be implemented by subclass')\n  }\n\n  return Hash\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sha.js/hash.js\n// module id = 69\n// module chunks = 0","/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\nvar inherits = require('util').inherits\n\nmodule.exports = function (Buffer, Hash) {\n\n  var A = 0|0\n  var B = 4|0\n  var C = 8|0\n  var D = 12|0\n  var E = 16|0\n\n  var W = new (typeof Int32Array === 'undefined' ? Array : Int32Array)(80)\n\n  var POOL = []\n\n  function Sha1 () {\n    if(POOL.length)\n      return POOL.pop().init()\n\n    if(!(this instanceof Sha1)) return new Sha1()\n    this._w = W\n    Hash.call(this, 16*4, 14*4)\n\n    this._h = null\n    this.init()\n  }\n\n  inherits(Sha1, Hash)\n\n  Sha1.prototype.init = function () {\n    this._a = 0x67452301\n    this._b = 0xefcdab89\n    this._c = 0x98badcfe\n    this._d = 0x10325476\n    this._e = 0xc3d2e1f0\n\n    Hash.prototype.init.call(this)\n    return this\n  }\n\n  Sha1.prototype._POOL = POOL\n  Sha1.prototype._update = function (X) {\n\n    var a, b, c, d, e, _a, _b, _c, _d, _e\n\n    a = _a = this._a\n    b = _b = this._b\n    c = _c = this._c\n    d = _d = this._d\n    e = _e = this._e\n\n    var w = this._w\n\n    for(var j = 0; j < 80; j++) {\n      var W = w[j] = j < 16 ? X.readInt32BE(j*4)\n        : rol(w[j - 3] ^ w[j -  8] ^ w[j - 14] ^ w[j - 16], 1)\n\n      var t = add(\n        add(rol(a, 5), sha1_ft(j, b, c, d)),\n        add(add(e, W), sha1_kt(j))\n      )\n\n      e = d\n      d = c\n      c = rol(b, 30)\n      b = a\n      a = t\n    }\n\n    this._a = add(a, _a)\n    this._b = add(b, _b)\n    this._c = add(c, _c)\n    this._d = add(d, _d)\n    this._e = add(e, _e)\n  }\n\n  Sha1.prototype._hash = function () {\n    if(POOL.length < 100) POOL.push(this)\n    var H = new Buffer(20)\n    //console.log(this._a|0, this._b|0, this._c|0, this._d|0, this._e|0)\n    H.writeInt32BE(this._a|0, A)\n    H.writeInt32BE(this._b|0, B)\n    H.writeInt32BE(this._c|0, C)\n    H.writeInt32BE(this._d|0, D)\n    H.writeInt32BE(this._e|0, E)\n    return H\n  }\n\n  /*\n   * Perform the appropriate triplet combination function for the current\n   * iteration\n   */\n  function sha1_ft(t, b, c, d) {\n    if(t < 20) return (b & c) | ((~b) & d);\n    if(t < 40) return b ^ c ^ d;\n    if(t < 60) return (b & c) | (b & d) | (c & d);\n    return b ^ c ^ d;\n  }\n\n  /*\n   * Determine the appropriate additive constant for the current iteration\n   */\n  function sha1_kt(t) {\n    return (t < 20) ?  1518500249 : (t < 40) ?  1859775393 :\n           (t < 60) ? -1894007588 : -899497514;\n  }\n\n  /*\n   * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n   * to work around bugs in some JS interpreters.\n   * //dominictarr: this is 10 years old, so maybe this can be dropped?)\n   *\n   */\n  function add(x, y) {\n    return (x + y ) | 0\n  //lets see how this goes on testling.\n  //  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n  //  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  //  return (msw << 16) | (lsw & 0xFFFF);\n  }\n\n  /*\n   * Bitwise rotate a 32-bit number to the left.\n   */\n  function rol(num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt));\n  }\n\n  return Sha1\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sha.js/sha1.js\n// module id = 70\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/util/util.js\n// module id = 71\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 72\n// module chunks = 0","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/util/support/isBufferBrowser.js\n// module id = 73\n// module chunks = 0","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/util/~/inherits/inherits_browser.js\n// module id = 74\n// module chunks = 0","\n/**\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined\n * in FIPS 180-2\n * Version 2.2-beta Copyright Angel Marin, Paul Johnston 2000 - 2009.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n *\n */\n\nvar inherits = require('util').inherits\n\nmodule.exports = function (Buffer, Hash) {\n\n  var K = [\n      0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5,\n      0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5,\n      0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,\n      0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174,\n      0xE49B69C1, 0xEFBE4786, 0x0FC19DC6, 0x240CA1CC,\n      0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,\n      0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7,\n      0xC6E00BF3, 0xD5A79147, 0x06CA6351, 0x14292967,\n      0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,\n      0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85,\n      0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3,\n      0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,\n      0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5,\n      0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3,\n      0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,\n      0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2\n    ]\n\n  var W = new Array(64)\n\n  function Sha256() {\n    this.init()\n\n    this._w = W //new Array(64)\n\n    Hash.call(this, 16*4, 14*4)\n  }\n\n  inherits(Sha256, Hash)\n\n  Sha256.prototype.init = function () {\n\n    this._a = 0x6a09e667|0\n    this._b = 0xbb67ae85|0\n    this._c = 0x3c6ef372|0\n    this._d = 0xa54ff53a|0\n    this._e = 0x510e527f|0\n    this._f = 0x9b05688c|0\n    this._g = 0x1f83d9ab|0\n    this._h = 0x5be0cd19|0\n\n    this._len = this._s = 0\n\n    return this\n  }\n\n  function S (X, n) {\n    return (X >>> n) | (X << (32 - n));\n  }\n\n  function R (X, n) {\n    return (X >>> n);\n  }\n\n  function Ch (x, y, z) {\n    return ((x & y) ^ ((~x) & z));\n  }\n\n  function Maj (x, y, z) {\n    return ((x & y) ^ (x & z) ^ (y & z));\n  }\n\n  function Sigma0256 (x) {\n    return (S(x, 2) ^ S(x, 13) ^ S(x, 22));\n  }\n\n  function Sigma1256 (x) {\n    return (S(x, 6) ^ S(x, 11) ^ S(x, 25));\n  }\n\n  function Gamma0256 (x) {\n    return (S(x, 7) ^ S(x, 18) ^ R(x, 3));\n  }\n\n  function Gamma1256 (x) {\n    return (S(x, 17) ^ S(x, 19) ^ R(x, 10));\n  }\n\n  Sha256.prototype._update = function(M) {\n\n    var W = this._w\n    var a, b, c, d, e, f, g, h\n    var T1, T2\n\n    a = this._a | 0\n    b = this._b | 0\n    c = this._c | 0\n    d = this._d | 0\n    e = this._e | 0\n    f = this._f | 0\n    g = this._g | 0\n    h = this._h | 0\n\n    for (var j = 0; j < 64; j++) {\n      var w = W[j] = j < 16\n        ? M.readInt32BE(j * 4)\n        : Gamma1256(W[j - 2]) + W[j - 7] + Gamma0256(W[j - 15]) + W[j - 16]\n\n      T1 = h + Sigma1256(e) + Ch(e, f, g) + K[j] + w\n\n      T2 = Sigma0256(a) + Maj(a, b, c);\n      h = g; g = f; f = e; e = d + T1; d = c; c = b; b = a; a = T1 + T2;\n    }\n\n    this._a = (a + this._a) | 0\n    this._b = (b + this._b) | 0\n    this._c = (c + this._c) | 0\n    this._d = (d + this._d) | 0\n    this._e = (e + this._e) | 0\n    this._f = (f + this._f) | 0\n    this._g = (g + this._g) | 0\n    this._h = (h + this._h) | 0\n\n  };\n\n  Sha256.prototype._hash = function () {\n    var H = new Buffer(32)\n\n    H.writeInt32BE(this._a,  0)\n    H.writeInt32BE(this._b,  4)\n    H.writeInt32BE(this._c,  8)\n    H.writeInt32BE(this._d, 12)\n    H.writeInt32BE(this._e, 16)\n    H.writeInt32BE(this._f, 20)\n    H.writeInt32BE(this._g, 24)\n    H.writeInt32BE(this._h, 28)\n\n    return H\n  }\n\n  return Sha256\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sha.js/sha256.js\n// module id = 75\n// module chunks = 0","var inherits = require('util').inherits\n\nmodule.exports = function (Buffer, Hash) {\n  var K = [\n    0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n    0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n    0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n    0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n    0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n    0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n    0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n    0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n    0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n    0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n    0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n    0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n    0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n    0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n    0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n    0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n    0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n    0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n    0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n    0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n    0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n    0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n    0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n    0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n    0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n    0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n    0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n    0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n    0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n    0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n    0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n    0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n    0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n    0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n    0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n    0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n    0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n    0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n    0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n    0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n  ]\n\n  var W = new Array(160)\n\n  function Sha512() {\n    this.init()\n    this._w = W\n\n    Hash.call(this, 128, 112)\n  }\n\n  inherits(Sha512, Hash)\n\n  Sha512.prototype.init = function () {\n\n    this._a = 0x6a09e667|0\n    this._b = 0xbb67ae85|0\n    this._c = 0x3c6ef372|0\n    this._d = 0xa54ff53a|0\n    this._e = 0x510e527f|0\n    this._f = 0x9b05688c|0\n    this._g = 0x1f83d9ab|0\n    this._h = 0x5be0cd19|0\n\n    this._al = 0xf3bcc908|0\n    this._bl = 0x84caa73b|0\n    this._cl = 0xfe94f82b|0\n    this._dl = 0x5f1d36f1|0\n    this._el = 0xade682d1|0\n    this._fl = 0x2b3e6c1f|0\n    this._gl = 0xfb41bd6b|0\n    this._hl = 0x137e2179|0\n\n    this._len = this._s = 0\n\n    return this\n  }\n\n  function S (X, Xl, n) {\n    return (X >>> n) | (Xl << (32 - n))\n  }\n\n  function Ch (x, y, z) {\n    return ((x & y) ^ ((~x) & z));\n  }\n\n  function Maj (x, y, z) {\n    return ((x & y) ^ (x & z) ^ (y & z));\n  }\n\n  Sha512.prototype._update = function(M) {\n\n    var W = this._w\n    var a, b, c, d, e, f, g, h\n    var al, bl, cl, dl, el, fl, gl, hl\n\n    a = this._a | 0\n    b = this._b | 0\n    c = this._c | 0\n    d = this._d | 0\n    e = this._e | 0\n    f = this._f | 0\n    g = this._g | 0\n    h = this._h | 0\n\n    al = this._al | 0\n    bl = this._bl | 0\n    cl = this._cl | 0\n    dl = this._dl | 0\n    el = this._el | 0\n    fl = this._fl | 0\n    gl = this._gl | 0\n    hl = this._hl | 0\n\n    for (var i = 0; i < 80; i++) {\n      var j = i * 2\n\n      var Wi, Wil\n\n      if (i < 16) {\n        Wi = W[j] = M.readInt32BE(j * 4)\n        Wil = W[j + 1] = M.readInt32BE(j * 4 + 4)\n\n      } else {\n        var x  = W[j - 15*2]\n        var xl = W[j - 15*2 + 1]\n        var gamma0  = S(x, xl, 1) ^ S(x, xl, 8) ^ (x >>> 7)\n        var gamma0l = S(xl, x, 1) ^ S(xl, x, 8) ^ S(xl, x, 7)\n\n        x  = W[j - 2*2]\n        xl = W[j - 2*2 + 1]\n        var gamma1  = S(x, xl, 19) ^ S(xl, x, 29) ^ (x >>> 6)\n        var gamma1l = S(xl, x, 19) ^ S(x, xl, 29) ^ S(xl, x, 6)\n\n        // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\n        var Wi7  = W[j - 7*2]\n        var Wi7l = W[j - 7*2 + 1]\n\n        var Wi16  = W[j - 16*2]\n        var Wi16l = W[j - 16*2 + 1]\n\n        Wil = gamma0l + Wi7l\n        Wi  = gamma0  + Wi7 + ((Wil >>> 0) < (gamma0l >>> 0) ? 1 : 0)\n        Wil = Wil + gamma1l\n        Wi  = Wi  + gamma1  + ((Wil >>> 0) < (gamma1l >>> 0) ? 1 : 0)\n        Wil = Wil + Wi16l\n        Wi  = Wi  + Wi16 + ((Wil >>> 0) < (Wi16l >>> 0) ? 1 : 0)\n\n        W[j] = Wi\n        W[j + 1] = Wil\n      }\n\n      var maj = Maj(a, b, c)\n      var majl = Maj(al, bl, cl)\n\n      var sigma0h = S(a, al, 28) ^ S(al, a, 2) ^ S(al, a, 7)\n      var sigma0l = S(al, a, 28) ^ S(a, al, 2) ^ S(a, al, 7)\n      var sigma1h = S(e, el, 14) ^ S(e, el, 18) ^ S(el, e, 9)\n      var sigma1l = S(el, e, 14) ^ S(el, e, 18) ^ S(e, el, 9)\n\n      // t1 = h + sigma1 + ch + K[i] + W[i]\n      var Ki = K[j]\n      var Kil = K[j + 1]\n\n      var ch = Ch(e, f, g)\n      var chl = Ch(el, fl, gl)\n\n      var t1l = hl + sigma1l\n      var t1 = h + sigma1h + ((t1l >>> 0) < (hl >>> 0) ? 1 : 0)\n      t1l = t1l + chl\n      t1 = t1 + ch + ((t1l >>> 0) < (chl >>> 0) ? 1 : 0)\n      t1l = t1l + Kil\n      t1 = t1 + Ki + ((t1l >>> 0) < (Kil >>> 0) ? 1 : 0)\n      t1l = t1l + Wil\n      t1 = t1 + Wi + ((t1l >>> 0) < (Wil >>> 0) ? 1 : 0)\n\n      // t2 = sigma0 + maj\n      var t2l = sigma0l + majl\n      var t2 = sigma0h + maj + ((t2l >>> 0) < (sigma0l >>> 0) ? 1 : 0)\n\n      h  = g\n      hl = gl\n      g  = f\n      gl = fl\n      f  = e\n      fl = el\n      el = (dl + t1l) | 0\n      e  = (d + t1 + ((el >>> 0) < (dl >>> 0) ? 1 : 0)) | 0\n      d  = c\n      dl = cl\n      c  = b\n      cl = bl\n      b  = a\n      bl = al\n      al = (t1l + t2l) | 0\n      a  = (t1 + t2 + ((al >>> 0) < (t1l >>> 0) ? 1 : 0)) | 0\n    }\n\n    this._al = (this._al + al) | 0\n    this._bl = (this._bl + bl) | 0\n    this._cl = (this._cl + cl) | 0\n    this._dl = (this._dl + dl) | 0\n    this._el = (this._el + el) | 0\n    this._fl = (this._fl + fl) | 0\n    this._gl = (this._gl + gl) | 0\n    this._hl = (this._hl + hl) | 0\n\n    this._a = (this._a + a + ((this._al >>> 0) < (al >>> 0) ? 1 : 0)) | 0\n    this._b = (this._b + b + ((this._bl >>> 0) < (bl >>> 0) ? 1 : 0)) | 0\n    this._c = (this._c + c + ((this._cl >>> 0) < (cl >>> 0) ? 1 : 0)) | 0\n    this._d = (this._d + d + ((this._dl >>> 0) < (dl >>> 0) ? 1 : 0)) | 0\n    this._e = (this._e + e + ((this._el >>> 0) < (el >>> 0) ? 1 : 0)) | 0\n    this._f = (this._f + f + ((this._fl >>> 0) < (fl >>> 0) ? 1 : 0)) | 0\n    this._g = (this._g + g + ((this._gl >>> 0) < (gl >>> 0) ? 1 : 0)) | 0\n    this._h = (this._h + h + ((this._hl >>> 0) < (hl >>> 0) ? 1 : 0)) | 0\n  }\n\n  Sha512.prototype._hash = function () {\n    var H = new Buffer(64)\n\n    function writeInt64BE(h, l, offset) {\n      H.writeInt32BE(h, offset)\n      H.writeInt32BE(l, offset + 4)\n    }\n\n    writeInt64BE(this._a, this._al, 0)\n    writeInt64BE(this._b, this._bl, 8)\n    writeInt64BE(this._c, this._cl, 16)\n    writeInt64BE(this._d, this._dl, 24)\n    writeInt64BE(this._e, this._el, 32)\n    writeInt64BE(this._f, this._fl, 40)\n    writeInt64BE(this._g, this._gl, 48)\n    writeInt64BE(this._h, this._hl, 56)\n\n    return H\n  }\n\n  return Sha512\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/sha.js/sha512.js\n// module id = 76\n// module chunks = 0","/*\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.1 Copyright (C) Paul Johnston 1999 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\nvar helpers = require('./helpers');\n\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length\n */\nfunction core_md5(x, len)\n{\n  /* append padding */\n  x[len >> 5] |= 0x80 << ((len) % 32);\n  x[(((len + 64) >>> 9) << 4) + 14] = len;\n\n  var a =  1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d =  271733878;\n\n  for(var i = 0; i < x.length; i += 16)\n  {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n\n    a = md5_ff(a, b, c, d, x[i+ 0], 7 , -680876936);\n    d = md5_ff(d, a, b, c, x[i+ 1], 12, -389564586);\n    c = md5_ff(c, d, a, b, x[i+ 2], 17,  606105819);\n    b = md5_ff(b, c, d, a, x[i+ 3], 22, -1044525330);\n    a = md5_ff(a, b, c, d, x[i+ 4], 7 , -176418897);\n    d = md5_ff(d, a, b, c, x[i+ 5], 12,  1200080426);\n    c = md5_ff(c, d, a, b, x[i+ 6], 17, -1473231341);\n    b = md5_ff(b, c, d, a, x[i+ 7], 22, -45705983);\n    a = md5_ff(a, b, c, d, x[i+ 8], 7 ,  1770035416);\n    d = md5_ff(d, a, b, c, x[i+ 9], 12, -1958414417);\n    c = md5_ff(c, d, a, b, x[i+10], 17, -42063);\n    b = md5_ff(b, c, d, a, x[i+11], 22, -1990404162);\n    a = md5_ff(a, b, c, d, x[i+12], 7 ,  1804603682);\n    d = md5_ff(d, a, b, c, x[i+13], 12, -40341101);\n    c = md5_ff(c, d, a, b, x[i+14], 17, -1502002290);\n    b = md5_ff(b, c, d, a, x[i+15], 22,  1236535329);\n\n    a = md5_gg(a, b, c, d, x[i+ 1], 5 , -165796510);\n    d = md5_gg(d, a, b, c, x[i+ 6], 9 , -1069501632);\n    c = md5_gg(c, d, a, b, x[i+11], 14,  643717713);\n    b = md5_gg(b, c, d, a, x[i+ 0], 20, -373897302);\n    a = md5_gg(a, b, c, d, x[i+ 5], 5 , -701558691);\n    d = md5_gg(d, a, b, c, x[i+10], 9 ,  38016083);\n    c = md5_gg(c, d, a, b, x[i+15], 14, -660478335);\n    b = md5_gg(b, c, d, a, x[i+ 4], 20, -405537848);\n    a = md5_gg(a, b, c, d, x[i+ 9], 5 ,  568446438);\n    d = md5_gg(d, a, b, c, x[i+14], 9 , -1019803690);\n    c = md5_gg(c, d, a, b, x[i+ 3], 14, -187363961);\n    b = md5_gg(b, c, d, a, x[i+ 8], 20,  1163531501);\n    a = md5_gg(a, b, c, d, x[i+13], 5 , -1444681467);\n    d = md5_gg(d, a, b, c, x[i+ 2], 9 , -51403784);\n    c = md5_gg(c, d, a, b, x[i+ 7], 14,  1735328473);\n    b = md5_gg(b, c, d, a, x[i+12], 20, -1926607734);\n\n    a = md5_hh(a, b, c, d, x[i+ 5], 4 , -378558);\n    d = md5_hh(d, a, b, c, x[i+ 8], 11, -2022574463);\n    c = md5_hh(c, d, a, b, x[i+11], 16,  1839030562);\n    b = md5_hh(b, c, d, a, x[i+14], 23, -35309556);\n    a = md5_hh(a, b, c, d, x[i+ 1], 4 , -1530992060);\n    d = md5_hh(d, a, b, c, x[i+ 4], 11,  1272893353);\n    c = md5_hh(c, d, a, b, x[i+ 7], 16, -155497632);\n    b = md5_hh(b, c, d, a, x[i+10], 23, -1094730640);\n    a = md5_hh(a, b, c, d, x[i+13], 4 ,  681279174);\n    d = md5_hh(d, a, b, c, x[i+ 0], 11, -358537222);\n    c = md5_hh(c, d, a, b, x[i+ 3], 16, -722521979);\n    b = md5_hh(b, c, d, a, x[i+ 6], 23,  76029189);\n    a = md5_hh(a, b, c, d, x[i+ 9], 4 , -640364487);\n    d = md5_hh(d, a, b, c, x[i+12], 11, -421815835);\n    c = md5_hh(c, d, a, b, x[i+15], 16,  530742520);\n    b = md5_hh(b, c, d, a, x[i+ 2], 23, -995338651);\n\n    a = md5_ii(a, b, c, d, x[i+ 0], 6 , -198630844);\n    d = md5_ii(d, a, b, c, x[i+ 7], 10,  1126891415);\n    c = md5_ii(c, d, a, b, x[i+14], 15, -1416354905);\n    b = md5_ii(b, c, d, a, x[i+ 5], 21, -57434055);\n    a = md5_ii(a, b, c, d, x[i+12], 6 ,  1700485571);\n    d = md5_ii(d, a, b, c, x[i+ 3], 10, -1894986606);\n    c = md5_ii(c, d, a, b, x[i+10], 15, -1051523);\n    b = md5_ii(b, c, d, a, x[i+ 1], 21, -2054922799);\n    a = md5_ii(a, b, c, d, x[i+ 8], 6 ,  1873313359);\n    d = md5_ii(d, a, b, c, x[i+15], 10, -30611744);\n    c = md5_ii(c, d, a, b, x[i+ 6], 15, -1560198380);\n    b = md5_ii(b, c, d, a, x[i+13], 21,  1309151649);\n    a = md5_ii(a, b, c, d, x[i+ 4], 6 , -145523070);\n    d = md5_ii(d, a, b, c, x[i+11], 10, -1120210379);\n    c = md5_ii(c, d, a, b, x[i+ 2], 15,  718787259);\n    b = md5_ii(b, c, d, a, x[i+ 9], 21, -343485551);\n\n    a = safe_add(a, olda);\n    b = safe_add(b, oldb);\n    c = safe_add(c, oldc);\n    d = safe_add(d, oldd);\n  }\n  return Array(a, b, c, d);\n\n}\n\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\nfunction md5_cmn(q, a, b, x, s, t)\n{\n  return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s),b);\n}\nfunction md5_ff(a, b, c, d, x, s, t)\n{\n  return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n}\nfunction md5_gg(a, b, c, d, x, s, t)\n{\n  return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n}\nfunction md5_hh(a, b, c, d, x, s, t)\n{\n  return md5_cmn(b ^ c ^ d, a, b, x, s, t);\n}\nfunction md5_ii(a, b, c, d, x, s, t)\n{\n  return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n}\n\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\nfunction safe_add(x, y)\n{\n  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return (msw << 16) | (lsw & 0xFFFF);\n}\n\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\nfunction bit_rol(num, cnt)\n{\n  return (num << cnt) | (num >>> (32 - cnt));\n}\n\nmodule.exports = function md5(buf) {\n  return helpers.hash(buf, core_md5, 16);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/crypto-browserify/md5.js\n// module id = 77\n// module chunks = 0","var intSize = 4;\nvar zeroBuffer = new Buffer(intSize); zeroBuffer.fill(0);\nvar chrsz = 8;\n\nfunction toArray(buf, bigEndian) {\n  if ((buf.length % intSize) !== 0) {\n    var len = buf.length + (intSize - (buf.length % intSize));\n    buf = Buffer.concat([buf, zeroBuffer], len);\n  }\n\n  var arr = [];\n  var fn = bigEndian ? buf.readInt32BE : buf.readInt32LE;\n  for (var i = 0; i < buf.length; i += intSize) {\n    arr.push(fn.call(buf, i));\n  }\n  return arr;\n}\n\nfunction toBuffer(arr, size, bigEndian) {\n  var buf = new Buffer(size);\n  var fn = bigEndian ? buf.writeInt32BE : buf.writeInt32LE;\n  for (var i = 0; i < arr.length; i++) {\n    fn.call(buf, arr[i], i * 4, true);\n  }\n  return buf;\n}\n\nfunction hash(buf, fn, hashSize, bigEndian) {\n  if (!Buffer.isBuffer(buf)) buf = new Buffer(buf);\n  var arr = fn(toArray(buf, bigEndian), buf.length * chrsz);\n  return toBuffer(arr, hashSize, bigEndian);\n}\n\nmodule.exports = { hash: hash };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/crypto-browserify/helpers.js\n// module id = 78\n// module chunks = 0","\nmodule.exports = ripemd160\n\n\n\n/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\n/** @preserve\n(c) 2012 by Cédric Mesnil. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\n    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n// Constants table\nvar zl = [\n    0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15,\n    7,  4, 13,  1, 10,  6, 15,  3, 12,  0,  9,  5,  2, 14, 11,  8,\n    3, 10, 14,  4,  9, 15,  8,  1,  2,  7,  0,  6, 13, 11,  5, 12,\n    1,  9, 11, 10,  0,  8, 12,  4, 13,  3,  7, 15, 14,  5,  6,  2,\n    4,  0,  5,  9,  7, 12,  2, 10, 14,  1,  3,  8, 11,  6, 15, 13];\nvar zr = [\n    5, 14,  7,  0,  9,  2, 11,  4, 13,  6, 15,  8,  1, 10,  3, 12,\n    6, 11,  3,  7,  0, 13,  5, 10, 14, 15,  8, 12,  4,  9,  1,  2,\n    15,  5,  1,  3,  7, 14,  6,  9, 11,  8, 12,  2, 10,  0,  4, 13,\n    8,  6,  4,  1,  3, 11, 15,  0,  5, 12,  2, 13,  9,  7, 10, 14,\n    12, 15, 10,  4,  1,  5,  8,  7,  6,  2, 13, 14,  0,  3,  9, 11];\nvar sl = [\n     11, 14, 15, 12,  5,  8,  7,  9, 11, 13, 14, 15,  6,  7,  9,  8,\n    7, 6,   8, 13, 11,  9,  7, 15,  7, 12, 15,  9, 11,  7, 13, 12,\n    11, 13,  6,  7, 14,  9, 13, 15, 14,  8, 13,  6,  5, 12,  7,  5,\n      11, 12, 14, 15, 14, 15,  9,  8,  9, 14,  5,  6,  8,  6,  5, 12,\n    9, 15,  5, 11,  6,  8, 13, 12,  5, 12, 13, 14, 11,  8,  5,  6 ];\nvar sr = [\n    8,  9,  9, 11, 13, 15, 15,  5,  7,  7,  8, 11, 14, 14, 12,  6,\n    9, 13, 15,  7, 12,  8,  9, 11,  7,  7, 12,  7,  6, 15, 13, 11,\n    9,  7, 15, 11,  8,  6,  6, 14, 12, 13,  5, 14, 13, 13,  7,  5,\n    15,  5,  8, 11, 14, 14,  6, 14,  6,  9, 12,  9, 12,  5, 15,  8,\n    8,  5, 12,  9, 12,  5, 14,  6,  8, 13,  6,  5, 15, 13, 11, 11 ];\n\nvar hl =  [ 0x00000000, 0x5A827999, 0x6ED9EBA1, 0x8F1BBCDC, 0xA953FD4E];\nvar hr =  [ 0x50A28BE6, 0x5C4DD124, 0x6D703EF3, 0x7A6D76E9, 0x00000000];\n\nvar bytesToWords = function (bytes) {\n  var words = [];\n  for (var i = 0, b = 0; i < bytes.length; i++, b += 8) {\n    words[b >>> 5] |= bytes[i] << (24 - b % 32);\n  }\n  return words;\n};\n\nvar wordsToBytes = function (words) {\n  var bytes = [];\n  for (var b = 0; b < words.length * 32; b += 8) {\n    bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n  }\n  return bytes;\n};\n\nvar processBlock = function (H, M, offset) {\n\n  // Swap endian\n  for (var i = 0; i < 16; i++) {\n    var offset_i = offset + i;\n    var M_offset_i = M[offset_i];\n\n    // Swap\n    M[offset_i] = (\n        (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n        (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n    );\n  }\n\n  // Working variables\n  var al, bl, cl, dl, el;\n  var ar, br, cr, dr, er;\n\n  ar = al = H[0];\n  br = bl = H[1];\n  cr = cl = H[2];\n  dr = dl = H[3];\n  er = el = H[4];\n  // Computation\n  var t;\n  for (var i = 0; i < 80; i += 1) {\n    t = (al +  M[offset+zl[i]])|0;\n    if (i<16){\n        t +=  f1(bl,cl,dl) + hl[0];\n    } else if (i<32) {\n        t +=  f2(bl,cl,dl) + hl[1];\n    } else if (i<48) {\n        t +=  f3(bl,cl,dl) + hl[2];\n    } else if (i<64) {\n        t +=  f4(bl,cl,dl) + hl[3];\n    } else {// if (i<80) {\n        t +=  f5(bl,cl,dl) + hl[4];\n    }\n    t = t|0;\n    t =  rotl(t,sl[i]);\n    t = (t+el)|0;\n    al = el;\n    el = dl;\n    dl = rotl(cl, 10);\n    cl = bl;\n    bl = t;\n\n    t = (ar + M[offset+zr[i]])|0;\n    if (i<16){\n        t +=  f5(br,cr,dr) + hr[0];\n    } else if (i<32) {\n        t +=  f4(br,cr,dr) + hr[1];\n    } else if (i<48) {\n        t +=  f3(br,cr,dr) + hr[2];\n    } else if (i<64) {\n        t +=  f2(br,cr,dr) + hr[3];\n    } else {// if (i<80) {\n        t +=  f1(br,cr,dr) + hr[4];\n    }\n    t = t|0;\n    t =  rotl(t,sr[i]) ;\n    t = (t+er)|0;\n    ar = er;\n    er = dr;\n    dr = rotl(cr, 10);\n    cr = br;\n    br = t;\n  }\n  // Intermediate hash value\n  t    = (H[1] + cl + dr)|0;\n  H[1] = (H[2] + dl + er)|0;\n  H[2] = (H[3] + el + ar)|0;\n  H[3] = (H[4] + al + br)|0;\n  H[4] = (H[0] + bl + cr)|0;\n  H[0] =  t;\n};\n\nfunction f1(x, y, z) {\n  return ((x) ^ (y) ^ (z));\n}\n\nfunction f2(x, y, z) {\n  return (((x)&(y)) | ((~x)&(z)));\n}\n\nfunction f3(x, y, z) {\n  return (((x) | (~(y))) ^ (z));\n}\n\nfunction f4(x, y, z) {\n  return (((x) & (z)) | ((y)&(~(z))));\n}\n\nfunction f5(x, y, z) {\n  return ((x) ^ ((y) |(~(z))));\n}\n\nfunction rotl(x,n) {\n  return (x<<n) | (x>>>(32-n));\n}\n\nfunction ripemd160(message) {\n  var H = [0x67452301, 0xEFCDAB89, 0x98BADCFE, 0x10325476, 0xC3D2E1F0];\n\n  if (typeof message == 'string')\n    message = new Buffer(message, 'utf8');\n\n  var m = bytesToWords(message);\n\n  var nBitsLeft = message.length * 8;\n  var nBitsTotal = message.length * 8;\n\n  // Add padding\n  m[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n  m[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n      (((nBitsTotal << 8)  | (nBitsTotal >>> 24)) & 0x00ff00ff) |\n      (((nBitsTotal << 24) | (nBitsTotal >>> 8))  & 0xff00ff00)\n  );\n\n  for (var i=0 ; i<m.length; i += 16) {\n    processBlock(H, m, i);\n  }\n\n  // Swap endian\n  for (var i = 0; i < 5; i++) {\n      // Shortcut\n    var H_i = H[i];\n\n    // Swap\n    H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n          (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n  }\n\n  var digestbytes = wordsToBytes(H);\n  return new Buffer(digestbytes);\n}\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ripemd160/lib/ripemd160.js\n// module id = 79\n// module chunks = 0","var createHash = require('./create-hash')\n\nvar zeroBuffer = new Buffer(128)\nzeroBuffer.fill(0)\n\nmodule.exports = Hmac\n\nfunction Hmac (alg, key) {\n  if(!(this instanceof Hmac)) return new Hmac(alg, key)\n  this._opad = opad\n  this._alg = alg\n\n  var blocksize = (alg === 'sha512') ? 128 : 64\n\n  key = this._key = !Buffer.isBuffer(key) ? new Buffer(key) : key\n\n  if(key.length > blocksize) {\n    key = createHash(alg).update(key).digest()\n  } else if(key.length < blocksize) {\n    key = Buffer.concat([key, zeroBuffer], blocksize)\n  }\n\n  var ipad = this._ipad = new Buffer(blocksize)\n  var opad = this._opad = new Buffer(blocksize)\n\n  for(var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36\n    opad[i] = key[i] ^ 0x5C\n  }\n\n  this._hash = createHash(alg).update(ipad)\n}\n\nHmac.prototype.update = function (data, enc) {\n  this._hash.update(data, enc)\n  return this\n}\n\nHmac.prototype.digest = function (enc) {\n  var h = this._hash.digest()\n  return createHash(this._alg).update(this._opad).update(h).digest(enc)\n}\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/crypto-browserify/create-hmac.js\n// module id = 80\n// module chunks = 0","var pbkdf2Export = require('pbkdf2-compat/pbkdf2')\n\nmodule.exports = function (crypto, exports) {\n  exports = exports || {}\n\n  var exported = pbkdf2Export(crypto)\n\n  exports.pbkdf2 = exported.pbkdf2\n  exports.pbkdf2Sync = exported.pbkdf2Sync\n\n  return exports\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/crypto-browserify/pbkdf2.js\n// module id = 81\n// module chunks = 0","module.exports = function(crypto) {\n  function pbkdf2(password, salt, iterations, keylen, digest, callback) {\n    if ('function' === typeof digest) {\n      callback = digest\n      digest = undefined\n    }\n\n    if ('function' !== typeof callback)\n      throw new Error('No callback provided to pbkdf2')\n\n    setTimeout(function() {\n      var result\n\n      try {\n        result = pbkdf2Sync(password, salt, iterations, keylen, digest)\n      } catch (e) {\n        return callback(e)\n      }\n\n      callback(undefined, result)\n    })\n  }\n\n  function pbkdf2Sync(password, salt, iterations, keylen, digest) {\n    if ('number' !== typeof iterations)\n      throw new TypeError('Iterations not a number')\n\n    if (iterations < 0)\n      throw new TypeError('Bad iterations')\n\n    if ('number' !== typeof keylen)\n      throw new TypeError('Key length not a number')\n\n    if (keylen < 0)\n      throw new TypeError('Bad key length')\n\n    digest = digest || 'sha1'\n\n    if (!Buffer.isBuffer(password)) password = new Buffer(password)\n    if (!Buffer.isBuffer(salt)) salt = new Buffer(salt)\n\n    var hLen, l = 1, r, T\n    var DK = new Buffer(keylen)\n    var block1 = new Buffer(salt.length + 4)\n    salt.copy(block1, 0, 0, salt.length)\n\n    for (var i = 1; i <= l; i++) {\n      block1.writeUInt32BE(i, salt.length)\n\n      var U = crypto.createHmac(digest, password).update(block1).digest()\n\n      if (!hLen) {\n        hLen = U.length\n        T = new Buffer(hLen)\n        l = Math.ceil(keylen / hLen)\n        r = keylen - (l - 1) * hLen\n\n        if (keylen > (Math.pow(2, 32) - 1) * hLen)\n          throw new TypeError('keylen exceeds maximum length')\n      }\n\n      U.copy(T, 0, 0, hLen)\n\n      for (var j = 1; j < iterations; j++) {\n        U = crypto.createHmac(digest, password).update(U).digest()\n\n        for (var k = 0; k < hLen; k++) {\n          T[k] ^= U[k]\n        }\n      }\n\n      var destPos = (i - 1) * hLen\n      var len = (i == l ? r : hLen)\n      T.copy(DK, destPos, 0, len)\n    }\n\n    return DK\n  }\n\n  return {\n    pbkdf2: pbkdf2,\n    pbkdf2Sync: pbkdf2Sync\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pbkdf2-compat/pbkdf2.js\n// module id = 82\n// module chunks = 0","module.exports = function (crypto, exports) {\n  exports = exports || {};\n  var ciphers = require('./encrypter')(crypto);\n  exports.createCipher = ciphers.createCipher;\n  exports.createCipheriv = ciphers.createCipheriv;\n  var deciphers = require('./decrypter')(crypto);\n  exports.createDecipher = deciphers.createDecipher;\n  exports.createDecipheriv = deciphers.createDecipheriv;\n  var modes = require('./modes');\n  function listCiphers () {\n    return Object.keys(modes);\n  }\n  exports.listCiphers = listCiphers;\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/inject.js\n// module id = 83\n// module chunks = 0","var aes = require('./aes');\nvar Transform = require('./cipherBase');\nvar inherits = require('inherits');\nvar modes = require('./modes');\nvar ebtk = require('./EVP_BytesToKey');\nvar StreamCipher = require('./streamCipher');\ninherits(Cipher, Transform);\nfunction Cipher(mode, key, iv) {\n  if (!(this instanceof Cipher)) {\n    return new Cipher(mode, key, iv);\n  }\n  Transform.call(this);\n  this._cache = new Splitter();\n  this._cipher = new aes.AES(key);\n  this._prev = new Buffer(iv.length);\n  iv.copy(this._prev);\n  this._mode = mode;\n}\nCipher.prototype._transform = function (data, _, next) {\n  this._cache.add(data);\n  var chunk;\n  var thing;\n  while ((chunk = this._cache.get())) {\n    thing = this._mode.encrypt(this, chunk);\n    this.push(thing);\n  }\n  next();\n};\nCipher.prototype._flush = function (next) {\n  var chunk = this._cache.flush();\n  this.push(this._mode.encrypt(this, chunk));\n  this._cipher.scrub();\n  next();\n};\n\n\nfunction Splitter() {\n   if (!(this instanceof Splitter)) {\n    return new Splitter();\n  }\n  this.cache = new Buffer('');\n}\nSplitter.prototype.add = function (data) {\n  this.cache = Buffer.concat([this.cache, data]);\n};\n\nSplitter.prototype.get = function () {\n  if (this.cache.length > 15) {\n    var out = this.cache.slice(0, 16);\n    this.cache = this.cache.slice(16);\n    return out;\n  }\n  return null;\n};\nSplitter.prototype.flush = function () {\n  var len = 16 - this.cache.length;\n  var padBuff = new Buffer(len);\n\n  var i = -1;\n  while (++i < len) {\n    padBuff.writeUInt8(len, i);\n  }\n  var out = Buffer.concat([this.cache, padBuff]);\n  return out;\n};\nvar modelist = {\n  ECB: require('./modes/ecb'),\n  CBC: require('./modes/cbc'),\n  CFB: require('./modes/cfb'),\n  OFB: require('./modes/ofb'),\n  CTR: require('./modes/ctr')\n};\nmodule.exports = function (crypto) {\n  function createCipheriv(suite, password, iv) {\n    var config = modes[suite];\n    if (!config) {\n      throw new TypeError('invalid suite type');\n    }\n    if (typeof iv === 'string') {\n      iv = new Buffer(iv);\n    }\n    if (typeof password === 'string') {\n      password = new Buffer(password);\n    }\n    if (password.length !== config.key/8) {\n      throw new TypeError('invalid key length ' + password.length);\n    }\n    if (iv.length !== config.iv) {\n      throw new TypeError('invalid iv length ' + iv.length);\n    }\n    if (config.type === 'stream') {\n      return new StreamCipher(modelist[config.mode], password, iv);\n    }\n    return new Cipher(modelist[config.mode], password, iv);\n  }\n  function createCipher (suite, password) {\n    var config = modes[suite];\n    if (!config) {\n      throw new TypeError('invalid suite type');\n    }\n    var keys = ebtk(crypto, password, config.key, config.iv);\n    return createCipheriv(suite, keys.key, keys.iv);\n  }\n  return {\n    createCipher: createCipher,\n    createCipheriv: createCipheriv\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/encrypter.js\n// module id = 84\n// module chunks = 0","var uint_max = Math.pow(2, 32);\nfunction fixup_uint32(x) {\n    var ret, x_pos;\n    ret = x > uint_max || x < 0 ? (x_pos = Math.abs(x) % uint_max, x < 0 ? uint_max - x_pos : x_pos) : x;\n    return ret;\n}\nfunction scrub_vec(v) {\n  var i, _i, _ref;\n  for (i = _i = 0, _ref = v.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n    v[i] = 0;\n  }\n  return false;\n}\n\nfunction Global() {\n  var i;\n  this.SBOX = [];\n  this.INV_SBOX = [];\n  this.SUB_MIX = (function() {\n    var _i, _results;\n    _results = [];\n    for (i = _i = 0; _i < 4; i = ++_i) {\n      _results.push([]);\n    }\n    return _results;\n  })();\n  this.INV_SUB_MIX = (function() {\n    var _i, _results;\n    _results = [];\n    for (i = _i = 0; _i < 4; i = ++_i) {\n      _results.push([]);\n    }\n    return _results;\n  })();\n  this.init();\n  this.RCON = [0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36];\n}\n\nGlobal.prototype.init = function() {\n  var d, i, sx, t, x, x2, x4, x8, xi, _i;\n  d = (function() {\n    var _i, _results;\n    _results = [];\n    for (i = _i = 0; _i < 256; i = ++_i) {\n      if (i < 128) {\n        _results.push(i << 1);\n      } else {\n        _results.push((i << 1) ^ 0x11b);\n      }\n    }\n    return _results;\n  })();\n  x = 0;\n  xi = 0;\n  for (i = _i = 0; _i < 256; i = ++_i) {\n    sx = xi ^ (xi << 1) ^ (xi << 2) ^ (xi << 3) ^ (xi << 4);\n    sx = (sx >>> 8) ^ (sx & 0xff) ^ 0x63;\n    this.SBOX[x] = sx;\n    this.INV_SBOX[sx] = x;\n    x2 = d[x];\n    x4 = d[x2];\n    x8 = d[x4];\n    t = (d[sx] * 0x101) ^ (sx * 0x1010100);\n    this.SUB_MIX[0][x] = (t << 24) | (t >>> 8);\n    this.SUB_MIX[1][x] = (t << 16) | (t >>> 16);\n    this.SUB_MIX[2][x] = (t << 8) | (t >>> 24);\n    this.SUB_MIX[3][x] = t;\n    t = (x8 * 0x1010101) ^ (x4 * 0x10001) ^ (x2 * 0x101) ^ (x * 0x1010100);\n    this.INV_SUB_MIX[0][sx] = (t << 24) | (t >>> 8);\n    this.INV_SUB_MIX[1][sx] = (t << 16) | (t >>> 16);\n    this.INV_SUB_MIX[2][sx] = (t << 8) | (t >>> 24);\n    this.INV_SUB_MIX[3][sx] = t;\n    if (x === 0) {\n      x = xi = 1;\n    } else {\n      x = x2 ^ d[d[d[x8 ^ x2]]];\n      xi ^= d[d[xi]];\n    }\n  }\n  return true;\n};\n\nvar G = new Global();\n\n\nAES.blockSize = 4 * 4;\n\nAES.prototype.blockSize = AES.blockSize;\n\nAES.keySize = 256 / 8;\n\nAES.prototype.keySize = AES.keySize;\n\nAES.ivSize = AES.blockSize;\n\nAES.prototype.ivSize = AES.ivSize;\n\n function bufferToArray(buf) {\n  var len = buf.length/4;\n  var out = new Array(len);\n  var i = -1;\n  while (++i < len) {\n    out[i] = buf.readUInt32BE(i * 4);\n  }\n  return out;\n }\nfunction AES(key) {\n  this._key = bufferToArray(key);\n  this._doReset();\n}\n\nAES.prototype._doReset = function() {\n  var invKsRow, keySize, keyWords, ksRow, ksRows, t, _i, _j;\n  keyWords = this._key;\n  keySize = keyWords.length;\n  this._nRounds = keySize + 6;\n  ksRows = (this._nRounds + 1) * 4;\n  this._keySchedule = [];\n  for (ksRow = _i = 0; 0 <= ksRows ? _i < ksRows : _i > ksRows; ksRow = 0 <= ksRows ? ++_i : --_i) {\n    this._keySchedule[ksRow] = ksRow < keySize ? keyWords[ksRow] : (t = this._keySchedule[ksRow - 1], (ksRow % keySize) === 0 ? (t = (t << 8) | (t >>> 24), t = (G.SBOX[t >>> 24] << 24) | (G.SBOX[(t >>> 16) & 0xff] << 16) | (G.SBOX[(t >>> 8) & 0xff] << 8) | G.SBOX[t & 0xff], t ^= G.RCON[(ksRow / keySize) | 0] << 24) : keySize > 6 && ksRow % keySize === 4 ? t = (G.SBOX[t >>> 24] << 24) | (G.SBOX[(t >>> 16) & 0xff] << 16) | (G.SBOX[(t >>> 8) & 0xff] << 8) | G.SBOX[t & 0xff] : void 0, this._keySchedule[ksRow - keySize] ^ t);\n  }\n  this._invKeySchedule = [];\n  for (invKsRow = _j = 0; 0 <= ksRows ? _j < ksRows : _j > ksRows; invKsRow = 0 <= ksRows ? ++_j : --_j) {\n    ksRow = ksRows - invKsRow;\n    t = this._keySchedule[ksRow - (invKsRow % 4 ? 0 : 4)];\n    this._invKeySchedule[invKsRow] = invKsRow < 4 || ksRow <= 4 ? t : G.INV_SUB_MIX[0][G.SBOX[t >>> 24]] ^ G.INV_SUB_MIX[1][G.SBOX[(t >>> 16) & 0xff]] ^ G.INV_SUB_MIX[2][G.SBOX[(t >>> 8) & 0xff]] ^ G.INV_SUB_MIX[3][G.SBOX[t & 0xff]];\n  }\n  return true;\n};\n\nAES.prototype.encryptBlock = function(M) {\n  M = bufferToArray(new Buffer(M));\n  var out = this._doCryptBlock(M, this._keySchedule, G.SUB_MIX, G.SBOX);\n  var buf = new Buffer(16);\n  buf.writeUInt32BE(out[0], 0);\n  buf.writeUInt32BE(out[1], 4);\n  buf.writeUInt32BE(out[2], 8);\n  buf.writeUInt32BE(out[3], 12);\n  return buf;\n};\n\nAES.prototype.decryptBlock = function(M) {\n  M = bufferToArray(new Buffer(M));\n  var temp = [M[3], M[1]];\n  M[1] = temp[0];\n  M[3] = temp[1];\n  var out = this._doCryptBlock(M, this._invKeySchedule, G.INV_SUB_MIX, G.INV_SBOX);\n  var buf = new Buffer(16);\n  buf.writeUInt32BE(out[0], 0);\n  buf.writeUInt32BE(out[3], 4);\n  buf.writeUInt32BE(out[2], 8);\n  buf.writeUInt32BE(out[1], 12);\n  return buf;\n};\n\nAES.prototype.scrub = function() {\n  scrub_vec(this._keySchedule);\n  scrub_vec(this._invKeySchedule);\n  scrub_vec(this._key);\n};\n\nAES.prototype._doCryptBlock = function(M, keySchedule, SUB_MIX, SBOX) {\n  var ksRow, round, s0, s1, s2, s3, t0, t1, t2, t3, _i, _ref;\n\n  s0 = M[0] ^ keySchedule[0];\n  s1 = M[1] ^ keySchedule[1];\n  s2 = M[2] ^ keySchedule[2];\n  s3 = M[3] ^ keySchedule[3];\n  ksRow = 4;\n  for (round = _i = 1, _ref = this._nRounds; 1 <= _ref ? _i < _ref : _i > _ref; round = 1 <= _ref ? ++_i : --_i) {\n    t0 = SUB_MIX[0][s0 >>> 24] ^ SUB_MIX[1][(s1 >>> 16) & 0xff] ^ SUB_MIX[2][(s2 >>> 8) & 0xff] ^ SUB_MIX[3][s3 & 0xff] ^ keySchedule[ksRow++];\n    t1 = SUB_MIX[0][s1 >>> 24] ^ SUB_MIX[1][(s2 >>> 16) & 0xff] ^ SUB_MIX[2][(s3 >>> 8) & 0xff] ^ SUB_MIX[3][s0 & 0xff] ^ keySchedule[ksRow++];\n    t2 = SUB_MIX[0][s2 >>> 24] ^ SUB_MIX[1][(s3 >>> 16) & 0xff] ^ SUB_MIX[2][(s0 >>> 8) & 0xff] ^ SUB_MIX[3][s1 & 0xff] ^ keySchedule[ksRow++];\n    t3 = SUB_MIX[0][s3 >>> 24] ^ SUB_MIX[1][(s0 >>> 16) & 0xff] ^ SUB_MIX[2][(s1 >>> 8) & 0xff] ^ SUB_MIX[3][s2 & 0xff] ^ keySchedule[ksRow++];\n    s0 = t0;\n    s1 = t1;\n    s2 = t2;\n    s3 = t3;\n  }\n  t0 = ((SBOX[s0 >>> 24] << 24) | (SBOX[(s1 >>> 16) & 0xff] << 16) | (SBOX[(s2 >>> 8) & 0xff] << 8) | SBOX[s3 & 0xff]) ^ keySchedule[ksRow++];\n  t1 = ((SBOX[s1 >>> 24] << 24) | (SBOX[(s2 >>> 16) & 0xff] << 16) | (SBOX[(s3 >>> 8) & 0xff] << 8) | SBOX[s0 & 0xff]) ^ keySchedule[ksRow++];\n  t2 = ((SBOX[s2 >>> 24] << 24) | (SBOX[(s3 >>> 16) & 0xff] << 16) | (SBOX[(s0 >>> 8) & 0xff] << 8) | SBOX[s1 & 0xff]) ^ keySchedule[ksRow++];\n  t3 = ((SBOX[s3 >>> 24] << 24) | (SBOX[(s0 >>> 16) & 0xff] << 16) | (SBOX[(s1 >>> 8) & 0xff] << 8) | SBOX[s2 & 0xff]) ^ keySchedule[ksRow++];\n  return [\n    fixup_uint32(t0),\n    fixup_uint32(t1),\n    fixup_uint32(t2),\n    fixup_uint32(t3)\n  ];\n\n};\n\n\n\n\n  exports.AES = AES;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/aes.js\n// module id = 85\n// module chunks = 0","var Transform = require('stream').Transform;\nvar inherits = require('inherits');\n\nmodule.exports = CipherBase;\ninherits(CipherBase, Transform);\nfunction CipherBase() {\n  Transform.call(this);\n}\nCipherBase.prototype.update = function (data, inputEnd, outputEnc) {\n  this.write(data, inputEnd);\n  var outData = new Buffer('');\n  var chunk;\n  while ((chunk = this.read())) {\n    outData = Buffer.concat([outData, chunk]);\n  }\n  if (outputEnc) {\n    outData = outData.toString(outputEnc);\n  }\n  return outData;\n};\nCipherBase.prototype.final = function (outputEnc) {\n  this.end();\n  var outData = new Buffer('');\n  var chunk;\n  while ((chunk = this.read())) {\n    outData = Buffer.concat([outData, chunk]);\n  }\n  if (outputEnc) {\n    outData = outData.toString(outputEnc);\n  }\n  return outData;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/cipherBase.js\n// module id = 86\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable.js');\nStream.Writable = require('readable-stream/writable.js');\nStream.Duplex = require('readable-stream/duplex.js');\nStream.Transform = require('readable-stream/transform.js');\nStream.PassThrough = require('readable-stream/passthrough.js');\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/stream-browserify/index.js\n// module id = 87\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/node-libs-browser/~/events/events.js\n// module id = 88\n// module chunks = 0","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/inherits/inherits_browser.js\n// module id = 89\n// module chunks = 0","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/readable-browser.js\n// module id = 90\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/lib/_stream_readable.js\n// module id = 91\n// module chunks = 0","'use strict';\n\nif (!process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process-nextick-args/index.js\n// module id = 92\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/~/isarray/index.js\n// module id = 93\n// module chunks = 0","module.exports = require('events').EventEmitter;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/lib/internal/streams/stream-browser.js\n// module id = 94\n// module chunks = 0","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/safe-buffer/index.js\n// module id = 95\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-util-is/lib/util.js\n// module id = 96\n// module chunks = 0","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/lib/internal/streams/BufferList.js\n// module id = 98\n// module chunks = 0","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/lib/internal/streams/destroy.js\n// module id = 100\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/lib/_stream_duplex.js\n// module id = 101\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/lib/_stream_writable.js\n// module id = 102\n// module chunks = 0","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/timers-browserify/main.js\n// module id = 103\n// module chunks = 0","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/setimmediate/setImmediate.js\n// module id = 104\n// module chunks = 0","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/util-deprecate/browser.js\n// module id = 105\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/string_decoder/lib/string_decoder.js\n// module id = 106\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/lib/_stream_transform.js\n// module id = 107\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/lib/_stream_passthrough.js\n// module id = 108\n// module chunks = 0","module.exports = require('./lib/_stream_writable.js');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/writable-browser.js\n// module id = 109\n// module chunks = 0","module.exports = require('./lib/_stream_duplex.js');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/duplex-browser.js\n// module id = 110\n// module chunks = 0","module.exports = require('./readable').Transform\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/transform.js\n// module id = 111\n// module chunks = 0","module.exports = require('./readable').PassThrough\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/readable-stream/passthrough.js\n// module id = 112\n// module chunks = 0","exports['aes-128-ecb'] = {\n  cipher: 'AES',\n  key: 128,\n  iv: 0,\n  mode: 'ECB',\n  type: 'block'\n};\nexports['aes-192-ecb'] = {\n  cipher: 'AES',\n  key: 192,\n  iv: 0,\n  mode: 'ECB',\n  type: 'block'\n};\nexports['aes-256-ecb'] = {\n  cipher: 'AES',\n  key: 256,\n  iv: 0,\n  mode: 'ECB',\n  type: 'block'\n};\nexports['aes-128-cbc'] = {\n  cipher: 'AES',\n  key: 128,\n  iv: 16,\n  mode: 'CBC',\n  type: 'block'\n};\nexports['aes-192-cbc'] = {\n  cipher: 'AES',\n  key: 192,\n  iv: 16,\n  mode: 'CBC',\n  type: 'block'\n};\nexports['aes-256-cbc'] = {\n  cipher: 'AES',\n  key: 256,\n  iv: 16,\n  mode: 'CBC',\n  type: 'block'\n};\nexports['aes128'] = exports['aes-128-cbc'];\nexports['aes192'] = exports['aes-192-cbc'];\nexports['aes256'] = exports['aes-256-cbc'];\nexports['aes-128-cfb'] = {\n  cipher: 'AES',\n  key: 128,\n  iv: 16,\n  mode: 'CFB',\n  type: 'stream'\n};\nexports['aes-192-cfb'] = {\n  cipher: 'AES',\n  key: 192,\n  iv: 16,\n  mode: 'CFB',\n  type: 'stream'\n};\nexports['aes-256-cfb'] = {\n  cipher: 'AES',\n  key: 256,\n  iv: 16,\n  mode: 'CFB',\n  type: 'stream'\n};\nexports['aes-128-ofb'] = {\n  cipher: 'AES',\n  key: 128,\n  iv: 16,\n  mode: 'OFB',\n  type: 'stream'\n};\nexports['aes-192-ofb'] = {\n  cipher: 'AES',\n  key: 192,\n  iv: 16,\n  mode: 'OFB',\n  type: 'stream'\n};\nexports['aes-256-ofb'] = {\n  cipher: 'AES',\n  key: 256,\n  iv: 16,\n  mode: 'OFB',\n  type: 'stream'\n};\nexports['aes-128-ctr'] = {\n  cipher: 'AES',\n  key: 128,\n  iv: 16,\n  mode: 'CTR',\n  type: 'stream'\n};\nexports['aes-192-ctr'] = {\n  cipher: 'AES',\n  key: 192,\n  iv: 16,\n  mode: 'CTR',\n  type: 'stream'\n};\nexports['aes-256-ctr'] = {\n  cipher: 'AES',\n  key: 256,\n  iv: 16,\n  mode: 'CTR',\n  type: 'stream'\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/modes.js\n// module id = 113\n// module chunks = 0","\nmodule.exports = function (crypto, password, keyLen, ivLen) {\n  keyLen = keyLen/8;\n  ivLen = ivLen || 0;\n  var ki = 0;\n  var ii = 0;\n  var key = new Buffer(keyLen);\n  var iv = new Buffer(ivLen);\n  var addmd = 0;\n  var md, md_buf;\n  var i;\n  while (true) {\n    md = crypto.createHash('md5');\n    if(addmd++ > 0) {\n       md.update(md_buf);\n    }\n    md.update(password);\n    md_buf = md.digest();\n    i = 0;\n    if(keyLen > 0) {\n      while(true) {\n        if(keyLen === 0) {\n          break;\n        }\n        if(i === md_buf.length) {\n          break;\n        }\n        key[ki++] = md_buf[i];\n        keyLen--;\n        i++;\n       }\n    }\n    if(ivLen > 0 && i !== md_buf.length) {\n      while(true) {\n        if(ivLen === 0) {\n          break;\n        }\n        if(i === md_buf.length) {\n          break;\n        }\n       iv[ii++] = md_buf[i];\n       ivLen--;\n       i++;\n     }\n   }\n   if(keyLen === 0 && ivLen === 0) {\n      break;\n    }\n  }\n  for(i=0;i<md_buf.length;i++) {\n    md_buf[i] = 0;\n  }\n  return {\n    key: key,\n    iv: iv\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/EVP_BytesToKey.js\n// module id = 114\n// module chunks = 0","var aes = require('./aes');\nvar Transform = require('./cipherBase');\nvar inherits = require('inherits');\n\ninherits(StreamCipher, Transform);\nmodule.exports = StreamCipher;\nfunction StreamCipher(mode, key, iv, decrypt) {\n  if (!(this instanceof StreamCipher)) {\n    return new StreamCipher(mode, key, iv);\n  }\n  Transform.call(this);\n  this._cipher = new aes.AES(key);\n  this._prev = new Buffer(iv.length);\n  this._cache = new Buffer('');\n  this._secCache = new Buffer('');\n  this._decrypt = decrypt;\n  iv.copy(this._prev);\n  this._mode = mode;\n}\nStreamCipher.prototype._transform = function (chunk, _, next) {\n  next(null, this._mode.encrypt(this, chunk, this._decrypt));\n};\nStreamCipher.prototype._flush = function (next) {\n  this._cipher.scrub();\n  next();\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/streamCipher.js\n// module id = 115\n// module chunks = 0","exports.encrypt = function (self, block) {\n  return self._cipher.encryptBlock(block);\n};\nexports.decrypt = function (self, block) {\n  return self._cipher.decryptBlock(block);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/modes/ecb.js\n// module id = 116\n// module chunks = 0","var xor = require('../xor');\nexports.encrypt = function (self, block) {\n  var data = xor(block, self._prev);\n  self._prev = self._cipher.encryptBlock(data);\n  return self._prev;\n};\nexports.decrypt = function (self, block) {\n  var pad = self._prev;\n  self._prev = block;\n  var out = self._cipher.decryptBlock(block);\n  return xor(out, pad);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/modes/cbc.js\n// module id = 117\n// module chunks = 0","module.exports = xor;\nfunction xor(a, b) {\n  var len = Math.min(a.length, b.length);\n  var out = new Buffer(len);\n  var i = -1;\n  while (++i < len) {\n    out.writeUInt8(a[i] ^ b[i], i);\n  }\n  return out;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/xor.js\n// module id = 118\n// module chunks = 0","var xor = require('../xor');\nexports.encrypt = function (self, data, decrypt) {\n  var out = new Buffer('');\n  var len;\n  while (data.length) {\n    if (self._cache.length === 0) {\n      self._cache = self._cipher.encryptBlock(self._prev);\n      self._prev = new Buffer('');\n    }\n    if (self._cache.length <= data.length) {\n      len = self._cache.length;\n      out = Buffer.concat([out, encryptStart(self, data.slice(0, len), decrypt)]);\n      data = data.slice(len);\n    } else {\n      out = Buffer.concat([out, encryptStart(self, data, decrypt)]);\n      break;\n    }\n  }\n  return out;\n};\nfunction encryptStart(self, data, decrypt) {\n  var len = data.length;\n  var out = xor(data, self._cache);\n  self._cache = self._cache.slice(len);\n  self._prev = Buffer.concat([self._prev, decrypt?data:out]);\n  return out;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/modes/cfb.js\n// module id = 119\n// module chunks = 0","var xor = require('../xor');\nfunction getBlock(self) {\n  self._prev = self._cipher.encryptBlock(self._prev);\n  return self._prev;\n}\nexports.encrypt = function (self, chunk) {\n  while (self._cache.length < chunk.length) {\n    self._cache = Buffer.concat([self._cache, getBlock(self)]);\n  }\n  var pad = self._cache.slice(0, chunk.length);\n  self._cache = self._cache.slice(chunk.length);\n  return xor(chunk, pad);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/modes/ofb.js\n// module id = 120\n// module chunks = 0","var xor = require('../xor');\nfunction getBlock(self) {\n  var out = self._cipher.encryptBlock(self._prev);\n  incr32(self._prev);\n  return out;\n}\nexports.encrypt = function (self, chunk) {\n  while (self._cache.length < chunk.length) {\n    self._cache = Buffer.concat([self._cache, getBlock(self)]);\n  }\n  var pad = self._cache.slice(0, chunk.length);\n  self._cache = self._cache.slice(chunk.length);\n  return xor(chunk, pad);\n};\nfunction incr32(iv) {\n  var len = iv.length;\n  var item;\n  while (len--) {\n    item = iv.readUInt8(len);\n    if (item === 255) {\n      iv.writeUInt8(0, len);\n    } else {\n      item++;\n      iv.writeUInt8(item, len);\n      break;\n    }\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/modes/ctr.js\n// module id = 121\n// module chunks = 0","var aes = require('./aes');\nvar Transform = require('./cipherBase');\nvar inherits = require('inherits');\nvar modes = require('./modes');\nvar StreamCipher = require('./streamCipher');\nvar ebtk = require('./EVP_BytesToKey');\n\ninherits(Decipher, Transform);\nfunction Decipher(mode, key, iv) {\n  if (!(this instanceof Decipher)) {\n    return new Decipher(mode, key, iv);\n  }\n  Transform.call(this);\n  this._cache = new Splitter();\n  this._last = void 0;\n  this._cipher = new aes.AES(key);\n  this._prev = new Buffer(iv.length);\n  iv.copy(this._prev);\n  this._mode = mode;\n}\nDecipher.prototype._transform = function (data, _, next) {\n  this._cache.add(data);\n  var chunk;\n  var thing;\n  while ((chunk = this._cache.get())) {\n    thing = this._mode.decrypt(this, chunk);\n    this.push(thing);\n  }\n  next();\n};\nDecipher.prototype._flush = function (next) {\n  var chunk = this._cache.flush();\n  if (!chunk) {\n    return next;\n  }\n\n  this.push(unpad(this._mode.decrypt(this, chunk)));\n\n  next();\n};\n\nfunction Splitter() {\n   if (!(this instanceof Splitter)) {\n    return new Splitter();\n  }\n  this.cache = new Buffer('');\n}\nSplitter.prototype.add = function (data) {\n  this.cache = Buffer.concat([this.cache, data]);\n};\n\nSplitter.prototype.get = function () {\n  if (this.cache.length > 16) {\n    var out = this.cache.slice(0, 16);\n    this.cache = this.cache.slice(16);\n    return out;\n  }\n  return null;\n};\nSplitter.prototype.flush = function () {\n  if (this.cache.length) {\n    return this.cache;\n  }\n};\nfunction unpad(last) {\n  var padded = last[15];\n  if (padded === 16) {\n    return;\n  }\n  return last.slice(0, 16 - padded);\n}\n\nvar modelist = {\n  ECB: require('./modes/ecb'),\n  CBC: require('./modes/cbc'),\n  CFB: require('./modes/cfb'),\n  OFB: require('./modes/ofb'),\n  CTR: require('./modes/ctr')\n};\n\nmodule.exports = function (crypto) {\n  function createDecipheriv(suite, password, iv) {\n    var config = modes[suite];\n    if (!config) {\n      throw new TypeError('invalid suite type');\n    }\n    if (typeof iv === 'string') {\n      iv = new Buffer(iv);\n    }\n    if (typeof password === 'string') {\n      password = new Buffer(password);\n    }\n    if (password.length !== config.key/8) {\n      throw new TypeError('invalid key length ' + password.length);\n    }\n    if (iv.length !== config.iv) {\n      throw new TypeError('invalid iv length ' + iv.length);\n    }\n    if (config.type === 'stream') {\n      return new StreamCipher(modelist[config.mode], password, iv, true);\n    }\n    return new Decipher(modelist[config.mode], password, iv);\n  }\n\n  function createDecipher (suite, password) {\n    var config = modes[suite];\n    if (!config) {\n      throw new TypeError('invalid suite type');\n    }\n    var keys = ebtk(crypto, password, config.key, config.iv);\n    return createDecipheriv(suite, keys.key, keys.iv);\n  }\n  return {\n    createDecipher: createDecipher,\n    createDecipheriv: createDecipheriv\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/browserify-aes/decrypter.js\n// module id = 122\n// module chunks = 0","var ManisStream = require('./manis.stream');\r\nvar ManisFunctions = require('./manis.functions');\r\nvar Status = require('./manis.status');\r\nvar ManisResponse = require('./manis.response');\r\nvar ErrorCode = require('./errorCode');\r\n\r\n/* global $, config, connection, chrome, alert, getUserMediaWithConstraints, changeLocalVideo, getConferenceHandler */\r\n/**\r\n * Indicates that desktop stream is currently in use(for toggle purpose).\r\n * @type {boolean}\r\n */\r\nvar isUsingScreenStream = false;\r\n/**\r\n * Indicates that switch stream operation is in progress and prevent from triggering new events.\r\n * @type {boolean}\r\n */\r\nvar switchInProgress = false;\r\n\r\n/**\r\n * Method used to get screen sharing stream.\r\n *\r\n * @type {function (stream_callback, failure_callback}\r\n */\r\nvar obtainDesktopStream = null;\r\n\r\n/**\r\n * Flag used to cache desktop sharing enabled state. Do not use directly as it can be <tt>null</tt>.\r\n * @type {null|boolean}\r\n */\r\nvar _desktopSharingEnabled = null;\r\n\r\n/**\r\n * Method obtains desktop stream from WebRTC 'screen' source.\r\n * Flag 'chrome://flags/#enable-usermedia-screen-capture' must be enabled.\r\n */\r\nfunction obtainWebRTCScreen(streamCallback, failCallback) {\r\n  getUserMediaWithConstraints(\r\n    ['screen'],\r\n    streamCallback,\r\n    failCallback\r\n  );\r\n}\r\n\r\n/**\r\n * Constructs inline install URL for Chrome desktop streaming extension.\r\n * The 'chromeExtensionId' must be defined in config.js.\r\n * @returns {string}\r\n */\r\nfunction getWebStoreInstallUrl() {\r\n  return config.chromeExtensionUrl;\r\n}\r\n\r\nfunction checkExtInstalled(isInstalledCallback) {\r\n  isInstalledCallback($('#ofmeet-extension-installed').length > 0);\r\n}\r\n\r\nfunction doGetStreamFromExtension(streamCallback, failCallback) {\r\n  var pending = window.setTimeout(\r\n    function () {\r\n      // console.error(\"AAAAA 3  try get the stream by Extension \");\r\n    }, 1000);\r\n\r\n  window.postMessage({\r\n    type: 'ofmeetGetScreen',\r\n    id: pending,\r\n    server: config.messageServer + ': ' + config.messageServerPort,\r\n    resource: Strophe.getResourceFromJid(connection.jid),\r\n    // options: ['screen']\r\n  }, '*');\r\n\r\n  window.addEventListener('message', function (event) {\r\n    if (event.origin != window.location.origin)\r\n      return;\r\n\r\n    if (event.data.type == 'ofmeetGotScreen') {\r\n      if (event.data.sourceId === '') {\r\n        // user canceled\r\n        switchInProgress = false;\r\n        // failCallback(\"Extension failed to get the stream\");\r\n\r\n      } else {\r\n        getUserMediaWithConstraints(['desktop'],\r\n          function (stream) {\r\n            streamCallback(stream);\r\n          },\r\n          failCallback,\r\n          null, null, null,\r\n          event.data.sourceId);\r\n      }\r\n    } else if (event.data.type == 'ofmeetGetScreenPending') {\r\n      window.clearTimeout(event.data.id);\r\n    }\r\n  });\r\n}\r\n/**\r\n * Asks Chrome extension to call chooseDesktopMedia and gets chrome 'desktop' stream for returned stream token.\r\n */\r\nfunction obtainScreenFromExtension(streamCallback, failCallback) {\r\n  checkExtInstalled(\r\n    function (isInstalled) {\r\n      if (isInstalled) {\r\n        doGetStreamFromExtension(streamCallback, failCallback);\r\n      } else {\r\n        window.open(getWebStoreInstallUrl(), \"_blank\");\r\n        console.error('Error', 'Install manually and reload webpage');\r\n        failCallback({\r\n          errorCode: ErrorCode.share_screen_extended_plugin_except\r\n        })\r\n      }\r\n    }\r\n  );\r\n}\r\n\r\n\r\nfunction getUserMediaWithConstraints(um, success_callback, failure_callback, resolution, bandwidth, fps, desktopStream) {\r\n  var constraints = {audio: false, video: false};\r\n  // if (um.indexOf('desktop') >= 0) {\r\n    constraints.video = {\r\n      mandatory: {\r\n        chromeMediaSource: \"desktop\",\r\n        chromeMediaSourceId: desktopStream,\r\n        // googLeakyBucket: true,\r\n        maxWidth: window.screen.width,\r\n        maxHeight: window.screen.height,\r\n        maxFrameRate: 15,\r\n        minFrameRate: 5\r\n      },\r\n      // optional: []\r\n    }\r\n    // constraints.video.optional.push({bandwidth: bandwidth ? bandwidth : 2048});\r\n  // }\r\n\r\n\r\n  var isFF = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\r\n\r\n  try {\r\n    if (config.enableSimulcast\r\n      && constraints.video\r\n      && constraints.video.chromeMediaSource !== 'screen'\r\n      && constraints.video.chromeMediaSource !== 'desktop'\r\n      && !isAndroid\r\n\r\n      // We currently do not support FF, as it doesn't have multistream support.\r\n      && !isFF) {\r\n      simulcast.getUserMedia(constraints, function (stream) {\r\n          console.log('onUserMediaSuccess', constraints);\r\n          success_callback(stream);\r\n        },\r\n        function (error) {\r\n          console.warn('Failed to get access to local media. Error ', error);\r\n          if (failure_callback) {\r\n            failure_callback(error, resolution, um, success_callback);\r\n          }\r\n        });\r\n    } else {\r\n      ManisStream.getMedia(constraints,\r\n        function (stream) {\r\n          console.log('onUserMediaSuccess', constraints);\r\n          success_callback(stream);\r\n        },\r\n        function (error) {\r\n          console.warn('Failed to get access to local media. Error ', error);\r\n          // if (failure_callback) {\r\n          //   failure_callback(error, resolution, um, success_callback);\r\n          // }\r\n        });\r\n\r\n    }\r\n  } catch (e) {\r\n    console.error('GUM failed: ', e);\r\n    if (failure_callback) {\r\n      failure_callback(e, resolution, um, success_callback);\r\n    }\r\n  }\r\n}\r\n/**\r\n * @returns {boolean} <tt>true</tt> if desktop sharing feature is available and enabled.\r\n */\r\nfunction isDesktopSharingEnabled() {\r\n  if (_desktopSharingEnabled === null) {\r\n    if (obtainDesktopStream === obtainScreenFromExtension) {\r\n      // Parse chrome version\r\n      var userAgent = navigator.userAgent.toLowerCase();\r\n      // We can assume that user agent is chrome, because it's enforced when 'ext' streaming method is set\r\n      var ver = parseInt(userAgent.match(/chrome\\/(\\d+)\\./)[1], 10);\r\n      console.log(\"Chrome version\" + userAgent, ver);\r\n      _desktopSharingEnabled = ver >= 34;\r\n    } else {\r\n      _desktopSharingEnabled = obtainDesktopStream === obtainWebRTCScreen;\r\n    }\r\n  }\r\n  return _desktopSharingEnabled;\r\n}\r\n\r\n/**\r\n * Call this method to toggle desktop sharing feature.\r\n * @param method pass \"ext\" to use chrome extension for desktop capture(chrome extension required),\r\n *        pass \"webrtc\" to use WebRTC \"screen\" desktop source('chrome://flags/#enable-usermedia-screen-capture'\r\n *        must be enabled), pass any other string or nothing in order to disable this feature completely.\r\n */\r\nfunction setDesktopSharing(method) {\r\n  // Check if we are running chrome\r\n  if (!navigator.webkitGetUserMedia) {\r\n    obtainDesktopStream = null;\r\n    console.info(\"Desktop sharing disabled\");\r\n  } else if (method == \"ext\") {\r\n    obtainDesktopStream = obtainScreenFromExtension;\r\n    console.info(\"Using Chrome extension for desktop sharing\");\r\n  } else if (method == \"webrtc\") {\r\n    obtainDesktopStream = obtainWebRTCScreen;\r\n    console.info(\"Using Chrome WebRTC for desktop sharing\");\r\n  }\r\n\r\n  // Reset enabled cache\r\n  _desktopSharingEnabled = null;\r\n};\r\n\r\n/**\r\n * Initializes <link rel=chrome-webstore-item /> with extension id set in config.js to support inline installs.\r\n * Host site must be selected as main website of published extension.\r\n */\r\nfunction initInlineInstalls() {\r\n  $(\"link[rel=chrome-webstore-item]\").attr(\"href\", getWebStoreInstallUrl());\r\n};\r\n\r\nfunction getSwitchStreamFailed(error) {\r\n  console.error(\"Failed to obtain the stream to switch to\", error);\r\n  switchInProgress = false;\r\n}\r\n\r\nfunction streamSwitchDone() {\r\n  switchInProgress = false;\r\n};\r\n\r\n/*\r\n * Toggles screen sharing.\r\n */\r\nfunction toggleScreenSharing(successCallback, errorCallback) {\r\n  if (switchInProgress || !obtainDesktopStream) {\r\n    console.warn(\"Switch in progress or no method defined\");\r\n    return;\r\n  }\r\n  switchInProgress = true;\r\n\r\n  // Only the focus is able to set a shared key.\r\n  if (!isUsingScreenStream) {\r\n    obtainDesktopStream(\r\n      function (stream) {\r\n        // We now use screen stream\r\n        // window.isUsingScreenStream = true;\r\n        // Hook 'oninactive' event to restore camera when screen stream stops\r\n        if (typeof stream.active !== \"undefined\") {\r\n          stream.oninactive = function () {\r\n            // console.log('++++++++++++++++++++++++ screen stream ended 11111111111');\r\n            window.isUsingScreenStream = false;\r\n            switchInProgress = false;\r\n            if(!window.removeScreenInprogress){\r\n              Status.removeScreenSourceFromConnection(function () {\r\n                $(document).trigger('mains.on.screen.share.end');\r\n              })\r\n            }else {\r\n              window.removeScreenInprogress = false;\r\n            }\r\n          };\r\n        }\r\n        //todo Firefox need implement\r\n        successCallback({\r\n          code: ManisResponse.code_200,\r\n          msg: ManisResponse.share_screen_success,\r\n          response: createResult(stream),\r\n          errorCode: ErrorCode.no_error\r\n        });\r\n      },\r\n      function (error) {\r\n        switchInProgress = false;\r\n        errorCallback({\r\n          code: ManisResponse.code_400,\r\n          msg: ManisResponse.share_screen_failed,\r\n          errorCode: error.errorCode ? error.errorCode :ErrorCode.share_screen_fetch_stream_failed\r\n        })\r\n      });\r\n  }\r\n};\r\n\r\nfunction createResult(stream) {\r\n  // stream.src = URL.createObjectURL(stream);\r\n  var _resource = Strophe.getResourceFromJid(connection.jid);\r\n  var myself = {\r\n    info: {\r\n      nickname: config.nickname ? config.nickname : manisConfg.mUsername,\r\n      resource: _resource\r\n    },\r\n    stream: stream,\r\n    status: ManisFunctions.generateStatusNode(_resource)\r\n  };\r\n  return myself;\r\n}\r\n\r\nmodule.exports = {\r\n  toggleScreenSharing: toggleScreenSharing,\r\n  streamSwitchDone: streamSwitchDone,\r\n  initInlineInstalls: initInlineInstalls,\r\n  setDesktopSharing: setDesktopSharing,\r\n  isDesktopSharingEnabled: isDesktopSharingEnabled,\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/manis.screenshare.js\n// module id = 123\n// module chunks = 0"],"sourceRoot":""}